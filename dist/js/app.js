"use strict";!function(){MynyteApi=function(){function e(){h=!0}function t(){h=!1}function n(e){var t=e.className,n=e.action,i=e.data||null,o=e.existingVars||null,r=e.successCallback||function(){},a=e.errorCallback||function(){};$.ajax({url:"https://www.mynyte.co.uk/"+C+"sneak-preview/data/extApi/"+t+".php?action="+n,type:"GET",dataType:"jsonp",jsonp:"jsonp",jsonpCallback:n,context:self,crossDomain:!0,data:i,success:function(e){r({successData:e,existingVars:o})},error:function(e,t,n){a(n)},complete:function(e){}})}function i(){var e=[self.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,self.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop],t=jQuery("html");t.data("scroll-position",e),t.data("previous-overflow",t.css("overflow")),t.css("overflow","hidden"),window.scrollTo(e[0],e[1])}function o(){var e=jQuery("html"),t=e.data("scroll-position");e.css("overflow",e.data("previous-overflow")),window.scrollTo(t[0],t[1])}function r(e,t){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.src=e,i.type="text/javascript",i.onload=i.onreadystatechange=function(){i.readyState?"complete"!==i.readyState&&"loaded"!==i.readyState||(i.onreadystatechange=null,t()):t()},n.appendChild(i)}function s(t){var n="fast"==t.speed?1:250;if(i(),e(),navigator.userAgent.match(/(iP(od|hone|ad))/)){var o=document.body.scrollTop;document.body.style.top=-1*o+"px",document.body.classList.add("mn-modal--opened")}window.setTimeout(function(){$(".mynyte-popup-cover").addClass("mynyte-popup-open")},n),t.onComplete&&t.onComplete()}function l(e){if($(".mynyte-popup-cover").removeClass("mynyte-popup-open"),o(),t(),navigator.userAgent.match(/(iP(od|hone|ad))/)){var n=parseInt(document.body.style.top,10);document.body.classList.remove("mn-modal--opened"),document.body.scrollTop=-1*n}}function c(e){function t(t){function n(e){console.log(e),$(".mn-listings-inner-container").each(function(t){$(this).removeClass("show"),$(this).data("mn-listing-type")==e&&$(this).addClass("show")}),$(".mn-listings-nav-listing").each(function(t){$(this).removeClass("active"),$(this).data("mn-nav-label-type")==e&&$(this).addClass("active")}),$(".mynyte-listings .more-listings-note").each(function(t){$(this).removeClass("show"),$(this).data("mn-listing-type")==e&&$(this).addClass("show")})}function i(){function e(e){console.log(e),window.open(e)}MynyteApi.goToFeedOption=function(t,n){t.preventDefault(),e(n)};for(var t=Object.keys(s.items),n=0,i=t.length;n<i;n++){var o=t[n],d=s.items[o],p=0==n?" show":"",g=d[0].listingTypeName,m=0==n?" show":"",f={href:T+"searchRestaurantsByFoodStyle//",text:"See more "+g+"s on MyNyte",title:"See more "+g+"s on MyNyte"};for(f.html="<div data-mn-listing-type='"+g+"' class='more-listings-note"+m+"'><a href='"+f.href+"' title='"+f.title+"'>"+f.text+"</a></div>",c+="<div data-mn-listing-type='"+o+"' class='mn-listings-inner-container trans"+p+"'>",a=0;a<d.length;a++){var h="small"==l?" with-small-image":"",v=d[a].name.replace(/ /g,"%20"),y="Event"==d[a].listingTypeName&&"default.jpg"!=d[a].currentCoverPhotoName?"https://www.mynyte.co.uk/"+C+"sneak-preview/img/user_images/cover_photo/"+d[a].currentCoverPhotoName:"https://www.mynyte.co.uk/"+C+"sneak-preview/img/user_images/profile_photo/"+d[a].currentProfilePhotoName,b="Event"==d[a].listingTypeName||"Movie"==d[a].listingTypeName||"Offer"==d[a].listingTypeName?"https://www.mynyte.co.uk/"+w+"#/app/feed/nl-feedListings///nl-feedListing/"+d[a].relListingId+"/"+d[a].listingTypeName:"https://www.mynyte.co.uk/"+w+"#/app/feed/nl-feedListings///nl-feedListing/"+d[a].relListingId+"/Business",T="https://www.mynyte.co.uk/"+w+"#/app/feed/nl-feedListings/",S=b.replace("/feed/","/"),E=S+"/"+v+"/nl-feedListing-photos/"+d[a]._listingId;b="Event"==d[a].listingTypeName||"Movie"==d[a].listingTypeName?"https://www.mynyte.co.uk/"+w+"#/app/feed/nl-feedListings///nl-feedListing/"+d[a].relListingId+"/"+d[a].listingTypeName:b,S=b.replace("/feed/","/"),"See A la Carte Menu"==d[a].tonightsFeedButtonOptionName?E=S+"/see-menu/"+d[a].relListingId+"/"+v+"/2":"See Takeaway Menu"==d[a].tonightsFeedButtonOptionName?E=S+"/see-menu/"+d[a].relListingId+"/"+v+"/1":"Book Table"==d[a].tonightsFeedButtonOptionName?(d[a].showUsersEmailAndPhoneInTableBookingResponse=1==d[a].showUsersEmailAndPhoneInTableBookingResponse,d[a].allowCommentInTableBooking=1==d[a].allowCommentInTableBooking,E=S+"/book-table/"+d[a].relListingId+"/"+v+"/"+d[a].maxTableBookingGuests+"/"+d[a].showUsersEmailAndPhoneInTableBookingResponse+"/"+d[a].allowCommentInTableBooking):"Book Tickets"==d[a].tonightsFeedButtonOptionName?E=S+"/book-tickets/"+d[a].relListingId+"/"+v:"See Details"==d[a].tonightsFeedButtonOptionName?E=b:"See Trailer"==d[a].tonightsFeedButtonOptionName&&(E=S+"//see-trailer/"+d[a].relListingId+"/"+v),c+="<a href='"+b+"' target='_blank' class='listing"+h+"'>",c+="<img class='main-img' src='"+y+"'></img>",c+="<div class='text-container'><span class='title'>"+d[a].name+"</span>",c+="<span class='description'>"+d[a].listingType1+"</span>",c+="</div>",c+="<button onclick=\"MynyteApi.goToFeedOption(event, '"+E+'\')" class="mn-listings-option-button">',c+=d[a].tonightsFeedButtonOptionName,c+="</button>",c+="</a>",a==d.length-1&&(c+="</div>",c+=f.html,n==i-1&&(c+="</div>",c+=u.html,r.append(c).css({display:"block"})))}}}function o(){var e=Object.keys(s.items),t=e.length;c+="<div class='mn-listings-nav listings-"+t+"-item-container'>";for(var n=e,o=0,r=t;o<r;o++){var a=n[o],l=(s.items[a],0==o?" active":""),u=s.items[a][0].iconClass;c+="<div onclick=\"MynyteApi.selectListingsNavItem('"+a+'\');" data-mn-nav-label-type="'+a+'" class="mn-listings-nav-listing'+l+'">',c+="<i class='fa "+u+"'></i>",c+="<span class='nav-listing-label'>"+a+"s</span>",c+="<span class='nav-listing-tri'></span>",c+="</div>",o==r-1&&(c+="</div><div class='listings-container' style='height: "+d+"px;'>",i())}}var s=t,l=e.imageSize||"small",c="",d=$(".mynyte-listings").height()-180,u={html:"<div class='mn-listings-footer'><span>Stay up to date with <b>MyNyte</b></span> <img src='https://www.mynyte.co.uk/sneak-preview/img/logo.png' /></div>"};c+={html:"<div class='mn-listings-header'><span><b>What's On &amp; About</b> in Bedford</span> <img src='https://www.mynyte.co.uk/sneak-preview/img/logo.png' /></div><span class='scrollbar'></span>"}.html,MynyteApi.selectListingsNavItem=function(e){n(e)},o()}console.log(e);var i,o=e.feedType;switch(e.feedType){case"menuDisplay":i=$(".mynyte-menu-display"),e.menuDisplayImgAlt="Log into MyNyte to book tables and make your evening plans",e.menuDisplayTranscriptNote="<b>Book Tables with ease</b>, and find out what's going on in town...",e.menuDisplayImgSrc="https://www.mynyte.co.uk/sneak-preview/img/logo.png",e.menuItemCategoryIdString=e.menuItemCategoryIdString||"0";break;case"offersFeed":i=$(".mynyte-offers-display");break;default:i=$(".mynyte-listings")}var r=e.elem||i,s={offersFeed:"getOffersFeed",menuDisplay:"getMenuItems",listingsFeed:"getBusinessesByBusinessType"},l={listingsFeed:{_profileId:e._profileId||0,businessTypesString:e.businessTypesString||"All",_townId:e._townId||1,limit:e.limit||5},menuDisplay:{_businessId:T,menuType:e.menuType||"takeaway",menuItemCategoryIdString:e.menuItemCategoryIdString||"0"}},c={_businessId:T};console.log(o,s,l),n({className:"Profile",action:s[o],data:l[o]||c,existingVars:e,successCallback:function(e){var n=e.successData,i=e.existingVars;if("offersFeed"==o){n=n.items;var a=$(".mynyte-listings").height()-34,s="<div class='header'>MyNyte Offers</div><span class='scrollbar'></span><div class='listings-container' style='height: "+a+"px;'>";for(u=0;u<n.length;u++){var l="default-offer.jpg"==n[u].currentOfferCoverPhotoName?"":"<img class='main-img' src='https://www.mynyte.co.uk/sneak-preview/img/user_images/cover_photo/"+n[u].currentOfferCoverPhotoName+"'></img>",c="default-offer.jpg"==n[u].currentOfferCoverPhotoName?"":" with-image";n[u].endDateTimeArr=n[u].endDateTime.split(" "),s+="<div class='listing with-image"+c+"'>",s+=l,s+="<div class='text-container'><span class='title'>"+n[u].name+"</span>",s+="<span class='description'>"+n[u].description+"</span>",s+="<span class='offer-end'>Ends: "+n[u].endDateTimeArr[0]+"</span>",s+="</div></div>"}s+="</div>",r.append(s).css({display:"block"})}else if("menuDisplay"==o){n=n.items,console.log(n);var d={},s="<div class='container-header'>See our Menu</div>";s+="<div class='container-dummy'>";for(var u=0;u<n.length;u++)if(void 0===d[n[u].menuItemCategoryName]&&(d[n[u].menuItemCategoryName]=[]),u==n.length-1)for(var p=0;p<n.length;p++)if(d[n[p].menuItemCategoryName].push({name:n[p].Name,price:n[p].Price}),p==n.length-1)for(var g in d)if(d.hasOwnProperty(g)){s+="<div class='listing listing-menu-item'>",s+="<div class='header'>"+g+"<span class='listing-menu-item-open'>+</span></div>",s+="<div class='body'>";for(var m=0;m<d[g].length;m++)s+="<div class='text-container'><span class='title'>"+d[g][m].name+"</span>\x3c!--<span class='options'>Options</span>--\x3e<span class='price'>Â£ "+d[g][m].price+"</span></div>",m==d[g].length-1&&$(".header").on("click",function(){$(this).siblings(".body").addClass("open")});s+="</div></div>"}s+="</div>",s+="<div class='container-footer'><span class='footer-transcript-note'>"+i.menuDisplayTranscriptNote+"</span><img class='mynyte-chat-logo' alt='"+i.menuDisplayImgAlt+"' src='"+i.menuDisplayImgSrc+"'/></div>",$(".mynyte-menu-display").addClass("mynyte-frame-container").append(s).css({display:"block"}),$("div.mynyte-menu-display").css("display","block"),$(".header").on("click",function(){var e=$(this),t=e.siblings(".body");t.hasClass("open")?(t.removeClass("open"),e.find(".listing-menu-item-open").html("+")):(t.addClass("open"),e.find(".listing-menu-item-open").html("-"))})}else"listingsFeed"==o&&(console.log(n),t(n))},errorCallback:function(){}})}function d(e){var t,n,i=e.type,o=e.currentBrand||"Mynyte",r=MynyteApi.pageVars.Globals[o],a={MyNyteTableBook:{html:"<img src='"+r["main-logo"]+"' alt='Book a restraurant table with MyNyte'/><span>Book a table with MyNyte</span>",elem:$("a.mynyte-table-book"),colourScheme:"dark",onclickFn:function(){window.open("https://www.mynyte.co.uk/#/app/profile/","mynyte-table-book-window","width=485,height=560")}},MyNyteEventEntryBook:{html:"<img src='"+r["main-logo"]+"' alt='Book event entry with MyNyte'/><span>Book event entry with MyNyte</span>",elem:$("a.mynyte-event-entry-book"),colourScheme:"dark",onclickFn:function(){window.open("https://www.mynyte.co.uk/#/app/profile/","mynyte-table-book-window","width=485,height=560")}}};n=e.elem||a[i].elem,t=e.onclickFn||a[i].onclickFn||null,colourScheme=e.colourScheme||a[i].colorScheme||"dark",n.html(a[i].html).css("display","block"),null!=t&&n.on("click",t)}function u(e){var t,n,i=e.type,o=e.colourScheme||"dark",r=e.brand||"Mynyte",a={TableBooking:{html:"<div class='container-header'>Book a Table with us through MyNyte</div><div class='container-dummy'><iframe allowtransparency='true' style='height: calc(100%); background: '"+("dark"==o?"#212121":"#f7f7f7")+";' src='"+MynyteApi.pageVars.Globals[r]["table-booking-frame-src"]+"'></iframe></div><div class='container-footer'><span class='footer-transcript-note'><b>Book Tables with ease</b>, and find out what's going on in town...</span><img class='mynyte-chat-logo' alt='Log into MyNyte to book tables and make your evening plans' src='"+MynyteApi.pageVars.Globals[r]["main-logo"]+"'/></div>",elem:$(".mynyte-table-booking"),onComplete:function(){$("div.mynyte-table-booking").addClass("mynyte-frame-container")}}};n=e.onComplete||a[i].onComplete||null,t=e.elem||a[i].elem,htmlText=a[i].html,console.log(a[i]),t.html(htmlText).css("display","block"),null!=n&&n()}function p(e){function t(){a==s.items.length-1?(MynyteApi.pageVars["Page Object"]["Business Items"]=l,g({viewType:o,successData:s,htmlString:c,htmlElem:d})):(e.i+=1,p(e))}function i(e,t,n){return e.split(t,n).join(t).length}var o=e.viewType,r=e._businessId,a=e.i,s=e.successData,l=e.businessItems,c=e.htmlString,d=e.htmlElem,u=e.viewModelProps||null,m=s.items[a];if(l[m._id]||(l[m._id]={}),l[m._id]._id=m._id,-1==m.metaName.indexOf("Arr[]")&&0!=m.metaName.indexOf("_")&&(null==u||u.indexOf(m.metaName)>-1))l[m._id][m.metaName]=m.metaValue,t();else if(-1==m.metaName.indexOf("Arr[]")&&0==m.metaName.indexOf("_Related")&&"Dropdown Selection"==o&&(null==u||u.indexOf(m.metaName)>-1))l[m._id][m.metaName]=m.metaValue,t();else if(-1==m.metaName.indexOf("Arr[]")&&0==m.metaName.indexOf("_Related")&&"Dropdown Selection"!=o){var f=m._id,h=m.metaName,v=m.metaName.replace(/-/g,"").replace("_","").replace(" Id",""),y=i(m.metaName,"-",1),b=i(m.metaName,"-",2),w=m.metaName.substring(y+1,b);n({existingVars:{thisItemId:f,thisItemMetaName:h,thisItemMetaNameFormatted:v},className:"BusinessEntity",action:"getBusinessEntityItemsMeta",data:{_businessId:r,_businessEntityItemId:m.metaValue},successCallback:function(e){if(MynyteApi.pageVars["Business Item Summary Displays"]&&MynyteApi.pageVars["Business Item Summary Displays"][0].specialProps&&MynyteApi.pageVars["Business Item Summary Displays"][0].specialProps[w]){console.log(w);var n=0;l[e.existingVars.thisItemId][e.existingVars.thisItemMetaNameFormatted]="";for(var i=0;i<e.successData.items.length;i++)console.log(w),MynyteApi.pageVars["Business Item Summary Displays"][0].specialProps[w].indexOf(e.successData.items[i].metaName)>-1&&(n>0&&(l[e.existingVars.thisItemId][e.existingVars.thisItemMetaNameFormatted]+=" - "),l[e.existingVars.thisItemId][e.existingVars.thisItemMetaNameFormatted]+=e.successData.items[i].metaValue,n+=1),i==e.successData.items.length-1&&t()}else l[e.existingVars.thisItemId][e.existingVars.thisItemMetaNameFormatted]=e.successData.items[0].metaValue,t()},errorCallback:function(){}})}else if(m.metaName.indexOf("Arr[]")>-1&&(null==u||u.indexOf(m.metaName)>-1)){var C=m.metaName.replace(" Arr[]","");l[m._id].Arrays=l[m._id].Arrays||{},l[m._id].Arrays[C]=l[m._id].Arrays[C]||[],l[m._id].Arrays[C].push(m.metaValue),t()}else t()}function g(e){var t=e.viewType,n=e.successData,i=e.htmlString,o=e.htmlElem;if(null!=n.items)for(var r=MynyteApi.pageVars["Page Object"]["Business Items"],a="Dropdown Selection"==t?"":" dropdown-selection-option",s=Object.keys(r),l=0,c=s.length;l<c;l++){var d=s[l],u="Dropdown Selection"==t?"li":"div";if(dataPropToDisplayString="","Dropdown Selection"==t){dataPropToDisplayString=" data-prop-to-display='";for(var p in r[d])"Arrays"!=p&&(dataPropToDisplayString+="<span>"+r[d][p]+" | </span>");dataPropToDisplayString+="'"}i+="<"+u+dataPropToDisplayString+" class='mynyte-business-items-summary-item"+a+"' data-item-ref='"+r[d]._id+"'>";for(var p in r[d]){var g=p.replace(/ /g,"-").toLowerCase();if("Arrays"!=p)i+="<div class='mynyte-label-container "+g+"-label-container'><label class='mynyte-label'>"+p+"</label>",i+="<span class='mynyte-label-detail'>"+r[d][p]+"</span></div>";else for(var m in r[d][p]){i+="<div class='mynyte-label-container "+p+"-label-container'><label class='mynyte-label'>"+m+"</label>",i+="<span class='mynyte-label-detail'><ul>";for(var f=0;f<r[d][p][m].length;f++)i+="<li>"+r[d][p][m][f]+"</li>";i+="</ul></span></div>"}}"Item Summary"==t?(i+="<a href='"+o.data("link")+d+"' class='action-button view-detail-button'>View Detail</a>",i+="</div>"):"Dropdown Selection"==t&&(i+="<a onclick='MynyteApi.addItemToFormFromDropdown(this);' class='action-button dropdown-option-select-button'>Select</a>"),i+="</"+u+">",l==c-1&&"Item Summary"==t?o.append(i).css({display:"block"}):l==c-1&&"Dropdown Selection"==t&&(console.log(o),o.append(i))}else i="<div>"+MynyteApi.pageVars["Business Item Summary Displays"][0].noItemsNote+"</div>","Item Summary"==t?o.append(i).css({display:"block"}):"Dropdown Selection"==t&&o.append(i)}function m(e,t){e.preventDefault();var n=$(t).data("name"),i=$("body").find(".dropdown-wrapper."+n+"-dropdown-wrapper").parents(".mynyte-popup-cover");i.hasClass("mynyte-popup-open")?i.removeClass("mynyte-popup-open"):i.addClass("mynyte-popup-open")}function f(e){var t,n,i=$(e).parents("li"),o=i.data("item-ref"),r=i.data("prop-to-display"),a=i.parents("ul.dropdown"),s=a.attr("class").split(/\s+/);$(e).parents(".mynyte-popup-open").removeClass("mynyte-popup-open"),$.each(s,function(e,i){i.indexOf("-dropdown")>-1&&(console.log(i.substr(0,i.indexOf("-dropdown"))),n=i.substr(0,i.indexOf("-dropdown")),t=$('.mynyte-form-input.mynyte-form-fake-input[data-name="'+n+'"]'),$(t).data("data-selected-item-ref")?$(t).data("selected-item-ref",o):$(t).attr("data-selected-item-ref",o),$(t).find(".selected-option-label").html(r))}),console.log(o)}var h=!1,v=$(window).height(),y=document.getElementsByTagName("script"),b=(y[y.length-1].src,"live"),w=null,C=null,T=mynyte_business_id;"undefined"!=typeof current_mynyte_env&&(b=current_mynyte_env),w="staging"==b?"staging/":"",C="staging"==b?"staging/":"live/",console.log(b),MynyteApi.pageVars={},MynyteApi.pageVars.Globals={Mynyte:{"main-logo":"https://www.mynyte.co.uk/sneak-preview/img/logo.png","table-booking-frame-src":"https://www.mynyte.co.uk/"+w+"#/app/externalApi/bookTable/light/87/0"},Myday:{"main-logo":"https://www.mydayapp.co.uk/sneak-preview/img/logo.png"}},$("body").ontouchmove=function(e){h&&e.preventDefault()},$(document).on("focus","input.popup-input",function(e){$("body").addClass("fixfixed")}).on("blur","input.popup-input",function(e){$("body").removeClass("fixfixed")}),r("//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js",function(){$(document).ready(function(){if($("head").append('<link rel="stylesheet" href="https://www.mynyte.co.uk/'+C+'css/api-style.css" type="text/css" />'),$("head").append('<link rel="stylesheet" href="https://www.mynyte.co.uk/'+C+'css/ionicons.min.css" type="text/css" />'),$("head").append('<link rel="stylesheet" href="https://webfonts.creativecloud.com/c/69721a/1w;quicksand,2,WXp:W:n4,WXn:W:n7/l" type="text/css" />'),$("head").append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css" />'),$("a.mynyte-table-book").length&&c({elem:$(".mynyte-listings"),feedType:"offersFeed"}),$("a.mynyte-table-book").length&&d({type:"MyNyteTableBook"}),$("a.mynyte-event-entry-book").length&&d({type:"MyNyteEventEntryBook"}),$("div.mynyte-live-chat").length){var e=!1,t="<div class='container-header'>Live Chat through our MyNyte Account</div>";t+="<div class='container-dummy'><button class='chat-start' onclick='MynyteApi.chatStart()'>Start a Chat</button></div>",t+="<div class='container-footer'><span class='footer-transcript-note'>"+"<b>Keep a record of all chats</b>, and find out what's going on in town..."+"</span><img class='mynyte-chat-logo' alt='"+"Log into MyNyte to save transcripts, and get updates on the latest listings Bedford"+"' src='"+"https://www.mynyte.co.uk/sneak-preview/img/logo.png"+"'/></div>",$("div.mynyte-live-chat").html(t).css("display","block").addClass("mynyte-frame-container"),MynyteApi.chatStart=function(){var t=$("div.container-header").outerHeight()+$("div.container-footer").outerHeight()+2,n=$("div.mynyte-live-chat").hasClass("mn-dark")?"dark":"light",i=$("div.mynyte-live-chat").hasClass("mn-dark")?"#212121":"#f7f7f7",o="https://www.mynyte.co.uk/#/app/externalApi/liveChat/"+n+"/87/",r="height: calc(100% - "+t+"px); background: "+i+";";e?s({speed:"fast"}):$.get("https://www.mynyte.co.uk/templates/more-views/external-api-templates/live-chat-popup.php",function(t){$("body").append(t);var n=$(".mn-popup-header").outerHeight(),i=$(".mn-popup-footer").outerHeight(),a=n+i;$(".mn-popup-close").on("click",function(){l({})}),$(".mn-popup-body").css("max-height","calc("+(.9*v-a)+"px)"),$(".mynyte-popup .start-chat").on("click",function(e){e.preventDefault(),$("div.chat-dummy").replaceWith("<iframe allowtransparency='true' style='"+r+"' src='"+o+"'></iframe>"),l({})}),e=!0,s({speed:"slow"})})}}if($("div.mynyte-table-booking").length&&u({type:TableBooking,onComplete:function(){$("div.mynyte-table-booking").addClass("mynyte-frame-container")}}),$("div.mynyte-listings").length&&c({elem:$("div.mynyte-listings"),feedType:"listingsFeed",onComplete:function(){$("div.mynyte-listings").addClass("mynyte-frame-container")}}),$("div.mynyte-business-items-summary").length){var i=$("div.mynyte-business-items-summary");MynyteApi.pageVars["Page Object"]={},MynyteApi.pageVars["Business Item Summary Displays"]=[],MynyteApi.pageVars["Business Item Summary Displays"][0]={_businessId:i.data("bid"),businessEntityItemType:i.data("item-type"),businessEntityItemTypeLabel:i.data("item-sub-type").split(",")[0],businessEntityItemSubType:i.data("item-sub-type").split(",")[1],extraFiltersString:i.data("item-extra-filters"),noItemsNote:i.data("no-items-note")||"You currently have 0 "+i.data("item-sub-type").split(",")[1]+"s.",specialProps:i.data("special-prop")},n({className:"BusinessEntity",action:"getBusinessEntityItems",data:{_businessId:MynyteApi.pageVars["Business Item Summary Displays"][0]._businessId,businessEntityItemType:MynyteApi.pageVars["Business Item Summary Displays"][0].businessEntityItemType,extraFiltersString:MynyteApi.pageVars["Business Item Summary Displays"][0].extraFiltersString},successCallback:function(e){var t="Item Summary",n=MynyteApi.pageVars["Business Item Summary Displays"][0]._businessId,i=e.successData,o={},r="";MynyteApi.pageVars["Page Object"]["Business Items"]={},null!=i.items?p({viewType:t,_businessId:n,i:0,successData:i,businessItems:o,htmlString:r,htmlElem:$("div.mynyte-business-items-summary")}):g({viewType:t,successData:i,htmlString:r,htmlElem:$("div.mynyte-business-items-summary")})},errorCallback:function(e){}})}if($("div.mynyte-business-item-detail").length&&(MynyteApi.pageVars["Page Object"]={},MynyteApi.pageVars["Business Item Detail Displays"]=[],MynyteApi.pageVars["Business Item Detail Displays"][0]={businessEntityItemId:window.location.href.indexOf("?_itemId")>-1?window.location.href.substr(window.location.href.indexOf("?_itemId=")+9,window.location.href.length):$("div.mynyte-business-item-detail").data("item-id")},n({className:"BusinessEntity",action:"getBusinessEntityItemsMeta",data:{_businessId:$("div.mynyte-business-item-detail").data("bid"),_businessEntityItemId:MynyteApi.pageVars["Business Item Detail Displays"][0].businessEntityItemId},successCallback:function(e){var t=e.successData,n="";MynyteApi.pageVars["Page Object"]=t;for(var i=0;i<t.items.length;i++)n+="<div class='mynyte-label-container'><label class='mynyte-label'>"+t.items[i].metaName+"</label>",n+="<span class='mynyte-label-detail'>"+t.items[i].metaValue+"</span></div>",i==t.items.length-1&&$("div.mynyte-business-item-detail").append(n).css({display:"block"})},errorCallback:function(e){}})),$("div.mynyte-new-business-item").length){var i=$("div.mynyte-new-business-item");MynyteApi.pageVars["Page Object"]={},MynyteApi.pageVars["New Business Item Forms"]=[],MynyteApi.pageVars["New Business Item Forms"][0]={_businessId:i.data("bid"),businessEntityItemType:i.data("item-type"),businessEntityItemTypeLabel:i.data("item-sub-type").split(",")[0],businessEntityItemSubType:i.data("item-sub-type").split(",")[1],_relatedViewModelId:i.data("viewmodel-id"),onUploadCompleteUrl:i.data("link")};var o="";if($("div.mynyte-new-business-item").data("item-extra-filters").length)for(var r=0;r<$("div.mynyte-new-business-item").data("item-extra-filters").split("||").length;r++){var a=$("div.mynyte-new-business-item").data("item-extra-filters").split("||")[r];o+="[["+a+"]]"}else o=null;n({className:"BusinessEntity",action:"getBusinessEntityItemModel",data:{_businessId:MynyteApi.pageVars["New Business Item Forms"][0]._businessId,businessEntityItemType:MynyteApi.pageVars["New Business Item Forms"][0].businessEntityItemType,extraFiltersString:o,_relatedViewModelId:MynyteApi.pageVars["New Business Item Forms"][0]._relatedViewModelId},successCallback:function(e){function t(){function e(){r+="<div class='mynyte-form-field-container mynyte-button-container'><button type='submit'>Add Item</button></div>",r+="</form>",MynyteApi.pageVars["Page Object"].Model=a,$("div.mynyte-new-business-item").append(r).css({display:"block"})}function t(t,n,i){var s=l[t];r+="<div class='mynyte-form-field-container'><label class='mynyte-form-field-label'>"+a[s].Name+n+"</label>",r+="<div class='mynyte-form-input-container'>"+i+"</div></div>",t<l.length-1?o(t+1):e()}function o(e){var i=l[e],o="",r=a[i]["Data Type"],s=a[i].Name,c=a[i]["Is Required"]?" required-input":"",d=a[i]["Is Required"]?" (Required)":"",u=a[i]["Max Length"]?" data-maxLength='"+a[i]["Max Length"]+"'":"",g=a[i]["Min Length"]?" data-minLength='"+a[i]["Min Length"]+"'":"",m=a[i]["Related Property Type"],f=a[i]["Related Property Sub-Type"];if(r.indexOf("VARCHAR")>-1)o="<input name = '"+s+"' class='mynyte-form-input mynyte-form-text-input"+c+"' type='text' "+u+g+" />",""!=u&&(o+="<span class='input-maxlength-note'>"+a[i]["Max Length"]+" Char Max</span>"),t(e,d,o);else if(r.indexOf("INT")>-1&&null!=m)o="<input name='"+s+"' class='mynyte-form-input mynyte-form-text-input"+c+"' type='number' "+u+g+" />",""!=u&&(o+="<span class='input-maxlength-note'>"+a[i]["Max Length"]+" Char Max</span>"),t(e,d,o);else if(r.indexOf("INT")>-1&&null==m){var m=a[i]["Related Property Type"]||"Business Item",f=a[i]["Related Property Sub-Type"]||"Landlord",h=a[i]["Related Property Label"]||"Business Entity Item",v=a[i]["Related Property Sub-Label"]||"'Related Business Entity Specific Item Type'",y=["_id"];if(a[i]["Related Property ViewModel Props"]){var b=a[i]["Related Property ViewModel Props"].split(",");y=[];for(var w=0;w<b.length;w++)y.push(b[w])}var C={"Business Entity Item":{class:"BusinessEntity",action:"getBusinessEntityItems",data:{_businessId:MynyteApi.pageVars["New Business Item Forms"][0]._businessId,businessEntityItemType:m,extraFiltersString:"[["+v+"='"+f+"']]",_relatedViewModelId:"NULL"}}};n({className:C[h].class,action:C[h].action,data:C[h].data,successCallback:function(n){var r=MynyteApi.pageVars["New Business Item Forms"][0]._businessId,l=n.successData,c=a[i].Name.substr(0==a[i].Name.indexOf("_")?1:0,a[i].Name.length).replace(" Id",""),u=a[i].Name.replace(/ /g,"-").toLowerCase(),g='<div class="mynyte-popup-cover dropdown-wrapper price-dropdown-wrapper"><div class="mynyte-popup"><div class="mn-popup-body"><div class="dropdown-wrapper '+s.replace(/ /g,"-").toLowerCase()+'-dropdown-wrapper"><h4>Select a '+c+'</h4><i data-name="'+u+'" class="fa fa-times" onclick="return MynyteApi.toggleRelatedItemSelect(event, this)"></i><ul class="dropdown '+s.replace(/ /g,"-").toLowerCase()+'-dropdown"></ul></div></div></div>';MynyteApi.pageVars["Page Object"]["Business Items"]={},$("body").append(g),p({viewType:"Dropdown Selection",_businessId:r,i:0,successData:l,businessItems:{},htmlString:"",htmlElem:$(".dropdown."+u+"-dropdown"),viewModelProps:y}),o="<div data-name='"+u+"' class='mynyte-form-input mynyte-form-fake-input' onclick='return MynyteApi.toggleRelatedItemSelect(event, this)'><span class='selected-option-label'></span><button class='mynyte-form-select-toggler'><i class='fa fa-chevron-down'></i></button></div>",o+="",t(e,d,o)},errorCallback:function(e){console.log("error: ",errorData)}})}else"DATE"==r?(o="<div data-name='"+a[i].Name+"' class='mynyte-form-input mynyte-form-fake-input"+c+"'><button class='mynyte-form-datepicker'></button></div>",t(e,d,o)):"TIME"==r&&(o="<div data-name='"+a[i].Name+"' class='mynyte-form-input mynyte-form-fake-input"+c+"'><button class='mynyte-form-timepicker'></button></div>",t(e,d,o))}for(var r="<form action='#'' onsubmit='return MynyteApi.addBusinessItem();'>",a={},s=0;s<i.items.length;s++){a[i.items[s]._propertyId]||(a[i.items[s]._propertyId]={});if(a[i.items[s]._propertyId][i.items[s].metaName]=i.items[s].metaValue,s==i.items.length-1){var l=Object.keys(a);o(0)}}}var i=e.successData;MynyteApi.addBusinessItem=function(){var e=MynyteApi.pageVars["Page Object"].Model;MynyteApi.pageVars["Page Object"]["Has Error"]=!1;for(var t in e){var i=e[t].Name,o=null;if($('input[name="'+i+'"]').length?(e[t].Value=$('input[name="'+i+'"]').val(),o="input"):$('div[data-name="'+i+'"]').length?(e[t].Value=$('div[data-name="'+i+'"]').attr("data-value"),o="div"):$('textarea[name="'+i+'"]').length&&(e[t].Value=$('textarea[name="'+i+'"]').val(),o="textarea"),""==e[t].Value||void 0===e[t].Value){switch(e[t].error="Please fill in a value for this field",o){case"input":$('input[name="'+i+'"]').addClass("mynyte-input-error");break;case"div":$('div[data-name="'+i+'"]').addClass("mynyte-input-error");break;case"textarea":$('textarea[name="'+i+'"]').addClass("mynyte-input-error")}MynyteApi.pageVars["Page Object"]["Has Error"]=!0}else e[t].error=null}if(MynyteApi.pageVars["Page Object"].Model=e,!MynyteApi.pageVars["Page Object"]["Has Error"]){for(var e=MynyteApi.pageVars["Page Object"].Model,r="",a=Object.keys(e),s=0,l=a.length;s<l;s++)r+="[['"+e[a[s]].Name+"', '"+e[a[s]].Value+"']]",s<l-1?r+=",":s==l-1&&(void 0!==MynyteApi.pageVars["New Business Item Forms"][0].businessEntityItemSubType&&(r+=", [['"+MynyteApi.pageVars["New Business Item Forms"][0].businessEntityItemTypeLabel+"', '"+MynyteApi.pageVars["New Business Item Forms"][0].businessEntityItemSubType+"']]"),r+=", [['Date Created', CURDATE()]], [['Time Created', CURTIME()]]");n({className:"BusinessEntity",action:"addBusinessEntityItem",data:{_businessId:MynyteApi.pageVars["New Business Item Forms"][0]._businessId,businessEntityItemName:MynyteApi.pageVars["New Business Item Forms"][0].businessEntityItemType,nameValuePairString:r},successCallback:function(e){e.successData;window.location.href=MynyteApi.pageVars["New Business Item Forms"][0].onUploadCompleteUrl},errorCallback:function(e){}})}return console.log(e),!1},t()},errorCallback:function(e){}})}})}),MynyteApi.processContact=function(e){$.ajax({url:"https://www.mynyte.co.uk/sneak-preview/data/extApi/Profile.php?action=registerContact",method:"POST",data:JSON.stringify(e),dataType:"json"}).success(function(e){console.log(e)}).error(function(e){console.log(e)})},MynyteApi.dataConnect=function(e){n(e)},MynyteApi.createFeed=function(e){c(e)},MynyteApi.createButton=function(e){d(e)},MynyteApi.createPortal=function(e){u(e)},MynyteApi.toggleRelatedItemSelect=function(e,t){m(e,t)},MynyteApi.addItemToFormFromDropdown=function(e){f(e)}},MynyteApi()}(),angular.module("ngMap",[]),function(){var e,t=function(t,n,i,o,r,a,s){e=r;var l=this;l.mapOptions,l.mapEvents,l.addObject=function(e,t){if(l.map){l.map[e]=l.map[e]||{};var n=Object.keys(l.map[e]).length;l.map[e][t.id||n]=t,l.map instanceof google.maps.Map&&("infoWindows"!=e&&t.setMap&&t.setMap&&t.setMap(l.map),t.centered&&t.position&&l.map.setCenter(t.position),"markers"==e&&l.objectChanged("markers"),"customMarkers"==e&&l.objectChanged("customMarkers"))}},l.deleteObject=function(e,t){if(t.map){var n=t.map[e];for(var i in n)n[i]===t&&(google.maps.event.clearInstanceListeners(t),delete n[i]);t.map&&t.setMap&&t.setMap(null),"markers"==e&&l.objectChanged("markers"),"customMarkers"==e&&l.objectChanged("customMarkers")}},l.observeAttrSetObj=function(t,n,i){if(n.noWatcher)return!1;for(var o=e.getAttrsToObserve(t),r=0;r<o.length;r++){var s=o[r];n.$observe(s,a.observeAndSet(s,i))}},l.zoomToIncludeMarkers=function(){var e=new google.maps.LatLngBounds;for(var t in l.map.markers)e.extend(l.map.markers[t].getPosition());for(var n in l.map.customMarkers)e.extend(l.map.customMarkers[n].getPosition());l.map.fitBounds(e)},l.objectChanged=function(e){!l.map||"markers"!=e&&"customMarkers"!=e||"auto"!=l.map.zoomToIncludeMarkers||l.zoomToIncludeMarkers()},l.initializeMap=function(){var r=l.mapOptions,d=l.mapEvents,u=l.map;if(l.map=s.getMapInstance(n[0]),a.setStyle(n[0]),u){var p=e.filter(i),g=e.getOptions(p),m=e.getControlOptions(p);r=angular.extend(g,m);for(var f in u){var h=u[f];if("object"==typeof h)for(var v in h)l.addObject(f,h[v])}l.map.showInfoWindow=l.showInfoWindow,l.map.hideInfoWindow=l.hideInfoWindow}r.zoom=r.zoom||15;var y=r.center;if(!r.center||"string"==typeof y&&y.match(/\{\{.*\}\}/))r.center=new google.maps.LatLng(0,0);else if(!(y instanceof google.maps.LatLng)){var b=r.center;delete r.center,a.getGeoLocation(b,r.geoLocationOptions).then(function(e){l.map.setCenter(e);var n=r.geoCallback;n&&o(n)(t)},function(){r.geoFallbackCenter&&l.map.setCenter(r.geoFallbackCenter)})}l.map.setOptions(r);for(var w in d)google.maps.event.addListener(l.map,w,d[w]);l.observeAttrSetObj(c,i,l.map),l.singleInfoWindow=r.singleInfoWindow,google.maps.event.trigger(l.map,"resize"),google.maps.event.addListenerOnce(l.map,"idle",function(){a.addMap(l),r.zoomToIncludeMarkers&&l.zoomToIncludeMarkers(),t.map=l.map,t.$emit("mapInitialized",l.map),i.mapInitialized&&o(i.mapInitialized)(t,{map:l.map})})},t.google=google;var c=e.orgAttributes(n),d=e.filter(i),u=e.getOptions(d,{scope:t}),p=e.getControlOptions(d),g=angular.extend(u,p),m=e.getEvents(t,d);Object.keys(m).length,l.mapOptions=g,l.mapEvents=m,u.lazyInit?(l.map={id:i.id},a.addMap(l)):l.initializeMap(),u.triggerResize&&google.maps.event.trigger(l.map,"resize"),n.bind("$destroy",function(){s.returnMapInstance(l.map),a.deleteMap(l)})};t.$inject=["$scope","$element","$attrs","$parse","Attr2MapOptions","NgMap","NgMapPool"],angular.module("ngMap").controller("__MapController",t)}(),function(){var e,t=function(t,i,o,r){r=r[0]||r[1];var a=e.orgAttributes(i),s=e.filter(o),l=e.getOptions(s,{scope:t}),c=e.getEvents(t,s),d=n(l,c);r.addObject("bicyclingLayers",d),r.observeAttrSetObj(a,o,d),i.bind("$destroy",function(){r.deleteObject("bicyclingLayers",d)})},n=function(e,t){var n=new google.maps.BicyclingLayer(e);for(var i in t)google.maps.event.addListener(n,i,t[i]);return n},i=function(n){return e=n,{restrict:"E",require:["?^map","?^ngMap"],link:t}};i.$inject=["Attr2MapOptions"],angular.module("ngMap").directive("bicyclingLayer",i)}(),function(){var e,t,n,i=function(n,i,o,r){r=r[0]||r[1];var a=e.filter(o),s=e.getOptions(a,{scope:n}),l=e.getEvents(n,a),c=i[0].parentElement.removeChild(i[0]);t(c.innerHTML.trim())(n);for(var d in l)google.maps.event.addDomListener(c,d,l[d]);r.addObject("customControls",c);var u=s.position;r.map.controls[google.maps.ControlPosition[u]].push(c),i.bind("$destroy",function(){r.deleteObject("customControls",c)})},o=function(o,r,a){return e=o,t=r,n=a,{restrict:"E",require:["?^map","?^ngMap"],link:i}};o.$inject=["Attr2MapOptions","$compile","NgMap"],angular.module("ngMap").directive("customControl",o)}(),function(){var e,t,n,i,o=function(e){e=e||{},this.el=document.createElement("div"),this.el.style.display="inline-block",this.el.style.visibility="hidden",this.visible=!0;for(var t in e)this[t]=e[t]},r=function(){o.prototype=new google.maps.OverlayView,o.prototype.setContent=function(e,t){this.el.innerHTML=e,this.el.style.position="absolute",t&&n(angular.element(this.el).contents())(t)},o.prototype.getDraggable=function(){return this.draggable},o.prototype.setDraggable=function(e){this.draggable=e},o.prototype.getPosition=function(){return this.position},o.prototype.setPosition=function(e){if(e&&(this.position=e),this.getProjection()&&"function"==typeof this.position.lng){var n=this.getProjection().fromLatLngToDivPixel(this.position),i=this,o=function(){var e=Math.round(n.x-i.el.offsetWidth/2),t=Math.round(n.y-i.el.offsetHeight-10);i.el.style.left=e+"px",i.el.style.top=t+"px",i.el.style.visibility="visible"};i.el.offsetWidth&&i.el.offsetHeight?o():t(o,300)}},o.prototype.setZIndex=function(e){e&&(this.zIndex=e),this.el.style.zIndex=this.zIndex},o.prototype.setVisible=function(e){this.el.style.display=e?"inline-block":"none",this.visible=e},o.prototype.addClass=function(e){var t=this.el.className.trim().split(" ");-1==t.indexOf(e)&&t.push(e),this.el.className=t.join(" ")},o.prototype.removeClass=function(e){var t=this.el.className.split(" "),n=t.indexOf(e);n>-1&&t.splice(n,1),this.el.className=t.join(" ")},o.prototype.onAdd=function(){this.getPanes().overlayMouseTarget.appendChild(this.el)},o.prototype.draw=function(){this.setPosition(),this.setZIndex(this.zIndex),this.setVisible(this.visible)},o.prototype.onRemove=function(){this.el.parentNode.removeChild(this.el)}},a=function(n,r){return function(a,s,l,c){c=c[0]||c[1];var d=e.orgAttributes(s),u=e.filter(l),p=e.getOptions(u,{scope:a}),g=e.getEvents(a,u);s[0].style.display="none";var m=new o(p);t(function(){a.$watch("["+r.join(",")+"]",function(){m.setContent(n,a)}),m.setContent(s[0].innerHTML,a);var e=s[0].firstElementChild.className;m.addClass("custom-marker"),m.addClass(e),p.position instanceof google.maps.LatLng||i.getGeoLocation(p.position).then(function(e){m.setPosition(e)})});for(var f in g)google.maps.event.addDomListener(m.el,f,g[f]);c.addObject("customMarkers",m),c.observeAttrSetObj(d,l,m),s.bind("$destroy",function(){c.deleteObject("customMarkers",m)})}},s=function(o,s,l,c){return e=l,t=o,n=s,i=c,{restrict:"E",require:["?^map","?^ngMap"],compile:function(e){r(),e[0].style.display="none";var t=e.html(),n=t.match(/{{([^}]+)}}/g),i=[];return(n||[]).forEach(function(e){var t=e.replace("{{","").replace("}}","");-1==e.indexOf("::")&&-1==e.indexOf("this.")&&-1==i.indexOf(t)&&i.push(e.replace("{{","").replace("}}",""))}),a(t,i)}}};s.$inject=["$timeout","$compile","Attr2MapOptions","NgMap"],angular.module("ngMap").directive("customMarker",s)}(),function(){var e,t,n,i=function(e,t){e.panel&&(e.panel=document.getElementById(e.panel)||document.querySelector(e.panel));var n=new google.maps.DirectionsRenderer(e);for(var i in t)google.maps.event.addListener(n,i,t[i]);return n},o=function(e,i){var o=new google.maps.DirectionsService,r=i;r.travelMode=r.travelMode||"DRIVING";var a=["origin","destination","travelMode","transitOptions","unitSystem","durationInTraffic","waypoints","optimizeWaypoints","provideRouteAlternatives","avoidHighways","avoidTolls","region"];for(var s in r)-1===a.indexOf(s)&&delete r[s];r.waypoints&&("[]"!=r.waypoints&&""!==r.waypoints||delete r.waypoints);var l=function(n){o.route(n,function(n,i){i==google.maps.DirectionsStatus.OK&&t(function(){e.setDirections(n)})})};r.origin&&r.destination&&("current-location"==r.origin?n.getCurrentPosition().then(function(e){r.origin=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),l(r)}):"current-location"==r.destination?n.getCurrentPosition().then(function(e){r.destination=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),l(r)}):l(r))},r=function(r,a,s,l){var c=r;return e=l,t=a,n=s,{restrict:"E",require:["?^map","?^ngMap"],link:function(n,r,a,s){s=s[0]||s[1];var l=c.orgAttributes(r),d=c.filter(a),u=c.getOptions(d,{scope:n}),p=c.getEvents(n,d),g=c.getAttrsToObserve(l),m=i(u,p);s.addObject("directionsRenderers",m),g.forEach(function(e){!function(e){a.$observe(e,function(n){if("panel"==e)t(function(){var e=document.getElementById(n)||document.querySelector(n);e&&m.setPanel(e)});else if(u[e]!==n){var i=c.toOptionValue(n,{key:e});u[e]=i,o(m,u)}})}(e)}),e.getMap().then(function(){o(m,u)}),r.bind("$destroy",function(){s.deleteObject("directionsRenderers",m)})}}};r.$inject=["Attr2MapOptions","$timeout","NavigatorGeolocation","NgMap"],angular.module("ngMap").directive("directions",r)}(),function(){angular.module("ngMap").directive("drawingManager",["Attr2MapOptions",function(e){var t=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,n,i,o){o=o[0]||o[1];var r=t.filter(i),a=t.getOptions(r,{scope:e}),s=t.getControlOptions(r),l=t.getEvents(e,r),c=new google.maps.drawing.DrawingManager({drawingMode:a.drawingmode,drawingControl:a.drawingcontrol,drawingControlOptions:s.drawingControlOptions,circleOptions:a.circleoptions,markerOptions:a.markeroptions,polygonOptions:a.polygonoptions,polylineOptions:a.polylineoptions,rectangleOptions:a.rectangleoptions});i.$observe("drawingControlOptions",function(e){c.drawingControlOptions=t.getControlOptions({drawingControlOptions:e}).drawingControlOptions,c.setDrawingMode(null),c.setMap(o.map)});for(var d in l)google.maps.event.addListener(c,d,l[d]);o.addObject("mapDrawingManager",c),n.bind("$destroy",function(){o.deleteObject("mapDrawingManager",c)})}}}])}(),function(){angular.module("ngMap").directive("dynamicMapsEngineLayer",["Attr2MapOptions",function(e){var t=e,n=function(e,t){var n=new google.maps.visualization.DynamicMapsEngineLayer(e);for(var i in t)google.maps.event.addListener(n,i,t[i]);return n};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,i,o,r){r=r[0]||r[1];var a=t.filter(o),s=t.getOptions(a,{scope:e}),l=t.getEvents(e,a,l),c=n(s,l);r.addObject("mapsEngineLayers",c)}}}])}(),function(){angular.module("ngMap").directive("fusionTablesLayer",["Attr2MapOptions",function(e){var t=e,n=function(e,t){var n=new google.maps.FusionTablesLayer(e);for(var i in t)google.maps.event.addListener(n,i,t[i]);return n};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,i,o,r){r=r[0]||r[1];var a=t.filter(o),s=t.getOptions(a,{scope:e}),l=t.getEvents(e,a,l),c=n(s,l);r.addObject("fusionTablesLayers",c)}}}])}(),function(){angular.module("ngMap").directive("heatmapLayer",["Attr2MapOptions","$window",function(e,t){var n=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,i,o,r){r=r[0]||r[1];var a=n.filter(o),s=n.getOptions(a,{scope:e});if(s.data=t[o.data]||e[o.data],!(s.data instanceof Array))throw"invalid heatmap data";s.data=new google.maps.MVCArray(s.data);var l=new google.maps.visualization.HeatmapLayer(s);n.getEvents(e,a);r.addObject("heatmapLayers",l)}}}])}(),function(){var e=function(e,t,n,i,o){var r=e,a=function(e,i,o){var r;!e.position||e.position instanceof google.maps.LatLng||delete e.position,r=new google.maps.InfoWindow(e);for(var a in i)a&&google.maps.event.addListener(r,a,i[a]);var s=o.html().trim();if(1!=angular.element(s).length)throw"info-window working as a template must have a container";return r.__template=s.replace(/\s?ng-non-bindable[='"]+/,""),r.__open=function(e,i,o){n(function(){o&&(i.anchor=o);var n=t(r.__template)(i);r.setContent(n[0]),i.$apply(),o&&o.getPosition?r.open(e,o):o&&o instanceof google.maps.LatLng?(r.open(e),r.setPosition(o)):r.open(e),r.content.parentElement.parentElement.parentElement.className="ng-map-info-window"})},r};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,n,s){s=s[0]||s[1],t.css("display","none");var l,c=r.orgAttributes(t),d=r.filter(n),u=r.getOptions(d,{scope:e}),p=r.getEvents(e,d);!u.position||u.position instanceof google.maps.LatLng||(l=u.position);var g=a(u,p,t);l&&o.getGeoLocation(l).then(function(t){g.setPosition(t),g.__open(s.map,e,t);var o=n.geoCallback;o&&i(o)(e)}),s.addObject("infoWindows",g),s.observeAttrSetObj(c,n,g),s.showInfoWindow=s.map.showInfoWindow=s.showInfoWindow||function(t,n,i){var o="string"==typeof t?t:n,r="string"==typeof t?n:i;if("string"==typeof r)if(void 0!==s.map.markers&&void 0!==s.map.markers[r])r=s.map.markers[r];else{if(s.map.customMarkers,void 0===s.map.customMarkers[r])throw new Error("Cant open info window for id "+r+". Marker or CustomMarker is not defined");r=s.map.customMarkers[r]}var a=s.map.infoWindows[o],l=r||(this.getPosition?this:null);a.__open(s.map,e,l),s.singleInfoWindow&&(s.lastInfoWindow&&e.hideInfoWindow(s.lastInfoWindow),s.lastInfoWindow=o)},s.hideInfoWindow=s.map.hideInfoWindow=s.hideInfoWindow||function(e,t){var n="string"==typeof e?e:t;s.map.infoWindows[n].close()},e.showInfoWindow=s.map.showInfoWindow,e.hideInfoWindow=s.map.hideInfoWindow,o.getMap().then(function(t){if(g.visible&&g.__open(t,e),g.visibleOnMarker){var n=g.visibleOnMarker;g.__open(t,e,t.markers[n])}})}}};e.$inject=["Attr2MapOptions","$compile","$timeout","$parse","NgMap"],angular.module("ngMap").directive("infoWindow",e)}(),function(){angular.module("ngMap").directive("kmlLayer",["Attr2MapOptions",function(e){var t=e,n=function(e,t){var n=new google.maps.KmlLayer(e);for(var i in t)google.maps.event.addListener(n,i,t[i]);return n};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,i,o,r){r=r[0]||r[1];var a=t.orgAttributes(i),s=t.filter(o),l=t.getOptions(s,{scope:e}),c=t.getEvents(e,s),d=n(l,c);r.addObject("kmlLayers",d),r.observeAttrSetObj(a,o,d),i.bind("$destroy",function(){r.deleteObject("kmlLayers",d)})}}}])}(),function(){angular.module("ngMap").directive("mapData",["Attr2MapOptions","NgMap",function(e,t){var n=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,i,o){var r=n.filter(o),a=n.getOptions(r,{scope:e}),s=n.getEvents(e,r,s);t.getMap().then(function(t){for(var n in a){var i=a[n];"function"==typeof e[i]?t.data[n](e[i]):t.data[n](i)}for(var o in s)t.data.addListener(o,s[o])})}}}])}(),function(){var e,t,n,i,o=function(n,o,r){var a=r.mapLazyLoadParams||r.mapLazyLoad;if(window.lazyLoadCallback=function(){e(function(){o.html(i),t(o.contents())(n)},100)},void 0===window.google||void 0===window.google.maps){var s=document.createElement("script");s.src=a+(a.indexOf("?")>-1?"&":"?")+"callback=lazyLoadCallback",document.querySelector('script[src="'+s.src+'"]')||document.body.appendChild(s)}else o.html(i),t(o.contents())(n)},r=function(e,t){return t.mapLazyLoad,i=e.html(),n=t.mapLazyLoad,(void 0===window.google||void 0===window.google.maps)&&(e.html(""),{pre:o})},a=function(n,i){return t=n,e=i,{compile:r}};a.$inject=["$compile","$timeout"],angular.module("ngMap").directive("mapLazyLoad",a)}(),function(){angular.module("ngMap").directive("mapType",["$parse","NgMap",function(e,t){return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,i,o,r){r=r[0]||r[1];var a,s=o.name;if(!s)throw"invalid map-type name";if(!(a=e(o.object)(n)))throw"invalid map-type object";t.getMap().then(function(e){e.mapTypes.set(s,a)}),r.addObject("mapTypes",a)}}}])}(),function(){var e=function(){return{restrict:"AE",controller:"__MapController",conrollerAs:"ngmap"}};angular.module("ngMap").directive("map",[e]),angular.module("ngMap").directive("ngMap",[e])}(),function(){angular.module("ngMap").directive("mapsEngineLayer",["Attr2MapOptions",function(e){var t=e,n=function(e,t){var n=new google.maps.visualization.MapsEngineLayer(e);for(var i in t)google.maps.event.addListener(n,i,t[i]);return n};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,i,o,r){r=r[0]||r[1];var a=t.filter(o),s=t.getOptions(a,{scope:e}),l=t.getEvents(e,a,l),c=n(s,l);r.addObject("mapsEngineLayers",c)}}}])}(),function(){var e,t,n,i=function(e,t){var i;if(n.defaultOptions.marker)for(var o in n.defaultOptions.marker)void 0===e[o]&&(e[o]=n.defaultOptions.marker[o]);e.position instanceof google.maps.LatLng||(e.position=new google.maps.LatLng(0,0)),i=new google.maps.Marker(e),Object.keys(t).length;for(var r in t)r&&google.maps.event.addListener(i,r,t[r]);return i},o=function(o,r,a,s){s=s[0]||s[1];var l,c=e.orgAttributes(r),d=e.filter(a),u=e.getOptions(d,o,{scope:o}),p=e.getEvents(o,d);u.position instanceof google.maps.LatLng||(l=u.position);var g=i(u,p);s.addObject("markers",g),l&&n.getGeoLocation(l).then(function(e){g.setPosition(e),u.centered&&g.map.setCenter(e);var n=a.geoCallback;n&&t(n)(o)}),s.observeAttrSetObj(c,a,g),r.bind("$destroy",function(){s.deleteObject("markers",g)})},r=function(i,r,a){return e=i,t=r,n=a,{restrict:"E",require:["^?map","?^ngMap"],link:o}};r.$inject=["Attr2MapOptions","$parse","NgMap"],angular.module("ngMap").directive("marker",r)}(),function(){angular.module("ngMap").directive("overlayMapType",["NgMap",function(e){return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,n,i,o){o=o[0]||o[1];var r=i.initMethod||"insertAt",a=t[i.object];e.getMap().then(function(e){if("insertAt"==r){var t=parseInt(i.index,10);e.overlayMapTypes.insertAt(t,a)}else"push"==r&&e.overlayMapTypes.push(a)}),o.addObject("overlayMapTypes",a)}}}])}(),function(){var e=function(e,t){var n=e;return{restrict:"A",require:"?ngModel",link:function(e,i,o,r){if("false"===o.placesAutoComplete)return!1;var a=n.filter(o),s=n.getOptions(a,{scope:e}),l=n.getEvents(e,a),c=new google.maps.places.Autocomplete(i[0],s);for(var d in l)google.maps.event.addListener(c,d,l[d]);var u=function(){t(function(){r&&r.$setViewValue(i.val())},100)};google.maps.event.addListener(c,"place_changed",u),i[0].addEventListener("change",u),o.$observe("types",function(e){if(e){var t=n.toOptionValue(e,{key:"types"});c.setTypes(t)}})}}};e.$inject=["Attr2MapOptions","$timeout"],angular.module("ngMap").directive("placesAutoComplete",e)}(),function(){var e=function(e,t){var n,i=e.name;switch(delete e.name,i){case"circle":e.center instanceof google.maps.LatLng||(e.center=new google.maps.LatLng(0,0)),n=new google.maps.Circle(e);break;case"polygon":n=new google.maps.Polygon(e);break;case"polyline":n=new google.maps.Polyline(e);break;case"rectangle":n=new google.maps.Rectangle(e);break;case"groundOverlay":case"image":var o=e.url,r={opacity:e.opacity,clickable:e.clickable,id:e.id};n=new google.maps.GroundOverlay(o,e.bounds,r)}for(var a in t)t[a]&&google.maps.event.addListener(n,a,t[a]);return n},t=function(t,n,i){var o=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,r,a,s){s=s[0]||s[1];var l,c,d=o.orgAttributes(r),u=o.filter(a),p=o.getOptions(u,{scope:t}),g=o.getEvents(t,u);c=p.name,p.center instanceof google.maps.LatLng||(l=p.center);var m=e(p,g);s.addObject("shapes",m),l&&"circle"==c&&i.getGeoLocation(l).then(function(e){m.setCenter(e),m.centered&&m.map.setCenter(e);var i=a.geoCallback;i&&n(i)(t)}),s.observeAttrSetObj(d,a,m),r.bind("$destroy",function(){s.deleteObject("shapes",m)})}}};t.$inject=["Attr2MapOptions","$parse","NgMap"],angular.module("ngMap").directive("shape",t)}(),function(){var e=function(e,t){var n=e,i=function(e,t,n){var i,o;t.container&&(o=document.getElementById(t.container),o=o||document.querySelector(t.container)),o?i=new google.maps.StreetViewPanorama(o,t):(i=e.getStreetView(),i.setOptions(t));for(var r in n)r&&google.maps.event.addListener(i,r,n[r]);return i};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,o,r){var a=n.filter(r),s=n.getOptions(a,{scope:e}),l=n.getControlOptions(a),c=angular.extend(s,l),d=n.getEvents(e,a);t.getMap().then(function(e){var t=i(e,c,d);e.setStreetView(t),!t.getPosition()&&t.setPosition(e.getCenter()),google.maps.event.addListener(t,"position_changed",function(){t.getPosition()!==e.getCenter()&&e.setCenter(t.getPosition())});var n=google.maps.event.addListener(e,"center_changed",function(){t.setPosition(e.getCenter()),google.maps.event.removeListener(n)})})}}};e.$inject=["Attr2MapOptions","NgMap"],angular.module("ngMap").directive("streetViewPanorama",e)}(),function(){angular.module("ngMap").directive("trafficLayer",["Attr2MapOptions",function(e){var t=e,n=function(e,t){var n=new google.maps.TrafficLayer(e);for(var i in t)google.maps.event.addListener(n,i,t[i]);return n};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,i,o,r){r=r[0]||r[1];var a=t.orgAttributes(i),s=t.filter(o),l=t.getOptions(s,{scope:e}),c=t.getEvents(e,s),d=n(l,c);r.addObject("trafficLayers",d),r.observeAttrSetObj(a,o,d),i.bind("$destroy",function(){r.deleteObject("trafficLayers",d)})}}}])}(),function(){angular.module("ngMap").directive("transitLayer",["Attr2MapOptions",function(e){var t=e,n=function(e,t){var n=new google.maps.TransitLayer(e);for(var i in t)google.maps.event.addListener(n,i,t[i]);return n};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,i,o,r){r=r[0]||r[1];var a=t.orgAttributes(i),s=t.filter(o),l=t.getOptions(s,{scope:e}),c=t.getEvents(e,s),d=n(l,c);r.addObject("transitLayers",d),r.observeAttrSetObj(a,o,d),i.bind("$destroy",function(){r.deleteObject("transitLayers",d)})}}}])}(),function(){var e=/([\:\-\_]+(.))/g,t=/^moz([A-Z])/,n=function(){return function(n){return n.replace(e,function(e,t,n,i){return i?n.toUpperCase():n}).replace(t,"Moz$1")}};angular.module("ngMap").filter("camelCase",n)}(),function(){var e=function(){return function(e){try{return JSON.parse(e),e}catch(t){return e.replace(/([\$\w]+)\s*:/g,function(e,t){return'"'+t+'":'}).replace(/'([^']+)'/g,function(e,t){return'"'+t+'"'})}}};angular.module("ngMap").filter("jsonize",e)}(),function(){var isoDateRE=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/,Attr2MapOptions=function($parse,$timeout,$log,NavigatorGeolocation,GeoCoder,camelCaseFilter,jsonizeFilter){var orgAttributes=function(e){e.length>0&&(e=e[0]);for(var t={},n=0;n<e.attributes.length;n++){var i=e.attributes[n];t[i.name]=i.value}return t},getJSON=function(e){var t=/^[\+\-]?[0-9\.]+,[ ]*\ ?[\+\-]?[0-9\.]+$/;return e.match(t)&&(e="["+e+"]"),JSON.parse(jsonizeFilter(e))},getLatLng=function(e){var t=e;return e[0].constructor==Array?t=e.map(function(e){return new google.maps.LatLng(e[0],e[1])}):!isNaN(parseFloat(e[0]))&&isFinite(e[0])&&(t=new google.maps.LatLng(t[0],t[1])),t},toOptionValue=function(input,options){var output;try{output=getNumber(input)}catch(err){try{var output=getJSON(input);if(output instanceof Array)output=output[0].constructor==Object?output:getLatLng(output);else if(output===Object(output)){var newOptions=options;newOptions.doNotConverStringToNumber=!0,output=getOptions(output,newOptions)}}catch(err2){if(input.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{var exp="new google.maps."+input;output=eval(exp)}catch(e){output=input}else if(input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{var matches=input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);output=google.maps[matches[1]][matches[2]]}catch(e){output=input}else if(input.match(/^[A-Z]+$/))try{var capitalizedKey=options.key.charAt(0).toUpperCase()+options.key.slice(1);options.key.match(/temperatureUnit|windSpeedUnit|labelColor/)?(capitalizedKey=capitalizedKey.replace(/s$/,""),output=google.maps.weather[capitalizedKey][input]):output=google.maps[capitalizedKey][input]}catch(e){output=input}else if(input.match(isoDateRE))try{output=new Date(input)}catch(e){output=input}else if(input.match(/^{/)&&options.scope)try{var expr=input.replace(/{{/,"").replace(/}}/g,"");output=options.scope.$eval(expr)}catch(e){output=input}else output=input}}if(("center"==options.key||"center"==options.key)&&output instanceof Array&&(output=new google.maps.LatLng(output[0],output[1])),"bounds"==options.key&&output instanceof Array&&(output=new google.maps.LatLngBounds(output[0],output[1])),"icons"==options.key&&output instanceof Array)for(var i=0;i<output.length;i++){var el=output[i];el.icon.path.match(/^[A-Z_]+$/)&&(el.icon.path=google.maps.SymbolPath[el.icon.path])}if("icon"==options.key&&output instanceof Object){(""+output.path).match(/^[A-Z_]+$/)&&(output.path=google.maps.SymbolPath[output.path]);for(var key in output){var arr=output[key];"anchor"==key||"origin"==key?output[key]=new google.maps.Point(arr[0],arr[1]):"size"!=key&&"scaledSize"!=key||(output[key]=new google.maps.Size(arr[0],arr[1]))}}return output},getAttrsToObserve=function(e){var t=[];if(!e.noWatcher)for(var n in e){var i=e[n];i&&i.match(/\{\{.*\}\}/)&&t.push(camelCaseFilter(n))}return t},filter=function(e){var t={};for(var n in e)n.match(/^\$/)||n.match(/^ng[A-Z]/)||(t[n]=e[n]);return t},getOptions=function(e,t){t=t||{};var n={};for(var i in e)if(e[i]||0===e[i]){if(i.match(/^on[A-Z]/))continue;if(i.match(/ControlOptions$/))continue;"string"!=typeof e[i]?n[i]=e[i]:t.doNotConverStringToNumber&&e[i].match(/^[0-9]+$/)?n[i]=e[i]:n[i]=toOptionValue(e[i],{key:i,scope:t.scope})}return n},getEvents=function(e,t){var n={},i=function(e){return"_"+e.toLowerCase()},o=function(t){var n=t.match(/([^\(]+)\(([^\)]*)\)/),i=n[1],o=n[2].replace(/event[ ,]*/,""),r=$parse("["+o+"]");return function(t){function n(e,t){return e[t]}var o=r(e),a=i.split(".").reduce(n,e);a&&a.apply(this,[t].concat(o)),$timeout(function(){e.$apply()})}};for(var r in t)if(t[r]){if(!r.match(/^on[A-Z]/))continue;var a=r.replace(/^on/,"");a=a.charAt(0).toLowerCase()+a.slice(1),a=a.replace(/([A-Z])/g,i);var s=t[r];n[a]=new o(s)}return n},getControlOptions=function(e){var t={};if("object"!=typeof e)return!1;for(var n in e)if(e[n]){if(!n.match(/(.*)ControlOptions$/))continue;var i=e[n],o=i.replace(/'/g,'"');o=o.replace(/([^"]+)|("[^"]+")/g,function(e,t,n){return t?t.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):n});try{var r=JSON.parse(o);for(var a in r)if(r[a]){var s=r[a];if("string"==typeof s?s=s.toUpperCase():"mapTypeIds"===a&&(s=s.map(function(e){return e.match(/^[A-Z]+$/)?google.maps.MapTypeId[e.toUpperCase()]:e})),"style"===a){var l=n.charAt(0).toUpperCase()+n.slice(1),c=l.replace(/Options$/,"")+"Style";r[a]=google.maps[c][s]}else r[a]="position"===a?google.maps.ControlPosition[s]:s}t[n]=r}catch(e){}}return t};return{filter:filter,getOptions:getOptions,getEvents:getEvents,getControlOptions:getControlOptions,toOptionValue:toOptionValue,getAttrsToObserve:getAttrsToObserve,orgAttributes:orgAttributes}};Attr2MapOptions.$inject=["$parse","$timeout","$log","NavigatorGeolocation","GeoCoder","camelCaseFilter","jsonizeFilter"],angular.module("ngMap").service("Attr2MapOptions",Attr2MapOptions)}(),function(){var e,t=function(t){var n=e.defer();return(new google.maps.Geocoder).geocode(t,function(e,t){t==google.maps.GeocoderStatus.OK?n.resolve(e):n.reject(t)}),n.promise},n=function(n){return e=n,{geocode:t}};n.$inject=["$q"],angular.module("ngMap").service("GeoCoder",n)}(),function(){var e,t=function(t){var n=e.defer();return navigator.geolocation?(void 0===t?t={timeout:5e3}:void 0===t.timeout&&(t.timeout=5e3),navigator.geolocation.getCurrentPosition(function(e){n.resolve(e)},function(e){n.reject(e)},t)):n.reject("Browser Geolocation service failed."),n.promise},n=function(n){return e=n,{getCurrentPosition:t}};n.$inject=["$q"],angular.module("ngMap").service("NavigatorGeolocation",n)}(),function(){var e,t,n=[],i=function(i){var o=t.createElement("div");o.style.width="100%",o.style.height="100%",i.appendChild(o);var r=new e.google.maps.Map(o,{});return n.push(r),r},o=function(e){for(var t,i=0;i<n.length;i++){var o=n[i];if(!o.inUse){var r=o.getDiv();e.appendChild(r),t=o;break}}return t},r=function(e){var t=o(e);return t||(t=i(e)),t.inUse=!0,t},a=function(e){e.inUse=!1},s=function(i,o){return t=i[0],e=o,{mapInstances:n,getMapInstance:r,returnMapInstance:a}};s.$inject=["$document","$window"],angular.module("ngMap").factory("NgMapPool",s)}(),function(){var e,t,n,i,o,r,a,s={},l=function(n,i){var o;return n.currentStyle?o=n.currentStyle[i]:e.getComputedStyle&&(o=t.defaultView.getComputedStyle(n,null).getPropertyValue(i)),o},c=function(e){var t=s[e||0];if(!(t.map instanceof google.maps.Map))return t.initializeMap(),t.map},d=function(t){function i(t){s[r]?o.resolve(s[r].map):t>a?o.reject("could not find map"):e.setTimeout(function(){i(t+100)},100)}t=t||{};var o=n.defer(),r=t.id||0,a=t.timeout||2e3;return i(0),o.promise},u=function(e){if(e.map){var t=Object.keys(s).length;s[e.map.id||t]=e}},p=function(e){var t=Object.keys(s).length-1,n=e.map.id||t;if(e.map){for(var i in e.mapEvents)$log.debug("clearing map events",i),google.maps.event.clearListeners(e.map,i);e.map.controls&&e.map.controls.forEach(function(e){e.clear()})}delete s[n]},g=function(e,t){var o=n.defer();return!e||e.match(/^current/i)?i.getCurrentPosition(t).then(function(e){var t=e.coords.latitude,n=e.coords.longitude,i=new google.maps.LatLng(t,n);o.resolve(i)},function(e){o.reject(e)}):r.geocode({address:e}).then(function(e){o.resolve(e[0].geometry.location)},function(e){o.reject(e)}),o.promise},m=function(e,t){return function(n){if(n){var i=a("set-"+e),r=o.toOptionValue(n,{key:e});t[i]&&(e.match(/center|position/)&&"string"==typeof r?g(r).then(function(e){t[i](e)}):t[i](r))}}},f=function(e){"true"==e.getAttribute("default-style")?(e.style.display="block",e.style.height="300px"):("block"!=l(e,"display")&&(e.style.display="block"),l(e,"height").match(/^(0|auto)/)&&(e.style.height="300px"))};angular.module("ngMap").provider("NgMap",function(){var s={};this.setDefaultOptions=function(e){s=e};var l=function(l,h,v,y,b,w,C){return e=l,t=h[0],n=v,i=y,o=b,r=w,a=C,{defaultOptions:s,addMap:u,deleteMap:p,getMap:d,initMap:c,setStyle:f,getGeoLocation:g,observeAndSet:m}};l.$inject=["$window","$document","$q","NavigatorGeolocation","Attr2MapOptions","GeoCoder","camelCaseFilter"],this.$get=l})}(),function(){var e,t=function(t,n){n=n||t.getCenter();var i=e.defer();return(new google.maps.StreetViewService).getPanoramaByLocation(n||t.getCenter,100,function(e,t){t===google.maps.StreetViewStatus.OK?i.resolve(e.location.pano):i.resolve(!1)}),i.promise},n=function(e,t){new google.maps.StreetViewPanorama(e.getDiv(),{enableCloseButton:!0}).setPano(t)},i=function(i){return e=i,{getPanorama:t,setPanorama:n}};i.$inject=["$q"],angular.module("ngMap").service("StreetView",i)}();var RootUrl="Staging"==IntendedEnvironment?"https://www.mynyte.co.uk/staging/":"https://www.mynyte.co.uk/live/",AssetsFolderUrl=RootUrl+"sneak-preview",AnalyticsScriptSrc="browser"==IntendedPlatform?" https://www.google-analytics.com/ ":"",MetaContent="default-src gap://ready file://* *; script-src 'self' 'unsafe-inline' 'unsafe-eval' *; style-src 'self' 'unsafe-inline' *; img-src 'self' "+RootUrl+" https://csi.gstatic.com/ https://1.bp.blogspot.com/ https://stats.g.doubleclick.net/ https://www.cineworld.co.uk/ https://maps.googleapis.com/"+AnalyticsScriptSrc+"data:";app.constant("EnvironmentVariables",{IntendedPlatform:IntendedPlatform,IntendedEnvironment:IntendedEnvironment,DebugMode:DebugMode,MetaContent:MetaContent,RootUrl:RootUrl,AssetsFolderUrl:AssetsFolderUrl,AssetsFolderRelUrl:"Staging"==IntendedEnvironment?"":"/sneak-preview"}),app.constant("Config",{CategoriesUrl:AssetsFolderUrl+"/data/sp/Categories.php",ContactsUrl:AssetsFolderUrl+"/data/sp/Contacts.php",CreateProfileUrl:AssetsFolderUrl+"/data/sp/Profile.php",OffersUrl:AssetsFolderUrl+"/data/sp/Offer.php",EventsUrl:AssetsFolderUrl+"/data/sp/Event.php",ListingsUrl:AssetsFolderUrl+"/data/sp/Listing.php",TaxiUrl:AssetsFolderUrl+"/data/sp/Taxi.php",NotificationUrl:AssetsFolderUrl+"/data/sp/Notification.php",MessageUrl:AssetsFolderUrl+"/data/sp/Message.php",MenuItemUrl:AssetsFolderUrl+"/data/sp/MenuItem.php",TableBookingUrl:AssetsFolderUrl+"/data/sp/TableBooking.php",MovieUrl:AssetsFolderUrl+"/data/sp/Movie.php",CineworldApiUrl:"https://www.cineworld.co.uk/api/quickbook/films",ImageUploadUrl:AssetsFolderUrl+"/data/functions/image-upload.php",FilesUrl:AssetsFolderUrl+"/data/functions/files.php",MovieDBApiKey:"bad6907fbc0593ecf082f5022a24804c"}),app.run(function(e,t,n,i,o,r,a,s){function l(){if(0==c)return c+=1,a.makeUserInactive(n.user._profileId,n.user._oneSignalId).success(function(){}).error(function(){}),null==n.addBackActiveUserTimer&&(n.addBackActiveUserTimer=window.setTimeout(function(){n.addBackActiveUserTimer=null},15e3)),4}n.$on("$stateChangeSuccess",function(e,t,r){var a=t.name;n.currentViewName=a;var l={"app.feed":{title:""},"app.profile":{title:"MyNyte"},"app.resetPassword":{title:"Reset Password"},"app.registerIntro":{title:"Sign-up"},"app.register":{title:"Sign-up"},"app.notificationsSummary":{title:"Notifications"},"app.notification":{title:"Profile"},"app.accountSettings":{title:"Profile Settings"},"app.contactMyNyte":{title:"Contact the MyNyte Team"},"app.offers":{title:"Offers"},"app.feed.nlfeedListings":{title:"Listings"},"app.taxi":{title:"Taxi"},"app.contacts":{title:"Contacts"},"app.addContact":{title:"New Contact"},"app.contactDetail":{title:"Profile"},"app.businessItemSettings":{title:"Business Settings"},"app.addBusinessItem":{title:"Profile"},"app.completeTakeawayOrder":{title:"Profile"},"app.more":{title:"Coming Soon ..."}},c=["app.profile","app.offers","app.feed","app.taxi"],d=["app.admin","app.movieMaintenance","app.fillTimeSheet","app.contacts","app.marketingEmails","app.helpDocumentation","app.myNyteItems","app.myNyteItem"],u=["app.feed"],p=["app.profile","app.registerIntro","app.register","app.notificationsSummary","app.notification","app.profile.messageGroups","app.profile.messageGroups.messageGroup","app.offers","app.offers.offerDetail","app.feed.nlfeedListings","app.feed.nlfeedListing","app.taxi","app.contacts","app.addContact","app.contactDetail","app.businessItems","app.businessItem","app.businessItemSettings","app.addBusinessItem","app.seeMenu","app.seeMenuItems","app.seeBusinessMenuItems","app.completeTakeawayOrder","app.bookTable","app.more"],g=["app.profile","app.registerFinal","app.offers","app.feed","app.taxi","app.more","app.downloadTheApp"],m=["app.profile.messageGroups","app.contacts","app.contactDetail","app.businessItems","app.businessItem","app.seeBusinessMenuItems","app.accountSettingsAdvanced"],f=[,"app.profile.messageGroups","app.contacts","app.seeBusinessMenuItems"],h=["app.feed"],v=["app.contactDetail","app.accountSettingsAdvanced"],y=["app.businessItems"],b=["app.seeMenuItems"];if(n.currentViewType=d.indexOf(a)>-1?"admin":"non-admin",n.pageTitle=void 0!==l[a]?l[a].title:n.pageTitle,void 0!==l[a]&&n.$broadcast("view.enter",{viewName:a}),n.pageSubtitle="app.profile.messageGroups.messageGroup"==n.currentViewName?n.pageSubtitle:null,"app.profile.messageGroups.messageGroup"!=n.currentViewName&&null!=n.messageGroupTimer&&clearTimeout(n.messageGroupTimer),n.showAssistantButton=-1!=c.indexOf(a),n.showAssistantButton=("app.feed"!=a||!n.showHeaderButtons&&!n.showSearchPanel)&&n.showAssistantButton,window.setTimeout(function(){n.assistantButtonActive=-1!=c.indexOf(a)},300),n.hideSearch=-1==u.indexOf(a),n.hideSearch=!("app.feed"!=a||!n.showHeaderButtons)||n.hideSearch,n.hideSearch||($("input#search-input").removeClass("isHidden").addClass("isVisible"),$(".search-icon").addClass("isVisible")),n.searchActive=!1,!n.hideSearch){window.setTimeout(function(){n.searchActive=!0},500)}console.log("search",n.hideSearch),n.showStatsButton=!1,n.hideTheWhatsOpenFunction=-1!=p.indexOf(a),n.showBackButton=-1==g.indexOf(a),n.backButtonFunction=n.initialBackButtonFunction,o.views.swipeBackEnabled("app.profile"!=a),n.showTopRightButton=-1!=m.indexOf(a),n.topRightButtonIsPlus=-1!=f.indexOf(a),n.topRightButtonIsEdit=-1!=v.indexOf(a),n.topRightButtonIsClock=-1!=h.indexOf(a),n.topRightButtonIsSettings=-1!=y.indexOf(a)&&"BusinessMenuItemCats"==i.itemType,n.topRightButtonIsPlus=!n.topRightButtonIsSettings&&n.topRightButtonIsPlus,n.showTopRightMenuOrderTray=-1!=b.indexOf(a),"app.feed"==a&&(n.topRightButtonFunction=n.feedTopRightButtonFunction),n.topRightButtonIsEdit||n.topRightButtonIsPlus||n.topRightButtonIsSettings||n.showBackButton?$("ion-view").addClass("has-breadcrumb"):$("ion-view").removeClass("has-breadcrumb"),"app.profile.messageGroups.messageGroup"==a?"undefined"!=typeof cordova&&cordova.plugins&&cordova.plugins.Keyboard.disableScroll(!1):"undefined"!=typeof cordova&&cordova.plugins&&cordova.plugins.Keyboard.disableScroll(!0),n.goBackOne=function(e){n.goingBackOne=!0,s(function(){n.goingBackOne=!1},180),n.currentlyEditing=!1,n.editing=!1,n.backButtonFunction()},n.topRightTrayFunction=function(){},n.showTopRightMenuOrderTray&&(n.topRightTrayFunction=function(){n.backButtonFunction(),n.backButtonFunction=function(){}})}),n.$on("$routeChangeStart",function(e,t,i){"true"==sessionStorage.restorestate&&(alert("restoring"),n.$broadcast("restorestate"),sessionStorage.restorestate=!1)});var c=0;$(window).on("beforeunload",function(){return l()}),document.addEventListener("pause",l,!1),document.addEventListener("resign",l,!1),window.onbeforeunload=function(){l()}}),app.directive("menuCloseKeepHistory",["$ionicHistory",function(e){return{restrict:"AC",link:function(t,n){n.bind("click",function(){var t=n.inheritedData("$ionSideMenusController");t&&(e.nextViewOptions({historyRoot:!1,disableAnimate:!0,expire:300}),t.close())})}}}]),app.directive("dir",function(e,t){return{restrict:"E",link:function(n,i,o){n.$watch(o.content,function(){i.html(t(o.content)(n)),e(i.contents())(n)},!0)}}}),app.directive("eatClickIf",["$parse","$rootScope",function(e,t){return{priority:100,restrict:"A",link:function(n,i){var o=e(i.eatClickIf);return{pre:function(e,n){n.on("click",function(n){var i=function(){if(o(e,{$event:n}))return n.stopImmediatePropagation(),n.preventDefault(),!1};t.$$phase?e.$evalAsync(i):e.$apply(i)})},post:function(){}}}}}]),app.directive("horizontalSlider",function(e,t){return{link:function(n,i,o){i.currentLeft=0;i.isMainSearchSlider=i.parent("nightfinder-horizontal-slider").length,i.gestureRequired=15,i.negativeGestureRequired=-15,i[0].slideLocked=!1,i.isMainSearchSlider&&(i.gestureRequired=2,i.negativeGestureRequired=-2);var r=function(e,i){var o=i>0?1:-1,r=$(".nightfinder-horizontal-slider").find(".slider-option").length;$(".nightfinder-horizontal-slider").find(".slider-option").each(function(i){var a=$(this).attr("data-index"),s=$(this).css("left");$(this).removeClass("index-"+a),$(this).css({left:s+33.33*o+"%"}),a=parseInt(a)+o,a=4==a?-1:a,a=-2==a?3:a,$(this).attr("data-index",a),$(this).addClass("index-"+a),1==$(this).attr("data-index")&&t.updateCurrentListingTypeToFind($(this).attr("data-name"),e,"drag"),i==r-1&&window.setTimeout(function(){e.gesture.deltaX=0,n.nightFindSlideLocked=!1},400)})},a=function(e){if($(i[0]).hasClass("index-1"))return!1;if(window.innerWidth<830){var o=1;$(i[0]).attr("data-name");$(i[0]).hasClass("index-2")&&(o=-1);var r=$(".nightfinder-horizontal-slider").find(".slider-option");r.each(function(n){var i=$(this).attr("data-index"),r=$(this).css("left");$(this).removeClass("index-"+i),$(this).css({left:r+33.33*o+"%"}),i=parseInt(i)+o,i=4==i?-1:i,i=-2==i?3:i,$(this).attr("data-index",i),$(this).addClass("index-"+i),1==$(this).attr("data-index")&&t.updateCurrentListingTypeToFind($(this).attr("data-name"),e,"click")}),n.nightFindSlideLocked=!1}else{var r=$(".nightfinder-horizontal-slider").find(".slider-option");r.each(function(e){$(this).removeClass("index-1")}),$(i[0]).removeClass(function(e,t){return(t.match(/\bindex-\S+/g)||[]).join(" ")}),$(i[0]).addClass("index-1"),t.updateCurrentListingTypeToFind($(i[0]).attr("data-name"),e,"click")}},s=function(e){if(n.ionicScrollDelegate.getScrollView().options.scrollingY=!1,i.isMainSearchSlider&&(e.gesture.deltaX>5||e.gesture.deltaX<-5)&&0==n.nightFindSlideLocked){var t=$(".nightfinder-horizontal-slider").find(".slider-option");if(t.each(function(t){this.style[ionic.CSS.TRANSFORM]="translate3d("+Math.round(e.gesture.deltaX)+"px, 0, 0)"}),(e.gesture.deltaX<-10||e.gesture.deltaX>10)&&!n.nightFindSlideLocked||!i.isMainSearchSlider){n.nightFindSlideLocked=!0;var o=e.gesture.deltaX;e.gesture.deltaX=0,t.each(function(e){this.style[ionic.CSS.TRANSFORM]="translate3d(0, 0, 0)"}),r(e,o)}}else(e.gesture.deltaX>15||e.gesture.deltaX<-15||0==e.gesture.deltaY)&&!i.isMainSearchSlider&&(i[0].style[ionic.CSS.TRANSFORM]="translate3d("+(i.currentLeft+Math.round(e.gesture.deltaX))+"px, 0, 0)",i.hasClass("slider-bounce")&&i.removeClass("slider-bounce"),n.ionicScrollDelegate.getScrollView().options.scrollingY=!1)},l=function(e){n.ionicScrollDelegate.getScrollView().options.scrollingY=!0},c=e.on("click",a,i),d=e.on("drag",s,i),u=e.on("release",l,i);n.$on("$destroy",function(){e.off(c,"click",a),e.off(d,"drag",s),e.off(u,"release",l)})}}}),app.directive("taxiTypeSlider",function(e,t){return{require:"^ngController",link:function(t,n,i,o){var r=$("#taxi-type #taxi-type-slider")[0],a=function(e,n){t.ionicScrollDelegate.getScrollView().options.scrollingY=!1;var i=n>0?1:-1;i<0&&$(r).hasClass("on-right")?($(r).removeClass("on-right"),o.updateTaxiType(0),t.$apply()):i>0&&!$(r).hasClass("on-right")&&($(r).addClass("on-right"),o.updateTaxiType(1),t.$apply()),window.setTimeout(function(){e.gesture.deltaX=0},400)},s=function(e){if(t.ionicScrollDelegate.getScrollView().options.scrollingY=!1,(e.gesture.deltaX>0&&!$(r).hasClass("on-right")||e.gesture.deltaX<0&&$(r).hasClass("on-right"))&&(r.style[ionic.CSS.TRANSFORM]="translate3d("+Math.round(e.gesture.deltaX)+"px, 0, 0)",e.gesture.deltaX<-15||e.gesture.deltaX>15)){var n=e.gesture.deltaX;r.style[ionic.CSS.TRANSFORM]="translate3d(0, 0, 0)",a(e,n)}},l=function(e){r.style[ionic.CSS.TRANSFORM]="translate3d(0, 0, 0)",t.ionicScrollDelegate.getScrollView().options.scrollingY=!0},c=e.on("drag",s,n),d=e.on("release",l,n);t.$on("$destroy",function(){e.off(c,"drag",s),e.off(d,"release",l)})}}}),app.directive("imgSlider",function(e,t){return{link:function(n,i,o){i.currentLeft=0;var r=function(e,n){var i=n>0?1:-1,o=$(".mynyte-assistant-screen .detail-img").find("img").length;$(".mynyte-assistant-screen .detail-img").find("img").each(function(n){var r=$(this).attr("data-index"),a=$(this).css("left");$(this).removeClass("index-"+r),$(this).css({left:a+100*i+"%"}),r=parseInt(r)+i,r=4==r?-1:r,r=-2==r?3:r,$(this).attr("data-index",r),$(this).addClass("index-"+r),1==$(this).attr("data-index")&&t.switchAssistantDetailImg(i),n==o-1&&window.setTimeout(function(){e.gesture.deltaX=0,t.assistantImgSlideLocked=!1},400)})},a=function(e){if((e.gesture.deltaX>5&&t.currentDetailImgIndex>1||e.gesture.deltaX<-5&&t.currentDetailImgIndex<t.currentDetailImgCount)&&0==t.assistantImgSlideLocked){var n=$(".mynyte-assistant-screen .detail-img").find("img");if(n.each(function(t){this.style[ionic.CSS.TRANSFORM]="translate3d("+Math.round(e.gesture.deltaX)+"px, 0, 0)"}),(e.gesture.deltaX<-10||e.gesture.deltaX>10)&&!t.assistantImgSlideLocked){t.assistantImgSlideLocked=!0;var i=e.gesture.deltaX;e.gesture.deltaX=0,n.each(function(e){this.style[ionic.CSS.TRANSFORM]="translate3d(0, 0, 0)"}),r(e,i)}}},s=e.on("drag",a,i);n.$on("$destroy",function(){e.off(s,"drag",a)})}}}),app.directive("verticalSlider",function(e,t){return{require:"^ngController",link:function(t,n,i,o){var r,a=$(".movie-poster-slider")[0],s=0;$("#movie-poster").load(function(){r=$(this).height(),console.log("f",r)});var l=function(e){var t=$(this).css("transform"),n=$(this).css("height");topArr=t.split(", "),topArr=topArr[topArr.length-1].replace(")",""),s=0;var i=parseInt(topArr)||0;i+=parseInt(n.replace("px","")),console.log(e.gesture.deltaY),(e.gesture.deltaY<-5&&parseInt(topArr)>8||e.gesture.deltaY>5&&i<r)&&(s=e.gesture.deltaY,a.style[ionic.CSS.TRANSFORM]="translate3d(0, "+Math.round(s)+"px, 0)")},c=function(e){e.gesture.deltaY=0},d=e.on("drag",l,n),u=e.on("release",c,n);t.$on("$destroy",function(){e.off(d,"drag",l),e.off(u,"release",c)})}}}),app.directive("stopEvent",function(){return{restrict:"A",link:function(e,t,n){n&&n.stopEvent&&t.bind(n.stopEvent,function(e){e.stopPropagation()})}}}),app.directive("ngFileSelect",function(){return{link:function(e,t){t.bind("change",function(t){t.srcElement.multiple||(e.files=[],e.file=null),e.file=(t.srcElement||t.target).files[0],e.files=(t.srcElement||t.target).files,e.getFile()})}}}),app.directive("externalApiTemplate",function(){return{template:'<ng-include src="template"/>',restrict:"E",link:function(e){var t="Staging"==e.rootScope.intendedEnvironment?"/staging":"";e.template=t+"/templates/more-views/external-api-templates/"+e.format+".html"}}}),app.filter("propsFilter",function(){return function(e,t){var n=[];return angular.isArray(e)?e.forEach(function(e){for(var i=!1,o=Object.keys(t),r=0;r<o.length;r++){var a=o[r],s=t[a].toLowerCase();if(-1!==e[a].toString().toLowerCase().indexOf(s)){i=!0;break}}i&&n.push(e)}):n=e,n}});var IntendedEnvironment="Staging",IntendedPlatform="ios",DebugMode=!1;!function(){angular.module("ngCordova",["ngCordova.plugins"]),angular.module("ngCordova.plugins.actionSheet",[]).factory("$cordovaActionSheet",["$q","$window",function(e,t){return{show:function(n){var i=e.defer();return t.plugins.actionsheet.show(n,function(e){i.resolve(e)}),i.promise},hide:function(){return t.plugins.actionsheet.hide()}}}]),angular.module("ngCordova.plugins.adMob",[]).factory("$cordovaAdMob",["$q","$window",function(e,t){return{createBannerView:function(n){var i=e.defer();return t.plugins.AdMob.createBannerView(n,function(){i.resolve()},function(){i.reject()}),i.promise},createInterstitialView:function(n){var i=e.defer();return t.plugins.AdMob.createInterstitialView(n,function(){i.resolve()},function(){i.reject()}),i.promise},requestAd:function(n){var i=e.defer();return t.plugins.AdMob.requestAd(n,function(){i.resolve()},function(){i.reject()}),i.promise},showAd:function(n){var i=e.defer();return t.plugins.AdMob.showAd(n,function(){i.resolve()},function(){i.reject()}),i.promise},requestInterstitialAd:function(n){var i=e.defer();return t.plugins.AdMob.requestInterstitialAd(n,function(){i.resolve()},function(){i.reject()}),i.promise}}}]),angular.module("ngCordova.plugins.appAvailability",[]).factory("$cordovaAppAvailability",["$q",function(e){return{check:function(t){var n=e.defer();return appAvailability.check(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.appRate",[]).provider("$cordovaAppRate",[function(){this.setPreferences=function(e){e&&angular.isObject(e)&&(AppRate.preferences.useLanguage=e.language||null,AppRate.preferences.displayAppName=e.appName||"",AppRate.preferences.promptAgainForEachNewVersion=e.promptForNewVersion||!0,AppRate.preferences.openStoreInApp=e.openStoreInApp||!1,AppRate.preferences.usesUntilPrompt=e.usesUntilPrompt||3,AppRate.preferences.useCustomRateDialog=e.useCustomRateDialog||!1,AppRate.preferences.storeAppURL.ios=e.iosURL||null,AppRate.preferences.storeAppURL.android=e.androidURL||null,AppRate.preferences.storeAppURL.blackberry=e.blackberryURL||null,AppRate.preferences.storeAppURL.windows8=e.windowsURL||null)},this.setCustomLocale=function(e){var t={title:"Rate %@",message:"If you enjoy using %@, would you mind taking a moment to rate it? It wonât take more than a minute. Thanks for your support!",cancelButtonLabel:"No, Thanks",laterButtonLabel:"Remind Me Later",rateButtonLabel:"Rate It Now"};t=angular.extend(t,e),AppRate.preferences.customLocale=t},this.$get=["$q",function(e){return{promptForRating:function(t){var n=e.defer(),i=AppRate.promptForRating(t);return n.resolve(i),n.promise},navigateToAppStore:function(){var t=e.defer(),n=AppRate.navigateToAppStore();return t.resolve(n),t.promise},onButtonClicked:function(e){AppRate.onButtonClicked=function(t){e.call(this,t)}},onRateDialogShow:function(e){AppRate.onRateDialogShow=e()}}}]}]),angular.module("ngCordova.plugins.appVersion",[]).factory("$cordovaAppVersion",["$q",function(e){return{getAppVersion:function(){var t=e.defer();return cordova.getAppVersion(function(e){t.resolve(e)}),t.promise}}}]),angular.module("ngCordova.plugins.backgroundGeolocation",[]).factory("$cordovaBackgroundGeolocation",["$q","$window",function(e,t){return{init:function(){t.navigator.geolocation.getCurrentPosition(function(e){return e})},configure:function(n){this.init();var i=e.defer();return t.plugins.backgroundGeoLocation.configure(function(e){i.notify(e),t.plugins.backgroundGeoLocation.finish()},function(e){i.reject(e)},n),this.start(),i.promise},start:function(){var n=e.defer();return t.plugins.backgroundGeoLocation.start(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},stop:function(){var n=e.defer();return t.plugins.backgroundGeoLocation.stop(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.badge",[]).factory("$cordovaBadge",["$q",function(e){return{hasPermission:function(){var t=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?t.resolve(!0):t.reject("You do not have permission")}),t.promise},promptForPermission:function(){return cordova.plugins.notification.badge.promptForPermission()},set:function(t){var n=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?n.resolve(cordova.plugins.notification.badge.set(t)):n.reject("You do not have permission to set Badge")}),n.promise},get:function(){var t=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?cordova.plugins.notification.badge.get(function(e){t.resolve(e)}):t.reject("You do not have permission to get Badge")}),t.promise},clear:function(){var t=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?t.resolve(cordova.plugins.notification.badge.clear()):t.reject("You do not have permission to clear Badge")}),t.promise},configure:function(e){return cordova.plugins.notification.badge.configure(e)}}}]),angular.module("ngCordova.plugins.barcodeScanner",[]).factory("$cordovaBarcodeScanner",["$q",function(e){return{scan:function(){var t=e.defer();return cordova.plugins.barcodeScanner.scan(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},encode:function(t,n){var i=e.defer();return t=t||"TEXT_TYPE",cordova.plugins.barcodeScanner.encode(t,n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}}]),angular.module("ngCordova.plugins.batteryStatus",[]).factory("$cordovaBatteryStatus",["$rootScope","$window","$timeout",function(e,t,n){var i=function(t){n(function(){e.$broadcast("$cordovaBatteryStatus:status",t)})},o=function(t){n(function(){e.$broadcast("$cordovaBatteryStatus:critical",t)})},r=function(t){n(function(){e.$broadcast("$cordovaBatteryStatus:low",t)})};return document.addEventListener("deviceready",function(){navigator.battery&&(t.addEventListener("batterystatus",i,!1),t.addEventListener("batterycritical",o,!1),t.addEventListener("batterylow",r,!1))},!1),!0}]).run(["$cordovaBatteryStatus",function(){}]),angular.module("ngCordova.plugins.ble",[]).factory("$cordovaBLE",["$q",function(e){return{scan:function(t,n){var i=e.defer();return ble.scan(t,n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},connect:function(t){var n=e.defer();return ble.connect(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},disconnect:function(t){var n=e.defer();return ble.disconnect(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},read:function(t,n,i){var o=e.defer();return ble.read(t,n,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},write:function(t,n,i,o){var r=e.defer();return ble.write(t,n,i,o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},writeCommand:function(t,n,i,o){var r=e.defer();return ble.writeCommand(t,n,i,o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},notify:function(t,n,i){var o=e.defer();return ble.notify(t,n,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},indicate:function(t,n,i){var o=e.defer();return ble.indicate(t,n,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},isConnected:function(t){var n=e.defer();return ble.isConnected(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},isEnabled:function(){var t=e.defer();return ble.isEnabled(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.bluetoothSerial",[]).factory("$cordovaBluetoothSerial",["$q","$window",function(e,t){return{connect:function(n){var i=e.defer();return t.bluetoothSerial.connect(n,function(){i.resolve()},function(e){i.reject(e)}),i.promise},connectInsecure:function(n){var i=e.defer();return t.bluetoothSerial.connectInsecure(n,function(){i.resolve()},function(e){i.reject(e)}),i.promise},disconnect:function(){var n=e.defer();return t.bluetoothSerial.disconnect(function(){n.resolve()},function(e){n.reject(e)}),n.promise},list:function(){var n=e.defer();return t.bluetoothSerial.list(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},isEnabled:function(){var n=e.defer();return t.bluetoothSerial.isEnabled(function(){n.resolve()},function(){n.reject()}),n.promise},isConnected:function(){var n=e.defer();return t.bluetoothSerial.isConnected(function(){n.resolve()},function(){n.reject()}),n.promise},available:function(){var n=e.defer();return t.bluetoothSerial.available(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},read:function(){var n=e.defer();return t.bluetoothSerial.read(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},readUntil:function(n){var i=e.defer();return t.bluetoothSerial.readUntil(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},write:function(n){var i=e.defer();return t.bluetoothSerial.write(n,function(){i.resolve()},function(e){i.reject(e)}),i.promise},subscribe:function(n){var i=e.defer();return t.bluetoothSerial.subscribe(n,function(e){i.notify(e)},function(e){i.reject(e)}),i.promise},subscribeRawData:function(){var n=e.defer();return t.bluetoothSerial.subscribeRawData(function(e){n.notify(e)},function(e){n.reject(e)}),n.promise},unsubscribe:function(){var n=e.defer();return t.bluetoothSerial.unsubscribe(function(){n.resolve()},function(e){n.reject(e)}),n.promise},unsubscribeRawData:function(){var n=e.defer();return t.bluetoothSerial.unsubscribeRawData(function(){n.resolve()},function(e){n.reject(e)}),n.promise},clear:function(){var n=e.defer();return t.bluetoothSerial.clear(function(){n.resolve()},function(e){n.reject(e)}),n.promise},readRSSI:function(){var n=e.defer();return t.bluetoothSerial.readRSSI(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.brightness",[]).factory("$cordovaBrightness",["$q","$window",function(e,t){return{get:function(){var n=e.defer();return t.cordova.plugins.brightness.getBrightness(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},set:function(n){var i=e.defer();return t.cordova.plugins.brightness.setBrightness(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},setKeepScreenOn:function(n){var i=e.defer();return t.cordova.plugins.brightness.setKeepScreenOn(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}}]),angular.module("ngCordova.plugins.calendar",[]).factory("$cordovaCalendar",["$q","$window",function(e,t){return{createCalendar:function(n){var i=e.defer(),o=t.plugins.calendar.getCreateCalendarOptions();return"string"==typeof n?o.calendarName=n:o=angular.extend(o,n),t.plugins.calendar.createCalendar(o,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},deleteCalendar:function(n){var i=e.defer();return t.plugins.calendar.deleteCalendar(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},createEvent:function(n){var i=e.defer(),o={title:null,location:null,notes:null,startDate:null,endDate:null};return o=angular.extend(o,n),t.plugins.calendar.createEvent(o.title,o.location,o.notes,new Date(o.startDate),new Date(o.endDate),function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},createEventWithOptions:function(n){var i=e.defer(),o=[],r=window.plugins.calendar.getCalendarOptions(),a={title:null,location:null,notes:null,startDate:null,endDate:null};o=Object.keys(a);for(var s in n)-1===o.indexOf(s)?r[s]=n[s]:a[s]=n[s];return t.plugins.calendar.createEventWithOptions(a.title,a.location,a.notes,new Date(a.startDate),new Date(a.endDate),r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},createEventInteractively:function(n){var i=e.defer(),o={title:null,location:null,notes:null,startDate:null,endDate:null};return o=angular.extend(o,n),t.plugins.calendar.createEventInteractively(o.title,o.location,o.notes,new Date(o.startDate),new Date(o.endDate),function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},createEventInNamedCalendar:function(n){var i=e.defer(),o={title:null,location:null,notes:null,startDate:null,endDate:null,calendarName:null};return o=angular.extend(o,n),t.plugins.calendar.createEventInNamedCalendar(o.title,o.location,o.notes,new Date(o.startDate),new Date(o.endDate),o.calendarName,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},findEvent:function(n){var i=e.defer(),o={title:null,location:null,notes:null,startDate:null,endDate:null};return o=angular.extend(o,n),t.plugins.calendar.findEvent(o.title,o.location,o.notes,new Date(o.startDate),new Date(o.endDate),function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},listEventsInRange:function(n,i){var o=e.defer();return t.plugins.calendar.listEventsInRange(n,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},listCalendars:function(){var n=e.defer();return t.plugins.calendar.listCalendars(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},findAllEventsInNamedCalendar:function(n){var i=e.defer();return t.plugins.calendar.findAllEventsInNamedCalendar(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},modifyEvent:function(n){var i=e.defer(),o={title:null,location:null,notes:null,startDate:null,endDate:null,newTitle:null,newLocation:null,newNotes:null,newStartDate:null,newEndDate:null};return o=angular.extend(o,n),t.plugins.calendar.modifyEvent(o.title,o.location,o.notes,new Date(o.startDate),new Date(o.endDate),o.newTitle,o.newLocation,o.newNotes,new Date(o.newStartDate),new Date(o.newEndDate),function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},deleteEvent:function(n){var i=e.defer(),o={newTitle:null,location:null,notes:null,startDate:null,endDate:null};return o=angular.extend(o,n),t.plugins.calendar.deleteEvent(o.newTitle,o.location,o.notes,new Date(o.startDate),new Date(o.endDate),function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}}]),angular.module("ngCordova.plugins.camera",[]).factory("$cordovaCamera",["$q",function(e){return{getPicture:function(t){var n=e.defer();return navigator.camera?(navigator.camera.getPicture(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise):(n.resolve(null),n.promise)},cleanup:function(){var t=e.defer();return navigator.camera.cleanup(function(){t.resolve()},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.capture",[]).factory("$cordovaCapture",["$q",function(e){return{captureAudio:function(t){var n=e.defer();return navigator.device.capture?(navigator.device.capture.captureAudio(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise):(n.resolve(null),n.promise)},captureImage:function(t){var n=e.defer();return navigator.device.capture?(navigator.device.capture.captureImage(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise):(n.resolve(null),n.promise)},captureVideo:function(t){var n=e.defer();return navigator.device.capture?(navigator.device.capture.captureVideo(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise):(n.resolve(null),n.promise)}}}]),angular.module("ngCordova.plugins.clipboard",[]).factory("$cordovaClipboard",["$q","$window",function(e,t){return{copy:function(n){var i=e.defer();return t.cordova.plugins.clipboard.copy(n,function(){i.resolve()},function(){i.reject()}),i.promise},paste:function(){var n=e.defer();return t.cordova.plugins.clipboard.paste(function(e){n.resolve(e)},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.contacts",[]).factory("$cordovaContacts",["$q",function(e){return{save:function(t){var n=e.defer();return navigator.contacts.create(t).save(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},remove:function(t){var n=e.defer();return navigator.contacts.create(t).remove(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},clone:function(e){return navigator.contacts.create(e).clone(e)},find:function(t){var n=e.defer(),i=t.fields||["id","displayName"];return delete t.fields,navigator.contacts.find(i,function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},pickContact:function(){var t=e.defer();return navigator.contacts.pickContact(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.datePicker",[]).factory("$cordovaDatePicker",["$window","$q",function(e,t){return{show:function(n){var i=t.defer();return n=n||{date:new Date,mode:"date"},e.datePicker.show(n,function(e){i.resolve(e)}),i.promise}}}]),angular.module("ngCordova.plugins.device",[]).factory("$cordovaDevice",[function(){return{getDevice:function(){return device},getCordova:function(){return device.cordova},getModel:function(){return device.model},getName:function(){return device.name},getPlatform:function(){return device.platform},getUUID:function(){return device.uuid},getVersion:function(){return device.version}}}]),angular.module("ngCordova.plugins.deviceMotion",[]).factory("$cordovaDeviceMotion",["$q",function(e){return{getCurrentAcceleration:function(){var t=e.defer();return navigator.accelerometer.getCurrentAcceleration(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},watchAcceleration:function(t){var n=e.defer(),i=navigator.accelerometer.watchAcceleration(function(e){n.notify(e)},function(e){n.reject(e)},t);return n.promise.cancel=function(){navigator.accelerometer.clearWatch(i)},n.promise.clearWatch=function(e){navigator.accelerometer.clearWatch(e||i)},n.promise.watchID=i,n.promise},clearWatch:function(e){return navigator.accelerometer.clearWatch(e)}}}]),angular.module("ngCordova.plugins.deviceOrientation",[]).factory("$cordovaDeviceOrientation",["$q",function(e){return{getCurrentHeading:function(){var t=e.defer();return navigator.compass.getCurrentHeading(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},watchHeading:function(t){var n=e.defer(),i=navigator.compass.watchHeading(function(e){n.notify(e)},function(e){n.reject(e)},t);return n.promise.cancel=function(){navigator.compass.clearWatch(i)},n.promise.clearWatch=function(e){navigator.compass.clearWatch(e||i)},n.promise.watchID=i,n.promise},clearWatch:function(e){return navigator.compass.clearWatch(e)}}}]),angular.module("ngCordova.plugins.dialogs",[]).factory("$cordovaDialogs",["$q","$window",function(e,t){return{alert:function(n,i,o){var r=e.defer();return t.navigator.notification?navigator.notification.alert(n,function(){r.resolve()},i,o):(t.alert(n),r.resolve()),r.promise},confirm:function(n,i,o){var r=e.defer();return t.navigator.notification?navigator.notification.confirm(n,function(e){r.resolve(e)},i,o):r.resolve(t.confirm(n)?1:2),r.promise},prompt:function(n,i,o,r){var a=e.defer();if(t.navigator.notification)navigator.notification.prompt(n,function(e){a.resolve(e)},i,o,r);else{var s=t.prompt(n,r);a.resolve(null!==s?{input1:s,buttonIndex:1}:{input1:s,buttonIndex:2})}return a.promise},beep:function(e){return navigator.notification.beep(e)}}}]),angular.module("ngCordova.plugins.emailComposer",[]).factory("$cordovaEmailComposer",["$q",function(e){return{isAvailable:function(){var t=e.defer();return cordova.plugins.email.isAvailable(function(e){e?t.resolve():t.reject()}),t.promise},open:function(t){var n=e.defer();return cordova.plugins.email.open(t,function(){n.reject()}),n.promise},addAlias:function(e,t){cordova.plugins.email.addAlias(e,t)}}}]),angular.module("ngCordova.plugins.facebook",[]).provider("$cordovaFacebook",[function(){this.browserInit=function(e,t){this.appID=e,this.appVersion=t||"v2.0",facebookConnectPlugin.browserInit(this.appID,this.appVersion)},this.$get=["$q",function(e){return{login:function(t){var n=e.defer();return facebookConnectPlugin.login(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},showDialog:function(t){var n=e.defer();return facebookConnectPlugin.showDialog(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},api:function(t,n){var i=e.defer();return facebookConnectPlugin.api(t,n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},getAccessToken:function(){var t=e.defer();return facebookConnectPlugin.getAccessToken(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},getLoginStatus:function(){var t=e.defer();return facebookConnectPlugin.getLoginStatus(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},logout:function(){var t=e.defer();return facebookConnectPlugin.logout(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]}]),angular.module("ngCordova.plugins.facebookAds",[]).factory("$cordovaFacebookAds",["$q","$window",function(e,t){return{setOptions:function(n){var i=e.defer();return t.FacebookAds.setOptions(n,function(){i.resolve()},function(){i.reject()}),i.promise},createBanner:function(n){var i=e.defer();return t.FacebookAds.createBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},removeBanner:function(){var n=e.defer();return t.FacebookAds.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var i=e.defer();return t.FacebookAds.showBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},showBannerAtXY:function(n,i){var o=e.defer();return t.FacebookAds.showBannerAtXY(n,i,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var n=e.defer();return t.FacebookAds.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var i=e.defer();return t.FacebookAds.prepareInterstitial(n,function(){i.resolve()},function(){i.reject()}),i.promise},showInterstitial:function(){var n=e.defer();return t.FacebookAds.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.file",[]).constant("$cordovaFileError",{1:"NOT_FOUND_ERR",2:"SECURITY_ERR",3:"ABORT_ERR",4:"NOT_READABLE_ERR",5:"ENCODING_ERR",6:"NO_MODIFICATION_ALLOWED_ERR",7:"INVALID_STATE_ERR",8:"SYNTAX_ERR",9:"INVALID_MODIFICATION_ERR",10:"QUOTA_EXCEEDED_ERR",11:"TYPE_MISMATCH_ERR",12:"PATH_EXISTS_ERR"}).provider("$cordovaFile",[function(){this.$get=["$q","$window","$cordovaFileError",function(e,t,n){return{checkDir:function(i,o){var r=e.defer();/^\//.test(o)&&r.reject("directory cannot start with /");try{var a=i+o;t.resolveLocalFileSystemURL(a,function(e){!0===e.isDirectory?r.resolve(e):r.reject({code:13,message:"input is not a directory"})},function(e){e.message=n[e.code],r.reject(e)})}catch(e){e.message=n[e.code],r.reject(e)}return r.promise},checkFile:function(i,o){var r=e.defer();/^\//.test(o)&&r.reject("directory cannot start with /");try{var a=i+o;t.resolveLocalFileSystemURL(a,function(e){!0===e.isFile?r.resolve(e):r.reject({code:13,message:"input is not a file"})},function(e){e.message=n[e.code],r.reject(e)})}catch(e){e.message=n[e.code],r.reject(e)}return r.promise},createDir:function(i,o,r){var a=e.defer();/^\//.test(o)&&a.reject("directory cannot start with /"),r=!r;var s={create:!0,exclusive:r};try{t.resolveLocalFileSystemURL(i,function(e){e.getDirectory(o,s,function(e){a.resolve(e)},function(e){e.message=n[e.code],a.reject(e)})},function(e){e.message=n[e.code],a.reject(e)})}catch(e){e.message=n[e.code],a.reject(e)}return a.promise},createFile:function(i,o,r){var a=e.defer();/^\//.test(o)&&a.reject("file-name cannot start with /"),r=!r;var s={create:!0,exclusive:r};try{t.resolveLocalFileSystemURL(i,function(e){e.getFile(o,s,function(e){a.resolve(e)},function(e){e.message=n[e.code],a.reject(e)})},function(e){e.message=n[e.code],a.reject(e)})}catch(e){e.message=n[e.code],a.reject(e)}return a.promise},removeDir:function(i,o){var r=e.defer();/^\//.test(o)&&r.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(i,function(e){e.getDirectory(o,{create:!1},function(e){e.remove(function(){r.resolve({success:!0,fileRemoved:e})},function(e){e.message=n[e.code],r.reject(e)})},function(e){e.message=n[e.code],r.reject(e)})},function(e){e.message=n[e.code],r.reject(e)})}catch(e){e.message=n[e.code],r.reject(e)}return r.promise},removeFile:function(i,o){var r=e.defer();/^\//.test(o)&&r.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(i,function(e){e.getFile(o,{create:!1},function(e){e.remove(function(){r.resolve({success:!0,fileRemoved:e})},function(e){e.message=n[e.code],r.reject(e)})},function(e){e.message=n[e.code],r.reject(e)})},function(e){e.message=n[e.code],r.reject(e)})}catch(e){e.message=n[e.code],r.reject(e)}return r.promise},removeRecursively:function(i,o){var r=e.defer();/^\//.test(o)&&r.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(i,function(e){e.getDirectory(o,{create:!1},function(e){e.removeRecursively(function(){r.resolve({success:!0,fileRemoved:e})},function(e){e.message=n[e.code],r.reject(e)})},function(e){e.message=n[e.code],r.reject(e)})},function(e){e.message=n[e.code],r.reject(e)})}catch(e){e.message=n[e.code],r.reject(e)}return r.promise},writeFile:function(i,o,r,a){var s=e.defer();/^\//.test(o)&&s.reject("file-name cannot start with /"),a=!a;var l={create:!0,exclusive:a};try{t.resolveLocalFileSystemURL(i,function(e){e.getFile(o,l,function(e){e.createWriter(function(e){!0===l.append&&e.seek(e.length),l.truncate&&e.truncate(l.truncate),e.onwriteend=function(e){this.error?s.reject(this.error):s.resolve(e)},e.write(r),s.promise.abort=function(){e.abort()}})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})}catch(e){e.message=n[e.code],s.reject(e)}return s.promise},writeExistingFile:function(i,o,r){var a=e.defer();/^\//.test(o)&&a.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(i,function(e){e.getFile(o,{create:!1},function(e){e.createWriter(function(e){e.seek(e.length),e.onwriteend=function(e){this.error?a.reject(this.error):a.resolve(e)},e.write(r),a.promise.abort=function(){e.abort()}})},function(e){e.message=n[e.code],a.reject(e)})},function(e){e.message=n[e.code],a.reject(e)})}catch(e){e.message=n[e.code],a.reject(e)}return a.promise},readAsText:function(i,o){var r=e.defer();/^\//.test(o)&&r.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(i,function(e){e.getFile(o,{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){void 0!==e.target._result||null!==e.target._result?r.resolve(e.target._result):r.reject(void 0!==e.target._error||null!==e.target._error?e.target._error:{code:null,message:"READER_ONLOADEND_ERR"})},t.readAsText(e)})},function(e){e.message=n[e.code],r.reject(e)})},function(e){e.message=n[e.code],r.reject(e)})}catch(e){e.message=n[e.code],r.reject(e)}return r.promise},readAsDataURL:function(i,o){var r=e.defer();/^\//.test(o)&&r.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(i,function(e){e.getFile(o,{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){void 0!==e.target._result||null!==e.target._result?r.resolve(e.target._result):r.reject(void 0!==e.target._error||null!==e.target._error?e.target._error:{code:null,message:"READER_ONLOADEND_ERR"})},t.readAsDataURL(e)})},function(e){e.message=n[e.code],r.reject(e)})},function(e){e.message=n[e.code],r.reject(e)})}catch(e){e.message=n[e.code],r.reject(e)}return r.promise},readAsBinaryString:function(i,o){var r=e.defer();/^\//.test(o)&&r.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(i,function(e){e.getFile(o,{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){void 0!==e.target._result||null!==e.target._result?r.resolve(e.target._result):r.reject(void 0!==e.target._error||null!==e.target._error?e.target._error:{code:null,message:"READER_ONLOADEND_ERR"})},t.readAsBinaryString(e)})},function(e){e.message=n[e.code],r.reject(e)})},function(e){e.message=n[e.code],r.reject(e)})}catch(e){e.message=n[e.code],r.reject(e)}return r.promise},readAsArrayBuffer:function(i,o){var r=e.defer();/^\//.test(o)&&r.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(i,function(e){e.getFile(o,{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){void 0!==e.target._result||null!==e.target._result?r.resolve(e.target._result):r.reject(void 0!==e.target._error||null!==e.target._error?e.target._error:{code:null,message:"READER_ONLOADEND_ERR"})},t.readAsArrayBuffer(e)})},function(e){e.message=n[e.code],r.reject(e)})},function(e){e.message=n[e.code],r.reject(e)})}catch(e){e.message=n[e.code],r.reject(e)}return r.promise},moveFile:function(n,i,o,r){var a=e.defer();r=r||i,(/^\//.test(i)||/^\//.test(r))&&a.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(n,function(e){e.getFile(i,{create:!1},function(e){t.resolveLocalFileSystemURL(o,function(t){e.moveTo(t,r,function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})}catch(e){a.reject(e)}return a.promise},moveDir:function(n,i,o,r){var a=e.defer();r=r||i,(/^\//.test(i)||/^\//.test(r))&&a.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(n,function(e){e.getDirectory(i,{create:!1},function(e){t.resolveLocalFileSystemURL(o,function(t){e.moveTo(t,r,function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})}catch(e){a.reject(e)}return a.promise},copyDir:function(i,o,r,a){var s=e.defer();a=a||o,(/^\//.test(o)||/^\//.test(a))&&s.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(i,function(e){e.getDirectory(o,{create:!1,exclusive:!1},function(e){t.resolveLocalFileSystemURL(r,function(t){e.copyTo(t,a,function(e){s.resolve(e)},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})}catch(e){e.message=n[e.code],s.reject(e)}return s.promise},copyFile:function(i,o,r,a){var s=e.defer();a=a||o,/^\//.test(o)&&s.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(i,function(e){e.getFile(o,{create:!1,exclusive:!1},function(e){t.resolveLocalFileSystemURL(r,function(t){e.copyTo(t,a,function(e){s.resolve(e)},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})}catch(e){e.message=n[e.code],s.reject(e)}return s.promise}}}]}]),angular.module("ngCordova.plugins.fileOpener2",[]).factory("$cordovaFileOpener2",["$q",function(e){return{open:function(t,n){var i=e.defer();return cordova.plugins.fileOpener2.open(t,n,{error:function(e){i.reject(e)},success:function(){i.resolve()}}),i.promise},uninstall:function(t){var n=e.defer();return cordova.plugins.fileOpener2.uninstall(t,{error:function(e){n.reject(e)},success:function(){n.resolve()}}),n.promise},appIsInstalled:function(t){var n=e.defer();return cordova.plugins.fileOpener2.appIsInstalled(t,{success:function(e){n.resolve(e)}}),n.promise}}}]),angular.module("ngCordova.plugins.fileTransfer",[]).factory("$cordovaFileTransfer",["$q","$timeout",function(e,t){return{download:function(n,i,o,r){var a=e.defer(),s=new FileTransfer,l=o&&!1===o.encodeURI?n:encodeURI(n);return o&&void 0!==o.timeout&&null!==o.timeout&&(t(function(){s.abort()},o.timeout),o.timeout=null),s.onprogress=function(e){a.notify(e)},a.promise.abort=function(){s.abort()},s.download(l,i,a.resolve,a.reject,r,o),a.promise},upload:function(n,i,o,r){var a=e.defer(),s=new FileTransfer,l=o&&!1===o.encodeURI?n:encodeURI(n);return o&&void 0!==o.timeout&&null!==o.timeout&&(t(function(){s.abort()},o.timeout),o.timeout=null),s.onprogress=function(e){a.notify(e)},a.promise.abort=function(){s.abort()},s.upload(i,l,a.resolve,a.reject,o,r),a.promise}}}]),angular.module("ngCordova.plugins.flashlight",[]).factory("$cordovaFlashlight",["$q","$window",function(e,t){return{available:function(){var n=e.defer();return t.plugins.flashlight.available(function(e){n.resolve(e)}),n.promise},switchOn:function(){var n=e.defer();return t.plugins.flashlight.switchOn(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},switchOff:function(){var n=e.defer();return t.plugins.flashlight.switchOff(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},toggle:function(){var n=e.defer();return t.plugins.flashlight.toggle(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.flurryAds",[]).factory("$cordovaFlurryAds",["$q","$window",function(e,t){return{setOptions:function(n){var i=e.defer();return t.FlurryAds.setOptions(n,function(){i.resolve()},function(){i.reject()}),i.promise},createBanner:function(n){var i=e.defer();return t.FlurryAds.createBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},removeBanner:function(){var n=e.defer();return t.FlurryAds.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var i=e.defer();return t.FlurryAds.showBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},showBannerAtXY:function(n,i){var o=e.defer();return t.FlurryAds.showBannerAtXY(n,i,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var n=e.defer();return t.FlurryAds.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var i=e.defer();return t.FlurryAds.prepareInterstitial(n,function(){i.resolve()},function(){i.reject()}),i.promise},showInterstitial:function(){var n=e.defer();return t.FlurryAds.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.ga",[]).factory("$cordovaGA",["$q","$window",function(e,t){return{init:function(n,i){var o=e.defer();return i=i>=0?i:10,t.plugins.gaPlugin.init(function(e){o.resolve(e)},function(e){o.reject(e)},n,i),o.promise},trackEvent:function(n,i,o,r,a,s){var l=e.defer();return t.plugins.gaPlugin.trackEvent(function(e){l.resolve(e)},function(e){l.reject(e)},o,r,a,s),l.promise},trackPage:function(n,i,o){var r=e.defer();return t.plugins.gaPlugin.trackPage(function(e){r.resolve(e)},function(e){r.reject(e)},o),r.promise},setVariable:function(n,i,o,r){var a=e.defer();return t.plugins.gaPlugin.setVariable(function(e){a.resolve(e)},function(e){a.reject(e)},o,r),a.promise},exit:function(){var n=e.defer();return t.plugins.gaPlugin.exit(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.geolocation",[]).factory("$cordovaGeolocation",["$q",function(e){return{getCurrentPosition:function(t){var n=e.defer();return navigator.geolocation.getCurrentPosition(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},watchPosition:function(t){var n=e.defer(),i=navigator.geolocation.watchPosition(function(e){n.notify(e)},function(e){n.reject(e)},t);return n.promise.cancel=function(){navigator.geolocation.clearWatch(i)},n.promise.clearWatch=function(e){navigator.geolocation.clearWatch(e||i)},n.promise.watchID=i,n.promise},clearWatch:function(e){return navigator.geolocation.clearWatch(e)}}}]),angular.module("ngCordova.plugins.globalization",[]).factory("$cordovaGlobalization",["$q",function(e){return{getPreferredLanguage:function(){var t=e.defer();return navigator.globalization.getPreferredLanguage(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},getLocaleName:function(){var t=e.defer();return navigator.globalization.getLocaleName(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},getFirstDayOfWeek:function(){var t=e.defer();return navigator.globalization.getFirstDayOfWeek(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},dateToString:function(t,n){var i=e.defer();return navigator.globalization.dateToString(t,function(e){i.resolve(e)},function(e){i.reject(e)},n),i.promise},stringToDate:function(t,n){var i=e.defer();return navigator.globalization.stringToDate(t,function(e){i.resolve(e)},function(e){i.reject(e)},n),i.promise},getDatePattern:function(t){var n=e.defer();return navigator.globalization.getDatePattern(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},getDateNames:function(t){var n=e.defer();return navigator.globalization.getDateNames(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},isDayLightSavingsTime:function(t){var n=e.defer();return navigator.globalization.isDayLightSavingsTime(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},numberToString:function(t,n){var i=e.defer();return navigator.globalization.numberToString(t,function(e){i.resolve(e)},function(e){i.reject(e)},n),i.promise},stringToNumber:function(t,n){var i=e.defer();return navigator.globalization.stringToNumber(t,function(e){i.resolve(e)},function(e){i.reject(e)},n),i.promise},getNumberPattern:function(t){var n=e.defer();return navigator.globalization.getNumberPattern(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},getCurrencyPattern:function(t){var n=e.defer();return navigator.globalization.getCurrencyPattern(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.googleAds",[]).factory("$cordovaGoogleAds",["$q","$window",function(e,t){return{setOptions:function(n){var i=e.defer();return t.AdMob.setOptions(n,function(){i.resolve()},function(){i.reject()}),i.promise},createBanner:function(n){var i=e.defer();return t.AdMob.createBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},removeBanner:function(){var n=e.defer();return t.AdMob.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var i=e.defer();return t.AdMob.showBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},showBannerAtXY:function(n,i){var o=e.defer();return t.AdMob.showBannerAtXY(n,i,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var n=e.defer();return t.AdMob.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var i=e.defer();return t.AdMob.prepareInterstitial(n,function(){i.resolve()},function(){i.reject()}),i.promise},showInterstitial:function(){var n=e.defer();return t.AdMob.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.googleAnalytics",[]).factory("$cordovaGoogleAnalytics",["$q","$window",function(e,t){return{startTrackerWithId:function(n){var i=e.defer();return t.analytics.startTrackerWithId(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},setUserId:function(n){var i=e.defer();return t.analytics.setUserId(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},debugMode:function(){var n=e.defer();return t.analytics.debugMode(function(e){n.resolve(e)},function(){n.reject()}),n.promise},trackView:function(n){var i=e.defer();return t.analytics.trackView(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},addCustomDimension:function(n,i){var o=e.defer();return t.analytics.addCustomDimension(n,i,function(){o.resolve()},function(e){o.reject(e)}),o.promise},trackEvent:function(n,i,o,r){var a=e.defer();return t.analytics.trackEvent(n,i,o,r,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},addTransaction:function(n,i,o,r,a,s){var l=e.defer();return t.analytics.addTransaction(n,i,o,r,a,s,function(e){l.resolve(e)},function(e){l.reject(e)}),l.promise},addTransactionItem:function(n,i,o,r,a,s,l){var c=e.defer();return t.analytics.addTransactionItem(n,i,o,r,a,s,l,function(e){c.resolve(e)},function(e){c.reject(e)}),c.promise}}}]),angular.module("ngCordova.plugins.googleMap",[]).factory("$cordovaGoogleMap",["$q","$window",function(e,t){var n=null;return{getMap:function(i){var o=e.defer();if(t.plugin.google.maps){var r=document.getElementById("map_canvas");n=t.plugin.google.maps.Map.getMap(i),n.setDiv(r),o.resolve(n)}else o.reject(null);return o.promise},isMapLoaded:function(){return!!n},addMarker:function(t){var i=e.defer();return n.addMarker(t,function(e){i.resolve(e)}),i.promise},getMapTypeIds:function(){return t.plugin.google.maps.mapTypeId},setVisible:function(t){var i=e.defer();return n.setVisible(t),i.promise},cleanup:function(){n=null}}}]),angular.module("ngCordova.plugins.healthKit",[]).factory("$cordovaHealthKit",["$q","$window",function(e,t){return{isAvailable:function(){var n=e.defer();return t.plugins.healthkit.available(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},requestAuthorization:function(n,i){var o=e.defer();return n=n||["HKCharacteristicTypeIdentifierDateOfBirth","HKQuantityTypeIdentifierActiveEnergyBurned","HKQuantityTypeIdentifierHeight"],i=i||["HKQuantityTypeIdentifierActiveEnergyBurned","HKQuantityTypeIdentifierHeight","HKQuantityTypeIdentifierDistanceCycling"],t.plugins.healthkit.requestAuthorization({readTypes:n,writeTypes:i},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},readDateOfBirth:function(){var n=e.defer();return t.plugins.healthkit.readDateOfBirth(function(e){n.resolve(e)},function(e){n.resolve(e)}),n.promise},readGender:function(){var n=e.defer();return t.plugins.healthkit.readGender(function(e){n.resolve(e)},function(e){n.resolve(e)}),n.promise},saveWeight:function(n,i,o){var r=e.defer();return t.plugins.healthkit.saveWeight({unit:i||"lb",amount:n,date:o||new Date},function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},readWeight:function(n){var i=e.defer();return t.plugins.healthkit.readWeight({unit:n||"lb"},function(e){i.resolve(e)},function(e){i.resolve(e)}),i.promise},saveHeight:function(n,i,o){var r=e.defer();return t.plugins.healthkit.saveHeight({unit:i||"in",amount:n,date:o||new Date},function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},readHeight:function(n){var i=e.defer();return t.plugins.healthkit.readHeight({unit:n||"in"},function(e){i.resolve(e)},function(e){i.resolve(e)}),i.promise},findWorkouts:function(){var n=e.defer();return t.plugins.healthkit.findWorkouts({},function(e){n.resolve(e)},function(e){n.resolve(e)}),n.promise},saveWorkout:function(n){var i=e.defer();return t.plugins.healthkit.saveWorkout(n,function(e){i.resolve(e)},function(e){i.resolve(e)}),i.promise},querySampleType:function(n){var i=e.defer();return t.plugins.healthkit.querySampleType(n,function(e){i.resolve(e)},function(e){i.resolve(e)}),i.promise}}}]),angular.module("ngCordova.plugins.httpd",[]).factory("$cordovaHttpd",["$q",function(e){return{startServer:function(t){var n=e.defer();return cordova.plugins.CorHttpd.startServer(t,function(){n.resolve()},function(){n.reject()}),n.promise},stopServer:function(){var t=e.defer();return cordova.plugins.CorHttpd.stopServer(function(){t.resolve()},function(){t.reject()}),t.promise},getURL:function(){var t=e.defer();return cordova.plugins.CorHttpd.getURL(function(e){t.resolve(e)},function(){t.reject()}),t.promise},getLocalPath:function(){var t=e.defer();return cordova.plugins.CorHttpd.getLocalPath(function(e){t.resolve(e)},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.iAd",[]).factory("$cordovaiAd",["$q","$window",function(e,t){return{setOptions:function(n){var i=e.defer();return t.iAd.setOptions(n,function(){i.resolve()},function(){i.reject()}),i.promise},createBanner:function(n){var i=e.defer();return t.iAd.createBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},removeBanner:function(){var n=e.defer();return t.iAd.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var i=e.defer();return t.iAd.showBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},showBannerAtXY:function(n,i){var o=e.defer();return t.iAd.showBannerAtXY(n,i,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var n=e.defer();return t.iAd.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var i=e.defer();return t.iAd.prepareInterstitial(n,function(){i.resolve()},function(){i.reject()}),i.promise},showInterstitial:function(){var n=e.defer();return t.iAd.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.imagePicker",[]).factory("$cordovaImagePicker",["$q","$window",function(e,t){return{getPictures:function(n){var i=e.defer();return t.imagePicker.getPictures(function(e){i.resolve(e)},function(e){i.reject(e)},n),i.promise}}}]),angular.module("ngCordova.plugins.inAppBrowser",[]).provider("$cordovaInAppBrowser",[function(){var e,t=this.defaultOptions={};this.setDefaultOptions=function(e){t=angular.extend(t,e)},this.$get=["$rootScope","$q","$window","$timeout",function(n,i,o,r){return{open:function(a,s,l){var c=i.defer();if(l&&!angular.isObject(l))return c.reject("options must be an object"),c.promise;var d=angular.extend({},t,l),u=[];angular.forEach(d,function(e,t){u.push(t+"="+e)});var p=u.join();return e=o.open(a,s,p),e.addEventListener("loadstart",function(e){r(function(){n.$broadcast("$cordovaInAppBrowser:loadstart",e)})},!1),e.addEventListener("loadstop",function(e){c.resolve(e),r(function(){n.$broadcast("$cordovaInAppBrowser:loadstop",e)})},!1),e.addEventListener("loaderror",function(e){c.reject(e),r(function(){n.$broadcast("$cordovaInAppBrowser:loaderror",e)})},!1),e.addEventListener("exit",function(e){r(function(){n.$broadcast("$cordovaInAppBrowser:exit",e)})},!1),c.promise},close:function(){e.close(),e=null},show:function(){e.show()},executeScript:function(t){var n=i.defer();return e.executeScript(t,function(e){n.resolve(e)}),n.promise},insertCSS:function(t){var n=i.defer();return e.insertCSS(t,function(e){n.resolve(e)}),n.promise}}}]}]),angular.module("ngCordova.plugins.keyboard",[]).factory("$cordovaKeyboard",[function(){return{hideAccessoryBar:function(e){return cordova.plugins.Keyboard.hideKeyboardAccessoryBar(e)},close:function(){return cordova.plugins.Keyboard.close()},disableScroll:function(e){return cordova.plugins.Keyboard.disableScroll(e)},isVisible:function(){return cordova.plugins.Keyboard.isVisible}}}]),angular.module("ngCordova.plugins.keychain",[]).factory("$cordovaKeychain",["$q","$window",function(e,t){if("Keychain"in t)var n=new Keychain;return{getForKey:function(t,i){var o=e.defer();return n.getForKey(o.resolve,o.reject,t,i),o.promise},setForKey:function(t,i,o){var r=e.defer();return n.setForKey(r.resolve,r.reject,t,i,o),r.promise},removeForKey:function(t,i){var o=e.defer();return n.removeForKey(o.resolve,o.reject,t,i),o.promise}}}]),angular.module("ngCordova.plugins.localNotification",[]).factory("$cordovaLocalNotification",["$q","$window","$rootScope","$timeout",function(e,t,n,i){return document.addEventListener("deviceready",function(){t.plugin&&t.plugin.notification&&(t.plugin.notification.local.oncancel=function(e,t,o){var r={id:e,state:t,json:o};i(function(){n.$broadcast("$cordovaLocalNotification:canceled",r)})},t.plugin.notification.local.onclick=function(e,t,o){var r={id:e,state:t,json:o};i(function(){n.$broadcast("$cordovaLocalNotification:clicked",r)})},t.plugin.notification.local.ontrigger=function(e,t,o){var r={id:e,state:t,json:o};i(function(){n.$broadcast("$cordovaLocalNotification:triggered",r)})},t.plugin.notification.local.onadd=function(e,t,o){var r={id:e,state:t,json:o};i(function(){n.$broadcast("$cordovaLocalNotification:added",r)})})},!1),{add:function(n,i){var o=e.defer();return i=i||null,t.plugin.notification.local.add(n,function(e){o.resolve(e)},i),o.promise},cancel:function(n,i){var o=e.defer();return i=i||null,t.plugin.notification.local.cancel(n,function(e){o.resolve(e)},i),o.promise},cancelAll:function(n){var i=e.defer();return n=n||null,t.plugin.notification.local.cancelAll(function(e){i.resolve(e)},n),i.promise},isScheduled:function(n,i){var o=e.defer();return i=i||null,t.plugin.notification.local.isScheduled(n,function(e){o.resolve(e)},i),o.promise},hasPermission:function(n){var i=e.defer();return t.plugin.notification.local.hasPermission(function(e){e?i.resolve(e):i.reject(e)},n),i.promise},promptForPermission:function(){var n=e.defer();return t.plugin.notification.local.promptForPermission(function(e){e?n.resolve(e):n.reject(e)}),n.promise},registerPermission:function(){var n=e.defer();return t.plugin.notification.local.registerPermission(function(e){e?n.resolve(e):n.reject(e)}),n.promise},getScheduledIds:function(n){var i=e.defer();return t.plugin.notification.local.getScheduledIds(function(e){i.resolve(e)},n),i.promise},isTriggered:function(n,i){var o=e.defer();return t.plugin.notification.local.isTriggered(n,function(e){o.resolve(e)},i),o.promise},getTriggeredIds:function(n){var i=e.defer();return t.plugin.notification.local.getTriggeredIds(function(e){i.resolve(e)},n),i.promise},getDefaults:function(){return t.plugin.notification.local.getDefaults()},setDefaults:function(e){t.plugin.notification.local.setDefaults(e)}}}]),angular.module("ngCordova.plugins.mMediaAds",[]).factory("$cordovaMMediaAds",["$q","$window",function(e,t){return{setOptions:function(n){var i=e.defer();return t.mMedia.setOptions(n,function(){i.resolve()},function(){i.reject()}),i.promise},createBanner:function(n){var i=e.defer();return t.mMedia.createBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},removeBanner:function(){var n=e.defer();return t.mMedia.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var i=e.defer();return t.mMedia.showBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},showBannerAtXY:function(n,i){var o=e.defer();return t.mMedia.showBannerAtXY(n,i,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var n=e.defer();return t.mMedia.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var i=e.defer();return t.mMedia.prepareInterstitial(n,function(){i.resolve()},function(){i.reject()}),i.promise},showInterstitial:function(){var n=e.defer();return t.mMedia.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.media",[]).factory("$cordovaMedia",["$q",function(e){return{newMedia:function(t){var n,i=e.defer(),o=null;return n=new Media(t,function(e){i.resolve(e)},function(e){i.reject(e)},function(e){o=e}),i.promise.getCurrentPosition=function(){n.getCurrentPosition(function(){},function(){})},i.promise.getDuration=function(){n.getDuration()},i.promise.play=function(e){"object"!=typeof e&&(e={}),n.play(e)},i.promise.pause=function(){n.pause()},i.promise.stop=function(){n.stop()},i.promise.release=function(){n.release()},i.promise.seekTo=function(e){n.seekTo(e)},i.promise.setVolume=function(e){n.setVolume(e)},i.promise.startRecord=function(){n.startRecord()},i.promise.stopRecord=function(){n.stopRecord()},i.promise}}}]),angular.module("ngCordova.plugins.mobfoxAds",[]).factory("$cordovaMobFoxAds",["$q","$window",function(e,t){return{setOptions:function(n){var i=e.defer();return t.MobFox.setOptions(n,function(){i.resolve()},function(){i.reject()}),i.promise},createBanner:function(n){var i=e.defer();return t.MobFox.createBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},removeBanner:function(){var n=e.defer();return t.MobFox.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var i=e.defer();return t.MobFox.showBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},showBannerAtXY:function(n,i){var o=e.defer();return t.MobFox.showBannerAtXY(n,i,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var n=e.defer();return t.MobFox.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var i=e.defer();return t.MobFox.prepareInterstitial(n,function(){i.resolve()},function(){i.reject()}),i.promise},showInterstitial:function(){var n=e.defer();return t.MobFox.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins",["ngCordova.plugins.actionSheet","ngCordova.plugins.adMob","ngCordova.plugins.appAvailability","ngCordova.plugins.appRate","ngCordova.plugins.appVersion","ngCordova.plugins.backgroundGeolocation","ngCordova.plugins.badge","ngCordova.plugins.barcodeScanner","ngCordova.plugins.batteryStatus","ngCordova.plugins.ble","ngCordova.plugins.bluetoothSerial","ngCordova.plugins.brightness","ngCordova.plugins.calendar","ngCordova.plugins.camera","ngCordova.plugins.capture","ngCordova.plugins.clipboard","ngCordova.plugins.contacts","ngCordova.plugins.datePicker","ngCordova.plugins.device","ngCordova.plugins.deviceMotion","ngCordova.plugins.deviceOrientation","ngCordova.plugins.dialogs","ngCordova.plugins.emailComposer","ngCordova.plugins.facebook","ngCordova.plugins.facebookAds","ngCordova.plugins.file","ngCordova.plugins.fileTransfer","ngCordova.plugins.fileOpener2","ngCordova.plugins.flashlight","ngCordova.plugins.flurryAds","ngCordova.plugins.ga","ngCordova.plugins.geolocation","ngCordova.plugins.globalization","ngCordova.plugins.googleAds","ngCordova.plugins.googleAnalytics","ngCordova.plugins.googleMap","ngCordova.plugins.healthKit","ngCordova.plugins.httpd","ngCordova.plugins.iAd","ngCordova.plugins.imagePicker","ngCordova.plugins.inAppBrowser","ngCordova.plugins.keyboard","ngCordova.plugins.keychain","ngCordova.plugins.localNotification","ngCordova.plugins.media","ngCordova.plugins.mMediaAds","ngCordova.plugins.mobfoxAds","ngCordova.plugins.mopubAds","ngCordova.plugins.nativeAudio","ngCordova.plugins.network","ngCordova.plugins.oauth","ngCordova.plugins.oauthUtility","ngCordova.plugins.pinDialog","ngCordova.plugins.prefs","ngCordova.plugins.printer","ngCordova.plugins.progressIndicator","ngCordova.plugins.push","ngCordova.plugins.sms","ngCordova.plugins.socialSharing","ngCordova.plugins.spinnerDialog","ngCordova.plugins.splashscreen","ngCordova.plugins.sqlite","ngCordova.plugins.statusbar","ngCordova.plugins.toast","ngCordova.plugins.touchid","ngCordova.plugins.vibration","ngCordova.plugins.videoCapturePlus","ngCordova.plugins.zip"]),angular.module("ngCordova.plugins.mopubAds",[]).factory("$cordovaMoPubAds",["$q","$window",function(e,t){return{setOptions:function(n){var i=e.defer();return t.MoPub.setOptions(n,function(){i.resolve()},function(){i.reject()}),i.promise},createBanner:function(n){var i=e.defer();return t.MoPub.createBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},removeBanner:function(){var n=e.defer();return t.MoPub.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var i=e.defer();return t.MoPub.showBanner(n,function(){i.resolve()},function(){i.reject()}),i.promise},showBannerAtXY:function(n,i){var o=e.defer();return t.MoPub.showBannerAtXY(n,i,function(){o.resolve()},function(){o.reject()}),o.promise},hideBanner:function(){var n=e.defer();return t.MoPub.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var i=e.defer();return t.MoPub.prepareInterstitial(n,function(){i.resolve()},function(){i.reject()}),i.promise},showInterstitial:function(){var n=e.defer();return t.MoPub.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.nativeAudio",[]).factory("$cordovaNativeAudio",["$q","$window",function(e,t){return{preloadSimple:function(n,i){var o=e.defer();return t.plugins.NativeAudio.preloadSimple(n,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},preloadComplex:function(n,i,o,r){var a=e.defer();return t.plugins.NativeAudio.preloadComplex(n,i,o,r,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},play:function(n,i){var o=e.defer();return t.plugins.NativeAudio.play(n,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},stop:function(n){var i=e.defer();return t.plugins.NativeAudio.stop(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},loop:function(n){var i=e.defer();return t.plugins.NativeAudio.loop(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},unload:function(n){var i=e.defer();return t.plugins.NativeAudio.unload(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},setVolumeForComplexAsset:function(n,i){var o=e.defer();return t.plugins.NativeAudio.setVolumeForComplexAsset(n,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}}]),angular.module("ngCordova.plugins.network",[]).factory("$cordovaNetwork",["$rootScope","$timeout",function(e,t){var n=function(){var n=navigator.connection.type;t(function(){e.$broadcast("$cordovaNetwork:offline",n)})},i=function(){var n=navigator.connection.type;t(function(){e.$broadcast("$cordovaNetwork:online",n)})};return document.addEventListener("deviceready",function(){navigator.connection&&(document.addEventListener("offline",n,!1),document.addEventListener("online",i,!1))}),{getNetwork:function(){return navigator.connection.type},isOnline:function(){var e=navigator.connection.type;return e!==Connection.UNKNOWN&&e!==Connection.NONE},isOffline:function(){var e=navigator.connection.type;return e===Connection.UNKNOWN||e===Connection.NONE},clearOfflineWatch:function(){document.removeEventListener("offline",n),e.$$listeners["$cordovaNetwork:offline"]=[]},clearOnlineWatch:function(){document.removeEventListener("online",n),e.$$listeners["$cordovaNetwork:online"]=[]}}}]).run(["$cordovaNetwork",function(){}]),angular.module("ngCordova.plugins.oauth",["ngCordova.plugins.oauthUtility"]).factory("$cordovaOauth",["$q","$http","$cordovaOauthUtility",function(e,t,n){return{adfs:function(n,i,o){var r=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var a=window.open(i+"/adfs/oauth2/authorize?response_type=code&client_id="+n+"&redirect_uri=http://localhost/callback&resource="+o,"_blank","location=no");a.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){var o=e.url.split("code=")[1];t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:i+"/adfs/oauth2/token",data:"client_id="+n+"&code="+o+"&redirect_uri=http://localhost/callback&grant_type=authorization_code"}).success(function(e){r.resolve(e)}).error(function(){r.reject("Problem authenticating")}).finally(function(){setTimeout(function(){a.close()},10)})}}),a.addEventListener("exit",function(){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise},dropbox:function(t){var n=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var i=window.open("https://www.dropbox.com/1/oauth2/authorize?client_id="+t+"&redirect_uri=http://localhost/callback&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1],o=t.split("&"),r=[],a=0;a<o.length;a++)r[o[a].split("=")[0]]=o[a].split("=")[1];void 0!==r.access_token&&null!==r.access_token?n.resolve({access_token:r.access_token,token_type:r.token_type,uid:r.uid}):n.reject("Problem authenticating"),setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(){n.reject("The sign in flow was canceled")})}else n.reject("Could not find InAppBrowser plugin")}else n.reject("Cannot authenticate via a web browser");return n.promise},digitalOcean:function(n,i){var o=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var r=window.open("https://cloud.digitalocean.com/v1/oauth/authorize?client_id="+n+"&redirect_uri=http://localhost/callback&response_type=code&scope=read%20write","_blank","location=no,clearsessioncache=yes,clearcache=yes");r.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){var a=e.url.split("code=")[1];t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:"https://cloud.digitalocean.com/v1/oauth/token",data:"client_id="+n+"&client_secret="+i+"&redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+a}).success(function(e){o.resolve(e)}).error(function(){o.reject("Problem authenticating")}).finally(function(){setTimeout(function(){r.close()},10)})}}),r.addEventListener("exit",function(){o.reject("The sign in flow was canceled")})}else o.reject("Could not find InAppBrowser plugin")}else o.reject("Cannot authenticate via a web browser");return o.promise},google:function(t,n){var i=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var o=window.open("https://accounts.google.com/o/oauth2/auth?client_id="+t+"&redirect_uri=http://localhost/callback&scope="+n.join(" ")+"&approval_prompt=force&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");o.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1],n=t.split("&"),r=[],a=0;a<n.length;a++)r[n[a].split("=")[0]]=n[a].split("=")[1];void 0!==r.access_token&&null!==r.access_token?i.resolve({access_token:r.access_token,token_type:r.token_type,expires_in:r.expires_in}):i.reject("Problem authenticating"),setTimeout(function(){o.close()},10)}}),o.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin")}else i.reject("Cannot authenticate via a web browser");return i.promise},github:function(n,i,o){var r=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var a=window.open("https://github.com/login/oauth/authorize?client_id="+n+"&redirect_uri=http://localhost/callback&scope="+o.join(","),"_blank","location=no,clearsessioncache=yes,clearcache=yes");a.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t.defaults.headers.post.accept="application/json",t({method:"post",url:"https://github.com/login/oauth/access_token",data:"client_id="+n+"&client_secret="+i+"&redirect_uri=http://localhost/callback&code="+requestToken}).success(function(e){r.resolve(e)}).error(function(){r.reject("Problem authenticating")}).finally(function(){setTimeout(function(){a.close()},10)}))}),a.addEventListener("exit",function(){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise},facebook:function(t,n){var i=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var o=window.open("https://www.facebook.com/dialog/oauth?client_id="+t+"&redirect_uri=http://localhost/callback&response_type=token&scope="+n.join(","),"_blank","location=no,clearsessioncache=yes,clearcache=yes");o.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1],n=t.split("&"),r=[],a=0;a<n.length;a++)r[n[a].split("=")[0]]=n[a].split("=")[1];void 0!==r.access_token&&null!==r.access_token?i.resolve({access_token:r.access_token,expires_in:r.expires_in}):i.reject("Problem authenticating"),setTimeout(function(){o.close()},10)}}),o.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin")}else i.reject("Cannot authenticate via a web browser");return i.promise},linkedin:function(n,i,o,r){var a=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var s=window.open("https://www.linkedin.com/uas/oauth2/authorization?client_id="+n+"&redirect_uri=http://localhost/callback&scope="+o.join(" ")+"&response_type=code&state="+r,"_blank","location=no,clearsessioncache=yes,clearcache=yes");s.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:"https://www.linkedin.com/uas/oauth2/accessToken",data:"client_id="+n+"&client_secret="+i+"&redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+requestToken}).success(function(e){a.resolve(e)}).error(function(){a.reject("Problem authenticating")}).finally(function(){setTimeout(function(){s.close()},10)}))}),s.addEventListener("exit",function(){a.reject("The sign in flow was canceled")})}else a.reject("Could not find InAppBrowser plugin")}else a.reject("Cannot authenticate via a web browser");return a.promise},instagram:function(t,n){var i=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var o=window.open("https://api.instagram.com/oauth/authorize/?client_id="+t+"&redirect_uri=http://localhost/callback&scope="+n.join(" ")+"&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");o.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1],n=t.split("&"),r=[],a=0;a<n.length;a++)r[n[a].split("=")[0]]=n[a].split("=")[1];void 0!==r.access_token&&null!==r.access_token?i.resolve({access_token:r.access_token}):i.reject("Problem authenticating"),setTimeout(function(){o.close()},10)}}),o.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin")}else i.reject("Cannot authenticate via a web browser");return i.promise},box:function(n,i,o){var r=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var a=window.open("https://app.box.com/api/oauth2/authorize/?client_id="+n+"&redirect_uri=http://localhost/callback&state="+o+"&response_type=code","_blank","location=no,clearsessioncache=yes,clearcache=yes");a.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:"https://app.box.com/api/oauth2/token",data:"client_id="+n+"&client_secret="+i+"&redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+requestToken}).success(function(e){r.resolve(e)}).error(function(){r.reject("Problem authenticating")}).finally(function(){setTimeout(function(){a.close()},10)}))}),a.addEventListener("exit",function(){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise},reddit:function(n,i,o){var r=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var a=window.open("https://ssl.reddit.com/api/v1/authorize?client_id="+n+"&redirect_uri=http://localhost/callback&duration=permanent&state=ngcordovaoauth&scope="+o.join(",")+"&response_type=code","_blank","location=no,clearsessioncache=yes,clearcache=yes");a.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t.defaults.headers.post.Authorization="Basic "+btoa(n+":"+i),t({method:"post",url:"https://ssl.reddit.com/api/v1/access_token",data:"redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+requestToken}).success(function(e){r.resolve(e)}).error(function(){r.reject("Problem authenticating")}).finally(function(){setTimeout(function(){a.close()},10)}))}),a.addEventListener("exit",function(){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise},twitter:function(i,o){var r=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser"))if("undefined"!=typeof jsSHA){var a={oauth_consumer_key:i,oauth_nonce:n.createNonce(10),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:Math.round((new Date).getTime()/1e3),oauth_version:"1.0"},s=n.createSignature("POST","https://api.twitter.com/oauth/request_token",a,{oauth_callback:"http://localhost/callback"},o);t.defaults.headers.post.Authorization=s.authorization_header,t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:"https://api.twitter.com/oauth/request_token",data:"oauth_callback=http://localhost/callback"}).success(function(e){for(var i=e.split("&"),s={},l=0;l<i.length;l++)s[i[l].split("=")[0]]=i[l].split("=")[1];!1===s.hasOwnProperty("oauth_token")&&r.reject("Oauth request token was not received");var c=window.open("https://api.twitter.com/oauth/authenticate?oauth_token="+s.oauth_token,"_blank","location=no,clearsessioncache=yes,clearcache=yes");c.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var i=e.url.split("?")[1],s=i.split("&"),l={},d=0;d<s.length;d++)l[s[d].split("=")[0]]=s[d].split("=")[1];!1===l.hasOwnProperty("oauth_verifier")&&r.reject("Browser authentication failed to complete.  No oauth_verifier was returned"),delete a.oauth_signature,a.oauth_token=l.oauth_token;var u=n.createSignature("POST","https://api.twitter.com/oauth/access_token",a,{oauth_verifier:l.oauth_verifier},o);t.defaults.headers.post.Authorization=u.authorization_header,t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:"https://api.twitter.com/oauth/access_token",data:"oauth_verifier="+l.oauth_verifier}).success(function(e){for(var t=e.split("&"),n={},i=0;i<t.length;i++)n[t[i].split("=")[0]]=t[i].split("=")[1];!1===n.hasOwnProperty("oauth_token_secret")&&r.reject("Oauth access token was not received"),r.resolve(n)}).error(function(e){r.reject(e)}).finally(function(){setTimeout(function(){c.close()},10)})}}),c.addEventListener("exit",function(){r.reject("The sign in flow was canceled")})}).error(function(e){r.reject(e)})}else r.reject("Missing jsSHA JavaScript library");else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise},meetup:function(t){var n=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var i=window.open("https://secure.meetup.com/oauth2/authorize/?client_id="+t+"&redirect_uri=http://localhost/callback&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1],o=t.split("&"),r={},a=0;a<o.length;a++)r[o[a].split("=")[0]]=o[a].split("=")[1];void 0!==r.access_token&&null!==r.access_token?n.resolve(r):n.reject("Problem authenticating"),setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(){n.reject("The sign in flow was canceled")})}else n.reject("Could not find InAppBrowser plugin")}else n.reject("Cannot authenticate via a web browser");return n.promise},salesforce:function(t,n){var i="http://localhost/callback",o=function(e,t,n){return e+"services/oauth2/authorize?display=touch&response_type=token&client_id="+escape(t)+"&redirect_uri="+escape(n)},r=function(e,t){return e.substr(0,t.length)===t},a=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var s=window.open(o(t,n,i),"_blank","location=no,clearsessioncache=yes,clearcache=yes");s.addEventListener("loadstart",function(e){if(r(e.url,i)){var t={},n=e.url.split("#")[1];if(n){var o=n.split("&");for(var l in o){var c=o[l].split("=");t[c[0]]=unescape(c[1])}}void 0===t||void 0===t.access_token?a.reject("Problem authenticating"):a.resolve(t),setTimeout(function(){s.close()},10)}}),s.addEventListener("exit",function(){a.reject("The sign in flow was canceled")})}else a.reject("Could not find InAppBrowser plugin")}else a.reject("Cannot authenticate via a web browser");return a.promise},strava:function(n,i,o){var r=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var a=window.open("https://www.strava.com/oauth/authorize?client_id="+n+"&redirect_uri=http://localhost/callback&scope="+o.join(",")+"&response_type=code&approval_prompt=force","_blank","location=no,clearsessioncache=yes,clearcache=yes");a.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:"https://www.strava.com/oauth/token",data:"client_id="+n+"&client_secret="+i+"&code="+requestToken}).success(function(e){r.resolve(e)}).error(function(){r.reject("Problem authenticating")}).finally(function(){setTimeout(function(){a.close()},10)}))}),a.addEventListener("exit",function(){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin")}else r.reject("Cannot authenticate via a web browser");return r.promise},foursquare:function(t){var n=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var i=window.open("https://foursquare.com/oauth2/authenticate?client_id="+t+"&redirect_uri=http://localhost/callback&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1],o=t.split("&"),r=[],a=0;a<o.length;a++)r[o[a].split("=")[0]]=o[a].split("=")[1];if(void 0!==r.access_token&&null!==r.access_token){var s={access_token:r.access_token,expires_in:r.expires_in};n.resolve(s)}else n.reject("Problem authenticating");setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(){n.reject("The sign in flow was canceled")})}else n.reject("Could not find InAppBrowser plugin")}else n.reject("Cannot authenticate via a web browser");return n.promise},magento:function(i,o,r){var a=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser"))if("undefined"!=typeof jsSHA){var s={oauth_callback:"http://localhost/callback",oauth_consumer_key:o,oauth_nonce:n.createNonce(5),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:Math.round((new Date).getTime()/1e3),oauth_version:"1.0"},l=n.createSignature("POST",i+"/oauth/initiate",s,{oauth_callback:"http://localhost/callback"},r);t.defaults.headers.post.Authorization=l.authorization_header,t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:i+"/oauth/initiate",data:"oauth_callback=http://localhost/callback"}).success(function(e){for(var o=e.split("&"),l={},c=0;c<o.length;c++)l[o[c].split("=")[0]]=o[c].split("=")[1];!1===l.hasOwnProperty("oauth_token")&&a.reject("Oauth request token was not received");var d=l.oauth_token_secret,u=window.open(i+"/oauth/authorize?oauth_token="+l.oauth_token,"_blank","location=no,clearsessioncache=yes,clearcache=yes");u.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var o=e.url.split("?")[1],l=o.split("&"),c={},p=0;p<l.length;p++)c[l[p].split("=")[0]]=l[p].split("=")[1];!1===c.hasOwnProperty("oauth_verifier")&&a.reject("Browser authentication failed to complete.  No oauth_verifier was returned"),delete s.oauth_signature,delete s.oauth_callback,s.oauth_token=c.oauth_token,s.oauth_nonce=n.createNonce(5),s.oauth_verifier=c.oauth_verifier;var g=n.createSignature("POST",i+"/oauth/token",s,{},r,d);t.defaults.headers.post.Authorization=g.authorization_header,t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t({method:"post",url:i+"/oauth/token"}).success(function(e){for(var t=e.split("&"),n={},i=0;i<t.length;i++)n[t[i].split("=")[0]]=t[i].split("=")[1];!1===n.hasOwnProperty("oauth_token_secret")&&a.reject("Oauth access token was not received"),a.resolve(n)}).error(function(e){a.reject(e)}).finally(function(){setTimeout(function(){u.close()},10)})}}),u.addEventListener("exit",function(){a.reject("The sign in flow was canceled")})}).error(function(e){a.reject(e)})}else a.reject("Missing jsSHA JavaScript library");else a.reject("Could not find InAppBrowser plugin")}else a.reject("Cannot authenticate via a web browser");return a.promise},vkontakte:function(t,n){var i=e.defer();if(window.cordova){if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var o=window.open("https://oauth.vk.com/authorize?client_id="+t+"&redirect_uri=http://oauth.vk.com/blank.html&response_type=token&scope="+n.join(",")+"&display=touch&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");o.addEventListener("loadstart",function(e){var t=e.url.split("#");if("https://oauth.vk.com/blank.html"==t[0]||"http://oauth.vk.com/blank.html"==t[0]){for(var n=e.url.split("#")[1],r=n.split("&"),a=[],s=0;s<r.length;s++)a[r[s].split("=")[0]]=r[s].split("=")[1];void 0!==a.access_token&&null!==a.access_token?i.resolve({access_token:a.access_token,expires_in:a.expires_in,user_id:a.user_id}):i.reject("Problem authenticating"),setTimeout(function(){o.close()},10)}}),o.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin")}else i.reject("Cannot authenticate via a web browser");return i.promise}}}]),angular.module("ngCordova.plugins.oauthUtility",[]).factory("$cordovaOauthUtility",["$q",function(){return{createSignature:function(e,t,n,i,o,r){if("undefined"!=typeof jsSHA){for(var a=angular.copy(n),s=Object.keys(i),l=0;l<s.length;l++)a[s[l]]=encodeURIComponent(i[s[l]]);var c=e+"&"+encodeURIComponent(t)+"&",d=Object.keys(a).sort();for(l=0;l<d.length;l++)c+=encodeURIComponent(l==d.length-1?d[l]+"="+a[d[l]]:d[l]+"="+a[d[l]]+"&");var u=new jsSHA(c,"TEXT"),p="";r&&(p=encodeURIComponent(r)),n.oauth_signature=encodeURIComponent(u.getHMAC(encodeURIComponent(o)+"&"+p,"TEXT","SHA-1","B64"));var g=Object.keys(n),m="OAuth ";for(l=0;l<g.length;l++)m+=l==g.length-1?g[l]+'="'+n[g[l]]+'"':g[l]+'="'+n[g[l]]+'",';return{signature_base_string:c,authorization_header:m,signature:n.oauth_signature}}return"Missing jsSHA JavaScript library"},createNonce:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;e>i;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}}}]),angular.module("ngCordova.plugins.pinDialog",[]).factory("$cordovaPinDialog",["$q","$window",function(e,t){return{prompt:function(n,i,o){var r=e.defer();return t.plugins.pinDialog.prompt(n,function(e){r.resolve(e)},i,o),r.promise}}}]),angular.module("ngCordova.plugins.prefs",[]).factory("$cordovaPreferences",["$window","$q",function(e,t){return{set:function(n,i){var o=t.defer();return e.appgiraffe.plugins.applicationPreferences.set(n,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},get:function(n){var i=t.defer();return e.appgiraffe.plugins.applicationPreferences.get(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}}]),angular.module("ngCordova.plugins.printer",[]).factory("$cordovaPrinter",["$q","$window",function(e,t){return{isAvailable:function(){var n=e.defer();return t.plugin.printer.isAvailable(function(e){n.resolve(e)}),n.promise},print:function(n,i){var o=e.defer();return t.plugin.printer.print(n,i,function(){o.resolve()}),o.promise}}}]),angular.module("ngCordova.plugins.progressIndicator",[]).factory("$cordovaProgress",["$q",function(){return{show:function(e){var t=e||"Please wait...";return ProgressIndicator.show(t)},showSimple:function(e){var t=e||!1;return ProgressIndicator.showSimple(t)},showSimpleWithLabel:function(e,t){var n=e||!1,i=t||"Loading...";return ProgressIndicator.showSimpleWithLabel(n,i)},showSimpleWithLabelDetail:function(e,t,n){var i=e||!1,o=t||"Loading...",r=n||"Please wait";return ProgressIndicator.showSimpleWithLabelDetail(i,o,r)},showDeterminate:function(e,t){var n=e||!1,i=t||5e4;return ProgressIndicator.showDeterminate(n,i)},showDeterminateWithLabel:function(e,t,n){var i=e||!1,o=t||5e4,r=n||"Loading...";return ProgressIndicator.showDeterminateWithLabel(i,o,r)},showAnnular:function(e,t){var n=e||!1,i=t||5e4;return ProgressIndicator.showAnnular(n,i)},showAnnularWithLabel:function(e,t,n){var i=e||!1,o=t||5e4,r=n||"Loading...";return ProgressIndicator.showAnnularWithLabel(i,o,r)},showBar:function(e,t){var n=e||!1,i=t||5e4;return ProgressIndicator.showBar(n,i)},showBarWithLabel:function(e,t,n){var i=e||!1,o=t||5e4,r=n||"Loading...";return ProgressIndicator.showBarWithLabel(i,o,r)},showSuccess:function(e,t){var n=e||!1,i=t||"Success";return ProgressIndicator.showSuccess(n,i)},showText:function(e,t,n){var i=e||!1,o=t||"Warning",r=n||"center";return ProgressIndicator.showText(i,o,r)},hide:function(){return ProgressIndicator.hide()}}}]),angular.module("ngCordova.plugins.push",[]).factory("$cordovaPush",["$q","$window","$rootScope","$timeout",function(e,t,n,i){return{onNotification:function(e){i(function(){n.$broadcast("$cordovaPush:notificationReceived",e)})},register:function(n){var i,o=e.defer();return void 0!==n&&void 0===n.ecb&&(i=null==document.querySelector("[ng-app]")?"document.body":"document.querySelector('[ng-app]')",n.ecb="angular.element("+i+").injector().get('$cordovaPush').onNotification"),t.plugins.pushNotification.register(function(e){o.resolve(e)},function(e){o.reject(e)},n),o.promise},unregister:function(n){var i=e.defer();return t.plugins.pushNotification.unregister(function(e){i.resolve(e)},function(e){i.reject(e)},n),i.promise},setBadgeNumber:function(n){var i=e.defer();return t.plugins.pushNotification.setApplicationIconBadgeNumber(function(e){i.resolve(e)},function(e){i.reject(e)},n),i.promise}}}]),angular.module("ngCordova.plugins.sms",[]).factory("$cordovaSms",["$q",function(e){return{send:function(t,n,i){var o=e.defer();return sms.send(t,n,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}}]),angular.module("ngCordova.plugins.socialSharing",[]).factory("$cordovaSocialSharing",["$q","$window",function(e,t){return{share:function(n,i,o,r){var a=e.defer();return i=i||null,o=o||null,r=r||null,t.plugins.socialsharing.share(n,i,o,r,function(){a.resolve(!0)},function(){a.reject(!1)}),a.promise},shareViaTwitter:function(n,i,o){var r=e.defer();return i=i||null,o=o||null,t.plugins.socialsharing.shareViaTwitter(n,i,o,function(){r.resolve(!0)},function(){r.reject(!1)}),r.promise},shareViaWhatsApp:function(n,i,o){var r=e.defer();return i=i||null,o=o||null,t.plugins.socialsharing.shareViaWhatsApp(n,i,o,function(){r.resolve(!0)},function(){r.reject(!1)}),r.promise},shareViaFacebook:function(n,i,o){var r=e.defer();return n=n||null,i=i||null,o=o||null,t.plugins.socialsharing.shareViaFacebook(n,i,o,function(){r.resolve(!0)},function(){r.reject(!1)}),r.promise},shareViaFacebookWithPasteMessageHint:function(n,i,o,r){var a=e.defer();return i=i||null,o=o||null,t.plugins.socialsharing.shareViaFacebookWithPasteMessageHint(n,i,o,r,function(){a.resolve(!0)},function(){a.reject(!1)}),a.promise},shareViaSMS:function(n,i){var o=e.defer();return t.plugins.socialsharing.shareViaSMS(n,i,function(){o.resolve(!0)},function(){o.reject(!1)}),o.promise},shareViaEmail:function(n,i,o,r,a,s){var l=e.defer();return o=o||null,r=r||null,a=a||null,s=s||null,t.plugins.socialsharing.shareViaEmail(n,i,o,r,a,s,function(){l.resolve(!0)},function(){l.reject(!1)}),l.promise},shareVia:function(n,i,o,r,a){var s=e.defer();return i=i||null,o=o||null,r=r||null,a=a||null,t.plugins.socialsharing.shareVia(n,i,o,r,a,function(){s.resolve(!0)},function(){s.reject(!1)}),s.promise},canShareViaEmail:function(){var n=e.defer();return t.plugins.socialsharing.canShareViaEmail(function(){n.resolve(!0)},function(){n.reject(!1)}),n.promise},canShareVia:function(n,i,o,r,a){var s=e.defer();return t.plugins.socialsharing.canShareVia(n,i,o,r,a,function(e){s.resolve(e)},function(e){s.reject(e)}),s.promise},available:function(){var t=e.defer();window.plugins.socialsharing.available(function(e){e?t.resolve():t.reject()})}}}]),angular.module("ngCordova.plugins.spinnerDialog",[]).factory("$cordovaSpinnerDialog",["$window",function(e){return{show:function(t,n,i){return i=i||!1,e.plugins.spinnerDialog.show(t,n,i)},hide:function(){return e.plugins.spinnerDialog.hide()}}}]),angular.module("ngCordova.plugins.splashscreen",[]).factory("$cordovaSplashscreen",[function(){return{hide:function(){return navigator.splashscreen.hide()},show:function(){return navigator.splashscreen.show()}}}]),angular.module("ngCordova.plugins.sqlite",[]).factory("$cordovaSQLite",["$q","$window",function(e,t){return{openDB:function(e,n){return void 0===n&&(n=0),t.sqlitePlugin.openDatabase({name:e,bgType:n})},execute:function(t,n,i){var o=e.defer();return t.transaction(function(e){e.executeSql(n,i,function(e,t){o.resolve(t)},function(e,t){o.reject(t)})}),o.promise},insertCollection:function(t,n,i){var o=e.defer(),r=i.slice(0);return t.transaction(function(e){!function t(){var i=r.splice(0,1)[0];try{e.executeSql(n,i,function(e,n){0===r.length?o.resolve(n):t()},function(e,t){o.reject(t)})}catch(e){o.reject(e)}}()}),o.promise},nestedExecute:function(t,n,i,o,r){var a=e.defer();return t.transaction(function(e){e.executeSql(n,o,function(e,t){a.resolve(t),e.executeSql(i,r,function(e,t){a.resolve(t)})})},function(e,t){a.reject(t)}),a.promise},deleteDB:function(n){var i=e.defer();return t.sqlitePlugin.deleteDatabase(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}}]),angular.module("ngCordova.plugins.statusbar",[]).factory("$cordovaStatusbar",[function(){return{overlaysWebView:function(e){return StatusBar.overlaysWebView(!!e)},style:function(e){switch(e){case 0:return StatusBar.styleDefault();case 1:return StatusBar.styleLightContent();case 2:return StatusBar.styleBlackTranslucent();case 3:return StatusBar.styleBlackOpaque();default:return StatusBar.styleDefault()}},styleColor:function(e){return StatusBar.backgroundColorByName(e)},styleHex:function(e){return StatusBar.backgroundColorByHexString(e)},hide:function(){return StatusBar.hide()},show:function(){return StatusBar.show()},isVisible:function(){return StatusBar.isVisible}}}]),angular.module("ngCordova.plugins.toast",[]).factory("$cordovaToast",["$q","$window",function(e,t){return{showShortTop:function(n){var i=e.defer();return t.plugins.toast.showShortTop(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},showShortCenter:function(n){var i=e.defer();return t.plugins.toast.showShortCenter(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},showShortBottom:function(n){var i=e.defer();return t.plugins.toast.showShortBottom(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},showLongTop:function(n){var i=e.defer();return t.plugins.toast.showLongTop(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},showLongCenter:function(n){var i=e.defer();return t.plugins.toast.showLongCenter(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},showLongBottom:function(n){var i=e.defer();return t.plugins.toast.showLongBottom(n,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},show:function(n,i,o){var r=e.defer();return t.plugins.toast.show(n,i,o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.touchid",[]).factory("$cordovaTouchID",["$q",function(e){return{checkSupport:function(){var t=e.defer();return window.cordova?touchid.checkSupport(function(e){t.resolve(e)},function(e){t.reject(e)}):t.reject("Not supported without cordova.js"),t.promise},authenticate:function(t){var n=e.defer();return window.cordova?touchid.authenticate(function(e){n.resolve(e)},function(e){n.reject(e)},t):n.reject("Not supported without cordova.js"),n.promise}}}]),angular.module("ngCordova.plugins.vibration",[]).factory("$cordovaVibration",[function(){return{vibrate:function(e){return navigator.notification.vibrate(e)},vibrateWithPattern:function(e,t){return navigator.notification.vibrateWithPattern(e,t)},cancelVibration:function(){return navigator.notification.cancelVibration()}}}]),angular.module("ngCordova.plugins.videoCapturePlus",[]).provider("$cordovaVideoCapturePlus",[function(){var e={};this.setLimit=function(t){e.limit=t},this.setMaxDuration=function(t){e.duration=t},this.setHighQuality=function(t){e.highquality=t},this.useFrontCamera=function(t){e.frontcamera=t},this.setPortraitOverlay=function(t){e.portraitOverlay=t},this.setLandscapeOverlay=function(t){e.landscapeOverlay=t},this.setOverlayText=function(t){e.overlayText=t},this.$get=["$q","$window",function(t,n){return{captureVideo:function(i){var o=t.defer();return n.plugins.videocaptureplus?(n.plugins.videocaptureplus.captureVideo(o.resolve,o.reject,angular.extend({},e,i)),o.promise):(o.resolve(null),o.promise)}}}]}]),angular.module("ngCordova.plugins.zip",[]).factory("$cordovaZip",["$q","$window",function(e,t){return{unzip:function(n,i){var o=e.defer();return t.zip.unzip(n,i,function(e){0===e?o.resolve():o.reject()},function(e){o.notify(e)}),o.promise}}}])}(),window.onNotificationGCM=function(e){switch(e.event){case"registered":if(e.regid.length>0){var t=angular.element(document.querySelector("[ng-app]"));t.injector().get("myService").registerID(e.regid,"android"),t.scope().$apply()}break;case"message":e.foreground?console.log("FOREGROUND NOTIFICATION"):e.coldstart?console.log("COLDSTART NOTIFICATION"):console.log("BACKGROUND NOTIFICATION"),navigator.notification.alert(e.payload.title);break;case"error":console.log("ERROR MESSAGE: "+e.msg);break;default:console.log("UNKNOWN EVENT")}},app.config(function(e,t,n){e.state("app",{url:"/app",abstract:!0,templateUrl:"templates/tabs.html"}).state("app.profile",{url:"/profile/:action",views:{"profile-tab":{templateUrl:"templates/profile-views/profile.html",controller:"ProfileCtrl"},params:{action:null}}}).state("app.resetPassword",{url:"/resetPassword/:stage/:code/:_profileId",views:{"profile-tab":{templateUrl:"templates/profile-views/reset-password.html",controller:"ResetPasswordCtrl"}},params:{stage:null,code:null,_profileId:null}}).state("app.registerIntro",{url:"/registerIntro",views:{"profile-tab":{templateUrl:"templates/profile-views/sign-up-intro.html",controller:"RegisterIntroCtrl"}}}).state("app.register",{url:"/register/:profileType",views:{"profile-tab":{templateUrl:"templates/profile-views/sign-up.html",controller:"RegisterCtrl"}},params:{profileType:null}}).state("app.registerFinal",{url:"/registerFinal/:profileType/:_usersId/:usersEMail",views:{"profile-tab":{templateUrl:"templates/profile-views/sign-up-final.html",controller:"RegisterFinalCtrl"}},params:{profileType:null,_usersId:null,usersEMail:null,usersPWord:null}}).state("app.inviteContacts",{url:"/inviteContacts",views:{"profile-tab":{templateUrl:"templates/profile-views/invite-contacts.html",controller:"InviteContactsCtrl"}},params:{profileType:null,_usersId:null,usersEMail:null,usersPWord:null}}).state("app.privacyPolicy",{url:"/privacyPolicy",views:{"profile-tab":{templateUrl:"templates/profile-views/privacy-policy.html",controller:"PrivacyPolicyCtrl"}}}).state("app.profile.notificationsSummary",{url:"/notificationsSummary/",views:{"profile-tab@app":{templateUrl:"templates/profile-views/notifications-summary.html",controller:"NotificationsSummaryCtrl"}}}).state("app.profile.notification",{url:"/notification/:id/:type",views:{"profile-tab@app":{templateUrl:"templates/profile-views/notification.html",controller:"NotificationCtrl"}},params:{id:null,type:null}}).state("app.profile.messageGroups",{url:"/messageGroups/:relListing/:groupType",views:{"profile-tab@app":{templateUrl:"templates/profile-views/message-groups.html",controller:"MessageGroupsCtrl"}},params:{relListing:null,groupType:null}}).state("app.profile.messageGroups.messageGroup",{url:"/messageGroups/:relListing/:groupType/messageGroup/:_id/:_profileIds/:messageNameString",cache:!0,views:{"profile-tab@app":{templateUrl:"templates/profile-views/message-group.html",controller:"MessageGroupCtrl"}},params:{relListing:null,groupType:null,_id:null,_profileIds:[],messageNameString:null}}).state("app.businessItems",{url:"/businessItems/:itemType/:timeScale",views:{"profile-tab":{templateUrl:"templates/profile-views/business-items.html",controller:"BusinessItemsCtrl"}},params:{itemType:null,timeScale:null}}).state("app.businessItem",{url:"/businessItems/:itemType/:timeScale/businessItem/:_id",views:{"profile-tab":{templateUrl:"templates/profile-views/business-item.html",controller:"BusinessItemCtrl"}},params:{itemType:null,timeScale:null,_id:null}}).state("app.addBusinessItem",{url:"/businessItems/:itemType/addBusinessItem/:_secondaryItemTypeId",views:{"profile-tab":{templateUrl:"templates/profile-views/add-business-item.html",controller:"AddBusinessItemCtrl"}},params:{itemType:null,_secondaryItemTypeId:null}}).state("app.businessItemSettings",{url:"/businessItems/:itemType/businessItemSettings",views:{"profile-tab":{templateUrl:"templates/profile-views/business-item-settings.html",controller:"BusinessItemSettingsCtrl"}},params:{itemType:null}}).state("app.profileItems",{url:"/profileItems/:itemType/:specificItemType/:_albumId/:albumType/:timeScale",views:{"profile-tab":{templateUrl:"templates/profile-views/profile-items.html",controller:"ProfileItemsCtrl"}},params:{itemType:null,specificItemType:null,_albumId:null,albumType:null,timeScale:null}}).state("app.addProfileItem",{url:"/addProfileItem/:itemType/:specificItemType/:_albumId/:albumType",views:{"profile-tab":{templateUrl:"templates/profile-views/add-profile-item.html",controller:"AddProfileItemCtrl"}},params:{itemType:null,specificItemType:null,_albumId:null,albumType:null}}).state("app.accountSettings",{url:"/accountSettings/:settingsType",views:{"profile-tab":{templateUrl:"templates/profile-views/account-settings.html",controller:"AccountSettingsCtrl"}},params:{settingsType:null}}).state("app.accountSettingsAdvanced",{url:"/accountSettings/:settingsType/accountSettingsAdvanced/:setting",views:{"profile-tab":{templateUrl:"templates/profile-views/account-settings-advanced.html",controller:"AccountSettingsAdvancedCtrl"}},params:{settingsType:null,setting:null}}).state("app.contactMyNyte",{url:"/contactMyNyte/",views:{"profile-tab":{templateUrl:"templates/profile-views/contact-mynyte.html",controller:"ContactMyNyteCtrl"}}}).state("app.addContact",{url:"/contacts/addContact",views:{"profile-tab":{templateUrl:"templates/profile-views/add-contact.html",controller:"AddContactCtrl"}}}).state("app.contactDetail",{url:"/contacts/contactDetail/:_id",views:{"profile-tab":{templateUrl:"templates/profile-views/contact-detail.html",controller:"ContactDetailCtrl"}},params:{_id:null}}).state("app.articles",{url:"/articles/:articleType/:categories/:subCategories",views:{"profile-tab":{templateUrl:"templates/article-views/articles.html",controller:"ArticlesCtrl"}},params:{articleType:null,categories:null,subCategories:null}}).state("app.articles.article",{url:"/:articleId",views:{"profile-tab":{templateUrl:"templates/article-views/article.html",controller:"ArticleCtrl"}},params:{articleId:null}}).state("app.offers",{url:"/offers",views:{"offers-tab":{templateUrl:"templates/offers-views/offers.html",controller:"OffersCtrl"}}}).state("app.offers.offerDetail",{url:"/offerDetail/:_id",views:{"offers-tab@app":{templateUrl:"templates/offers-views/offer-detail.html",controller:"OfferDetailCtrl"}},params:{_id:null}}).state("app.feed",{url:"/feed",views:{"feed-tab":{templateUrl:"templates/feed-views/nl-feed.html",controller:"NLFeedCtrl"}}}).state("app.feed.nlfeedListings",{url:"/nl-feedListings/:searchType/:_businessTypeId/",views:{"feed-tab@app":{templateUrl:"templates/feed-views/nl-feed-listings.html",controller:"NLFeedListingsCtrl"}},params:{searchType:null,_businessTypeId:null}}).state("app.feed.nlfeedListing",{url:"/nl-feedListings/:searchType/:_businessTypeId/nl-feedListing/:_listingId/:listingType",views:{"feed-tab@app":{templateUrl:"templates/feed-views/nl-feed-listing.html",controller:"NLFeedListingCtrl"}},params:{searchType:null,_businessTypeId:null,_listingId:null,listingType:null}}).state("app.feedListing-photos",{url:"/nl-feedListings/:searchType/:_businessTypeId/nl-feedListing/:_listingId/:listingType/:listingName/nl-feedListing-photos/:_id",views:{"feed-tab":{templateUrl:"templates/feed-views/nl-feed-listing-photos.html",controller:"NLFeedListingPhotosCtrl"}},params:{searchType:null,_businessTypeId:null,_listingId:null,listingType:null,listingName:null,_id:null,specificListingType:null}}).state("app.feedListing-specific-photos",{url:"/nl-feedListings/:searchType/:_businessTypeId/nl-feedListing/:_listingId/:listingType/:listingName/nl-feedListing-photos/:_id/nl-feedListing-specific-photos/:_listingProfileId/:_albumId/:albumType",views:{"feed-tab":{templateUrl:"templates/feed-views/nl-feed-listing-specific-photos.html",controller:"NLFeedListingSpecificPhotosCtrl"}},params:{searchType:null,_businessTypeId:null,_listingId:null,listingType:null,listingName:null,_id:null,_listingProfileId:null,_albumId:null,albumType:null}}).state("app.seeTrailer",{url:"/nl-feedListings/:searchType/:_businessTypeId/nl-feedListing/:_listingId/:listingType/:listingName/see-trailer/:_id/:movieTitle",views:{"feed-tab":{templateUrl:"templates/feed-views/see-trailer.html",controller:"SeeTrailerCtrl"}},params:{searchType:null,_businessTypeId:null,_listingId:null,listingType:null,listingName:null,_id:null,movieTitle:null}}).state("app.bookTable",{url:"/nl-feedListings/:searchType/:_businessTypeId/nl-feedListing/:_listingId/:listingType/book-table/:_id/:listingName/:tableForMax/:phoneIsRequiredForBooking/:commentAllowed",views:{"feed-tab":{templateUrl:"templates/feed-views/book-table.html",controller:"BookTableCtrl"}},params:{searchType:null,_businessTypeId:null,_listingId:null,listingType:null,_id:null,listingName:null,tableForMax:null,phoneIsRequiredForBooking:null,commentAllowed:null}}).state("app.bookTickets",{url:"/nl-feedListings/:searchType/:_businessTypeId/nl-feedListing/:_listingId/:listingType/book-tickets/:_id/:listingName",views:{"feed-tab":{templateUrl:"templates/feed-views/book-tickets.html",controller:"BookTicketsCtrl"}},params:{searchType:null,_businessTypeId:null,_listingId:null,listingType:null,_id:null,listingName:null}}).state("app.seeMenu",{url:"/nl-feedListings/:searchType/:_businessTypeId/nl-feedListing/:_listingId/:listingType/see-menu/:_businessId/:listingName/:_menuTypeId",views:{"feed-tab":{templateUrl:"templates/feed-views/see-menu.html",controller:"SeeMenuCtrl"}},params:{searchType:null,_businessTypeId:null,_listingId:null,listingType:null,_businessId:null,listingName:null,_menuTypeId:null}}).state("app.seeMenuItems",{url:"/nl-feedListings/:searchType/:_businessTypeId/nl-feedListing/:_listingId/:listingType/see-menu/:_businessId/:listingName/:_menuTypeId/see-menu-items/:_menuItemCategoryId",views:{"feed-tab":{templateUrl:"templates/feed-views/see-menu-items.html",controller:"SeeMenuItemsCtrl"}},params:{searchType:null,_businessTypeId:null,_listingId:null,listingType:null,_businessId:null,listingName:null,_menuTypeId:null,_menuItemCategoryId:null}}).state("app.seeBusinessesItems",{url:"/nl-feedListings/:searchType/:_businessTypeId/nl-feedListing/:_listingId/:listingType/see-businesses-items/:_businessId/:itemType/:listingName",views:{"feed-tab":{templateUrl:"templates/feed-views/see-businesses-items.html",controller:"SeeBusinessesItemsCtrl"}},params:{searchType:null,_businessTypeId:null,_listingId:null,listingType:null,_businessId:null,itemType:null,listingName:null}}).state("app.seeBusinessMenuItems",{url:"/nl-feedListings/:searchType/:_businessTypeId/nl-feedListing/:_listingId/:listingType/see-business-menu-items/:_businessId/:_menuItemCategoryId/:_menuTypeId/:viewType",views:{"profile-tab":{templateUrl:"templates/profile-views/see-business-menu-items.html",controller:"SeeBusinessMenuItemsCtrl"}},params:{searchType:null,_businessTypeId:null,_listingId:null,listingType:null,_businessId:null,_menuItemCategoryId:null,_menuTypeId:null,viewType:null}}).state("app.completeTakeawayOrder",{url:"/complete-takeaway-order/:_businessId",views:{"feed-tab":{templateUrl:"templates/feed-views/complete-takeaway-order.html",controller:"CompleteTakeawayOrderCtrl"}},params:{_businessId:null}}).state("app.taxi",{url:"/taxi/",views:{"taxi-tab":{templateUrl:"templates/taxi-views/taxi.html",controller:"TaxiCtrl"}}}).state("app.more",{url:"/more/",views:{"more-tab":{templateUrl:"templates/more-views/more.html",controller:"MoreCtrl"}}}).state("app.downloadTheApp",{url:"/downloadTheApp",views:{"more-tab":{templateUrl:"templates/more-views/download-the-app.html",controller:"DownloadTheAppCtrl"}}}).state("app.externalApi",{url:"/externalApi/:format/:colorScheme/:_businessId/:_liveChatId",views:{"more-tab":{templateUrl:"templates/more-views/external-api.html",controller:"ExternalApiCtrl"}},params:{format:null,colorScheme:null,_businessId:null,_liveChatId:null}}).state("app.admin",{url:"/admin/:action",views:{"more-tab":{templateUrl:"templates/admin-views/admin.html",controller:"AdminCtrl"},params:{action:null}}}).state("app.myNyteItems",{url:"/admin//myNyteItems/:_parentId/:itemType/:extraFiltersString/:timeScale",views:{"more-tab":{templateUrl:"templates/admin-views/mynyte-items.html",controller:"MyNyteItemsCtrl"},params:{_parentId:null,itemType:null,extraFiltersString:null,timeScale:null}}}).state("app.myNyteItem",{url:"/admin//myNyteItems/:_parentId/:itemType/:timeScale/myNyteItem/:_itemId/:format/:specificAction",views:{"more-tab":{templateUrl:"templates/admin-views/mynyte-item.html",controller:"MyNyteItemCtrl"},params:{_parentId:null,itemType:null,timeScale:null,_itemId:null,format:null,specificAction:null}}}).state("app.movieMaintenance",{url:"/admin//movieMaintenance/:_movieId",views:{"more-tab":{templateUrl:"templates/admin-views/movie-maintenance.html",controller:"MovieMaintenanceCtrl"}},params:{_movieId:null}}).state("app.fillTimeSheet",{url:"/admin//fillTimeSheet/:relDate",views:{"more-tab":{templateUrl:"templates/admin-views/fill-timesheet.html",controller:"FillTimeSheetCtrl"}},params:{relDate:null}}).state("app.contacts",{url:"/admin//contacts",views:{"more-tab":{templateUrl:"templates/admin-views/contacts.html",controller:"ContactsCtrl"}}}).state("app.marketingEmails",{url:"/admin//marketingEmails",views:{"more-tab":{templateUrl:"templates/admin-views/marketing-emails.html",controller:"MarketingEmailsCtrl"}}}).state("app.helpDocumentation",{url:"/admin//helpDocumentation/:docType",views:{"more-tab":{templateUrl:"templates/admin-views/help-documentation.html",controller:"HelpDocumentationCtrl"}},params:{docType:null}}),t.otherwise("/app/feed")}),app.controller("AdminCtrl",["$rootScope","$state","$scope","$ionicViewSwitcher","$ionicConfig","$ionicPopup","$ionicScrollDelegate","Admin",function(e,t,n,i,o,r,a,s){n.rootScope=e,n.$on("$ionicView.beforeEnter",function(){e.pageTitle=n.pageTitle?n.pageTitle:e.pageTitle,e.hideSearch=!0,e.showBackButton=!1,e.showPlusButton=!1}),n.$on("$ionicView.enter",function(){e.pageTitle=n.pageTitle?n.pageTitle:e.pageTitle}),n.pageLoad=function(){console.log(e.user.specialRole),e.pageTitle=e.user.displayName.split("-")[0]+"'s Main Control Panel",n.pageTitle=e.pageTitle;var t={_profileId:e.user._profileId};s.getMyNyteItemCountForProfile(t).success(function(t){console.log(t);var i=JSON.parse(t);i=i[0],n.pageObj={outstandingTimeSheetCount:i.outstandingTimeSheetCount,moviesToUpdateCount:i.moviesToUpdateCount,unapprovedExpensesCount:i.unapprovedExpensesCount,rejectedExpensesCount:i.rejectedExpensesCount},e.outstandingMyNyteItemObj=n.pageObj}).error(function(e){})},e.checkForAppInit(n)}]),app.controller("MyNyteItemsCtrl",["$rootScope","$state","$stateParams","$scope","$ionicViewSwitcher","$ionicConfig","$ionicPopup","$ionicScrollDelegate","ionicDatePicker","ionicTimePicker","datesService","Admin",function(e,t,n,o,r,a,s,l,c,d,u,p){o.rootScope=e,o.$on("$ionicView.beforeEnter",function(){e.pageTitle=o.pageTitle?o.pageTitle:e.pageTitle,e.hideSearch=!0,e.showBackButton=!0;var i=["Expense Claim","External Contact"],r=["External Contact"];i.indexOf(n.itemType)>-1&&(e.topRightButtonIsPlus=!0,e.showPlusButton=!0,e.topRightButtonFunction=function(){t.go("app.myNyteItem",{itemType:n.itemType,format:"Create"})}),o.viewStyleClass=-1==r.indexOf(n.itemType)?"tile-view":"list-view"}),o.$on("$ionicView.enter",function(){e.pageTitle=o.pageTitle?o.pageTitle:e.pageTitle}),o.pageLoad=function(){var r,a={"Expense Claim":"ion-cash","Time Sheet":"ion-ios-list-outline","External Contact":"ion-ios-bookmarks-outline","MyNyte Account":"ion-unlocked","Useful Link":"ion-link"};o.pageLoading=!0,e.pageTitle="Main Control Panel",o.pageTitle=e.pageTitle,o._parentId=n._parentId,o.itemType=n.itemType,o.itemTypeClass=o.itemType.replace(/ /g,"-").toLowerCase(),o.itemTypeIconClass=a[o.itemType],console.log(o.itemType),o.goToMyNyteItem=function(i){"Time Sheet"==o.itemType&&n.extraFiltersString.indexOf("Outstanding")>-1?t.go("app.fillTimeSheet",{_profileId:e.user._profileId,relDate:i["Period Start Date_original"]}):"MyNyte Account"!=o.itemType&&"Useful Link"!=o.itemType?t.go("app.myNyteItem",{_parentId:o._parentId,itemType:o.itemType,_itemId:i._id,format:"Read"}):"MyNyte Account"==o.itemType?window.open(i["Account Access URL"]):"Useful Link"==o.itemType&&window.open(i.URL)},o.getMyNyteItems=function(){o.myNyteItems=[],o.myNyteItemsObj={},r={myNyteItemType:n.itemType,extraFiltersString:n.extraFiltersString},""!=n._parentId&&"0"!=n._parentId?r._parentId=n._parentId:""==n._parentId&&(r._parentId=e.user._profileId),p.getMyNyteItems(r).success(function(e){if(console.log(e),null!=e&&"null"!=e){e=JSON.parse(e);for(var t=0;t<e.length;t++)if(o.myNyteItemsObj[e[t]._id]||(o.myNyteItemsObj[e[t]._id]={},o.myNyteItemsObj[e[t]._id]._id=e[t]._id),e[t].metaName.indexOf("Date")>-1&&(o.myNyteItemsObj[e[t]._id][e[t].metaName+"_original"]=e[t].metaValue,e[t].metaValue=u.convertToReadableDate(o,e[t].metaValue)),o.myNyteItemsObj[e[t]._id][e[t].metaName]=e[t].metaValue,t==e.length-1){var n,r=Object.keys(o.myNyteItemsObj);for(i=0;i<r.length;i++){var n=r[i];o.myNyteItems.push(o.myNyteItemsObj[n]),i==r.length-1&&(console.log(o.myNyteItemsObj),console.log(o.myNyteItems),o.pageLoading=!1)}}}}).error(function(e){})},o.getMyNyteItems(),e.$on("updated-mynyte-item",function(e,t){console.log(t,"happened"),t.itemType==o.itemType&&o.getMyNyteItems()})},e.checkForAppInit(o)}]),app.controller("MyNyteItemCtrl",["$rootScope","$state","$stateParams","$scope","$ionicViewSwitcher","$ionicConfig","$ionicPopup","$ionicScrollDelegate","ionicDatePicker","ionicTimePicker","datesService","Admin",function(e,t,n,i,o,r,a,s,l,c,d,u){i.rootScope=e,i.$on("$ionicView.beforeEnter",function(){e.pageTitle=i.pageTitle?i.pageTitle:e.pageTitle,e.hideSearch=!0,e.showBackButton=!0,e.showPlusButton=!1,["External Contact"].indexOf(n.itemType)>-1&&"Read"==n.format&&(e.topRightButtonIsEdit=!0,e.topRightButtonFunction=function(){i.currentlyEditing?(i.myNyteItem=i.originalMyNyteItem,i.format="Read",i.currentlyEditing=!1,e.currentlyEditing=!1):(i.originalMyNyteItem=angular.copy(i.myNyteItem),i.format="EditUpdate",i.currentlyEditing=!0,e.currentlyEditing=!0)})}),i.$on("$ionicView.enter",function(){e.pageTitle=i.pageTitle?i.pageTitle:e.pageTitle}),i.pageLoad=function(){var t;e.pageTitle="Main Control Panel",i.pageTitle=e.pageTitle,i.pageLoading=!0,i._itemId=n._itemId,i.itemType=n.itemType,i.format=n.format,i.myNyteItem={};var o=function(){function t(e,t){for(var n={itemNameValueString:""},i=Object.keys(e),o=0,o=0;o<i.length;o++){var r=i[o];if(o>0&&(n.itemNameValueString+=","),n.itemNameValueString+="[['"+r+"'"+t+"'"+e[r]+"']]",o==i.length-1)return n}}function o(t){console.log(t),u.addMyNyteItem(t).success(function(t){console.log(t),e.$broadcast("updated-mynyte-item",{itemType:n.itemType}),e.backButtonFunction()}).error(function(e){})}function r(t){u.updateMyNyteItem(t).success(function(t){console.log(t),e.$broadcast("updated-mynyte-item",{itemType:n.itemType}),e.backButtonFunction()}).error(function(e){})}"Time Sheet"==n.itemType||("External Contact"==n.itemType?("Read"==n.format&&(i.currentComment={Text:""},i.addComment=function(){a.show({title:"Add a Comment",template:'<textarea class="white nightlife-input nightlife-input-square" placeholder="Add Commment" ng-model="currentComment[\'Text\']"></textarea>',scope:i,buttons:[{text:"Cancel",onTap:function(){}},{text:"Add",onTap:function(e){console.log(e),console.log(i.currentComment),i.addMyNyteItem()}}]})}),i.updateMyNyteItem=function(){var e=t(i.myNyteItem,":");e._myNyteItemId=i._itemId,e.updateString=e.itemNameValueString,r(e)},i.addMyNyteItem=function(){var o=t(i.currentComment,",");o.itemNameValueString+=",[['DateTime Created',NOW()]]",o.itemNameValueString+=",[['_Creator Profile Id',"+e.user._profileId+"]]",o.itemNameValueString+=",[['Creator Name', '"+e.user.name+"']]",o._parentId=n._itemId,o.itemName="External Contact Comment",u.addMyNyteItem(o).success(function(t){console.log(t),i.myNyteItem["External Contact Comments"][0]={Text:i.currentComment.Text,"DateTime Created":new Date,"_Creator Profile Id":e.user._profileId,"Creator Name":e.user.name},i.currentComment={Text:""}}).error(function(e){})}):"Expense Claim"==n.itemType&&(i.dateInputHTML="Date of Expense",i.ipObj={callback:function(e){i.selectedDate=new Date(e),i.dateInputHTML=d.convertToDate(i,i.selectedDate),i.ipObj.inputDate=new Date(e),i.dateChosen=!0},disabledDates:[],to:new Date,inputDate:new Date,mondayFirst:!0,disableWeekdays:[],closeOnSelect:!0,templateType:"popup"},i.openDatePicker=function(){l.openDatePicker(i.ipObj)},i.addMyNyteItem=function(){var n=t(i.myNyteItem,","),r=d.convertToSQLDate(i.selectedDate);n.itemNameValueString+=",[['Date Expense Incurred','"+r+"']]",n.itemNameValueString+=",[['DateTime Created',NOW()]]",n.itemNameValueString+=",[['Status','Pending Approval']]",n._parentId=e.user._profileId,n.itemName="Expense Claim",o(n)}))},r=function(){if(console.log(n.itemType),"Time Sheet"==n.itemType){var e={_parentId:n._itemId,myNyteItemType:"Time Sheet Entry"};i.myNyteItem["Period Start Date"]=d.convertToReadableDate(i,i.myNyteItem["Period Start Date"]),i.myNyteItem["Time Sheet Entries"]={},u.getMyNyteItems(e).success(function(e){var t={};if(null!=e&&"null"!=e){e=JSON.parse(e),console.log(e);for(var n=0;n<e.length;n++)t[e[n]._id]||(t[e[n]._id]={},t[e[n]._id]._id=e[n]._id),t[e[n]._id][e[n].metaName]=e[n].metaValue,n==e.length-1&&(i.myNyteItem["Time Sheet Entries"]=t,console.log(i.myNyteItem),o(),i.pageLoading=!1)}else console.log(i.myNyteItem),o(),i.pageLoading=!1}).error(function(e){})}else if("External Contact"==n.itemType){var e={_parentId:n._itemId,myNyteItemType:"External Contact Comment"};i.myNyteItem["External Contact Comments"]={},u.getMyNyteItems(e).success(function(e){var t={};if(null!=e&&"null"!=e){e=JSON.parse(e),console.log(e);for(var n=0;n<e.length;n++)t[e[n]._id]||(t[e[n]._id]={},t[e[n]._id]._id=e[n]._id),t[e[n]._id][e[n].metaName]=e[n].metaValue,n==e.length-1&&(i.myNyteItem["External Contact Comments"]=t,console.log(i.myNyteItem),o(),i.pageLoading=!1)}else console.log(i.myNyteItem),o(),i.pageLoading=!1}).error(function(e){})}else console.log(i.myNyteItem),o(),i.pageLoading=!1};"Read"==i.format||"Update"==i.format||"EditUpdate"==i.format||"Delete"==i.format?(t={_parentId:""==n._parentId?e.user._profileId:n._parentId,_myNyteItemId:n._itemId},u.getMyNyteItem(t).success(function(e){if(console.log(e),null!=e&&"null"!=e){e=JSON.parse(e);for(var t=0;t<e.length;t++)i.myNyteItem[e[t].metaName]=e[t].metaValue,t==e.length-1&&r()}}).error(function(e){})):"Create"==i.format&&o()},e.checkForAppInit(i)}]),app.controller("MovieMaintenanceCtrl",["$rootScope","$state","$scope","$stateParams","$ionicViewSwitcher","$ionicConfig","$ionicPopup","$ionicScrollDelegate","Movies",function(e,t,n,i,o,r,a,s,l){n.rootScope=e,n.pageLoading=!0,console.log(s),n.$on("$ionicView.beforeEnter",function(){e.pageTitle=n.pageTitle?n.pageTitle:e.pageTitle,e.hideSearch=!0,e.showBackButton=!0,e.showPlusButton=!1}),n.$on("$ionicView.enter",function(){e.pageTitle=n.pageTitle?n.pageTitle:e.pageTitle}),n.pageLoad=function(){if(e.pageTitle=null!=i._movieId?"":"Movie Maintenance",null!=i._movieId){var t,o={_movieId:i._movieId};n._movieId=i._movieId,n.movieToUpdate={},l.getMovieToUpdatePhotoPos(o).success(function(i){console.log(i),null!=i?(e.pageTitle=i[0].movieTitle,n.pageTitle=e.pageTitle):i=[{}],n.movieToUpdate=i[0],$("#movie-poster").load(function(){t=$(this).width(),n.sliderHeight=t*(2/3),n.pageLoading=!1}),n.selectMoviePosterPos=function(){element=$(".movie-poster-slider")[0],currentTop=$(element).css("transform"),currentTop=currentTop.split(", "),currentTop=currentTop[currentTop.length-1].replace(")",""),console.log(currentTop),currentTop=640/(n.sliderHeight+48)*currentTop,currentTop=isNaN(currentTop)?0:currentTop,console.log(currentTop),n.currentTop=currentTop,a.show({template:'<span><img style="margin-top:'+-1*currentTop+'px;" src="https://www.cineworld.co.uk/'+n.movieToUpdate.posterUrl+'" /></span>',scope:n,cssClass:"movie-cover-photo-pop",buttons:[{text:"Cancel",type:"button-cancel",onTap:function(){}},{text:"Up",onTap:function(e){e.preventDefault(),n.currentTop+=2,$(".popup-body img").css("margin-top",-1*n.currentTop+"px"),console.log(n.currentTop)}},{text:"Down",onTap:function(e){e.preventDefault(),n.currentTop-=2,$(".popup-body img").css("margin-top",-1*n.currentTop+"px")}},{text:"Submit",type:"button-submit",onTap:function(){var t;t={_movieId:n._movieId,posterTopPos:n.currentTop},l.applyMoviePosterPos(t).success(function(t){e.$broadcast("movie-photo-pos-added"),e.backButtonFunction()}).error(function(e){})}}]})}}).error(function(e){})}else{n.pageTitle=e.pageTitle;var o={format:"Cover Photo Pos Update"};n.getMoviesToUpdate=function(){n.moviesToUpdate=[],l.getMoviesToUpdate(o).success(function(e){console.log(e),e=null!=e?e:[];for(var t=0;t<e.length;t++)null!=e[t]._id&&(n.moviesToUpdate.push(e[t]),t==e.length-1&&(n.pageLoading=!1))}).error(function(e){})},n.getMoviesToUpdate(),e.$on("movie-photo-pos-added",function(){n.getMoviesToUpdate()})}},e.checkForAppInit(n)}]),app.controller("FillTimeSheetCtrl",["$rootScope","$state","$stateParams","$scope","$ionicViewSwitcher","$ionicConfig","$ionicPopup","$ionicScrollDelegate","Profile","Admin","datesService",function(e,t,n,i,o,r,a,s,l,c,d){i.rootScope=e,i.$on("$ionicView.beforeEnter",function(){e.hideSearch=!0,e.showBackButton=!0,e.showPlusButton=!1,e.adminView=!0,e.pageTitle=i.pageTitle?i.pageTitle:e.pageTitle}),i.pageLoad=function(){e.pageTitle="Complete Timesheet",i.pageTitle=e.pageTitle,i.relDate=n.relDate;var t={_profileId:e.user._profileId};null!=i.relDate&&(t.relDate=i.relDate),l.getTimeSheetToFill(t).success(function(t){function o(e){var t=new Date(e);return t.setDate(t.getDate()-t.getDay()),t}function r(e){var t;return t=n.relDate?new Date(n.relDate):new Date,t.setDate(e.getDate()+1),t}var s=new Date,l=null==n.relDate?o(s.getFullYear()+"/"+(s.getMonth()+1)+"/"+s.getDate()):new Date(n.relDate),u=l;console.log(u),t="null"!=t?t:[],i.timeSheetDaysEntered=[],i.timeSheetDays=[],i.timeSheetDaysObj={Sunday:{dayName:"Sunday",intervals:{1:{"Interval Name":"Sunday 1",NotApplicable:!1,"Interval Description":null},2:{"Interval Name":"Sunday 2",NotApplicable:!1,"Interval Description":null},3:{"Interval Name":"Sunday 3",NotApplicable:!1,"Interval Description":null},4:{"Interval Name":"Sunday 4",NotApplicable:!1,"Interval Description":null}}},Monday:{dayName:"Monday",intervals:{1:{"Interval Name":"Monday 1",NotApplicable:!1,"Interval Description":null},2:{"Interval Name":"Monday 2",NotApplicable:!1,"Interval Description":null},3:{"Interval Name":"Monday 3",NotApplicable:!1,"Interval Description":null},4:{"Interval Name":"Monday 4",NotApplicable:!1,"Interval Description":null}}},Tuesday:{dayName:"Tuesday",intervals:{1:{"Interval Name":"Tuesday 1",NotApplicable:!1,"Interval Description":null},2:{"Interval Name":"Tuesday 2",NotApplicable:!1,"Interval Description":null},3:{"Interval Name":"Tuesday 3",NotApplicable:!1,"Interval Description":null},4:{"Interval Name":"Tuesday 4",NotApplicable:!1,"Interval Description":null}}},Wednesday:{dayName:"Wednesday",intervals:{1:{"Interval Name":"Wednesday 1",NotApplicable:!1,"Interval Description":null},2:{"Interval Name":"Wednesday 2",NotApplicable:!1,"Interval Description":null},3:{"Interval Name":"Wednesday 3",NotApplicable:!1,"Interval Description":null},4:{"Interval Name":"Wednesday 4",NotApplicable:!1,"Interval Description":null}}},Thursday:{dayName:"Thursday",intervals:{1:{"Interval Name":"Thursday 1",NotApplicable:!1,"Interval Description":null},2:{"Interval Name":"Thursday 2",NotApplicable:!1,"Interval Description":null},3:{"Interval Name":"Thursday 3",NotApplicable:!1,"Interval Description":null},4:{"Interval Name":"Thursday 4",NotApplicable:!1,"Interval Description":null}}},Friday:{dayName:"Friday",intervals:{1:{"Interval Name":"Friday 1",NotApplicable:!1,"Interval Description":null},2:{"Interval Name":"Friday 2",NotApplicable:!1,"Interval Description":null},3:{"Interval Name":"Friday 3",NotApplicable:!1,"Interval Description":null},4:{"Interval Name":"Friday 4",NotApplicable:!1,"Interval Description":null}}},Saturday:{dayName:"Saturday",intervals:{1:{"Interval Name":"Saturday 1",NotApplicable:!1,"Interval Description":null},2:{"Interval Name":"Saturday 2",NotApplicable:!1,"Interval Description":null},3:{"Interval Name":"Saturday 3",NotApplicable:!1,"Interval Description":null},4:{"Interval Name":"Saturday 4",NotApplicable:!1,"Interval Description":null}}}},i.submitTimeSheet=function(t){var n=i.timeSheetDaysObj[t].intervalArray;e.appLoading=!0;for(var o=0;o<n.length;o++){if(!n[o].NotApplicable&&null==n[o]["Interval Description Unsaved"]&&null==n[o]["Interval Description"])return e.appLoading=!1,a.show({title:"Not all Intervals are complete.",template:'<p>You have not completed the details of all the intervals for this day. For each interval, please fill in the description or mark the interval as "Not Applicable".</p>',scope:i,buttons:[{text:"Close",onTap:function(){}}]}),!1;if(n[o].NotApplicable||(n[o]["Interval Description"]=n[o]["Interval Description Unsaved"]),o==n.length-1){for(var r=0;r<n.length;r++){var s="[['DateTime Created', NOW()]],[['Interval Name', '"+n[r]["Interval Name"]+"']]",l={_parentId:i._timeSheetId,itemName:"Time Sheet Entry"};s+=n[r].NotApplicable?",[['Not Applicable', 'true']]":",[['Interval Description', '"+n[r]["Interval Description"]+"']]",l.itemNameValueString=s,c.addMyNyteItem(l).success(function(n){i.timeSheetDaysEntered.push(t),e.appLoading=!1}).error(function(t){e.appLoading=!1})}console.log(i.timeSheetDaysObj[t])}}};for(var p=function(){for(var e in i.timeSheetDaysObj)for(var t=0;t<i.timeSheetDaysObj[e].intervalArray.length;t++)null==i.timeSheetDaysObj[e].intervalArray[t]["Interval Description"]&&i.timeSheetDaysEntered.indexOf(e)>-1&&(i.timeSheetDaysObj[e].intervalArray[t].NotApplicable=!0)},g=function(){for(var e in i.timeSheetDaysObj)if(i.timeSheetDaysObj[e].dayDateUnformatted=u,console.log(u),console.log(d.convertToDate(i,u)),i.timeSheetDaysObj[e].dayDate=d.convertToDate(i,u),u=r(u),"Saturday"==e){console.log(i.timeSheetDaysObj);for(var t in i.timeSheetDaysObj){i.timeSheetDaysObj[t].intervalArray=[];for(var n in i.timeSheetDaysObj[t].intervals)i.timeSheetDaysObj[t].intervalArray.push(i.timeSheetDaysObj[t].intervals[n]);i.timeSheetDays.push(i.timeSheetDaysObj[t]),"Saturday"==t&&(p(),console.log(i.timeSheetDays))}}},m=0;m<t.length;m++){if(null==t[m].name||"null"==t[m].name)i._timeSheetId=t[m]._itemId,console.log(i._timeSheetId);else{var f=t[m].name.split(" ")[0],h=t[m].name.split(" ")[1];-1==i.timeSheetDaysEntered.indexOf(f)&&i.timeSheetDaysEntered.push(f),i.timeSheetDaysObj[f].intervals[h][t[m].metaName]=t[m].metaValue}m==t.length-1&&g()}}).error(function(e){})},e.checkForAppInit(i)}]),app.controller("ContactsCtrl",["$rootScope","$state","$scope","$ionicViewSwitcher","$ionicConfig","$ionicPopup","$ionicScrollDelegate","Profile","datesService",function(e,t,n,i,o,r,a,s,l){n.rootScope=e,n.$on("$ionicView.beforeEnter",function(){e.hideSearch=!0,e.showBackButton=!0,e.showPlusButton=!0,e.adminView=!0,e.pageTitle=n.pageTitle?n.pageTitle:e.pageTitle}),n.pageLoad=function(){e.pageTitle="My Contacts",n.pageTitle=e.pageTitle,console.log(e.user._profileId);var t={format:"Own",_profileId:e.user._profileId};s.getMyNyteExternalContacts(t).success(function(e){console.log(e),e="null"!=e?e:[],n.contacts=[],n.contactsObj={};var t=function(){for(var e in n.contactsObj)n.contactsObj[e].lastComment["Created Date"]=l.convertToReadableDate(n,n.contactsObj[e].lastComment["Created DateTime"]),n.contactsObj[e].lastComment["Created Time"]=n.contactsObj[e].lastComment["Created DateTime"].split(" ")[1].substr(0,5),n.contacts.push(n.contactsObj[e]),console.log(n.contacts)};if(e.length>0)for(var i=0;i<e.length;i++)null!=e[i]._parentId||n.contactsObj[e[i]._id]?null==e[i]._parentId&&n.contactsObj[e[i]._id]?(console.log(e[i].metaName),n.contactsObj[e[i]._id][e[i].metaName]=e[i].metaValue):null==e[i]._parentId||n.contactsObj[e[i]._parentId]?null!=e[i]._parentId&&n.contactsObj[e[i]._parentId]&&!n.contactsObj[e[i]._parentId].lastComment?(n.contactsObj[e[i]._parentId].lastComment={},n.contactsObj[e[i]._parentId].lastComment[e[i].metaName]=e[i].metaValue):null!=e[i]._parentId&&n.contactsObj[e[i]._parentId]&&n.contactsObj[e[i]._parentId].lastComment&&(n.contactsObj[e[i]._parentId].lastComment[e[i].metaName]=e[i].metaValue):(n.contactsObj[e[i]._parentId]={},n.contactsObj[e[i]._parentId].lastComment={},n.contactsObj[e[i]._parentId].lastComment[e[i].metaName]=e[i].metaValue):(n.contactsObj[e[i]._id]={},n.contactsObj[e[i]._id][e[i].metaName]=e[i].metaValue),i==e.length-1&&(console.log(n.contactsObj),t());else t()}).error(function(e){})},e.checkForAppInit(n)}]),app.controller("MarketingEmailsCtrl",["$rootScope","$state","$scope","$ionicViewSwitcher","$ionicConfig","$ionicPopup","$ionicScrollDelegate","Admin","$window",function(e,t,n,i,o,r,a,s,l){n.rootScope=e,n.$on("$ionicView.beforeEnter",function(){e.hideSearch=!0,e.showBackButton=!0,e.pageTitle=n.pageTitle?n.pageTitle:e.pageTitle}),n.pageLoad=function(){e.pageTitle="Marketing Emails",n.pageTitle=e.pageTitle,s.scanFilesInDirectory("templates/email-views").success(function(e){console.log(e),e=JSON.parse(e)||[],n.emailViews=[];for(var t=0;t<e.length;t++){if(e[t].match(/[a-z]/i)){var i=e[t].replace(".html","").replace(/-/g," ").replace("mynyte","MyNyte");n.emailViews.push({displayLabel:i,filePath:e[t]})}t==e.length-1&&console.log(n.emailViews)}}).error(function(e){})},n.newWindow=function(e){l.open(e,"newWindow","width=600,height=900")},e.checkForAppInit(n)}]),app.controller("HelpDocumentationCtrl",["$rootScope","$state","$stateParams","$scope","$ionicViewSwitcher","$ionicConfig","$ionicPopup","$ionicScrollDelegate","Admin","$window",function(e,t,n,i,o,r,a,s,l,c){i.rootScope=e,i.$on("$ionicView.beforeEnter",function(){e.hideSearch=!0,e.showBackButton=!0,e.pageTitle=i.pageTitle?i.pageTitle:e.pageTitle}),i.pageLoad=function(){if(e.pageTitle="Help Documentation",i.pageTitle=e.pageTitle,i.docType=n.docType,i.docTypeTopics=[{title:"MyNyte Social",folderPath:"mynyte-social"},{title:"Product",folderPath:"product"},{title:"Resourcing",folderPath:"resourcing"},{title:"Sales",folderPath:"sales"}],null!=n.docType)for(var t in i.docTypeTopics)i.docTypeTopics[t].title==n.docType&&l.scanFilesInDirectory("sneak-preview/docs/"+i.docTypeTopics[t].folderPath+"/").success(function(t){console.log(t),t=JSON.parse(t)||[],i.docs=[];for(var n=0;n<t.length;n++)t[n].match(/[a-z]/i)&&i.docs.push({title:t[n],filePath:t[n],fullFilePath:e.assetsFolderUrl+"/docs/resourcing/"+t[n]}),n==t.length-1&&console.log(i.docs)}).error(function(e){})},i.newWindow=function(e){c.open(e,"newWindow","width=600,height=900")},e.checkForAppInit(i)}]);var app=angular.module("NightLife",["ionic","ngSanitize","ngCordova","ionic-datepicker","ionic-timepicker","ngIOS9UIWebViewPatch","ngMap","locator","ngOpenFB","ionic.service.core","ImageCropper","cmGoogleApi"]);app.run(function(e,t,n,i,o,r,s,l,c,d,u,p,g,m,f,h,v,y,w,C,T,S,E,I,x,k,A,M,_,D){Number.prototype.formatMoney=function(e,t,n){var i=this,e=isNaN(e=Math.abs(e))?2:e,t=void 0==t?".":t,n=void 0==n?",":n,o=i<0?"-":"",r=parseInt(i=Math.abs(+i||0).toFixed(e))+"",a=(a=r.length)>3?a%3:0;return o+(a?r.substr(0,a)+n:"")+r.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+n)+(e?t+Math.abs(i-r).toFixed(e).slice(2):"")},isArray=function(e){return!!e&&e.constructor===Array},t.initialiseAppFunction=function(e){t.online=navigator.onLine,t.offlineNoteHide=!1,window.addEventListener("offline",function(){t.$apply(function(){t.online=!1})},!1),window.addEventListener("online",function(){t.$apply(function(){t.online=!0,null==t.userUpdateTimer&&(t.user=w.startUsersMessagesAndNotificationsUpdateTimer(t.user))})},!1),y.addMusicCategories("").then(function(){t.nightFind2ndSelect=y.musicCategories()}),y.addTownCategories().then(function(){t.townCategories=y.townCategories()}),y.addUserEngagementTypes().then(function(){t.userEngagementTypes=y.userEngagementTypes()}),t.userLoggedIn=!1,t.$watch("userLoggedIn",function(e,n,i){t.profileSideViewTmp=1==e?"/true.html":"/false.html"}),t.goToUpdate=function(){t.currentUnreadUpdate&&null!=t.currentUnreadUpdate&&w.goToUpdate(t.currentUnreadUpdate)},t.prepareMessageNotificationFinal=function(e,n,i,o){f.getOneSignalDeviceTokensForProfiles(e).success(function(e){var r=[];if(null!=e)for(a=0;a<e.length;a++)r.push(e[a].oneSignalDeviceToken),a==e.length-1&&T.sendNotificationFinal(t.oneSignalAppId,r,n,i,o)}).error(function(r){t.prepareMessageNotificationFinal(e,n,i,o)})},t.$broadcast("restorestate"),p.model.user=p.model.user||{},p.model.introTooltipShownCount=p.model.introTooltipShownCount||0,p.model.adminUserLoggedIn=p.model.adminUserLoggedIn||!1,t.showIntroTooltip=function(){t.tooltips=[{text:"Remember: click the icon to get MyNyte assistance whenever you want."}],t.tooltipStage=1,t.currentTooltipText=t.tooltips[t.tooltipStage-1].text,t.tooltipShowing=!0},t.nextTooltipFunction=function(){t.tooltipStage+=1,t.tooltipStage>t.tooltips.length?t.closeIntroTooltip():t.currentTooltipText=t.tooltips[t.tooltipStage-1].text},t.closeIntroTooltip=function(){p.model.introTooltipShownCount+=1,t.$broadcast("savestate"),t.tooltipShowing=!1},p.model.introTooltipShownCount<1&&t.showIntroTooltip(),t.user=w.createUserObject(p.model.user),0!=t._userOneSignalId&&void 0!==t._userOneSignalId||!t.userLoggedIn||(t.user=w.startUsersMessagesAndNotificationsUpdateTimer(t.user)),t.adminUserLoggedIn=p.model.adminUserLoggedIn,t.initialiseCategories=function(){t.townCategories&&t.musicCategories&&t.userEngagementTypes?t.userLoggedIn=void 0!==t.user._id:(t.userLoggedIn=void 0!==t.user._id,window.setTimeout(function(){t.initialiseCategories()},500))},t.initialiseCategories(),t.getAndroidImage=function(e){function n(n){console.log(n),t.file=n,t.files=[t.file],t.getFile({onComplete:e.onComplete})}function i(e){console.log("Failed because: "+e)}e.imgEntryType,e.imgEntryType;"cover_photo"==e.imgEntryType?navigator.camera.getPicture(n,i,{destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,correctOrientation:!0}):navigator.camera.getPicture(n,i,{destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,correctOrientation:!0,targetWidth:320,targetHeight:320,allowEdit:!0})},t.nightFinderListingTypes=[{name:"Bar/Club",displayIndex:-1,className:"cluborbar",selected:!1},{name:"Cinema",displayIndex:0,className:"cinema",selected:!1},{name:"Club Night",displayIndex:1,className:"clubnight",selected:!0},{name:"Restaurant",displayIndex:2,className:"restaurant",selected:!1},{name:"Takeaway",displayIndex:3,className:"takeaway",selected:!1}],t.currentSelectedListingTypeToFind="clubnight",t.intendedPlatform=M.IntendedPlatform,t.underConstruction=!(!M.DebugMode||"browser"!=M.IntendedPlatform||"Live"!=M.IntendedEnvironment),t.intendedEnvironment=M.IntendedEnvironment,t.metaContent=M.MetaContent,t.rootUrl=M.RootUrl,t.assetsFolderUrl=M.AssetsFolderUrl,t.assetsFolderRelUrl=M.AssetsFolderRelUrl,t.debugMode=M.DebugMode,t.relListing=null,t.nightFindSlideLocked=!1,t.messageGroupTimer=null,t.addBackActiveUserTimer=null,t.currentMessageGroupIdBeingViewed=null,t.hideSearch=!1,t.files=t.files||[],t.showFrontScreenCover=!1,t.currentOrderTrayTotal="0.00",t.showHeaderButtons=!1,t.showNightLifeSearch=!0,t.showUpdatePost=!t.showNightLifeSearch,t.showFeedUpdateScreenCover=!1,t.currentMessageInputPlaceholder="Type your message here ...",t.currentSearchTown={name:"Bedford",_id:1},t.currentSearchMusic={name:"All Music Styles",_id:0},t.currentSearchRestaurantFoodCat={name:"All Cuisines",_id:0},t.currentSearchTakeawayFoodCat={name:"All Cuisines",_id:0},t.currentSearchMovieCat={name:"All Movie Styles",_id:0},t.currentSearchClubOrBarCat={name:"Bars & Clubs",_id:0},t.currentSearchBusinessType={name:"Takeaway",_id:5},t.topRightButtonSRef="app.addBusinessItem({itemType: 'OwnEvent'})",t.feedHeaderItem="closed",t.appInitialised=!0,t.oneSignalAppId="5d38e847-c406-4e2e-85d6-27a76ce657f3",t.gcnProjectNumber="357832123193",t._userOneSignalId=0,t._userOneSignalDeviceToken=0,t.userUpdateTimer=null,t.todaysMovies=[],t.todaysOffers=[],t.nlfeedListingsUrl="browser"==t.intendedPlatform?"app.feedListings":"app.feed.nlfeedListings",t.nlfeedListingsUrl="browser"==t.intendedPlatform?"app.feedListings":"app.feed.nlfeedListings",t.initiateBottomRightImg=function(){t.bottomRightImgArray=[{src:"/sneak-preview/img/download-the-mynyte-app.png",show:!0,class:"",href:"/sneak-preview/img/download-the-mynyte-app.png"}],S(t.switchBottomRightImg,3e4)},t.switchBottomRightImg=function(){for(a=0;a<t.bottomRightImgArray.length;a++)if(t.bottomRightImgArray[a].show){var e=a==t.bottomRightImgArray.length-1?0:a+1;t.bottomRightImgArray[a].show=!1,S(function(){t.bottomRightImgArray[e].show=!0,t.bottomRightImgArray.length>1&&S(t.switchBottomRightImg,3e4)},400)}},t.initiateBottomRightImg(),"browser"==t.intendedPlatform&&(t.initiateThisWeeksItemsForWebDisplay=function(){var e={"Takeaway Deals":"ion-cube","Restaurant Deals":"ion-fork","Drinks Deals":"ion-wineglass"},n=function(t,n){for(var i=0;i<t.length;i++)if(t[i].show=0==i,"Offers"==n&&(t[i].offerSubCategoryClass=e[t[i].offerSubCategoryName]),i==t.length-1)return t},i=function(){k.getTodaysMoviesForWideDisplay(t.currentSearchTown._id).success(function(e){}).error(function(e){i()})},o=function(){A.getTodaysOffersForWideDisplay(t.currentSearchTown._id).success(function(e){t.todaysOffers=n(e,"Offers")}).error(function(e){o()})};i(),o(),t.nextThisWeekMovieTimer=S(function(){t.changeItemsForWideDisplay("Movies","next",t.todaysMovies,"auto")},5e3),t.nextTodayOfferTimer=S(function(){t.changeItemsForWideDisplay("Offers","next",t.todaysOffers,"auto")},5e3)},t.changeItemsForWideDisplay=function(e,n,i,o){var r=0,s=i;for(a=0;a<s.length;a++){var l=function(i){s[i].show=!1,i==s.length-1&&"next"==n?s[0].show=!0:0==i&&"prev"==n?s[s.length-1].show=!0:i>0&&"prev"==n?s[i-1].show=!0:i<s.length-1&&"next"==n&&(s[i+1].show=!0),"Offers"==e?(t.todaysOffers=s,"manual"==o&&S.cancel(t.nextTodayOfferTimer),t.nextTodayOfferTimer=S(function(){t.changeItemsForWideDisplay("Offers","next",t.todaysOffers,"auto")},5e3)):"Movies"==e&&(t.todaysMovies=s,"manual"==o&&S.cancel(t.nextThisWeekMovieTimer),t.nextThisWeekMovieTimer=S(function(){t.changeItemsForWideDisplay("Movies","next",t.todaysMovies,"auto")},5e3))};s[a].show&&(r=a),a==s.length-1&&l(r)}},t.goToTodaysItem=function(e,t){"Offer"==e?(n.go("app.offers"),S(function(){n.go("app.offers.offerDetail",{_id:t})},150)):"Movie"==e&&(n.go("app.feed"),S(function(){n.go("app.feed.nlfeedListing",{_listingId:t,listingType:"Movie"})},150))},t.initiateThisWeeksItemsForWebDisplay()),e.pageLoad()},t.checkForAppInit=function(e){var n=function(e){if(1!=t.appInitialised){if(void 0===t.initialiseAppFunction)return window.setTimeout(function(){n(e)},30),!1;t.initialiseAppFunction(e)}else e.pageLoad()};n(e)},e.ready(function(e){S(function(){var e=function(){navigator.splashscreen&&setTimeout(function(){navigator.splashscreen.hide()},10)};document.addEventListener("deviceready",e,!1),g.init({appId:"1633788096937299"});var r=0,c=function(){var e=function(){(r+=1)<10&&window.setTimeout(function(){c()},500)};return"undefined"==typeof cordova?(e(),!1):null==cordova.plugins?(e(),!1):void(cordova.plugins.Keyboard?"browser"!=t.intendedPlatform&&cordova.plugins.Keyboard.disableScroll(!0):e())};c();var d=function(){var e={goToMessage:{navFunction:function(){n.go("app.profile"),window.setTimeout(function(){n.go("app.profile.messageGroups",{groupType:data.msgGroupType}),window.setTimeout(function(){n.go("app.profile.messageGroups.messageGroup",{_id:data._msgGroupId,groupType:data.msgGroupType})},300)},500)}},goToNotifications:{navFunction:function(){n.go("app.profile"),window.setTimeout(function(){n.go("app.notifications")},500)}},goToBusinessItem:{navFunction:function(){var e=data.businessItemType;data.businessItemTypeDetailed&&(e=data.businessItemTypeDetailed),n.go("app.profile"),window.setTimeout(function(){n.go("app.businessItems",{itemType:data.businessItemType,timeScale:"present"}),window.setTimeout(function(){n.go("app.businessItem",{_id:data._businessItemId,itemType:e,timeScale:"present"})},300)},500)}},goToBusinessItems:{navFunction:function(){n.go("app.profile"),window.setTimeout(function(){n.go("app.businessItems",{itemType:data.businessItemType,timeScale:"present"})},500)}},goToFeedListingItem:{navFunction:function(){n.go("app.feed.nlfeedListing",{listingType:data.businessItemType,_listingId:data._businessItemId})}},goToOffer:{navFunction:function(){n.go("app.offers"),window.setTimeout(function(){n.go("app.offers.offerDetail",{_id:data._businessItemId})},500)}},goToMyNyteActivity:{navFunction:function(){n.go("app.profile"),window.setTimeout(function(){n.go("app.businessItems",{itemType:data.businessItemType,timeScale:"present"})},500)}}},i=function(t){var n=t.notification.payload.additionalData;e[n.actionFunction].navFunction()},o=function(){w.getUsersMessagesAndNotificationsUpdateDirectly(t.user)};window.plugins.OneSignal.startInit(t.oneSignalAppId,t.gcnProjectNumber).handleNotificationReceived(o).handleNotificationOpened(i).inFocusDisplaying(window.plugins.OneSignal.OSInFocusDisplayOption.None).endInit(),window.plugins.OneSignal.registerForPushNotifications(),window.plugins.OneSignal.getIds(function(e){var n=ionic.Platform.isAndroid()?JSON.parse(e):e,i=t.userLoggedIn?t.user._profileId:0,o=function(e){f.createOneSignalId(e,t._userOneSignalId,n.userId).success(function(e){0==e[0]._oneSignalId?t.user=w.startUsersMessagesAndNotificationsUpdateTimer(t.user):null!=t.userUpdateTimer&&(S.cancel(t.userUpdateTimer),t.userUpdateTimer=null),t._userOneSignalId=e[0]._oneSignalId,t._userOneSignalDeviceToken=n.userId,t.user&&(t.user._oneSignalId=e[0]._oneSignalId,t.user._oneSignalDeviceToken=n.userId),p.model._userOneSignalId=t._userOneSignalId,p.model._userOneSignalDeviceToken=t._userOneSignalDeviceToken,t.$broadcast("savestate")}).error(function(t){o(e)})};o(i)})};if((ionic.Platform.isAndroid()||ionic.Platform.isIOS()||ionic.Platform.isIPad())&&"browser"!=t.intendedPlatform){var u=0,m=function(){var e=function(){(u+=1)<10&&window.setTimeout(function(){m()},500)};if(null==window.plugins)return e(),!1;window.plugins.OneSignal?d():e()};if(m(),ionic.Platform.isIOS())t.callingEnabled=!0;else{var h=navigator.userAgent.toLowerCase();h.indexOf("android")>-1&&h.indexOf("mobile")>-1&&(t.callingEnabled=!0)}}t.clearAllExpiredTransactions=function(){f.clearAllExpiredTransactions().success(function(e){t.debugMode&&console.log("All Expired Transaction Success Data: ",e);var n=["Taxi Booking Accepted","Taxi Booking Not Available","Table Booking Not Accepted","Taxi Booking Won"],i={"Taxi Booking Accepted":{contents:"Your Taxi Booking Request has been accepted.",headings:"Taxi Booking Update",dataObj:{actionFunction:"goToMyNyteActivity"},items:[]},"Taxi Booking Not Available":{contents:"Your Taxi Booking Request has not been accepted.",headings:"Taxi Booking Update",dataObj:{actionFunction:"goToMyNyteActivity"},items:[]},"Table Booking Not Accepted":{contents:"Your Restaurant Table Booking Request has not been accepted.",headings:"Table Booking Update",dataObj:{actionFunction:"goToMyNyteActivity"},items:[]},"Taxi Booking Won":{contents:"You've just won a Taxi Booking!",headings:"Taxi Booking Won",dataObj:{actionFunction:"goToBusinessItems",businessItemType:"ownTaxiBookings"},items:[]}};if(null!=e){var o=function(e){null!=e.items&&e.items.length>0&&t.prepareMessageNotificationFinal(e.items,e.headings,e.contents,e.dataObj)};for(a=0;a<e.length;a++)if(i[e[a].alertType].items.push(e[a]._recipientProfileId),a==e.length-1){var r=null;for(b=0;b<n.length;b++)r=i[n[b]],o(r),b==n.length-1&&t.debugMode&&console.log(i)}}}).error(function(e){t.clearAllExpiredTransactions()})},t.clearAllExpiredTransactions(),t.debugModeLog=function(e){t.debugMode&&console.log(e.msg+": ",e.data)},t.topRightButtonFunction=function(){t.showHeaderButtonsFunction()},t.feedTopRightButtonFunction=function(){t.showHeaderButtonsFunction()},t.allTabsObject=[{mainView:"app.profile",subViews:["app.resetPassword","app.registerIntro","app.register","app.profile.notificationsSummary","app.profile.notification","app.profile.messageGroups","app.profile.messageGroups.messageGroup","app.accountSettings","app.accountSettingsAdvanced","app.businessItems","app.addBusinessItem","app.businessItem","app.businessItemSettings","app.contacts","app.addContact","app.contactDetail","app.profile.profileItems","app.addProfileItem","app.contactMyNyte"]},{mainView:"app.offers",subViews:["app.offers.offerDetail"]},{mainView:"app.feed",subViews:["app.feed.nlfeedListings","app.feed.nlfeedListing","app.feedListing-photos","app.feedListing-specific-photos","app.bookTable","app.bookTickets","app.seeTrailer","app.seeMenu","app.seeMenuItems","app.seeBusinessesItems","app.seeBusinessMenuItems","app.completeTakeawayOrder"]},{mainView:"app.taxi",subViews:[]},{mainView:"app.more",subViews:[]}],t.initialBackButtonFunction=function(){if(o.backTitle())o.goBack();else{var e=t.allTabsObject,i=t.currentViewName;for(a=0;a<e.length;a++)if(e[a].subViews.indexOf(i)>-1)return I.nextDirection("back"),n.go(e[a].mainView),!1}t.backButtonFunction=t.initialBackButtonFunction},t.backButtonFunction=t.initialBackButtonFunction,t.Platform=ionic.Platform,t.showGlobalTownSelect=!1,t.currentlyEditing=!1,t.showSearchPanel=!1,t.hideSearchClearButton=!0,t.nightSearchOpen=!0,t.showTheWhatsOpenFunction=!0,t.searchInputPlaceholder="Search by name",t.searchOnRight=!1,t.showAssistantButton=!0,t.assistantButtonActive=!0,t.showAssistantPanel=!1,t.previousStateName="nlfeed",t.searchForm={searchQuery:""},t.searchPanelBusinessCatsToShow=[],t.searchPanelResultsToShow=[],t.underConstruction&&"browser"==t.intendedPlatform&&(t.adminLoginForm={email:"",password:""},t.showAdminLogInForm=!1,t.adminLogIn=function(e,n){t.appLoading=!0,i.logIn(e,n).success(function(e){t.debugModeLog({msg:"Controller adminLogIn successData: ",data:e}),"null"!=e&&void 0!=e&&""!=e&&null!=e&&"myNyte"==e[0].listingType1?(l.scrollTop(),t.adminUserLoggedIn=!0,p.model.adminUserLoggedIn=!0,t.$broadcast("savestate"),t.appLoading=!1):(s.show({title:"Couldn't Log In",template:"<p>The log-in details you provided did not work or do not belong to an Admin user. Please check them and try again.</p>",scope:t,buttons:[{text:"Close"}]}),t.appLoading=!1)}).error(function(i){t.debugModeLog({msg:"ProfileCtrl logIn errorData: ",data:i}),t.adminLogIn(e,n)})},t.adminLogOut=function(){t.adminUserLoggedIn=!1,p.model.adminUserLoggedIn=!1,t.$broadcast("savestate")}),t.openAssistant=function(){if(!t.assistantButtonActive)return!1;t.showingAssistant=!0,S(function(){t.showingAssistant=!1},180);var e="sneak-preview/img/assistant_images/",n={"app.feed":{"detail-img-array":[{src:e+"feed/1.png"},{src:e+"feed/2.png"},{src:e+"feed/3.png"}]},"app.profile":{"detail-img-array":[{src:e+"mynyte/1.png"},{src:e+"mynyte/2.png"},{src:e+"mynyte/3.png"}]},"app.offers":{"detail-img-array":[{src:e+"offers/1.png"},{src:e+"offers/2.png"},{src:e+"offers/3.png"}]},"app.taxi":{"detail-img-array":[{src:e+"taxi/1.png"},{src:e+"taxi/2.png"}]}};t.allPopoverImages=n[t.currentViewName]["detail-img-array"],t.showPopoverImages(0)},t.showSearchPanelFunc=function(){if(t.showSearchPanel)return!1;var e=function(){i.getProfiles(t.currentSearchTown._id).success(function(e){var n=[],i=[];for(a=0;a<e.length;a++)1==e[a].isBusiness&&-1==i.indexOf(e[a]._businessTypeId)&&1==e[a].showBusinessTypeInMainSearch&&("Restaurant"==e[a].businessType||"Takeaway"==e[a].businessType?n.unshift({_id:e[a]._businessTypeId,name:e[a].businessType}):n.push({_id:e[a]._businessTypeId,name:e[a].businessType}),i.push(e[a]._businessTypeId));t.searchPanelBusinessCatsToShow=n}).error(function(){e()})};e(),t.topRightButtonFunction=function(){t.hideSearchPanel()},t.feedTopRightButtonFunction=function(){t.hideSearchPanel()},t.searchForm={searchQuery:""},t.searchInputPlaceholder="Search all places, people & events...",t.hideSearchClearButton=!1,t.showAssistantButton=!1,window.setTimeout(function(){t.showSearchPanel=!0},50)},t.conductSearch=function(e){if(!t.showSearchPanel)return!1;i.getListingsByName(t.currentSearchTown._id,e).success(function(e){if("null"!=e&&null!=e){for(a=0;a<e.length;a++)v.createListingTypesObjForListing(e[a]),e[a].currentPhotoAlbum="Movie"==e[a].listingType?"cover_photo/thumbnail":"profile_photo";t.searchPanelResultsToShow=e}}).error(function(){t.conductSearch(e)})},t.clearSearchInput=function(){t.searchForm={searchQuery:""}},t.hideSearchPanel=function(){t.searchForm={searchQuery:""},t.searchPanelResultsToShow=[],t.searchInputPlaceholder="Search by name",t.showSearchPanel=!1,t.hideSearchClearButton=!0,t.showAssistantButton=!0,t.searchActive=!0,t.topRightButtonFunction=function(){t.showHeaderButtonsFunction()},t.feedTopRightButtonFunction=function(){t.showHeaderButtonsFunction()}},t.hideHeaderButtonsFunction=function(){t.hideSearch=!1,t.showHeaderButtons=!1,t.topRightButtonIsClock=!0,t.showAssistantButton=!0,t.searchActive=!0,t.topRightButtonFunction=function(){t.showHeaderButtonsFunction()},t.feedTopRightButtonFunction=function(){t.showHeaderButtonsFunction()},t.showSearchPanel=!1},t.fillRecipientSearchResults=function(e,n,i,o){t.debugModeLog({msg:"rootScope fillRecipientSearchResults successData",data:e}),null!=e&&0!=e.length&&"null"!=e||(e=[]);for(a=0;a<i.length;a++)for(b=0;b<e.length;b++)i[a]._profileId==e[b]._profileId&&(e[b].deleteIt=!0);for(a=e.length-1;a>-1;a--)1==e[a].deleteIt&&e.splice(a,1);return[],e||[]},t.showHeaderButtonsFunction=function(){t.appLoading=!0,i.getAllOpenBusinessAccountsByTown(t.currentSearchTown._id,t.currentSearchBusinessType._id).success(function(e){if(null!=e&&"null"!=e)for(a=0;a<e.length;a++)e[a].currentPhotoAlbum="profile_photo",a==e.length-1&&(t.searchPanelResultsToShow=e);else t.searchPanelResultsToShow=[];t.showAssistantButton=!1,t.showSearchPanel=!0,t.hideSearch=!0,t.showHeaderButtons=!0,t.topRightButtonIsClock=!1,t.topRightButtonFunction=function(){t.hideHeaderButtonsFunction()},t.feedTopRightButtonFunction=function(){t.hideHeaderButtonsFunction()},t.appLoading=!1}).error(function(e){t.showHeaderButtonsFunction()})},t.toggleUserEngagement=function(e,o,r){function s(e){i.createUserEngagement(t.userEngagementTypes[c]._id,t.user._profileId,d,e.listingType,[],[]).success(function(){t.$broadcast("interacted-with-feed-listing",{_listingId:d,listingType:e.listingType,engagementType:t.userEngagementTypes[c].name})}).error(function(){s(e)})}function l(e){i.deleteUserEngagement(t.userEngagementTypes[c]._id,t.user._profileId,d,e.listingType).success(function(n){t.$broadcast("interacted-with-feed-listing",{_listingId:d,listingType:e.listingType,engagementType:t.userEngagementTypes[c].name})}).error(function(){l(e)})}if(t.userLoggedIn){for(a=0;a<t.userEngagementTypes.length;a++)if(t.userEngagementTypes[a].name==e){var c=a,d="Event"==o.listingType||"Offer"==o.listingType||"Movie"==o.listingType?o.relListingId:o._profileId;"Like"==e&&null==o.like?s(o):"Like"==e?l(o):"Watch"==e&&null==o.watch?s(o):"Watch"==e?l(o):"Follow"==e&&null==o.follow?s(o):"Follow"==e&&l(o)}}else n.go("app.profile");r.stopPropagation(),r.preventDefault()},t.handleListingsToUpdateInteractions=function(e,t){for(a=0;a<e.length;a++){if(("Event"==e[a].listingType||"Offer"==e[a].listingType||"Movie"==e[a].listingType?e[a].relListingId:e[a]._profileId)==t._listingId&&e[a].listingType==t.listingType){var n=a;"Like"==t.engagementType&&null==e[n].like?e[n].like="3":"Like"==t.engagementType?e[n].like=null:"Watch"==t.engagementType&&null==e[n].watch?e[n].watch="2":"Watch"==t.engagementType?e[n].watch=null:"Follow"!=t.engagementType||null!=e[n].follow&&0!=e[n].follow?"Follow"==t.engagementType&&(e[n].follow="1"==e[n].follow&&null):e[n].follow=null!=e[n].follow||"1"}}},t.pinListingToMessage=function(e,i,r,a,s){if(t.userLoggedIn){t.backButtonFunction=function(){if("app.profile.messageGroups"==o.currentStateName){n.go("app.profile");window.setTimeout(function(){n.go("app.feed")},320)}else o.goBack()},i.relListingType=r,i.relListingTypeAlias=r.indexOf("Businesses")>-1?r.substr(r.indexOf("Businesses")+10,r.length):r.substr(r.indexOf("Events")+6,r.length),i.relListingTypeAlias=""==i.relListingTypeAlias?r:i.relListingTypeAlias,i.relListingSpecItemId=a,"Offer"==i.listingType?i.date=i.endDateTimeString:i.date&&(i.date=i.weekday?i.weekday+", weekly":C.convertToDate(s,new Date(i.date.split(" ")[0]))),t.relListing=i,t.currentMessageInputPlaceholder="Add a caption (optional) ...",n.go("app.profile");window.setTimeout(function(){n.go("app.profile.messageGroups",{relListing:null,groupType:"Person"})},240);e.stopPropagation(),e.preventDefault()}else t.showPopUp(s,"SendListing")},t.shareListing=function(e,n){e.stopPropagation(),e.preventDefault(),t.showFrontScreenType="Share Listing",t.frontScreenCoverNote="Share this ...",t.showFrontScreenCover=!0,window.plugins.socialsharing.share("Hey","ermm",null,"blah.com")},t.toogleNightSearch=function(){t.nightSearchOpen=!t.nightSearchOpen},t.changeCurrentSearchBusinessType=function(e){var n={Bar:3,Club:2,Restaurant:4,Takeaway:5};t.currentSearchBusinessType={_id:n[e],name:e},t.showHeaderButtons&&t.showHeaderButtonsFunction()},t.showPopUp=function(e,t){var i={Guestlist:"get on the Guestlist for this event",BookTable:"book a table at this restaurant",Enquiry:"make this enquiry",Message:"send a message to this person",SendListing:"send this listing to friends",Like:"follow, watch or like this listing"};s.show({title:"Log In to proceed",template:'<i class="ion-person main-icon"></i><p>You must be logged in to '+i[t]+"</p>",buttons:[{text:"Close",onTap:function(e){}},{text:"Log in now",onTap:function(e){n.go("app.profile")}}],scope:e})},t.showPopoverImages=function(e){t.activeSlide=e,t.showPopoverModal("templates/shared-partials/image-popover.html")},t.showPopoverModal=function(e){E.fromTemplateUrl(e,{scope:t,animation:"scale-in"}).then(function(e){t.modal=e,t.modal.show()})},t.closePopoverModal=function(){window.screen.lockOrientation&&window.screen.lockOrientation("portrait"),t.modal.hide(),t.modal.remove()},t.selectExtraOption=function(e,t,n){var i=["offerType","offerStartPeriod","offerRegularityType","eventRegularityType","eventGuestListOption"];switch(e.mustBeSelected=-1!=i.indexOf(e.itemType),e.itemType){case"offerType":n.selectedOfferType=e;break;case"offerStartPeriod":n.selectedOfferStartPeriod=e;break;case"offerRegularityType":n.selectedOfferRegularityType=e;break;case"eventRegularityType":n.selectedEventRegularityType=e;break;case"eventGuestListOption":n.selectedEventGuestListOption=e}t.preventDefault()},t.checkIfDisplayNameTaken=function(e,n){e.length>4&&i.checkIfDisplayNameTaken(e).success(function(e){n.displayNameTaken=0!=parseInt(e.total)}).error(function(){t.checkIfDisplayNameTaken(e,n)})}},100)}),t.trustSrc=function(e){return D.trustAsResourceUrl(e)},t.openFrame=function(e){var n={"User Messages MyNyte":"https://www.mynyte.co.uk/#/app/profile//messageGroups//Business"},i="";e.frameContent?t.frameUrl=n[e.frameContent]:t.frameUrl=e.frameUrl,e.frameClass&&(i=e.frameClass),t.frameOpen=!0,t.frameClass=i},t.closeFrame=function(){t.frameOpen=!1}}),app.controller("MainCtrl",["$scope","$ionicSideMenuDelegate","$ionicHistory",function(e,t,n){e.toggleLeft=function(){t.toggleLeft()},e.goBackOne=function(){n.goBack()}}]),app.config(function(e,t){e.resourceUrlWhitelist(["self","http://www.youtube.com/**"]),t.loadPickerLibrary().loadGoogleAuth({cookie_policy:"single_host_origin",hosted_domain:"mynyte.co.uk",fetch_basic_profile:!0}).setClientId("357832123193-uuo04ahs9djm736m3k16b6j29pua669l.apps.googleusercontent.com").addApi("oauth2","v2")}),app.config(function(e,t,n){console.log(n),console.log(ionic.Platform),ionic.Platform.isAndroid()||ionic.Platform.isIOS()||e.views.transition("fade-in-out"),e.views.maxCache(5),e.tabs.position("bottom"),e.backButton.text("").icon("ion-ios-arrow-back").previousTitleText(!1),t.debugInfoEnabled(!1);var i={location:"no",clearcache:"yes",toolbar:"yes"};n.setDefaultOptions(i)}),app.controller("PopupCtrl",function(e,t,n){e.showPopup=function(n,i){if(e.data={},"ConfirmDelete"==n){t.show({title:"Delete Item",template:"<p>Are you sure you want to Delete this item?</p>",scope:e,buttons:[{text:"Cancel"},{text:"<b>Confirm</b>",type:"button-positive",onTap:function(t){e.deleteOptionChoice(i,1)}}]})}else if("NewMenuExtraOptionOption"==n){t.show({template:'<input type="text" placeholder="Option Choice Name" ng-model="currentOptionBeingAdded.name"><label ng-show="businessItem.priceRelevant" class="field-label">Extra Charge</label><input type="number" placeholder="Extra Charge" step="0.01" ng-model="currentOptionBeingAdded.extraPrice" ng-show="businessItem.priceRelevant"><label class="field-label">Order in the list (sequence)</label><input class="order-index" type="number" step="1" ng-model="currentOptionBeingAdded.orderIndex">',title:"New Option Choice",scope:e,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(t){""==e.currentOptionBeingAdded.name||null==e.currentOptionBeingAdded.name?t.preventDefault():e.createOptionChoice()}}]})}}}),app.factory("Profile",["$http","Config",function(e,t){var n={};return n.getAllUserEngagementTypes=function(){return e({method:"GET",url:t.CreateProfileUrl+"?action=getAllUserEngagementTypes",headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.checkIfDisplayNameTaken=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=checkIfDisplayNameTaken&displayName="+n})},n.checkIfEmailTaken=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=checkIfEmailTaken&email="+n})},n.createProfile=function(n,i,o,r,a){return e({method:"POST",url:t.CreateProfileUrl+"?action=createProfile&email="+o,data:{name:n,displayName:i,word:r,profileType:a,email:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.createFBUserProfile=function(n,i,o,r){return e({method:"POST",url:t.CreateProfileUrl+"?action=createFBUserProfile&email="+o,data:{name:n,displayName:i,fbId:r,email:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getProfileItemCountForProfile=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=getProfileItemCountForProfile&_profileId="+n})},n.getAllProfileDetails=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=getAllProfileDetails&_profileId="+n})},n.getAllTonightsFeedOptionsForBusiness=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=getAllTonightsFeedOptionsForBusiness&_businessId="+n})},n.getAllBusinessSettingsForBusiness=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=getAllBusinessSettingsForBusiness&_businessId="+n})},n.getRestaurantBusinessSettingsForBusiness=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=getRestaurantBusinessSettingsForBusiness&_businessId="+n})},n.getBusinessTypesForBusiness=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=getBusinessTypesForBusiness&_businessId="+n})},n.getFoodStylesForBusiness=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=getFoodStylesForBusiness&_businessId="+n})},n.getBusinessOpeningTimesForBusiness=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=getBusinessOpeningTimesForBusiness&_businessId="+n})},n.getMyNyteExternalContacts=function(n){return e({method:"POST",url:t.CreateProfileUrl+"?action=getMyNyteExternalContacts",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getTimeSheetToFill=function(n){return e({method:"POST",url:t.CreateProfileUrl+"?action=getTimeSheetToFill",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.updateAllProfileDetails=function(n){return e({method:"POST",url:t.CreateProfileUrl+"?action=updateAllProfileDetails",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.updateUsersDefaultPhoto=function(n){return e({method:"POST",url:t.CreateProfileUrl+"?action=updateUsersDefaultPhoto",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.updateProfilePasswordDetails=function(n){return e({method:"POST",url:t.CreateProfileUrl+"?action=updateProfilePasswordDetails",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.updateAllBusinessSettingDetails=function(n){return e({method:"POST",url:t.CreateProfileUrl+"?action=updateAllBusinessSettingDetails",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.updateBusinessTypesForBusiness=function(n,i,o){var r="";if(i.length>0)for(a=0;a<i.length;a++)r+="&_businessTypeIds[]="+i[a];else r="&_businessTypeIds[]=undefined";var s="";if(o.length>0)for(a=0;a<o.length;a++)s+="&_foodStyleIds[]="+o[a];else s="&_foodStyleIds[]=undefined";return e({method:"POST",url:t.CreateProfileUrl+"?action=updateBusinessTypesForBusiness&_businessId="+n+r+s,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.updateOrInsertBusinessOpeningTimesForBusiness=function(n,i,o,r,a,s,l,c,d,u,p,g,m,f,h){return e({method:"POST",url:t.CreateProfileUrl+"?action=updateOrInsertBusinessOpeningTimesForBusiness&_businessId="+n+"&mondayOpeningTime="+i+"&mondayClosingTime="+o+"&tuesdayOpeningTime="+r+"&tuesdayClosingTime="+a+"&wednesdayOpeningTime="+s+"&wednesdayClosingTime="+l+"&thursdayOpeningTime="+c+"&thursdayClosingTime="+d+"&fridayOpeningTime="+u+"&fridayClosingTime="+p+"&saturdayOpeningTime="+g+"&saturdayClosingTime="+m+"&sundayOpeningTime="+f+"&sundayClosingTime="+h,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.createUserEngagement=function(n,i,o,r,s,l){var c="";if(s.length>0)for(a=0;a<s.length;a++)c+="&_profileIds[]="+s[a]._profileId;else c="&_profileIds[]=undefined";return e({method:"POST",url:t.CreateProfileUrl+"?action=createUserEngagement&_engagementTypeId="+n+"&_actionerId="+i+"&_actionedListingId="+o+"&actionedListingTypeName="+r+c,data:{file:l},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.deleteUserEngagement=function(n,i,o,r){return e({method:"POST",url:t.CreateProfileUrl+"?action=deleteUserEngagement&_engagementTypeId="+n+"&_actionerId="+i+"&_actionedListingId="+o+"&actionedListingTypeName="+r,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.deleteUsersImage=function(n){return e({method:"POST",url:t.CreateProfileUrl+"?action=removeImage",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.completeRegistration=function(n,i,o,r,s,l,c,d,u,p,g){var m="";if(p.length>0)for(a=0;a<p.length;a++)m+="&_businessTypeIds[]="+p[a];else m="&_businessTypeIds[]=undefined";var f="";if(g.length>0)for(a=0;a<g.length;a++)f+="&_foodStyleIds[]="+g[a];else f="&_foodStyleIds[]=undefined";var h={_usersId:n,phone1:i,phone2:o,name:r,addressLine1:s,addressLine2:l,_townId:c,postCode:d,profileType:u};return e({method:"POST",url:t.CreateProfileUrl+"?action=completeRegistration"+m+f,data:h,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.makeUserActive=function(n,i){return e({method:"POST",url:t.CreateProfileUrl+"?action=makeUserActive&_profileId="+n+"&_oneSignalId="+i,async:!1})},n.makeUserInactive=function(n,i){return e({method:"POST",url:t.CreateProfileUrl+"?action=makeUserInactive&_profileId="+n+"&_oneSignalId="+i,async:!1})},n.logIn=function(n,i){return e({method:"GET",url:t.CreateProfileUrl+"?action=logIn&email="+n+"&word="+i})},n.logInThroughFb=function(n,i){return e({method:"GET",url:t.CreateProfileUrl+"?action=logInThroughFb&email="+n+"&fbId="+i})},n.getProfiles=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=getProfiles&_townId="+n})},n.getListingsByName=function(n,i){return e({method:"GET",url:t.CreateProfileUrl+"?action=getListings&_townId="+n+"&name="+i})},n.getAllFollowersByName=function(n,i){return e({method:"GET",url:t.CreateProfileUrl+"?action=getAllFollowersByName&_profileId="+i+"&nameSearched="+n})},n.getAllBusinessesByName=function(n,i,o){return e({method:"GET",url:t.CreateProfileUrl+"?action=getAllBusinessesByName&nameSearched="+n+"&business1Type="+i+"&business2Type="+o})},n.getListingsByBusinessType=function(n,i,o){return e({method:"GET",url:t.CreateProfileUrl+"?action=getListings&_townId="+n+"&_businessTypeId="+i+"&_profileId="+o})},n.getAllOpenBusinessAccountsByTown=function(n,i){return e({method:"GET",url:t.CreateProfileUrl+"?action=getAllOpenBusinessAccountsByTown&_townId="+n+"&_businessTypeId="+i})},n.getListingsByMusicType=function(n,i){return e({method:"GET",url:t.CreateProfileUrl+"?action=getListings&_townId="+n+"&_musicStyleId="+i})},n.getListingById=function(n,i,o){return e({method:"GET",url:t.CreateProfileUrl+"?action=getListings&_listingId="+n+"&listingType="+i+"&_profileId="+o})},n.getListingsForFeed=function(n,i,o){var r="getListingsForFeed",a=null==i?0:i;switch(o){case"food":r="getListingsForFoodFeed";break;case"events":r="getListingsForNightlifeFeed";break;case"movies":r="getListingsForMoviesFeed";break;default:r="getListingsForFeed"}return e({method:"GET",url:t.ListingsUrl+"?action="+r+"&_userId="+a+"&_townId="+n})},n.getPhotoAlbumsSummaryForProfile=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=getPhotoAlbumsSummaryForProfile&_profileId="+n})},n.getPhotoAlbumsSummaryForListing=function(n,i){return e({method:"GET",url:t.CreateProfileUrl+"?action=getPhotoAlbumsSummaryForListing&_listingId="+n+"&listingType="+i})},n.getSpecificAlbumSummaryForListing=function(n,i,o,r){return e({method:"GET",url:t.CreateProfileUrl+"?action=getSpecificAlbumSummaryForListing&albumType="+o+"&_listingId="+n+"&_albumId="+i+"&listingType="+r})},n.getWatchedListingsForProfile=function(n,i){return e({method:"GET",url:t.CreateProfileUrl+"?action=getWatchedListingsForProfile&_profileId="+n+"&timeScale="+i})},n.getFollowedListingsForProfile=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=getFollowedListingsForProfile&_profileId="+n})},n.getFollowingProfilesForProfile=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=getFollowingProfilesForProfile&_profileId="+n})},n.getLikedListingsForProfile=function(n,i){return e({method:"GET",url:t.CreateProfileUrl+"?action=getLikedListingsForProfile&_profileId="+n+"&timeScale="+i})},n.getFollowerProfileIdsForBusiness=function(n){return e({method:"GET",url:t.CreateProfileUrl+"?action=getFollowerProfileIdsForBusiness&_businessId="+n})},n.getMyNyteActivityForPerson=function(n,i){return e({method:"GET",url:t.CreateProfileUrl+"?action=getMyNyteActivityForPerson&_profileId="+n+"&timeScale="+i})},n.createResetCodeForProfileEmail=function(n){return e({method:"POST",url:t.CreateProfileUrl+"?action=createResetCodeForProfileEmail",data:{email:n},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.checkPasswordResetCodeValidity=function(n,i){return e({method:"POST",url:t.CreateProfileUrl+"?action=checkPasswordResetCodeValidity",data:{_profileId:n,code:i},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.contactMyNyteTeam=function(n){return e({method:"POST",url:t.CreateProfileUrl+"?action=contactMyNyteTeam",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n}]),app.factory("Notifications",["$http","Config",function(e,t){var n={};return n.clearAllExpiredTransactions=function(){return e({method:"GET",url:t.NotificationUrl+"?action=clearAllExpiredTransactions"})},n.getNotifications=function(n){return e({method:"GET",url:t.NotificationUrl+"?action=getNotifications&_profileId="+n})},n.getAllUserNotificationsSummaryForUpdate=function(n){return e({method:"GET",url:t.NotificationUrl+"?action=getAllUserNotificationsSummaryForUpdate&_profileId="+n})},n.getUnreadUserNotificationsSummaryForUpdate=function(n){return e({method:"GET",url:t.NotificationUrl+"?action=getUnreadUserNotificationsSummaryForUpdate&_profileId="+n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getUnreadUserMessagesAndNotificationsSummaryForUpdate=function(n){return e({method:"GET",url:t.NotificationUrl+"?action=getUnreadUserMessagesAndNotificationsSummaryForUpdate&_profileId="+n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.createOneSignalId=function(n,i,o){return e({method:"POST",url:t.NotificationUrl+"?action=createOneSignalId&_profileId="+n+"&_oneSignalId="+i+"&deviceToken="+o})},n.removeOneSignalIdForLogOut=function(n){return e({method:"POST",url:t.NotificationUrl+"?action=removeOneSignalIdForLogOut&_oneSignalId="+n})},n.getOneSignalDeviceTokensForProfiles=function(n){var i="";if(n.length>0)for(a=0;a<n.length;a++)i+="&_profileIds[]="+n[a];else i="&_profileIds[]=undefined";return e({method:"GET",url:t.NotificationUrl+"?action=getOneSignalDeviceTokensForProfiles"+i})},n}]),app.factory("Followers",["$http","Config",function(e,t){var n={};return n.getFollowerEventFollowers=function(){return e({method:"GET",url:t.FollowerEventFollowersUrl})},n}]),app.factory("Messages",["$http","Config",function(e,t){var n={};return n.currentMessageGroupIdBeingViewed=null,n.checkIfMessageGroupExists=function(n){var i="";for(a=0;a<n.length;a++)i+="&_profiles[]="+n[a];return e({method:"GET",url:t.MessageUrl+"?action=checkIfMessageGroupExists"+i})},n.getMessageGroups=function(n,i){return e({method:"GET",url:t.MessageUrl+"?action=getMessageGroups&_profileId="+n+"&groupType="+i})},n.getMesages=function(){return e({method:"GET",url:t.MessagesUrl})},n.getMessageGroupSummary=function(n,i){return e({method:"GET",url:t.MessageUrl+"?action=getMessageGroupSummary&_usersProfileId="+n+"&_groupId="+i})},n.getMessageGroup=function(n,i,o,r){return e({method:"GET",url:t.MessageUrl+"?action=getMessageGroup&_groupId="+n+"&_usersProfileId="+i+"&currentMessageIndex="+o+"&_firstMessageId="+r})},n.getMessageRecipientProfileIds=function(n,i){return e({method:"GET",url:t.MessageUrl+"?action=getMessageRecipientProfileIds&_messageGroupId="+n+"&_senderProfileId="+i})},n.getAllUserMessagesSummaryForUpdate=function(n){return e({method:"GET",url:t.MessageUrl+"?action=getAllUserMessagesSummaryForUpdate&_profileId="+n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getUnreadUserMessagesSummaryForUpdate=function(n){return e({method:"GET",url:t.MessageUrl+"?action=getUnreadUserMessagesSummaryForUpdate&_profileId="+n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getMessageDetails=function(n){return e({method:"GET",url:t.MessageUrl+"?action=getMessageDetails&_id="+n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.insertMessageReadReceipts=function(n,i,o){return e({method:"GET",url:t.MessageUrl+"?action=insertMessageReadReceipts&_groupId="+n+"&_usersProfileId="+i+"&_messageId="+o,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.addMessage=function(n){var i="";for(a=0;a<n._profileIds.length;a++)i+="&_profileIds[]="+n._profileIds[a];return e({method:"GET",url:t.MessageUrl+"?action=addMessage&_groupId="+n._groupId+"&groupType="+n.groupType+"&_senderId="+n._senderId+"&messageText="+n.messageText+"&_relListingId="+n._relatedItemId+"&relListingType="+n.relatedItemType+i,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n}]),app.factory("Contacts",["$http","Config",function(e,t){var n={};return n.getContacts=function(){return e({method:"GET",url:t.ContactsUrl})},n.getContact=function(n){return e({method:"GET",url:t.ContactsUrl+"?contactId="+n})},n.addContact=function(n,i,o,r,a,s,l,c,d){return e({method:"POST",url:t.ContactsUrl+"?action=add&businessType="+n+"&town="+i+"&companyName="+o+"&name="+r+"&role="+a+"&phone="+s+"&email="+l+"&website="+c+"&note="+d})},n.editContact=function(n,i,o,r,a,s,l,c,d,u){return e({method:"GET",url:t.ContactsUrl+"?action=edit&contactId="+n+"&businessType="+i+"&town="+o+"&companyName="+r+"&name="+a+"&role="+s+"&phone="+l+"&email="+c+"&website="+d+"&note="+u})},n}]),app.factory("Categories",["$http","Config",function(e,t){var n={};return n.getCategories=function(){return e({method:"GET",url:t.CategoriesUrl})},n.getAvailableTowns=function(){return e({method:"GET",url:t.CategoriesUrl+"?categoryType=town"})},n.getAvailableMusicStyles=function(){return e({method:"GET",url:t.CategoriesUrl+"?categoryType=musicStyle"})},n.getAvailableBusinessTypes=function(){return e({method:"GET",url:t.CategoriesUrl+"?categoryType=businessType"})},n.getAllFoodStyles=function(){return e({method:"GET",url:t.CategoriesUrl+"?categoryType=foodStyle"})},n.getAvailableFoodStyles=function(n,i){return e({method:"GET",url:t.CategoriesUrl+"?categoryType=foodStylesForTown&_townId="+n+"&businessType="+i})},n.getAllMovieStyles=function(){return e({method:"GET",url:t.CategoriesUrl+"?categoryType=movieStyle"})},n.getAvailableMovieStyles=function(){return e({method:"GET",url:t.CategoriesUrl+"?categoryType=movieStylesForTown"})},n.getAllOfferCategoriesForBusiness=function(n){return e({method:"GET",url:t.CategoriesUrl+"?categoryType=getAllOfferCategoriesForBusiness&_businessId="+n})},n}]),app.factory("Places",["$http","Config",function(e,t){var n={};return n.getPlaces=function(){return e({method:"GET",url:t.PlacesUrl})},n}]),app.factory("Events",["$http","Config",function(e,t){var n={};return n.getEvent=function(n){return e({method:"GET",url:t.EventsUrl+"?action=getEvents&format=getEvent&_eventId="+n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getEventDateDetails=function(n,i){return e({method:"GET",url:t.EventsUrl+"?action=getEvents&getDates=1&_profileId="+i+"&_eventId="+n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getEventsByBusiness=function(n,i,o){return e({method:"GET",url:t.EventsUrl+"?action=getEvents&format=getEventsByBusiness&_businessId="+n+"&timeScale="+i+"&_profileId="+o,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getEventsByTown=function(n,i,o){var r=n;return void 0!==i&&(r+="&_musicStyleId="+i),r+="&_profileId="+o,e({method:"GET",url:t.EventsUrl+"?action=getEvents&format=getEventsByTown&timeScale=present&_townId="+r,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.createEvent=function(n,i,o,r,s,l,c,d,u,p,g,m,f){var h="";if(f.length>0)for(a=0;a<f.length;a++)null!=f[a]._id&&(h+="&_musicStyleIds[]="+f[a]._id);else h="&_musicStyleIds[]=undefined";return e({method:"POST",url:t.EventsUrl+"?action=createEvent&_businessId="+n+"&_businessPlaceId="+i+"&eventTitle="+o+"&description="+r+"&eventDateTime="+s+"&dressCode="+l+"&guestListMax="+c+"&dealsOnTheNight="+d+"&extraInfo="+u+"&eventHasGuestList="+p+"&weekdayIndex="+g+"&weeksAhead="+m+h})},n.updateEvent=function(n,i,o,r,s,l,c,d,u,p,g,m,f){var h="";if(f.length>0)for(a=0;a<f.length;a++)null!=f[a]._id&&(h+="&_musicStyleIds[]="+f[a]._id);else h="&_musicStyleIds[]=undefined";return e({method:"POST",url:t.EventsUrl+"?action=updateEvent&_eventId="+n+"&_businessPlaceId="+i+"&eventTitle="+o+"&description="+r+"&eventDateTime="+s+"&dressCode="+l+"&guestListMax="+c+"&dealsOnTheNight="+d+"&extraInfo="+u+"&eventHasGuestList="+p+"&weekdayIndex="+g+"&weeksAhead="+m+h})},n.createEventEntryBooking=function(n,i,o,r,a){return e({method:"POST",url:t.EventsUrl+"?action=createEventEntryBooking&_eventId="+n+"&_profileId="+i+"&eventDate="+o+"&additionalGuests="+r+"&bookingType="+a})},n.getEventEntryBooking=function(n){return e({method:"GET",url:t.EventsUrl+"?action=getEventEntryBooking&_entryBookingId="+n})},n.updateEventEntryBookingByPerson=function(n,i,o,r){return e({method:"POST",url:t.EventsUrl+"?action=updateEventEntryBookingByPerson&_entryBookingId="+n+"&_eventDateId="+i+"&addGuests="+o+"&cancelled="+r})},n}]),app.factory("Offers",["$http","Config",function(e,t){var n={};return n.getOffer=function(n,i){return e({method:"GET",url:t.OffersUrl+"?action=getOffers&format=getOffer&_offerId="+n+"&_profileId="+i})},n.getOffersByTownId=function(n,i,o){return e({method:"GET",url:t.OffersUrl+"?action=getOffers&format=getOffersByTownId&timeScale="+o+"&_townId="+n+"&_profileId="+i})},n.getOffersByBusinessId=function(n,i,o){return e({method:"GET",url:t.OffersUrl+"?action=getOffers&format=getOffersByBusinessId&timeScale="+o+"&_businessId="+n+"&_profileId="+i})},n.getOffers=function(n,i,o){if("Event"==i){var r="getOffersForEvent";return e({method:"GET",url:t.OffersUrl+"?action=getOffers&format="+r+"&_eventId="+n+"&_profileId="+o})}var r="getOffers";return e({method:"GET",url:t.OffersUrl+"?action=getOffers&format="+r+"&timeScale=present&_businessId="+n+"&_profileId="+o})},n.getTodaysOffersForWideDisplay=function(n){return e({method:"GET",url:t.OffersUrl+"?action=getTodaysOffersForWideDisplay&_townId="+n})},n.createOffer=function(n,i,o,r,a,s,l,c,d,u){return e({method:"GET",url:t.OffersUrl+"?action=createOffer&_businessId="+n+"&_offerTypeId="+i+"&_offerSubCategoryId="+o+"&offerTitle="+r+"&description="+a+"&startDateTime="+s+"&endDateTime="+l+"&weeksAhead="+c+"&weekdayIndex="+d+"&_eventId="+u})},n.updateOffer=function(n,i,o,r,a,s,l,c,d,u){return e({method:"GET",url:t.OffersUrl+"?action=updateOffer&_offerId="+n+"&_businessId="+i+"&_offerTypeId="+o+"&_offerSubCategoryId="+r+"&offerTitle="+a+"&description="+s+"&startDateTime="+l+"&endDateTime="+c+"&weeksAhead="+d+"&weekdayIndex="+u,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n}]),app.factory("Listings",["$http","Config",function(e,t){var n={};return n.getListings=function(){return e({method:"GET",url:t.ListingsUrl})},n.getListing=function(){return e({method:"GET",url:t.ListingsUrl})},n.getRestaurantsOrTakeawaysByTownAndFoodStyle=function(n,i,o,r){return e({method:"GET",url:t.ListingsUrl+"?action=getRestaurantsOrTakeawaysByTownAndFoodStyle&_townId="+n+"&_foodStyleId="+i+"&businessType="+o+"&_profileId="+r})},n.getMoviesByTownAndMovieStyle=function(n,i,o){return e({method:"GET",url:t.ListingsUrl+"?action=getMoviesByTownAndMovieStyle&_townId="+n+"&_movieStyleId="+i+"&_profileId="+o})},n.getBarsAndClubsByTown=function(n,i){return e({method:"GET",url:t.ListingsUrl+"?action=getBarsAndClubsByTown&_townId="+n+"&_profileId="+i})},n.getPhoneNumberForListing=function(n){return e({method:"POST",url:t.ListingsUrl+"?action=getPhoneNumberForListing&"+n})},n}]),app.factory("MenuItems",["$http","Config",function(e,t){var n={};return n.createMenuItemCategory=function(n,i,o){return e({method:"POST",url:t.MenuItemUrl+"?action=createMenuItemCategory&_businessId="+n,data:{catName:i,catDescription:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getMenuItemCategories=function(n){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuItemCategories&_businessId="+n})},n.getMenuItemCategoriesForBusiness=function(n){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuItemCategoriesForBusiness&_businessId="+n})},n.getMenuItemCategoryDetailsForBusiness=function(n,i){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuItemCategoryDetailsForBusiness&_businessId="+n+"&_menuItemCategoryId="+i})},n.updateMenuItemCategoryDetailsForBusiness=function(n,i,o,r){return e({method:"POST",url:t.MenuItemUrl+"?action=updateMenuItemCategoryDetailsForBusiness&_businessId="+n,data:{_menuItemCategoryId:i,description:r,catName:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.deleteMenuCategory=function(n,i){return e({method:"POST",url:t.MenuItemUrl+"?action=deleteMenuCategory&_businessId="+i,data:{_categoryId:n},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.createMenuItemSubCategory=function(n,i,o){return e({method:"POST",url:t.MenuItemUrl+"?action=createMenuItemSubCategory&_businessId="+o,data:{catDescription:i,catName:n},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getMenuItemSubCategories=function(n){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuItemSubCategories&_businessId="+n})},n.getMenuItemSubCategoriesForBusiness=function(n){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuItemSubCategoriesForBusiness&_businessId="+n})},n.getMenuItemSubCategoryDetailsForBusiness=function(n,i){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuItemSubCategoryDetailsForBusiness&_businessId="+n+"&_menuItemSubCategoryId="+i})},n.updateMenuItemSubCategoryDetailsForBusiness=function(n,i,o,r){return e({method:"POST",url:t.MenuItemUrl+"?action=updateMenuItemSubCategoryDetailsForBusiness&_businessId="+n,data:{_menuItemSubCategoryId:i,description:r,catName:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.deleteMenuSubCategory=function(n,i){return e({method:"POST",url:t.MenuItemUrl+"?action=deleteMenuSubCategory&_businessId="+i,data:{_subcategoryId:n},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getMenuTemplateOptionCategories=function(){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuTemplateOptionCategories"})},n.getAllMenuItemTemplateOptionsForBusiness=function(n){return e({method:"GET",url:t.MenuItemUrl+"?action=getAllMenuItemTemplateOptionsForBusiness&_businessId="+n})},n.getMenuItemTemplateOption=function(n,i){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuItemTemplateOption&_businessId="+n+"&_optionId="+i})},n.getAllMenuItemTags=function(){return e({method:"GET",url:t.MenuItemUrl+"?action=getAllMenuItemTags"})},n.getMenuItemOptionsForBusiness=function(n){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuItemOptionsForBusiness&_businessId="+n})},n.getMenuItems=function(n,i,o){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuItems&_businessId="+n+"&menuItemCategoryIdString="+i+"&_menuTypeId="+o})},n.getMenuItem=function(n,i){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuItem&_businessId="+n+"&_menuItemId="+i})},n.getMenuItemsExtraOptions=function(n,i){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuItemsExtraOptions&_businessId="+n+"&_menuItemId="+i})},n.getMenuOrdersForBusiness=function(n,i){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuOrdersForBusiness&_businessId="+n+"&orderType="+i})},n.getMenuOrderForBusiness=function(n){return e({method:"GET",url:t.MenuItemUrl+"?action=getMenuOrderForBusiness&_menuOrderId="+n})},n.acceptOrRejectMenuOrder=function(n,i){return e({method:"POST",url:t.MenuItemUrl+"?action="+i+"&_menuOrderId="+n})},n.createMenuItem=function(n,i,o,r,a,s,l,c,d){var u={};return u.appliedOptions=c,u.appliedTags=d,a=a.replace(/&/g,"%26"),null!=l&&(l=l.replace(/&/g,"%26")),e({method:"POST",url:t.MenuItemUrl+"?action=createMenuItem&_businessId="+n+"&_menuTypeId="+i+"&_menuItemCategoryId="+o+"&_menuItemSubCategoryId="+r+"&name="+a+"&price="+s+"&description="+l,data:u,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.updateMenuItemDetails=function(n,i,o,r,a,s,l,c,d){var u={};return u.appliedOptions=c,u.appliedTags=d,a=a.replace(/&/g,"%26"),null!=l&&(l=l.replace(/&/g,"%26")),e({method:"POST",url:t.MenuItemUrl+"?action=updateMenuItem&_businessId="+n+"&_menuItemId="+i+"&_menuItemCatId="+o+"&_menuItemSubCatId="+r+"&name="+a+"&price="+s+"&description="+l,data:u,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.archiveMenuItem=function(n,i){return e({method:"POST",url:t.MenuItemUrl+"?action=archiveMenuItem&_businessId="+i,data:{_itemId:n},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.updateMenuItemTemplateOption=function(n,i,o){return e({method:"POST",url:t.MenuItemUrl+"?action=updateMenuItemTemplateOption&_businessId="+n+"&_catId="+o,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.createMenuItemTemplateOption=function(n,i,o){return e({method:"POST",url:t.MenuItemUrl+"?action=createMenuItemTemplateOption&_businessId="+n+"&_catId="+i,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.deleteMenuItemTemplateOptionOption=function(n){return e({method:"POST",url:t.MenuItemUrl+"?action=deleteMenuItemTemplateOptionOption&_optionId="+n})},n.createMenuItemTemplateOptionOption=function(n,i){return e({method:"POST",url:t.MenuItemUrl+"?action=createMenuItemTemplateOptionOption&_optionId="+n,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.createOrder=function(n,i,o){return e({method:"POST",url:t.MenuItemUrl+"?action=createMenuOrder&_profileId="+n+"&_businessId="+i,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n}]),app.factory("TableBooking",["$http","Config",function(e,t){var n={};return n.createTableBooking=function(n,i,o,r,a,s,l){return e({method:"POST",url:t.TableBookingUrl+"?action=createTableBooking&_usersProfileId="+n+"&_businessId="+i+"&usersName="+o+"&usersEmail="+r+"&tableFor="+a+"&dateTimeRequested="+s+"&comment="+l})},n.getRequestedTableBookings=function(n,i){return e({method:"GET",url:t.TableBookingUrl+"?action=getRequestedTableBookings&timeScale="+i+"&_businessId="+n})},n.getAcceptedTableBookings=function(n,i){return e({method:"GET",url:t.TableBookingUrl+"?action=getAcceptedTableBookings&timeScale="+i+"&_businessId="+n})},n.getTableBookingById=function(n){return e({method:"GET",url:t.TableBookingUrl+"?action=getTableBookingById&_tableBookingId="+n})},n.updateTableBooking=function(n,i,o,r,a,s){return e({method:"POST",url:t.TableBookingUrl+"?action=updateTableBooking&_tableBookingId="+n+"&accepted="+i+"&rejected="+o+"&cancelled="+r+"&completed="+a+"&alternateDate="+s})},n.updateTableBookingByPerson=function(n,i,o,r,a,s){return e({method:"POST",url:t.TableBookingUrl+"?action=updateTableBookingByPerson&_tableBookingId="+n+"&accepted="+i+"&rejected="+o+"&cancelled="+r+"&completed="+a+"&alternateDate="+s})},n.findOutIfRestaurantBookingPossible=function(n){return e({method:"POST",url:t.TableBookingUrl+"?action=findOutIfRestaurantBookingPossible",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.createBlockedTableBookingInterval=function(n){return e({method:"POST",url:t.TableBookingUrl+"?action=createBlockedTableBookingInterval",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.deleteBlockedTableBookingInterval=function(n){return e({method:"POST",url:t.TableBookingUrl+"?action=deleteBlockedTableBookingInterval",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getBlockedTableBookingIntervals=function(n){return e({method:"POST",url:t.TableBookingUrl+"?action=getBlockedTableBookingIntervals",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n}]),app.factory("Taxi",["$http","Config",function(e,t){var n={};return n.getTaxiCompanies=function(){return e({method:"GET",url:t.TaxiUrl})},n.getTaxiBookingsForBusiness=function(n,i){return e({method:"GET",url:t.TaxiUrl+"?action=getTaxiBookingsForBusiness&mode="+n+"&_businessId="+i})},n.getTaxiBookingForBusiness=function(n,i){return e({method:"GET",url:t.TaxiUrl+"?action=getTaxiBookingForBusiness&_id="+n+"&_businessId="+i})},n.bookTaxi=function(n,i,o,r,a,s,l,c,d,u,p,g,m,f,h){return e({method:"POST",url:t.TaxiUrl+"?action=bookTaxi&pickUpPlaceId="+n+"&lookedUpPickUpLocation="+i+"&pickUpAddressLine1="+o+"&pickUpTown="+r+"&pickUpPostCode="+a+"&dropOffPlaceId="+s+"&lookedUpDropOffLocation="+l+"&dropOffAddressLine1="+c+"&dropOffTown="+d+"&dropOffPostCode="+u+"&totalPassengers="+p+"&quickestIsRequired="+g+"&relContactName="+m+"&relContactEmail="+f+"&_relContactId="+h,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.respondToTaxiBooking=function(n,i,o,r){return e({method:"POST",url:t.TaxiUrl+"?action=respondToTaxiBookingRequest&_businessId="+n+"&_bookingId="+i+"&lowestPrice="+o+"&quickestTime="+r,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getTaxiBookingForPerson=function(n){return e({method:"GET",url:t.TaxiUrl+"?action=getTaxiBookingForPerson&_taxiBookingId="+n})},n.updateTaxiBookingByPerson=function(n,i,o){return e({method:"POST",url:t.TaxiUrl+"?action=updateTaxiBookingByPerson&_taxiBookingId="+n+"&cancelled="+i+"&completed="+o})},n}]),app.factory("Movies",["$http","Config",function(e,t){var n={};return n.getMoviesForMaintenance=function(n,i){return e({method:"GET",url:t.MovieUrl+"?action=getMoviesForMaintenance&timeScale="+n+"&_movieId="+i})},n.getMoviesTrailerLink=function(n){return e({method:"GET",url:t.MovieUrl+"?action=getMoviesTrailerLink&_movieId="+n})},n.getTodaysMoviesForWideDisplay=function(n){return e({method:"GET",url:t.MovieUrl+"?action=getTodaysMoviesForWideDisplay&_townId="+n})},n.getExistingCineworldMovies=function(){return e({method:"GET",url:t.MovieUrl+"?action=getExistingCineworldMovies"})},n.getMoviesToUpdate=function(n){return e({method:"POST",url:t.MovieUrl+"?action=getMoviesToUpdate",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getMovieToUpdatePhotoPos=function(n){return e({method:"POST",url:t.MovieUrl+"?action=getMovieToUpdatePhotoPos",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.applyMoviePosterPos=function(n){return e({method:"POST",url:t.MovieUrl+"?action=applyMoviePosterPos",data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n}]),app.factory("Images",["$http","Config",function(e,t){var n={};return n.uploadImage=function(e){return $.ajax({type:"POST",url:t.ImageUploadUrl+"?action=uploadImage",data:e,processData:!1,contentType:!1})},n.uploadImageForEventCreation=function(e){return $.ajax({type:"POST",url:t.ImageUploadUrl+"?action=uploadImage",data:e,processData:!1,contentType:!1})},n.uploadImageForOfferCreation=function(e){return $.ajax({type:"POST",url:t.ImageUploadUrl+"?action=uploadImage",data:e,processData:!1,contentType:!1})},n.uploadImageForMovieCreation=function(e){return $.ajax({type:"POST",url:t.ImageUploadUrl+"?action=uploadImage",data:e,processData:!1,contentType:!1})},n}]),app.factory("Admin",["$http","Config",function(e,t){var n={};return n.scanFilesInDirectory=function(e){return $.ajax({type:"GET",url:t.FilesUrl+"?action=scanFilesInDirectory&filePath="+e})},n.addMyNyteItem=function(e){return console.log(e),$.ajax({type:"POST",url:t.CreateProfileUrl+"?action=addMyNyteItem",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getMyNyteItemCountForProfile=function(e){return $.ajax({type:"POST",url:t.CreateProfileUrl+"?action=getMyNyteItemCountForProfile",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getMyNyteItems=function(e){return $.ajax({type:"POST",url:t.CreateProfileUrl+"?action=getMyNyteItems",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getMyNyteItem=function(e){return $.ajax({type:"POST",url:t.CreateProfileUrl+"?action=getMyNyteItem",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.getMyNyteItemModel=function(e){return $.ajax({type:"POST",url:t.CreateProfileUrl+"?action=getMyNyteItemModel",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.updateMyNyteItem=function(e){return $.ajax({type:"POST",url:t.CreateProfileUrl+"?action=updateMyNyteItem",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n.deleteMyNyteItem=function(e){return $.ajax({type:"POST",url:t.CreateProfileUrl+"?action=deleteMyNyteItem",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n}]),app.factory("myPushNotification",["$http","PushNoti",function(e,t){return{registerPush:function(e){if(window.plugins){var n=window.plugins.pushNotification,i=function(e){},o=function(e){};"android"!=device.platform&&"Android"!=device.platform||n.register(i,o,{senderID:t.senderID,ecb:"onNotificationGCM"})}}}}]),app.factory("SendPush",["$http","Config",function(e,t){var n={};return n.android=function(t){return e({method:"post",url:"http://www.skyafar.com/tools/push/push.php",data:{token:t}})},n}]),app.factory("userService",["$rootScope",function(e){var t={model:{user:{},introTooltipShownCount:0,adminUserLoggedIn:!1},SaveState:function(){localStorage.userService=angular.toJson(t.model)},RestoreState:function(){t.model=void 0===localStorage.userService?t.model:angular.fromJson(localStorage.userService)}};return e.$on("savestate",t.SaveState),e.$on("restorestate",t.RestoreState),t}]),app.controller("NLFeedCtrl",["$rootScope","$ionicViewSwitcher","$ionicScrollDelegate","$ionicConfig","$cordovaSocialSharing","$state","$scope","Categories","Places","Events","NgMap","Profile","location","Offers","fileReader","userService","$cordovaSQLite","$cordovaFileTransfer","listingsService","categoriesService","$timeout",function(e,t,n,i,o,r,s,l,c,d,u,p,g,m,f,h,v,y,w,C,T){s.pageLoading=!0,s.pageLoad=function(){s.rootScope=e,e.changeFeedHeader=function(t){e.showNightLifeSearch="closed"==t&&e.showNightLifeSearch,s.feedType="closed"==t?"Main":t,e.appLoading=!0,s.reloadingCentralContent=!0,s.features=[],window.setTimeout(function(){s.getListingsFunction(t)},30)},e.toggleNightLifeSearch=function(){e.showNightLifeSearch=!e.showNightLifeSearch,e.showNightFind2ndSelect=!1,e.showTownSelect=!1},e.showTownSelectFunc=function(){e.showTownSelect=!e.showTownSelect,e.showNightFind2ndSelect=!1},e.showNightFind2ndSelectFunc=function(){e.showNightFind2ndSelect=!e.showNightFind2ndSelect,e.showTownSelect=!1},e.selectTown=function(t){for(e.currentSearchTown=t,e.showTownSelect=!e.showTownSelect,a=0;a<C.townCategories.length;a++)C.townCategories[a].selected=C.townCategories[a]._id==t._id},e.select2ndSelectCat=function(t){var i=e.currentSelectedListingTypeToFind;if(n.scrollTop(),"restaurant"==i)for(e.currentSearchRestaurantFoodCat=t,a=0;a<e.restaurantFoodCategories.length;a++)e.restaurantFoodCategories[a].active=e.restaurantFoodCategories[a]._id==t._id,e.restaurantFoodCategories[a].selected=e.restaurantFoodCategories[a]._id==t._id;else if("takeaway"==i)for(e.currentSearchTakeawayFoodCat=t,a=0;a<e.takeawayFoodCategories.length;a++)e.takeawayFoodCategories[a].active=e.takeawayFoodCategories[a]._id==t._id,e.takeawayFoodCategories[a].selected=e.takeawayFoodCategories[a]._id==t._id;else if("cinema"==i)for(e.currentSearchMovieCat=t,a=0;a<e.movieCategories.length;a++)e.movieCategories[a].active=e.movieCategories[a]._id==t._id,e.movieCategories[a].selected=e.movieCategories[a]._id==t._id;else if("clubnight"==i)for(e.currentSearchMusic=t,a=0;a<C.musicCategories(l,e.currentSearchMusic.name).length;a++)C.musicCategories(l,e.currentSearchMusic.name)[a].active=C.musicCategories(l,e.currentSearchMusic.name)[a]._id==t._id,C.musicCategories(l,e.currentSearchMusic.name)[a].selected=C.musicCategories(l,e.currentSearchMusic.name)[a]._id==t._id;else if("cluborbar"==i)for(e.currentSearchClubOrBarCat=t,a=0;a<e.clubOrBarCategories.length;a++)e.clubOrBarCategories[a].active=e.clubOrBarCategories[a]._id==t._id,e.clubOrBarCategories[a].selected=e.clubOrBarCategories[a]._id==t._id;for(a=0;a<s.nightFind2ndSelect.length;a++)e.nightFind2ndSelect[a].active=e.nightFind2ndSelect[a]._id==t._id,e.nightFind2ndSelect[a].selected=e.nightFind2ndSelect[a]._id==t._id;e.showNightFind2ndSelect=!1},e.selectMusic=function(t){for(e.currentSearchMusic=t,e.showMusicSelect=!e.showMusicSelect,a=0;a<s.musicCategories.length;a++)C.musicCategories(l,e.currentSearchMusic.name)[a].selected=C.musicCategories(l,e.currentSearchMusic.name)[a]._id==t._id},e.activateMusic=function(t){for(e.currentSearchMusic=t,e.showMusicSelect=!e.showMusicSelect,a=0;a<s.musicCategories.length;a++)C.musicCategories(l,e.currentSearchMusic.name)[a].active=C.musicCategories(l,e.currentSearchMusic.name)[a]._id==t._id,C.musicCategories(l,e.currentSearchMusic.name)[a].selected=C.musicCategories(l,e.currentSearchMusic.name)[a]._id==t._id},s.isModalVisible=!1,s.reloadingCentralContent=!1,s.ionicScrollDelegate=n,s.feedType="Main",s.nightFindSlideLocked=!1,s.getListingsFunction=function(t,n){var i=function(i){null!=i?w.sortThroughListingsResults(s,i,0,"features"):s.features=[],e.feedHeaderItem=t,e.appLoading=!1,s.reloadingCentralContent=!1,"globalTownSelect"==n&&(e.showGlobalTownSelect=!1)};p.getListingsForFeed(e.currentSearchTown._id,e.user._profileId||0,s.feedType).success(function(e){if("movies"!=t)i(e);else for(var n={},o={},r=function(){var e,t=[],r=Object.keys(n);for(e=0;e<r.length;e++){var a,s=r[e],l=Object.keys(n[s].finalMovieShowing);for(a=0;a<l.length;a++){var c=l[a];console.log("blsh"),n[s].finalMovieShowing[c].name=o[s].title,n[s].finalMovieShowing[c].classification=o[s].rating,n[s].finalMovieShowing[c].currentCoverPhotoName="https://www.cineworld.co.uk"+o[s].currentCoverPhotoName,n[s].finalMovieShowing[c].releaseYear=o[s].releaseYear,n[s].finalMovieShowing[c]._tonightsFeedButtonOptionId=o[s]._tonightsFeedButtonOptionId,n[s].finalMovieShowing[c].tonightsFeedButtonOption=o[s].tonightsFeedButtonOption,n[s].finalMovieShowing[c].tonightsFeedButtonIconClass=o[s].tonightsFeedButtonIconClass,n[s].finalMovieShowing[c].listingType="Movie",n[s].finalMovieShowing[c].listingType1="Movie",n[s].finalMovieShowing[c].listingTypeCat1=o[s].listingTypeCat1,n[s].finalMovieShowing[c].listingTypeCat2=o[s].listingTypeCat2,n[s].finalMovieShowing[c].listingTypeCat3=o[s].listingTypeCat3,n[s].finalMovieShowing[c].listingTypeCat4=o[s].listingTypeCat4,n[s].finalMovieShowing[c].relListingId=o[s].relListingId,n[s].finalMovieShowing[c].isFeatured=o[s].isFeatured,t.push(n[s].finalMovieShowing[c]),a==l.length-1&&e==r.length-1&&(console.log(t),i(t))}}},a=function(){var e,t=Object.keys(n);for(e=0;e<t.length;e++){var i,o=t[e],a=Object.keys(n[o].finalMovieShowing);for(i=0;i<a.length;i++){var s=a[i],l=[];n[o].finalMovieShowing[s].showingTimesArray=n[o].finalMovieShowing[s].showingTimesArray||[];for(var c=0;c<n[o].finalMovieShowing[s]["Showing Dates Labels Array"].length;c++)if(l.push(new Date(n[o].finalMovieShowing[s]["Showing Dates Labels Array"][c].replace(/-/g,"/"))),c==n[o].finalMovieShowing[s]["Showing Dates Labels Array"].length-1)for(var d=function(e,t){return e>t?1:e<t?-1:0},u=l.sort(d),p=0;p<u.length;p++){var g=u[p].getMonth()+1;g=g<10?"0"+g:g;for(var m=u[p].getFullYear()+"-"+g+"-"+u[p].getDate(),f=n[o].finalMovieShowing[s][m].split(" "),h=[],v=0;v<f.length;v++){var y=f[v].replace(":","");parseInt(y)>1600&&h.push(f[v]),v==f.length-1&&(h.length>7&&(h=h.slice(0,7)),n[o].finalMovieShowing[s].showingTimesArray.push({date:m,times:h}),p==u.length-1&&i==a.length-1&&e==t.length-1&&r())}}}}},s=function(){var e,t=Object.keys(n);for(e=0;e<t.length;e++){var i=t[e],o=Object.keys(n[i]);n[i].finalMovieShowing={};var r=function(o,s){var l=s[o];if("finalMovieShowing"!=l){var c=n[i][l]["Showing Type"],d=!1;n[i][l]["Showing Dates Labels Array"]=n[i][l]["Showing Dates Labels Array"]||[],n[i].finalMovieShowing[c]||(n[i].finalMovieShowing[c]=n[i][l],n[i].finalMovieShowing[c]["Showing Dates Labels Array"]=[],d=!0);var u=function(p){console.log(p,n);var g=n[i][l]["Showing Labels Array"][p],m=n[i][l][g].ShowingDate;new Date(m.replace(/-/g,", "));if(n[i][l][m]?n[i][l][m]+=n[i][l][g].ShowingTime:(n[i][l][m]=n[i][l][g].ShowingTime,n[i][l]["Showing Dates Labels Array"].push(m)),n[i].finalMovieShowing[c][m]){if(!d){n[i].finalMovieShowing[c][m]+=" "+n[i][l][g].ShowingTime;var f=function(e){var t=e.split(" "),n=function(e,t){return e>t?1:e<t?-1:0},i=JSON.stringify(t.sort(n));return i=i.replace("[",""),i=i.replace("]",""),i=i.replace(/,/g," "),i=i.replace(/"/g,"")};n[i].finalMovieShowing[c][m]=f(n[i].finalMovieShowing[c][m])}}else n[i].finalMovieShowing[c][m]=n[i][l][g].ShowingTime;-1==n[i].finalMovieShowing[c]["Showing Dates Labels Array"].indexOf(m)&&n[i].finalMovieShowing[c]["Showing Dates Labels Array"].push(m),p==n[i][l]["Showing Labels Array"].length-1&&o==s.length-1&&e==t.length-1?a():p==n[i][l]["Showing Labels Array"].length-1&&o<s.length-1?r(o+1,s):p<n[i][l]["Showing Labels Array"].length-1&&u(p+1)};n[i][l]["Showing Labels Array"]?u(0):o==s.length-1&&e==t.length-1?a():o<s.length-1&&r(o+1,s)}else o<s.length-1?r(o+1):o==s.length-1&&a()};r(0,o)}},l=function(){for(var t=0;t<e.length;t++){var i,o=Object.keys(n);for(i=0;i<o.length;i++){var r=o[i];if(n[r][e[t]._businessEntityItemId]&&-1==e[t].metaName.indexOf("ShowingDate")&&-1==e[t].metaName.indexOf("ShowingTime"))n[r][e[t]._businessEntityItemId][e[t].metaName]=e[t].metaValue;else if(n[r][e[t]._businessEntityItemId]&&(e[t].metaName.indexOf("ShowingDate")>-1||e[t].metaName.indexOf("ShowingTime")>-1)){n[r][e[t]._businessEntityItemId]["Showing Labels Array"]=n[r][e[t]._businessEntityItemId]["Showing Labels Array"]||[];var a=e[t].metaName.substr(11,e[t].metaName.length-11);n[r][e[t]._businessEntityItemId]["Showing"+a]||(n[r][e[t]._businessEntityItemId]["Showing"+a]={},n[r][e[t]._businessEntityItemId]["Showing Labels Array"].push("Showing"+a)),n[r][e[t]._businessEntityItemId]["Showing"+a][e[t].metaName.substr(0,11)]=e[t].metaValue}t==e.length-1&&i==o.length-1&&(console.log("finalLoopThroughMoviesToCombineShowingTimes"),s())}}},c=0;c<e.length;c++)console.log("blsh"),"_Movie Id"!=e[c].metaName||n[e[c].metaValue]||(console.log(e[c]),n[e[c].metaValue]={},o[e[c].metaValue]={title:e[c].movieTitle,rating:e[c].rating,releaseYear:e[c].releaseYear,currentCoverPhotoName:e[c].currentCoverPhotoName,_tonightsFeedButtonOptionId:e[c]._tonightsFeedButtonOptionId,tonightsFeedButtonOption:e[c].tonightsFeedButtonOption,tonightsFeedButtonIconClass:e[c].tonightsFeedButtonIconClass,listingType:e[c].listingType,listingType1:e[c].listingType1,listingTypeCat1:e[c].listingTypeCat1,listingTypeCat2:e[c].listingTypeCat2,listingTypeCat3:e[c].listingTypeCat3,listingTypeCat4:e[c].listingTypeCat4,relListingId:e[c].relListingId,isFeatured:e[c].isFeatured}),"_Movie Id"!=e[c].metaName||n[e[c].metaValue][e[c]._businessEntityItemId]||(n[e[c].metaValue][e[c]._businessEntityItemId]={}),c==e.length-1&&l()}).error(function(){s.getListingsFunction(t,n)})},s.arrangeGlobalTownSelectFunction=function(t){"feedSearch"==t?e.activateTown=function(e){}:"feedHeader"==t&&(e.activateTown=function(t){for(e.appLoading=!0,e.currentSearchTown=t,a=0;a<C.townCategories.length;a++)C.townCategories[a].active=C.townCategories[a]._id==t._id,C.townCategories[a].selected=C.townCategories[a]._id==t._id;var n="Main"==s.feedType?"closed":s.feedType;s.getListingsFunction(n,"globalTownSelect")}),e.showGlobalTownSelect=!0},s.findNight=function(){r.go("app.feed.nlfeedListings",{_townId:e.currentSearchTown._id,_musicStyleId:e.currentSearchMusic._id})},s.shareAnywhere=function(){o.share("This is your message","This is your subject","www/imagefile.png","https://www.thepolyglotdeveloper.com")},s.shareViaTwitter=function(e,t,n){o.canShareVia("twitter",e,t,n).then(function(i){o.shareViaTwitter(e,t,n)},function(e){alert("Cannot share on Twitter")})},s.getOriginalListings=function(){p.getListingsForFeed(e.currentSearchTown._id,e.user._profileId||0,s.feedType).success(function(t){for(e.debugMode&&console.log("getListingsforFeed in NlFeed results: ",t),a=0;a<t.length;a++)"Movie"==t[a].listingType&&(t[a].cinemas=[{name:"Aspects Cinema",showingTimes:[{time:"6:30",active:!1},{time:"7:30",active:!1},{time:"8:30",active:!1}]},{name:"Another Cinema",showingTimes:[{time:"5:30",active:!1},{time:"8:25",active:!1}]}]);w.sortThroughListingsResults(s,t,0,"features"),e.debugMode&&console.log("Scope features: ",s.features)}).error(function(){s.getOriginalListings()})},e.updateCurrentListingTypeToFindProxy=function(t,n,i){setTimeout(function(){e.updateCurrentListingTypeToFind(t,n,i)},100)},e.updateCurrentListingTypeToFind=function(t,n,i){for(e.currentSelectedListingTypeToFind=t,a=0;a<e.nightFinderListingTypes.length;a++)e.nightFinderListingTypes[a].displayIndex+=0,e.nightFinderListingTypes[a].displayIndex=4==e.nightFinderListingTypes[a].displayIndex?-1:e.nightFinderListingTypes[a].displayIndex,e.nightFinderListingTypes[a].displayIndex=-2==e.nightFinderListingTypes[a].displayIndex?3:e.nightFinderListingTypes[a].displayIndex;if("restaurant"==t)if(e.restaurantFoodCategories)e.nightFind2ndSelect=e.restaurantFoodCategories,s.$apply(),s.pageLoading=!1;else{var o=function(){l.getAvailableFoodStyles(e.currentSearchTown._id,"Restaurant").success(function(t){for(t="null"==t||null==t?[]:t,t.unshift(e.currentSearchRestaurantFoodCat),a=0;a<t.length;a++)t[a].active=t[a].name==e.currentSearchRestaurantFoodCat.name,t[a].selected=t[a].name==e.currentSearchRestaurantFoodCat.name;e.restaurantFoodCategories=t,e.nightFind2ndSelect=e.restaurantFoodCategories,s.pageLoading=!1}).error(function(){o()})};o()}else if("takeaway"==t)if(e.takeawayFoodCategories)e.nightFind2ndSelect=e.takeawayFoodCategories,s.$apply(),s.pageLoading=!1;else{var o=function(){l.getAvailableFoodStyles(e.currentSearchTown._id,"Takeaway").success(function(t){for(t="null"==t||null==t?[]:t,t.unshift(e.currentSearchTakeawayFoodCat),a=0;a<t.length;a++)t[a].active=t[a].name==e.currentSearchTakeawayFoodCat.name,t[a].selected=t[a].name==e.currentSearchTakeawayFoodCat.name;e.takeawayFoodCategories=t,e.nightFind2ndSelect=e.takeawayFoodCategories,s.pageLoading=!1}).error(function(){o()})};o()}else if("cinema"==t)if(e.movieCategories)e.nightFind2ndSelect=e.movieCategories,s.$apply(),s.pageLoading=!1;else{var r=function(){l.getAvailableMovieStyles().success(function(t){for(t="null"==t||null==t?[]:t,t.unshift(e.currentSearchMovieCat),a=0;a<t.length;a++)t[a].active=t[a].name==e.currentSearchMovieCat.name,t[a].selected=t[a].name==e.currentSearchMovieCat.name;e.movieCategories=t,e.nightFind2ndSelect=e.movieCategories,s.pageLoading=!1}).error(function(){r()})};r()}else if("cluborbar"==t)if(e.clubOrBarCategories)e.nightFind2ndSelect=e.clubOrBarCategories,s.$apply(),s.pageLoading=!1;else{for(clubOrBarCategories=[{name:"Clubs",_id:2},{name:"Bars",_id:3}],clubOrBarCategories.unshift(e.currentSearchClubOrBarCat),a=0;a<clubOrBarCategories.length;a++)clubOrBarCategories[a].active=clubOrBarCategories[a].name==e.currentSearchClubOrBarCat.name,clubOrBarCategories[a].selected=clubOrBarCategories[a].name==e.currentSearchClubOrBarCat.name;e.clubOrBarCategories=clubOrBarCategories,e.nightFind2ndSelect=e.clubOrBarCategories,s.$apply(),s.pageLoading=!1}else"clubnight"==t&&(e.nightFind2ndSelect=C.musicCategories(l,e.currentSearchMusic.name),s.$apply(),s.pageLoading=!1)},s.findNight=function(){var t={clubnight:{searchName:"searchEventsByMusic"},cinema:{searchName:"searchMoviesByMovieStyle"},restaurant:{searchName:"searchRestaurantsByFoodStyle"},takeaway:{searchName:"searchTakeawaysByFoodStyle"},cluborbar:{searchName:"searchClubsOrBars"}},n=t[e.currentSelectedListingTypeToFind].searchName;"cluborbar"==e.currentSelectedListingTypeToFind&&("Bars"==e.currentSearchClubOrBarCat.name?n="searchBars":"Clubs"==e.currentSearchClubOrBarCat.name?n="searchClubs":"Bars & Clubs"==e.currentSearchClubOrBarCat.name&&(n="searchBarsAndClubs")),e.user.userInteractionObject.searchesConducted.clubNightSearches=e.user.userInteractionObject.searchesConducted.clubNightSearches||[],e.user.userInteractionObject.searchesConducted.clubNightSearches.push({_townId:e.currentSearchTown._id,_musicStyleId:e.currentSearchMusic._id}),r.go("app.feed.nlfeedListings",{searchType:n})},s.postUpdateToFeed=function(){e.updateButtonDisabled=!0,e.selectedUpdateBusiness="",e.selectedUpdateFollower="",e.chosenUpdateBusinesses=e.chosenUpdateBusinesses||[],e.possibleUpdateBusinesses=e.possibleUpdateBusinesses||[],e.chosenUpdateFollowers=e.chosenUpdateFollowers||[],e.possibleUpdateFollowers=e.possibleUpdateFollowers||[],n.getScrollView().options.scrollingY=!n.getScrollView().options.scrollingY,e.showUpdatePost=!e.showUpdatePost,e.showFeedUpdateScreenCover=!e.showFeedUpdateScreenCover},e.goToLogin=function(t){t.preventDefault(),t.stopPropagation(),e.showUpdatePost=!1,e.showFeedUpdateScreenCover=!1,n.getScrollView().options.scrollingY=!0,r.go("app.profile")},s.prepareUpdateType=function(t){var n={Night:{coverNote:"Upload Photos of a night",buttonMsg:"Post My Photos",i:"ion-images"},Meal:{coverNote:"Upload Photos of a meal",buttonMsg:"Post My Photos",i:"ion-images"},Approval:{coverNote:"Give a business your approval",buttonMsg:"Give your Seal of Approval",i:"ion-ribbon-b"},CheckIn:{coverNote:"Checkin somewhere in town",buttonMsg:"Check In",i:"ion-location"}};for(e.frontScreenCoverNote=n[t].coverNote,e.showFrontScreenType="Update",e.updateMessage=n[t].buttonMsg,e.updateIcon=n[t].i,e.updateType=t,e.showFrontScreenCover=!0,a=0;a<C.userEngagementTypes.length;a++)C.userEngagementTypes[a].name==e.updateType&&(e.updateTypeId=C.userEngagementTypes[a]._id)},e.closeUpdatePanel=function(){e.chosenUpdateBusinesses=[],e.possibleUpdateBusinesses=[],e.chosenUpdateFollowers=[],e.possibleUpdateFollowers=[],e.selectedUpdateFollower="",e.selectedUpdateBusiness="",e.updateButtonDisabled=!0,e.showFrontScreenCover=!1},e.getAllBusinessesByName=function(t){if(""==t)return e.possibleUpdateBusinesses=[],!1;var n="_",i="_";"Night"==e.updateType?(n="Nightclub",i="Bar"):"Meal"==e.updateType&&(n="Restaurant",i="Takeaway"),p.getAllBusinessesByName(t,n,i).success(function(n){e.possibleUpdateBusinesses=t.length>0?e.possibleUpdateBusinesses:[],e.possibleUpdateBusinesses=e.fillRecipientSearchResults(n,s,e.chosenUpdateBusinesses)}).error(function(){e.getAllBusinessesByName(t)})},e.getAllFollowersByName=function(t){if(""==t)return e.possibleUpdateFollowers=[],!1;p.getAllFollowersByName(t,e.user._profileId||0).success(function(t){e.possibleUpdateFollowers=e.fillRecipientSearchResults(t,s,s.chosenUpdateFollowers)}).error(function(){e.getAllFollowersByName(t)})},e.addPossibleUpdateBusiness=function(t){e.selectedUpdateBusiness="",e.chosenUpdateBusinesses.push(t),e.possibleUpdateBusinesses=[],"CheckIn"==s.updateType||"Approval"==s.updateType?e.updateButtonDisabled=!1:e.files.length>0&&("Meal"==s.updateType||"Night"==s.updateType)&&(e.updateButtonDisabled=!1)},e.addPossibleUpdateFollower=function(t){e.selectedUpdateFollower="",e.chosenUpdateFollowers.push(t),e.possibleUpdateFollowers=[]},e.getFile=function(t){if(e.progress=0,e.imageSrcs=[],ionic.Platform.isAndroid()){console.log(e.file);var n=e.file;window.resolveLocalFileSystemURL(n,function(n){var i=n.name;n.file(function(n){f.onloadend=function(e){var t=new Image;t.onload=function(e){var n=this.width,i=this.height;console.log("IMAGE HEIGHT: "+i),console.log("IMAGE WIDTH: "+n),t=null},t.src=e.target.result},f.readAsDataUrl(n,e).then(function(n){e.imageSrcs.push({imageSrc:n}),e.fileName=i,console.log(t),T(t.onComplete({fileName:i}),2e3)})},function(){console.log("There was an error reading or processing this file.")})},function(e){console.log(e)})}else for(a=0;a<e.files.length;a++)f.readAsDataUrl(e.files[a],e).then(function(t){e.imageSrcs.push({imageSrc:t})});e.files.length>0&&(e.updateButtonDisabled=!1)},e.imgUploadPrepare=function(){ionic.Platform.isAndroid()?e.getAndroidImage({imgEntryType:"cover_photo",onComplete:function(){}}):document.getElementById("img-upload").click()},e.$on("fileProgress",function(t,n){e.progress=n.loaded/n.total}),e.finishPostingUpdate=function(t){if(e.debugMode&&console.log(e.files),!e.updateButtonDisabled){e.appLoading=!0;var n="http://www.mynyte.co.uk/sneak-preview/data/functions/image-upload.php";for(a=0;a<e.files.length;a++){var i=e.user._profileId+"_"+e.files[a].name,o="http://www.mynyte.co.uk/sneak-preview/img/user_images/general_photo/"+i,r={fileKey:"file",fileName:i,chunkedMode:!1,mimeType:e.files[a].type,params:{directory:"upload",fileName:i}};if(ionic.Platform.isWebView){if(0==a){var s=new FormData;s.append("targetUrl",o)}s.append("file"+(a+1),e.files[a]),s.append("fileName"+(a+1),i),a==e.files.length-1&&$.ajax({url:n,type:"POST",data:s,processData:!1,contentType:!1,success:function(t){e.debugMode&&console.log(t)},error:function(t){e.debugMode&&console.log(t)}})}else y.upload(n,i,r).then(function(e){},function(e){},function(e){})}p.createUserEngagement(e.updateTypeId,e.user._profileId,e.chosenUpdateBusinesses[0].relListingId,e.chosenUpdateBusinesses[0].listingType,e.chosenUpdateFollowers,e.files).success(function(t){e.debugMode&&console.log("Create User Engagement successData: ",t),e.updateButtonDisabled=!0,e.possibleUpdateBusinesses=[],e.chosenUpdateBusinesses=[],e.showUpdatePost=!1,e.showFrontScreenCover=!1,e.showFeedUpdateScreenCover=!1,e.appLoading=!1}).error(function(){e.finishPostingUpdate(t)})}},s.pinListingToMsg=function(t,n){e.pinListingToMessage(n,t,t.listingType,null,s)},s.showShowingTimeButtons=function(e,t,i,o){if(o.stopPropagation(),o.preventDefault(),i.active)return s.hideShowingTimeButtons(e,o),!1;var r=o.y;r=r<100?100:r>380?-100:0,n.scrollTo(n.getScrollPosition().left,n.getScrollPosition().top-r,!0);var l=0;for(a=0;a<e.cinemas.length;a++)for(e.cinemas[a]==t&&(relCinemaIndex=a),e.cinemas[a].active=e.cinemas[a]==t,b=0;b<e.cinemas[a].showingTimes.length;b++)e.cinemas[a].showingTimes[b].active=e.cinemas[a].showingTimes[b]==i,l=e.cinemas[a].showingTimes[b]==i?b:l;s.currentScrollTop=n.getScrollPosition().top,s.currentShowingTimePopUpTriangleXVal=90*l,s.currentShowingTimePopUpTopVal=68*(relCinemaIndex+1),e.showShowingTimeButtons=!0,window.setTimeout(function(){n.getScrollView().options.scrollingY=!1},100)},s.hideShowingTimeButtons=function(e,t){if(t.stopPropagation(),t.preventDefault(),!s.showShowingTimeButtons)return!1;for(n.getScrollView().options.scrollingY=!0,e.showShowingTimeButtons=!1,a=0;a<e.cinemas.length;a++)for(e.cinemas[a].active=!1,b=0;b<e.cinemas[a].showingTimes.length;b++)e.cinemas[a].showingTimes[b].active=!1},s.seeListingDetail=function(e){if("Offer"==e.listingType){r.go("app.offers");window.setTimeout(function(){r.go("app.offers.offerDetail",{_id:e.relListingId})},100)}else r.go("app.feed.nlfeedListing",{_listingId:e.relListingId,listingType:e.listingType})},s.feedButtonPressed=function(t,n){switch(n.preventDefault(),n.stopPropagation(),t.tonightsFeedButtonOption){case"Book Table":if(!e.userLoggedIn)return e.showPopUp(s,"BookTable"),!1}var i="Business"==t.listingType?t._profileId:t.relListingId;switch(r.go("app.feed.nlfeedListing",{_listingId:t.relListingId,listingType:t.listingType}),t.tonightsFeedButtonOption){case"See Photos":var o="Business"==t.listingType?"Profile":t.listingType;window.setTimeout(function(){r.go("app.feedListing-photos",{_listingId:t.relListingId,listingType:o,_id:i,listingName:t.name})},120);break;case"See Takeaway Menu":window.setTimeout(function(){r.go("app.seeMenu",{_listingId:t.relListingId,listingType:o,listingName:t.name,_businessId:t.relListingId,_menuTypeId:1})},120);break;case"Book Table":window.setTimeout(function(){r.go("app.bookTable",{_listingId:t.relListingId,listingType:o,_id:i,listingName:t.name})},120);break;case"See A la Carte Menu":window.setTimeout(function(){r.go("app.seeMenu",{_listingId:t.relListingId,listingType:o,listingName:t.name,_businessId:t.relListingId,_menuTypeId:2})},120)}},s.getOriginalListings(),e.$on("user-logged-in",function(e,t){s.getOriginalListings()})},e.checkForAppInit(s),e.$on("interacted-with-feed-listing",function(t,n){e.handleListingsToUpdateInteractions(s.features,n)})}]),app.controller("NLFeedListingsCtrl",["$state","$scope","$rootScope","$stateParams","Categories","Places","Events","Profile","Listings","$ionicViewSwitcher","listingsService",function(e,t,n,i,o,r,s,l,c,d,u){t.rootScope=n,t.pageLoading=!0,t.searchOnRight=!0,t.searchType=i.searchType,t.listings=[],t.features=[],t.pageLoad=function(){var o=function(e){for(a=0;a<e.length;a++)"1"==e[a].isFeatured&&t.features.push(e[a])},r=function(e,i){l.getListingsByBusinessType(e,i,n.user._profileId||0).success(function(e){o(e),"null"!=e&&null!=e&&u.sortThroughListingsResults(t,e,0,"listings"),window.setTimeout(function(){t.pageLoading=!1},150),n.debugMode&&console.log("getListingsByBusinessType in NLFeedListings results: ",t.listings)}).error(function(){r(e,i)})},d=function(e){c.getBarsAndClubsByTown(e,n.user._profileId||0).success(function(e){o(e),"null"!=e&&null!=e&&u.sortThroughListingsResults(t,e,0,"listings"),window.setTimeout(function(){t.pageLoading=!1},150),n.debugMode&&console.log("getBarsAndClubsByTown in NLFeedListings results: ",t.listings)}).error(function(){d(e)})};switch(t.pinListingToMsg=function(e,i){n.pinListingToMessage(i,e,e.listingType,null,t)},t.findNight=function(){s.getEventsByTown(n.currentSearchTown._id,n.currentSearchMusic._id,n.user._profileId||0).success(function(e){n.debugMode&&console.log("getEventsbytown in NLFeedListings results: ",e),"null"!=e&&null!=e&&(o(e),u.sortThroughListingsResults(t,e,0,"listings")),window.setTimeout(function(){t.pageLoading=!1},150)}).error(function(){t.findNight()})},t.findMovies=function(){c.getMoviesByTownAndMovieStyle(n.currentSearchTown._id,n.currentSearchMovieCat._id,n.user._profileId||0).success(function(e){o(e),console.log(e),"null"!=e&&null!=e&&u.sortThroughListingsResults(t,e,0,"listings"),window.setTimeout(function(){t.pageLoading=!1},150)}).error(function(){t.findMovies()})},t.findRestaurants=function(){c.getRestaurantsOrTakeawaysByTownAndFoodStyle(n.currentSearchTown._id,n.currentSearchRestaurantFoodCat._id,"Restaurant",n.user._profileId||0).success(function(e){o(e),"null"!=e&&null!=e&&u.sortThroughListingsResults(t,e,0,"listings"),window.setTimeout(function(){t.pageLoading=!1},150)}).error(function(){t.findRestaurants()})},t.findTakeaways=function(){c.getRestaurantsOrTakeawaysByTownAndFoodStyle(n.currentSearchTown._id,n.currentSearchTakeawayFoodCat._id,"Takeaway",n.user._profileId||0).success(function(e){o(e),"null"!=e&&null!=e&&u.sortThroughListingsResults(t,e,0,"listings"),window.setTimeout(function(){t.pageLoading=!1},150)}).error(function(){t.findTakeaways()})},t.seeListingDetail=function(t){e.go("app.feed.nlfeedListing",{_listingId:t.relListingId,listingType:t.listingType,searchType:i.searchType,_businessTypeId:i._businessTypeId})},t.searchType){case"searchBusinessByCategory":case"searchBars":case"searchClubs":case"searchBarsAndClubs":var p=i._businessTypeId;switch(t.searchType){case"searchBusinessByCategory":n.currentSearchStyleTerm=i._businessTypeId,n.currentSearchTypeTerm="Businesses";break;case"searchBars":n.currentSearchStyleTerm="",n.currentSearchTypeTerm="Bars",p=3;break;case"searchClubs":n.currentSearchStyleTerm="",n.currentSearchTypeTerm="Clubs",p=2;break;case"searchBarsAndClubs":n.currentSearchStyleTerm="",n.currentSearchTypeTerm="Bars & Clubs"}"searchBarsAndClubs"==t.searchType?d(n.currentSearchTown._id):r(n.currentSearchTown._id,p);break;case"searchEventsByMusic":n.currentSearchStyleTerm=n.currentSearchMusic.name,n.currentSearchTypeTerm="Nights",t.findNight();break;case"searchMoviesByMovieStyle":n.currentSearchStyleTerm=n.currentSearchMovieCat.name,n.currentSearchTypeTerm="Movies",t.findMovies();break;case"searchRestaurantsByFoodStyle":n.currentSearchStyleTerm=n.currentSearchRestaurantFoodCat.name,n.currentSearchTypeTerm="Restaurants",t.findRestaurants();break;case"searchTakeawaysByFoodStyle":n.currentSearchStyleTerm=n.currentSearchTakeawayFoodCat.name,n.currentSearchTypeTerm="Takeaways",t.findTakeaways()}n.$on("interacted-with-feed-listing",function(e,i){n.handleListingsToUpdateInteractions(t.features,i)})},n.checkForAppInit(t)}]),app.controller("NLFeedListingCtrl",["$rootScope","$state","$scope","$stateParams","$ionicPopup","Categories","Places","Events","Profile","Messages","$ionicViewSwitcher","datesService","listingsService",function(e,t,n,i,o,r,a,s,l,c,d,u,p){n.rootScope=e,n.listing={},n.pageLoading=!0,n.searchType=i.searchType,n._businessTypeId=i._businessTypeId,n._listingId=i._listingId,n.listingType=i.listingType,n.$on("$ionicView.beforeEnter",function(){e.pageTitle=n.pageTitle?n.pageTitle:e.pageTitle,e.allPopoverImages=n.popoverImages||e.allPopoverImages}),n.$on("$ionicView.enter",function(){}),n.pageLoad=function(){var o=function(){l.getListingById(i._listingId,i.listingType,e.user._profileId||0).success(function(t){e.debugMode&&console.log("NLFeedListing getListingById successData: ",t[0]),n.listing=t[0],e.pageTitle=n.listing.name,n.pageTitle=e.pageTitle,n.listing.follow=t[0].follow,p.createListingTypesObjForListing(n.listing),p.processListingBusinessOpeningTimes(n.listing),n.listing.isAcceptingTaxiBookings="1"==n.listing.isAcceptingTaxiBookings,n.listing.isAcceptingTableBookings="1"==n.listing.isAcceptingTableBookings,n.listing.isAcceptingOnlineOrders="1"==n.listing.isAcceptingOnlineOrders,n.listing.phoneIsRequiredForBooking="1"==n.listing.showUsersEmailAndPhoneInTableBookingResponse,n.listing.allowCommentInTableBooking="1"==n.listing.allowCommentInTableBooking,n.listing.showTakeawayMenu=!("1"!=n.listing.showTakeawayMenu||!n.listing.hasTakeawayMenuItem),n.listing.showCarteMenu=!("1"!=n.listing.showCarteMenu||!n.listing.hasCarteMenuItem),n.listing.currentCoverPhotoName="Movie"==n.listing.listingType?"https://www.cineworld.co.uk"+n.listing.currentCoverPhotoName:n.listing.currentCoverPhotoName,"Event"==n.listing.listingType&&null==n.listing.weekday?(n.listing.dateString=n.listing.date.split(" "),n.selectedDate1=new Date(n.listing.dateString[0]),n.listing.dateDisplay=u.convertToDate(n,n.selectedDate1),n.listing.isPastEvent=new Date>n.selectedDate1,n.listing.isGuestListAllowed=null!=n.listing.isGuestListAllowed,n.listing.isGuestListMaxReached=null!=n.listing.guestListMax&&parseInt(n.listing.guestListCurrentTotal)>=parseInt(n.listing.guestListMax)):"Event"==n.listing.listingType&&null!=n.listing.weekday&&(n.listing.lastDate=null!=n.listing.lastDate?u.getShortenedDateString(n.listing.lastDate):null,n.listing.lastDate=null!=n.listing.lastDate?u.convertToDateWithoutComma(n,new Date(n.listing.lastDate)):null),e.debugMode&&console.log("getListingById in NLFeedListing results: ",n.listing),n.messageDisabled=!!("1"==e.user.isBusiness||"Movie"==n.listing.listingType||"Business"==n.listing.listingType&&"0"==n.listing.isAcceptingEnquiries||e.userLoggedIn&&"1"!=n.listing.following&&"Person"==n.listing.listingType&&"0"==e.user.isBusiness),window.setTimeout(function(){n.pageLoading=!1},150)}).error(function(){o()})};o(),n.attemptToLikeOrFollowListing=function(t,i,o){e.userLoggedIn?e.toggleUserEngagement(t,i,o):e.showPopUp(n,"Like")},n.sendMessage=function(){if(e.userLoggedIn&&"0"==e.user.isBusiness&&("1"==n.listing.isBusiness&&"1"==n.listing.isAcceptingEnquiries||"Event"==n.listing.listingType||"1"==n.listing.following&&"1"!=n.listing.isBusiness)){t.go("app.profile");var i="Event"==n.listing.listingType?n.listing:null,o="Event"==n.listing.listingType?n.listing.businessName:n.listing.name;e.relListing=i,"Event"==n.listing.listingType&&(e.relListing.relListingTypeAlias="Event",e.relListing.date=e.relListing.weekday?e.relListing.weekday+", weekly":u.convertToDate(n,new Date(e.relListing.date.split(" ")[0]))),e.relListing&&(e.relListing.relListingType=null!=i?i.listingType:null,e.relListing.relListingSpecItemId=null!=i?i.relListingId:null);var r="1"==n.listing.isBusiness||"Event"==n.listing.listingType?"Business":"Person";window.setTimeout(function(){t.go("app.profile.messageGroups",{relListing:null,groupType:r})},60),window.setTimeout(function(){var i=function(){c.checkIfMessageGroupExists([e.user._profileId,n.listing._profileId]).success(function(i){e.debugMode&&console.log("checkIfMessageGroupExists successData: ",i),null==i?t.go("app.profile.messageGroups.messageGroup",{_id:null,relListing:null,_profileIds:[e.user._profileId,n.listing._profileId],groupType:r,messageNameString:"New Message to "+o}):t.go("app.profile.messageGroups.messageGroup",{_id:i[0]._id,relListing:null,_profileIds:[],groupType:r,messageNameString:o})}).error(function(){i()})};i()},230)}else e.userLoggedIn||("1"==n.listing.isBusiness||"Event"==n.listing.listingType?e.showPopUp(n,"Enquiry"):e.showPopUp(n,"Message"))},n.seePhoto=function(t){"CoverPhoto"==t&&"Movie"!=n.listing.listingType?n.popoverImages=[{src:e.assetsFolderUrl+"/img/user_images/cover_photo/"+n.listing.currentCoverPhotoName}]:"CoverPhoto"==t&&"Movie"==n.listing.listingType?n.popoverImages=[{src:n.listing.currentCoverPhotoName}]:"ProfilePhoto"==t&&(n.popoverImages=[{src:e.assetsFolderUrl+"/img/user_images/profile_photo/"+n.listing.currentProfilePhotoName}]),e.allPopoverImages=n.popoverImages,e.showPopoverImages(0)},n.seePhotos=function(e){var o=null,r=null;"Movie"==e.listingType||"Event"==e.listingType?(o=e.relListingId,r=e.listingType):(o=e._profileId,r="Profile"),t.go("app.feedListing-photos",{searchType:i.searchType,_businessTypeId:i._businessTypeId,_listingId:i._listingId,listingType:e.listingType,_id:o,specificListingType:r,listingName:n.listing.name})},n.goToSeeTrailer=function(){t.go("app.seeTrailer",{searchType:i.searchType,_businessTypeId:i._businessTypeId,_listingId:i._listingId,listingType:n.listing.listingType,_id:n.listing.relListingId,movieTitle:n.listing.name})},n.goToBookTable=function(){n.listing.isAcceptingTableBookings&&e.userLoggedIn?t.go("app.bookTable",{searchType:i.searchType,_businessTypeId:i._businessTypeId,_listingId:i._listingId,listingType:i.listingType,_id:n.listing.relListingId,listingName:n.listing.name,tableForMax:n.listing.maxTableBookingGuests,phoneIsRequiredForBooking:n.listing.phoneIsRequiredForBooking,commentAllowed:n.listing.allowCommentInTableBooking}):n.listing.isAcceptingTableBookings&&!e.userLoggedIn&&e.showPopUp(n,"BookTable")},n.goToBookTickets=function(){n.listing.isGuestListAllowed&&!n.listing.isGuestListMaxReached&&e.userLoggedIn?t.go("app.bookTickets",{searchType:i.searchType,_businessTypeId:i._businessTypeId,_listingId:i._listingId,listingType:i.listingType,_id:n.listing.relListingId,listingName:n.listing.name}):!n.listing.isGuestListAllowed||n.listing.isGuestListMaxReached||e.userLoggedIn||e.showPopUp(n,"Guestlist")},n.goToSeeMenu=function(e){n.listing.showCarteMenu&&"Carte"==e?t.go("app.seeMenu",{searchType:i.searchType,_businessTypeId:i._businessTypeId,_listingId:i._listingId,listingType:i.listingType,listingName:n.listing.name,_businessId:n.listing.relListingId,_menuTypeId:2}):n.listing.showTakeawayMenu&&"Takeaway"==e&&t.go("app.seeMenu",{searchType:i.searchType,_businessTypeId:i._businessTypeId,_listingId:i._listingId,listingType:i.listingType,listingName:n.listing.name,_businessId:n.listing.relListingId,_menuTypeId:1})},n.pinListingToMsg=function(t,i){e.pinListingToMessage(i,t,t.listingType,null,n)},n.goToBookTaxi=function(){}},e.checkForAppInit(n),e.$on("interacted-with-feed-listing",function(t,i){e.handleListingsToUpdateInteractions([n.listing],i)})}]),app.controller("NLFeedListingPhotosCtrl",["$ionicHistory","$rootScope","$state","$scope","$stateParams","Categories","Places","Events","Profile","$ionicViewSwitcher",function(e,t,n,i,o,r,a,s,l,c){i.rootScope=t,i.photoAlbums=[],i.windowWidth=window.innerWidth/100*30,i._listingId=o._listingId,i.listingType=o.listingType,i.listingName=o.listingName,i._paramsId=o._id,i.$on("$ionicView.beforeEnter",function(){t.pageTitle=i.pageTitle?i.pageTitle:t.pageTitle}),i.pageLoad=function(){t.pageTitle=o.listingName+" Photos",i.pageTitle=t.pageTitle;var e=function(){l.getPhotoAlbumsSummaryForListing(o._id,o.specificListingType).success(function(e){t.debugMode&&console.log("getPhotoAlbumsSummaryForListing successData: ",e),"null"!=e&&(i.photoAlbums=e)}).error(function(){e()})};e()},t.checkForAppInit(i)}]),app.controller("NLFeedListingSpecificPhotosCtrl",["$ionicHistory","$rootScope","$state","$scope","$stateParams","Categories","Places","Events","Profile","$ionicViewSwitcher",function(e,t,n,i,o,r,s,l,c,d){i.rootScope=t,i.photos=[],i.windowWidth=window.innerWidth/100*28.5,i._listingProfileId=o._listingId,i.$on("$ionicView.beforeEnter",function(){t.allPopoverImages=i.popoverImages||[],t.pageTitle=i.pageTitle||t.pageTitle}),i.pageLoad=function(){t.pageTitle=o.listingName,t.pageTitle+="Cover Photo"==o.albumType?" Cover Photos":" Profile Photos",i.pageTitle=t.pageTitle,i.listingType=o.listingType;var e=function(){var n="Business"==o.listingType||"Person"==o.listingType?"Profile":o.listingType;c.getSpecificAlbumSummaryForListing(o._id,o._albumId,o.albumType,n).success(function(e){if(t.debugMode&&console.log("getSpecificAlbumSummaryForListing successData: ",e),"null"!=e){var n=[],r="";for(r="Profile Photo"==o.albumType?"profile_photo":"Cover Photo"==o.albumType?"cover_photo":"general_photo",a=0;a<e.length;a++){var s="Profile Photo"==o.albumType?(a+3)%3!=0:(a+1)%2==0;e[a].index=a,e[a].evenIndex=s?"even":"odd","Movie"==o.listingType?n.push({src:e[a].name}):n.push({src:t.assetsFolderUrl+"/img/user_images/"+r+"/"+e[a].name}),a==e.length-1&&(i.popoverImages=n,t.allPopoverImages=n,i.photos=e)}}}).error(function(){e()})};e()},t.checkForAppInit(i)}]),app.controller("SeeBusinessesItemsCtrl",["$rootScope","$state","$stateParams","$scope","Offers","Profile","Events","Taxi","MenuItems","$ionicScrollDelegate","$ionicViewSwitcher","datesService","$timeout",function(e,t,n,i,o,r,s,l,d,u,p,g,m){i.rootScope=e,i.businessesItems=[],i.itemType=n.itemType,i.windowWidth=window.innerWidth,i.$on("$ionicView.enter",function(){"Offers"==n.itemType?(e.topRightButtonShouldBeSettings=!0,e.topRightButtonFunction=function(){t.go("app.businessItemSettings",{itemType:n.itemType})}):(e.topRightButtonShouldBeSettings=!1,e.topRightButtonFunction=function(){t.go("app.addBusinessItem",{itemType:n.itemType})}),e.pageTitle=i.pageTitle||e.pageTitle}),i.pageLoad=function(){switch("Offers"!=n.itemType?i.nextPageFunction=function(e){t.go("app.businessItem",{_id:e.relListingId,itemType:n.itemType})}:i.nextPageFunction=function(n){t.go("app.seeBusinessMenuItems",{_businessId:e.user._id,_menuItemCategoryId:n._id,viewType:"listing"})},i.pinListingToMsg=function(t,n){e.pinListingToMessage(n,t,t.listingType,null,i)},n.itemType){case"Offers":e.pageTitle="Offers at "+n.listingName,i.pageTitle=e.pageTitle,i.pageSubTitle="Event"!=n.listingType?"Current/Upcoming Offers":"Deals on the Night",i.getBusinessItems=function(){var t="Event"==n.listingType?"Event":"Business";o.getOffers(n._businessId,t,e.user._profileId||0).success(function(t){e.debugMode&&console.log("SeeBusinessesItemsCtrl getOffers successData: ",t);var n,o,r=[],s=[];if(i.offers=[],o=function(e){i.businessesItems=e},n=function(e){for(b=0;b<e.length;b++)for(s[b]=[],s[b].name=e[b],s[b].offers=[],c=0;c<t.length;c++){var n=t[c].offerSubCategoryName;n==e[b]&&(t[c].index=s[b].offers.length+1,s[b].offers.push(t[c])),c==t.length-1&&b==e.length-1&&o(s)}},null!=t)for(a=0;a<t.length;a++){var l=t[a].offerSubCategoryName;-1==r.indexOf(l)&&(r.push(l),s.showFull=!1),t[a].startDateTimeString=g.convertToDate(i,new Date(t[a].relevantStartDateTime.split(" ")[0])),t[a].endDateTimeString=g.convertToDate(i,new Date(t[a].relevantEndDateTime.split(" ")[0])),i.offers.push(t[a]),a==t.length-1&&n(r)}else i.businessesItems=[]}).error(function(){i.getBusinessItems()})},i.goToOffer=function(e){t.go("app.offers");window.setTimeout(function(){t.go("app.offers.offerDetail",{_id:e._id})},200)},i.toggleCategoryShow=function(e){e.showFull=!e.showFull,m(function(){u.resize()},500)},e.$on("new-offer",function(e,t){i.getBusinessItems()});break;case"UpcomingEvents":e.pageTitle="Upcoming Events at "+n.listingName,i.pageTitle=e.pageTitle,i.getBusinessItems=function(){s.getEventsByBusiness(n._businessId,"present",e.user._profileId||0).success(function(t){e.debugMode&&console.log("SeeBusinessesItemsCtrl getEventsByBusiness successData: ",t),i.businessesItems="null"!=t?t:[]}).error(function(){i.getBusinessItems()})}}i.getBusinessItems(),e.$on("interacted-with-feed-listing",function(t,o){"Offers"==n.itemType?e.handleListingsToUpdateInteractions(i.offers,o):"UpcomingEvents"==n.itemType&&e.handleListingsToUpdateInteractions(i.businessesItems,o)})},e.checkForAppInit(i)}]),app.controller("SeeTrailerCtrl",["$ionicHistory","$rootScope","$state","$scope","$stateParams","Movies","$sce","$ionicViewSwitcher",function(e,t,n,i,o,r,a,s){i.pageLoading=!0,i.rootScope=t,i.movieTitle=o.movieTitle,i.$on("$ionicView.beforeEnter",function(){t.pageTitle=i.pageTitle?i.pageTitle:t.pageTitle}),i.pageLoad=function(){t.pageTitle=i.movieTitle+" Trailer",i.pageTitle=t.pageTitle;var e=function(){r.getMoviesTrailerLink(o._id).success(function(e){i.movieTrailerLink=a.trustAsResourceUrl(e[0].trailerLink),i.pageLoading=!1}).error(function(t){e()})};e()},t.checkForAppInit(i)}]),app.controller("BookTableCtrl",["$ionicHistory","ionicDatePicker","ionicTimePicker","$rootScope","$state","$scope","$stateParams","TableBooking","$ionicPopup","$ionicViewSwitcher","$timeout","datesService",function(e,t,n,i,o,r,a,s,l,c,d,u){r.rootScope=i,r.listing=[],r.tableFor=2,r.commentAllowed=!1,r.textareaShort=!0,r.name=null,r.email=null,r.comment=null,r.selectedDate1=new Date,r.selectedTime=(new Date).getHours()<18?new Date(648e5):new Date,r.todaysDate=new Date,r.finalDate=new Date,r.days=u.days,r.months=u.months,r.$on("$ionicView.beforeEnter",function(){i.pageTitle=r.pageTitle||i.pageTitle}),r.pageLoad=function(){if(i.pageTitle="Book a Table at "+a.listingName,r.pageTitle=i.pageTitle,r.tableForMax=a.tableForMax,r.commentAllowed=a.commentAllowed,console.log(r.commentAllowed),r.textareaShort=!0,r.phoneIsRequiredForBooking=a.phoneIsRequiredForBooking,r.tableBookingDisallowed=[],r.phoneIsRequiredForBooking&&(null==i.user.phone1||""==i.user.phone1)){r.tableBookingDisallowed.push({reason:"Phone Number Required",note:'<i class="ion-alert-circled"></i>The restaurant required you to provide a phone number to make a booking. Please add a phone number to your Account Details.</b>.'})}r.convertToDate=function(){return r.days[r.selectedDate1.getDay()]+", "+r.selectedDate1.getDate()+" "+r.months[r.selectedDate1.getMonth()]+" "+r.selectedDate1.getFullYear()},r.convertToTime=function(){var e=r.selectedDate1.getDate()==r.selectedDate1.getUTCDate()?0:1;return r.selectedHour=r.selectedTime.getUTCHours()+e<10?"0"+r.selectedTime.getUTCHours()+e:r.selectedTime.getUTCHours()+e,r.selectedMinutes=r.selectedTime.getUTCMinutes()<10?"0"+r.selectedTime.getUTCMinutes():r.selectedTime.getUTCMinutes(),r.selectedHour+":"+r.selectedMinutes},r.dateInputHTML=r.convertToDate(),r.timeInputHTML=r.convertToTime(),r.form={name:"",email:"",comment:""};var e=function(){var e=new Date;return e.getMinutes()<30?60*e.getHours()*60+60*e.getMinutes():60*(e.getHours()-1)*60+60*e.getMinutes()},o=new Date,c=o.getHours()<18?64800:e(),p=function(e){l.show({title:"Past time chosen",template:'<i class="ion-close main-icon"></i><p>The time you selected has already passed.</p>',scope:r,buttons:[{text:"Close",onTap:function(t){e.callback&&d(function(){n.openTimePicker(m)},10)}}]})},g={callback:function(e){r.selectedDate1=new Date(e),r.dateInputHTML=r.convertToDate(),g.inputDate=new Date(e),r.findOutIfRestaurantBookingPossible(),i.debugMode&&console.log("Return value from the datepicker popup is : "+new Date(e))},disabledDates:[new Date(2016,2,16),new Date(2015,3,16),new Date(2015,4,16),new Date(2015,5,16),new Date("Wednesday, August 12, 2015"),new Date("08-16-2016"),new Date(1439676e6)],from:new Date,to:r.finalDate.setDate(r.finalDate.getDate()+30),inputDate:r.selectedDate1,mondayFirst:!0,disableWeekdays:[],closeOnSelect:!0,templateType:"popup"},m={callback:function(e){if(void 0===e)i.debugMode&&console.log("Time not selected");else{var t=new Date,n=r.selectedDate1.toDateString()===t.toDateString(),o=60*t.getHours()*60+60*t.getMinutes();n&&new Date(1e3*e)<new Date(1e3*o)?d(function(){p({callback:"showTimePicker"})},5):(r.selectedTime=new Date(1e3*e),r.timeInputHTML=r.convertToTime(),m.inputTime=r.selectedTime.getUTCMinutes()<30?e:e-3600,r.findOutIfRestaurantBookingPossible()),i.debugMode&&console.log("Selected epoch is : ",m.inputTime,"and the time is ",r.selectedTime.getUTCHours(),"H :",r.selectedTime.getUTCMinutes(),"M")}},inputTime:c,format:12,step:10,setLabel:"Set"};r.updateTableFor=function(e){r.tableFor=1==r.tableFor&&-1==e||99==r.tableFor&&1==e||0!=r.tableForMax&&r.tableForMax==r.tableFor&&1==e?r.tableFor:r.tableFor+=e,r.tableForIsMax=0!=r.tableForMax&&r.tableForMax==r.tableFor||99==r.tableFor},r.openTimePicker=function(){n.openTimePicker(m)},r.openDatePicker=function(){t.openDatePicker(g)},r.findOutIfRestaurantBookingPossible=function(){var e={_businessId:a._id,requestedBookingDate:r.selectedDate1.getFullYear()+"-"+(r.selectedDate1.getMonth()+1)+"-"+r.selectedDate1.getDate(),requestedBookingTime:r.selectedHour+":"+r.selectedMinutes+":00"};s.findOutIfRestaurantBookingPossible(e).success(function(e){if(r.tableBookingDisallowed=[],parseInt(e[0].blockedCount)>0){var t='<i class="ion-alert-circled"></i>The restaurant is not accepting table bookings between the dates of <b>'+u.convertToReadableDate(r,e[0].blockedIntervalStart)+"</b> and <b>"+u.convertToReadableDate(r,e[0].blockedIntervalEnd)+"</b>.";r.tableBookingDisallowed.push({reason:"Blocked",note:t})}else if("0"==e[0].openCount){var t=null!=e[0].openingTime&&null!=e[0].closingTime?'<i class="ion-alert-circled"></i>The restaurant is closed at the time selected. On '+u.days[r.selectedDate1.getDay()]+"'s, the restaurant opens at <b>"+e[0].openingTime.substr(0,e[0].openingTime.length-3)+"</b> and closes at <b>"+e[0].closingTime.substr(0,e[0].closingTime.length-3)+"</b>.":'<i class="ion-alert-circled"></i>The restaurant is closed on the date selected.';r.tableBookingDisallowed.push({reason:"Closed",note:t})}}).error(function(e){})},r.completeTableBooking=function(e,t){r.dateTimeString=r.selectedDate1.getFullYear()+"-"+(r.selectedDate1.getMonth()+1)+"-"+r.selectedDate1.getDate()+" "+r.selectedHour+":"+r.selectedMinutes;var n=(r.dateTimeString+":00").replace(/-/g,"/");if(new Date(n)<new Date)return p({}),!1;console.log(r.form.comment);var o=(i.userLoggedIn&&i.user._profileId,r.commentAllowed?r.form.comment:"");s.createTableBooking(i.user._profileId||0,a._id,e,t,r.tableFor,r.dateTimeString,o).success(function(e){var t={actionFunction:"goToBusinessItem",businessItemType:"RequestedTableBookings",_businessItemId:e._id},n=[e._profileId];i.prepareMessageNotificationFinal(n,"You've received a Table Booking Request.","Table Booking Requested",t),l.show({title:"Table Booking Requested",template:'<i class="ion-checkmark main-icon"></i><p>Your Table Booking has been requested. We\'ll update you once the restaurant has responded.</p>',scope:r,buttons:[{text:"Close",onTap:function(e){i.backButtonFunction()}}]})}).error(function(n){r.completeTableBooking(e,t)})}},i.checkForAppInit(r)}]),app.controller("BookTicketsCtrl",["$ionicHistory","$rootScope","$state","$scope","$stateParams","$ionicPopup","Events","$ionicViewSwitcher","datesService",function(e,t,n,i,o,r,s,l,c){i.rootScope=t,i.listing=[],i.additionalGuests=0,i.maxGuestsPerBooking=9,i.showEventDates=!1,i.bookingAllowed=!0,i.maxGuestListAllowed=null,i.$on("$ionicView.beforeEnter",function(){t.pageTitle=i.pageTitle?i.pageTitle:t.pageTitle}),i.pageLoad=function(){i.updateAdditionalGuests=function(e){i.additionalGuests=!i.bookingAllowed||0==i.additionalGuests&&-1==e||i.additionalGuests==i.maxGuestsPerBooking&&1==e||i.additionalGuests+1==i.maxGuestListAllowed&&1==e?i.additionalGuests:i.additionalGuests+=e},i.getEventDetails=function(){s.getEventDateDetails(o._id,t.user._profileId).success(function(e){if(t.debugMode&&console.log("BookTicketsCtrl getEventDateDetails successData: ",e),t.pageTitle="Book entry at "+e[0].name,i.pageTitle=t.pageTitle,i.listing=e[0],i.listing.guestListMax=null==i.listing.guestListMax?null:parseInt(i.listing.guestListMax),i.listing.guestListCurrentTotal=null==i.listing.guestListCurrentTotal?0:parseInt(i.listing.guestListCurrentTotal),null==i.listing.weekday)i.chosenDate=i.listing.date,i.listing.dateString=i.listing.date.split(" "),i.selectedDate1=new Date(i.listing.dateString[0]),i.dateDisplay=c.convertToDate(i,i.selectedDate1),i.bookingAllowed=!(null!=i.listing._week1DateBooked||null!=i.listing.guestListMax&&i.listing.guestListMax-i.listing.guestListCurrentTotal<1),null!=i.listing.guestListMax&&(i.maxGuestListAllowed=parseInt(i.listing.guestListMax)-parseInt(i.listing.guestListCurrentTotal));else{for(i.listing.guestListWeek2Total=null==i.listing.guestListWeek2Total?0:parseInt(i.listing.guestListWeek2Total),i.listing.guestListWeek3Total=null==i.listing.guestListWeek3Total?0:parseInt(i.listing.guestListWeek3Total),i.listing.guestListWeek4Total=null==i.listing.guestListWeek4Total?0:parseInt(i.listing.guestListWeek4Total),i.listing.guestListWeek5Total=null==i.listing.guestListWeek5Total?0:parseInt(i.listing.guestListWeek5Total),i.listing.guestListWeek6Total=null==i.listing.guestListWeek6Total?0:parseInt(i.listing.guestListWeek6Total),i.listing.guestListWeek7Total=null==i.listing.guestListWeek7Total?0:parseInt(i.listing.guestListWeek7Total),i.listing.guestListWeek8Total=null==i.listing.guestListWeek8Total?0:parseInt(i.listing.guestListWeek8Total),null!=i.listing.guestListMax&&(i.maxGuestListAllowed=i.listing.guestListMax-i.listing.guestListCurrentTotal),i.eventDates=[],i.eventDatesBooked=[],i.eventDates.push([i.listing.week1Date,i.listing.guestListCurrentTotal,i.listing._week1DateBooked]),i.eventDatesBooked[0]=null==i.listing._week1DateBooked?null:i.listing.week1Date.split(" ")[0],i.bookingAllowed=!(null!=i.listing._week1DateBooked||null!=i.listing.guestListMax&&i.listing.guestListMax-i.listing.guestListCurrentTotal<1),i.chosenDate=i.listing.week1Date.split(" ")[0],null!=i.listing.week2Date&&(i.eventDates.push([i.listing.week2Date,i.listing.guestListWeek2Total,i.listing._week2DateBooked]),i.eventDatesBooked[1]=null==i.listing._week2DateBooked?null:i.listing.week2Date.split(" ")[0]),null!=i.listing.week3Date&&(i.eventDates.push([i.listing.week3Date,i.listing.guestListWeek3Total,i.listing._week3DateBooked]),i.eventDatesBooked[2]=null==i.listing._week3DateBooked?null:i.listing.week3Date.split(" ")[0]),null!=i.listing.week4Date&&(i.eventDates.push([i.listing.week4Date,i.listing.guestListWeek4Total,i.listing._week4DateBooked]),i.eventDatesBooked[3]=null==i.listing._week4DateBooked?null:i.listing.week4Date.split(" ")[0]),null!=i.listing.week5Date&&(i.eventDates.push([i.listing.week5Date,i.listing.guestListWeek5Total,i.listing._week5DateBooked]),i.eventDatesBooked[4]=null==i.listing._week5DateBooked?null:i.listing.week5Date.split(" ")[0]),null!=i.listing.week6Date&&(i.eventDates.push([i.listing.week6Date,i.listing.guestListWeek6Total,i.listing._week6DateBooked]),i.eventDatesBooked[5]=null==i.listing._week6DateBooked?null:i.listing.week6Date.split(" ")[0]),null!=i.listing.week7Date&&(i.eventDates.push([i.listing.week7Date,i.listing.guestListWeek7Total,i.listing._week7DateBooked]),i.eventDatesBooked[6]=null==i.listing._week7DateBooked?null:i.listing.week7Date.split(" ")[0]),null!=i.listing.week8Date&&(i.eventDates.push([i.listing.week8Date,i.listing.guestListWeek8Total,i.listing._week8DateBooked]),i.eventDatesBooked[7]=null==i.listing._week8DateBooked?null:i.listing.week8Date.split(" ")[0]),i.eventDatesStrings=[],a=0;a<i.eventDates.length;a++)i.eventDates[a][0]=i.eventDates[a][0].split(" ")[0],i.eventDates[a][3]=new Date(i.eventDates[a][0]),i.eventDates[a][3]=c.days[i.eventDates[a][3].getDay()]+", "+i.eventDates[a][3].getDate()+" "+c.months[i.eventDates[a][3].getMonth()]+" "+i.eventDates[a][3].getFullYear();i.chosenEventDate=i.eventDates[0][3]}}).error(function(){i.getEventDetails()})},i.toggleEventDateVisibility=function(){i.showEventDates=!i.showEventDates},i.selectEventDate=function(e){i.chosenEventDate=e[3],i.chosenDate=e[0],i.showEventDates=!1;var t=0;for(a=0;a<i.eventDates.length;a++)t=i.eventDates[a][0]==e[0]?a:t;i.bookingAllowed=-1==i.eventDatesBooked.indexOf(i.eventDates[t][0])&&i.listing.guestListMax-i.eventDates[t][1]>0,i.chosenEventDate=i.eventDates[t][3],i.maxGuestListAllowed=i.listing.guestListMax-i.eventDates[t][1],i.additionalGuests=i.additionalGuests>i.guestListMax?i.guestListMax:i.additionalGuests},i.completeTicketBooking=function(){t.userLoggedIn&&t.user._profileId;s.createEventEntryBooking(o._id,t.user._profileId||0,i.chosenDate,i.additionalGuests,"Guestlist").success(function(e){if(null==i.listing.weekday)i.maxGuestListAllowed-=i.additionalGuests+1,i.bookingAllowed=!1,i.listing._week1DateBooked=i.listing.relListingId;else for(a=0;a<i.eventDates.length;a++)i.eventDates[a][0]==i.chosenDate&&(i.eventDates[a][1]=i.eventDates[a][1]+1+i.additionalGuests,i.eventDatesBooked[a]=i.eventDates[a][0],i.maxGuestListAllowed-=i.additionalGuests+1);var n="You've received an Event Booking for "+i.chosenDate+"("+i.additionalGuests+" guests)",s={actionFunction:"goToBusinessItem",businessItemType:"OwnEvents",_businessItemId:o._id},l=[e[0]._profileId];t.prepareMessageNotificationFinal(l,n,"Event Entry Booking Received",s),r.show({title:"Guestlist Booking Complete",template:'<i class="ion-checkmark main-icon"></i><p>Your Guestlist Booking for this event has been completed.</p>',scope:i,buttons:[{text:"Close",onTap:function(e){t.backButtonFunction()}}]})}).error(function(e){i.completeTicketBooking()})},i.getEventDetails()},t.checkForAppInit(i)}]),app.controller("SeeMenuCtrl",["$ionicHistory","$rootScope","$state","$scope","$stateParams","MenuItems","Listings","$ionicViewSwitcher",function(e,t,n,i,o,r,s,l){i.rootScope=t,i.pageLoading=!0,i.$on("$ionicView.beforeEnter",function(){t.pageTitle=i.pageTitle?i.pageTitle:t.pageTitle}),i.pageLoad=function(){i.phone1=null,i.menuItemCategories=[],i.menuItemCategoriesAdded=[],i.menuItems=[],i.menuItemsAdded=[],i.currentOrderMethod="Collection",i.currentOrderReadyToSubmit=!1,i._listingId=o._listingId,i.listingType=o.listingType,i._businessId=o._businessId,i._menuTypeId=o._menuTypeId,i.listingName=o.listingName;var e=1==i._menuTypeId?"Takeaway":"A la Carte";t.pageTitle=i.listingName+" Menu ("+e+")",i.pageTitle=t.pageTitle,t.finalMenuOrderObjCleanse=function(e){function n(){var n=0;if(t.currentSavedFoodOrders){for(a=0;a<t.currentSavedFoodOrders.length;a++)if(t.currentSavedFoodOrders[a]._businessId==o._businessId)for(b=0;b<t.currentSavedFoodOrders[a].menuItems.length;b++)for(c=0;c<t.currentSavedFoodOrders[a].menuItems[b].item.itemsAddedToBasket.length;c++)if(t.currentSavedFoodOrders[a].menuItems[b].item.itemsAddedToBasket[c].specificItem.length>0){var i=t.currentSavedFoodOrders[a].menuItems[b].item.itemsAddedToBasket[c].specificItem.length;n+=t.currentSavedFoodOrders[a].menuItems[b].item.itemsAddedToBasket[c].quantity*parseFloat(t.currentSavedFoodOrders[a].menuItems[b].item.itemsAddedToBasket[c].specificItem[i-1].finalPrice)}else n+=t.currentSavedFoodOrders[a].menuItems[b].item.itemsAddedToBasket[c].quantity*parseFloat(t.currentSavedFoodOrders[a].menuItems[b].item.itemsAddedToBasket[c].finalPrice);t.currentOrderTrayTotal=n.formatMoney(2),e.currentOrderReadyToSubmit=n>parseFloat(10)||"Collection"==e.currentOrderMethod&&n>parseFloat(0)}}function i(){for(a=s.length-1;a>0;a--)e.thisTakeawaysOrderObject.splice(s[a],0),1==a&&n()}function r(t){0==e.thisTakeawaysOrderObject.menuItems[t].quantity&&s.push(t),t<e.thisTakeawaysOrderObject.menuItems-1?r(t+1):s.length>0?i():n()}var s=[];e.thisTakeawaysOrderObject&&e.thisTakeawaysOrderObject.menuItems?r(0):(t.debugMode&&console.log("finalMenuOrderObjCleansed: ",t.finalMenuOrderObjCleanse),n())},i.sortMenuItems=function(){var e=function(e,t){if(i.menuItems[e].itemsAddedToBasket)for(ind=0;ind<i.menuItems[e].itemsAddedToBasket.length;ind++)i.menuItems[e].itemsAddedToBasket[ind].specificItem.length,i.menuItemCategories[t].count+=i.menuItems[e].itemsAddedToBasket[ind].quantity};for(z=0;z<i.menuItems.length;z++){if(-1==i.menuItemCategoriesAdded.indexOf(i.menuItems[z]._menuItemCategoryId)){i.menuItemCategories.push({name:i.menuItems[z].menuItemCategoryName,_id:i.menuItems[z]._menuItemCategoryId,count:0});var t=i.menuItemCategories.length-1;e(z,t),i.menuItemCategoriesAdded.push(i.menuItems[z]._menuItemCategoryId)}else e(z,i.menuItemCategoriesAdded.indexOf(i.menuItems[z]._menuItemCategoryId));z==i.menuItems.length-1&&(i.pageLoading=!1)}};var l=function(){r.getMenuItems(o._businessId,0,o._menuTypeId).success(function(e){for(i.menuItemCategories=[],i.menuItemCategoriesAdded=[],i.menuItems=[],i.menuItemsAdded=[],a=0;a<e.length;a++){if(tagsObj={tagName:e[a].tagName,iconClass:e[a].iconClass},-1==i.menuItemsAdded.indexOf(e[a]._id)){for(t.currentSavedFoodOrders=t.currentSavedFoodOrders||[],b=0;b<t.currentSavedFoodOrders.length;b++)if(t.currentSavedFoodOrders[b]._businessId==o._businessId){var n=t.currentSavedFoodOrders[b];for(c=0;c<n.menuItems.length;c++)n.menuItems[c].item._id==e[a]._id&&(e[a].itemsAddedToBasket=n.menuItems[c].item.itemsAddedToBasket)}i.menuItems.push(e[a]),i.menuItemsAdded.push(e[a]._id)}a==e.length-1&&i.sortMenuItems()}}).error(function(){l()})},d=function(){var e="_listingId="+o._businessId+"&listingType=Business";s.getPhoneNumberForListing(e).success(function(e){i.phone1=null!=e?e[0].phone1:null,console.log(i.phone1)}).error(function(e){d()})};i.changeOrderMethod=function(e){i.currentOrderReadyToSubmit=parseFloat(t.currentOrderTrayTotal)>parseFloat(10)||"Collection"==e&&parseFloat(t.currentOrderTrayTotal)>parseFloat(0),i.currentOrderMethod=e},i.completeOrder=function(){i.currentOrderReadyToSubmit&&n.go("app.completeTakeawayOrder",{_businessId:o._businessId})},l(),t.callingEnabled&&1==i._menuTypeId&&d(),t.finalMenuOrderObjCleanse(i)},t.checkForAppInit(i),t.$on("menuItem-order-changed",function(e,n){t.finalMenuOrderObjCleanse(i),getMenuItems()})}]),app.controller("SeeMenuItemsCtrl",["$ionicHistory","$rootScope","$state","$scope","$stateParams","MenuItems","$ionicViewSwitcher",function(e,t,n,i,o,r,s){i.rootScope=t,i.pageLoading=!0,i.showExtraOptions=!1,i.menuItems=[],i.normalMenuItems=[],i.categorizedMenuItems=[],i.menuItemsAdded=[],i.currentExtraOptions=[],i.currentExtraOptionsStage=1,i.currentExtraOptionsComplete=!1,i.$on("$ionicView.beforeEnter",function(){t.pageTitle=i.pageTitle?i.pageTitle:t.pageTitle,i.windowHeight=window.innerHeight-90}),i.pageLoad=function(){var e=function(){r.getMenuItems(o._businessId,o._menuItemCategoryId,o._menuTypeId).success(function(e){if("null"==e)return t.debugMode&&console.log("getMenuItems in SeeBusinessMenuItems results are null: "),!1;var n=1==o._menuTypeId?"Takeaway":"A la Carte";t.pageTitle=o.listingName+" "+e[0].menuItemCategoryName+" ("+n+")",i.pageTitle=t.pageTitle;var r=function(){for(a=0;a<i.menuItems.length;a++){if(null!=i.menuItems[a].menuItemSubCategoryName){var t=!1;for(b=0;b<i.categorizedMenuItems.length;b++)i.categorizedMenuItems[b].subCatName==i.menuItems[a].menuItemSubCategoryName&&(i.categorizedMenuItems[b].items.push(i.menuItems[a]),t=!0);t||i.categorizedMenuItems.push({subCatName:e[a].menuItemSubCategoryName,items:[i.menuItems[a]]})}else i.normalMenuItems.push(i.menuItems[a]);a==i.menuItems.length-1&&window.setTimeout(function(){i.pageLoading=!1},150)}};for(i.menuItemCategoryName=e[0].menuItemCategoryName,a=0;a<e.length;a++){var s={tagName:e[a].tagName,iconClass:e[a].iconClass};if(-1==i.menuItemsAdded.indexOf(e[a]._id)){for(e[a].tags=[s],t.currentSavedFoodOrders=t.currentSavedFoodOrders||[],b=0;b<t.currentSavedFoodOrders.length;b++)if(t.currentSavedFoodOrders[b]._businessId==o._businessId){var l=t.currentSavedFoodOrders[b];newOrder=!1;for(c=0;c<l.menuItems.length;c++)l.menuItems[c].item._id==e[a]._id&&(e[a].itemsAddedToBasket=l.menuItems[c].item.itemsAddedToBasket)}i.menuItems.push(e[a]),i.menuItemsAdded.push(e[a]._id)}else for(b=0;b<i.menuItems.length;b++)i.menuItems[b]._id==e[a]._id&&i.menuItems[b].tags.push(s);a==e.length-1&&r()}}).error(function(){e()})},n=function(e,t){var n=!1;if("[object Array]"===Object.prototype.toString.call(e.chosenOption)){var i=e.chosenOption.length,o=t.chosenOption.length,r=0;if(i==o){for(a=0;a<i;a++)e.chosenOption[a].name==t.chosenOption[a].name&&(e.quantityRelevant&&e.chosenOption[a].quantity==t.chosenOption[a].quantity?r+=1:e.quantityRelevant||(r+=1));r==i&&(n=!0)}}else e._id==t._id&&e.chosenOption.name==t.chosenOption.name&&(e.quantityRelevant&&e.chosenOption.quantity==t.chosenOption.quantity?returnbool=!0:e.quantityRelevant||(n=!0));return n};i.deleteMenuItem=function(e,r){function s(e){e.quantity>0&&(e.quantity-=1),t.$broadcast("menuItem-order-changed"),window.setTimeout(200,function(){t.finalMenuOrderObjCleanse(i)}),r.showMenuItemDeleteOptions=!1}function l(e,t,i,o){n(e.item.itemsAddedToBasket[t].specificItem[i],r.specificItem[i])&&(o+=1),i==e.item.itemsAddedToBasket[t].specificItem.length-1&&o==e.item.itemsAddedToBasket[t].specificItem.length?s(e):i==e.item.itemsAddedToBasket[t].specificItem.length-1&&o!=e.item.itemsAddedToBasket[t].specificItem.length&&t<e.item.itemsAddedToBasket.length-1?c(e,t+1):i<e.item.itemsAddedToBasket[t].specificItem.length-1&&l(e,t,i+1,o)}function c(e,t){e.item.itemsAddedToBasket[t].specificItem.length>0?l(e,t,0,0):s(e)}function d(n,i){t.currentSavedFoodOrders[n].menuItems[i].item._id==e._id?(f=t.currentSavedFoodOrders[n].menuItems[i],relFoodOrderI=i,relMenuItemI=n,c(f,0)):i<t.currentSavedFoodOrders[n].menuItems.length-1&&d(n,i+1)}function u(e){t.currentSavedFoodOrders[e]._businessId==o._businessId?d(e,0):e<t.currentSavedFoodOrders.length-1&&u(e+1)}function p(e,t,o,a,s){var s=n(r.specificItem[o],i.menuItems[e].itemsAddedToBasket[t].specificItem[a]);a==i.menuItems[e].itemsAddedToBasket[t].specificItem.length-1&&o==r.specificItem.length-1?(s&&(i.menuItems[e].itemsAddedToBasket[t].quantity-=1,r.showMenuItemDeleteOptions=!1),o==r.specificItem.length-1&&0==i.menuItems[e].itemsAddedToBasket[t].quantity&&i.menuItems[e].itemsAddedToBasket.splice(t,1)):o<r.specificItem.length-1?g(e,t,o+1,a):a<i.menuItems[e].itemsAddedToBasket[t].specificItem.length-1&&p(e,t,o,a+1,s)}function g(e,t,n,i){p(e,t,n,i,!0)}function m(e,t){i.menuItems[e].itemsAddedToBasket[t].specificItem.length>0?g(e,t,0,0):i.menuItems[e].itemsAddedToBasket[t].quantity>1?i.menuItems[e].itemsAddedToBasket[t].quantity-=1:i.menuItems[e].itemsAddedToBasket.splice(t,1)}if(1==r.showMenuItemOptions){var f;for(u(0),a=0;a<i.menuItems.length;a++)i.menuItems[a]._id==e._id&&m(a,0)}else r.showMenuItemOptions=!0},i.completeAddingItemToOrder=function(){function e(e,t,n,o){if(!n&&c?i.menuItems[e].itemsAddedToBasket.push({quantity:1,specificItem:i.currentItemBeingOrdered.specificItem,finalPrice:i.currentItemBeingOrdered.Price}):n||c||!i.currentItemBeingAddedIsNew?n||c||i.currentItemBeingAddedIsNew||(o=!0):i.menuItems[e].itemsAddedToBasket.push({quantity:1,specificItem:i.currentItemBeingOrdered.specificItem}),!c&&!i.currentItemBeingAddedIsNew){var r=null;for(d=0;d<i.menuItems[e].itemsAddedToBasket.length;d++)r=i.menuItems[e].itemsAddedToBasket[d].isBeingEdited?d:r;null==r||o||i.menuItems[e].itemsAddedToBasket.splice(r,1)}}function r(t,o,a,l,c,d){var u=function(){l=!0,i.currentItemBeingAddedIsNew?i.menuItems[t].itemsAddedToBasket[o].quantity+=1:i.menuItems[t].itemsAddedToBasket[o].quantity+=i.currentItemBeingOrderedQuantity};n(i.menuItems[t].itemsAddedToBasket[o].specificItem[a],i.currentItemBeingOrdered.specificItem[a])&&!i.menuItems[t].itemsAddedToBasket[o].isBeingEdited&&(d+=1),d==i.menuItems[t].itemsAddedToBasket[o].specificItem.length&&u(),a==i.menuItems[t].itemsAddedToBasket[o].specificItem.length-1&&o<i.menuItems[t].itemsAddedToBasket.length-1?s(t,o+1,l,c):a==i.menuItems[t].itemsAddedToBasket[o].specificItem.length-1&&o==i.menuItems[t].itemsAddedToBasket.length-1?e(t,o,l,c):a<i.menuItems[t].itemsAddedToBasket[o].specificItem.length-1&&r(t,o,a+1,l,c,d)}function s(n,o,a,l){0==i.menuItems[n].itemsAddedToBasket[o].specificItem.length&&c?(i.menuItems[n].itemsAddedToBasket[o].quantity+=1,a=!0,e(n,o,a,l)):c||(i.menuItems[n].itemsAddedToBasket[o].specificItem.length==i.currentItemBeingOrdered.specificItem.length?r(n,o,0,a,l,0):o<i.menuItems[n].itemsAddedToBasket.length?s(n,o+1,a,l):e(n,o,a,l),t.debugMode&&console.log("ORDERS",t.currentSavedFoodOrders[0]))}function l(t,n,o){i.menuItems[t]._id==i.currentItemBeingOrdered._id?(i.menuItems[t].itemsAddedToBasket=i.menuItems[t].itemsAddedToBasket||[],i.menuItems[t].itemsAddedToBasket.length>0?s(t,0,n,o):e(t,0,n,o)):t<i.menuItems.length&&l(t+1)}if(!i.currentExtraOptionsComplete)return!1;var c,u=!0;for(i.showExtraOptions=!1,i.currentItemBeingOrdered.oldSpecificItem=i.currentItemBeingAddedIsNew?null:i.currentItemBeingOrdered.specificItem,i.currentItemBeingOrdered.specificItem=i.currentExtraOptions,c=0==i.currentItemBeingOrdered.specificItem.length,t.currentSavedFoodOrders=t.currentSavedFoodOrders||[],i.currentItemBeingOrdered.showMenuItemOptions=!1,i.currentItemBeingOrdered.menuItemOptions="none",i.currentItemBeingOrderedQuantity=i.currentItemBeingOrdered.quantity,i.currentExtraOptionsChosenOption&&(i.currentExtraOptionsChosenOption.finalPrice=i.currentExtraOptionsPrice),a=0;a<i.currentItemBeingOrdered.specificItem.length;a++)if(null!=i.currentItemBeingOrdered.specificItem[a].optionChoices)for(i.currentItemBeingOrdered.specificItem[a].chosenOption="Multi"==i.currentItemBeingOrdered.specificItem[a].type?[]:i.currentItemBeingOrdered.specificItem[a].chosenOption,b=0;b<i.currentItemBeingOrdered.specificItem[a].optionChoices.length;b++)i.currentItemBeingOrdered.specificItem[a].optionChoices[b].preselected&&(i.currentItemBeingOrdered.specificItem[a].optionChoices[b].selected=!0,i.currentItemBeingOrdered.specificItem[a].selected=!0,"Only One"==i.currentItemBeingOrdered.specificItem[a].type?i.currentItemBeingOrdered.specificItem[a].chosenOption=i.currentItemBeingOrdered.specificItem[a].optionChoices[b]:"Multi"==i.currentItemBeingOrdered.specificItem[a].type&&(i.currentItemBeingOrdered.specificItem[a].chosenOption=isArray(i.currentItemBeingOrdered.specificItem[a].chosenOption)?i.currentItemBeingOrdered.specificItem[a].chosenOption:[],i.currentItemBeingOrdered.specificItem[a].chosenOption.push(i.currentItemBeingOrdered.specificItem[a].optionChoices[b])));for(a=0;a<t.currentSavedFoodOrders.length;a++)if(t.currentSavedFoodOrders[a]._businessId==o._businessId){u=!1;var p=!1;for(b=0;b<t.currentSavedFoodOrders[a].menuItems.length;b++)t.currentSavedFoodOrders[a].menuItems[b].item._id==i.currentItemBeingOrdered._id&&(i.currentItemBeingAddedIsNew&&(t.currentSavedFoodOrders[a].menuItems[b].quantity+=1),p=!0);p||t.currentSavedFoodOrders[a].menuItems.push({quantity:1,item:i.currentItemBeingOrdered})}u&&(t.currentSavedFoodOrders.push({_businessId:o._businessId,menuItems:[{quantity:1,item:i.currentItemBeingOrdered}]}),i.thisTakeawaysOrderObject=t.currentSavedFoodOrders[0]),l(0,!1,!1),window.setTimeout(function(){for(a=0;a<i.currentItemBeingOrdered.specificItem.length;a++)i.currentItemBeingOrdered.specificItem[a].optionChoices=null;i.currentExtraOptions=[],i.currentExtraOptionsStage=1},300),t.$broadcast("menuItem-order-changed"),t.finalMenuOrderObjCleanse(i),t.debugMode&&(console.log(t.currentSavedFoodOrders),console.log(i.menuItems)),i.currentItemBeingOrdered.isBeingEdited=!1},i.addMenuItemToOrder=function(e){if(i.currentItemBeingAddedIsNew=!0,i.currentItemBeingOrdered=e,null==e._menuExtraOptionId)i.currentItemBeingOrdered.optionChoices=[],i.currentItemBeingOrdered.finalPrice=e.Price,i.currentExtraOptionsComplete=!0,i.completeAddingItemToOrder();else{t.appLoading=!0,i.currentExtraOptions=[],i.currentExtraOptionsStage=1,i.currentExtraOptionsComplete=!1,i.currentExtraOptionsPrice=e.Price;var n=function(){r.getMenuItemsExtraOptions(o._businessId,e._id).success(function(e){var n=[];for(t.debugMode&&console.log(e),a=0;a<e.length;a++){if(-1==n.indexOf(e[a]._menuExtraOptionId))i.currentExtraOptions.push({index:i.currentExtraOptions.length,_id:e[a]._menuExtraOptionId,name:e[a].menuExtraOptionName,extraChargeIsPerUnit:"1"==e[a].extraChargeIsPerUnit,type:e[a].Type,priceRelevant:"1"==e[a].PriceRelevant,quantityRelevant:"1"==e[a].QuantityRelevant,selected:!1,preselected:!1,optionChoices:[{_id:e[a]._id,name:e[a].Name,extraPrice:null==e[a].ExtraPrice?null:parseFloat(e[a].ExtraPrice).formatMoney(2),totalExtraPrice:null==e[a].totalExtraPrice?null:parseFloat(e[a].totalExtraPrice).formatMoney(2),selected:!1,preselected:!1}]}),n.push(e[a]._menuExtraOptionId);else for(b=0;b<i.currentExtraOptions.length;b++)i.currentExtraOptions[b]._id==e[a]._menuExtraOptionId&&i.currentExtraOptions[b].optionChoices.push({_id:e[a]._id,name:e[a].Name,extraPrice:null==e[a].ExtraPrice?null:parseFloat(e[a].ExtraPrice).formatMoney(2),totalExtraPrice:null==e[a].totalExtraPrice?null:parseFloat(e[a].totalExtraPrice).formatMoney(2),selected:!1,preselected:!1});a==e.length-1&&(t.appLoading=!1)}i.showExtraOptions=!0}).error(function(){n()})};n()}},i.changeMenuItemOptions=function(e,n){t.appLoading=!0,i.currentItemBeingAddedIsNew=!1,i.currentExtraOptionsPrice=parseFloat(n.specificItem[n.specificItem.length-1].finalPrice),i.currentExtraOptionsPrice=i.currentExtraOptionsPrice.formatMoney(2),n.isBeingEdited=!0,i.currentItemBeingOrdered=n,i.currentItemBeingOrdered._id=e._id,i.currentExtraOptions=[],i.currentExtraOptionsComplete=!1;var s=function(){r.getMenuItemsExtraOptions(o._businessId,e._id).success(function(e){var o=[];for(a=0;a<e.length;a++){if(-1==o.indexOf(e[a]._menuExtraOptionId)){var r=i.currentExtraOptions.length,s=!1;if(isArray(n.specificItem[r].chosenOption))for(z=0;z<n.specificItem[r].chosenOption.length;z++)s=n.specificItem[r].chosenOption[z]._id==e[a]._id||s;else s=n.specificItem[r].chosenOption._id==e[a]._id||s;i.currentExtraOptions.push({index:r,_id:e[a]._menuExtraOptionId,name:e[a].menuExtraOptionName,extraChargeIsPerUnit:"1"==e[a].extraChargeIsPerUnit,type:e[a].Type,priceRelevant:"1"==e[a].PriceRelevant,quantityRelevant:"1"==e[a].QuantityRelevant,selected:!0,preselected:!0,optionChoices:[{_id:e[a]._id,name:e[a].Name,extraPrice:null==e[a].ExtraPrice?null:parseFloat(e[a].ExtraPrice).formatMoney(2),totalExtraPrice:null==e[a].totalExtraPrice?null:parseFloat(e[a].totalExtraPrice).formatMoney(2),selected:s,preselected:s}],chosenOption:n.specificItem[r].chosenOption}),o.push(e[a]._menuExtraOptionId)}else for(b=0;b<i.currentExtraOptions.length;b++)if(i.currentExtraOptions[b]._id==e[a]._menuExtraOptionId){var s=!1;if(isArray(n.specificItem[b].chosenOption))for(z=0;z<n.specificItem[b].chosenOption.length;z++)s=n.specificItem[b].chosenOption[z]._id==e[a]._id||s;else s=n.specificItem[b].chosenOption._id==e[a]._id||s;i.currentExtraOptions[b].optionChoices.push({_id:e[a]._id,name:e[a].Name,extraPrice:null==e[a].ExtraPrice?null:parseFloat(e[a].ExtraPrice).formatMoney(2),totalExtraPrice:null==e[a].totalExtraPrice?null:parseFloat(e[a].totalExtraPrice).formatMoney(2),selected:s,preselected:s})}a==e.length-1&&(i.currentExtraOptionsComplete=!0,t.appLoading=!1)}i.showExtraOptions=!0}).error(function(){s()})};s()},i.addItemOrConfirm=function(e,n){n.showMenuItemOptions&&"Add"==n.menuItemOptions?(n.quantity+=1,n.showMenuItemOptions=!1,n.menuItemOptions="none",t.$broadcast("menuItem-order-changed"),t.finalMenuOrderObjCleanse(i)):n.showMenuItemOptions&&"Delete"==n.menuItemOptions?(i.deleteMenuItem(e,n),n.showMenuItemOptions=!1,n.menuItemOptions="none",t.$broadcast("menuItem-order-changed"),t.finalMenuOrderObjCleanse(i)):(n.showMenuItemOptions=!0,n.menuItemOptions="Add")},i.deleteItemOrCancel=function(e,t){t.showMenuItemOptions?(t.showMenuItemOptions=!1,t.menuItemOptions="none"):(t.showMenuItemOptions=!0,t.menuItemOptions="Delete")},i.closeExtraOptions=function(){i.showExtraOptions=!1,i.currentExtraOptions=[],i.currentExtraOptionsStage=1},i.selectOptionNext=function(e){e.preselected=!e.preselected,i.currentExtraOptionsStage+=1},i.selectOptionChoice=function(e,t){if(null==t)return e.preselected=!1,!1;if("Only One"==e.type){if(t.preselected=!t.preselected,e.preselected=!e.preselected,i.currentExtraOptionsChosenOption=e,e.preselected){var n=!0;for(a=0;a<e.optionChoices.length;a++)e.preselected||(n=!1);n&&(i.currentExtraOptionsComplete=!0)}else i.currentExtraOptionsComplete=!1;i.currentExtraOptionsStage+=1}else"Multi"==e.type&&(t.preselected=!t.preselected,i.currentExtraOptionsChosenOption=e);e.priceRelevant&&void 0!==t.extraPrice&&null!=t.extraPrice&&e.preselected?(i.currentExtraOptionsPrice=parseFloat(i.currentExtraOptionsPrice)+parseFloat(t.extraPrice),i.currentExtraOptionsPrice=i.currentExtraOptionsPrice.formatMoney(2)):e.priceRelevant&&void 0!==t.extraPrice&&null!=t.extraPrice&&!e.preselected&&(i.currentExtraOptionsPrice=parseFloat(i.currentExtraOptionsPrice)-parseFloat(t.extraPrice),i.currentExtraOptionsPrice=i.currentExtraOptionsPrice.formatMoney(2))},e()},t.checkForAppInit(i)}]),app.controller("SeeBusinessMenuItemsCtrl",["$ionicHistory","$rootScope","$state","$scope","$stateParams","MenuItems","$ionicViewSwitcher",function(e,t,n,i,o,r,s){i.$on("$ionicView.enter",function(){var e=1==o._menuTypeId?"BusinessTakeawayMenuItemCats":"BusinessCarteMenuItemCats";t.currentTopRightState="app.addBusinessItem",t.topRightButtonFunction=function(){n.go("app.addBusinessItem",{itemType:e,_secondaryItemTypeId:o._menuItemCategoryId})}}),i.rootScope=t,i.itemType="OwnMenuItems",i.pageLoad=function(){i.nextPageFunction=function(e){n.go("app.businessItem",{_id:e._id,itemType:i.itemType})},i.showExtraOptions=!1,i.currentExtraOptions=[],i.currentExtraOptionsStage=1,i.currentExtraOptionsComplete=!1,i.getMenuItems=function(){i.menuItems=[],i.normalMenuItems=[],i.categorizedMenuItems=[],i.menuItemsAdded=[],r.getMenuItems(o._businessId,o._menuItemCategoryId,o._menuTypeId).success(function(e){if("null"==e)return t.debugMode&&console.log("getMenuItems in SeeBusinessMenuItems results: ",e),!1;for(i.menuItemCategoryName=e[0].menuItemCategoryName,a=0;a<e.length;a++){var n={tagName:e[a].tagName,iconClass:e[a].iconClass};if(-1==i.menuItemsAdded.indexOf(e[a]._id)){for(e[a].tags=[n],t.currentSavedFoodOrders=t.currentSavedFoodOrders||[],b=0;b<t.currentSavedFoodOrders.length;b++)if(t.currentSavedFoodOrders[b]._businessId==o._businessId){var r=t.currentSavedFoodOrders[b];newOrder=!1;for(c=0;c<r.menuItems.length;c++)r.menuItems[c].item._id==e[a]._id&&(e[a].itemsAddedToBasket=r.menuItems[c].item.itemsAddedToBasket)}i.menuItems.push(e[a]),i.menuItemsAdded.push(e[a]._id)}else for(b=0;b<i.menuItems.length;b++)i.menuItems[b]._id==e[a]._id&&i.menuItems[b].tags.push(n)}for(a=0;a<i.menuItems.length;a++)if(null!=i.menuItems[a].menuItemSubCategoryName){var s=!1;for(b=0;b<i.categorizedMenuItems.length;b++)i.categorizedMenuItems[b].subCatName==i.menuItems[a].menuItemSubCategoryName&&(i.categorizedMenuItems[b].items.push(i.menuItems[a]),s=!0);s||i.categorizedMenuItems.push({subCatName:e[a].menuItemSubCategoryName,items:[i.menuItems[a]]})}else i.normalMenuItems.push(i.menuItems[a]);t.debugMode&&(console.log("po",i.normalMenuItems),console.log("po",i.categorizedMenuItems))}).error(function(){i.getMenuItems()})},i.getMenuItems()},t.checkForAppInit(i),t.$on("menu-items-changed",function(e,t){i.getMenuItems()})}]),app.controller("CompleteTakeawayOrderCtrl",["$ionicHistory","$rootScope","$state","$scope","$stateParams","MenuItems","$ionicViewSwitcher",function(e,t,n,i,o,r,a){i.rootScope=t,i._businessId=o._businessId,i.showEnterAddressPanel=!1,i.menuItemsOrdered=[],i.pageLoad=function(){for(t.currentSavedFoodOrders=t.currentSavedFoodOrders||[],b=0;b<t.currentSavedFoodOrders.length;b++)if(t.currentSavedFoodOrders[b]._businessId==o._businessId){for(i.currentTakeawaysOrderObject=t.currentSavedFoodOrders[b],c=0;c<t.currentSavedFoodOrders[b].menuItems.length;c++)if(t.currentSavedFoodOrders[b].menuItems[c].item.specificItem.length>0)for(t.currentSavedFoodOrders[b].menuItems[c].quantity=0,t.currentSavedFoodOrders[b].menuItems[c].item.finalPrice=0,d=0;d<t.currentSavedFoodOrders[b].menuItems[c].item.itemsAddedToBasket.length;d++){t.currentSavedFoodOrders[b].menuItems[c].quantity+=t.currentSavedFoodOrders[b].menuItems[c].item.itemsAddedToBasket[d].quantity;var e=t.currentSavedFoodOrders[b].menuItems[c].item.itemsAddedToBasket[d].specificItem.length;t.currentSavedFoodOrders[b].menuItems[c].item.finalPrice+=parseFloat(t.currentSavedFoodOrders[b].menuItems[c].item.itemsAddedToBasket[d].specificItem[e-1].finalPrice)*t.currentSavedFoodOrders[b].menuItems[c].item.itemsAddedToBasket[d].quantity}for(c=0;c<t.currentSavedFoodOrders[b].menuItems.length;c++)0==t.currentSavedFoodOrders[b].menuItems[c].quantity&&t.currentSavedFoodOrders[b].menuItems.splice(c,1);i.menuItemsOrdered=t.currentSavedFoodOrders[b].menuItems}var n=function(){var e=t.userLoggedIn?t.user._id:null;r.createOrder(e,i._businessId,i.currentTakeawaysOrderObject).success(function(e){i.showEnterPaymentDetailsPanel=!1}).error(function(){n()})};i.enterPaymentInfo=function(e,t,o,r){i.currentTakeawaysOrderObject.userObject.cardNumber=t,i.currentTakeawaysOrderObject.userObject.expiryDate=t,i.currentTakeawaysOrderObject.userObject.startDate=o,i.currentTakeawaysOrderObject.userObject.nameOnCard=r,i.showEnterAddressPanel=!1,n()},i.enterUserDetails=function(e,t,n,o,r,a){i.showEnterPaymentDetailsPanel=!0,i.currentTakeawaysOrderObject.userObject={},i.currentTakeawaysOrderObject.userObject.name=e,i.currentTakeawaysOrderObject.userObject.email=t,i.currentTakeawaysOrderObject.userObject.phone=n,i.currentTakeawaysOrderObject.userObject.addressLine1=o,i.currentTakeawaysOrderObject.userObject.addressLine2=r,i.currentTakeawaysOrderObject.userObject.postCode=a},i.submitOrder=function(){t.userLoggedIn?n():i.showEnterAddressPanel=!0}},t.checkForAppInit(i)}]),app.controller("MoreCtrl",["$rootScope","$state","$scope","$ionicConfig","$ionicPopup","$ionicScrollDelegate",function(e,t,n,i,o,r){e.hideSearch=!0,n.rootScope=e,n.pageLoad=function(){},e.checkForAppInit(n)}]),app.controller("ExternalApiCtrl",["$rootScope","$state","$scope","$stateParams","$ionicConfig","$ionicPopup","$ionicScrollDelegate",function(e,t,n,i,o,r,a){e.hideSearch=!0,e.externalView=!0,n.rootScope=e,n.pageLoad=function(){n.format=i.format,n.isLightColourScheme="light"==i.colorScheme,n.widgetColourScheme=i.colorScheme+"-widget"},e.checkForAppInit(n)}]),app.controller("OffersCtrl",["$rootScope","$state","$stateParams","$scope","$ionicConfig","$ionicScrollDelegate","Categories","Places","Offers","datesService","$timeout",function(e,t,n,i,o,r,s,l,u,p,g){i.rootScope=e,i.currentSearchTown=null,i.showTownSelect=!1,i.pageLoading=!0,i.windowWidth=window.innerWidth,i.pageLoad=function(){i.sortCategories=function(){var t=e.userLoggedIn?e.user._profileId:0;u.getOffersByTownId(e.currentSearchTown._id,t,"present").success(function(t){e.debugModeLog({msg:"OffersCtrl getOffersByTownId successData",data:t});var n=[],o=[],r=[],s=[];t=t||[],i.offers=t;var l=function(){var e=function(){l&&u&&(i.pageLoading=!1)},l=!1,u=!1;if(0==n.length)l=!0,e();else for(a=0;a<n.length;a++)for(r[a]=[],r[a].name=n[a],r[a].offers=[],b=0;b<t.length;b++){var p=t[b].offerSubCategoryName;t[b].description.length>110&&(t[b].description=t[b].description.substr(0,110)+"..."),"today"==t[b].todayOrFuture&&p==n[a]&&(t[b].index=r[a].offers.length+1,r[a].offers.push(t[b])),b==t.length-1&&(i.todaysCategories=r,l=!0,e())}if(0==o.length)u=!0,e();else for(c=0;c<o.length;c++)for(s[c]=[],s[c].name=o[c],s[c].offers=[],d=0;d<t.length;d++){var p=t[d].offerSubCategoryName;"future"==t[d].todayOrFuture&&p==o[c]&&(t[d].index=s[c].offers.length+1,s[c].offers.push(t[d])),d==t.length-1&&(i.futureCategories=s,u=!0,e())}};for(z=0;z<t.length;z++){var u=t[z].offerSubCategoryName;"today"==t[z].todayOrFuture&&-1==n.indexOf(u)?(n.push(u),r.showFull=!1):"future"==t[z].todayOrFuture&&-1==o.indexOf(u)&&(o.push(u),s.showFull=!1),t[z].startDateTimeString=p.convertToDate(i,new Date(t[z].officialStartDate.split(" ")[0])),t[z].endDateTimeString=p.convertToDate(i,new Date(t[z].officialEndDate.split(" ")[0])),z==t.length-1&&l()}}).error(function(){i.sortCategories()})},i.sortCategories(),i.toggleCategoryShow=function(e){e.showFull=!e.showFull,g(function(){r.resize()},500)},i.goToOffer=function(e){t.go("app.offers.offerDetail",{_id:e._id})},i.pinListingToMsg=function(t,n){e.pinListingToMessage(n,t,t.listingType,null,i)}},e.checkForAppInit(i),e.$on("interacted-with-feed-listing",function(t,n){e.handleListingsToUpdateInteractions(i.offers,n)})}]),app.controller("OfferDetailCtrl",["$rootScope","$state","$stateParams","$scope","Categories","Places","Offers","Messages","$ionicViewSwitcher","datesService",function(e,t,n,i,o,r,a,s,l,c){i.rootScope=e,i.currentSearchTown=null,i.showTownSelect=!1,i._id=n._id,i.pageLoading=!0,i.$on("$ionicView.beforeEnter",function(){e.pageTitle=i.pageTitle?i.pageTitle:e.pageTitle}),i.pageLoad=function(){i.getOffer=function(){var t=e.userLoggedIn?e.user._profileId:0;a.getOffer(i._id,t).success(function(t){e.debugModeLog({msg:"OfferDetailCtrl getOffer successData",data:t}),null!=t?(i.offer=t[0],i.offer.startDateTimeString=c.convertToDate(i,new Date(i.offer.relevantStartDateTime.split(" ")[0])),i.offer.endDateTimeString=c.convertToDate(i,new Date(i.offer.relevantEndDateTime.split(" ")[0])),e.pageTitle=i.offer.title,i.pageTitle=e.pageTitle):(e.pageTitle="Invalid Offer",i.pageTitle=e.pageTitle),i.pageLoading=!1}).error(function(){i.getOffer()})},i.getOffer(),i.showOfferCat=function(e){e.showFull=!e.showFull},i.offerEnquire=function(){if(e.userLoggedIn&&"0"==e.user.isBusiness){t.go("app.profile");var n=i.offer;e.relListing=n,e.relListing.date=n.endDateTimeString,e.relListing.relListingType=n.listingType,e.relListing.relListingTypeAlias="Offer",e.relListing.relListingSpecItemId=n.relListingId;var o="Business";window.setTimeout(function(){t.go("app.profile.messageGroups",{relListing:null,groupType:o})},60),window.setTimeout(function(){s.checkIfMessageGroupExists([e.user._profileId,i.offer._profileId]).success(function(n){null==n?t.go("app.profile.messageGroups.messageGroup",{_id:null,relListing:null,_profileIds:[e.user._profileId,i.offer._profileId],groupType:o,messageNameString:"New Message to "+e.relListing.businessName}):t.go("app.profile.messageGroups.messageGroup",{_id:n[0]._id,relListing:null,_profileIds:[],groupType:o,messageNameString:e.relListing.businessName})}).error(function(){})},230)}else e.userLoggedIn||e.showPopUp(i,"Enquiry")}},e.checkForAppInit(i)}]),app.controller("ProfileCtrl",["$rootScope","$scope","$state","$stateParams","Messages","Profile","$cordovaSQLite","userService","$ionicConfig","$ionicScrollDelegate","ngFB","Notifications","$ionicPopup","datesService","listingsService","userObjectService",function(e,t,n,i,o,r,s,l,c,d,u,p,g,m,f,h){t.rootScope=e,t.messageGroups=[],e.appLoading=!1,t.currentMonth=m.months[(new Date).getMonth()],t.profileItemCount={},t.togglePasswordViewButtonText="Show",t.showPassword=!1,t.passwordInputType="password",t.showFinalProfileLogInWindow=!1,t.pageLoad=function(){t.getProfileItemCount=function(){r.getProfileItemCountForProfile(e.user._profileId).success(function(n){if(t.profileItemCount=n[0],"outstanding"==n[0].notificationCountType){var i=[];for(a=0;a<n[0].notificationCount;a++)i.push(0),a==n[0].notificationCount-1&&(e.user.currentUnreadNotifications=i,e.$broadcast("savestate"))}}).error(function(n){window.setTimeout(function(){e.userLoggedIn&&t.getProfileItemCount()},150)})},t.$on("$ionicView.beforeEnter",function(){if(e.userLoggedIn&&(t.getProfileItemCount(),null!=i.action))switch(i.action){case"businessHelpPage":n.go("app.articles")}}),e.connectProfileToOneSignal=function(){p.createOneSignalId(e.user._profileId,e._userOneSignalId,0).success(function(t){e.debugModeLog({msg:"ProfileCtrl createOneSignalId successData",data:t}),e._userOneSignalId=t[0]._oneSignalId,0!=e._userOneSignalId&&void 0!==e._userOneSignalId||(e.user=h.startUsersMessagesAndNotificationsUpdateTimer(e.user))}).error(function(t){e.connectProfileToOneSignal()})},t.fbLogin=function(){u.login({scope:"email,user_about_me,email"}).then(function(n){"connected"===n.status?t.closeLogin():e.debugModeLog({msg:"Facebook Login Failed",data:[]})})},t.closeLogin=function(){u.api({path:"/me",params:{fields:"id,name,email"}}).then(function(i){var o=i.id;e.user=i,e.debugModeLog({msg:"ProfileCtrl closeLogin $rootScope.user",data:e.user}),e.appLoading=!0;var a=function(){r.logInThroughFb(e.user.email,e.user.id).success(function(i){if("null"!=i&&void 0!=i&&""!=i&&null!=i){d.scrollTop(),l.model.user=i[0],l.model.user.id=o,e.$broadcast("savestate");var a=e.user.userInteractionObject||{};l.model.user._oneSignalId=e._userOneSignalId,l.model.user._oneSignalDeviceToken=e._userOneSignalDeviceToken,e.user=h.createUserObject(l.model.user),f.createListingTypesObjForListing(e.user),e.user.userInteractionObject=a,e.userLoggedIn=!0,ionic.Platform.isAndroid()||ionic.Platform.isIOS()||ionic.Platform.isIPad()?e.connectProfileToOneSignal():e.user=h.startUsersMessagesAndNotificationsUpdateTimer(e.user),e.$broadcast("user-logged-in"),e.appLoading=!1,e.debugModeLog({msg:"ProfileCtrl logInThroughFb $rootScope.user: ",data:e.user})}else t.showDisplayNameNote=!1,t.displayNameTaken=!1,t.showFinalProfileLogInWindow=!0,t.checkIfDisplayNameTaken=function(e){e.length>4&&r.checkIfDisplayNameTaken(e).success(function(e){t.displayNameTaken=parseInt(e.total)>0}).error(function(){t.checkIfDisplayNameTaken(e)})},t.showDisplayNameNoteFunc=function(e){t.showDisplayNameNote=e},t.createFBUserProfile=function(i){r.createFBUserProfile(e.user.name,i,e.user.email,e.user.id).success(function(i){e.debugModeLog({msg:"ProfileCtrl createFBUserProfile successData: ",data:i}),n.go("app.registerFinal",{profileType:"person",_usersId:i,usersEMail:e.user.email,usersPWord:t.password}),t.showFinalProfileLogInWindow=!1}).error(function(){t.createFBUserProfile()})},e.appLoading=!1}).error(function(t){e.debugModeLog({msg:"ProfileCtrl createFBUserProfile errorData: ",data:t}),a()})};a()},function(t){e.debugModeLog({msg:"Facebook Error",data:t.error_description})})},t.logIn=function(n,i){e.appLoading=!0,r.logIn(n,i).success(function(n){if(e.debugModeLog({msg:"ProfileCtrl logIn successData: ",data:n}),"null"!=n&&void 0!=n&&""!=n&&null!=n){d.scrollTop(),l.model.user=n[0],console.log(l.model.user),e.$broadcast("savestate");var i=e.user.userInteractionObject;l.model.user._oneSignalId=e._userOneSignalId,l.model.user._oneSignalDeviceToken=e._userOneSignalDeviceToken,e.user=h.createUserObject(l.model.user),f.createListingTypesObjForListing(e.user),e.user.userInteractionObject=i,e.userLoggedIn=!0,ionic.Platform.isAndroid()||ionic.Platform.isIOS()||ionic.Platform.isIPad()?e.connectProfileToOneSignal():e.user=h.startUsersMessagesAndNotificationsUpdateTimer(e.user),e.$broadcast("user-logged-in"),e.appLoading=!1}else g.show({title:"Couldn't Log In",template:"<p>The log-in details you provided did not work. Please check them and try again.</p>",scope:t,buttons:[{text:"Close",onTap:function(e){}}]}),e.appLoading=!1}).error(function(o){e.debugModeLog({msg:"ProfileCtrl logIn errorData: ",data:o}),t.logIn(n,i)})},t.togglePasswordView=function(){t.showPassword=!t.showPassword,t.togglePasswordViewButtonText=t.showPassword?"Hide":"Show",t.passwordInputType=t.showPassword?"text":"password"},t.goToFirstMenuPage=function(){n.go("app.businessItems",{itemType:"BusinessMenuItemCats",timeScale:"present"})}},e.checkForAppInit(t),e.$on("new-profile-items-viewed",function(){t.getProfileItemCount()})}]),app.controller("ResetPasswordCtrl",["$rootScope","$scope","$state","$stateParams","Profile","$ionicPopup","$ionicScrollDelegate","listingsService","userService","userObjectService",function(e,t,n,i,o,r,a,s,l,c){t.userLoggedIn=!1,t.stage=i.stage,t.pageLoading=!0,t.pageLoad=function(){t.requestCode=function(n,i){e.appLoading=!0;var a=null;"initial"==n?a=t.form.email:"re-request"==n&&(a=i),o.createResetCodeForProfileEmail(a).success(function(n){e.appLoading=!1,"Success"==n?(r.show({title:"Password Reset Link Sent",template:"<p>We've just sent a Password Reset email to the email address which you just entered. Please click on the reset link inside this email to continue with your password reset.</p>",scope:t,buttons:[{text:"Close",onTap:function(e){}}]}),t.form={email:""}):"Email not found"==n?r.show({title:"Email Not Found",template:"<p>Sorry, that email address is not associated with a MyNyte account. Please check the spelling of the address and any punctuation it may contain.</p>",scope:t,buttons:[{text:"Close",onTap:function(e){}}]}):"Couldn't send email"==n&&r.show({title:"Couldn't Send Mail",template:"<p>We were not able to the send an email to the specified email address at this time. Please try again shortly.</p>",scope:t,buttons:[{text:"Close",onTap:function(e){}}]})}).error(function(e){t.requestCode(i)})},1==i.stage?(t.form={email:""},t.showEmailNote=!1,t.pageLoading=!1):2==i.stage&&(e.showBackButton=!1,t.backToHomepage=function(){n.go("app.feed")},t.updateProfilePasswordDetails=function(){if(t.form.password!=t.form.confirmPassword)return!1;e.appLoading=!0,t.updateParams={_profileId:i._profileId,word:t.form.password,resetCode:i.code,withResetCode:1},o.updateProfilePasswordDetails(t.updateParams).success(function(i){e.debugModeLog({msg:"ProfileCtrl updateProfilePasswordDetails successData: ",data:i}),t.logIn=function(i,d){o.logIn(i,d).success(function(i){if("null"!=i&&void 0!=i&&""!=i&&null!=i){a.scrollTop(),l.model.user=i[0],e.$broadcast("savestate");var o=e.user.userInteractionObject;l.model.user._userOneSignalId=e._userOneSignalId,e.user=c.createUserObject(l.model.user),s.createListingTypesObjForListing(e.user),e.user.userInteractionObject=o,e.userLoggedIn=!0,ionic.Platform.isAndroid()||ionic.Platform.isIOS()||ionic.Platform.isIPad()?e.connectProfileToOneSignal():e.user=c.startUsersMessagesAndNotificationsUpdateTimer(e.user),e.$broadcast("user-logged-in"),n.go("app.profile"),e.appLoading=!1}else r.show({title:"Couldn't Log In",template:"<p>The log-in details you provided did not work. Please check them and try again.</p>",scope:t,buttons:[{text:"Close",onTap:function(e){}}]}),e.appLoading=!1}).error(function(e){t.logIn(i,d)})},t.logIn(t.relEmail,t.form.password)}).error(function(e){t.updateProfilePasswordDetails()})},e.userLoggedIn?r.show({title:"Cannot reset password",template:"<p>You cannot complete this password reset request because you are currently logged into MyNyte. You will now be redirected to the profile page.</p>",scope:t,buttons:[{text:"Close",onTap:function(e){n.go("app.profile")}}]}):o.checkPasswordResetCodeValidity(i._profileId,i.code).success(function(n){e.debugModeLog({msg:"ProfileCtrl checkPasswordResetCodeValidity successData",data:n}),"Password Check Query Failed"==n?t.queryUnsuccessful=!0:0==n.totalMatchingCodes?t.codeUnrecognized=!0:n.totalMatchingCodes>0&&0==n.totalMatchingValidCodes?t.codeInvalid=!0:n.totalMatchingCodes>0&&n.totalMatchingValidCodes>0&&(t.form={password:"",confirmPassword:""},t.showPWordNote=!1,t.relEmail=n.email),t.pageLoading=!1}).error(function(e){}))},e.checkForAppInit(t)}]),app.controller("RegisterIntroCtrl",["$rootScope","$scope","$state","Profile",function(e,t,n,i){t.userLoggedIn=!1}]),app.controller("RegisterCtrl",["$rootScope","$scope","$state","$stateParams","Profile","listingsService","userObjectService",function(e,t,n,i,o,r,a){t.pageLoad=function(){t.name="",t.displayName="",t.email="",t.password="",t.showPasswordFieldEntered=!1,t.showPasswordNote=!1,t.displayNameTaken=!1,t.emailTaken=!1,t.existingEMailButPWordDifferent=!1,t.formSubmitted=!1,t.formIsValidating=!1,t.profileType=i.profileType,t.pageHeader="business"==t.profileType?"Sign your business up":"Fill in your details",t.checkIfDisplayNameTaken=function(e){e.length>4&&(t.formIsValidating=!0,o.checkIfDisplayNameTaken(e).success(function(e){t.displayNameTaken=parseInt(e.total)>0,t.formIsValidating=!1}).error(function(){t.checkIfDisplayNameTaken()}))},t.checkIfEmailTaken=function(n){n.length>4&&(t.formIsValidating=!0,o.checkIfEmailTaken(n).success(function(n){e.debugModeLog({msg:"RegisterCtrl checkIfEmailTaken successData",data:n}),t.emailTaken=parseInt(n.total)>0,t.formIsValidating=!1}).error(function(){t.checkIfEmailTaken(n)}))},t.doRegister=function(i,r,a,s){e.appLoading=!0,t.formSubmitted=!0,t.name=i,t.displayName=r,t.email=a,t.password=s,o.createProfile(t.name,t.displayName,t.email,t.password,t.profileType).success(function(i){e.debugModeLog({msg:"RegisterCtrl createProfile successData",data:i}),"emailTaken"==i?($ionicPopup.show({title:"Email already registered",template:"<p>Look's like there is already an account associated with this email address. Please try logging in directly instead, or try using an alternative email address.</p>",scope:t,buttons:[{text:"Close",onTap:function(e){}}]}),t.emailTaken=!0):"displayNameTaken"==i?($ionicPopup.show({title:"Display Name taken",template:"<p>Look's like that Display Name has already been taken. Please try another one.</p>",scope:t,buttons:[{text:"Close",onTap:function(e){}}]}),t.displayNameTaken=!0):(console.log(i),n.go("app.registerFinal",{profileType:t.profileType,_usersId:i,usersEMail:t.email,usersPWord:t.password}))}).error(function(n){e.debugModeLog({msg:"RegisterCtrl checkIfEmailTaken errorData",data:n}),t.doRegister(i,r,a,s)}),!t.existingEMailButPWordDifferent&&t.displayNameTaken}},e.checkForAppInit(t)}]),app.controller("RegisterFinalCtrl",["$rootScope","$scope","$state","$stateParams","Profile","Categories","$ionicScrollDelegate","userService","userObjectService","listingsService",function(e,t,n,i,o,r,s,l,c,d){t.name="",t.displayName="",t.email="",t.password="",t.showPasswordFieldEntered=!1,t.showPasswordNote=!1,t.displayNameTaken=!1,t.existingEMailButPWordDifferent=!1,t.formSubmitted=!1,t.showBusinessTypes=!1,t.showTowns=!1,t._businessTypeIds=[],t.availableBusinessTypes=[1],t.pageLoad=function(){t.currentFoodStyleIndexToAdd=0,t.chosenFoodStyleObjects=[{index:t.currentFoodStyleIndexToAdd,_id:null,name:"Select a Food Style",showFoodStyles:!1}],t.chosenFoodStyleIds=[null],t.currentBusinessTypeIndexToAdd=0,t.chosenBusinessTypeObjects=[{index:t.currentBusinessTypeIndexToAdd,_id:null,name:"Select a Business Type",showBusinessTypes:!1}],t.chosenBusinessTypeIds=[null],t.profileType=i.profileType,t._usersId=i._usersId,t._usersId=t._usersId.replace(/\x22/g,""),t.businessRequiredString="business"==i.profileType?" (Required)":" (optional)",t.businessTypeSelectionDefaultText="Business's category";var u="business"==i.profileType?"Business's home town":"Home town / favourite town";t.selectedTown={_id:null,name:u},t.selectedBusinessTypes=[],t.selectedBusinessTypes.push({_id:null,name:t.businessTypeSelectionDefaultText}),t.availableTowns=["Bedford","Luton","Milton"];var p=function(){r.getAvailableTowns().success(function(n){e.debugModeLog({msg:"RegisterFinalCtrl getAvailableTowns successData",data:n}),t.availableTowns=n;var i=function(){r.getAvailableBusinessTypes().success(function(n){for(e.debugModeLog({msg:"RegisterFinalCtrl getAvailableBusinessTypes successData",data:n}),a=0;a<n.length;a++)"Restaurant"==n[a].name?t.restaurantBusinessTypeId=n[a]._id:"Takeaway"==n[a].name&&(t.takeawayBusinessTypeId=n[a]._id);t.businessTypes=n;var i=function(){r.getAllFoodStyles().success(function(n){e.debugModeLog({msg:"RegisterFinalCtrl getAllFoodStyles successData",data:n}),t.foodStyles=n}).error(function(){i()})};i()}).error(function(){i()})};i()}).error(function(){p()})};p(),t.toggleBusinessTypes=function(e){t.currentBusinessTypeSelectingIndex=e,t.showBusinessTypes=!t.showBusinessTypes},t.toggleTowns=function(){t.showTowns=!t.showTowns},t.selectBusinessType=function(e){t.selectedBusinessTypes.push(e),t._businessTypeIds.push(e._id),t.showBusinessTypes=!t.showBusinessTypes},t.selectTown=function(e){t.selectedTown=e,t.showTowns=!t.showTowns},t.toggleBusinessType=function(e){for(t.currentBusinessTypeIndexBeingToggled=e.index,a=0;a<t.chosenBusinessTypeObjects.length;a++)t.chosenBusinessTypeObjects[a].index!=e.index&&(t.chosenBusinessTypeObjects[a].showBusinessTypes=!1);e.showBusinessTypes=!e.showBusinessTypes,t.showBusinessTypes=e.showBusinessTypes},t.selectBusinessType=function(e){for(t.chosenBusinessType=e,a=0;a<t.chosenBusinessTypeObjects.length;a++)if(t.chosenBusinessTypeObjects[a].index==t.currentBusinessTypeIndexBeingToggled)for(t.chosenBusinessTypeIds[a]=t.chosenBusinessType._id,null!=t.chosenBusinessTypeObjects[a]._id&&t.businessTypes.push({_id:t.chosenBusinessTypeObjects[a]._id,name:t.chosenBusinessTypeObjects[a].name}),t.chosenBusinessTypeObjects[a]._id=e._id,t.chosenBusinessTypeObjects[a].name=e.name,t.chosenBusinessTypeObjects[a].showBusinessTypes=!1,b=0;b<t.businessTypes.length;b++)t.businessTypes[b].name==e.name&&t.businessTypes.splice(b,1);t.showBusinessTypes=!1},t.removeBusinessType=function(e){var n=null;for(a=0;a<t.chosenBusinessTypeObjects.length;a++)t.chosenBusinessTypeObjects[a].index==e.index&&(n=a,null!=t.chosenBusinessTypeObjects[a]._id&&t.businessTypes.push({_id:t.chosenBusinessTypeObjects[a]._id,name:t.chosenBusinessTypeObjects[a].name})),t.chosenBusinessTypeObjects[a].index>e.index&&(t.chosenBusinessTypeObjects[a].index=t.chosenBusinessTypeObjects[a].index-1),a==t.chosenBusinessTypeObjects.length-1&&(t.chosenBusinessTypeIds.splice(n,1),t.chosenBusinessTypeObjects.splice(n,1));t.currentBusinessTypeIndexToAdd=t.currentBusinessTypeIndexToAdd-1},t.newBusinessType=function(){if(3==t.currentBusinessTypeIndexToAdd)return!1;t.currentBusinessTypeIndexToAdd=t.currentBusinessTypeIndexToAdd+1,t.chosenBusinessTypeObjects.push({index:t.currentBusinessTypeIndexToAdd,_id:null,name:"Select a Business Type",showBusinessTypes:!1}),t.chosenBusinessTypeIds.push(null)},t.toggleFoodStyle=function(e){for(t.currentFoodStyleIndexBeingToggled=e.index,a=0;a<t.chosenFoodStyleObjects.length;a++)t.chosenFoodStyleObjects[a].index!=e.index&&(t.chosenFoodStyleObjects[a].showFoodStyles=!1);e.showFoodStyles=!e.showFoodStyles,t.showFoodStyles=e.showFoodStyles},t.selectFoodStyle=function(e){for(t.chosenFoodStyle=e,a=0;a<t.chosenFoodStyleObjects.length;a++)if(t.chosenFoodStyleObjects[a].index==t.currentFoodStyleIndexBeingToggled)for(t.chosenFoodStyleIds[a]=t.chosenFoodStyle._id,null!=t.chosenFoodStyleObjects[a]._id&&t.foodStyles.push({_id:t.chosenFoodStyleObjects[a]._id,name:t.chosenFoodStyleObjects[a].name}),t.chosenFoodStyleObjects[a]._id=e._id,t.chosenFoodStyleObjects[a].name=e.name,t.chosenFoodStyleObjects[a].showFoodStyles=!1,b=0;b<t.foodStyles.length;b++)t.foodStyles[b].name==e.name&&t.foodStyles.splice(b,1);t.showFoodStyles=!1},t.removeFoodStyle=function(e){var n=null;for(a=0;a<t.chosenFoodStyleObjects.length;a++)t.chosenFoodStyleObjects[a].index==e.index&&(n=a,null!=t.chosenFoodStyleObjects[a]._id&&t.foodStyles.push({_id:t.chosenFoodStyleObjects[a]._id,name:t.chosenFoodStyleObjects[a].name})),t.chosenFoodStyleObjects[a].index>e.index&&(t.chosenFoodStyleObjects[a].index=t.chosenFoodStyleObjects[a].index-1),a==t.chosenFoodStyleObjects.length-1&&(t.chosenFoodStyleIds.splice(n,1),t.chosenFoodStyleObjects.splice(n,1));t.currentFoodStyleIndexToAdd=t.currentFoodStyleIndexToAdd-1},t.newFoodStyle=function(){if(3==t.currentFoodStyleIndexToAdd)return!1;t.currentFoodStyleIndexToAdd=t.currentFoodStyleIndexToAdd+1,t.chosenFoodStyleObjects.push({index:t.currentFoodStyleIndexToAdd,_id:null,name:"Select a Food Style",showFoodStyles:!1}),t.chosenFoodStyleIds.push(null)},t.completeRegister=function(r,a,u,p,g,m){void 0!==r&&(r=r.replace(/ /g,"")),void 0!==a&&(a=a.replace(/ /g,"")),e.appLoading=!0,o.completeRegistration(t._usersId,r,a,u,p,g,t.selectedTown._id,m,t.profileType,t.chosenBusinessTypeIds,t.chosenFoodStyleIds).success(function(r){if(e.debugModeLog({msg:"RegisterFinalCtrl completeRegistration successData",data:r}),"myNyte"!=t.profileType){var a=function(){null!=i.usersPWord?o.logIn(i.usersEMail,i.usersPWord).success(function(t){e.debugModeLog({msg:"RegisterFinalCtrl comleteRegistration logIn successData",data:t}),e.$broadcast("savestate");var i=e.user.userInteractionObject;l.model.user=t[0],l.model.user._userOneSignalId=e._userOneSignalId,e.user=c.createUserObject(l.model.user),e.user.userInteractionObject=i,e.userLoggedIn=!0,e.$broadcast("user-logged-in"),n.go("app.profile"),e.appLoading=!1}).error(function(t){e.debugModeLog({msg:"RegisterFinalCtrl completeRegistration logIn errorData",data:t}),a()}):o.logInThroughFb(i.usersEMail,e.user.id).success(function(t){if("null"!=t&&void 0!=t){s.scrollTop(),l.model.user=t[0],e.$broadcast("savestate");var i=e.user.userInteractionObject,o=e.user.id;l.model.user._userOneSignalId=e._userOneSignalId,e.user=c.createUserObject(l.model.user),e.user.id=o,d.createListingTypesObjForListing(e.user),e.user.userInteractionObject=i,e.userLoggedIn=!0,e.$broadcast("user-logged-in"),(ionic.Platform.isAndroid()||ionic.Platform.isIOS()||ionic.Platform.isIPad())&&e.connectProfileToOneSignal(),n.go("app.profile"),e.appLoading=!1}else e.appLoading=!1}).error(function(t){e.debugModeLog({msg:"RegisterFinalCtrl completeRegistration logInThroughFb errorData",data:t}),a()})};a()}else n.go("app.profile"),e.appLoading=!1}).error(function(n){e.debugModeLog({msg:"RegisterFinalCtrl completeRegistration errorData",data:n}),t.completeRegister(r,a,u,p,g,m)})},e.appLoading=!1},e.checkForAppInit(t)}]),app.controller("InviteContactsCtrl",["$rootScope","$state","$scope","googleClient","$cordovaOauth","$cordovaInAppBrowser",function(e,t,n,i,o,r){var a={location:"yes",clearcache:"yes",toolbar:"yes"};n.inviteHotmail=function(){r.open("https://login.live.com/oauth20_authorize.srf?client_id=00000000401DD32D&scope=wl.signin%20wl.basic%20wl.emails%20wl.contacts_emails&response_type=code&redirect_uri=https://www.mynyte.co.uk/live/oauth-hotmail.php","_blank",a).then(function(e){alert(e)}).catch(function(e){alert(e)})},n.inviteGmail=function(){r.open("https://www.mynyte.co.uk/staging/templates/profile-views/invite-gmail-contacts.html","_blank",a).then(function(e){alert(e)}).catch(function(e){alert(e)})},n.inviteYahoo=function(){$.ajax({url:"https://api.login.yahoo.com/oauth2/get_request_token?oauth_nonce=123456789&oauth_timestamp=1257965367&oauth_consumer_key=dj0yJmk9S2RwQ01ZbFVhaUdyJmQ9WVdrOVNIbHBObmhOTTJVbWNHbzlNQS0tJnM9Y29uc3VtZXJzZWNyZXQmeD1hNA--&oauth_signature_method=plaintext&oauth_signature=9347fbba92a8d014349102a66e863c8d6915e409&oauth_version=1.0&xoauth_lang_pref=en-us&oauth_callback=https://www.mynyte.co.uk",type:"GET",success:function(e){console.log(e)}})}}]),app.controller("NotificationsSummaryCtrl",["$rootScope","$state","$scope","Notifications","Profile","datesService","$ionicViewSwitcher","userObjectService",function(e,t,n,i,o,r,s,l){n.rootScope=e,n.pageLoad=function(){n.notifications=[],n.loadPageData=function(){i.getNotifications(e.user._profileId).success(function(t){if(e.debugModeLog({msg:"NotificationsSummaryCtrl getNotifications successData",data:t}),l.removeUnreadNotifications(e.user),null!=t&&t!=[])for(a=0;a<t.length;a++)t[a].timeString=r.getShortenedTimeString(t[a].dateTimeCreated),t[a].dateString=r.convertToReadableDate(n,t[a].dateTimeCreated),a==t.length-1&&(n.notifications=t,e.$broadcast("new-profile-items-viewed"),n.pageLoading=!1);else n.notifications=[],n.pageLoading=!1}).error(function(){n.loadPageData()})},n.loadPageData(),e.$on("new-notification-to-get",function(){n.loadPageData()})},e.checkForAppInit(n)}]),app.controller("PrivacyPolicyCtrl",["$rootScope","$scope","$state",function(e,t,n){t.$on("$ionicView.beforeEnter",function(){e.pageTitle=t.pageTitle?t.pageTitle:e.pageTitle}),t.pageLoad=function(){e.pageTitle="Privacy Policy",t.pageTitle=e.pageTitle},e.checkForAppInit(t)}]),app.controller("DownloadTheAppCtrl",["$rootScope","$scope","$state",function(e,t,n){t.$on("$ionicView.beforeEnter",function(){e.pageTitle=t.pageTitle?t.pageTitle:e.pageTitle}),t.pageLoad=function(){t.rootScope=e,e.pageTitle="Download the MyNyte App",t.pageTitle=e.pageTitle},e.checkForAppInit(t)}]),app.controller("ExternalApiCtrl",["$rootScope","$scope","$state",function(e,t,n){t.$on("$ionicView.beforeEnter",function(){e.pageTitle=t.pageTitle?t.pageTitle:e.pageTitle}),t.pageLoad=function(){t.rootScope=e,e.pageTitle="Download the MyNyte App",t.pageTitle=e.pageTitle},e.checkForAppInit(t)}]),app.controller("NotificationCtrl",["$rootScope","$state","$scope","$stateParams","Notifications","Profile","Followers",function(e,t,n,i,o,r,a){n.notificationId=i.id,n.alertType=i.type,n.followerEventFollowers=[],n.pageLoad=function(){"Follower Event"==n.alertType&&a.getFollowerEventFollowers().success(function(e){n.followerEventFollowers=e})},e.checkForAppInit(n)}]),app.controller("MessageGroupsCtrl",["$rootScope","$state","$stateParams","$scope","Messages","Profile","$ionicViewSwitcher","datesService","messagesWorkerFS",function(e,t,n,i,o,r,s,l,c){i.$on("$ionicView.beforeEnter",function(){e.pageTitle="Business"==n.groupType||"Person"==n.groupType?"Business"==n.groupType?"Enquiries":"Messages":e.pageTitle,"1"!=e.user.isBusiness?e.topRightButtonFunction=function(){t.go("app.profile.messageGroups.messageGroup",{_id:null,relListing:null,_profileIds:[],groupType:n.groupType})}:e.topRightButtonIsPlus=!1,e.backButtonFunction=function(){e.relListing=null,e.currentMessageInputPlaceholder="Type your message here ...",s.nextDirection("back"),t.go("app.profile")}}),i.rootScope=e,i.groupType=n.groupType,i.pageLoading=!0,i.pageLoad=function(){i.relListing=n.relListing,i.loadMessageGroups=function(){o.getMessageGroups(e.user._profileId,n.groupType).success(function(t){for(t=t||[],a=0;a<t.length;a++){if(t[a].multipleNames=!1,!t[a].name||""==t[a].name){var n=c.getProfilePhotoListForGroup(t[a],e.user);t[a].mainPhoto=n[0],t[a].name=c.getNameStringForGroup(t[a],e.user)}t[a].lastMessageSentBy==e.user.displayName&&(t[a].lastMessageSentBy="Me"),t[a].lastMessageText=""==t[a].lastMessageText&&null!=t[a]._lastMessageItemId?"Attached Listing":t[a].lastMessageText}i.messageGroups=t,i.pageLoading=!1}).error(function(){i.loadMessageGroups()})},i.loadMessageGroups();var t=e.$on("new-message-added",function(){i.loadMessageGroups()}),r=e.$on("message-group-updated",function(e,t){i.loadMessageGroups()}),s=e.$on("new-profile-items-viewed",function(){i.loadMessageGroups()});i.$on("$destroy",function(){t(),r(),s()}),e.$on("new-message-to-get-for-groups",function(){i.loadMessageGroups()})},e.checkForAppInit(i)}]),app.controller("MessageGroupCtrl",["$rootScope","$state","$scope","$stateParams","$ionicScrollDelegate","$ionicHistory","Messages","Profile","$http","Notifications","$ionicViewSwitcher","messagesWorkerFS","datesService","$timeout","userObjectService",function(e,t,n,i,o,r,s,l,c,d,u,p,g,m,f){var h=function(t){if(t._groupId==n._messageGroupId){if(-1!=n.messagesIdsArray.indexOf(t.newMessage._id))return!1;if(n.messagesIdsArray.push(t.newMessage._id),t.newMessage.from=t.newMessage._senderId==e.user._profileId?"self":"other",msgDateString=g.convertToReadableDate(n,t.newMessage.dateTimeSent),-1==n.messagesDatesArray.indexOf(msgDateString)&&n.messagesDatesArray.push(msgDateString),n.dates.length>0&&n.dates[n.dates.length-1].date==msgDateString?n.dates[n.dates.length-1].posts.push(t.newMessage):n.dates.push({date:msgDateString,posts:[t.newMessage]}),"self"!=t.newMessage.from){(function(){s.insertMessageReadReceipts(i._id,e.user._profileId,t.newMessage._id).success(function(e){if(null!=e)for(a=0;a<e.length;a++)e[a].date=g.convertToReadableDate(n,e[a].dateTimeSent),a,e.length}).error(function(e){insertIndividualMessageReadReceipts()})})()}}};n.$on("$ionicView.beforeEnter",function(){e.pageTitle=n.pageTitle?n.pageTitle:e.pageTitle,e.currentMessageGroupIdBeingViewed=i._id,n.messageGroupId=i._id,n.messageNameString=i.messageNameString,"Business"==i.groupType?e.backButtonFunction=function(){e.relListing=null,e.currentMessageInputPlaceholder="Type your message here ...",u.nextDirection("back"),t.go("app.profile.messageGroups",{groupType:i.groupType})}:e.backButtonFunction=function(){u.nextDirection("back"),t.go("app.profile.messageGroups",{groupType:i.groupType})},e.messageGroupTimer=null==e.messageGroupTimer?m(function(){null!=n.messageGroupId&&n.reloadMessageGroup()},1e4):e.messageGroupTimer}),n.rootScope=e,n.stateParams=i,n.pageLoading=!0,n.messageGroupId=i._id,n.messageNameString=i.messageNameString,n.messages=[],n.chosenRecipients=[],n.possibleRecipients=[],n.currentRecipientSearch={},n.currentRecipientSearch.search="",n.messageRecipientInputPlaceholderMessage="Business"==i.groupType?"Select a business to make an enquiry":"Select follower(s) to message ...",n.newMsgGroup=!1,n.newMsgGroupRecipientDecided=!0,n.addNewMessage=!1,n.groupHasMoreThan2People=null,n.currentMessageIndex=30,n.datamessage="",n.dates=[],n.messagesIdsArray=[],n.messagesDatesArray=[],n.pageLoad=function(){s.currentMessageGroupIdBeingViewed=i._id,n.getPosts=function(t){"initial"==t&&(n.pageLoading=!0,n._firstMessageId=0);var r=[],a=n.currentMessageIndex,l=n._firstMessageId;n.messageGroupId=i._id,n.messageNameString=i.messageNameString,"subsequent"==t?a=0:"earlierMessages"==t&&(l=0),s.getMessageGroup(i._id,e.user._profileId,a,l).success(function(a){var l=function(){f.removeUnreadMessageGroup(e.user,i._id),s.insertMessageReadReceipts(i._id,e.user._profileId,null).success(function(t){e.debugModeLog({msg:"insertMessageReadReceipts successData",data:t})}).error(function(e){l()})};if(l(),"initial"==t){var c=function(){s.getMessageGroupSummary(e.user._profileId,n.messageGroupId).success(function(t){e.pageSubtitle=t[0].headerMessage,n.groupHasMoreThan2People=t[0].totalParticipants>2}).error(function(){c()})};c()}var d=function(t,i){var r=o.$getByHandle("message-group").getScrollView().__maxScrollTop-o.$getByHandle("message-group").getScrollPosition().top;n.dates=i,n.addNewMessage&&n.finalAddMessage(n.newMessage),"initial"==t?(e.$broadcast("new-profile-items-viewed"),n.$broadcast("scroll.infiniteScrollComplete"),window.setTimeout(function(){o.$getByHandle("message-group").scrollBottom(),n.pageLoading=!1},100)):"subsequent"==t&&r<75&&o.$getByHandle("message-group").scrollBottom(!0),"earlierMessages"==t&&(n.$broadcast("scroll.refreshComplete"),e.appLoading=!1)};n._firstMessageId=a[0]._id,p.f("addPostsToScope",[[a,n.messagesIdsArray,n.messagesDatesArray,e.user._profileId,n.dates],0]).then(function(i){e.debugModeLog({msg:"Messages Worker",data:i}),n.messagesIdsArray=i.messagesIdsArray,n.messagesDatesArray=i.messagesDatesArray,r=i.dates,d(t,r)},function(t){e.debugModeLog({msg:"Messages Worker Error",data:t})})}).error(function(e){n.items=[],n.getPosts(t)})},n.showMessageGroup=function(t){if(null!=n.messageGroupId)e.pageTitle=n.messageNameString,n.pageTitle=e.pageTitle,n.getPosts(t);else if(null==n.messageGroupId&&0==i._profileIds.length)e.pageTitle="New Message",n.pageTitle=e.pageTitle,n.newMsgGroup=!0,n.newMsgGroupRecipientDecided=!1,n.pageLoading=!1;else if(null==n.messageGroupId&&i._profileIds.length>0){for(e.pageTitle=i.messageNameString,n.pageTitle=e.pageTitle,i._profileIds=i._profileIds.split(","),a=0;a<i._profileIds.length;a++){if(i._profileIds[a]!=e.user._profileId){var o=function(){l.getAllProfileDetails(i._profileIds[a]).success(function(e){n.chosenRecipients.push(e[0])}).error(function(){o()})};o()}a==i._profileIds.length-1&&(n.newMsgGroup=!0,n.newMsgGroupRecipientDecided=!0)}n.pageLoading=!1}},n.doRefresh=function(){e.appLoading=!0,n.currentMessageIndex+=30,n.showMessageGroup("earlierMessages")},n.cancelListingAttachment=function(){e.relListing=null,e.currentMessageInputPlaceholder="Type your message here ...",o.$getByHandle("message-group").scrollBottom()},n.goToAttachedListing=function(e){if("Offer"==e.relatedItemType){t.go("app.offers");window.setTimeout(function(){t.go("app.offers.offerDetail",{_id:e._relatedItemId})},220)}else{t.go("app.feed");"BusinessesOffers"==e.relatedItemType?m(function(){t.go("app.seeBusinessesItems",{_businessId:e._relatedItemId,_listingId:e._relatedItemId,listingType:"Business",itemType:"Offers",listingName:e.relatedItemsListingName})},320):"BusinessesEvents"==e.relatedItemType?m(function(){t.go("app.seeBusinessesItems",{_businessId:e._relatedItemId,_listingId:e._relatedItemId,listingType:"Business",itemType:"UpcomingEvents",listingName:e.relatedItemsListingName})},320):"BusinessesTakeaway Menu"==e.relatedItemType?m(function(){t.go("app.seeMenu",{_listingId:e._relatedItemId,listingType:"Business",listingName:e.relatedItemsListingName,_businessId:e._relatedItemId,_menuTypeId:1})},320):"BusinessesA la Carte Menu"==e.relatedItemType?m(function(){t.go("app.seeMenu",{_listingId:e._relatedItemId,listingType:"Business",listingName:e.relatedItemsListingName,_businessId:e._relatedItemId,_menuTypeId:2})},320):"BusinessesPhotos"==e.relatedItemType?m(function(){t.go("app.feedListing-photos",{_listingId:e._relatedItemProfileId,listingType:"Business",_id:e._relatedItemProfileId,listingName:e.relatedItemsListingName})},320):"EventsOffers"==e.relatedItemType?m(function(){t.go("app.seeBusinessesItems",{_listingId:e._relatedItemId,listingType:"Event",listingName:e.relatedItemName,_businessId:e._relatedItemId,itemType:"Offers"})},320):m(function(){t.go("app.feed.nlfeedListing",{_listingId:e._relatedItemId,listingType:e.relatedItemType})},220)}},n.addMesage=function(){var t=function(o){-1==o._profileIds.indexOf(e.user._profileId)&&o._profileIds.push(e.user._profileId),s.checkIfMessageGroupExists(o._profileIds).success(function(e){null!=e?(o._groupId=e[0]._id,i._id=o._groupId,n.addNewMessage=!0,n.newMessage=o,n.showMessageGroup()):n.finalAddMessage(o)}).error(function(){t(o)})};n.finalAddMessage=function(t){e.appLoading=!0,s.addMessage(t).success(function(r){if(e.debugModeLog({msg:"addMessage successData",data:r}),null==n._messageGroupId&&(n._messageGroupId=r[0]._groupId,null==i.messageNameString))for(n.messageNameString="",a=0;a<n.chosenRecipients.length;a++)n.chosenRecipients[a]._profileId!=e.user._profileId&&(n.messageNameString+=n.chosenRecipients[a].name),a<n.chosenRecipients.length-1&&(n.messageNameString+=", "),a==n.chosenRecipients.length-1&&(e.pageTitle=n.messageNameString,n.pageTitle=e.pageTitle);var l=function(){s.getMessageRecipientProfileIds(n._messageGroupId,e.user._profileId).success(function(i){var o=""==t.text||null==t.text?"Attached Listing":t.text,r=e.user.displayName+": "+o,s={actionFunction:"goToMessage",msgGroupType:t.groupType,_msgGroupId:n._messageGroupId},l=[];for(a=0;a<i.length;a++)l.push(i[a]._participantProfileId),a==i.length-1&&e.prepareMessageNotificationFinal(l,r,"New Message",s)}).error(function(e){l()})},c=function(e){return 0<=e&&e<10?"0"+e.toString():-10<e&&e<0?"-0"+(-1*e).toString():e.toString()};Date.prototype.toMysqlFormat=function(){return this.getUTCFullYear()+"-"+c(1+this.getUTCMonth())+"-"+c(this.getUTCDate())+" "+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())},t.dateTimeSent=(new Date).toMysqlFormat(),t.timeString=g.getShortenedTimeString(t.dateTimeSent),t._id=r[0]._newMessageId,l(),n.groupHasMoreThan2People=n.chosenRecipients.length>1&&null==n.groupHasMoreThan2People||n.groupHasMoreThan2People,e.$broadcast("new-message-added"),h({newMessage:t,_groupId:n._messageGroupId}),n.datamessage="",e.relListing=null,e.currentMessageInputPlaceholder="Type your message here ...",n.addNewMessage=!1,n.newMessage=null,n.newMsgGroup=!1,o.$getByHandle("message-group").scrollBottom(),e.appLoading=!1}).error(function(){n.finalAddMessage(t)})};new function(){if(this._relatedItemId=e.relListing?e.relListing.relListingId:null,this.relatedItemType=e.relListing&&e.relListing.relListingType?e.relListing.relListingType:null,this.relatedItemName=e.relListing?e.relListing.name:null,this.relatedItemTown=e.relListing?e.relListing.town:null,"Offer"==this.relatedItemType&&null!=e.relListing.currentOfferCoverPhotoName?this.relatedItemCoverPhotoName=e.relListing.currentOfferCoverPhotoName:this.relatedItemCoverPhotoName=e.relListing?e.relListing.currentCoverPhotoName:null,this.messageText=n.datamessage,this.text=n.datamessage,this.from="self",this._senderId=e.user._profileId,this._groupId=i._id,this.groupType=i.groupType,this._profileIds=null!=this._groupId||null==i._profileIds||""==i._profileIds?[]:i._profileIds,this.messageReadState="Not Read",null==this._groupId&&0==i._profileIds.length){var o=function(e,i){i._profileIds.push(n.chosenRecipients[e]._profileId),e<n.chosenRecipients.length-1?(e++,o(e,i)):t(i)};o(0,this)}else n.finalAddMessage(this)}},n.conductMessageRecipientSearch=function(t){n.possibleRecipients=t.length>0?n.possibleRecipients:[],"Person"==i.groupType&&null!=t&&""!=t?l.getAllFollowersByName(t,e.user._profileId).success(function(t){n.possibleRecipients=e.fillRecipientSearchResults(t,n,n.chosenRecipients)}).error(function(){n.conductMessageRecipientSearch(t)}):"Business"==i.groupType&&null!=t&&""!=t&&l.getAllBusinessesByName(t,"_","_").success(function(t){n.possibleRecipients=e.fillRecipientSearchResults(t,n,n.chosenRecipients)}).error(function(){n.conductMessageRecipientSearch(t)})},n.addPossibleRecipientToChat=function(e){n.currentRecipientSearch={search:""},n.chosenRecipients.push(e),n.possibleRecipients=[]},n.reloadMessageGroup=function(){"app.profile.messageGroups.messageGroup"==e.currentViewName&&(n.showMessageGroup("subsequent"),e.messageGroupTimer=null==e.messageGroupTimer?m(function(){null!=n.messageGroupId&&n.reloadMessageGroup()},15e3):e.messageGroupTimer)},n.showMessageGroup("initial"),e.$on("new-message-to-get-for-group",function(){n.showMessageGroup("subsequent")}),n.$on("$destroy",function(t){m.cancel(e.messageGroupTimer),e.messageGroupTimer=null})},e.checkForAppInit(n)}]),app.controller("ContactsCtrl",["$ionicHistory","$rootScope","$state","$scope","Profile","Contacts",function(e,t,n,i,o,r){function a(){r.getContacts().success(function(e){i.contacts=e,i.gridOptions.data=e})}i.$on("$ionicView.enter",function(){t.topRightButtonFunction=function(){n.go("app.addContact")}}),i.contacts=[],i.gridOptions={},i.gridOptions.paginationPageSizes=[10,15],i.gridOptions.paginationPageSize=10,i.gridOptions.enableFiltering=!0,i.gridOptions.columnDefs=[{name:"Name",field:"name"},{name:"Company Name",field:"companyName"},{name:"Town",field:"town"},{name:"Business Type",field:"businessType"},{name:"Phone",field:"phone"},{name:"e-mail",field:"email",width:"20%"},{name:" ",cellTemplate:'<a class="btn primary" ui-sref="app.contactDetail({_id: row.entity._id})">Edit</a>',width:"12%"}],i.filterContacts=function(e){r.getContacts().success(function(e){i.contacts=e,i.gridOptions.data=e})},i.notWorking=function(){alert("This Function isn't finished just yet, pal")},i.Delete=function(e){e.visible=!1;i.gridOptions.data.indexOf(e.entity);r.getContacts().success(function(e){i.contacts=e,i.gridOptions.data=e})},t.$on("new-contact",function(e,t){a()}),a()}]),app.controller("AddContactCtrl",["$rootScope","$state","$scope","Profile","Contacts",function(e,t,n,i,o){n.addContact=function(n,i,r,a,s,l,c,d,u){o.addContact(n,i,r,a,s,l,c,d,u).success(function(n){e.debugModeLog({msg:"addContact successData",data:n}),e.$broadcast("new-contact"),t.go("app.contacts")}).error(function(t){e.debugModeLog({msg:"addMessage errorData",data:t})})}}]),app.controller("ContactDetailCtrl",["$rootScope","$state","$stateParams","$scope","Profile","Contacts",function(e,t,n,i,o,r){e.topRightButtonFunction=function(){i.editing=!i.editing,e.currentlyEditing=!e.currentlyEditing},i.contact=null,i._id=n._id,i.editing=!1,r.getContact(i._id).success(function(e){i.contact=e[0]}),i.editContact=function(t,n,o,a,s,l,c,d,u,p){r.editContact(t,n,o,a,s,l,c,d,u,p).success(function(t){e.debugModeLog({msg:"editContact successData",data:t}),i.editing=!1,e.currentlyEditing=!1,e.$broadcast("new-contact")}).error(function(){i.editContact(t,n,o,a,s,l,c,d,u,p)})}}]),app.controller("BusinessItemsCtrl",["$rootScope","$state","$stateParams","$scope","Offers","Profile","Events","Taxi","MenuItems","TableBooking","Movies","$ionicViewSwitcher","datesService",function(e,t,n,i,o,r,s,l,d,u,p,g,m){i.businessItems=[],i.itemType=n.itemType,i.timeScale=n.timeScale,i.$on("$ionicView.beforeEnter",function(){e.pageTitle=i.pageTitle?i.pageTitle:e.pageTitle,i.timeScale=n.timeScale,"BusinessMenuItemCats"==n.itemType?(e.topRightButtonShouldBeSettings=!0,e.topRightButtonFunction=function(){t.go("app.businessItemSettings",{itemType:n.itemType})}):(e.topRightButtonShouldBeSettings=!1,e.topRightButtonFunction=function(){t.go("app.addBusinessItem",{itemType:n.itemType})}),-1!=["RequestedTableBookings","OwnTableBookings","myNYTEActivity","OwnTaxiBookings","RequestedTaxiBookings","OwnTakeawayOrders","RequestedTakeawayOrders"].indexOf(n.itemType)||"past"==n.timeScale?e.topRightButtonIsPlus=!1:"BusinessMenuItemCats"!=n.itemType&&(e.topRightButtonIsPlus=!0)}),"BusinessCarteMenuItemCats"!=n.itemType&&"BusinessTakeawayMenuItemCats"!=n.itemType&&"BusinessMenuItemCats"!=n.itemType&&"myNYTEActivity"!=n.itemType?i.nextPageFunction=function(e){t.go("app.businessItem",{_id:e.relListingId,itemType:n.itemType,timeScale:n.timeScale})}:"BusinessMenuItemCats"==n.itemType?i.nextPageFunction=function(e){t.go("app.businessItems",{itemType:e.menuType,timeScale:"present"})}:"BusinessCarteMenuItemCats"==n.itemType||"BusinessTakeawayMenuItemCats"==n.itemType?i.nextPageFunction=function(i){var o="BusinessCarteMenuItemCats"!=n.itemType?1:2;t.go("app.seeBusinessMenuItems",{_businessId:e.user._id,_menuItemCategoryId:i._id,_menuTypeId:o,viewType:"profile"})}:"myNYTEActivity"==n.itemType&&(i.nextPageFunction=function(e){}),i.pageLoad=function(){var g=function(e){var t=m.getShortenedDateString(e);return t=m.convertToDate(i,new Date(t))},f=function(e,t,n){"Table Booking"==n?(e[t].timeRequested=m.getShortenedTimeString(e[t].dateTimeRequested),e[t].dateRequested=g(e[t].dateTimeRequested),null!=e[t].dateTimeSuggested&&(e[t].timeSuggested=m.getShortenedTimeString(e[t].dateTimeSuggested))):"Event"==n?(e[t].DATE=g(e[t].DATE),e[t].lastDate=g(e[t].lastDate),e[t].guestListMax=null==e[t].guestListMax?"unlimited":parseInt(e[t].guestListMax),e[t].guestListCurrentTotal=null==e[t].guestListCurrentTotal?0:e[t].guestListCurrentTotal):"Offer"==n?(e[t].endDateTime=g(null==e[t]._relatedEventId?e[t].endDateTime:e[t].relatedEventLastDate),e[t].startDateTime=g(null==e[t]._relatedEventId?e[t].startDateTime:e[t].relatedEventStartDate)):"Movie"==n&&(e[t].earliestShowingStartDate=g(e[t].earliestShowingStartDate),e[t].latestShowingEndDate=g(e[t].latestShowingEndDate)),t<e.length-1?f(e,t+1,n):(i.businessItems=e,i.pageLoading=!1)};switch(n.itemType){case"Movies":i.getBusinessItems=function(){p.getMoviesForMaintenance(n.timeScale,0).success(function(t){e.debugModeLog({msg:"getMoviesForMaintenance successData",data:t}),"null"!=t&&null!=t?f(t,0,"Movie"):(i.businessItems=[],i.pageLoading=!1)}).error(function(){i.getBusinessItems()})};var h=e.$on("new-movie",function(e,t){i.getBusinessItems()});i.$on("$destroy",function(){h()});break;case"OwnOffers":i.getBusinessItems=function(){e.pageTitle="present"==n.timeScale?"My Current Offers":"My Past Offers",i.pageTitle=e.pageTitle;var t=e.userLoggedIn?e.user._profileId:0;o.getOffersByBusinessId(e.user._id,t,n.timeScale).success(function(t){e.debugModeLog({msg:"BusinessItemsCtrl getOffersByBusinessId successData",data:t}),"null"!=t&&null!=t?f(t,0,"Offer"):(i.businessItems=[],i.pageLoading=!1)}).error(function(){i.getBusinessItems()})};var h=e.$on("new-offer",function(e,t){i.getBusinessItems()});i.$on("$destroy",function(){h()});break;case"OwnEvents":e.pageTitle="present"==n.timeScale?"My Current Events":"My Past Events",i.pageTitle=e.pageTitle,i.getBusinessItems=function(){s.getEventsByBusiness(e.user._id,n.timeScale,e.user._profileId).success(function(t){e.debugModeLog({msg:"BusinessItemsCtrl getEventsByBusiness successData",data:t}),"null"!=t&&null!=t?f(t,0,"Event"):(i.businessItems=[],i.pageLoading=!1)}).error(function(){i.getBusinessItems()})};break;case"RequestedTableBookings":i.getBusinessItems=function(){e.pageTitle="My Current Table Booking Requests",i.pageTitle=e.pageTitle,u.getRequestedTableBookings(e.user._id).success(function(t){e.debugModeLog({msg:"BusinessItemsCtrl getRequestedTableBookings successData",data:t}),null!=t?f(t,0,"Table Booking"):(i.businessItems=[],i.pageLoading=!1)}).error(function(){i.getBusinessItems()})};var h=e.$on("table-booking-updated",function(e,t){i.getBusinessItems()});i.$on("$destroy",function(){h()});break;case"OwnTableBookings":i.getBusinessItems=function(){e.pageTitle="present"==n.timeScale?"My Current Table Bookings":"My Past Table Bookings",i.pageTitle=e.pageTitle,u.getAcceptedTableBookings(e.user._id,n.timeScale).success(function(t){e.debugModeLog({msg:"BusinessItemsCtrl getAcceptedTableBookings successData",data:t}),null!=t?f(t,0,"Table Booking"):(i.businessItems=[],i.pageLoading=!1)}).error(function(){i.getBusinessItems()})};var h=e.$on("table-booking-updated",function(e,t){i.getBusinessItems()});i.$on("$destroy",function(){h()});break;case"RequestedTakeawayOrders":case"OwnTakeawayOrders":var v="RequestedTakeawayOrders"==n.itemType?"allRequested":"own";i.getBusinessItems=function(){d.getMenuOrdersForBusiness(e.user._id,v).success(function(t){e.debugModeLog({msg:"BusinessItemsCtrl getMenuOrdersForBusiness successData",data:t}),"null"!=t&&null!=t?i.businessItems=t:(i.businessItems=[],i.pageLoading=!1)}).error(function(){i.getBusinessItems()})};var h=e.$on("menu-order-updated",function(e,t){i.getBusinessItems()});i.$on("$destroy",function(){h()});break;case"BusinessMenuItemCats":i.getBusinessItems=function(){e.pageTitle="My Menus",i.pageTitle=e.pageTitle,i.businessItems=[],-1!=e.user.listingTypes.indexOf("Takeaway")&&i.businessItems.push({name:"Takeaway Menu",menuType:"BusinessTakeawayMenuItemCats"}),-1!=e.user.listingTypes.indexOf("Restaurant")&&i.businessItems.push({name:"A la Carte Menu",menuType:"BusinessCarteMenuItemCats"}),i.pageLoading=!1};break;case"BusinessCarteMenuItemCats":case"BusinessTakeawayMenuItemCats":var y="BusinessCarteMenuItemCats"==n.itemType?2:1;i.showTagOptions=!0,i.showExtraOptionsOptions=!0,i.getBusinessItems=function(){e.pageTitle="BusinessCarteMenuItemCats"==n.itemType?"My a la Carte Menu":"My Takeaway Menu",i.pageTitle=e.pageTitle,i.sortMenuItems=function(){for(z=0;z<i.menuItems.length;z++){var e=i.menuItemCategoriesAdded.indexOf(i.menuItems[z]._menuItemCategoryId);-1==e?(i.menuItemCategories.push({name:i.menuItems[z].menuItemCategoryName,_id:i.menuItems[z]._menuItemCategoryId,count:1}),i.menuItemCategoriesAdded.push(i.menuItems[z]._menuItemCategoryId)):i.menuItemCategories[e].count+=1,z==i.menuItems.length-1&&(i.businessItems=i.menuItemCategories,i.pageLoading=!1)}};var t=function(){d.getMenuItems(e.user._id,0,y).success(function(t){e.debugModeLog({msg:"BusinessItemsCtrl getMenuItems successData",data:t}),i.menuItemCategories=[],i.menuItemCategoriesAdded=[],i.menuItems=[],i.menuItemsAdded=[];var t="null"!=t&&null!=t?t:[];for(a=0;a<t.length;a++){if(tagsObj={tagName:t[a].tagName,iconClass:t[a].iconClass},-1==i.menuItemsAdded.indexOf(t[a]._id)){for(e.currentSavedFoodOrders=e.currentSavedFoodOrders||[],b=0;b<e.currentSavedFoodOrders.length;b++)if(e.currentSavedFoodOrders[b]._businessId==n._businessId){var o=e.currentSavedFoodOrders[b];for(c=0;c<o.menuItems.length;c++)o.menuItems[c].item._id==t[a]._id&&(t[a].itemsAddedToBasket=o.menuItems[c].item.itemsAddedToBasket)}i.menuItems.push(t[a]),i.menuItemsAdded.push(t[a]._id)}a==t.length-1&&t.length>0&&i.sortMenuItems()}0==t.length&&(i.businessItems=[],i.pageLoading=!1)}).error(function(){t()})};t()};var h=e.$on("menu-items-changed",function(e,t){i.getBusinessItems()});i.$on("$destroy",function(){h()});break;case"MenuItemCategories":i.getBusinessItems=function(){e.pageTitle="My Menu Categories",i.pageTitle=e.pageTitle,d.getMenuItemCategoriesForBusiness(e.user._id).success(function(t){e.debugModeLog({msg:"BusinessItemsCtrl getMenuItemCategoriesForBusiness successData",data:t}),"null"!=t&&null!=t?i.businessItems=t:(i.businessItems=[],i.pageLoading=!1)}).error(function(){i.getBusinessItems()})};var h=e.$on("menu-item-categories-changed",function(e,t){i.getBusinessItems()});i.$on("$destroy",function(){h()});break;case"MenuItemSubCategories":i.getBusinessItems=function(){e.pageTitle="My Menu Sub-categories",i.pageTitle=e.pageTitle,d.getMenuItemSubCategoriesForBusiness(e.user._id).success(function(t){e.debugModeLog({msg:"BusinessItemsCtrl getMenuItemSubCategoriesForBusiness successData",data:t}),"null"!=t&&null!=t?i.businessItems=t:(i.businessItems=[],i.pageLoading=!1)}).error(function(){i.getBusinessItems()})};var h=e.$on("menu-item-sub-categories-changed",function(e,t){i.getBusinessItems()});i.$on("$destroy",function(){h()});break;case"MenuItemTemplateOptions":i.getBusinessItems=function(){e.pageTitle="My Menu Template Options",i.pageTitle=e.pageTitle,d.getAllMenuItemTemplateOptionsForBusiness(e.user._id).success(function(t){e.debugModeLog({msg:"BusinessItemsCtrl getAllMenuItemTemplateOptionsForBusiness successData",data:t});var n=[],o=[];for(t="null"!=t&&null!=t?t:[],a=0;a<t.length;a++)-1==o.indexOf(t[a]._id)?(n.push({name:t[a].Name,relListingId:t[a]._id,_id:t[a]._id,priceRelevant:t[a].PriceRelevant,quantityRelevant:t[a].QuantityRelevant,categoryName:t[a].menuExtraOptionCategoryName,optionType:t[a].Type,options:[{name:t[a].menuExtraOptionOptionName}]}),o.push(t[a]._id)):n[o.indexOf(t[a]._id)].options.push({name:t[a].menuExtraOptionOptionName});i.businessItems=n,i.pageLoading=!1}).error(function(){i.getBusinessItems()})};var h=e.$on("menu-item-template-options-changed",function(e,t){i.getBusinessItems()});i.$on("$destroy",function(){h()});break;case"RequestedTaxiBookings":i.getBusinessItems=function(){e.pageTitle="Current Taxi Booking Requests",i.pageTitle=e.pageTitle,l.getTaxiBookingsForBusiness("allRequested",e.user._id).success(function(t){e.debugModeLog({msg:"BusinessItemsCtrl getTaxiBookingsForBusiness successData",data:t}),"null"!=t&&null!=t?i.businessItems=t:(i.businessItems=[],i.pageLoading=!1)}).error(function(){i.getBusinessItems()})};var h=e.$on("taxi-booking-response-sent",function(e,t){i.getBusinessItems()});i.$on("$destroy",function(){h()});break;case"OwnTaxiBookings":i.getBusinessItems=function(){var t="present"==n.timeScale?"own":"ownPast";e.pageTitle="present"==n.timeScale?"My Current Taxi Bookings":"My Past Taxi Bookings",i.pageTitle=e.pageTitle,l.getTaxiBookingsForBusiness(t,e.user._id).success(function(t){e.debugModeLog({msg:"BusinessItemsCtrl getTaxiBookingsForBusiness successData",data:t}),"null"!=t&&null!=t?i.businessItems=t:(i.businessItems=[],i.pageLoading=!1)}).error(function(){i.getBusinessItems()})};break;case"myNYTEActivity":i.getBusinessItems=function(){i.timeScale,n.timeScale,e.pageTitle="present"==n.timeScale?"My Current MyNyte Activity":"My Past MyNyte Activity",i.pageTitle=e.pageTitle,r.getMyNyteActivityForPerson(e.user._profileId,n.timeScale).success(function(t){if(e.debugModeLog({msg:"BusinessItemsCtrl getMyNyteActivityForPerson successData",data:t}),i.businessItems=[{name:"Table Bookings",dbName:"Table Booking",icon:"ion-fork",show:"present"==n.timeScale,items:[]},{name:"Taxi Bookings",dbName:"Taxi Booking",icon:"ion-android-car",show:"present"==n.timeScale,items:[]},{name:"Event Entry",dbName:"Event Entry",icon:"ion-clipboard",show:"present"==n.timeScale,items:[]}],"null"!=t&&null!=t){var o=function(e){var n=function(e){e<i.businessItems.length-1?o(e+1):i.pageLoading=!1},r=function(o){t[o].timeRequested=null!=t[o].dateTimeRequested?m.getShortenedTimeString(t[o].dateTimeRequested):null,t[o].dateRequested=null!=t[o].dateTimeRequested?m.getShortenedDateString(t[o].dateTimeRequested):null,t[o].dateRequested=null!=t[o].dateTimeRequested?m.convertToDate(i,new Date(t[o].dateRequested)):null,t[o].endTime=null!=t[o].endDateTime?m.getShortenedTimeString(t[o].endDateTime):null,t[o].endDate=null!=t[o].endDateTime?m.getShortenedDateString(t[o].endDateTime):null,t[o].endDate=null!=t[o].endDateTime?m.convertToDate(i,new Date(t[o].endDate)):null,t[o].itemType==i.businessItems[e].dbName&&i.businessItems[e].items.push(t[o]),o<t.length-1?r(o+1):n(e)};r(0)};o(0)}}).error(function(){i.getBusinessItems()})},i.toggleBusinessItemCatVisibility=function(e){e.show=!e.show},i.goToMyNyteActivity=function(e){t.go("app.businessItem",{_id:e._id,itemType:e.itemType,timeScale:n.timeScale})};var w=e.$on("taxi-booking-updated",function(e,t){i.getBusinessItems()}),C=e.$on("table-booking-updated",function(e,t){i.getBusinessItems()}),T=e.$on("event-entry-booking-updated",function(e,t){i.getBusinessItems()});i.$on("$destroy",function(){w(),C(),T()})}i.getBusinessItems()},e.checkForAppInit(i)}]),app.controller("BusinessItemCtrl",["$rootScope","$state","$stateParams","$scope","$ionicHistory","ionicTimePicker","$ionicPopup","Notifications","Profile","Events","Offers","Taxi","MenuItems","TableBooking","Categories","Movies","ionicDatePicker","$ionicScrollDelegate","$ionicViewSwitcher","datesService",function(e,t,n,i,o,r,s,l,c,d,u,p,g,m,f,h,v,y,w,C){i.storedBusinessItem={},e.hideSearch=!0,i.rootScope=e,i.itemType=n.itemType,i.selectExtraOption=function(t,n){e.selectExtraOption(t,n,i.businessItem)},i.$on("$ionicView.beforeEnter",function(){e.pageTitle=i.pageTitle?i.pageTitle:e.pageTitle,e.topRightButtonFunction=function(){i.editing?i.businessItem=i.storedBusinessItem:i.storedBusinessItem=angular.copy(i.businessItem),i.extraTopRightFunction&&i.extraTopRightFunction(),i.editing&&y.scrollTop(),e.currentlyEditing=!e.currentlyEditing,i.editing=!i.editing},-1!=["RequestedTableBookings","OwnTableBookings","myNYTEActivity","OwnTaxiBookings","RequestedTaxiBookings","OwnTakeawayOrders","RequestedTakeawayOrders","Event Entry","Taxi Booking","Table Booking"].indexOf(n.itemType)||"past"==n.timeScale?e.topRightButtonIsEdit=!1:e.topRightButtonIsEdit=!0,n.itemType}),i.pageLoad=function(){e.editing=!1,e.currentlyEditing=!1,i.editing=!1;var o=function(e){var t=function(e){var t=C.getShortenedDateString(e);return t=C.convertToDate(i,new Date(t))};"Offer"==e.listingType?(e.endDateTimeString=t(null==e._relatedEventId?e.endDateTime:e.relatedEventLastDate),e.startDateTimeString=t(null==e._relatedEventId?e.startDateTime:e.relatedEventLastDate)):"Event"==e.listingType?(e.lastDateString=t(e.lastDate),e.DATEString=t(e.DATE)):"Movie"==e.listingType&&(e.earliestShowingStartDate=t(e.earliestShowingStartDate),e.latestShowingEndDate=t(e.latestShowingEndDate))};switch(n.itemType){case"Movies":i.getBusinessItem=function(){h.getMoviesForMaintenance("",n._id).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl getMoviesForMaintenance successData",data:t}),"null"!=t&&null!=t&&o(t[0]),i.businessItem="null"!=t&&null!=t?t[0]:[]}).error(function(){i.getBusinessItem()})};break;case"OwnOffers":i.getBusinessItem=function(){var t=e.userLoggedIn?e.user._profileId:0;u.getOffer(n._id,t).success(function(t){for(e.debugModeLog({msg:"BusinessItemCtrl getOffer successData",data:t}),"null"!=t&&null!=t&&o(t[0]),i.businessItem="null"!=t&&null!=t?t[0]:[],e.pageTitle="null"!=t&&null!=t?t[0].title:"Offer Error",i.pageTitle=e.pageTitle,i.getAllOfferCategoriesForBusiness=function(){f.getAllOfferCategoriesForBusiness(e.user._id).success(function(t){for(e.debugModeLog({msg:"BusinessItemCtrl getAllOfferCategoriesForBusiness successData",data:t}),i.businessItem.offerCategories=t,b=0;b<i.businessItem.offerCategories.length;b++)i.businessItem.offerCategories[b]._id==i.businessItem._offerSubCategoryId&&(i.businessItem.chosenOfferCat=i.businessItem.offerCategories[b])}).error(function(e){window.setTimeout(function(){i.getAllOfferCategoriesForBusiness()},100)})},i.getAllOfferCategoriesForBusiness(),i.businessItem.offerTypes=[{name:"Basic",displayName:"Standard Offer",description:"Standard Offer with information",itemType:"offerType",_id:1},{name:"WithManualPromoCode",displayName:"Detailed Offer with Enquiry Form",description:"Create an Offer with detailed info, a built-in enquiry form and an optional photo.",itemType:"offerType",_id:2},{name:"WithAutoPromoCode",displayName:"MyNyte Exclusive Offer",description:"Create an Offer that's exclusive to MyNyte. Get a priority listing in the Offers Display!",itemType:"offerType",_id:3}],a=0;a<i.businessItem.offerTypes.length;a++)if(i.businessItem.offerTypes[a]._id==i.businessItem._offerTypeId){var n=i.businessItem.offerTypes[a];i.businessItem.selectedOfferType={name:n.name,displayName:n.displayName,description:n.description,itemType:n.itemType,mustBeSelected:!0,_id:n._id}}i.businessItem.availableWeeks=[{_id:1,name:"1 week ahead"},{_id:2,name:"2 weeks ahead"},{_id:3,name:"3 weeks ahead"},{_id:4,name:"4 weeks ahead"},{_id:5,name:"5 weeks ahead"},{_id:6,name:"6 weeks ahead"},{_id:7,name:"7 weeks ahead"}],i.businessItem.offerRegularityTypes=[{name:"one-off",displayName:"This is an offer that runs everyday for a certain period of time.",itemType:"offerRegularityType",mustBeSelected:!0},{name:"weekly",displayName:"This is a weekly offer that occurs on a certain day every week.",itemType:"offerRegularityType",mustBeSelected:!0}],null==i.businessItem.weekdayName?i.businessItem.selectedOfferRegularityType={name:"one-off",displayName:"This is an offer that runs everyday for a certain period of time.",mustBeSelected:!0}:i.businessItem.selectedOfferRegularityType={name:"weekly",displayName:"This is a weekly offer that occurs on a certain day every week.",mustBeSelected:!0},i.businessItem.chosenWeeksAhead={_id:1,name:"1 week ahead"},i.businessItem.showWeeksAhead=!1,i.businessItem.selectedDate1=new Date(i.businessItem.officialStartDate),i.businessItem.selectedDate2=new Date(i.businessItem.officialEndDate),i.todaysDate=new Date,i.finalDate=new Date,i.businessItem.dateChosen=!1;var r=new Date(i.businessItem.officialStartDate);for(r=r.setDate(r.getDate()+60),a=0;a<i.businessItem.availableWeeks.length;a++)if(i.businessItem.availableWeeks[a]._id==i.businessItem.weeksAhead){var s=a;i.businessItem.chosenWeeksAhead={_id:i.businessItem.availableWeeks[s]._id},i.businessItem.chosenWeeksAhead.name=i.businessItem.availableWeeks[s].name}i.ipObj1={callback:function(e){i.businessItem.selectedDate1=new Date(e),i.businessItem.weekdayName=C.days[i.businessItem.selectedDate1.getDay()],i.businessItem.startDateTimeString=C.convertToDate(i,i.businessItem.selectedDate1),i.ipObj1.inputDate=new Date(e);var t=angular.copy(i.businessItem.selectedDate1);i.ipObj2.from=angular.copy(i.businessItem.selectedDate1),i.ipObj2.to=angular.copy(new Date(t.setDate(t.getDate()+60))),i.businessItem.dateChosen=!0},disabledDates:[],from:new Date,to:new Date(i.businessItem.officialEndDate)<new Date(i.finalDate.getDate()+30)?new Date(i.businessItem.officialEndDate):i.finalDate.setDate(i.finalDate.getDate()+30),inputDate:new Date(i.businessItem.officialStartDate),mondayFirst:!0,disableWeekdays:[],closeOnSelect:!0,templateType:"popup"},i.ipObj2={callback:function(e){i.businessItem.selectedDate2=new Date(e),i.businessItem.endDateTimeString=C.convertToDate(i,i.businessItem.selectedDate2),i.ipObj2.inputDate=new Date(e);var t=new Date,n=t.setDate(t.getDate()+30);i.ipObj1.to=new Date(e)>new Date(n)?angular.copy(new Date(n)):angular.copy(new Date(e))},disabledDates:[],from:new Date(i.businessItem.officialStartDate),to:r,inputDate:new Date(i.businessItem.officialEndDate),mondayFirst:!0,disableWeekdays:[],closeOnSelect:!0,templateType:"popup"},i.openDatePicker=function(e){v.openDatePicker(e)},i.toggleOfferCategory=function(e){i.businessItem.showOfferCategories=!i.businessItem.showOfferCategories},i.selectOfferCategory=function(e){i.businessItem.chosenOfferCat=e,i.businessItem.showOfferCategories=!i.businessItem.showOfferCategories},i.toggleWeeksAheadVisibility=function(){i.businessItem.showWeeksAhead=!i.businessItem.showWeeksAhead},i.selectWeeksAhead=function(e){i.businessItem.chosenWeeksAhead=e,i.businessItem.showWeeksAhead=!1},i.updateOffer=function(){e.prepareEventData=function(e,t,n,i,o){t.startDateTimeStringToSubmit=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()+" 00:00",t.endDateTimeStringToSubmit=null==e.businessItem.selectedDate2||"weekly"==e.businessItem.selectedOfferRegularityType.name?null:i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" 00:00",t.weekdayIndex=0==n.getDay()?7:n.getDay(),t.weekdayIndex="weekly"==e.businessItem.selectedOfferRegularityType.name?t.weekdayIndex:null,t.weeksAhead="one-off"==e.businessItem.selectedOfferRegularityType.name?0:e.businessItem.chosenWeeksAhead._id};var t=i.businessItem;e.prepareEventData(i,t,i.businessItem.selectedDate1,i.businessItem.selectedDate2,i.businessItem);var n=function(t){u.updateOffer(t._id,e.user._id,t.selectedOfferType._id,t.chosenOfferCat._id,t.title,t.description,t.startDateTimeStringToSubmit,t.endDateTimeStringToSubmit,t.weeksAhead,t.weekdayIndex).success(function(t){e.backButtonFunction(),e.appLoading=!1,e.editing=!1,e.currentlyEditing=!1,i.editing=!1}).error(function(){n(t)})};n(t)}}).error(function(){i.getBusinessItem()})};break;case"OwnEvents":i.finalDate=new Date;var l={callback:function(e){i.businessItem.selectedDate1=new Date(e),i.businessItem.dateInputHTML=C.convertToDate(i,i.businessItem.selectedDate1),l.inputDate=new Date(e),i.businessItem.dateChosen=!0},disabledDates:[],from:new Date,to:i.finalDate.setDate(i.finalDate.getDate()+90),inputDate:new Date,mondayFirst:!0,disableWeekdays:[],closeOnSelect:!0,templateType:"popup"};i.toggleTownCategory=function(){i.showTownCategories=!i.showTownCategories},i.toggleMusicCategory=function(e){for(i.businessItem.currentMusicCategoryIndexBeingToggled=e.index,a=0;a<i.businessItem.chosenMusicStyleObjects.length;a++)i.businessItem.chosenMusicStyleObjects[a].index!=e.index&&(i.businessItem.chosenMusicStyleObjects[a].showMusicCategories=!1);e.showMusicCategories=!e.showMusicCategories,i.businessItem.showMusicCategories=e.showMusicCategories},i.selectMusicCategory=function(e){for(i.businessItem.chosenMusicStyle=e,a=0;a<i.businessItem.chosenMusicStyleObjects.length;a++)if(i.businessItem.chosenMusicStyleObjects[a].index==i.businessItem.currentMusicCategoryIndexBeingToggled)for(i.businessItem.chosenMusicStyleIds[a]=e._id,null!=i.businessItem.chosenMusicStyleObjects[a]._id&&i.businessItem.musicStyles.push({_id:i.businessItem.chosenMusicStyleObjects[a]._id,name:i.businessItem.chosenMusicStyleObjects[a].name}),i.businessItem.chosenMusicStyleObjects[a]._id=e._id,i.businessItem.chosenMusicStyleObjects[a].name=e.name,i.businessItem.chosenMusicStyleObjects[a].showMusicCategories=!1,b=0;b<i.businessItem.musicStyles.length;b++)i.businessItem.musicStyles[b].name==e.name&&i.businessItem.musicStyles.splice(b,1);i.businessItem.showMusicCategories=!1},i.removeMusicStyle=function(e){var t=null;for(i.businessItem.showMusicCategories=!1,a=0;a<i.businessItem.chosenMusicStyleObjects.length;a++)i.businessItem.chosenMusicStyleObjects[a].index==e.index&&(t=a,null!=i.businessItem.chosenMusicStyleObjects[a]._id&&i.businessItem.musicStyles.push({_id:i.businessItem.chosenMusicStyleObjects[a]._id,name:i.businessItem.chosenMusicStyleObjects[a].name})),i.businessItem.chosenMusicStyleObjects[a].index>e.index&&(i.businessItem.chosenMusicStyleObjects[a].index=i.businessItem.chosenMusicStyleObjects[a].index-1),a==i.businessItem.chosenMusicStyleObjects.length-1&&(i.businessItem.chosenMusicStyleIds.splice(t,1),i.businessItem.chosenMusicStyleObjects.splice(t,1));i.businessItem.currentMusicStyleIndexToAdd=i.businessItem.currentMusicStyleIndexToAdd-1},i.newMusicStyle=function(){if(3==i.businessItem.currentMusicStyleIndexToAdd)return!1;i.businessItem.chosenMusicStyleObjects.push({index:i.businessItem.currentMusicStyleIndexToAdd,_id:null,name:"Select a Music Style",showMusicCategories:!1}),i.businessItem.chosenMusicStyleIds.push(null),i.businessItem.currentMusicStyleIndexToAdd=i.businessItem.currentMusicStyleIndexToAdd+1},i.toggleEventDateArrangement=function(e){"weekly"==e?(i.businessItem.eventIsOneOff=!1,i.businessItem.eventIsWeekly=!0):(i.businessItem.eventIsOneOff=!0,i.businessItem.eventIsWeekly=!1)},i.openDatePicker=function(){v.openDatePicker(l)},i.toggleWeeksAheadVisibility=function(){i.businessItem.showWeeksAhead=!i.businessItem.showWeeksAhead},i.selectWeeksAhead=function(e){i.businessItem.chosenWeeksAhead=e,i.businessItem.showWeeksAhead=!1},i.getBusinessItem=function(){f.getAvailableMusicStyles().success(function(t){var r=function(){d.getEvent(n._id).success(function(n){if(e.debugModeLog({msg:"BusinessItemCtrl getEvent successData",data:n}),e.pageTitle="Event Error",i.pageTitle=e.pageTitle,"null"!=n&&null!=n){for(o(n[0]),i.businessItem=n[0],e.pageTitle=i.businessItem.name,i.pageTitle=e.pageTitle,i.businessItem.musicStyles=t,l.inputDate=new Date(i.businessItem.DATE),i.businessItem.currentMusicStyleIndexToAdd=0,i.businessItem.chosenMusicStyleObjects=[],i.businessItem.chosenMusicStyleIds=[],i.businessItem.chosenWeekday={_id:null,name:"1 week ahead"},i.businessItem.chosenWeeksAhead={_id:1,name:"1 week ahead"},i.businessItem.eventHasGuestList=!1,i.businessItem.showWeeksAhead=!1,i.businessItem.guestListMax=null!=i.businessItem.guestListMax?parseInt(i.businessItem.guestListMax):null,i.businessItem.availableWeeks=[{_id:1,name:"1 week ahead"},{_id:2,name:"2 weeks ahead"},{_id:3,name:"3 weeks ahead"},{_id:4,name:"4 weeks ahead"},{_id:5,name:"5 weeks ahead"},{_id:6,name:"6 weeks ahead"},{_id:7,name:"7 weeks ahead"}],a=0;a<i.businessItem.availableWeeks.length;a++)if(i.businessItem.availableWeeks[a]._id==i.businessItem.weeksAhead){var r=a;i.businessItem.chosenWeeksAhead={_id:i.businessItem.availableWeeks[r]._id},i.businessItem.chosenWeeksAhead.name=i.businessItem.availableWeeks[r].name}if(i.eventRegularityTypes=[{name:"one-off",displayName:"This is a one-off event",itemType:"eventRegularityType"},{name:"weekly",displayName:"This is a weekly event",itemType:"eventRegularityType"}],i.businessItem.selectedEventRegularityType={name:"",displayName:"",mustBeSelected:!0},i.businessItem.selectedEventRegularityType.name=null!=i.businessItem.weekdayIndexId?"weekly":"one-off",i.businessItem.selectedEventRegularityType.displayName=null!=i.businessItem.weekdayIndexId?"This is a weekly event":"This is a one-off event",i.eventGuestListOptions=[{name:"false",displayName:"There is no event guestlist for users",mustBeSelected:!0,itemType:"eventGuestListOption"},{name:"true",displayName:"There is an event guestlist for users",mustBeSelected:!0,itemType:"eventGuestListOption"}],i.businessItem.selectedEventGuestListOption={name:"",displayName:"",mustBeSelected:!0},i.businessItem.selectedEventGuestListOption.name=null!=i.businessItem.isGuestListAllowed?"true":"false",i.businessItem.selectedEventGuestListOption.displayName=null!=i.businessItem.isGuestListAllowed?"There is an event guestlist for users":"There is no event guestlist for users",i.guestListMaxInput=[{_id:1}],null!=i.businessItem.guestListMax&&(i.guestListMaxInput[0].val=i.businessItem.guestListMax),i.businessItem.selectedDate1=new Date,i.businessItem.todaysDate=new Date,i.businessItem.finalDate=new Date,i.businessItem.dateChosen=!1,i.businessItem.dateInputHTML="Select a date for this event",i.businessItem.eventHasGuestList=null!=i.businessItem.isGuestListAllowed,i.businessItem.guestListMax=null==i.businessItem.guestListMax?i.businessItem.eventHasGuestList?"unlimited":null:parseInt(i.businessItem.guestListMax),i.businessItem.guestListCurrentTotal="null"==i.businessItem.guestListCurrentTotal?0:i.businessItem.guestListCurrentTotal,i.businessItem.eventIsOneOff=null==i.businessItem.weekdayIndexId,i.businessItem.eventIsWeekly=null!=i.businessItem.weekdayIndexId,i.businessItem.selectedDate1=new Date(i.businessItem.DATE.split(" ")[0]),i.businessItem.dateInputHTML=C.convertToDate(i,i.businessItem.selectedDate1),null!=i.businessItem.musicStyle1){for(i.businessItem.chosenMusicStyleObjects.push({index:i.businessItem.currentMusicStyleIndexToAdd,_id:i.businessItem.musicStyle1Id,name:i.businessItem.musicStyle1,showMusicCategories:!1}),i.businessItem.chosenMusicStyleIds.push(i.businessItem.musicStyle1Id),b=0;b<i.businessItem.musicStyles.length;b++)i.businessItem.musicStyles[b].name==i.businessItem.musicStyle1&&i.businessItem.musicStyles.splice(b,1);i.businessItem.currentMusicStyleIndexToAdd=i.businessItem.currentMusicStyleIndexToAdd+1}if(null!=i.businessItem.musicStyle2){for(i.businessItem.chosenMusicStyleObjects.push({index:i.businessItem.currentMusicStyleIndexToAdd,_id:i.businessItem.musicStyle2Id,name:i.businessItem.musicStyle2,showMusicCategories:!1}),i.businessItem.chosenMusicStyleIds.push(i.businessItem.musicStyle2Id),b=0;b<i.businessItem.musicStyles.length;b++)i.businessItem.musicStyles[b].name==i.businessItem.musicStyle2&&i.businessItem.musicStyles.splice(b,1);i.businessItem.currentMusicStyleIndexToAdd=i.businessItem.currentMusicStyleIndexToAdd+1}if(null!=i.businessItem.musicStyle3){for(i.businessItem.chosenMusicStyleObjects.push({index:i.businessItem.currentMusicStyleIndexToAdd,_id:i.businessItem.musicStyle3Id,name:i.businessItem.musicStyle3,showMusicCategories:!1}),i.businessItem.chosenMusicStyleIds.push(i.businessItem.musicStyle3Id),b=0;b<i.businessItem.musicStyles.length;b++)i.businessItem.musicStyles[b].name==i.businessItem.musicStyle3&&i.businessItem.musicStyles.splice(b,1);i.businessItem.currentMusicStyleIndexToAdd=i.businessItem.currentMusicStyleIndexToAdd+1}if(null!=i.businessItem.musicStyle4){for(i.businessItem.chosenMusicStyleObjects.push({index:i.businessItem.currentMusicStyleIndexToAdd,_id:i.businessItem.musicStyle4Id,name:i.businessItem.musicStyle4,showMusicCategories:!1}),i.businessItem.chosenMusicStyleIds.push(i.businessItem.musicStyle4Id),b=0;b<i.businessItem.musicStyles.length;b++)i.businessItem.musicStyles[b].name==i.businessItem.musicStyle4&&i.businessItem.musicStyles.splice(b,1);i.businessItem.currentMusicStyleIndexToAdd=i.businessItem.currentMusicStyleIndexToAdd+1}}}).error(function(){r()})};r()}).error(function(){i.getBusinessItem()})},i.updateEvent=function(t,o,r,s,l){e.appLoading=!0,e.prepareEventData=function(t,n,i,o){n._businessPlaceId=null,n.dateTimeString=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" 00:00",n.weekdayIndex=0==i.getDay()?7:i.getDay(),n.weekdayIndex="weekly"==t.businessItem.selectedEventRegularityType.name?n.weekdayIndex:null,"Nightclub"==e.user.businessTypeName||e.user.businessTypeName,n._businessPlaceId=e.user._businessPlaceId,n.guestListMax=null==t.guestListMaxInput[0].val?0:t.guestListMaxInput[0].val,n.weeksAhead="one-off"==t.businessItem.selectedEventRegularityType.name?0:t.businessItem.chosenWeeksAhead._id,n.eventHasGuestList="true"==t.businessItem.selectedEventGuestListOption.name?1:0};var c=i.businessItem;c.guestListMax=null==i.guestListMaxInput[0].val?0:i.guestListMaxInput[0].val,e.prepareEventData(i,c,i.businessItem.selectedDate1,i.businessItem);var u=function(t,o,r,s,l,c,p,g,m,f,h){d.updateEvent(n._id,t,o,r,s,l,c,p,g,m,f,h,i.businessItem.chosenMusicStyleObjects).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl updateEvent successData",data:t});n._id,n._id,n._id;if(null!=t){var o=function(t){null!=t.items&&t.items.length>0&&e.prepareMessageNotificationFinal(t.items,t.headings,t.contents,t.dataObj)};for(a=0;a<t.length;a++)if(fullNotificationsObject[t[a].alertType].items.push(t[a]._recipientProfileId),a==t.length-1){var r=null;for(b=0;b<fullNotificationsArray.length;b++)r=fullNotificationsObject[fullNotificationsArray[b]],r.items.length>0&&o(r)}}e.backButtonFunction(),e.appLoading=!1,e.editing=!1,e.currentlyEditing=!1,i.editing=!1}).error(function(){u(t,o,r,s,l,c,p,g,m,f,h)})};u(c._businessPlaceId,c.name,c.description,c.dateTimeString.split(" ")[0],c.dressCode,c.guestListMax,c.dealsOnTheNight,c.extraInfo,c.eventHasGuestList,c.weekdayIndex,c.weeksAhead)};break;case"RequestedTableBookings":case"OwnTableBookings":e.pageLoading=!0,e.topRightButtonIsEdit=!1,i.getBusinessItem=function(){e.pageTitle=n.itemType?"Accepted Table Booking":"Requested Table Booking",i.pageTitle=e.pageTitle,m.getTableBookingById(n._id).success(function(t){i.businessItem=t[0],t[0].timeString=C.getShortenedTimeString(t[0].dateTimeRequested),t[0].timeIntegerString=C.getTimeInTotalSeconds(t[0].dateTimeRequested),t[0].dateString=C.getShortenedDateString(t[0].dateTimeRequested),t[0].convertedDateString=C.convertToDate(i,new Date(t[0].dateString)),null!=y&&(y.inputTime=t[0].timeIntegerString),null!=e.user.hideRejectButtonInTableBookingResponse?e.pageLoading=!1:c.getRestaurantBusinessSettingsForBusiness(e.user._id).success(function(t){e.debugModeLog({msg:"AccountSettingsCtrl getAllTonightsFeedOptionsForBusiness successData",data:t}),e.user.hideRejectButtonInTableBookingResponse=t[0].hideRejectButtonInTableBookingResponse,e.user.showUsersEmailAndPhoneInTableBookingResponse=t[0].showUsersEmailAndPhoneInTableBookingResponse,e.pageLoading=!1}).error(function(e){console.log(e)})}).error(function(){i.getBusinessItem()})},i.finishUpdatingTableBooking=function(t,o,r,a,s){m.updateTableBooking(n._id,t,o,r,a,s).success(function(i){if(1==t||1==o||1==r||0==o&&0==t&&0==r&&null!=s){var a="accepted";1==o?a="rejected":1==r&&(a="cancelled"),a+=null!=s?", but a different Time was suggested.":".";var l="Your table booking request was "+a,c={actionFunction:"goToBusinessItem",businessItemType:"myNYTEActivity",businessItemTypeDetailed:"Table Booking",_businessItemId:n._id},d=[i[0]._customerProfileId];e.prepareMessageNotificationFinal(d,l,"Table Booking Updated",c)}e.$broadcast("table-booking-updated"),e.backButtonFunction(),e.appLoading=!1}).error(function(){i.finishUpdatingTableBooking(t,o,r,a,s)})};var y={callback:function(t){if(void 0===t);else if(t==i.businessItem.timeIntegerString)window.setTimeout(function(){s.show({title:"Select a different time",template:"<p>The booking time you have suggested is the same as the booking time originally requested. Please suggest a different time, or you can accept the booking.</p>",scope:i,buttons:[{text:"Close",onTap:function(e){window.setTimeout(function(){i.openTimePicker()},50)}}]})},10);else{e.appLoading=!0,i.selectedTime=new Date(1e3*t),i.selectedHour=i.selectedTime.getUTCHours()<10?"0"+i.selectedTime.getUTCHours():i.selectedTime.getUTCHours(),i.selectedMinutes=i.selectedTime.getUTCMinutes()<10?"0"+i.selectedTime.getUTCMinutes():i.selectedTime.getUTCMinutes();var n=i.businessItem.dateTimeRequested.substr(0,i.businessItem.dateTimeRequested.indexOf(" "))+" "+i.selectedHour+":"+i.selectedMinutes;i.finishUpdatingTableBooking(0,0,0,0,n)}},inputTime:64800,format:12,step:10,setLabel:"Suggest"};i.openTimePicker=function(){r.openTimePicker(y)},i.updateTableBooking=function(t){e.appLoading=!0;var n=0,o=0,r=0;"accept"==t?n=1:"reject"==t?o=1:"cancel"==t&&(n=i.businessItem.isAccepted,r=1),i.finishUpdatingTableBooking(n,o,r,0,null)};break;case"RequestedTakeawayOrders":e.pageTitle="Requested Takeaway Order",i.pageTitle=e.pageTitle,e.topRightButtonIsEdit=!1,i.getBusinessItem=function(){var t=0;g.getMenuOrderForBusiness(n._id).success(function(n){if(e.debugModeLog({msg:"BusinessItemCtrl getMenuOrderForBusiness successData",data:n}),"null"!=n&&null!=n){for(i.businessItem=n,a=0;a<i.businessItem.length;a++){var o=i.businessItem[a].quantity*parseFloat(i.businessItem[a].Price);i.businessItem[a].totalPrice=o.formatMoney(2),t+=parseFloat(i.businessItem[a].Price)*i.businessItem[a].quantity}i.menuOrderTotalPrice=t.formatMoney(2)}}).error(function(){i.getBusinessItem()})},i.respondToMenuOrder=function(o){var r="";r="accept"==o?"acceptMenuOrder":"reject"==o?"rejectMenuOrder":"acceptMenuOrderWithConditions",g.acceptOrRejectMenuOrder(n._id,r).success(function(n){e.debugModeLog({msg:"BusinessItemCtrl acceptOrRejectMenuOrder successData",data:n}),e.$broadcast("menu-order-updated"),t.go("app.businessItems",{itemType:"RequestedTakeawayOrders",timeScale:"present"})}).error(function(){i.respondToMenuOrder(o)})};break;case"OwnTakeawayOrders":e.pageTitle="Accepted Takeaway Order",i.pageTitle=e.pageTitle,e.topRightButtonIsEdit=!1,i.getBusinessItem=function(){var t=0;g.getMenuOrderForBusiness(n._id).success(function(n){if(e.debugModeLog({msg:"BusinessItemCtrl getMenuOrderForBusiness successData",data:n}),"null"!=n&&null!=n){for(i.businessItem=n,a=0;a<i.businessItem.length;a++){var o=i.businessItem[a].quantity*parseFloat(i.businessItem[a].Price);i.businessItem[a].totalPrice=o.formatMoney(2),t+=parseFloat(i.businessItem[a].Price)*i.businessItem[a].quantity}i.menuOrderTotalPrice=t.formatMoney(2)}}).error(function(){i.getBusinessItem()})};break;case"MenuItemCategories":i.getBusinessItem=function(){i.existingCatNames=[],g.getMenuItemCategoriesForBusiness(e.user._id).success(function(t){if("null"!=t&&null!=t)for(a=0;a<t.length;a++)i.existingCatNames.push(t[a].name);var o=function(){g.getMenuItemCategoryDetailsForBusiness(e.user._id,n._id).success(function(t){"null"!=t&&(i.businessItem=t[0],i.originalCatName=t[0].name),i.updateMenuCategory=function(t,o){e.appLoading=!0,g.updateMenuItemCategoryDetailsForBusiness(e.user._id,n._id,t,o).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl updateMenuItemCategoryDetailsForBusiness successData",data:t}),e.appLoading=!1,e.editing=!1,e.currentlyEditing=!1,i.editing=!1}).error(function(){i.updateMenuCategory(t,o)})},i.deleteMenuCategory=function(){e.appLoading=!0,g.deleteMenuCategory(i.businessItem._id,e.user._id).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl deleteMenuCategory successData",data:t}),e.appLoading=!1,e.editing=!1,e.currentlyEditing=!1,i.editing=!1,e.backButtonFunction()}).error(function(){i.deleteMenuItemCategory()})},i.requestMenuCategoryDelete=function(){s.show({title:"Delete Menu Category",template:"<p>This action cannot be undone. Are you sure you want to delete this Menu Category?</p>",scope:i,buttons:[{text:"Cancel",onTap:function(e){}},{text:"Delete",type:"button-positive",onTap:function(t){e.appLoading=!0,g.deleteMenuCategory(i.businessItem._id,e.user._id).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl deleteMenuCategory successData",data:t}),console.log(t),"false"==t[0].return?(e.appLoading=!1,s.show({title:"Cannot Delete Menu Category",template:"<p>This Menu Category cannot be deleted, as it is currently applied to items which exist in your Menu. Please check these Menu Items, and try again.</p>",scope:i,buttons:[{text:"Close",onTap:function(e){}}]})):(e.appLoading=!1,e.editing=!1,e.currentlyEditing=!1,i.editing=!1,e.backButtonFunction())}).error(function(){i.deleteMenuCategory()})}}]})}}).error(function(){o()})};o()}).error(function(){i.getBusinessItem()})};break;case"MenuItemSubCategories":i.getBusinessItem=function(){i.existingCatNames=[],g.getMenuItemSubCategoriesForBusiness(e.user._id).success(function(t){if("null"!=t&&null!=t)for(a=0;a<t.length;a++)i.existingCatNames.push(t[a].name);var o=function(){g.getMenuItemSubCategoryDetailsForBusiness(e.user._id,n._id).success(function(t){"null"!=t&&(i.businessItem=t[0],i.originalCatName=t[0].name),i.updateMenuSubCategory=function(t,o){e.appLoading=!0,g.updateMenuItemSubCategoryDetailsForBusiness(e.user._id,n._id,t,o).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl updateMenuItemSubCategoryDetailsForBusiness successData",data:t}),e.appLoading=!1,e.editing=!1,e.currentlyEditing=!1,i.editing=!1}).error(function(){i.updateMenuSubCategory(t,o)})},i.requestMenuSubCategoryDelete=function(){s.show({title:"Delete Menu Sub-Category",template:"<p>This action cannot be undone. Are you sure you want to delete this Menu Item?</p><p>Additional Note: All your menu items which currently have this sub-category applied to them will no longer have a sub-category applied to them.</p>",scope:i,buttons:[{text:"Cancel",onTap:function(e){}},{text:"Delete",type:"button-positive",onTap:function(t){e.appLoading=!0,g.deleteMenuSubCategory(i.businessItem._id,e.user._id).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl deleteMenuSubCategory successData",data:t}),e.appLoading=!1,e.editing=!1,e.currentlyEditing=!1,i.editing=!1,e.backButtonFunction()}).error(function(){i.deleteMenuSubCategory()})}}]})}}).error(function(){o()})};o()}).error(function(){i.getBusinessItem()})};break;case"OwnMenuItems":i.showTagOptions=!0,i.showExtraOptionsOptions=!0,i.getBusinessItem=function(){i.existingCatNames=[],i.appliedOptions=[],i.appliedOptionsNames=[],i.appliedTags=[],i.appliedTagsNames=[],i.preappliedTags=[],i.preappliedTagsNames=[],i.preappliedOptions=[],i.preappliedOptionsNames=[];var t=function(){i.preappliedTags=i.appliedTags,i.preappliedTagsNames=i.appliedTagsNames,i.preappliedOptions=i.appliedOptions,i.preappliedOptionsNames=i.appliedOptionsNames},o=function(){i.appliedTags=i.preappliedTags,i.appliedTagsNames=i.preappliedTagsNames,i.appliedOptions=i.preappliedOptions,i.appliedOptionsNames=i.preappliedOptionsNames};i.extraTopRightFunction=function(){t()};var r=function(){g.getMenuItem(e.user._id,n._id).success(function(n){for(i.businessItem=n[0],i.selectedCategory={_id:i.businessItem._menuItemCategoryId,name:i.businessItem.menuItemCategoryName},i.selectedSubCategory=null!=i.businessItem._menuItemSubCategoryId?{_id:i.businessItem._menuItemSubCategoryId,name:i.businessItem.menuItemSubCategoryName}:{_id:null,name:"Select a Sub-Category"},a=0;a<n.length;a++){Math.round(100*parseFloat(n[a].Price));n[a].Price=parseFloat(n[a].Price),null!=n[a]._menuItemTagId&&-1==i.appliedTagsNames.indexOf(n[a].menuItemTagName)&&(i.appliedTags.push({_id:n[a]._menuItemTagId,name:n[a].menuItemTagName,_menuItemTagGroupId:n[a]._menuItemTagGroupId}),i.appliedTagsNames.push(n[a].menuItemTagName)),null!=n[a]._menuItemExtraOptionId&&-1==i.appliedOptionsNames.indexOf(n[a].menuItemExtraOptionName)&&(i.appliedOptions.push({_id:n[a]._menuItemExtraOptionId,Name:n[a].menuItemExtraOptionName}),i.appliedOptionsNames.push(n[a].menuItemExtraOptionName))}t(),i.availableTags={},i.availableTags.singularTags=[],i.availableTags.groupTags=[];var o=function(){g.getAllMenuItemTags().success(function(t){for(e.debugModeLog({msg:"BusinessItemCtrl getAllMenuItemTags successData",data:t}),a=0;a<t.length;a++)if(null==t[a]._menuItemTagGroupId)i.availableTags.singularTags.push(t[a]);else{var n=!1;for(b=0;b<i.availableTags.groupTags.length;b++)i.availableTags.groupTags[b].array.push(t[a]),n=!0;n||i.availableTags.groupTags.push({_menuItemTagGroupId:t[a]._menuItemTagGroupId,array:[t[a]]})}}).error(function(){o()})};o();var r=function(){g.getMenuItemCategoriesForBusiness(e.user._id).success(function(e){i.menuItemCategories=e}).error(function(){r()})};r();var s=function(){g.getMenuItemSubCategoriesForBusiness(e.user._id).success(function(e){i.menuItemSubCategories=e,i.selectedSubCategory.name=0==i.menuItemSubCategories.length?"No Sub-Categories to select":i.selectedSubCategory.name}).error(function(){s()})};s();var l=function(){g.getMenuItemOptionsForBusiness(e.user._id).success(function(e){i.menuItemOptions=e||[]}).error(function(){l()})};l()}).error(function(){r()})};r(),i.selectCategory=function(e){i.showMenuItemCategories=!1,i.selectedCategory=e},i.toggleMenuCatDisplay=function(){i.showMenuItemCategories=i.editing?!i.showMenuItemCategories:i.showMenuItemCategories},i.selectSubCategory=function(e){i.showMenuItemSubCategories=!1,i.selectedSubCategory=e},i.toggleMenuSubCatDisplay=function(){i.showMenuItemSubCategories=i.editing?!i.showMenuItemSubCategories:i.showMenuItemSubCategories},i.addItemToMenu=function(e,t,n){completeAdd(e,t,n)},i.applyOption=function(e){var t=i.preappliedOptionsNames.indexOf(e.Name);-1==t?(i.preappliedOptionsNames.push(e.Name),i.preappliedOptions.push(e)):(i.preappliedOptionsNames.splice(t,1),i.preappliedOptions.splice(t,1))},i.applyTag=function(e,t){var n=i.preappliedTagsNames.indexOf(t.name);if(-1==n)for(i.preappliedTags.push(t),i.preappliedTagsNames.push(t.name),a=0;a<i.preappliedTags.length;a++)null!=i.preappliedTags[a]._menuItemTagGroupId&&i.preappliedTags[a]._menuItemTagGroupId==t._menuItemTagGroupId&&i.preappliedTags[a]._id!=t._id&&(i.preappliedTags.splice(a,1),i.preappliedTagsNames.splice(a,1));else i.preappliedTags.splice(n,1),i.preappliedTagsNames.splice(n,1)},i.updateMenuItem=function(t,r,s){e.appLoading=!0;var l=[];for(a=0;a<i.appliedOptions.length;a++)l.push({_id:i.appliedOptions[a]._id});var c=[];for(a=0;a<i.appliedTags.length;a++)c.push({_id:i.appliedTags[a]._id});g.updateMenuItemDetails(e.user._id,n._id,i.selectedCategory._id,i.selectedSubCategory._id,t,r,s,l,c).success(function(t){o(),e.$broadcast("menu-items-changed"),e.appLoading=!1,e.editing=!1,e.currentlyEditing=!1,i.editing=!1}).error(function(){i.updateMenuItem(t,r,s)})},i.requestMenuItemArchive=function(){s.show({title:"Delete Menu Item",template:"<p>This action cannot be undone without MyNyte's assistance. Are you sure you want to delete this Menu Item?</p>",scope:i,buttons:[{text:"Cancel",onTap:function(e){}},{text:"Delete",type:"button-positive",onTap:function(t){e.appLoading=!0,g.archiveMenuItem(i.businessItem._id,e.user._id).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl archiveMenuItem successData",data:t}),e.appLoading=!1,e.editing=!1,e.currentlyEditing=!1,i.editing=!1,e.$broadcast("menu-items-changed"),e.backButtonFunction()}).error(function(){i.deleteMenuItemCategory()})}}]})}};break;case"MenuItemTemplateOptions":i.getBusinessItem=function(){i.showChangeOrderButtons=!1;var t=function(){g.getMenuTemplateOptionCategories().success(function(t){e.debugModeLog({msg:"BusinessItemCtrl getMenuTemplateOptionCategories successData",data:t}),i.menuItemTemplateOptionCategories="null"!=t&&null!=t?t:[]}).error(function(){t()})};t();var o=function(){g.getMenuItemTemplateOption(e.user._id,n._id).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl getMenuItemTemplateOption successData",data:t});var o=[],r=[];for(t="null"!=t&&null!=t?t:[],a=0;a<t.length;a++)-1==r.indexOf(t[a]._id)?(o.push({name:t[a].Name,relListingId:t[a]._id,_id:t[a]._id,priceRelevant:"1"==t[a].PriceRelevant,quantityRelevant:"1"==t[a].QuantityRelevant,categoryName:t[a].menuExtraOptionCategoryName,type:t[a].Type,options:[{name:t[a].menuExtraOptionOptionName,extraPrice:null!=t[a].ExtraPrice?parseFloat(t[a].ExtraPrice):0,_id:t[a]._menuExtraOptionOptionId,orderIndex:t[a].orderIndex}]}),r.push(t[a]._id)):o[r.indexOf(t[a]._id)].options.push({name:t[a].menuExtraOptionOptionName,extraPrice:null!=t[a].ExtraPrice?parseFloat(t[a].ExtraPrice):0,_id:t[a]._menuExtraOptionOptionId,orderIndex:t[a].orderIndex});i.selectedCategory={_id:t[0]._menuExtraOptionCategoryId,Name:t[0].menuExtraOptionCategoryName},i.businessItem=o[0],i.selectCategory=function(e){i.showMenuItemTemplateOptionCategories=!1,i.selectedCategory=e},i.toggleMenuCatDisplay=function(){i.showMenuItemTemplateOptionCategories=!i.showMenuItemTemplateOptionCategories},i.togglePriceRel=function(e){e.priceRelevant=!e.priceRelevant},i.toggleQuantityRel=function(e){e.quantityRelevant=!e.quantityRelevant},i.updateMenuItemTemplateOption=function(t){g.updateMenuItemTemplateOption(e.user._id,t,i.selectedCategory._id).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl updateMenuItemTemplateOption successData",data:t}),e.appLoading=!1,e.editing=!1,e.currentlyEditing=!1,i.editing=!1}).error(function(){i.updateMenuItemTemplateOption(t)})},i.moveOptionChoiceUp=function(e){var t=parseInt(e.orderIndex)-1;for(a=0;a<i.businessItem.options.length;a++)if(i.businessItem.options[a].orderIndex==t){i.businessItem.options[a].orderIndex=t+1;var n=i.businessItem.options[a];i.businessItem.options.splice(a,1),i.businessItem.options.splice(a+1,0,n)}e.orderIndex=t},i.moveOptionChoiceDown=function(e){var t=parseInt(e.orderIndex)+1;for(a=0;a<i.businessItem.options.length;a++)if(i.businessItem.options[a].orderIndex==t){i.businessItem.options[a].orderIndex=t-1;var n=i.businessItem.options[a];i.businessItem.options.splice(a,1),i.businessItem.options.splice(a-1,0,n)}e.orderIndex=t},i.deleteOptionChoice=function(t){e.appLoading=!0,g.deleteMenuItemTemplateOptionOption(t._id).success(function(n){for(e.debugModeLog({msg:"BusinessItemCtrl deleteMenuItemTemplateOptionOption successData",data:n}),a=0;a<i.businessItem.options.length;a++)i.businessItem.options[a]._id==t._id&&(i.businessItem.options.splice(a,1),i.storedBusinessItem.options.splice(a,1)),i.businessItem.options[a].orderIndex>t.orderIndex&&(i.businessItem.options[a].orderIndex=parseInt(i.businessItem.options[a].orderIndex)-1,i.storedBusinessItem.options[a].orderIndex=parseInt(i.storedBusinessItem.options[a].orderIndex)-1);i.currentOptionBeingAdded.orderIndex=i.businessItem.options.length+1,e.appLoading=!1}).error(function(){i.deleteOptionChoice(t)})},i.currentOptionBeingAdded={name:"",extraPrice:0,orderIndex:i.businessItem.options.length+1},i.createOptionChoice=function(){e.appLoading=!0,g.createMenuItemTemplateOptionOption(n._id,i.currentOptionBeingAdded).success(function(t){for(e.debugModeLog({msg:"BusinessItemCtrl createMenuItemTemplateOptionOption successData",data:t}),i.businessItem.options.splice(i.currentOptionBeingAdded.orderIndex-1,0,i.currentOptionBeingAdded),a=i.currentOptionBeingAdded.orderIndex;a<i.businessItem.options.length;a++)i.businessItem.options[a].orderIndex=parseInt(i.businessItem.options[a].orderIndex)+1,i.storedBusinessItem.options[a].orderIndex=parseInt(i.storedBusinessItem.options[a].orderIndex)-1;i.currentOptionBeingAdded={name:"",extraPrice:0,orderIndex:i.businessItem.options.length+1},e.appLoading=!1}).error(function(){i.createOptionChoice()})}}).error(function(){o()})};o()};break;case"RequestedTaxiBookings":e.topRightButtonIsEdit=!1,i.getBusinessItem=function(){p.getTaxiBookingForBusiness(n._id,e.user._id).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl getTaxiBookingForBusiness successData",data:t}),"null"!=t&&null!=t&&(i.businessItem=t[0],i.businessItem.newLowestPrice=0,i.businessItem.newQuickestTime=0)}).error(function(){i.getBusinessItem()})},i.respondToTaxiBookingRequest=function(){p.respondToTaxiBooking(e.user._id,n._id,i.businessItem.newLowestPrice,i.businessItem.newQuickestTime).success(function(o){if(e.debugModeLog({msg:"BusinessItemCtrl respondToTaxiBooking successData",data:o}),"null"!=o&&null!=o){var r="Your recent Taxi Booking Request has been accepted by "+o[0]._claimedByBusinessBusinessName,a={actionFunction:"goToBusinessItem",businessItemType:"myNYTEActivity",businessItemTypeDetailed:"Taxi Booking",_businessItemId:n._id};if(e.prepareMessageNotificationFinal([o[0]._requestedByPersonProfileId],r,"Taxi Booking Accepted",a),o[0]._claimedByBusinessProfileId==e.user._profileId)s.show({title:"Taxi Booking Won!",template:"<p>You've won this Taxi Booking, and it should now appear in the My Claimed Taxi Bookings page.</p>",scope:i,buttons:[{text:"Close",onTap:function(e){}}]});else{var l={actionFunction:"goToBusinessItem",businessItemType:"OwnTaxiBookings",_businessItemId:n._id};e.prepareMessageNotificationFinal([o[0]._claimedByBusinessProfileId],"You've just won a recent Taxi Booking.","Taxi Booking Won",l)}}e.clearAllExpiredTransactions(),e.$broadcast("taxi-booking-response-sent"),t.go("app.businessItems",{itemType:"RequestedTaxiBookings"})}).error(function(){i.respondToTaxiBookingRequest()})};break;case"OwnTaxiBookings":e.topRightButtonIsEdit=!1,i.getBusinessItem=function(){p.getTaxiBookingForBusiness(n._id,e.user._id).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl getTaxiBookingForBusiness successData",data:t}),"null"!=t&&null!=t&&(i.businessItem=t[0],"1"==i.businessItem.quickestIsRequired?(i.responseType="LowestPrice",i.responseInputPlaceholder="00.00"):(i.responseType="QuickestTime",i.responseInputPlaceholder="00"))}).error(function(){i.getBusinessItem()})},i.updateTaxiBooking=function(o){p.updateTaxiBookingByPerson(n._id,cancelled,completed).success(function(n){e.debugModeLog({msg:"BusinessItemCtrl updateTaxiBookingByPerson successData",data:n}),"1"==i.businessItem.quickestIsRequired?i.businessItem.quickestTime=o:i.businessItem.lowestPrice=o,e.$broadcast("taxi-booking-response-sent"),t.go("app.businessItems",{itemType:"OwnTaxiBookings"})}).error(function(){i.updateTaxiBooking(o)})};break;case"Table Booking":e.topRightButtonIsEdit=!1,i.getBusinessItem=function(){m.getTableBookingById(n._id).success(function(e){i.businessItem=e[0],e[0].timeString=C.getShortenedTimeString(e[0].dateTimeRequested),e[0].suggestedTimeString=null==e[0].dateTimeSuggested?null:C.getShortenedTimeString(e[0].dateTimeSuggested),e[0].dateString=C.getShortenedDateString(e[0].dateTimeRequested),e[0].requestedTimeIntegerString=C.getTimeInTotalSeconds(e[0].dateTimeRequested),e[0].suggestedTimeIntegerString=null!=e[0].dateTimeSuggested?C.getTimeInTotalSeconds(e[0].dateTimeSuggested):null}).error(function(){i.getBusinessItem()})},i.finishUpdatingTableBooking=function(t,o,r,a,s){m.updateTableBookingByPerson(n._id,t,o,a,r,s).success(function(i){var l=null;1==t&&(l="confirmed"),1==o&&(l="rejected"),1==a&&(l="cancelled"),1==r&&(l="completed"),l+=null!=s&&1==o?", but a different Time was suggested.":".";var c="Table booking request was "+l,d={actionFunction:"goToBusinessItem",businessItemType:"RequestedTableBookings",_businessItemId:n._id},u=[i[0]._profileId];e.prepareMessageNotificationFinal(u,c,"Table Booking Updated",d),e.$broadcast("table-booking-updated"),e.backButtonFunction(),e.appLoading=!1}).error(function(){i.finishUpdatingTableBooking(t,o,r,a,s)})};var y={callback:function(t){if(void 0===t);else if(t==i.businessItem.requestedTimeIntegerString||t==i.businessItem.suggestedTimeIntegerString){var n=t==i.businessItem.suggestedTimeIntegerString?"<p>The booking time you have suggested is the same as the booking time the restaurant has suggested. Please suggest a different time, or you can accept the booking.</p>":"<p>The booking time you have suggested is the same as the booking time you originally requested, which was refused by the resaurant. Please suggest a different time.</p>";window.setTimeout(function(){s.show({title:"Select a different time",template:n,scope:i,buttons:[{text:"Close",onTap:function(e){window.setTimeout(function(){i.openTimePicker()},50)}}]})},10)}else{e.appLoading=!0,i.selectedTime=new Date(1e3*t),i.selectedHour=i.selectedTime.getUTCHours()<10?"0"+i.selectedTime.getUTCHours():i.selectedTime.getUTCHours(),i.selectedMinutes=i.selectedTime.getUTCMinutes()<10?"0"+i.selectedTime.getUTCMinutes():i.selectedTime.getUTCMinutes();var o=i.businessItem.dateTimeRequested.substr(0,i.businessItem.dateTimeRequested.indexOf(" "))+" "+i.selectedHour+":"+i.selectedMinutes;i.finishUpdatingTableBooking(0,0,0,0,o)}},inputTime:64800,format:12,step:10,setLabel:"Suggest"};i.updateTableBooking=function(t){e.appLoading=!0;var n="accept"==t?1:i.businessItem.isAccepted,o="reject"==t?1:i.businessItem.isRejected,r="cancel"==t?1:i.businessItem.isCancelled,a="complete"==t?1:i.businessItem.isCompleted;i.finishUpdatingTableBooking(n,o,r,a,null)},i.openTimePicker=function(){r.openTimePicker(y)};break;case"Taxi Booking":e.topRightButtonIsEdit=!1,i.finishUpdatingTaxiBooking=function(t,o){p.updateTaxiBookingByPerson(n._id,t,o).success(function(t){e.$broadcast("taxi-booking-updated"),e.backButtonFunction(),e.appLoading=!1}).error(function(){i.finishUpdatingTaxiBooking(t,o)})},i.updateTaxiBooking=function(t){e.appLoading=!0;var n="complete"==t?1:0,o="cancel"==t?1:0;i.finishUpdatingTaxiBooking(o,n)},i.getBusinessItem=function(){p.getTaxiBookingForPerson(n._id).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl getTaxiBookingForPerson successData",data:t}),"null"!=t&&(t[0].timeRequested=null!=t[0].bookingDateTime?C.getShortenedTimeString(t[0].bookingDateTime):null,t[0].dateRequested=null!=t[0].bookingDateTime?C.getShortenedDateString(t[0].bookingDateTime):null,t[0].dateRequested=null!=t[0].bookingDateTime?C.convertToDate(i,new Date(t[0].dateRequested)):null,i.businessItem=t[0])}).error(function(){i.getBusinessItem()})};break;case"Offer":e.topRightButtonIsEdit=!1,i.getBusinessItem=function(){var t=e.userLoggedIn?e.user._profileId:0;u.getOffer(n._id,t).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl getOffer successData",data:t}),"null"!=t&&(i.businessItem=t[0])}).error(function(){i.getBusinessItem()})};break;case"Event Entry":e.topRightButtonIsEdit=!1,i.finishUpdatingEventEntryBooking=function(t){d.updateEventEntryBookingByPerson(n._id,0,0,t).success(function(t){e.$broadcast("event-entry-booking-updated"),e.backButtonFunction(),e.appLoading=!1}).error(function(){i.finishUpdatingEventEntryBooking(t)})},i.updateEventEntryBooking=function(t){e.appLoading=!0;var n="cancel"==t?1:0;i.finishUpdatingEventEntryBooking(n)},i.getBusinessItem=function(){d.getEventEntryBooking(n._id).success(function(t){e.debugModeLog({msg:"BusinessItemCtrl getEventEntryBooking successData",data:t}),"null"!=t&&(t[0].endDate=C.getShortenedDateString(t[0].endDateTime),t[0].endDate=C.convertToDate(i,new Date(t[0].endDate)),i.businessItem=t[0])}).error(function(){i.getBusinessItem()})}}i.getBusinessItem()},e.checkForAppInit(i)}]),app.controller("AddBusinessItemCtrl",["$ionicHistory","$rootScope","$state","$stateParams","$scope","ionicDatePicker","ionicTimePicker","Offers","Profile","Events","MenuItems","Categories","Listings","Movies","TableBooking","$ionicScrollDelegate","$ionicPopup","$ionicViewSwitcher","Images","datesService","$timeout",function(e,t,n,i,o,r,s,l,c,d,u,p,g,m,f,h,v,y,w,C,T){o.rootScope=t,o.itemType=i.itemType,o.pageLoad=function(){t.$broadcast("reset-image-crop"),t.files=[],t.imageSrcs=[],o.selectExtraOption=function(e,n){t.selectExtraOption(e,n,o)};var e,n,l;switch(e=960,n=640,l=90,i.itemType){case"Movies":t.pageTitle="Create New Movie",o.pageTitle=t.pageTitle,o.getAllMovieStyles=function(){p.getAllMovieStyles().success(function(e){o.multiSelect.Movies.styles=e}).error(function(e){window.setTimeout(function(){o.getAllMovieStyles()},100)})},o.getAllMovieStyles(),o.imgEntryType="movie_cover_photo",o.dataWidth=window.innerWidth>830?600:window.innerWidth/100*l,o.dataHeight=n/e*o.dataWidth,t.dataScale=o.dataWidth/e,o.selectedDateFirst=new Date,o.selectedDateLast=new Date,o.todaysDate=new Date,o.finalDate=new Date,o.dateChosen=!1,o.firstShowingDateInputHTML="Select a first showing date for this event",o.lastShowingDateInputHTML="Select a last showing date for this event";var g=[];for(g[0]={callback:function(e){o.selectedDateFirst=new Date(e),o.firstShowingDateInputHTML=C.convertToDate(o,o.selectedDateFirst),g[0].inputDate=new Date(e)}},g[1]={callback:function(e){o.selectedDateLast=new Date(e),o.lastShowingDateInputHTML=C.convertToDate(o,o.selectedDateLast),g[1].inputDate=new Date(e)}},a=0;a<2;a++)g[a].disabledDates=[new Date(2016,2,16),new Date(2015,3,16),new Date(2015,4,16),new Date(2015,5,16),new Date("Wednesday, August 12, 2015"),new Date("08-16-2016"),new Date(1439676e6)],g[a].to=o.finalDate.setDate(o.finalDate.getDate()+90),g[a].inputDate=o.selectedDateLast,g[a].mondayFirst=!0,g[a].disableWeekdays=[],g[a].closeOnSelect=!0,g[a].templateType="popup";o.openDatePicker=function(e){r.openDatePicker(g[e])},o.multiSelect={Movies:{}},o.multiSelect.Movies.currentStyleIndexToAdd=0,o.multiSelect.Movies.chosenStyleObjects=[{index:o.currentStyleIndexToAdd,_id:null,name:"Select a Style",showStyles:!1}],o.multiSelect.Movies.chosenStyleIds=[null],o.toggleStyle=function(e,t){for(o.multiSelect[t].currentStyleIndexBeingToggled=e.index,a=0;a<o.multiSelect[t].chosenStyleObjects.length;a++)o.multiSelect[t].chosenStyleObjects[a].index!=e.index&&(o.multiSelect[t].chosenStyleObjects[a].showStyles=!1);e.showStyles=!e.showStyles,o.multiSelect[t].showStyles=e.showStyles},o.selectStyle=function(e,t){var n=o.multiSelect[t];for(n.chosenStyle=e,a=0;a<n.chosenStyleObjects.length;a++)if(n.chosenStyleObjects[a].index==n.currentStyleIndexBeingToggled)for(n.chosenStyleIds[a]=n.chosenStyle._id,null!=n.chosenStyleObjects[a]._id&&n.styles.push({_id:n.chosenStyleObjects[a]._id,name:n.chosenStyleObjects[a].name}),n.chosenStyleObjects[a]._id=e._id,n.chosenStyleObjects[a].name=e.name,n.chosenStyleObjects[a].showStyles=!1,b=0;b<n.styles.length;b++)n.styles[b].name==e.name&&n.styles.splice(b,1);n.showStyles=!1},o.removeStyle=function(e,t){var n=null;for(a=0;a<o.multiSelect[t].chosenStyleObjects.length;a++)o.multiSelect[t].chosenStyleObjects[a].index==e.index&&(n=a,null!=o.multiSelect[t].chosenStyleObjects[a]._id&&o.multiSelect[t].styles.push({_id:o.multiSelect[t].chosenStyleObjects[a]._id,name:o.multiSelect[t].chosenStyleObjects[a].name})),o.multiSelect[t].chosenStyleObjects[a].index>e.index&&(o.multiSelect[t].chosenStyleObjects[a].index=o.multiSelect[t].chosenStyleObjects[a].index-1),a==o.multiSelect[t].chosenStyleObjects.length-1&&(o.multiSelect[t].chosenStyleIds.splice(n,1),o.multiSelect[t].chosenStyleObjects.splice(n,1));-1!=o.multiSelect[t].chosenStyleIds.indexOf(null)&&o.multiSelect[t].chosenStyleIds.splice(o.multiSelect[t].chosenStyleIds.indexOf(null),1),o.multiSelect[t].currentStyleIndexToAdd=o.multiSelect[t].currentStyleIndexToAdd-1},o.newStyle=function(e){if(3==o.multiSelect[e].currentStyleIndexToAdd)return!1;o.multiSelect[e].currentStyleIndexToAdd=o.multiSelect[e].currentStyleIndexToAdd+1,o.multiSelect[e].chosenStyleObjects.push({index:o.multiSelect[e].currentStyleIndexToAdd,_id:null,name:"Select a Style",showStyles:!1}),o.multiSelect[e].chosenStyleIds.push(null)},o.createMovie=function(e,n,i){e=e.replace(/'/g,"'"),i=null!=i?i.replace(/'/g,"'"):"";var r=o.selectedDateFirst.getFullYear()+"-"+(o.selectedDateFirst.getMonth()+1)+"-"+o.selectedDateFirst.getDate()+" 00:00",s=o.selectedDateLast.getFullYear()+"-"+(o.selectedDateLast.getMonth()+1)+"-"+o.selectedDateLast.getDate()+" 00:00",l=function(e){t.files=[],t.imageSrcs=[],t.progress=0,t.$broadcast("new-movie"),t.appLoading=!1,t.backButtonFunction()},c=function(){function d(e){return!isNaN(e)&&function(e){return(0|e)===e}(parseFloat(e))}var u="";if(o.multiSelect.Movies.chosenStyleIds.length>0)for(a=0;a<o.multiSelect.Movies.chosenStyleIds.length;a++)a>0&&null!=o.multiSelect.Movies.chosenStyleIds[a]&&(u+=", "+o.multiSelect.Movies.chosenStyleIds[a]),null!=o.multiSelect.Movies.chosenStyleIds[a]&&(u+=o.multiSelect.Movies.chosenStyleIds[a]);if(ionic.Platform.isAndroid()){var p=t.file,g=new FileUploadOptions,m=new FileTransfer,f={};g.fileName=t.fileName,g.fileKey="fileUpload",g.httpMethod="POST",g.chunkedMode=!1,g.mimeType="image/jpeg",f.user_token=localStorage.getItem("auth_token"),f.user_email=localStorage.getItem("email"),f._profileId=t.user._profileId,f.imgEntryType="movie_cover_photo",f.startX=o.startX,f.xDist=o.xDist,f.startY=o.startY,f.yDist=o.yDist,f.movieTitle=e,f.description=i,f.firstDateTimeString=r,f.lastDateTimeString=s,f.movieTrailerLink=n,f.movieStyleIdString=u,g.params=f;var h=function(e){t.debugModeLog({msg:"ProfileController AddBusinessItemCtrl uploadImageForMovieCreation() successData",data:e}),e=e.response.replace(/"/g,""),d(e)&&l(e)},v=function(e){t.debugModeLog({msg:"ProfileController AddBusinessItemCtrl uploadImageForMovieCreation() errorData",data:e}),e=e.response.replace(/"/g,""),d(e)?l(e):c()};m.upload(p,encodeURI(t.assetsFolderUrl+"/data/functions/image-upload.php?action=uploadImage&platform=android"),h,v,g)}else{var y=new FormData;y.append("_profileId",t.user._profileId),y.append("imgEntryType","movie_cover_photo"),y.append("files[]",t.files[0]),y.append("startX",o.startX),y.append("startY",o.startY),y.append("xDist",o.xDist),y.append("yDist",o.yDist),y.append("movieTitle",e),y.append("description",i),y.append("firstShowingDate",r),y.append("lastShowingDate",s),y.append("movieTrailerLink",n),y.append("movieStyleIdString",u),w.uploadImageForMovieCreation(y).success(function(e){t.debugModeLog({msg:"ProfileController AddBusinessItemCtrl uploadImageForMovieCreation() successData",data:e}),d(e)&&l(e)}).error(function(e){t.debugModeLog({msg:"ProfileController AddBusinessItemCtrl uploadImageForMovieCreation() errorData",data:e}),d(e)?l():c()})}};c()};break;case"OwnOffers":t.pageTitle="Create New Offer",o.pageTitle=t.pageTitle,o.getAllOfferCategoriesForBusiness=function(){p.getAllOfferCategoriesForBusiness(t.user._id).success(function(e){o.offerCategories=e,o.chosenOfferCat=o.offerCategories[0]}).error(function(e){window.setTimeout(function(){o.getAllOfferCategoriesForBusiness()},100)})},o.getAllOfferCategoriesForBusiness(),o.getAllUpcomingBusinessEvents=function(){o.availableEvents=[],(-1!=t.user.listingTypes.indexOf("Nightclub")||-1!=t.user.listingTypes.indexOf("Bar"))&&d.getEventsByBusiness(t.user._id,"present",t.user._profileId).success(function(e){t.debugModeLog({msg:"AddBusinessItemController getEventsByBusiness getEventsByBusiness() successData",data:e}),null!=e&&e.unshift({_id:null,name:"No event selected"}),o.availableEvents="null"!=e?e:[]}).error(function(){o.getAllUpcomingBusinessEvents()})},o.getAllUpcomingBusinessEvents(),o.imgEntryType="offer_cover_photo",o.dataWidth=window.innerWidth>830?600:window.innerWidth/100*l,o.dataHeight=n/e*o.dataWidth,t.dataScale=o.dataWidth/e,o.itemLabel="Offer",o.currentSelectedOfferStartTimeScale="Present",o.offerTypes=[{name:"Basic",displayName:"Standard Offer",description:"Standard Offer with information",itemType:"offerType",_id:1},{name:"WithManualPromoCode",displayName:"Detailed Offer with Enquiry Form",description:"Create an Offer with detailed info, a built-in enquiry form and an optional photo.",itemType:"offerType",_id:2},{name:"WithAutoPromoCode",displayName:"MyNyte Exclusive Offer",description:"Create an Offer that's exclusive to MyNyte. Get a priority listing in the Offers Display!",itemType:"offerType",_id:3}],o.selectedOfferType={name:"Basic",displayName:"Standard Offer",description:"Standard Offer with information",itemType:"offerType",mustBeSelected:!0,_id:1},o.offerStartPeriods=[{name:"Now",displayName:"This Offer starts straight away",itemType:"offerStartPeriod"},{name:"Future",displayName:"This Offer starts in the future",itemType:"offerStartPeriod"}],o.selectedOfferStartPeriod={name:"Now",displayName:"This Offer starts straight away",itemType:"offerStartPeriod",mustBeSelected:!0},o.availableWeeks=[{_id:1,name:"1 week ahead"},{_id:2,name:"2 weeks ahead"},{_id:3,name:"3 weeks ahead"},{_id:4,name:"4 weeks ahead"},{_id:5,name:"5 weeks ahead"},{_id:6,name:"6 weeks ahead"},{_id:7,name:"7 weeks ahead"}],o.offerRegularityTypes=[{name:"one-off",displayName:"This is an offer that runs everyday for a certain period of time.",itemType:"offerRegularityType",mustBeSelected:!0},{name:"weekly",displayName:"This is a weekly event that occurs on a certain day every week.",itemType:"offerRegularityType",mustBeSelected:!0}],o.selectedOfferRegularityType={name:"one-off",displayName:"This is an offer that runs everyday for a certain period of time.",mustBeSelected:!0},o.chosenOfferEvent={_id:null,name:"No event selected"},o.chosenWeeksAhead={_id:1,name:"1 week ahead"},o.chosenWeekday={_id:null,name:""},o.showWeeksAhead=!1,o.selectedDate1=new Date,o.selectedDate2=null,o.todaysDate=new Date,o.finalDate=new Date,o.dateChosen=!1,o.dateInputHTML=C.convertToDate(o,new Date),o.ipObj1={callback:function(e){o.selectedDate1=new Date(e),o.dateInputHTML=C.convertToDate(o,o.selectedDate1),o.ipObj1.inputDate=new Date(e);var t=angular.copy(o.selectedDate1);o.ipObj2.from=angular.copy(o.selectedDate1),o.ipObj2.to=angular.copy(new Date(t.setDate(t.getDate()+60))),o.dateChosen=!0},disabledDates:[],from:new Date,to:o.finalDate.setDate(o.finalDate.getDate()+30),inputDate:o.selectedDate1,mondayFirst:!0,disableWeekdays:[],closeOnSelect:!0,templateType:"popup"},o.ipObj2={callback:function(e){o.selectedDate2=new Date(e),o.offerEndDateInputHTML=C.convertToDate(o,o.selectedDate2),o.ipObj2.inputDate=new Date(e);var t=new Date,n=t.setDate(t.getDate()+30);o.ipObj1.to=new Date(e)>new Date(n)?angular.copy(new Date(n)):angular.copy(new Date(e)),o.dateChosen=!0},disabledDates:[new Date(2016,2,16),new Date(2015,3,16),new Date(2015,4,16),new Date(2015,5,16),new Date("Wednesday, August 12, 2015"),new Date("08-16-2016"),new Date(1439676e6)],from:new Date,to:o.finalDate.setDate(o.finalDate.getDate()+90),inputDate:new Date,mondayFirst:!0,disableWeekdays:[],closeOnSelect:!0,templateType:"popup"},o.openDatePicker=function(e){r.openDatePicker(e)},o.toggleOfferCategory=function(e){o.showOfferCategories=!o.showOfferCategories},o.selectOfferCategory=function(e){o.chosenOfferCat=e,o.showOfferCategories=!o.showOfferCategories},o.toggleChosenEvent=function(){o.showEvents=!o.showEvents},o.selectOfferEvent=function(e){o.chosenOfferEvent.name=e.name,o.chosenOfferEvent._id=e.relListingId,o.showEvents=!o.showEvents,T(function(){h.resize()},500)},o.toggleWeeksAheadVisibility=function(){o.showWeeksAhead=!o.showWeeksAhead},o.selectWeeksAhead=function(e){o.chosenWeeksAhead=e,o.showWeeksAhead=!1},o.addOffer=function(e,n,i){e=e.replace(/'/g,"'"),n=n.replace(/'/g,"'"),t.appLoading=!0;var r=o.selectedOfferType._id,s=o.selectedDate1.getFullYear()+"-"+(o.selectedDate1.getMonth()+1)+"-"+o.selectedDate1.getDate()+" 00:00",l=0==o.selectedDate1.getDay()?7:o.selectedDate1.getDay();l="weekly"==o.selectedOfferRegularityType.name?l:null;var d="one-off"==o.selectedOfferRegularityType.name?0:o.chosenWeeksAhead._id,i=null==o.selectedDate2?0:o.selectedDate2.getFullYear()+"-"+(o.selectedDate2.getMonth()+1)+"-"+o.selectedDate2.getDate()+" 00:00",u=function(n){t.files=[],t.imageSrcs=[],t.progress=0;var i=n,o=function(n){c.getFollowerProfileIdsForBusiness(t.user._id).success(function(i){var o=t.user.displayName+" just created a new offer! "+e,r={actionFunction:"goToOffer",_businessItemId:n},s=[];for(a=0;a<i.length;a++)s.push(i[a]._actionerProfileId),a==i.length-1&&t.prepareMessageNotificationFinal(s,o,"New Offer Created",r)}).error(function(){o(n)})};o(i),t.$broadcast("new-offer"),t.appLoading=!1,t.backButtonFunction()},p=function(){function a(e){return!isNaN(e)&&function(e){return(0|e)===e}(parseFloat(e))}if(ionic.Platform.isAndroid()){var c=t.file,g=new FileUploadOptions,m=new FileTransfer,f={};g.fileName=t.fileName,g.fileKey="fileUpload",g.httpMethod="POST",g.chunkedMode=!1,g.mimeType="image/jpeg",f.user_token=localStorage.getItem("auth_token"),f.user_email=localStorage.getItem("email"),f._profileId=t.user._profileId,f.imgEntryType="offer_cover_photo",f.startX=o.startX,f.xDist=o.xDist,f.startY=o.startY,f.yDist=o.yDist,f._businessId=t.user._id,f._offerTypeId=r,f._offerSubCategoryId=o.chosenOfferCat._id,f.offerTitle=e,f.description=n,f.startDateTime=s,f.endDateTime=i,f.weeksAhead=d,f.weekdayIndex=l,f._eventId=o.chosenOfferEvent._id,g.params=f;var h=function(e){t.debugModeLog({msg:"ProfileController AddBusinessItemCtrl uploadImageForOfferCreation() successData",data:e}),e=e.response.replace(/"/g,""),a(e)&&u(e)},v=function(e){t.debugModeLog({msg:"ProfileController AddBusinessItemCtrl uploadImageForOfferCreation() errorData",data:e}),e=e.response.replace(/"/g,""),a(e)?u():p()};m.upload(c,encodeURI(t.assetsFolderUrl+"/data/functions/image-upload.php?action=uploadImage&platform=android"),h,v,g)}else{var y=new FormData;y.append("_profileId",t.user._profileId),y.append("imgEntryType","offer_cover_photo"),y.append("files[]",t.files[0]),y.append("startX",o.startX),y.append("startY",o.startY),y.append("xDist",o.xDist),y.append("yDist",o.yDist),y.append("_businessId",t.user._id),y.append("_offerTypeId",r),y.append("_offerSubCategoryId",o.chosenOfferCat._id),y.append("offerTitle",e),y.append("description",n),y.append("startDateTime",s),y.append("endDateTime",i),y.append("weeksAhead",d),y.append("weekdayIndex",l),y.append("_eventId",o.chosenOfferEvent._id),w.uploadImageForOfferCreation(y).success(function(e){t.debugModeLog({msg:"ProfileController AddBusinessItemCtrl uploadImageForOfferCreation() successData",data:e}),a(e)&&u(e)}).error(function(e){t.debugModeLog({msg:"ProfileController AddBusinessItemCtrl uploadImageForOfferCreation() errorData",data:e}),a(e)?u():p()})}};p()};break;case"OwnEvents":var e,n,l,m=function(){p.getAvailableMusicStyles().success(function(e){o.musicStyles=e}).error(function(){m()})};t.pageTitle="Create New Event",o.pageTitle=t.pageTitle,o.itemLabel="Event",o.chosenMusicStyle={_id:null,name:"Select a Music Style"},o.currentMusicStyleIndexToAdd=0,o.chosenMusicStyleObjects=[{index:o.currentMusicStyleIndexToAdd,_id:null,name:"Select a Music Style",showMusicCategories:!1}],o.chosenMusicStyleIds=[null],o.chosenWeeksAhead={_id:1,name:"1 week ahead"},o.chosenWeekday={_id:null,name:""},o.eventHasGuestList=!1,o.imgEntryType="event_cover_photo",e=960,n=640,l=90,o.dataWidth=window.innerWidth>830?600:window.innerWidth/100*l,o.dataHeight=n/e*o.dataWidth,t.dataScale=o.dataWidth/e,o.showWeeksAhead=!1,o.availableWeeks=[{_id:1,name:"1 week ahead"},{_id:2,name:"2 weeks ahead"},{_id:3,name:"3 weeks ahead"},{_id:4,name:"4 weeks ahead"},{_id:5,name:"5 weeks ahead"},{_id:6,name:"6 weeks ahead"},{_id:7,name:"7 weeks ahead"}],m(),o.eventRegularityTypes=[{name:"one-off",displayName:"This is a one-off event",itemType:"eventRegularityType",mustBeSelected:!0},{name:"weekly",displayName:"This is a weekly event",itemType:"eventRegularityType",mustBeSelected:!0}],o.selectedEventRegularityType={name:"one-off",displayName:"This is a one-off event",mustBeSelected:!0},o.eventGuestListOptions=[{name:"false",displayName:"There is no event guestlist for users",mustBeSelected:!0,itemType:"eventGuestListOption"},{name:"true",displayName:"There is an event guestlist for users",mustBeSelected:!0,itemType:"eventGuestListOption"}],o.selectedEventGuestListOption={name:"false",displayName:"There is no event guestlist for users",mustBeSelected:!0},o.selectedDate1=new Date,o.todaysDate=new Date,o.finalDate=new Date,o.dateChosen=!1,o.dateInputHTML="Select a date for this event";var y={callback:function(e){o.selectedDate1=new Date(e),o.dateInputHTML=C.convertToDate(o,o.selectedDate1),y.inputDate=new Date(e),o.dateChosen=!0},disabledDates:[new Date(2016,2,16),new Date(2015,3,16),new Date(2015,4,16),new Date(2015,5,16),new Date("Wednesday, August 12, 2015"),new Date("08-16-2016"),new Date(1439676e6)],from:new Date,to:o.finalDate.setDate(o.finalDate.getDate()+90),inputDate:o.selectedDate1,mondayFirst:!0,disableWeekdays:[],closeOnSelect:!0,templateType:"popup"};o.toggleTownCategory=function(){o.showTownCategories=!o.showTownCategories},o.toggleMusicCategory=function(e){for(o.currentMusicCategoryIndexBeingToggled=e.index,a=0;a<o.chosenMusicStyleObjects.length;a++)o.chosenMusicStyleObjects[a].index!=e.index&&(o.chosenMusicStyleObjects[a].showMusicCategories=!1);e.showMusicCategories=!e.showMusicCategories,o.showMusicCategories=e.showMusicCategories},o.selectMusicCategory=function(e){for(o.chosenMusicStyle=e,a=0;a<o.chosenMusicStyleObjects.length;a++)if(o.chosenMusicStyleObjects[a].index==o.currentMusicCategoryIndexBeingToggled)for(o.chosenMusicStyleIds[a]=o.chosenMusicStyle._id,null!=o.chosenMusicStyleObjects[a]._id&&o.musicStyles.push({_id:o.chosenMusicStyleObjects[a]._id,name:o.chosenMusicStyleObjects[a].name}),o.chosenMusicStyleObjects[a]._id=e._id,o.chosenMusicStyleObjects[a].name=e.name,o.chosenMusicStyleObjects[a].showMusicCategories=!1,b=0;b<o.musicStyles.length;b++)o.musicStyles[b].name==e.name&&o.musicStyles.splice(b,1);o.showMusicCategories=!1},o.removeMusicStyle=function(e){var t=null;for(o.showMusicCategories=!1,a=0;a<o.chosenMusicStyleObjects.length;a++)o.chosenMusicStyleObjects[a].showMusicCategories=!1,o.chosenMusicStyleObjects[a].index==e.index&&(t=a,null!=o.chosenMusicStyleObjects[a]._id&&o.musicStyles.push({_id:o.chosenMusicStyleObjects[a]._id,name:o.chosenMusicStyleObjects[a].name})),o.chosenMusicStyleObjects[a].index>e.index&&(o.chosenMusicStyleObjects[a].index=o.chosenMusicStyleObjects[a].index-1),a==o.chosenMusicStyleObjects.length-1&&(o.chosenMusicStyleIds.splice(t,1),o.chosenMusicStyleObjects.splice(t,1));o.currentMusicStyleIndexToAdd=o.currentMusicStyleIndexToAdd-1},o.newMusicStyle=function(){if(3==o.currentMusicStyleIndexToAdd)return!1;o.currentMusicStyleIndexToAdd=o.currentMusicStyleIndexToAdd+1,o.chosenMusicStyleObjects.push({index:o.currentMusicStyleIndexToAdd,_id:null,name:"Select a Music Style",showMusicCategories:!1}),o.chosenMusicStyleIds.push(null)},o.imgUploadPrepare=function(){document.getElementById("img-upload").multiple=!1,ionic.Platform.isAndroid()?t.getAndroidImage({imgEntryType:"cover_photo",onComplete:function(){}}):document.getElementById("img-upload").click()},o.openDatePicker=function(){r.openDatePicker(y)},o.toggleWeeksAheadVisibility=function(){o.showWeeksAhead=!o.showWeeksAhead},o.selectWeeksAhead=function(e){o.chosenWeeksAhead=e,o.showWeeksAhead=!1},o.guestListMaxInput=[{_id:1}],o.addOffer=function(){v.show({title:"Add an Offer",template:"<p>You can add an Offer to this Event by adding an Offer into your 'My Current Offers' panel after creating this event.</p>",scope:o,buttons:[{text:"Close",onTap:function(e){}}]})},o.addEvent=function(e,n,i,r,s){t.appLoading=!0;var l=null,d=o.selectedDate1.getFullYear()+"-"+(o.selectedDate1.getMonth()+1)+"-"+o.selectedDate1.getDate()+" 00:00",u=0==o.selectedDate1.getDay()?7:o.selectedDate1.getDay();u="weekly"==o.selectedEventRegularityType.name?u:null,l=("Nightclub"==t.user.businessTypeName||t.user.businessTypeName,t.user._businessPlaceId),guestListMax=null==o.guestListMaxInput[0].val?0:o.guestListMaxInput[0].val,weeksAhead="one-off"==o.selectedEventRegularityType.name?0:o.chosenWeeksAhead._id,o.eventHasGuestList="true"==o.selectedEventGuestListOption.name?1:0;var p="";if(o.chosenMusicStyleIds.length>0)for(a=0;a<o.chosenMusicStyleIds.length;a++)a>0&&null!=o.chosenMusicStyleIds[a]&&(p+=", "+o.chosenMusicStyleIds[a]),null!=o.chosenMusicStyleIds[a]&&(p+=o.chosenMusicStyleIds[a]);var g=function(n){t.files=[],t.imageSrcs=[],t.progress=0;var i=n,o=function(n){c.getFollowerProfileIdsForBusiness(t.user._id).success(function(i){var o=t.user.displayName+" just created a new event! "+e,r={actionFunction:"goToFeedListingItem",_businessItemId:n,businessItemType:"Event"},s=[];for(a=0;a<i.length;a++)s.push(i[a]._actionerProfileId),a==i.length-1&&t.prepareMessageNotificationFinal(s,o,"New Event Created",r)}).error(function(){o(n)})};o(i),t.$broadcast("new-event"),t.backButtonFunction(),t.appLoading=!1},m=function(){function a(e){return!isNaN(e)&&function(e){return(0|e)===e}(parseFloat(e))}if(ionic.Platform.isAndroid()){var c=t.file,f=new FileUploadOptions,h=new FileTransfer,v={};f.fileName=t.fileName,f.fileKey="fileUpload",f.httpMethod="POST",f.chunkedMode=!1,f.mimeType="image/jpeg",v.user_token=localStorage.getItem("auth_token"),v.user_email=localStorage.getItem("email"),v._profileId=t.user._profileId,v.imgEntryType="offer_cover_photo",v.startX=o.startX,v.xDist=o.xDist,v.startY=o.startY,v.yDist=o.yDist,v._businessPlaceId=l,v.eventTitle=e,v.description=n,v.eventDateTime=d,v.dressCode=i,v.guestListMax=guestListMax,v.dealsOnTheNight=r,v.extraInfo=s,v.weekdayIndex=u,v.weeksAhead=weeksAhead,v._businessId=t.user._id,v.eventHasGuestList=o.eventHasGuestList,v.musicStyleIdString=p,f.params=v;var y=function(e){t.debugModeLog({msg:"ProfileController AddBusinessItemCtrl uploadImageForEventCreation() successData",data:e}),e=e.response.replace(/"/g,""),a(e)&&g(e)},b=function(e){t.debugModeLog({msg:"ProfileController AddBusinessItemCtrl uploadImageForEventCreation() errorData",data:e}),e=e.response.replace(/"/g,""),a(e)?g():m()};h.upload(c,encodeURI(t.assetsFolderUrl+"/data/functions/image-upload.php?action=uploadImage&platform=android"),y,b,f)}else{var C=new FormData;C.append("_profileId",t.user._profileId),C.append("imgEntryType","event_cover_photo"),C.append("files[]",t.files[0]),C.append("startX",o.startX),C.append("startY",o.startY),C.append("xDist",o.xDist),C.append("yDist",o.yDist),C.append("_businessPlaceId",l),C.append("eventTitle",e),C.append("description",n),C.append("eventDateTime",d),C.append("dressCode",i),C.append("guestListMax",guestListMax),C.append("dealsOnTheNight",r),C.append("extraInfo",s),C.append("weekdayIndex",u),C.append("weeksAhead",weeksAhead),C.append("_businessId",t.user._id),C.append("eventHasGuestList",o.eventHasGuestList),C.append("musicStyleIdString",p),w.uploadImageForEventCreation(C).success(function(e){t.debugModeLog({msg:"ProfileController AddBusinessItemCtrl uploadImageForEventCreation() successData",data:e}),a(e)&&g(e)}).error(function(e){t.debugModeLog({msg:"ProfileController AddBusinessItemCtrl uploadImageForEventCreation() errorData",data:e}),a(e)?g():m()})}};m()};break;case"BusinessCarteMenuItemCats":case"BusinessTakeawayMenuItemCats":t.pageTitle="BusinessCarteMenuItemCats"==i.itemType?"A la Carte Menu Item":"Takeaway Menu Item",o.pageTitle=t.pageTitle,o.MenuItems=u,o.showTagOptions=!0,o.showExtraOptionsOptions=!0,o.itemLabel="Menu Item",o._menuTypeId="BusinessCarteMenuItemCats"!=i.itemType?1:2,o.itemShortName="BusinessCarteMenuItemCats"!=i.itemType?"Takeaway ":"A la carte ",o.itemLabel=o.itemShortName+o.itemLabel,o.showMenuItemCategories=!1,o.showMenuItemSubCategories=!1,o.menuItemCategories=[],o.menuItemSubCategories=[],o.availableTags={},o.availableTags.singularTags=[],o.availableTags.groupTags=[],o.selectedCategory={name:"Select a Menu Category",_id:null},o.selectedSubCategory={name:"Select an Optional Menu Sub-Category",_id:null},o.pageLoadFunction=function(){o.appliedOptions=[],o.appliedOptionsNames=[],o.appliedTags=[],o.appliedTagsNames=[],u.getMenuItemOptionsForBusiness(t.user._id).success(function(e){o.menuItemOptions="null"==e?[]:e;var n=function(){u.getAllMenuItemTags().success(function(e){for(a=0;a<e.length;a++)if(null==e[a]._menuItemTagGroupId)o.availableTags.singularTags.push(e[a]);else{var n=!1;for(b=0;b<o.availableTags.groupTags.length;b++)o.availableTags.groupTags[b]._menuItemGroupTagId==e[a]._menuItemGroupTagId&&(o.availableTags.groupTags[b].array.push(e[a]),n=!0);n||o.availableTags.groupTags.push({_menuItemGroupTagId:e[a]._menuItemGroupTagId,array:[e[a]]})}var r=function(){u.getMenuItemCategoriesForBusiness(t.user._id).success(function(e){if(t.debugModeLog({msg:"getMenuItemCategoriesForBusiness for OwnMenuItems in AddbusinessItem results",data:e}),o.menuItemCategories=e,null!=i._secondaryItemTypeId)for(a=0;a<o.menuItemCategories.length;a++)o.menuItemCategories[a]._id==i._secondaryItemTypeId&&(o.selectedCategory=o.menuItemCategories[a])}).error(function(){r()})};r();var s=function(){u.getMenuItemSubCategoriesForBusiness(t.user._id).success(function(e){t.debugModeLog({msg:"getMenuItemCategoriesForBusiness for OwnMenuItems in AddbusinessItem results",data:e}),o.menuItemSubCategories=e}).error(function(){s()})};s()}).error(function(){n()})};n()}).error(function(){o.pageLoadFunction()})},o.pageLoadFunction();var S=function(e,n,i){if(null!=o.selectedCategory._id){var r=[];for(a=0;a<o.appliedOptions.length;a++)r.push({_id:o.appliedOptions[a]._id});var s=[];for(a=0;a<o.appliedTags.length;a++)s.push({_id:o.appliedTags[a]._id});var l=function(){u.createMenuItem(t.user._id,o._menuTypeId,o.selectedCategory._id,o.selectedSubCategory._id,e,n,i,r,s).success(function(e){t.debugModeLog({msg:"createMenuItem for OwnMenuItems in AddBusinessItem results",data:e}),o.appliedOptions=[],o.appliedOptionsNames=[],o.appliedTags=[],o.appliedTagsNames=[],t.$broadcast("menu-items-changed"),t.backButtonFunction()}).error(function(){l()})};l()}};o.selectCategory=function(e){o.showMenuItemCategories=!1,o.selectedCategory=e},o.toggleMenuCatDisplay=function(){o.showMenuItemCategories=!o.showMenuItemCategories},o.selectSubCategory=function(e){o.showMenuItemSubCategories=!1,o.selectedSubCategory=e},o.toggleMenuSubCatDisplay=function(){o.showMenuItemSubCategories=!o.showMenuItemSubCategories},o.addItemToMenu=function(e,t,n){S(e,t,n)},o.applyOption=function(e){var t=o.appliedOptionsNames.indexOf(e.Name);-1==t?(o.appliedOptionsNames.push(e.Name),o.appliedOptions.push(e)):(o.appliedOptionsNames.splice(t,1),o.appliedOptions.splice(t,1))},o.applyTag=function(e,t){var n=o.appliedTagsNames.indexOf(t.name);if(-1==n)for(o.appliedTags.push(t),o.appliedTagsNames.push(t.name),a=0;a<o.appliedTags.length;a++)null!=o.appliedTags[a]._menuItemTagGroupId&&o.appliedTags[a]._menuItemTagGroupId==t._menuItemTagGroupId&&o.appliedTags[a]._id!=t._id&&(o.appliedTags.splice(a,1),o.appliedTagsNames.splice(a,1));else o.appliedTags.splice(n,1),o.appliedTagsNames.splice(n,1)};break;case"MenuItemCategories":t.pageTitle="Create New Menu Category",o.pageTitle=t.pageTitle,o.existingCatNames=[];var E=function(){u.getMenuItemCategoriesForBusiness(t.user._id).success(function(e){if("null"!=e)for(a=0;a<e.length;a++)o.existingCatNames.push(e[a].name);o.addItemToMenuItemCategories=function(e,n){t.appLoading=!0,u.createMenuItemCategory(t.user._id,e,n).success(function(e){t.$broadcast("menu-item-categories-changed"),t.backButtonFunction(),t.appLoading=!1}).error(function(){o.addItemToMenuItemCategories()})}}).error(function(){E()})};E();break;case"MenuItemSubCategories":t.pageTitle="Create New Menu Sub-category",o.pageTitle=t.pageTitle,o.existingCatNames=[];var I=function(){u.getMenuItemSubCategoriesForBusiness(t.user._id).success(function(e){if("null"!=e&&null!=e)for(a=0;a<e.length;a++)o.existingCatNames.push(e[a].name);o.addItemToMenuItemSubCategories=function(e,n){t.appLoading=!0,u.createMenuItemSubCategory(e,n,t.user._id).success(function(e){t.$broadcast("menu-item-sub-categories-changed"),t.backButtonFunction(),t.appLoading=!1}).error(function(){})}}).error(function(){I()})};I();break;case"MenuItemTemplateOptions":t.pageTitle="Create New Menu Template Option",o.pageTitle=t.pageTitle,o.showChangeOrderButtons=!1,o.businessItem={name:"",priceRelevant:!1,quantityRelevant:!1,options:[],type:null};var x=function(){u.getMenuTemplateOptionCategories().success(function(e){o.menuItemTemplateOptionCategories="null"!=e?e:[],o.selectedCategory={_id:0,Name:"Select Category"}}).error(function(){x()})};x(),o.selectCategory=function(e){o.showMenuItemTemplateOptionCategories=!1,o.selectedCategory=e},o.toggleMenuCatDisplay=function(){o.showMenuItemTemplateOptionCategories=!o.showMenuItemTemplateOptionCategories},o.togglePriceRel=function(e){e.priceRelevant=!e.priceRelevant},o.toggleQuantityRel=function(e){e.quantityRelevant=!e.quantityRelevant},o.moveOptionChoiceUp=function(e){var t=parseInt(e.orderIndex)-1;for(a=0;a<o.businessItem.options.length;a++)if(o.businessItem.options[a].orderIndex==t){o.businessItem.options[a].orderIndex=t+1;var n=o.businessItem.options[a];o.businessItem.options.splice(a,1),o.businessItem.options.splice(a+1,0,n)}e.orderIndex=t},o.moveOptionChoiceDown=function(e){var t=parseInt(e.orderIndex)+1;for(a=0;a<o.businessItem.options.length;a++)if(o.businessItem.options[a].orderIndex==t){o.businessItem.options[a].orderIndex=t-1;var n=o.businessItem.options[a];o.businessItem.options.splice(a,1),o.businessItem.options.splice(a-1,0,n)}e.orderIndex=t},o.deleteOptionChoice=function(e){for(a=0;a<o.businessItem.options.length;a++)o.businessItem.options[a].orderIndex>e.orderIndex&&(o.businessItem.options[a].orderIndex=parseInt(o.businessItem.options[a].orderIndex)-1),o.businessItem.options[a]._id==e._id&&o.businessItem.options.splice(a,1);o.currentOptionBeingAdded.orderIndex=o.businessItem.options.length+1},o.currentOptionBeingAdded={name:"",extraPrice:0,orderIndex:o.businessItem.options.length+1},o.createOptionChoice=function(){for(o.businessItem.options.splice(o.currentOptionBeingAdded.orderIndex-1,0,o.currentOptionBeingAdded),a=o.currentOptionBeingAdded.orderIndex;a<o.businessItem.options.length;a++)o.businessItem.options[a].orderIndex=parseInt(o.businessItem.options[a].orderIndex)+1;o.currentOptionBeingAdded={name:"",extraPrice:0,orderIndex:o.businessItem.options.length+1}},o.addTemplateOption=function(){t.appLoading=!0,u.createMenuItemTemplateOption(t.user._id,o.selectedCategory._id,o.businessItem).success(function(e){t.debugModeLog({msg:"createMenuItemTemplateOption for OwnMenuItems in AddBusinessItem results",data:e}),t.$broadcast("menu-item-template-options-changed"),t.backButtonFunction(),t.appLoading=!1}).error(function(){o.addTemplateOption()})};break;case"BlockedTableBookingIntervals":o.showStartTimeSelect=!1,o.showEndTimeSelect=!1,o.startDateInputString="Enter Start Date",o.endDateInputString="Enter End Date",o.startTimeInputString="00:00",o.endTimeInputString="11:59",o.selectedStartTime="00:00",o.selectedEndTime="11:59",o.ipObj1={callback:function(e){o.selectedIntervalStartDate=new Date(e),o.startDateInputString=C.convertToDate(o,o.selectedIntervalStartDate),o.ipObj1.inputDate=new Date(e),o.ipObj2.from=angular.copy(o.selectedIntervalStartDate)},disabledDates:[],from:new Date,inputDate:new Date,mondayFirst:!0,disableWeekdays:[],closeOnSelect:!0,templateType:"popup"},o.ipObj2={callback:function(e){o.selectedIntervalEndDate=new Date(e),o.endDateInputString=C.convertToDate(o,o.selectedIntervalEndDate),o.ipObj2.inputDate=new Date(e),o.ipObj1.to=angular.copy(o.selectedIntervalEndDate)},disabledDates:[],from:new Date,to:new Date((new Date).setFullYear((new Date).getFullYear()+1)),inputDate:new Date,mondayFirst:!0,disableWeekdays:[],closeOnSelect:!0,templateType:"popup"},o.startTimeIpObj={callback:function(e){var t=new Date(1e3*e),n=t.getUTCHours()<10?"0"+t.getUTCHours():t.getUTCHours(),i=t.getUTCMinutes()<10?"0"+t.getUTCMinutes():t.getUTCMinutes();o.selectedStartTime=n+":"+i,o.startTimeInputString=n+":"+i,o.startTimeIpObj.inputTime=i<30?e:e-3600},inputTime:0,format:12,step:5,setLabel:"Select"},o.endTimeIpObj={callback:function(e){var t=new Date(1e3*e),n=t.getUTCHours()<10?"0"+t.getUTCHours():t.getUTCHours(),i=t.getUTCMinutes()<10?"0"+t.getUTCMinutes():t.getUTCMinutes();o.selectedEndTime=n+":"+i,o.endTimeInputString=n+":"+i,o.endTimeIpObj.inputTime=i<30?e:e-3600},inputTime:82740,format:12,step:5,setLabel:"Select"},o.openDatePicker=function(e){r.openDatePicker(e)},o.openTimePicker=function(e){s.openTimePicker(e)},o.showTimeSelect=function(e){"start"==e?o.showStartTimeSelect=!0:o.showEndTimeSelect=!0},o.addBlockedTableBookingInterval=function(){var e=o.selectedIntervalStartDate.getFullYear()+"-"+(o.selectedIntervalStartDate.getMonth()+1)+"-"+o.selectedIntervalStartDate.getDate()+" "+o.selectedStartTime,n=o.selectedIntervalEndDate.getFullYear()+"-"+(o.selectedIntervalEndDate.getMonth()+1)+"-"+o.selectedIntervalEndDate.getDate()+" "+o.selectedEndTime,i={_businessId:t.user._id,startDateTime:e,endDateTime:n};f.createBlockedTableBookingInterval(i).success(function(e){e=parseInt(e.replace(/"/g,"")),0==e?t.backButtonFunction():v.show({title:"Error with this Interval",template:"<p>It looks like you already have an existing interval which overlaps with some of the dates of this interval. Overlapping intervals are not allowed. Please check the errors, and try again.</p>",scope:o,buttons:[{text:"Close",onTap:function(e){}}]})}).error(function(e){o.addBlockedTableBookingInterval()})}}o.prepareImageUpload=function(e){o.startX=Math.floor(-1*e.imageX*(1/e.imageZoom)),o.xDist=Math.ceil(o.dataWidth*(1/e.imageZoom)),o.startY=Math.floor(-1*e.imageY*(1/e.imageZoom)),o.yDist=Math.ceil(o.dataHeight*(1/e.imageZoom)),T(function(){h.resize()},1e3)};var k=t.$on("cover-photo-uploaded",function(e,t){"app.addBusinessItem"==t.currentViewName&&o.prepareImageUpload(t)});o.$on("$destroy",function(){k()})},t.checkForAppInit(o)}]),app.controller("BusinessItemSettingsCtrl",["$ionicHistory","$rootScope","$state","$stateParams","$scope","MenuItems","$ionicViewSwitcher",function(e,t,n,i,o,r,a){o.rootScope=t,o.itemType=i.itemType,o.pageLoad=function(){i.itemType},t.checkForAppInit(o)}]),app.controller("ProfileItemsCtrl",["$rootScope","$state","$stateParams","$scope","Offers","Profile","Events","Taxi","MenuItems","$ionicViewSwitcher","$ionicHistory","$ionicModal","$ionicPopup","Images","$timeout",function(e,t,n,i,o,r,s,l,c,d,u,p,g,m,f){i.profileItemCats=[],i.profileItems=[],i.rootScope=e,i.itemType=n.itemType,i.specificItemType=n.specificItemType,i.$on("$ionicView.beforeEnter",function(){e.pageTitle=i.pageTitle?i.pageTitle:e.pageTitle}),i.$on("$ionicView.enter",function(){e.topRightButtonShouldBeSettings=!1,"SpecificPhotoFolderSummary"!=n.specificItemType||"Cover Photo"!=n.albumType&&"Profile Photo"!=n.albumType||(e.showTopRightButton=!0,e.topRightButtonIsPlus=!0,e.topRightButtonFunction=function(){t.go("app.addProfileItem",{itemType:n.itemType,specificItemType:n.specificItemType,albumType:n.albumType})},e.allPopoverImages=i.popoverImages||[])}),i.pageLoad=function(){i.nextPageFunction=function(n){t.go("app.seeBusinessMenuItems",{_businessId:e.user._id,_menuItemCategoryId:n._id})},i.windowWidth=window.innerWidth/100*28.5;var o=function(e){var t={},o={Business:{items:[],name:"Businesses",icon:"ion-home",itemTypes:["Likes","Followed","FollowedBusiness","Following"],showing:!0},Event:{items:[],name:"Events",icon:"ion-calendar",itemTypes:["Likes","Watched"],showing:!0},Offer:{items:[],name:"Offers",icon:"ion-social-usd",itemTypes:["Likes","Watched"],showing:!0},Movie:{items:[],name:"Movies",icon:"ion-film-marker",itemTypes:["Likes","Watched"],showing:!0},Person:{items:[],name:"People",icon:"ion-person",itemTypes:["Followed","Following","Liked","FollowedBusiness"],showing:!0}};for(prop in o)if(-1!=o[prop].itemTypes.indexOf(i.itemType)&&("Business"==prop&&"Likes"==i.itemType&&"past"==n.timeScale||(t[prop]=o[prop])),"Person"==prop){if("null"==e||null==e)return t;for(a=0;a<e.length;a++)if(t[e[a].listingType].items.push(e[a]),a==e.length-1)for(prop in o)if(t[prop]&&t[prop].items.length>0){for(b=0;b<t[prop].items.length;b++)if(t[prop].items[b].evenIndex=(b+1)%2==0?"even":"odd",b==t[prop].items.length-1&&"Person"==prop)return t}else if("Person"==prop)return t}};switch(i.itemType){case"PhotosSummary":"SpecificPhotoFolderSummary"==i.specificItemType?(e.pageTitle="Profile Photo"==n.albumType?"My Profile Pictures":"My Cover Photos",i.pageTitle=e.pageTitle,i.itemLabel="Profile Photo"==n.albumType?"Profile Pictures":"Cover Photos",i.currentDefaultPhotoId=null,i.getProfileItems=function(){r.getSpecificAlbumSummaryForListing(e.user._profileId,n._albumId,n.albumType,"Profile").success(function(t){if(e.debugModeLog({msg:"ProfileItemsCtrl getSpecificAlbumSummaryForListing successData",data:t}),"null"!=t){var o=[],r="";for(r="Profile Photo"==n.albumType?"profile_photo":"Cover Photo"==n.albumType?"cover_photo":"general_photo",a=0;a<t.length;a++){var s="Profile Photo"==n.albumType?(a+3)%3!=0:(a+1)%2==0;t[a].evenIndex=s?"even":"odd",t[a].index=a,o.push({src:e.assetsFolderUrl+"/img/user_images/"+r+"/"+t[a].name}),i.currentDefaultPhotoId="1"==t[a].isCurrent?t[a]._id:i.currentDefaultPhotoId,a==t.length-1&&(i.popoverImages=o,e.allPopoverImages=o,i.profileItemCats={All:{name:"All",items:t}})}}}).error(function(){i.getProfileItems()})},i.updateUsersDefaultPhoto=function(){if(e.appLoading=!0,null==i.currentImageSelectedId)return!1;var t={_profileId:e.user._profileId,_photoId:i.currentImageSelectedId,photoType:n.albumType};r.updateUsersDefaultPhoto(t).success(function(t){i.currentDefaultPhotoId=i.currentImageSelectedId,i.currentImageSelectedId=null,i.currentImageSelectedName=null,e.$broadcast("default-photo-update"),e.appLoading=!1}).error(function(e){i.updateUsersDefaultPhoto()})},i.removeImage=function(){if(e.appLoading=!0,null==i.currentImageSelectedId)return!1;var t={_profileId:e.user._profileId,_photoId:i.currentImageSelectedId,photoType:n.albumType,photoName:i.currentImageSelectedName};r.deleteUsersImage(t).success(function(t){e.debugModeLog({msg:"ProfileItemsCtrl deleteUsersImage successData",data:t}),i.currentDefaultPhotoId=i.currentDefaultPhotoId==i.currentImageSelectedId?null:i.currentDefaultPhotoId,i.currentImageSelectedId=null,i.currentImageSelectedName=null,e.$broadcast("photo-uploaded"),e.appLoading=!1}).error(function(t){e.debugModeLog({msg:"ProfileItemsCtrl deleteUsersImage errorData",data:t}),i.removeImage})},i.confirmImageRemoval=function(){i.mainPopup.close(),f(function(){i.deleteImagePopup=g.confirm({title:"Delete Photo",template:"<p>Are you sure you want to delete this photo? This action cannot be undone.</p>",cssClass:"image-options",okText:"Delete Photo",button:[{text:"Delete Photo",type:"button-positive",onTap:function(e){i.deleteImagePopup.close()}},{text:"Cancel",onTap:function(e){i.deleteImagePopup.close()}}]}).then(function(e){e?i.removeImage():(i.currentImageSelectedId=null,i.currentImageSelectedName=null)})},200)},i.showImageOptions=function(e,t){var o=[{text:"Delete Photo",type:"button-positive",onTap:function(e){i.confirmImageRemoval()}},{text:"Close",onTap:function(e){i.currentImageSelectedId=null,i.currentImageSelectedName=null}}];if(i.currentImageSelectedId=e,i.currentImageSelectedName=t,"Profile Photo"==n.albumType||"Cover Photo"==n.albumType){var r="Profile Photo"==n.albumType?"Profile":"Cover";o.unshift({text:"Make "+r+" Photo",onTap:function(e){i.updateUsersDefaultPhoto()}})}i.mainPopup=g.show({title:"Image Options",cssClass:"image-options",scope:i,buttons:o})},e.$on("photo-uploaded",function(e,t){i.getProfileItems()})):(e.pageTitle="My Pictures",i.pageTitle=e.pageTitle,i.getProfileItems=function(){r.getPhotoAlbumsSummaryForProfile(e.user._profileId).success(function(t){e.debugModeLog({msg:"ProfileItemsCtrl getPhotoAlbumSummaryForProfile successData",data:t}),"null"!=t&&(i.profileItemCats={All:{name:"All",items:t}})}).error(function(){i.getProfileItems()})},e.$on("photo-uploaded",function(e,t){i.getProfileItems()}),e.$on("default-photo-update",function(e,t){i.getProfileItems()}));break;case"Watched":e.pageTitle=n.timeScale?"My Watched Items":"My Past Watched Items",i.pageTitle=e.pageTitle,i.noItemsMessage="present"==n.timeScale?"You are not watching any ":"You do not have any past watched ",i.getProfileItems=function(){r.getWatchedListingsForProfile(e.user._profileId,n.timeScale).success(function(t){e.debugModeLog({msg:"ProfileItemsCtrl getWatchedListingsForProfile successData",data:t}),i.profileItemCats=o(t)}).error(function(){i.getProfileItems()})},e.$on("menu-order-updated",function(e,t){i.getProfileItems()});break;case"Followed":e.pageTitle="My Followed Items",i.pageTitle=e.pageTitle,"1"==e.user.isBusiness&&(i.itemType="FollowedBusiness"),i.noItemsMessage="You are not following any ",i.getProfileItems=function(){r.getFollowedListingsForProfile(e.user._profileId).success(function(t){e.debugModeLog({msg:"ProfileItemsCtrl getFollowedListingsForProfile successData",data:t}),i.profileItemCats=o(t)}).error(function(){i.getProfileItems()})},e.$on("menu-order-updated",function(e,t){i.getProfileItems()});break;case"Following":e.pageTitle="My Followers",i.pageTitle=e.pageTitle,i.noItemsMessage="You are not being followed by any ",i.getProfileItems=function(){r.getFollowingProfilesForProfile(e.user._profileId).success(function(t){e.debugModeLog({msg:"ProfileItemsCtrl getFollowingProfilesForProfile successData",data:t}),i.profileItemCats=o(t)}).error(function(){i.getProfileItems()})},e.$on("menu-order-updated",function(e,t){i.getProfileItems()});break;case"Likes":"1"==e.user.isBusiness?(e.pageTitle="My Likes",i.pageTitle=e.pageTitle,i.itemType="Liked",i.noItemsMessage="Your business does not have any likes yet."):(e.pageTitle=n.timeScale?"My Liked items":"My Past Liked Items",i.pageTitle=e.pageTitle,i.noItemsMessage=n.timeScale?"You have not liked any current ":"You do not have any past liked "),i.getProfileItems=function(){r.getLikedListingsForProfile(e.user._profileId,n.timeScale).success(function(t){e.debugModeLog({msg:"ProfileItemsCtrl getLikedListingsForProfile successData",data:t}),i.profileItemCats=o(t)}).error(function(){i.getProfileItems()})},e.$on("menu-order-updated",function(e,t){i.getProfileItems()})}switch(i.itemType){case"PhotosSummary":i.nextPageFunction=function(e){t.go("app.profileItems",{itemType:"PhotosSummary",specificItemType:"SpecificPhotoFolderSummary",_albumId:e._albumId,albumType:e.picType})};break;case"Watched":i.nextPageFunction=function(e){if("Event"==e.listingType||"Movie"==e.listingType){t.go("app.feed");window.setTimeout(function(){t.go("app.feed.nlfeedListing",{_listingId:e._actionedListingId,listingType:e.listingType})},100)}else if("Offer"==e.listingType){t.go("app.offers");window.setTimeout(function(){t.go("app.offers.offerDetail",{_id:e._actionedListingId})},100)}};break;case"Likes":case"Liked":i.nextPageFunction=function(e){if("Offer"!=e.listingType){t.go("app.feed");window.setTimeout(function(){t.go("app.feed.nlfeedListing",{_listingId:e.relListingId,listingType:e.listingType})},100)}else if("Offer"==e.listingType){t.go("app.offers");window.setTimeout(function(){t.go("app.offers.offerDetail",{_id:e.relListingId})},100)}};break;case"Followed":case"FollowedBusiness":case"Following":i.nextPageFunction=function(e){t.go("app.feed");window.setTimeout(function(){t.go("app.feed.nlfeedListing",{_listingId:e.relListingId,listingType:e.listingType})},100)}}i.getProfileItems()},e.checkForAppInit(i)}]),app.controller("AddProfileItemCtrl",["$ionicHistory","$rootScope","$state","$stateParams","$scope","Profile","$ionicViewSwitcher","Images",function(e,t,n,i,o,r,a,s){o.rootScope=t,o.itemType=i.itemType,o.specificItemType=i.specificItemType,o.$on("$ionicView.beforeEnter",function(){t.backButtonFunction=function(){t.files=[],t.imageSrcs=[],t.progress=0;t.$broadcast("reset-image-crop"),t.initialBackButtonFunction()}}),o.pageLoad=function(){switch(i.itemType){case"PhotosSummary":o.select={ImgEntryType:{show:!1,chosenStyles:[{_id:null,name:"Select Image Folder"}],availableStyles:[{_id:1,name:"Cover Photos",coding_name:"cover_photo"},{_id:2,name:"Profile Photos",coding_name:"profile_photo"}]}},o.toggleStyle=function(e){e.show=!e.show},o.selectStyle=function(e,t){e.chosenStyles[0]=t,e.show=!1,o.imgEntryType=e.chosenStyles[0].coding_name,o.recalculateIdealImgDimensions()};case"SpecificPhotoFolderSummary":switch(i.albumType){case"Cover Photo":idealImgW=960,idealImgH=640,idealImgWPercent=90,o.imgEntryType="cover_photo",o.itemLabel="Cover Photo";break;case"Profile Photo":idealImgW=320,idealImgH=320,idealImgWPercent=40,o.imgEntryType="profile_photo",o.itemLabel="Profile Photo"}}o.imgUploadPrepare=function(){if(document.getElementById("img-upload").multiple=!1,ionic.Platform.isAndroid()){var e="cover_photo"==o.imgEntryType?function(){}:o.uploadImage;t.getAndroidImage({imgEntryType:o.imgEntryType,onComplete:e})}else document.getElementById("img-upload").click()},o.recalculateIdealImgDimensions=function(){idealImgW="cover_photo"==o.imgEntryType?960:320,idealImgH="cover_photo"==o.imgEntryType?640:320,idealImgWPercent="cover_photo"==o.imgEntryType?90:40,o.dataWidth=window.innerWidth>830?600:window.innerWidth/100*idealImgWPercent,o.dataHeight=idealImgH/idealImgW*o.dataWidth,t.dataScale=o.dataWidth/idealImgW};var e=function(e){t.debugModeLog({msg:"AddProfileItemCtrl uploadImage successData/errorData",data:e}),("Successfully uploaded"==e&&!ionic.Platform.isAndroid()||'"Successfully uploaded"'==e.response&&ionic.Platform.isAndroid())&&(t.$broadcast("photo-uploaded"),t.files=[],t.imageSrcs=[],t.progress=0,t.backButtonFunction(),t.appLoading=!1)};ionic.Platform.isAndroid()?o.uploadImage=function(n){var r=t.file,a=new FileUploadOptions,s=new FileTransfer,l={},c="Profile Photo"!=i.albumType&&"Cover Photo"!=i.albumType?o.select.ImgEntryType.chosenStyles[0].coding_name:o.imgEntryType;a.fileName=t.file.fileName,a.fileKey="fileUpload",a.httpMethod="POST",a.chunkedMode=!1,a.mimeType="image/jpeg",l.user_token=localStorage.getItem("auth_token"),l.user_email=localStorage.getItem("email"),l._profileId=t.user._profileId,l.imgEntryType=c,"Profile Photo"==i.albumType?(l.startX=0,l.startY=0,l.xDist=idealImgW,l.yDist=idealImgH):(l.startX=Math.floor(-1*n.imageX*(1/n.imageZoom)),l.xDist=Math.ceil(o.dataWidth*(1/n.imageZoom)),l.startY=Math.floor(-1*n.imageY*(1/n.imageZoom)),l.yDist=Math.ceil(o.dataHeight*(1/n.imageZoom))),a.params=l;var d=function(t){e(t)},u=function(t){e(t)};s.upload(r,encodeURI(t.assetsFolderUrl+"/data/functions/image-upload.php?action=uploadImage&platform=android"),d,u,a)}:o.uploadImage=function(n){var r=new FormData,a=Math.floor(-1*n.imageX*(1/n.imageZoom)),l=Math.ceil(o.dataWidth*(1/n.imageZoom)),c=Math.floor(-1*n.imageY*(1/n.imageZoom)),d=Math.ceil(o.dataHeight*(1/n.imageZoom)),u="Profile Photo"!=i.albumType&&"Cover Photo"!=i.albumType?o.select.ImgEntryType.chosenStyles[0].coding_name:o.imgEntryType;r.append("_profileId",t.user._profileId),r.append("imgEntryType",u),r.append("files[]",t.files[0]),r.append("startX",a),r.append("startY",c),r.append("xDist",l),r.append("yDist",d),s.uploadImage(r).success(function(t){e(t)}).error(function(t){e(t)})},o.recalculateIdealImgDimensions();var n=t.$on("cover-photo-uploaded",function(e,t){"app.addProfileItem"==t.currentViewName&&o.uploadImage(t)});o.$on("$destroy",function(){n()})},t.checkForAppInit(o)}]),app.controller("AccountSettingsCtrl",["$rootScope","$state","$stateParams","$scope","Offers","Profile","Events","Taxi","MenuItems","userService","$ionicScrollDelegate","Notifications","$ionicViewSwitcher","$ionicHistory","$timeout",function(e,t,n,i,o,r,s,l,c,d,u,p,g,m,f){i.settings={};i.rootScope=e,i.settingsType=n.settingsType,i.$on("$ionicView.enter",function(){e.topRightButtonShouldBeSettings=!1,e.topRightButtonFunction=function(){t.go("app.addBusinessItem",{itemType:n.itemType})}}),i.pageLoad=function(){switch(i.editField=function(e){if(e.editing)return e.editing=!1,i.editing=!1,i.settings=i.storedSettings,i.storedSettings=angular.copy(i.settings),!1;i.editing=!0,e.editing=!0},i.submitFieldEdit=function(t){if("Profile"==n.settingsType){var o=["displayName","word","email","firstName","lastName","addressLine1","addressLine2","postcode","phone1","profileDescription","businessName"];t!=i.settings.word?i.updateParams={_profileId:e.user._profileId,isBusiness:"0"==e.user.isBusiness?0:1,displayName:i.settings[o[0]].value,email:i.settings[o[2]].value,firstName:i.settings[o[3]].value,lastName:i.settings[o[4]].value,addressLine1:i.settings[o[5]].value,addressLine2:i.settings[o[6]].value,postcode:i.settings[o[7]].value,phone1:i.settings[o[8]].value,profileDescription:i.settings[o[9]].value,businessName:i.settings[o[10]].value}:i.updateParams={_profileId:e.user._profileId,word:i.settings[o[1]].value,resetCode:null,withResetCode:0};var a=function(){r.updateAllProfileDetails(i.updateParams).success(function(n){e.debugModeLog({msg:"AccountSettingsCtrl updateAllProfileDetails successData",data:n}),i.originalDisplayName=i.updateParams.displayName,t.editing=!1,i.editing=!1,i.storedSettings=angular.copy(i.settings),e.user.displayName=i.updateParams.displayName,e.user.email=i.updateParams.email,e.user.phone1=i.updateParams.phone1,"1"==e.user.isBusiness?e.user.name=i.updateParams.businessName:e.user.name=i.updateParams.firstName+" "+i.updateParams.lastName,e.$broadcast("savestate")}).error(function(e){a()})},s=function(){r.updateProfilePasswordDetails(i.updateParams).success(function(n){e.debugModeLog({msg:"AccountSettingsCtrl updateProfilePasswordDetails errorData",data:n}),t.editing=!1,i.editing=!1,i.storedSettings=angular.copy(i.settings)}).error(function(e){s()})};t==i.settings.word?s():a()}else if("Business"==n.settingsType){var o=["isAcceptingOnlineOrders","showTakeawayMenu","isAcceptingTableBookings","showCarteMenu","maxTableBookingGuests","isAcceptingTaxiBookings","isSearchable","isAcceptingEnquiries"];i.updateParams={_businessId:e.user._id};var l=function(){r.updateAllBusinessSettingDetails(i.updateParams).success(function(n){e.debugModeLog({msg:"AccountSettingsCtrl updateAllBusinessSettingDetails successData",data:n}),t.editing=!1,i.editing=!1,i.storedSettings=angular.copy(i.settings)}).error(function(e){l()})},c=function(){for(var e=0;e<i.settings.businessSettings.length;e++){var t=i.settings.businessSettings[e].specificSettings||[];for(b=0;b<t.length;b++)"binary"==t[b].optionStyle||"number"==t[b].optionStyle?i.updateParams[t[b].key]=t[b].val:"multiple"==t[b].optionStyle&&(i.updateParams[t[b].key]=t[b].labels[t[b].val]._id),e==i.settings.businessSettings.length-1&&b==t.length-1&&l()}},d=function(){i.updateParams._tonightsFeedButtonOptionId=0;for(var e=0;e<o.length;e++)i.updateParams[o[e]]=0,e==o.length-1&&c()};d()}},n.settingsType){case"Business":var o=function(t){i.settings.businessSettings=[],i.settings.businessSettings.push({businessType:"General",specificSettings:[{key:"isAcceptingEnquiries",label:"Accept Enquiries through the App",val:"0"==t.isAcceptingEnquiries?0:1,optionStyle:"binary",trueLabel:"I want to accept enquiries through the app",falseLabel:"I do not want to accept enquiries through the app",editing:!1}]});var n=function(){for(a=0;a<e.user.listingTypes.length;a++){switch(e.user.listingTypes[a]){case"Restaurant":i.settings.businessSettings.push({businessType:"Restaurant",specificSettings:[{key:"isAcceptingTableBookings",label:"Accept Table Bookings",val:"0"==t.isAcceptingTableBookings?0:1,optionStyle:"binary",trueLabel:"My business accepts Table Bookings through the app",falseLabel:"My business does not accept Table Bookings through the app",editing:!1},{key:"showCarteMenu",label:"Show A la Carte Menu",val:"0"==t.showCarteMenu?0:1,optionStyle:"binary",trueLabel:"Show my A la Carte Menu to users",falseLabel:"Do not show my A la Carte Menu to users",editing:!1},{key:"allowCommentInTableBooking",label:"Show a Comments Box in my Table Booking Form",val:"0"==t.allowCommentInTableBooking?0:1,optionStyle:"binary",trueLabel:"Show a Comments Box in Table Booking Form",falseLabel:"Do not show a Comments Box in Table Booking Form",editing:!1},{key:"maxTableBookingGuests",label:"Max Number of Guests per Booking",val:parseInt(t.maxTableBookingGuests),optionStyle:"number",trueLabel:"",falseLabel:"",editing:!1}]});break;case"Takeaway":i.settings.businessSettings.push({businessType:"Takeaway",specificSettings:[{key:"showTakeawayMenu",label:"Show Takeaway Menu",val:"0"==t.showTakeawayMenu?0:1,optionStyle:"binary",trueLabel:"Show my Takeaway Menu to users",falseLabel:"Do not show my Takeaway Menu to users",editing:!1}]});break;case"Nightclub":i.settings.businessSettings.push({businessType:"Nightclub"});break;case"Bar":i.settings.businessSettings.push({businessType:"Bar"});break;case"Taxi Firm":i.settings.businessSettings.push({businessType:"Taxi Firm",specificSettings:[{key:"isAcceptingTaxiBookings",label:"Accept Taxi Bookings",val:"0"==t.isAcceptingTaxiBookings?0:1,optionStyle:"binary",trueLabel:"My business accepts Taxi Bookings through the app",falseLabel:"My business does not accept Taxi Bookings through the app",editing:!1}]})}a==e.user.listingTypes.length-1&&(i.storedSettings=angular.copy(i.settings))}};i.getAllTonightsFeedOptionsForBusiness=function(){r.getAllTonightsFeedOptionsForBusiness(e.user._id).success(function(o){e.debugModeLog({msg:"AccountSettingsCtrl getAllTonightsFeedOptionsForBusiness successData",data:o});var r=0;for(b=0;b<o.length;b++)if(o[b].index=b,o[b]._id==t._tonightsFeedButtonOptionId&&(r=b),b==o.length-1)for(a=0;a<i.settings.businessSettings.length;a++)"General"==i.settings.businessSettings[a].businessType&&(i.settings.businessSettings[a].specificSettings.push({key:"_tonightsFeedButtonOptionId",label:"Call to action in the MyNyte feed",val:r,optionStyle:"multiple",labels:o,editing:!1}),n())}).error(function(e){i.getAllTonightsFeedOptionsForBusiness()})},-1!=e.user.listingTypes.indexOf("Taxi Firm")&&1==e.user.listingTypes.length?n():i.getAllTonightsFeedOptionsForBusiness()},s=function(){r.getAllBusinessSettingsForBusiness(e.user._id).success(function(e){o(e[0])}).error(function(e){s()})};s();break;case"Profile":i.formIsValidating=!1,i.showDisplayNameNote=!1,i.showPasswordNote=!1,i.checkIfDisplayNameTaken=function(t){e.checkIfDisplayNameTaken(t,i)},i.checkIfEmailTaken=function(e){e.length>4&&e!=i.originalEmail&&(i.formIsValidating=!0,r.checkIfEmailTaken(e).success(function(e){i.emailTaken=parseInt(e.total)>0,i.formIsValidating=!1}).error(function(){i.checkIfEmailTaken(e)}))},i.logOut=function(){e.appLoading=!0,null!=e.userUpdateTimer&&(f.cancel(e.userUpdateTimer),e.userUpdateTimer=null);var n=e.user.userInteractionObject;e.userLoggedIn=!1,e.user={},d.model.user={};var i=function(){r.makeUserInactive(e.user._profileId).success(function(e){}).error(function(e){i()})},o=function(){p.removeOneSignalIdForLogOut(e._userOneSignalId).success(function(e){}).error(function(e){o()})};i(),(ionic.Platform.isAndroid()||ionic.Platform.isIOS()||ionic.Platform.isIPad())&&o(),e.$broadcast("user-logged-in"),e.$broadcast("savestate"),e.user.userInteractionObject=n,t.go("app.profile"),m.clearCache(),setTimeout(function(){e.appLoading=!1,f(function(){u.scrollTop()},0)},200)},i.getAccountSettings=function(){r.getAllProfileDetails(e.user._profileId).success(function(e){var t="";if(null!=e[0].wordLength)for(a=0;a<e[0].wordLength;a++)t+="*";i.originalDisplayName=e[0].displayName,i.originalEmail=e[0].email,i.settings.displayName={value:e[0].displayName,editing:!1,name:"displayName"},i.settings.word={value:null,editing:!1,name:"word",displayValue:t},i.settings.firstName={value:e[0].firstName,editing:!1,name:"firstName"},i.settings.lastName={value:e[0].lastName,editing:!1,name:"lastName"},i.settings.email={value:e[0].email,editing:!1,name:"email"},i.settings.phone1={value:e[0].phone1,editing:!1,name:"phone1"},i.settings.addressLine1={value:e[0].addressLine1,editing:!1,name:"addressLine1"},i.settings.addressLine2={value:e[0].addressLine2,editing:!1,name:"addressLine2"},i.settings.postcode={value:e[0].postcode,editing:!1,name:"postcode"},i.settings.profileDescription={value:e[0].description,editing:!1,name:"profileDescription"},i.settings.businessName={value:e[0].businessName,editing:!1,name:"businessName"},i.settings.phone1.value=null==i.settings.phone1.value?"":i.settings.phone1.value,i.storedSettings=angular.copy(i.settings)}).error(function(e){i.getAccountSettings()})},i.getAccountSettings()}var l=e.$on("user-business-type-changed",function(){s()});i.$on("$destroy",function(){l()})},e.checkForAppInit(i)}]),app.controller("AccountSettingsAdvancedCtrl",["$rootScope","$state","$stateParams","$scope","Profile","userService","datesService","$ionicScrollDelegate","$ionicPopup","ionicTimePicker","Categories","userService","TableBooking",function(e,t,n,i,o,r,s,l,c,d,u,r,p){i.settings={};i.rootScope=e,i.settingsType=n.settingsType,i.setting=n.setting,i.editing=!1,i.pageLoading=!0,i.$on("$ionicView.beforeEnter",function(){e.topRightButtonIsPlus="BlockedTableBookingIntervals"==n.setting||e.topRightButtonIsPlus,e.topRightButtonIsEdit="BlockedTableBookingIntervals"!=n.setting&&e.topRightButtonIsEdit}),i.pageLoad=function(){switch(i.$on("$ionicView.enter",function(){e.topRightButtonFunction=function(){if(i.editing)switch(n.setting){case"OpeningTimes":i.weekdayModel=i.storedWeekdayModel;break;case"BusinessType":i.appliedBusinessTypes=i.storedAppliedBusinessTypes}else switch(n.setting){case"OpeningTimes":i.storedWeekdayModel=angular.copy(i.weekdayModel);break;case"BusinessType":i.storedAppliedBusinessTypes=angular.copy(i.appliedBusinessTypes)}i.editing&&l.scrollTop(),"BlockedTableBookingIntervals"==n.setting&&t.go("app.addBusinessItem",{itemType:"BlockedTableBookingIntervals"}),i.editing=!i.editing,e.currentlyEditing=!e.currentlyEditing}}),n.settingsType){case"Business":switch(n.setting){case"OpeningTimes":for(e.topRightButtonIsEdit=!0,i.weekdayModel=[{name:"Monday",opening:"Closed",closing:"Closed",index:0},{name:"Tuesday",opening:"Closed",closing:"Closed",index:1},{name:"Wednesday",opening:"Closed",closing:"Closed",index:2},{name:"Thursday",opening:"Closed",closing:"Closed",index:3},{name:"Friday",opening:"Closed",closing:"Closed",index:4},{name:"Saturday",opening:"Closed",closing:"Closed",index:5},{name:"Sunday",opening:"Closed",closing:"Closed",index:6}],a=0;a<i.weekdayModel.length;a++)i.weekdayModel[a].openingIpObj={callback:function(e){var t=i.currentWeekdayIndexBeingEdited,n=new Date(1e3*e),o=n.getUTCHours()<10?"0"+n.getUTCHours():n.getUTCHours(),r=n.getUTCMinutes()<10?"0"+n.getUTCMinutes():n.getUTCMinutes();i.weekdayModel[t].opening=o+":"+r,i.formInvalid="Closed"==i.weekdayModel[t].closing,i.weekdayModel[t].openingIpObj.inputTime=r<30?e:e-3600},inputTime:64800,format:12,step:5,setLabel:"Select"},i.weekdayModel[a].closingIpObj={callback:function(e){var t=i.currentWeekdayIndexBeingEdited,n=new Date(1e3*e),o=n.getUTCHours()<10?"0"+n.getUTCHours():n.getUTCHours(),r=n.getUTCMinutes()<10?"0"+n.getUTCMinutes():n.getUTCMinutes();i.weekdayModel[t].closing=o+":"+r,i.formInvalid="Closed"==i.weekdayModel[t].opening,i.weekdayModel[t].closingIpObj.inputTime=r<30?e:e-3600},inputTime:64800,format:12,step:5,setLabel:"Select"};i.getBusinessOpeningTimesForBusiness=function(){o.getBusinessOpeningTimesForBusiness(e.user._id).success(function(t){for(e.debugModeLog({msg:"AccountSettingsAdvancedCtrl getBusinessOpeningTimesForBusiness successData",data:t}),a=0;a<i.weekdayModel.length;a++)for(b=0;b<t.length;b++){if(i.weekdayModel[a].name==t[b].name){var n=t[b].openingTime.substr(0,2),o=t[b].openingTime.substr(3,2),r=60*o+3600*n,s=t[b].closingTime.substr(0,2),l=t[b].closingTime.substr(3,2),c=60*l+3600*s;i.weekdayModel[a].opening=t[b].openingTime.substr(0,5),i.weekdayModel[a].openingIpObj.inputTime=o<30?r:r-3600,i.weekdayModel[a].closing=t[b].closingTime.substr(0,5),i.weekdayModel[a].closingIpObj.inputTime=l<30?c:c-3600}a==i.weekdayModel.length-1&&b==t.length-1&&(i.pageLoading=!1)}}).error(function(){i.getBusinessOpeningTimesForBusiness()})},i.getBusinessOpeningTimesForBusiness(),i.markWeekdayAsClosed=function(e){e.opening="Closed",e.closing="Closed"},i.openTimePicker=function(e,t){i.currentWeekdayIndexBeingEdited=t,d.openTimePicker(e)},i.applyChanges=function(){o.updateOrInsertBusinessOpeningTimesForBusiness(e.user._id,"Closed"==i.weekdayModel[0].opening?null:i.weekdayModel[0].opening,"Closed"==i.weekdayModel[0].closing?null:i.weekdayModel[0].closing,"Closed"==i.weekdayModel[1].opening?null:i.weekdayModel[1].opening,"Closed"==i.weekdayModel[1].closing?null:i.weekdayModel[1].closing,"Closed"==i.weekdayModel[2].opening?null:i.weekdayModel[2].opening,"Closed"==i.weekdayModel[2].closing?null:i.weekdayModel[2].closing,"Closed"==i.weekdayModel[3].opening?null:i.weekdayModel[3].opening,"Closed"==i.weekdayModel[3].closing?null:i.weekdayModel[3].closing,"Closed"==i.weekdayModel[4].opening?null:i.weekdayModel[4].opening,"Closed"==i.weekdayModel[4].closing?null:i.weekdayModel[4].closing,"Closed"==i.weekdayModel[5].opening?null:i.weekdayModel[5].opening,"Closed"==i.weekdayModel[5].closing?null:i.weekdayModel[5].closing,"Closed"==i.weekdayModel[6].opening?null:i.weekdayModel[6].opening,"Closed"==i.weekdayModel[6].closing?null:i.weekdayModel[6].closing).success(function(t){l.scrollTop(),i.editing=!1,e.currentlyEditing=!1}).error(function(){i.applyChanges()})};break;case"BusinessType":i.currentBusinessTypeIndexToAdd=0,i.chosenBusinessTypeObjects=[{index:i.currentBusinessTypeIndexToAdd,_id:null,name:"Select a Business Type",showBusinessTypes:!1}],i.chosenBusinessTypeIds=[null],i.currentFoodStyleIndexToAdd=0,i.chosenFoodStyleObjects=[{index:i.currentFoodStyleIndexToAdd,_id:null,name:"Select a Food Style",showFoodStyles:!1}],i.chosenFoodStyleIds=[null],i.prepareAllAvailableAndAppliedFoodStyles=function(){u.getAllFoodStyles().success(function(t){e.debugModeLog({msg:"AccountSettingsAdvancedCtrl prepareAllAvailableAndAppliedFoodStyles successData",data:t}),i.foodStyles=t;var n=function(){o.getFoodStylesForBusiness(e.user._id).success(function(t){for(e.debugModeLog({msg:"AccountSettingsAdvancedCtrl getFoodStylesForBusiness successData",data:t}),a=0;a<t.length;a++)for(0==a?(i.chosenFoodStyleObjects[a].index=a,i.chosenFoodStyleObjects[a]._id=t[a]._id,i.chosenFoodStyleObjects[a].name=t[a].name,i.chosenFoodStyleIds[a]=t[a]._id):(i.currentFoodStyleIndexToAdd+=1,i.chosenFoodStyleObjects.push({index:i.currentFoodStyleIndexToAdd,_id:t[a]._id,name:t[a].name,showFoodStyles:!1}),i.chosenFoodStyleIds.push(t[a]._id)),b=0;b<i.foodStyles.length;b++)i.foodStyles[b].name==t[a].name&&i.foodStyles.splice(b,1);i.appliedFoodStyles=t}).error(function(){n()})};n()}).error(function(){i.prepareAllAvailableAndAppliedFoodStyles()})},i.prepareAllAvailableAndAppliedFoodStyles(),i.getAvailableBusinessTypes=function(){u.getAvailableBusinessTypes().success(function(t){for(i.businessTypes=[],z=0;z<t.length;z++)"myNyte"!=t[z].name&&i.businessTypes.push(t[z]);var n=function(){o.getBusinessTypesForBusiness(e.user._id).success(function(t){for(e.debugModeLog({msg:"AccountSettingsAdvancedCtrl getBusinessTypesForBusiness successData",data:t}),a=0;a<t.length;a++)for(0==a?(i.chosenBusinessTypeObjects[a].index=a,i.chosenBusinessTypeObjects[a]._id=t[a]._id,i.chosenBusinessTypeObjects[a].name=t[a].name,i.chosenBusinessTypeIds[a]=t[a]._id):(i.currentBusinessTypeIndexToAdd+=1,i.chosenBusinessTypeObjects.push({index:i.currentBusinessTypeIndexToAdd,_id:t[a]._id,name:t[a].name,showBusinessTypes:!1}),i.chosenBusinessTypeIds.push(t[a]._id)),b=0;b<i.businessTypes.length;b++)i.businessTypes[b].name==t[a].name&&i.businessTypes.splice(b,1);i.appliedBusinessTypes=t,i.pageLoading}).error(function(){n()})};n()}).error(function(){i.getAvailableBusinessTypes()})},i.getAvailableBusinessTypes(),i.toggleBusinessType=function(e){for(i.currentBusinessTypeIndexBeingToggled=e.index,a=0;a<i.chosenBusinessTypeObjects.length;a++)i.chosenBusinessTypeObjects[a].index!=e.index&&(i.chosenBusinessTypeObjects[a].showBusinessTypes=!1);e.showBusinessTypes=!e.showBusinessTypes,i.showBusinessTypes=e.showBusinessTypes},i.selectBusinessType=function(e){for(i.chosenBusinessType=e,a=0;a<i.chosenBusinessTypeObjects.length;a++)if(i.chosenBusinessTypeObjects[a].index==i.currentBusinessTypeIndexBeingToggled)for(i.chosenBusinessTypeIds[a]=i.chosenBusinessType._id,null!=i.chosenBusinessTypeObjects[a]._id&&i.businessTypes.push({_id:i.chosenBusinessTypeObjects[a]._id,name:i.chosenBusinessTypeObjects[a].name}),i.chosenBusinessTypeObjects[a]._id=e._id,i.chosenBusinessTypeObjects[a].name=e.name,i.chosenBusinessTypeObjects[a].showBusinessTypes=!1,b=0;b<i.businessTypes.length;b++)i.businessTypes[b].name==e.name&&i.businessTypes.splice(b,1);i.showBusinessTypes=!1},i.removeBusinessType=function(e){var t=null;for(a=0;a<i.chosenBusinessTypeObjects.length;a++)i.chosenBusinessTypeObjects[a].index==e.index&&(t=a,null!=i.chosenBusinessTypeObjects[a]._id&&i.businessTypes.push({_id:i.chosenBusinessTypeObjects[a]._id,name:i.chosenBusinessTypeObjects[a].name})),i.chosenBusinessTypeObjects[a].index>e.index&&(i.chosenBusinessTypeObjects[a].index=i.chosenBusinessTypeObjects[a].index-1),a==i.chosenBusinessTypeObjects.length-1&&(i.chosenBusinessTypeIds.splice(t,1),i.chosenBusinessTypeObjects.splice(t,1));i.currentBusinessTypeIndexToAdd=i.currentBusinessTypeIndexToAdd-1},i.newBusinessType=function(){if(3==i.currentBusinessTypeIndexToAdd)return!1;i.currentBusinessTypeIndexToAdd=i.currentBusinessTypeIndexToAdd+1,i.chosenBusinessTypeObjects.push({index:i.currentBusinessTypeIndexToAdd,_id:null,name:"Select a Business Type",showBusinessTypes:!1}),i.chosenBusinessTypeIds.push(null)},i.toggleFoodStyle=function(e){for(i.currentFoodStyleIndexBeingToggled=e.index,a=0;a<i.chosenFoodStyleObjects.length;a++)i.chosenFoodStyleObjects[a].index!=e.index&&(i.chosenFoodStyleObjects[a].showFoodStyles=!1);e.showFoodStyles=!e.showFoodStyles,i.showFoodStyles=e.showFoodStyles},i.selectFoodStyle=function(e){for(i.chosenFoodStyle=e,a=0;a<i.chosenFoodStyleObjects.length;a++)if(i.chosenFoodStyleObjects[a].index==i.currentFoodStyleIndexBeingToggled)for(i.chosenFoodStyleIds[a]=i.chosenFoodStyle._id,null!=i.chosenFoodStyleObjects[a]._id&&i.foodStyles.push({_id:i.chosenFoodStyleObjects[a]._id,name:i.chosenFoodStyleObjects[a].name}),i.chosenFoodStyleObjects[a]._id=e._id,i.chosenFoodStyleObjects[a].name=e.name,i.chosenFoodStyleObjects[a].showFoodStyles=!1,b=0;b<i.foodStyles.length;b++)i.foodStyles[b].name==e.name&&i.foodStyles.splice(b,1);i.showFoodStyles=!1},i.removeFoodStyle=function(e){var t=null;for(a=0;a<i.chosenFoodStyleObjects.length;a++)i.chosenFoodStyleObjects[a].index==e.index&&(t=a,null!=i.chosenFoodStyleObjects[a]._id&&i.foodStyles.push({_id:i.chosenFoodStyleObjects[a]._id,name:i.chosenFoodStyleObjects[a].name})),i.chosenFoodStyleObjects[a].index>e.index&&(i.chosenFoodStyleObjects[a].index=i.chosenFoodStyleObjects[a].index-1),a==i.chosenFoodStyleObjects.length-1&&(i.chosenFoodStyleIds.splice(t,1),i.chosenFoodStyleObjects.splice(t,1));i.currentFoodStyleIndexToAdd=i.currentFoodStyleIndexToAdd-1},i.newFoodStyle=function(){if(3==i.currentFoodStyleIndexToAdd)return!1;i.currentFoodStyleIndexToAdd=i.currentFoodStyleIndexToAdd+1,i.chosenFoodStyleObjects.push({index:i.currentFoodStyleIndexToAdd,_id:null,name:"Select a Food Style",showFoodStyles:!1}),i.chosenFoodStyleIds.push(null)},i.applyChanges=function(){e.appLoading=!0,i.chosenFoodStyleIds=-1==i.chosenBusinessTypeIds.indexOf("4")&&-1==i.chosenBusinessTypeIds.indexOf("5")?[]:i.chosenFoodStyleIds,o.updateBusinessTypesForBusiness(e.user._id,i.chosenBusinessTypeIds,i.chosenFoodStyleIds).success(function(t){for(i.appliedBusinessTypes=[],i.appliedFoodStyles=[],e.user.listingTypes=[],e.user.listingTypes[0]=null,e.user.listingType1=null,e.user.listingType2=null,e.user.listingType3=null,a=0;a<i.chosenBusinessTypeObjects.length;a++)if(i.appliedBusinessTypes[a]={},i.appliedBusinessTypes[a]._id=i.chosenBusinessTypeObjects[a]._id,i.appliedBusinessTypes[a].name=i.chosenBusinessTypeObjects[a].name,e.user.listingTypes[a]=i.chosenBusinessTypeObjects[a].name,0==a?e.user.listingType1=i.chosenBusinessTypeObjects[a].name:1==a?e.user.listingType2=i.chosenBusinessTypeObjects[a].name:e.user.listingType3=i.chosenBusinessTypeObjects[a].name,a==i.chosenBusinessTypeObjects.length-1)for(b=0;b<i.chosenFoodStyleObjects.length;b++)i.appliedFoodStyles[b]={},i.appliedFoodStyles[b]._id=i.chosenFoodStyleObjects[b]._id,i.appliedFoodStyles[b].name=i.chosenFoodStyleObjects[b].name,b==i.chosenFoodStyleIds.length-1&&(r.model.user=e.user,e.$broadcast("savestate"),e.$broadcast("user-business-type-changed"),i.editing=!1,e.currentlyEditing=!1,e.appLoading=!1)}).error(function(){i.applyChanges()})};break;case"BlockedTableBookingIntervals":i.getBlockedTableBookingIntervals=function(){var t={_businessId:e.user._id};p.getBlockedTableBookingIntervals(t).success(function(e){for(i.blockedTableBookingIntervals=null!=e?e:[],a=0;a<i.blockedTableBookingIntervals.length;a++)i.blockedTableBookingIntervals[a].startDate=s.convertToReadableDate(i,i.blockedTableBookingIntervals[a].startDateTime),i.blockedTableBookingIntervals[a].endDate=s.convertToReadableDate(i,i.blockedTableBookingIntervals[a].endDateTime),i.blockedTableBookingIntervals[a].startTime=s.getShortenedTimeString(i.blockedTableBookingIntervals[a].startDateTime),i.blockedTableBookingIntervals[a].endTime=s.getShortenedTimeString(i.blockedTableBookingIntervals[a].endDateTime)}).error(function(e){i.getBlockedTableBookingIntervals()})},i.getBlockedTableBookingIntervals(),i.showIntervalDeleteOptions=function(e){c.show({title:"Delete Interval",template:"<p>Are you sure you want to delete this Blocked Table Booking Interval? You won't be able to undo this action.</p>",scope:i,buttons:[{text:"Cancel",onTap:function(e){}},{text:"Delete",type:"button-positive",onTap:function(t){var n={_intervalId:e._id};p.deleteBlockedTableBookingInterval(n).success(function(t){for(a=0;a<i.blockedTableBookingIntervals.length;a++)i.blockedTableBookingIntervals[a]._id==e._id&&i.blockedTableBookingIntervals.splice(a,1)}).error(function(e){})}}]})}}break;case"Profile":n.setting}},e.checkForAppInit(i)}]),app.controller("ContactMyNyteCtrl",["$ionicHistory","$rootScope","$state","$scope","Profile","$ionicPopup",function(e,t,n,i,o,r){i.rootScope=t,i.pageLoad=function(){i.form={subject:"",message:""},i.submitContactForm=function(){var e={_profileId:t.user._profileId,subject:i.form.subject,message:i.form.message};o.contactMyNyteTeam(e).success(function(e){var t='"MyNyte Contact Success"'==e?"Message Sent":"Message failed to send",n='"MyNyte Contact Success"'==e?"<p>Your message to the MyNyte Team has been sent.</p>":"<p>Your message to the MyNyte Team was not sent. Please try again shortly.</p>";i.form='"MyNyte Contact Success"'==e?{subject:"",message:""}:i.form,r.show({title:t,template:n,scope:i,buttons:[{text:"Close",onTap:function(e){}}]})}).error(function(e){i.submitContactForm()})}},t.checkForAppInit(i)}]),app.controller("ArticlesCtrl",["$ionicHistory","$rootScope","$state","$stateParams","$scope","Profile","$ionicPopup",function(e,t,n,i,o,r,a){o.rootScope=t,o.pageLoad=function(){if(o.articleType=i.articleType,o.categories=i.categories,o.subCategories=i.subCategories,t.pageTitle="Business Help Articles",o.pageTitle=t.pageTitle,o.businessArticles={restaurant:{title:"Managing Table Bookings",icon:"ion-fork",articles:[{show:!1,title:"How to Check Table Bookings that have been Requested",text:"<ul><li>When youâre logged in, go to the âMyNyteâ page.</li><li>In your Business Tools section, click âRequested Table Bookingsâ.</li></ul>"},{show:!1,title:"How to Respond to Table Bookings that have been Requested",text:"<ul><li>When youâre in the âRequested Table Bookingsâ page, click on one of the Table Bookings in the option list.</li><li>Once youâre in the Table Booking page, you can see all the details of the booking, and you can go to the bottom to press either âAccept Bookingâ, âReject Bookingâ or âReject Booking but suggest a different timeâ</li><li>If you press âReject Booking but suggest a different timeâ, then a pop-up will come up and you should enter the time for your suggested booking time, and press set.</li></ul>"},{show:!1,title:"How to Check the Current Table Bookings that you've Accepted",text:"<ul><li>When youâre logged in, go to the âMyNyteâ page.</li><li>In your Business Tools section, click âCurrent Table Bookingsâ.</li><li>To see full details of a Table Booking, just click on it in the list, and here you can also âCancelâ the Table Booking if you wish to.</li></ul>"}]},nightclub:{title:"Managing Events / Entry Booking",icon:"ion-clipboard",articles:[{show:!1,title:"How to Create a New Event",text:"<ul><li>When youâre logged in, go to the âMyNyteâ page.</li><li>Under your âBusiness Toolsâ section, click âMy Current Eventsâ.</li><li>In this page, click the â+ Addâ button (or the â+â button if you are on a mobile device).</li><li>Fill in the details of your event into the form, and then press âAdd Eventâ at the bottom.</li></ul>"}]},taxi:{title:"Managing Taxi Bookings",icon:"ion-android-car",articles:[{show:!1,title:"How to Check Taxi Bookings that have been Requested",text:"<ul><li>When youâre logged in, go to the âMyNyteâ page.</li><li>In your Business Tools section, click âRequested Taxi Bookingsâ.</li></ul>"},{show:!1,title:"How to Respond to Taxi Bookings that have been Requested",text:"<ul><li>When youâre in the âRequested Taxi Bookingsâ page, click on one of the Taxi Bookings in the option list.</li><li>Once youâre in the Taxi Booking page, you can see all the details of the booking, and you can go to the bottom to enter an amount for your 'Lowest Price' and 'Quickest Time', and then press 'Respond'.</li><li>After you've responded to the Booking Request, you will be notified in the app by MyNyte after a few minutes about whether or not you've won the job.</li></ul>"},{show:!1,title:"How to Check the Current Taxi Bookings that you've Won",text:"<ul><li>When youâre logged in, go to the âMyNyteâ page.</li><li>In your Business Tools section, click âCurrent Taxi Bookingsâ.</li><li>To see full details of a Taxi Booking, just click on it in the list, and here you can also âCancelâ the Taxi Booking if you wish to.</li></ul>"}]}},o.articleCategories=[{title:"General",articles:[{show:!1,title:"How to Log into your Account",text:"<ul><li>Go to the âMyNyteâ page (left side of the page menu).</li><li>In the boxes, type in your e-mail address and password and press enter.</li></ul>"},{show:!1,title:"How to Check your Enquiries & Respond",text:"<ul><li>When youâre logged in, go to the âMyNyteâ page.</li><li>Near the top, click on the Enquiries option. You will see a list of all your enquiries, and you can click them to see them, and respond like a normal messaging app.</li></ul>"},{show:!1,title:"How to Create a New Offer",text:"<ul><li>When youâre logged in, go to the âMyNyteâ page.</li><li>Under your âBusiness Toolsâ section, click âMy Current Offersâ.</li><li>In this page, click the â+ Addâ button (or the â+â button if you are on a mobile device).</li><li>Fill in the details of your offer into the form, and then press âAdd Offerâ at the bottom.</li></ul>"},{show:!1,title:"How to Change Business Settings",text:"<ul><li>When youâre logged in, go to the âMyNyteâ page.</li></ul>"},{show:!1,title:"How to Log out of your Account",text:"<ul><li>When youâre logged in, go to the âMyNyteâ page.</li></ul>"}]}],null!=o.categories){o.categories=o.categories.split("&");for(var e=0;e<o.categories.length;e++)null!=o.businessArticles[o.categories[e]]&&o.businessArticles[o.categories[e]].articles.length>0&&o.articleCategories.push(o.businessArticles[o.categories[e]])}},t.checkForAppInit(o)}]),app.controller("ArticleCtrl",["$ionicHistory","$rootScope","$state","$stateParams","$scope","Profile","$ionicPopup",function(e,t,n,i,o,r,a){o.rootScope=t,o.pageLoad=function(){o.articleType=i.articleType,o.articleId=i.articleId},t.checkForAppInit(o)}]),app.controller("TaxiCtrl",["$rootScope","$state","$scope","$ionicPopup","$ionicConfig","Places","Taxi","$timeout","$ionicScrollDelegate",function(e,t,n,i,r,s,l,c,d){e.hideSearch=!0,n.ionicScrollDelegate=d,n.rootScope=e,n.currentTotalPassengers=0,n.quickestIsRequired=0,n.pickUpManuallyEntered=!1,n.dropOffManuallyEntered=!1,n.lookedUpPickUpLocation=null,n.lookedUpDropOffLocation=null,n.pageLoad=function(){n.bookTaxi=function(o){if(!e.userLoggedIn||e.appLoading&&"subsequent"!=o||""==$("input#pickup-input").val()||""==$("input#dropoff-input").val()||0==n.currentTotalPassengers)return!1;if(!(""!=e.user.phone1&&null!=e.user.phone1||""!=e.user.phone2&&null!=e.user.phone2))return i.show({title:"No Phone Number",template:'<i class="ion-ios-telephone main-icon"></i><p>You cannot request a Taxi Booking unless you have a Phone Number associated with your account. Please register your Phone Number to proceed.</p>',scope:n,buttons:[{text:"Close",onTap:function(e){}},{text:"Enter No.",type:"button-positive",onTap:function(e){t.go("app.profile"),c(function(){t.go("app.accountSettings",{settingsType:"Profile"})},50)}}]}),!1;e.appLoading=!0;n._pickUpPlaceId=$("input#pickup-placeId").val(),n.lookedUpPickUpLocation=$("input#pickup-input").val(),n.pickUpAddressLine1=$("input#pickup-address-line-1").val(),n.pickUpTown=$("input#pickup-town").val(),n.pickUpPostCode=$("input#pickup-postcode").val(),n._dropOffPlaceId=$("input#dropoff-placeId").val(),n.lookedUpDropOffLocation=$("input#dropoff-input").val(),n.dropOffAddressLine1=$("input#dropoff-address-line-1").val(),n.dropOffTown=$("input#dropoff-town").val(),n.dropOffPostCode=$("input#dropoff-postcode").val(),e.debugModeLog({msg:"TaxiCtrl bookTaxi paramsPassed",data:{pickUpPlaceId:n._pickUpPlaceId,lookedUpPickUpLocation:n.lookedUpPickUpLocation,pickUpAddressLine1:n.pickUpAddressLine1,pickUpTown:n.pickUpTown,pickUpPostCode:n.pickUpPostCode,_dropOffPlaceId:n._dropOffPlaceId,lookedUpDropOffLocation:n.lookedUpDropOffLocation,dropOffAddressLine1:n.dropOffAddressLine1,dropOffTown:n.dropOffTown,dropOffPostCode:n.dropOffPostCode,currentTotalPassengers:n.currentTotalPassengers,quickestIsRequired:n.quickestIsRequired,"$rootScope.user._id":e.user._id}}),l.bookTaxi(n._pickUpPlaceId,n.lookedUpPickUpLocation,n.pickUpAddressLine1,n.pickUpTown,n.pickUpPostCode,n._dropOffPlaceId,n.lookedUpDropOffLocation,n.dropOffAddressLine1,n.dropOffTown,n.dropOffPostCode,n.currentTotalPassengers,n.quickestIsRequired,null,null,e.user._id).success(function(t){if(e.debugModeLog({msg:"TaxiCtrl bookTaxi successData",data:t}),null!=t&&"null"!=t){var o={actionFunction:"goToBusinessItem",businessItemType:"RequestedTaxiBookings",_businessItemId:t[0]._taxiBookingId},r=[];for(a=0;a<t.length;a++)r.push(t[a]._profileId),a==t.length-1&&e.prepareMessageNotificationFinal(r,"New Taxi Booking Request received.","Taxi Booking Requested",o);e.appLoading=!1,n.lookedUpPickUpLocation=null,n.lookedUpDropOffLocation=null,n.pickUpManuallyEntered=!1,n.dropOffManuallyEntered=!1,n.currentTotalPassengers=0,$("input#pickup-placeId").val(""),$("input#pickup-input").val(""),$("input#pickup-address-line-1").val(""),$("input#pickup-town").val(""),$("input#pickup-postcode").val(""),$("input#dropoff-placeId").val(""),$("input#dropoff-input").val(""),$("input#dropoff-address-line-1").val(""),$("input#dropoff-town").val(""),$("input#dropoff-postcode").val(""),$(".taxi-form-hidden").removeClass("show"),i.show({title:"Taxi Booking Requested",template:'<i class="ion-checkmark main-icon"></i><p>Your Taxi Booking has been requested. We\'ll update you once the taxi firms have responded.</p>',scope:n,buttons:[{text:"Close",onTap:function(e){}}]})}else i.show({title:"An Error Occured",template:'<i class="ion-close main-icon"></i><p>Your Taxi Booking could not be processed. Please try again later.</p>',scope:n,buttons:[{text:"Close",onTap:function(e){}}]})}).error(function(){n.bookTaxi("subsequent")})},n.updateTotalPassengers=function(e){n.currentTotalPassengers=n.currentTotalPassengers<2&&-1==e||99==n.currentTotalPassengers&&1==e?n.currentTotalPassengers:n.currentTotalPassengers+=e},n.arrangeInputs=function(e){var t=/^[A-Z]{1,2}[0-9]{1,2} ?[0-9][A-Z]{2}$/i,n=t.test(innerH),i=["Bedford","Luton","Northampton","Milton Keynes"],r=-1==i.indexOf(innerH);n?o[objIndex].description+=", "+innerH:r&&(town=innerH)},e.$on("no-taxi-search-results",function(e,t){"pickup-input"==t.inputType?n.pickUpManuallyEntered=!0:"dropoff-input"==t.inputType&&(n.dropOffManuallyEntered=!0)}),e.$on("taxi-search-results",function(e,t){"pickup-input"==t.inputType?n.pickUpManuallyEntered=!1:"dropoff-input"==t.inputType&&(n.dropOffManuallyEntered=!1)})},e.checkForAppInit(n),this.updateTaxiType=function(e){n.quickestIsRequired=e}}]),function(){angular.module("cmGoogleApi",[])}(),function(){angular.module("cmGoogleApi").provider("googleClient",function(){var e,t,n,i="",o={},r=0,a=0,s=[],l=[],c=!1,d=!1,u=!1,p=!1,g=!1,m=!1,f=!1,h=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},v=function(){0==--r&&(p=!0,g=!1,t.resolve())},y=function(){0==--a&&(m=!0,f=!1,n.resolve())},b=function(){var t=!1;if(u){if(void 0===e)return void n.reject("you need to provide the clientId if you load google auth");if(!o.fetch_basic_profile&&""===h(i))return void n.reject('you need to set "fetch_basic_profile" to true or request at least one scope if you load google auth');t=!0,gapi.load("auth",{callback:y}),gapi.load("auth2",function(){o.scope=i,o.client_id=e,gapi.auth2.init(o),y()})}return c&&(t=!0,gapi.load("client",{callback:y})),d&&(void 0===e?n.reject("you need to provide the clientId if you load google picker"):(t=!0,gapi.load("picker",{callback:y}))),t},w=function(){var e=!1;return angular.forEach(l,function(t){e=!0,gapi.client.load(t.api,t.version,v,t.baseUrl)}),angular.forEach(s,function(t){e=!0,gapi.client.load(t.api,t.version,v)}),!c||e},C=function(){return c||(c=!0,a++),this};this.loadGoogleAuth=function(e){return u||(u=!0,a+=2,"object"==typeof e&&(void 0!==e.hosted_domain&&(o.hosted_domain=e.hosted_domain),void 0!==e.cookie_policy?o.cookie_policy=e.cookie_policy:o.cookie_policy="single_host_origin",void 0!==e.fetch_basic_profile?o.fetch_basic_profile=e.fetch_basic_profile:o.fetch_basic_profile=!0,o.fetch_basic_profile&&(this.addScope("profile"),this.addScope("email")))),this},this.loadPickerLibrary=function(){return d||(d=!0,a++),this},this.addApi=function(e,t,n){C();var i={};return i.api=e,i.version=t,r++,void 0===n?s.push(i):(i.baseUrl=n,l.push(i)),this},this.addScope=function(e){return i+=" "+e,this},this.setClientId=function(t){return e=t,this},this.$get=["$q","$window","$document",function(o,r,a){return{afterScriptsLoaded:function(){if(!m&&!f){f=!0,n=o.defer(),r._cmGoogleClientInitCallback=function(){b()||n.reject("at least you need to add some api, load picker library or load google auth")};var e=a[0].createElement("script");e.onerror=function(e){n.reject(e)},e.src="https://apis.google.com/js/api.js?onload=_cmGoogleClientInitCallback",a[0].body.appendChild(e)}return n.promise},afterApiLoaded:function(){return p||g||(t=o.defer(),g=!0,this.afterScriptsLoaded().then(function(){w()||t.reject("at least you need to load an Api")},function(e){t.reject(e)})),t.promise},clientId:e,scopes:i.trim()}}]})}(),function(){angular.module("cmGoogleApi").service("cmApiService",["$q","googleClient",function(e,t){this.execute=function(n,i){var o=e.defer();return t.afterApiLoaded().then(function(){n=n.split(".");var e=gapi.client;angular.forEach(n,function(t){e=e[t]},e);var t;t=void 0===i?e():e(i),t.then(function(e){o.resolve(e)},function(e){o.reject(e)})},function(e){o.reject(e)}),o.promise}}])}(),function(){angular.module("cmGoogleApi").service("cmAuthService",["$q","googleClient",function(e,t){this.getAuthInstance=function(){var n=e.defer();return t.afterScriptsLoaded().then(function(){var e=gapi.auth2.getAuthInstance();e.then(function(){var t=e.then;e.then=void 0,n.resolve(e),e.then=t},function(e){n.reject(e)})},function(e){n.reject(e)}),n.promise}}])}(),function(){angular.module("cmGoogleApi").directive("cmGooglePicker",["googleClient","$q","$window",function(e,t,n){return{restrict:"A",scope:{locale:"@",views:"&",onPicked:"="},link:function(t,i,o){function r(e){t.onPicked&&e.action===google.picker.Action.PICKED&&t.$apply(t.onPicked(e.docs))}function a(){e.afterScriptsLoaded().then(function(){var e=(new google.picker.PickerBuilder).setLocale(t.locale).setOAuthToken(gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token).setOrigin(n.location.protocol+"//"+n.location.host).setCallback(r),i=t.views();angular.forEach(i,function(t){e.addView(t)}),e=e.build(),e.setVisible(!0)})}i.bind("click",function(e){a()})}}}])}(),function(){angular.module("cmGoogleApi").directive("cmGoogleSignIn",["$http","googleClient",function(e,t){return{restrict:"E",transclude:!0,replace:!0,scope:{clickHandler:"=?",signInListener:"=?",userListener:"=?"},template:"<ng-transclude></ng-transclude>",link:function(e,n,i){function o(t){e.$apply(e.clickHandler(t))}function r(t){gapi.auth.setToken(t.getAuthResponse()),void 0!==e.userListener&&e.$apply(e.userListener(t))}function a(t){e.$apply(e.signInListener(t))}void 0===e.clickHandler&&(e.clickHandler=angular.noop),t.afterScriptsLoaded().then(function(){var t=gapi.auth2.getAuthInstance();void 0!==e.signInListener&&t.isSignedIn.listen(a),t.currentUser.listen(r),t.attachClickHandler(n[0],{},o,function(e){throw new Error(JSON.stringify(e,void 0,2))})},function(e){})}}}])}(),!function(e,t,n){!function(){t.module("ngMaterial",["ng","ngAnimate","ngAria","material.core","material.core.gestures","material.core.layout","material.core.theming.palette","material.core.theming","material.core.animate","material.components.autocomplete","material.components.bottomSheet","material.components.backdrop","material.components.button","material.components.card","material.components.checkbox","material.components.chips","material.components.content","material.components.datepicker","material.components.dialog","material.components.divider","material.components.fabActions","material.components.fabShared","material.components.fabSpeedDial","material.components.fabToolbar","material.components.gridList","material.components.fabTrigger","material.components.icon","material.components.input","material.components.list","material.components.menuBar","material.components.menu","material.components.progressCircular","material.components.progressLinear","material.components.radioButton","material.components.select","material.components.showHide","material.components.sidenav","material.components.sticky","material.components.slider","material.components.subheader","material.components.swipe","material.components.switch","material.components.tabs","material.components.toast","material.components.toolbar","material.components.virtualRepeat","material.components.tooltip","material.components.whiteframe"])}(),function(){function e(e,t){if(t.has("$swipe")){e.warn("You are using the ngTouch module. \nAngular Material already has mobile click, tap, and swipe support... \nngTouch is not supported with Angular Material!")}}function n(e,t){e.decorator("$$rAF",["$delegate",i]),t.theme("default").primaryPalette("indigo").accentPalette("pink").warnPalette("deep-orange").backgroundPalette("grey")}function i(e){return e.throttle=function(t){var n,i,o,r;return function(){n=arguments,r=this,o=t,i||(i=!0,e(function(){o.apply(r,Array.prototype.slice.call(n)),i=!1}))}},e}t.module("material.core",["ngAnimate","material.core.animate","material.core.layout","material.core.gestures","material.core.theming"]).config(n).run(e),e.$inject=["$log","$injector"],n.$inject=["$provide","$mdThemingProvider"],i.$inject=["$delegate"]}(),function(){function e(){return{restrict:"A",link:n}}function n(e,t,n){var i=n.mdAutoFocus||n.mdAutofocus||n.mdSidenavFocus;e.$watch(i,function(e){t.toggleClass("_md-autofocus",e)})}t.module("material.core").directive("mdAutofocus",e).directive("mdAutoFocus",e).directive("mdSidenavFocus",e)}(),function(){function e(e){function t(e){return n?"webkit"+e.charAt(0).toUpperCase()+e.substring(1):e}var n=/webkit/i.test(e.vendorPrefix);return{KEY_CODE:{COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},CSS:{TRANSITIONEND:"transitionend"+(n?" webkitTransitionEnd":""),ANIMATIONEND:"animationend"+(n?" webkitAnimationEnd":""),TRANSFORM:t("transform"),TRANSFORM_ORIGIN:t("transformOrigin"),TRANSITION:t("transition"),TRANSITION_DURATION:t("transitionDuration"),ANIMATION_PLAY_STATE:t("animationPlayState"),ANIMATION_DURATION:t("animationDuration"),ANIMATION_NAME:t("animationName"),ANIMATION_TIMING:t("animationTimingFunction"),ANIMATION_DIRECTION:t("animationDirection")},MEDIA:{xs:"(max-width: 599px)","gt-xs":"(min-width: 600px)",sm:"(min-width: 600px) and (max-width: 959px)","gt-sm":"(min-width: 960px)",md:"(min-width: 960px) and (max-width: 1279px)","gt-md":"(min-width: 1280px)",lg:"(min-width: 1280px) and (max-width: 1919px)","gt-lg":"(min-width: 1920px)",xl:"(min-width: 1920px)",print:"print"},MEDIA_PRIORITY:["xl","gt-lg","lg","gt-md","md","gt-sm","sm","gt-xs","xs","print"]}}t.module("material.core").factory("$mdConstant",e),e.$inject=["$sniffer"]}(),function(){function e(e,n){function i(){return[].concat(y)}function o(){return y.length}function r(e){return y.length&&e>-1&&e<y.length}function a(e){return!!e&&r(p(e)+1)}function s(e){return!!e&&r(p(e)-1)}function l(e){return r(e)?y[e]:null}function c(e,t){return y.filter(function(n){return n[e]===t})}function d(e,n){return e?(t.isNumber(n)||(n=y.length),y.splice(n,0,e),p(e)):-1}function u(e){g(e)&&y.splice(p(e),1)}function p(e){return y.indexOf(e)}function g(e){return e&&p(e)>-1}function m(){return y.length?y[0]:null}function f(){return y.length?y[y.length-1]:null}function h(e,i,o,a){o=o||v;for(var s=p(i);;){if(!r(s))return null;var l=s+(e?-1:1),c=null;if(r(l)?c=y[l]:n&&(c=e?f():m(),l=p(c)),null===c||l===a)return null;if(o(c))return c;t.isUndefined(a)&&(a=l),s=l}}var v=function(){return!0};e&&!t.isArray(e)&&(e=Array.prototype.slice.call(e)),n=!!n;var y=e||[];return{items:i,count:o,inRange:r,contains:g,indexOf:p,itemAt:l,findBy:c,add:d,remove:u,first:m,last:f,next:t.bind(null,h,!1),previous:t.bind(null,h,!0),hasPrevious:s,hasNext:a}}t.module("material.core").config(["$provide",function(t){t.decorator("$mdUtil",["$delegate",function(t){return t.iterator=e,t}])}])}(),function(){function e(e,n,i){function o(e){var n=p[e];t.isUndefined(n)&&(n=p[e]=r(e));var i=m[n];return t.isUndefined(i)&&(i=a(n)),i}function r(t){return e.MEDIA[t]||("("!==t.charAt(0)?"("+t+")":t)}function a(e){var t=g[e];return t||(t=g[e]=i.matchMedia(e)),t.addListener(s),m[t.media]=!!t.matches}function s(e){n.$evalAsync(function(){m[e.media]=!!e.matches})}function l(e){return g[e]}function c(t,n){for(var i=0;i<e.MEDIA_PRIORITY.length;i++){var o=e.MEDIA_PRIORITY[i];if(g[p[o]].matches){var r=u(t,n+"-"+o);if(t[r])return t[r]}}return t[u(t,n)]}function d(n,i,o){var r=[];return n.forEach(function(n){var a=u(i,n);t.isDefined(i[a])&&r.push(i.$observe(a,t.bind(void 0,o,null)));for(var s in e.MEDIA)a=u(i,n+"-"+s),t.isDefined(i[a])&&r.push(i.$observe(a,t.bind(void 0,o,s)))}),function(){r.forEach(function(e){e()})}}function u(e,t){return f[t]||(f[t]=e.$normalize(t))}var p={},g={},m={},f={};return o.getResponsiveAttribute=c,o.getQuery=l,o.watchResponsiveAttributes=d,o}t.module("material.core").factory("$mdMedia",e),e.$inject=["$mdConstant","$rootScope","$window"]}(),function(){function i(i,r,a,s,l,c,d,u,p){function g(e){return e[0]||e}var m=c.startSymbol(),f=c.endSymbol(),h="{{"===m&&"}}"===f,v=function(e,n,i){var o=!1;if(e&&e.length){var r=p.getComputedStyle(e[0]);o=t.isDefined(r[n])&&(!i||r[n]==i)}return o},y={dom:{},now:e.performance?t.bind(e.performance,e.performance.now):Date.now||function(){return(new Date).getTime()},bidi:function(e,n,o,r){function a(e){return e?s(e)?e:e+"px":"0"}function s(e){return String(e).indexOf("px")>-1}var l=!("rtl"==i[0].dir||"rtl"==i[0].body.dir);return 0==arguments.length?l?"ltr":"rtl":void(l&&t.isDefined(o)?t.element(e).css(n,a(o)):!l&&t.isDefined(r)&&t.element(e).css(n,a(r)))},clientRect:function(e,t,n){var i=g(e);t=g(t||i.offsetParent||document.body);var o=i.getBoundingClientRect(),r=n?t.getBoundingClientRect():{left:0,top:0,width:0,height:0};return{left:o.left-r.left,top:o.top-r.top,width:o.width,height:o.height}},offsetRect:function(e,t){return y.clientRect(e,t,!0)},nodesToArray:function(e){e=e||[];for(var t=[],n=0;n<e.length;++n)t.push(e.item(n));return t},scrollTop:function(e){e=t.element(e||i[0].body);var o=e[0]==i[0].body?i[0].body:n;return(o?o.scrollTop+o.parentElement.scrollTop:0)||Math.abs(e[0].getBoundingClientRect().top)},findFocusTarget:function(e,n){function i(e,n){var i,o=e[0].querySelectorAll(n);return o&&o.length&&o.length&&t.forEach(o,function(e){e=t.element(e),e.hasClass("_md-autofocus")&&(i=e)}),i}var o,r="[md-autofocus]";return o=i(e,n||r),o||n==r||(o=i(e,"[md-auto-focus]"))||(o=i(e,r)),o},disableScrollAround:function(e,n){function o(e){function n(e){e.preventDefault()}e=t.element(e||s)[0];var i=50,o=t.element('<div class="md-scroll-mask">  <div class="md-scroll-mask-bar"></div></div>').css("z-index",i);return e.appendChild(o[0]),o.on("wheel",n),o.on("touchmove",n),function(){o.off("wheel"),o.off("touchmove"),o[0].parentNode.removeChild(o[0]),delete y.disableScrollAround._enableScrolling}}function r(){var e=s.parentNode,t=e.style.cssText||"",n=s.style.cssText||"",i=y.scrollTop(s),o=s.clientWidth;return s.scrollHeight>s.clientHeight+1&&(a(s,{position:"fixed",width:"100%",top:-i+"px"}),a(e,{overflowY:"scroll"})),s.clientWidth<o&&a(s,{overflow:"hidden"}),function(){s.style.cssText=n,e.style.cssText=t,s.scrollTop=i,e.scrollTop=i}}function a(e,t){for(var n in t)e.style[n]=t[n]}if(y.disableScrollAround._count=y.disableScrollAround._count||0,++y.disableScrollAround._count,y.disableScrollAround._enableScrolling)return y.disableScrollAround._enableScrolling;e=t.element(e);var s=i[0].body,l=r(),c=o(n);return y.disableScrollAround._enableScrolling=function(){--y.disableScrollAround._count||(l(),c(),delete y.disableScrollAround._enableScrolling)}},enableScrolling:function(){var e=this.disableScrollAround._enableScrolling;e&&e()},floatingScrollbars:function(){if(this.floatingScrollbars.cached===n){var e=t.element("<div><div></div></div>").css({width:"100%","z-index":-1,position:"absolute",height:"35px","overflow-y":"scroll"});e.children().css("height","60px"),i[0].body.appendChild(e[0]),this.floatingScrollbars.cached=e[0].offsetWidth==e[0].childNodes[0].offsetWidth,e.remove()}return this.floatingScrollbars.cached},forceFocus:function(t){var n=t[0]||t;document.addEventListener("click",function e(t){t.target===n&&t.$focus&&(n.focus(),t.stopImmediatePropagation(),t.preventDefault(),n.removeEventListener("click",e))},!0);var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!1,!0,e,{},0,0,0,0,!1,!1,!1,!1,0,null),i.$material=!0,i.$focus=!0,n.dispatchEvent(i)},createBackdrop:function(e,t){return a(y.supplant('<md-backdrop class="{0}">',[t]))(e)},supplant:function(e,t,n){return n=n||/\{([^\{\}]*)\}/g,e.replace(n,function(e,n){var i=n.split("."),o=t;try{for(var r in i)i.hasOwnProperty(r)&&(o=o[i[r]])}catch(t){o=e}return"string"==typeof o||"number"==typeof o?o:e})},fakeNgModel:function(){return{$fake:!0,$setTouched:t.noop,$setViewValue:function(e){this.$viewValue=e,this.$render(e),this.$viewChangeListeners.forEach(function(e){e()})},$isEmpty:function(e){return 0===(""+e).length},$parsers:[],$formatters:[],$viewChangeListeners:[],$render:t.noop}},debounce:function(e,t,i,o){var a;return function(){var s=i,l=Array.prototype.slice.call(arguments);r.cancel(a),a=r(function(){a=n,e.apply(s,l)},t||10,o)}},throttle:function(e,t){var n;return function(){var i=this,o=arguments,r=y.now();(!n||r-n>t)&&(e.apply(i,o),n=r)}},time:function(e){var t=y.now();return e(),y.now()-t},valueOnUse:function(e,t,n){var i=null,o=Array.prototype.slice.call(arguments),r=o.length>3?o.slice(3):[];Object.defineProperty(e,t,{get:function(){return null===i&&(i=n.apply(e,r)),i}})},nextUid:function(){return""+o++},disconnectScope:function(e){if(e&&e.$root!==e&&!e.$$destroyed){var t=e.$parent;e.$$disconnected=!0,t.$$childHead===e&&(t.$$childHead=e.$$nextSibling),t.$$childTail===e&&(t.$$childTail=e.$$prevSibling),e.$$prevSibling&&(e.$$prevSibling.$$nextSibling=e.$$nextSibling),e.$$nextSibling&&(e.$$nextSibling.$$prevSibling=e.$$prevSibling),e.$$nextSibling=e.$$prevSibling=null}},reconnectScope:function(e){if(e&&e.$root!==e&&e.$$disconnected){var t=e,n=t.$parent;t.$$disconnected=!1,t.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=t,n.$$childTail=t):n.$$childHead=n.$$childTail=t}},getClosest:function(e,n,i){if(e instanceof t.element&&(e=e[0]),n=n.toUpperCase(),i&&(e=e.parentNode),!e)return null;do{if(e.nodeName===n)return e}while(e=e.parentNode);return null},elementContains:function(n,i){return(e.Node&&e.Node.prototype&&Node.prototype.contains?t.bind(n,n.contains):t.bind(n,function(e){return n===i||!!(16&this.compareDocumentPosition(e))}))(i)},extractElementByName:function(e,n,i,o){function r(e){return a(e)||(i?s(e):null)}function a(e){if(e)for(var t=0,i=e.length;i>t;t++)if(e[t].nodeName.toLowerCase()===n)return e[t];return null}function s(e){var t;if(e)for(var n=0,i=e.length;i>n;n++){var o=e[n];if(!t)for(var a=0,s=o.childNodes.length;s>a;a++)t=t||r([o.childNodes[a]])}return t}var l=r(e);return!l&&o&&d.warn(y.supplant("Unable to find node '{0}' in element '{1}'.",[n,e[0].outerHTML])),t.element(l||e)},initOptionalProperties:function(e,n,i){i=i||{},t.forEach(e.$$isolateBindings,function(o,r){if(o.optional&&t.isUndefined(e[r])){var a=t.isDefined(n[o.attrName]);e[r]=t.isDefined(i[r])?i[r]:a}})},nextTick:function(e,t,n){function i(){var e=n&&n.$$destroyed,t=e?[]:o.queue,i=e?null:o.digest;o.queue=[],o.timeout=null,o.digest=!1,t.forEach(function(e){e()}),i&&s.$digest()}var o=y.nextTick,a=o.timeout,l=o.queue||[];return l.push(e),null==t&&(t=!0),o.digest=o.digest||t,o.queue=l,a||(o.timeout=r(i,0,!1))},processTemplate:function(e){return h?e:e&&t.isString(e)?e.replace(/\{\{/g,m).replace(/}}/g,f):e},getParentWithPointerEvents:function(e){for(var t=e.parent();v(t,"pointer-events","none");)t=t.parent();return t},getNearestContentElement:function(e){for(var t=e.parent()[0];t&&t!==u[0]&&t!==document.body&&"MD-CONTENT"!==t.nodeName.toUpperCase();)t=t.parentNode;return t},parseAttributeBoolean:function(e,t){return""===e||!!e&&(!1===t||"false"!==e&&"0"!==e)},hasComputedStyle:v};return y.dom.animator=l(y),y}var o=0;t.module("material.core").factory("$mdUtil",i),i.$inject=["$document","$timeout","$compile","$rootScope","$$mdAnimate","$interpolate","$log","$rootElement","$window"],t.element.prototype.focus=t.element.prototype.focus||function(){return this.length&&this[0].focus(),this},t.element.prototype.blur=t.element.prototype.blur||function(){return this.length&&this[0].blur(),this}}(),function(){function e(e,n,i,o){function r(e,i,o){var r=t.element(e)[0]||e;!r||r.hasAttribute(i)&&0!==r.getAttribute(i).length||c(r,i)||(o=t.isString(o)?o.trim():"",o.length?e.attr(i,o):n.warn('ARIA: Attribute "',i,'", required for accessibility, is missing on node:',r))}function a(t,n,i){e(function(){r(t,n,i())})}function s(e,t){var n=l(e)||"";n.indexOf(o.startSymbol())>-1?a(e,t,function(){return l(e)}):r(e,t,n)}function l(e){return(e.text()||"").trim()}function c(e,t){function n(e){return"none"===(e.currentStyle?e.currentStyle:i.getComputedStyle(e)).display}var o=e.hasChildNodes(),r=!1;if(o)for(var a=e.childNodes,s=0;s<a.length;s++){var l=a[s];1===l.nodeType&&l.hasAttribute(t)&&(n(l)||(r=!0))}return r}return{expect:r,expectAsync:a,expectWithText:s}}t.module("material.core").service("$mdAria",e),e.$inject=["$$rAF","$log","$window","$interpolate"]}(),function(){function e(e,n,i,o,r,a){this.compile=function(s){var l=s.templateUrl,c=s.template||"",d=s.controller,u=s.controllerAs,p=t.extend({},s.resolve||{}),g=t.extend({},s.locals||{}),m=s.transformTemplate||t.identity,f=s.bindToController;return t.forEach(p,function(e,n){t.isString(e)?p[n]=i.get(e):p[n]=i.invoke(e)}),t.extend(p,g),p.$template=l?n.get(l,{cache:a}).then(function(e){return e.data}):e.when(c),e.all(p).then(function(e){var n,i=m(e.$template,s),a=s.element||t.element("<div>").html(i.trim()).contents(),l=o(a);return n={locals:e,element:a,link:function(i){if(e.$scope=i,d){var o=r(d,e,!0);f&&t.extend(o.instance,e);var s=o();a.data("$ngControllerController",s),a.children().data("$ngControllerController",s),u&&(i[u]=s),n.controller=s}return l(i)}}})}}t.module("material.core").service("$mdCompiler",e),e.$inject=["$q","$http","$injector","$compile","$controller","$templateCache"]}(),function(){function n(){}function i(n,i,o){function r(e){return function(t,n){n.distance<this.state.options.maxDistance&&this.dispatchEvent(t,e,n)}}function a(e,t,n){var i=m[t.replace(/^\$md./,"")];if(!i)throw new Error("Failed to register element with handler "+t+". Available handlers: "+Object.keys(m).join(", "));return i.registerElement(e,n)}function l(e,i){var o=new n(e);return t.extend(o,i),m[e]=o,h}var c=navigator.userAgent||navigator.vendor||e.opera,u=c.match(/ipad|iphone|ipod/i),p=c.match(/android/i),g=void 0!==e.jQuery&&t.element===e.jQuery,h={handler:l,register:a,isHijackingClicks:(u||p)&&!g&&!f};if(h.isHijackingClicks){var v=6;h.handler("click",{options:{maxDistance:v},onEnd:r("click")}),h.handler("focus",{options:{maxDistance:v},onEnd:function(e,t){function n(e){var t=["INPUT","SELECT","BUTTON","TEXTAREA","VIDEO","AUDIO"];return"-1"!=e.getAttribute("tabindex")&&!e.hasAttribute("DISABLED")&&(e.hasAttribute("tabindex")||e.hasAttribute("href")||-1!=t.indexOf(e.nodeName))}t.distance<this.state.options.maxDistance&&n(e.target)&&(this.dispatchEvent(e,"focus",t),e.target.focus())}}),h.handler("mouseup",{options:{maxDistance:v},onEnd:r("mouseup")}),h.handler("mousedown",{onStart:function(e){this.dispatchEvent(e,"mousedown")}})}return h.handler("press",{onStart:function(e,t){this.dispatchEvent(e,"$md.pressdown")},onEnd:function(e,t){this.dispatchEvent(e,"$md.pressup")}}).handler("hold",{options:{maxDistance:6,delay:500},onCancel:function(){o.cancel(this.state.timeout)},onStart:function(e,n){return this.state.registeredParent?(this.state.pos={x:n.x,y:n.y},void(this.state.timeout=o(t.bind(this,function(){this.dispatchEvent(e,"$md.hold"),this.cancel()}),this.state.options.delay,!1))):this.cancel()},onMove:function(e,t){e.preventDefault();var n=this.state.pos.x-t.x,i=this.state.pos.y-t.y;Math.sqrt(n*n+i*i)>this.options.maxDistance&&this.cancel()},onEnd:function(){this.onCancel()}}).handler("drag",{options:{minDistance:6,horizontal:!0,cancelMultiplier:1.5},onStart:function(e){this.state.registeredParent||this.cancel()},onMove:function(e,t){var n,i;e.preventDefault(),this.state.dragPointer?this.dispatchDragMove(e):(this.state.options.horizontal?(n=Math.abs(t.distanceX)>this.state.options.minDistance,i=Math.abs(t.distanceY)>this.state.options.minDistance*this.state.options.cancelMultiplier):(n=Math.abs(t.distanceY)>this.state.options.minDistance,i=Math.abs(t.distanceX)>this.state.options.minDistance*this.state.options.cancelMultiplier),n?(this.state.dragPointer=s(e),d(e,this.state.dragPointer),this.dispatchEvent(e,"$md.dragstart",this.state.dragPointer)):i&&this.cancel())},dispatchDragMove:i.throttle(function(e){this.state.isRunning&&(d(e,this.state.dragPointer),this.dispatchEvent(e,"$md.drag",this.state.dragPointer))}),onEnd:function(e,t){this.state.dragPointer&&(d(e,this.state.dragPointer),this.dispatchEvent(e,"$md.dragend",this.state.dragPointer))}}).handler("swipe",{options:{minVelocity:.65,minDistance:10},onEnd:function(e,t){var n;Math.abs(t.velocityX)>this.state.options.minVelocity&&Math.abs(t.distanceX)>this.state.options.minDistance?(n="left"==t.directionX?"$md.swipeleft":"$md.swiperight",this.dispatchEvent(e,n)):Math.abs(t.velocityY)>this.state.options.minVelocity&&Math.abs(t.distanceY)>this.state.options.minDistance&&(n="up"==t.directionY?"$md.swipeup":"$md.swipedown",this.dispatchEvent(e,n))}})}function o(e){this.name=e,this.state={}}function r(){function n(e,n,i){i=i||p;var o=new t.element.Event(n);o.$material=!0,o.pointer=i,o.srcEvent=e,t.extend(o,{clientX:i.x,clientY:i.y,screenX:i.x,screenY:i.y,pageX:i.x,pageY:i.y,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey}),t.element(i.target).trigger(o)}function i(t,n,i){i=i||p;var o;"click"===n||"mouseup"==n||"mousedown"==n?(o=document.createEvent("MouseEvents"),o.initMouseEvent(n,!0,!0,e,t.detail,i.x,i.y,i.x,i.y,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget||null)):(o=document.createEvent("CustomEvent"),o.initCustomEvent(n,!0,!0,{})),o.$material=!0,o.pointer=i,o.srcEvent=t,i.target.dispatchEvent(o)}var r=void 0!==e.jQuery&&t.element===e.jQuery;return o.prototype={options:{},dispatchEvent:r?n:i,onStart:t.noop,onMove:t.noop,onEnd:t.noop,onCancel:t.noop,start:function(e,n){if(!this.state.isRunning){var i=this.getNearestParent(e.target),o=i&&i.$mdGesture[this.name]||{};this.state={isRunning:!0,options:t.extend({},this.options,o),registeredParent:i},this.onStart(e,n)}},move:function(e,t){this.state.isRunning&&this.onMove(e,t)},end:function(e,t){this.state.isRunning&&(this.onEnd(e,t),this.state.isRunning=!1)},cancel:function(e,t){this.onCancel(e,t),this.state={}},getNearestParent:function(e){for(var t=e;t;){if((t.$mdGesture||{})[this.name])return t;t=t.parentNode}return null},registerElement:function(e,t){function n(){delete e[0].$mdGesture[i.name],e.off("$destroy",n)}var i=this;return e[0].$mdGesture=e[0].$mdGesture||{},e[0].$mdGesture[this.name]=t||{},e.on("$destroy",n),n}},o}function a(e,n){function i(e){!e.clientX&&!e.clientY||e.$material||e.isIonicTap||c(e)||(e.preventDefault(),e.stopPropagation())}function o(e){0===e.clientX&&0===e.clientY||e.$material||e.isIonicTap||c(e)?(h=null,"label"==e.target.tagName.toLowerCase()&&(h={x:e.x,y:e.y})):(e.preventDefault(),e.stopPropagation(),h=null)}function r(e,t){var i;for(var o in m)(i=m[o])instanceof n&&("start"===e&&i.cancel(),i[e](t,p))}function a(e){if(!p){var t=+Date.now();g&&!l(e,g)&&t-g.endTime<1500||(p=s(e),r("start",e))}}function u(e){p&&l(e,p)&&(d(e,p),r("move",e))}function f(e){p&&l(e,p)&&(d(e,p),p.endTime=+Date.now(),r("end",e),g=p,p=null)}document.contains||(document.contains=function(e){return document.body.contains(e)}),!v&&e.isHijackingClicks&&(document.addEventListener("click",o,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("focus",i,!0),v=!0),t.element(document).on("mousedown touchstart pointerdown",a).on("mousemove touchmove pointermove",u).on("mouseup mouseleave touchend touchcancel pointerup pointercancel",f).on("$$mdGestureReset",function(){g=p=null})}function s(e){var t=u(e),n={startTime:+Date.now(),target:e.target,type:e.type.charAt(0)};return n.startX=n.x=t.pageX,n.startY=n.y=t.pageY,n}function l(e,t){return e&&t&&e.type.charAt(0)===t.type}function c(e){return h&&h.x==e.x&&h.y==e.y}function d(e,t){var n=u(e),i=t.x=n.pageX,o=t.y=n.pageY;t.distanceX=i-t.startX,t.distanceY=o-t.startY,t.distance=Math.sqrt(t.distanceX*t.distanceX+t.distanceY*t.distanceY),t.directionX=t.distanceX>0?"right":t.distanceX<0?"left":"",t.directionY=t.distanceY>0?"down":t.distanceY<0?"up":"",t.duration=+Date.now()-t.startTime,t.velocityX=t.distanceX/t.duration,t.velocityY=t.distanceY/t.duration}function u(e){return e=e.originalEvent||e,e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0]||e}var p,g,m={},f=!1,h=null,v=!1;t.module("material.core.gestures",[]).provider("$mdGesture",n).factory("$$MdGestureHandler",r).run(a),n.prototype={skipClickHijack:function(){return f=!0},$get:["$$MdGestureHandler","$$rAF","$timeout",function(e,t,n){return new i(e,t,n)}]},i.$inject=["$$MdGestureHandler","$$rAF","$timeout"],a.$inject=["$mdGesture","$$MdGestureHandler"]}(),function(){function e(){function e(e){function n(e){return l.optionsFactory=e.options,l.methods=(e.methods||[]).concat(a),c}function i(e,t){return s[e]=t,c}function o(t,n){if(n=n||{},n.methods=n.methods||[],n.options=n.options||function(){return{}},/^cancel|hide|show$/.test(t))throw new Error("Preset '"+t+"' in "+e+" is reserved!");if(n.methods.indexOf("_options")>-1)throw new Error("Method '_options' in "+e+" is reserved!");return l.presets[t]={methods:n.methods.concat(a),optionsFactory:n.options,argOption:n.argOption},c}function r(n,i){function o(e){return e=e||{},e._options&&(e=e._options),u.show(t.extend({},d,e))}function r(e){return u.destroy(e)}function a(t,n){var o={};return o[e]=p,i.invoke(t||function(){return n},{},o)}var c,d,u=n(),p={hide:u.hide,cancel:u.cancel,show:o,destroy:r};return c=l.methods||[],d=a(l.optionsFactory,{}),t.forEach(s,function(e,t){p[t]=e}),t.forEach(l.presets,function(e,n){function i(e){this._options=t.extend({},o,e)}var o=a(e.optionsFactory,{}),r=(e.methods||[]).concat(c);if(t.extend(o,{$type:n}),t.forEach(r,function(e){i.prototype[e]=function(t){return this._options[e]=t,this}}),e.argOption){var s="show"+n.charAt(0).toUpperCase()+n.slice(1);p[s]=function(e){var t=p[n](e);return p.show(t)}}p[n]=function(n){return arguments.length&&e.argOption&&!t.isObject(n)&&!t.isArray(n)?(new i)[e.argOption](n):new i(n)}}),p}var a=["onHide","onShow","onRemove"],s={},l={presets:{}},c={setDefaults:n,addPreset:o,addMethod:i,$get:r};return c.addPreset("build",{methods:["controller","controllerAs","resolve","template","templateUrl","themable","transformTemplate","parent"]}),r.$inject=["$$interimElement","$injector"],c}function i(e,i,o,r,a,s,l,c,d,u,p){return function(){function g(e){e=e||{};var t=new v(e||{});return(!e.skipHide&&w.length?y.hide():i.when(!0)).finally(function(){w.push(t),t.show().catch(function(e){return e})}),t.deferred.promise}function m(e,t){function o(n){return n.remove(e,!1,t||{}).catch(function(e){return e}),n.deferred.promise}if(!w.length)return i.when(e);if(t=t||{},t.closeAll){var r=i.all(w.reverse().map(o));return w=[],r}return t.closeTo!==n?i.all(w.splice(t.closeTo).map(o)):o(w.pop())}function f(e,t){var n=w.pop();return n?(n.remove(e,!0,t||{}).catch(function(e){return e}),n.deferred.promise):i.when(e)}function h(e){var n=e?null:w.shift(),o=t.element(e).length?t.element(e)[0].parentNode:null;if(o){var r=w.filter(function(e){return e.options.element[0]===o});r.length>0&&(n=r[0],w.splice(w.indexOf(n),1))}return n?n.remove(b,!1,{$destroy:!0}):i.when(b)}function v(p){function g(){return i(function(e,t){function n(e){S.deferred.reject(e),t(e)}h(p).then(function(t){E=v(t,p),I=C(E,p,t.controller).then(e,n)},n)})}function m(e,n,o){function r(e){S.deferred.resolve(e)}function a(e){S.deferred.reject(e)}return E?(p=t.extend(p||{},o||{}),p.cancelAutoHide&&p.cancelAutoHide(),p.element.triggerHandler("$mdInterimElementRemove"),!0===p.$destroy?T(p.element,p).then(function(){n&&a(e)||r(e)}):(i.when(I).finally(function(){T(p.element,p).then(function(){n&&a(e)||r(e)},a)}),S.deferred.promise)):i.when(!1)}function f(e){return e=e||{},e.template&&(e.template=c.processTemplate(e.template)),t.extend({preserveScope:!1,cancelAutoHide:t.noop,scope:e.scope||r.$new(e.isolateScope),onShow:function(e,t,n){return l.enter(t,n.parent)},onRemove:function(e,t){return t&&l.leave(t)||i.when()}},e)}function h(e){return(e.skipCompile?null:d.compile(e))||i(function(t){t({locals:{},link:function(){return e.element}})})}function v(e,n){t.extend(e.locals,n);var i=e.link(n.scope);return n.element=i,n.parent=b(i,n),n.themable&&u(i),i}function b(n,i){var o=i.parent;if(o=t.isFunction(o)?o(i.scope,n,i):t.isString(o)?t.element(e[0].querySelector(o)):t.element(o),!(o||{}).length){var r;return s[0]&&s[0].querySelector&&(r=s[0].querySelector(":not(svg) > body")),r||(r=s[0]),"#comment"==r.nodeName&&(r=e[0].body),t.element(r)}return o}function w(){var e,i=t.noop;p.hideDelay&&(e=a(y.hide,p.hideDelay),i=function(){a.cancel(e)}),p.cancelAutoHide=function(){i(),p.cancelAutoHide=n}}function C(e,n,o){var r=n.onShowing||t.noop,a=n.onComplete||t.noop;return r(n.scope,e,n,o),i(function(t,r){try{i.when(n.onShow(n.scope,e,n,o)).then(function(){a(n.scope,e,n),w(),t(e)},r)}catch(e){r(e.message)}})}function T(e,n){var i=n.onRemoving||t.noop;return o(function(t,r){try{var a=o.when(n.onRemove(n.scope,e,n)||!0);i(e,a),1==n.$destroy?t(e):a.then(function(){!n.preserveScope&&n.scope&&n.scope.$destroy(),t(e)},r)}catch(e){r(e.message)}})}var S,E,I=i.when(!0);return p=f(p),S={options:p,deferred:i.defer(),show:g,remove:m}}var y,b=!1,w=[];return y={show:g,hide:m,cancel:f,destroy:h,$injector_:p}}}return e.$get=i,i.$inject=["$document","$q","$$q","$rootScope","$timeout","$rootElement","$animate","$mdUtil","$mdCompiler","$mdTheming","$injector"],e}t.module("material.core").provider("$$interimElement",e)}(),function(){!function(){function e(e){function a(e){return e.replace(l,"").replace(c,function(e,t,n,i){return i?n.toUpperCase():n})}var l=/^((?:x|data)[\:\-_])/i,c=/([\:\-\_]+(.))/g,d=["","xs","gt-xs","sm","gt-sm","md","gt-md","lg","gt-lg","xl","print"],u=["layout","flex","flex-order","flex-offset","layout-align"],p=["show","hide","layout-padding","layout-margin"];t.forEach(d,function(n){t.forEach(u,function(t){var i=n?t+"-"+n:t;e.directive(a(i),o(i))}),t.forEach(p,function(t){var i=n?t+"-"+n:t;e.directive(a(i),r(i))})}),e.directive("mdLayoutCss",n).directive("ngCloak",i("ng-cloak")).directive("layoutWrap",r("layout-wrap")).directive("layoutNowrap",r("layout-nowrap")).directive("layoutNoWrap",r("layout-no-wrap")).directive("layoutFill",r("layout-fill")).directive("layoutLtMd",s("layout-lt-md",!0)).directive("layoutLtLg",s("layout-lt-lg",!0)).directive("flexLtMd",s("flex-lt-md",!0)).directive("flexLtLg",s("flex-lt-lg",!0)).directive("layoutAlignLtMd",s("layout-align-lt-md")).directive("layoutAlignLtLg",s("layout-align-lt-lg")).directive("flexOrderLtMd",s("flex-order-lt-md")).directive("flexOrderLtLg",s("flex-order-lt-lg")).directive("offsetLtMd",s("flex-offset-lt-md")).directive("offsetLtLg",s("flex-offset-lt-lg")).directive("hideLtMd",s("hide-lt-md")).directive("hideLtLg",s("hide-lt-lg")).directive("showLtMd",s("show-lt-md")).directive("showLtLg",s("show-lt-lg"))}function n(){return{restrict:"A",priority:"900",compile:function(e,n){return E.enabled=!1,t.noop}}}function i(e){return["$timeout",function(n){return{restrict:"A",priority:-10,compile:function(i){return E.enabled?(i.addClass(e),function(t,i){n(function(){i.removeClass(e)},10,!1)}):t.noop}}}]}function o(e){function n(t,n,i){var o=a(n,e,i),r=i.$observe(i.$normalize(e),o);o(p(e,i,"")),t.$on("$destroy",function(){r()})}return["$mdUtil","$interpolate","$log",function(i,o,r){return f=i,h=o,v=r,{restrict:"A",compile:function(i,o){var r;return E.enabled&&(l(e,o,i,v),c(e,p(e,o,""),d(i,e,o)),r=n),r||t.noop}}}]}function r(e){function n(t,n){n.addClass(e)}return["$mdUtil","$interpolate","$log",function(i,o,r){return f=i,h=o,v=r,{restrict:"A",compile:function(i,o){var r;return E.enabled&&(c(e,p(e,o,""),d(i,e,o)),n(null,i),r=n),r||t.noop}}}]}function a(e,n){var i;return function(o){var r=c(n,o||"");t.isDefined(r)&&(i&&e.removeClass(i),i=r?n+"-"+r.replace(b,"-"):n,e.addClass(i))}}function s(e){var n=e.split("-");return["$log",function(i){return i.warn(e+"has been deprecated. Please use a `"+n[0]+"-gt-<xxx>` variant."),t.noop}]}function l(e,t,n,i){var o,r,a,s=n[0].nodeName.toLowerCase();switch(e.replace(y,"")){case"flex":"md-button"!=s&&"fieldset"!=s||(r="<"+s+" "+e+"></"+s+">",a="https://github.com/philipwalton/flexbugs#9-some-html-elements-cant-be-flex-containers",o="Markup '{0}' may not work as expected in IE Browsers. Consult '{1}' for details.",i.warn(f.supplant(o,[r,a])))}}function c(e,n,i){var o=n;if(!u(n)){switch(e.replace(y,"")){case"layout":g(n,C)||(n=C[0]);break;case"flex":g(n,w)||isNaN(n)&&(n="");break;case"flex-offset":case"flex-order":n&&!isNaN(+n)||(n="0");break;case"layout-align":var r=m(n);n=f.supplant("{main}-{cross}",r);break;case"layout-padding":case"layout-margin":case"layout-fill":case"layout-wrap":case"layout-nowrap":case"layout-nowrap":n=""}n!=o&&(i||t.noop)(n)}return n}function d(e,t,n){return function(e){u(e)||(n[n.$normalize(t)]=e)}}function u(e){return(e||"").indexOf(h.startSymbol())>-1}function p(e,t,n){var i=t.$normalize(e);return t[i]?t[i].replace(b,"-"):n||null}function g(e,t,n){e=n&&e?e.replace(b,n):e;var i=!1;return e&&t.forEach(function(t){t=n?t.replace(b,n):t,i=i||t===e}),i}function m(e){var t,n={main:"start",cross:"stretch"};return e=e||"",0!=e.indexOf("-")&&0!=e.indexOf(" ")||(e="none"+e),t=e.toLowerCase().trim().replace(b,"-").split("-"),t.length&&"space"===t[0]&&(t=[t[0]+"-"+t[1],t[2]]),t.length>0&&(n.main=t[0]||n.main),t.length>1&&(n.cross=t[1]||n.cross),T.indexOf(n.main)<0&&(n.main="start"),S.indexOf(n.cross)<0&&(n.cross="stretch"),n}var f,h,v,y=/(-gt)?-(sm|md|lg|print)/g,b=/\s+/g,w=["grow","initial","auto","none","noshrink","nogrow"],C=["row","column"],T=["","start","center","end","stretch","space-around","space-between"],S=["","start","center","end","stretch"],E={enabled:!0,breakpoints:[]};e(t.module("material.core.layout",["ng"]))}()}(),function(){function e(e,n){function i(e){return e&&""!==e}var o,r=[],a={};return o={notFoundError:function(t){e.error("No instance found for handle",t)},getInstances:function(){return r},get:function(e){if(!i(e))return null;var t,n,o;for(t=0,n=r.length;n>t;t++)if(o=r[t],o.$$mdHandle===e)return o;return null},register:function(e,n){function i(){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}function o(){var t=a[n];t&&(t.resolve(e),delete a[n])}return n?(e.$$mdHandle=n,r.push(e),o(),i):t.noop},when:function(e){if(i(e)){var t=n.defer(),r=o.get(e);return r?t.resolve(r):a[e]=t,t.promise}return n.reject("Invalid `md-component-id` value.")}}}t.module("material.core").factory("$mdComponentRegistry",e),e.$inject=["$log","$q"]}(),function(){!function(){function e(e){function n(e){return e.hasClass("md-icon-button")?{isMenuItem:e.hasClass("md-menu-item"),fitRipple:!0,center:!0}:{isMenuItem:e.hasClass("md-menu-item"),dimBackground:!0}}return{attach:function(i,o,r){return r=t.extend(n(o),r),e.attach(i,o,r)}}}t.module("material.core").factory("$mdButtonInkRipple",e),e.$inject=["$mdInkRipple"]}()}(),function(){!function(){function e(e){function n(n,i,o){return e.attach(n,i,t.extend({center:!0,dimBackground:!1,fitRipple:!0},o))}return{attach:n}}t.module("material.core").factory("$mdCheckboxInkRipple",e),e.$inject=["$mdInkRipple"]}()}(),function(){!function(){function e(e){function n(n,i,o){return e.attach(n,i,t.extend({center:!1,dimBackground:!0,outline:!1,rippleSize:"full"},o))}return{attach:n}}t.module("material.core").factory("$mdListInkRipple",e),e.$inject=["$mdInkRipple"]}()}(),function(){function e(e,n){return{controller:t.noop,link:function(t,i,o){o.hasOwnProperty("mdInkRippleCheckbox")?n.attach(t,i):e.attach(t,i)}}}function n(e){function n(n,o,r){return o.controller("mdNoInk")?t.noop:e.instantiate(i,{$scope:n,$element:o,rippleOptions:r})}return{attach:n}}function i(e,n,i,o,r,a){this.$window=o,this.$timeout=r,this.$mdUtil=a,this.$scope=e,this.$element=n,this.options=i,this.mousedown=!1,this.ripples=[],this.timeout=null,this.lastRipple=null,a.valueOnUse(this,"container",this.createContainer),this.$element.addClass("md-ink-ripple"),(n.controller("mdInkRipple")||{}).createRipple=t.bind(this,this.createRipple),(n.controller("mdInkRipple")||{}).setColor=t.bind(this,this.color),this.bindEvents()}function o(e,n){(e.mousedown||e.lastRipple)&&(e.mousedown=!1,e.$mdUtil.nextTick(t.bind(e,n),!1))}function r(){return{controller:t.noop}}t.module("material.core").factory("$mdInkRipple",n).directive("mdInkRipple",e).directive("mdNoInk",r).directive("mdNoBar",r).directive("mdNoStretch",r);var a=450;e.$inject=["$mdButtonInkRipple","$mdCheckboxInkRipple"],n.$inject=["$injector"],i.$inject=["$scope","$element","rippleOptions","$window","$timeout","$mdUtil"],i.prototype.color=function(e){function n(){var e=i.options&&i.options.colorElement?i.options.colorElement:[],t=e.length?e[0]:i.$element[0];return t?i.$window.getComputedStyle(t).color:"rgb(0,0,0)"}var i=this;return t.isDefined(e)&&(i._color=i._parseColor(e)),i._color||i._parseColor(i.inkRipple())||i._parseColor(n())},i.prototype.calculateColor=function(){return this.color()},i.prototype._parseColor=function(e,t){function n(e){var t="#"===e[0]?e.substr(1):e,n=t.length/3,i=t.substr(0,n),o=t.substr(n,n),r=t.substr(2*n);return 1===n&&(i+=i,o+=o,r+=r),"rgba("+parseInt(i,16)+","+parseInt(o,16)+","+parseInt(r,16)+",0.1)"}function i(e){return e.replace(")",", 0.1)").replace("(","a(")}return t=t||1,e?0===e.indexOf("rgba")?e.replace(/\d?\.?\d*\s*\)\s*$/,(.1*t).toString()+")"):0===e.indexOf("rgb")?i(e):0===e.indexOf("#")?n(e):void 0:void 0},i.prototype.bindEvents=function(){this.$element.on("mousedown",t.bind(this,this.handleMousedown)),this.$element.on("mouseup touchend",t.bind(this,this.handleMouseup)),this.$element.on("mouseleave",t.bind(this,this.handleMouseup)),this.$element.on("touchmove",t.bind(this,this.handleTouchmove))},i.prototype.handleMousedown=function(e){if(!this.mousedown)if(e.hasOwnProperty("originalEvent")&&(e=e.originalEvent),this.mousedown=!0,this.options.center)this.createRipple(this.container.prop("clientWidth")/2,this.container.prop("clientWidth")/2);else if(e.srcElement!==this.$element[0]){var t=this.$element[0].getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;this.createRipple(n,i)}else this.createRipple(e.offsetX,e.offsetY)},i.prototype.handleMouseup=function(){o(this,this.clearRipples)},i.prototype.handleTouchmove=function(){o(this,this.deleteRipples)},i.prototype.deleteRipples=function(){for(var e=0;e<this.ripples.length;e++)this.ripples[e].remove()},i.prototype.clearRipples=function(){for(var e=0;e<this.ripples.length;e++)this.fadeInComplete(this.ripples[e])},i.prototype.createContainer=function(){var e=t.element('<div class="md-ripple-container"></div>');return this.$element.append(e),e},i.prototype.clearTimeout=function(){this.timeout&&(this.$timeout.cancel(this.timeout),this.timeout=null)},i.prototype.isRippleAllowed=function(){var e=this.$element[0];do{if(!e.tagName||"BODY"===e.tagName)break;if(e&&t.isFunction(e.hasAttribute)){if(e.hasAttribute("disabled"))return!1;if("false"===this.inkRipple()||"0"===this.inkRipple())return!1}}while(e=e.parentNode);return!0},i.prototype.inkRipple=function(){return this.$element.attr("md-ink-ripple")},i.prototype.createRipple=function(e,n){function i(e){return e?e.replace("rgba","rgb").replace(/,[^\),]+\)/,")"):"rgb(0,0,0)"}function o(e,t,n){return e?Math.max(t,n):Math.sqrt(Math.pow(t,2)+Math.pow(n,2))}if(this.isRippleAllowed()){var r=this,s=t.element('<div class="md-ripple"></div>'),l=this.$element.prop("clientWidth"),c=this.$element.prop("clientHeight"),d=2*Math.max(Math.abs(l-e),e),u=2*Math.max(Math.abs(c-n),n),p=o(this.options.fitRipple,d,u),g=this.calculateColor();s.css({left:e+"px",top:n+"px",background:"black",width:p+"px",height:p+"px",backgroundColor:i(g),borderColor:i(g)}),this.lastRipple=s,this.clearTimeout(),this.timeout=this.$timeout(function(){r.clearTimeout(),r.mousedown||r.fadeInComplete(s)},.35*a,!1),this.options.dimBackground&&this.container.css({backgroundColor:g}),this.container.append(s),this.ripples.push(s),s.addClass("md-ripple-placed"),this.$mdUtil.nextTick(function(){s.addClass("md-ripple-scaled md-ripple-active"),r.$timeout(function(){r.clearRipples()},a,!1)},!1)}},i.prototype.fadeInComplete=function(e){this.lastRipple===e?this.timeout||this.mousedown||this.removeRipple(e):this.removeRipple(e)},i.prototype.removeRipple=function(e){var t=this;0>this.ripples.indexOf(e)||(this.ripples.splice(this.ripples.indexOf(e),1),e.removeClass("md-ripple-active"),0===this.ripples.length&&this.container.css({backgroundColor:""}),this.$timeout(function(){t.fadeOutComplete(e)},a,!1))},i.prototype.fadeOutComplete=function(e){e.remove(),this.lastRipple=null}}(),function(){!function(){function e(e){function n(n,i,o){return e.attach(n,i,t.extend({center:!1,dimBackground:!0,outline:!1,rippleSize:"full"},o))}return{attach:n}}t.module("material.core").factory("$mdTabInkRipple",e),e.$inject=["$mdInkRipple"]}()}(),function(){t.module("material.core.theming.palette",[]).constant("$mdColorPalette",{red:{50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 A100",contrastStrongLightColors:"400 500 600 700 A200 A400 A700"},pink:{50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"500 600 A200 A400 A700"},purple:{50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400 A700"},"deep-purple":{50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200"},indigo:{50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400"},blue:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100",contrastStrongLightColors:"500 600 700 A200 A400 A700"},"light-blue":{50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea",contrastDefaultColor:"dark",contrastLightColors:"600 700 800 900 A700",contrastStrongLightColors:"600 700 800 A700"},cyan:{50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4",contrastDefaultColor:"dark",contrastLightColors:"700 800 900",contrastStrongLightColors:"700 800 900"},teal:{50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},green:{50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},"light-green":{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17",contrastDefaultColor:"dark",contrastLightColors:"700 800 900",contrastStrongLightColors:"700 800 900"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00",contrastDefaultColor:"dark",contrastLightColors:"900",contrastStrongLightColors:"900"},yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600",contrastDefaultColor:"dark"},amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00",contrastDefaultColor:"dark"},orange:{50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00",contrastDefaultColor:"dark",contrastLightColors:"800 900",contrastStrongLightColors:"800 900"},"deep-orange":{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100 A200",contrastStrongLightColors:"500 600 700 800 900 A400 A700"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037",contrastDefaultColor:"light",contrastDarkColors:"50 100 200",contrastStrongLightColors:"300 400"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#ffffff",A200:"#000000",A400:"#303030",A700:"#616161",contrastDefaultColor:"dark",contrastLightColors:"600 700 800 900"},"blue-grey":{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 700",contrastStrongLightColors:"400 500 700"}})}(),function(){function e(e){function i(e,t){return t=t||{},u[e]=a(e,t),y}function o(e,n){return a(e,t.extend({},u[e]||{},n))}function a(e,t){var n=I.filter(function(e){return!t[e]});if(n.length)throw new Error("Missing colors %1 in palette %2!".replace("%1",n.join(", ")).replace("%2",e));return t}function l(e,n){if(p[e])return p[e];n=n||"default";var i="string"==typeof n?p[n]:n,o=new c(e);return i&&t.forEach(i.colors,function(e,n){o.colors[n]={name:e.name,hues:t.extend({},e.hues)}}),p[e]=o,o}function c(e){function n(e){if((e=0===arguments.length||!!e)!==i.isDark){i.isDark=e,i.foregroundPalette=i.isDark?f:m,i.foregroundShadow=i.isDark?h:v;var n=i.isDark?E:S,o=i.isDark?S:E;return t.forEach(n,function(e,t){var n=i.colors[t],r=o[t];if(n)for(var a in n.hues)n.hues[a]===r[a]&&(n.hues[a]=e[a])}),i}}var i=this;i.name=e,i.colors={},i.dark=n,n(!1),C.forEach(function(e){var n=(i.isDark?E:S)[e];i[e+"Palette"]=function(o,r){var a=i.colors[e]={name:o,hues:t.extend({},n,r)};return Object.keys(a.hues).forEach(function(e){if(!n[e])throw new Error("Invalid hue name '%1' in theme %2's %3 color %4. Available hue names: %4".replace("%1",e).replace("%2",i.name).replace("%3",o).replace("%4",Object.keys(n).join(", ")))}),Object.keys(a.hues).map(function(e){return a.hues[e]}).forEach(function(t){if(-1==I.indexOf(t))throw new Error("Invalid hue value '%1' in theme %2's %3 color %4. Available hue values: %5".replace("%1",t).replace("%2",i.name).replace("%3",e).replace("%4",o).replace("%5",I.join(", ")))}),i},i[e+"Color"]=function(){var t=Array.prototype.slice.call(arguments);return console.warn("$mdThemingProviderTheme."+e+"Color() has been deprecated. Use $mdThemingProviderTheme."+e+"Palette() instead."),i[e+"Palette"].apply(i,t)}})}function g(e,i){function o(e){return e===n||""===e||a.THEMES[e]!==n}function r(n,r){function a(){return(l=r.controller("mdTheme")||n.data("$mdThemeController"))&&l.$mdTheme||("default"==b?"":b)}function s(e){if(e){o(e)||i.warn("Attempted to use unregistered theme '"+e+"'. Register it with $mdThemingProvider.theme().");var t=n.data("$mdThemeName");t&&n.removeClass("md-"+t+"-theme"),n.addClass("md-"+e+"-theme"),n.data("$mdThemeName",e),l&&n.data("$mdThemeController",l)}}var l=r.controller("mdTheme"),c=n.attr("md-theme-watch"),d=(w||t.isDefined(c))&&"false"!=c;s(a()),n.on("$destroy",d?e.$watch(a,s):t.noop)}var a=function(t,i){i===n&&(i=t,t=n),t===n&&(t=e),a.inherit(i,i)};return a.THEMES=t.extend({},p),a.inherit=r,a.registered=o,a.defaultTheme=function(){return b},a.generateTheme=function(e){s(e,k)},a}u={},p={};var y,b="default",w=!1;return t.extend(u,e),g.$inject=["$rootScope","$log"],y={definePalette:i,extendPalette:o,theme:l,setNonce:function(e){k=e},setDefaultTheme:function(e){b=e},alwaysWatchTheme:function(e){w=e},generateThemesOnDemand:function(e){x=e},$get:g,_LIGHT_DEFAULT_HUES:S,_DARK_DEFAULT_HUES:E,_PALETTES:u,_THEMES:p,_parseRules:r,_rgba:d}}function i(e,t,n){return{priority:100,link:{pre:function(i,o,r){var a={$setTheme:function(t){e.registered(t)||n.warn("attempted to use unregistered theme '"+t+"'"),a.$mdTheme=t}};o.data("$mdThemeController",a),a.$setTheme(t(r.mdTheme)(i)),r.$observe("mdTheme",a.$setTheme)}}}}function o(e){return e}function r(e,n,i){l(e,n),i=i.replace(/THEME_NAME/g,e.name);var o=[],r=e.colors[n],a=new RegExp(".md-"+e.name+"-theme","g"),s=new RegExp("('|\")?{{\\s*("+n+")-(color|contrast)-?(\\d\\.?\\d*)?\\s*}}(\"|')?","g"),c=/'?"?\{\{\s*([a-zA-Z]+)-(A?\d+|hue\-[0-3]|shadow)-?(\d\.?\d*)?(contrast)?\s*\}\}'?"?/g,p=u[r.name];return i=i.replace(c,function(t,n,i,o,r){return"foreground"===n?"shadow"==i?e.foregroundShadow:e.foregroundPalette[i]||e.foregroundPalette[1]:(0===i.indexOf("hue")&&(i=e.colors[n].hues[i]),d((u[e.colors[n].name][i]||"")[r?"contrast":"value"],o))}),t.forEach(r.hues,function(t,n){var r=i.replace(s,function(e,n,i,o,r){return d(p[t]["color"===o?"value":"contrast"],r)});if("default"!==n&&(r=r.replace(a,".md-"+e.name+"-theme.md-"+n)),"default"==e.name){var l=/((?:(?:(?: |>|\.|\w|-|:|\(|\)|\[|\]|"|'|=)+) )?)((?:(?:\w|\.|-)+)?)\.md-default-theme((?: |>|\.|\w|-|:|\(|\)|\[|\]|"|'|=)*)/g;r=r.replace(l,function(e,t,n,i){return e+", "+t+n+i})}o.push(r)}),o}function a(e){function n(e,n){var i=e.contrastDefaultColor,o=e.contrastLightColors||[],r=e.contrastStrongLightColors||[],a=e.contrastDarkColors||[];"string"==typeof o&&(o=o.split(" ")),"string"==typeof r&&(r=r.split(" ")),"string"==typeof a&&(a=a.split(" ")),delete e.contrastDefaultColor,delete e.contrastLightColors,delete e.contrastStrongLightColors,delete e.contrastDarkColors,t.forEach(e,function(n,s){function l(){return"light"===i?a.indexOf(s)>-1?y:r.indexOf(s)>-1?w:b:o.indexOf(s)>-1?r.indexOf(s)>-1?w:b:y}if(!t.isObject(n)){var d=c(n);if(!d)throw new Error("Color %1, in palette %2's hue %3, is invalid. Hex or rgb(a) color expected.".replace("%1",n).replace("%2",e.name).replace("%3",s));e[s]={value:d,contrast:l()}}})}var i=document.head,o=i?i.firstElementChild:null,r=e.has("$MD_THEME_CSS")?e.get("$MD_THEME_CSS"):"";if(o&&0!==r.length){t.forEach(u,n);var a=r.split(/\}(?!(\}|'|"|;))/).filter(function(e){return e&&e.length}).map(function(e){return e.trim()+"}"}),l=new RegExp("md-("+C.join("|")+")","g");C.forEach(function(e){A[e]=""}),a.forEach(function(e){for(var t,n=(e.match(l),0);t=C[n];n++)if(e.indexOf(".md-"+t)>-1)return A[t]+=e;for(n=0;t=C[n];n++)if(e.indexOf(t)>-1)return A[t]+=e;return A[T]+=e}),x||t.forEach(p,function(e){g[e.name]||s(e.name,k)})}}function s(e,t){var n=p[e],i=document.head,o=i?i.firstElementChild:null;g[e]||(C.forEach(function(e){for(var a=r(n,e,A[e]);a.length;){var s=a.shift();if(s){var l=document.createElement("style");l.setAttribute("md-theme-style",""),t&&l.setAttribute("nonce",t),l.appendChild(document.createTextNode(s)),i.insertBefore(l,o)}}}),n.colors.primary.name==n.colors.accent.name&&console.warn("$mdThemingProvider: Using the same palette for primary and accent. This violates the material design spec."),g[n.name]=!0)}function l(e,t){if(!u[(e.colors[t]||{}).name])throw new Error("You supplied an invalid color palette for theme %1's %2 palette. Available palettes: %3".replace("%1",e.name).replace("%2",t).replace("%3",Object.keys(u).join(", ")))}function c(e){if(t.isArray(e)&&3==e.length)return e;if(/^rgb/.test(e))return e.replace(/(^\s*rgba?\(|\)\s*$)/g,"").split(",").map(function(e,t){return 3==t?parseFloat(e,10):parseInt(e,10)});if("#"==e.charAt(0)&&(e=e.substring(1)),/^([a-fA-F0-9]{3}){1,2}$/g.test(e)){var n=e.length/3,i=e.substr(0,n),o=e.substr(n,n),r=e.substr(2*n);return 1===n&&(i+=i,o+=o,r+=r),[parseInt(i,16),parseInt(o,16),parseInt(r,16)]}}function d(e,n){return e?(4==e.length&&(e=t.copy(e),n?e.pop():n=e.pop()),n&&("number"==typeof n||"string"==typeof n&&n.length)?"rgba("+e.join(",")+","+n+")":"rgb("+e.join(",")+")"):"rgb('0,0,0')"}t.module("material.core.theming",["material.core.theming.palette"]).directive("mdTheme",i).directive("mdThemable",o).provider("$mdTheming",e).run(a);var u,p,g={},m={name:"dark",1:"rgba(0,0,0,0.87)",2:"rgba(0,0,0,0.54)",3:"rgba(0,0,0,0.38)",4:"rgba(0,0,0,0.12)"},f={name:"light",1:"rgba(255,255,255,1.0)",2:"rgba(255,255,255,0.7)",3:"rgba(255,255,255,0.5)",4:"rgba(255,255,255,0.12)"},h="1px 1px 0px rgba(0,0,0,0.4), -1px -1px 0px rgba(0,0,0,0.4)",v="",y=c("rgba(0,0,0,0.87)"),b=c("rgba(255,255,255,0.87)"),w=c("rgb(255,255,255)"),C=["primary","accent","warn","background"],T="primary",S={accent:{default:"A200","hue-1":"A100","hue-2":"A400","hue-3":"A700"},background:{default:"50","hue-1":"A100","hue-2":"100","hue-3":"300"}},E={background:{default:"A400","hue-1":"800","hue-2":"900","hue-3":"A200"}};C.forEach(function(e){var t={default:"500","hue-1":"300","hue-2":"800","hue-3":"A100"};S[e]||(S[e]=t),E[e]||(E[e]=t)});var I=["50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700"],x=!1,k=null;e.$inject=["$mdColorPalette"],i.$inject=["$mdTheming","$interpolate","$log"],o.$inject=["$mdTheming"];var A={};a.$inject=["$injector"]}(),function(){function e(e,n,i,o,r){var a;return a={translate3d:function(e,t,n,i){function o(n){return r(e,{to:n||t,addClass:i.transitionOutClass,removeClass:i.transitionInClass}).start()}return r(e,{from:t,to:n,addClass:i.transitionInClass}).start().then(function(){return o})},waitTransitionEnd:function(e,t){return n(function(n,r){function a(t){t&&t.target!==e[0]||(t&&i.cancel(s),e.off(o.CSS.TRANSITIONEND,a),n())}t=t||{};var s=i(a,t.timeout||3e3);e.on(o.CSS.TRANSITIONEND,a)})},calculateZoomToOrigin:function(n,i){function o(){var e=n?n.parent():null,t=e?e.parent():null;return t?a.clientRect(t):null}var r=i.element,s=i.bounds,l="translate3d( {centerX}px, {centerY}px, 0 ) scale( {scaleX}, {scaleY} )",c=t.bind(null,e.supplant,l),d=c({centerX:0,centerY:0,scaleX:.5,scaleY:.5});if(r||s){var u=r?a.clientRect(r)||o():a.copyRect(s),p=a.copyRect(n[0].getBoundingClientRect()),g=a.centerPointFor(p),m=a.centerPointFor(u);d=c({centerX:m.x-g.x,centerY:m.y-g.y,scaleX:Math.round(100*Math.min(.5,u.width/p.width))/100,scaleY:Math.round(100*Math.min(.5,u.height/p.height))/100})}return d},toCss:function(e){function n(e,n,o){t.forEach(n.split(" "),function(e){i[e]=o})}var i={};return t.forEach(e,function(e,r){if(!t.isUndefined(e))if("left top right bottom width height x y min-width min-height max-width max-height".indexOf(r)>=0)i[r]=e+"px";else switch(r){case"transition":n(r,o.CSS.TRANSITION,e);break;case"transform":n(r,o.CSS.TRANSFORM,e);break;case"transformOrigin":n(r,o.CSS.TRANSFORM_ORIGIN,e)}}),i},toTransformCss:function(e,n,i){var r={};return t.forEach(o.CSS.TRANSFORM.split(" "),function(t){r[t]=e}),n&&(i=i||"all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) !important",r.transition=i),r},copyRect:function(e,n){return e?(n=n||{},t.forEach("left top right bottom width height".split(" "),function(t){n[t]=Math.round(e[t])}),n.width=n.width||n.right-n.left,n.height=n.height||n.bottom-n.top,n):null},clientRect:function(e){var n=t.element(e)[0].getBoundingClientRect();return function(e){return e&&e.width>0&&e.height>0}(n)?a.copyRect(n):null},centerPointFor:function(e){return e?{x:Math.round(e.left+e.width/2),y:Math.round(e.top+e.height/2)}:{x:0,y:0}}}}t.module("material.core").factory("$$mdAnimate",["$q","$timeout","$mdConstant","$animateCss",function(t,n,i,o){return function(r){return e(r,t,n,i,o)}}])}(),function(){t.version.minor>=4?t.module("material.core.animate",[]):function(){function e(e){return e.replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()})}var n=t.forEach,i=t.isDefined(document.documentElement.style.WebkitAppearance),o=i?"-webkit-":"",r=(i?"webkitTransitionEnd ":"")+"transitionend",a=(i?"webkitAnimationEnd ":"")+"animationend",s=["$document",function(e){return function(){return e[0].body.clientWidth+1}}],l=["$$rAF",function(e){return function(){var t=!1;return e(function(){t=!0}),function(n){t?n():e(n)}}}],c=["$q","$$rAFMutex",function(e,i){function o(e){this.setHost(e),this._doneCallbacks=[],this._runInAnimationFrame=i(),this._state=0}var r=2;return o.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===r?e():this._doneCallbacks.push(e)},progress:t.noop,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){!1===t?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._runInAnimationFrame(function(){t._resolve(e)}))},_resolve:function(e){this._state!==r&&(n(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=r)}},o}];t.module("material.core.animate",[]).factory("$$forceReflow",s).factory("$$AnimateRunner",c).factory("$$rAFMutex",l).factory("$animateCss",["$window","$$rAF","$$AnimateRunner","$$forceReflow","$$jqLite","$timeout",function(t,s,l,c,d,u){function p(i,s){var c=[],d=w(i);s.transitionStyle&&c.push([o+"transition",s.transitionStyle]),s.keyframeStyle&&c.push([o+"animation",s.keyframeStyle]),s.delay&&c.push([o+"transition-delay",s.delay+"s"]),s.duration&&c.push([o+"transition-duration",s.duration+"s"]);var p=s.keyframeStyle||s.to&&(s.duration>0||s.transitionStyle),f=!!s.addClass||!!s.removeClass,T=p||f;C(i,!0),y(i,s);var S,E,I=!1;return{close:t.close,start:function(){function t(){return I?void 0:(I=!0,S&&E&&i.off(S,E),g(i,s),v(i,s),n(c,function(t){d.style[e(t[0])]=""}),p.complete(!0),p)}var p=new l;return h(function(){if(C(i,!1),!T)return t();n(c,function(t){var n=t[0],i=t[1];d.style[e(n)]=i}),g(i,s);var l=m(i);if(0===l.duration)return t();var p=[];s.easing&&(l.transitionDuration&&p.push([o+"transition-timing-function",s.easing]),l.animationDuration&&p.push([o+"animation-timing-function",s.easing])),s.delay&&l.animationDelay&&p.push([o+"animation-delay",s.delay+"s"]),s.duration&&l.animationDuration&&p.push([o+"animation-duration",s.duration+"s"]),n(p,function(t){var n=t[0],i=t[1];d.style[e(n)]=i,c.push(t)});var f=l.delay,h=1e3*f,v=l.duration,y=1e3*v,w=Date.now();S=[],l.transitionDuration&&S.push(r),l.animationDuration&&S.push(a),S=S.join(" "),E=function(e){e.stopPropagation();var n=e.originalEvent||e,i=n.timeStamp||Date.now(),o=parseFloat(n.elapsedTime.toFixed(3));Math.max(i-w,0)>=h&&o>=v&&t()},i.on(S,E),b(i,s),u(t,h+1.5*y,!1)}),p}}}function g(e,t){t.addClass&&(d.addClass(e,t.addClass),t.addClass=null),t.removeClass&&(d.removeClass(e,t.removeClass),t.removeClass=null)}function m(e){function n(e){return i?"Webkit"+e.charAt(0).toUpperCase()+e.substr(1):e}var o=w(e),r=t.getComputedStyle(o),a=f(r[n("transitionDuration")]),s=f(r[n("animationDuration")]),l=f(r[n("transitionDelay")]),c=f(r[n("animationDelay")]);return s*=parseInt(r[n("animationIterationCount")],10)||1,{duration:Math.max(s,a),delay:Math.max(c,l),animationDuration:s,transitionDuration:a,animationDelay:c,transitionDelay:l}}function f(e){var t=0,i=(e||"").split(/\s*,\s*/);return n(i,function(e){"s"==e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,t=t?Math.max(e,t):e}),t}function h(e){T&&T(),S.push(e),T=s(function(){T=null;for(var e=c(),t=0;t<S.length;t++)S[t](e);S.length=0})}function v(e,t){y(e,t),b(e,t)}function y(e,t){t.from&&(e.css(t.from),t.from=null)}function b(e,t){t.to&&(e.css(t.to),t.to=null)}function w(e){for(var t=0;t<e.length;t++)if(1===e[t].nodeType)return e[t]}function C(t,n){var i=w(t),r=e(o+"transition-delay");i.style[r]=n?"-9999s":""}var T,S=[];return p}])}()}(),function(){t.module("material.components.autocomplete",["material.core","material.components.icon","material.components.virtualRepeat"])}(),function(){function e(e){return{restrict:"E",link:function(t,n,i){t.$on("$destroy",function(){e.destroy()})}}}function n(e){function n(e,n,r,a,s,l,c){function d(i,o,c,d){o=r.extractElementByName(o,"md-bottom-sheet"),o.attr("tabindex","-1"),c.disableBackdrop||(g=r.createBackdrop(i,"_md-bottom-sheet-backdrop md-opaque"),g[0].tabIndex=-1,c.clickOutsideToClose&&g.on("click",function(){r.nextTick(s.cancel,!0)}),a.inherit(g,c.parent),e.enter(g,c.parent,null));var u=new p(o,c.parent);return c.bottomSheet=u,a.inherit(u.element,c.parent),c.disableParentScroll&&(c.restoreScroll=r.disableScrollAround(u.element,c.parent)),e.enter(u.element,c.parent,g).then(function(){var e=r.findFocusTarget(o)||t.element(o[0].querySelector("button")||o[0].querySelector("a")||o[0].querySelector("[ng-click]"))||g;c.escapeToClose&&(c.rootElementKeyupCallback=function(e){e.keyCode===n.KEY_CODE.ESCAPE&&r.nextTick(s.cancel,!0)},l.on("keyup",c.rootElementKeyupCallback),e&&e.focus())})}function u(t,n,i){var o=i.bottomSheet;return i.disableBackdrop||e.leave(g),e.leave(o.element).then(function(){i.disableParentScroll&&(i.restoreScroll(),delete i.restoreScroll),o.cleanup()})}function p(e,t){function a(t){e.css(n.CSS.TRANSITION_DURATION,"0ms")}function l(t){var i=t.pointer.distanceY;5>i&&(i=Math.max(-o,i/2)),e.css(n.CSS.TRANSFORM,"translate3d(0,"+(o+i)+"px,0)")}function d(t){if(t.pointer.distanceY>0&&(t.pointer.distanceY>20||Math.abs(t.pointer.velocityY)>i)){var o=e.prop("offsetHeight")-t.pointer.distanceY,a=Math.min(o/t.pointer.velocityY*.75,500);e.css(n.CSS.TRANSITION_DURATION,a+"ms"),r.nextTick(s.cancel,!0)}else e.css(n.CSS.TRANSITION_DURATION,""),e.css(n.CSS.TRANSFORM,"")}var u=c.register(t,"drag",{horizontal:!1});return t.on("$md.dragstart",a).on("$md.drag",l).on("$md.dragend",d),{element:e,cleanup:function(){u(),t.off("$md.dragstart",a),t.off("$md.drag",l),t.off("$md.dragend",d)}}}var g;return{themable:!0,onShow:d,onRemove:u,disableBackdrop:!1,escapeToClose:!0,clickOutsideToClose:!0,disableParentScroll:!0}}var i=.5,o=80;return n.$inject=["$animate","$mdConstant","$mdUtil","$mdTheming","$mdBottomSheet","$rootElement","$mdGesture"],e("$mdBottomSheet").setDefaults({methods:["disableParentScroll","escapeToClose","clickOutsideToClose"],options:n})}t.module("material.components.bottomSheet",["material.core","material.components.backdrop"]).directive("mdBottomSheet",e).provider("$mdBottomSheet",n),e.$inject=["$mdBottomSheet"],n.$inject=["$$interimElementProvider"]}(),function(){t.module("material.components.backdrop",["material.core"]).directive("mdBackdrop",["$mdTheming","$animate","$rootElement","$window","$log","$$rAF","$document",function(e,t,n,i,o,r,a){function s(s,c,d){var u=i.getComputedStyle(a[0].body);if("fixed"==u.position){var p=parseInt(u.height,10)+Math.abs(parseInt(u.top,10));c.css({height:p+"px"})}t.pin&&t.pin(c,n),r(function(){var t=c.parent()[0];if(t){"BODY"==t.nodeName&&c.css({position:"fixed"});"static"==i.getComputedStyle(t).position&&o.warn(l)}c.parent().length&&e.inherit(c,c.parent())})}var l="<md-backdrop> may not work properly in a scrolled, static-positioned parent container.";return{restrict:"E",link:s}}])}(),function(){function e(e,n,i,o){function r(e){return t.isDefined(e.href)||t.isDefined(e.ngHref)||t.isDefined(e.ngLink)||t.isDefined(e.uiSref)}function a(e,t){return r(t)?'<a class="md-button" ng-transclude></a>':'<button class="md-button" type="'+(void 0===t.type?"button":t.type)+'" ng-transclude></button>'}function s(a,s,l){n(s),e.attach(a,s),i.expectWithText(s,"aria-label"),r(l)&&t.isDefined(l.ngDisabled)&&a.$watch(l.ngDisabled,function(e){s.attr("tabindex",e?-1:0)}),s.on("click",function(e){!0===l.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),t.isDefined(l.mdNoFocusStyle)||(a.mouseActive=!1,s.on("mousedown",function(){a.mouseActive=!0,o(function(){a.mouseActive=!1},100)}).on("focus",function(){!1===a.mouseActive&&s.addClass("md-focused")}).on("blur",function(e){s.removeClass("md-focused")}))}return{restrict:"EA",replace:!0,transclude:!0,template:a,link:s}}t.module("material.components.button",["material.core"]).directive("mdButton",e),e.$inject=["$mdButtonInkRipple","$mdTheming","$mdAria","$timeout"]}(),function(){function e(e){return{restrict:"E",link:function(t,n){e(n)}}}t.module("material.components.card",["material.core"]).directive("mdCard",e),e.$inject=["$mdTheming"]}(),function(){function e(e,n,i,o,r,a){function s(s,c){var d=s.children(),u=c.hasOwnProperty("mdIndeterminate");return c.type="checkbox",c.tabindex=c.tabindex||"0",s.attr("role",c.type),s.on("click",function(e){this.hasAttribute("disabled")&&e.stopImmediatePropagation()}),d.on("focus",function(){s.focus()}),function(s,c,d,p){function g(e,t,n){d[e]&&s.$watch(d[e],function(e){n[e]&&c.attr(t,n[e])})}function m(e){var t=e.which||e.keyCode;t!==i.KEY_CODE.SPACE&&t!==i.KEY_CODE.ENTER||(e.preventDefault(),c.hasClass("md-focused")||c.addClass("md-focused"),f(e))}function f(e){c[0].hasAttribute("disabled")||s.$apply(function(){var t=d.ngChecked?d.checked:!p.$viewValue;p.$setViewValue(t,e&&e.type),p.$render()})}function h(){p.$viewValue&&!y?c.addClass(l):c.removeClass(l)}function v(e){y=!1!==e,y&&c.attr("aria-checked","mixed"),c.toggleClass("md-indeterminate",y)}var y;p=p||r.fakeNgModel(),o(c),u&&(v(),s.$watch(d.mdIndeterminate,v)),d.ngChecked&&s.$watch(s.$eval.bind(s,d.ngChecked),p.$setViewValue.bind(p)),g("ngDisabled","tabindex",{true:"-1",false:d.tabindex}),n.expectWithText(c,"aria-label"),e.link.pre(s,{on:t.noop,0:{}},d,[p]),s.mouseActive=!1,c.on("click",f).on("keypress",m).on("mousedown",function(){s.mouseActive=!0,a(function(){s.mouseActive=!1},100)}).on("focus",function(){!1===s.mouseActive&&c.addClass("md-focused")}).on("blur",function(){c.removeClass("md-focused")}),p.$render=h}}e=e[0];var l="md-checked";return{restrict:"E",transclude:!0,require:"?ngModel",priority:210,template:'<div class="_md-container" md-ink-ripple md-ink-ripple-checkbox><div class="_md-icon"></div></div><div ng-transclude class="_md-label"></div>',compile:s}}t.module("material.components.checkbox",["material.core"]).directive("mdCheckbox",e),e.$inject=["inputDirective","$mdAria","$mdConstant","$mdTheming","$mdUtil","$timeout"]}(),function(){t.module("material.components.chips",["material.core","material.components.autocomplete"])}(),function(){function e(e){function t(e,t){this.$scope=e,this.$element=t}return{restrict:"E",controller:["$scope","$element",t],link:function(t,i,o){i[0],e(i),t.$broadcast("$mdContentLoaded",i),n(i[0])}}}function n(e){t.element(e).on("$md.pressdown",function(t){"t"===t.pointer.type&&(t.$materialScrollFixed||(t.$materialScrollFixed=!0,0===e.scrollTop?e.scrollTop=1:e.scrollHeight===e.scrollTop+e.offsetHeight&&(e.scrollTop-=1)))})}t.module("material.components.content",["material.core"]).directive("mdContent",e),e.$inject=["$mdTheming"]}(),function(){!function(){function e(){return{template:'<table aria-hidden="true" class="md-calendar-day-header"><thead></thead></table><div class="md-calendar-scroll-mask"><md-virtual-repeat-container class="md-calendar-scroll-container" md-offset-size="'+(o-i)+'"><table role="grid" tabindex="0" class="md-calendar" aria-readonly="true"><tbody role="rowgroup" md-virtual-repeat="i in ctrl.items" md-calendar-month md-month-offset="$index" class="md-calendar-month" md-start-index="ctrl.getSelectedMonthIndex()" md-item-size="'+i+'"></tbody></table></md-virtual-repeat-container></div>',scope:{minDate:"=mdMinDate",maxDate:"=mdMaxDate",dateFilter:"=mdDateFilter"},require:["ngModel","mdCalendar"],controller:n,controllerAs:"ctrl",bindToController:!0,link:function(e,t,n,i){var o=i[0];i[1].configureNgModel(o)}}}function n(e,t,n,i,o,r,a,l,c,d,u){if(a(e),this.items={length:2e3},this.maxDate&&this.minDate){var p=l.getMonthDistance(this.minDate,this.maxDate)+1;p=Math.max(p,1),p+=1,this.items.length=p}this.$animate=i,this.$q=o,this.$mdInkRipple=d,this.$mdUtil=u,this.keyCode=r.KEY_CODE,this.dateUtil=l,this.dateLocale=c,this.$element=e,this.$scope=n,this.calendarElement=e[0].querySelector(".md-calendar"),this.calendarScroller=e[0].querySelector(".md-virtual-repeat-scroller"),this.today=this.dateUtil.createDateAtMidnight(),this.firstRenderableDate=this.dateUtil.incrementMonths(this.today,-this.items.length/2),this.minDate&&this.minDate>this.firstRenderableDate?this.firstRenderableDate=this.minDate:this.maxDate&&(this.items.length,this.firstRenderableDate=this.dateUtil.incrementMonths(this.maxDate,-(this.items.length-2))),this.id=s++,this.ngModelCtrl=null,this.selectedDate=null,this.displayDate=null,this.focusDate=null,this.isInitialized=!1,this.isMonthTransitionInProgress=!1,t.tabindex||e.attr("tabindex","-1");var g=this;this.cellClickHandler=function(){var e=this;this.hasAttribute("data-timestamp")&&n.$apply(function(){var t=Number(e.getAttribute("data-timestamp"));g.setNgModelValue(g.dateUtil.createDateAtMidnight(t))})},this.attachCalendarEventListeners()}t.module("material.components.datepicker",["material.core","material.components.icon","material.components.virtualRepeat"]).directive("mdCalendar",e);var i=265,o=45,r="md-calendar-selected-date",a="md-focus",s=0;n.$inject=["$element","$attrs","$scope","$animate","$q","$mdConstant","$mdTheming","$$mdDateUtil","$mdDateLocale","$mdInkRipple","$mdUtil"],n.prototype.configureNgModel=function(e){this.ngModelCtrl=e;var t=this;e.$render=function(){t.changeSelectedDate(t.ngModelCtrl.$viewValue)}},n.prototype.buildInitialCalendarDisplay=function(){this.buildWeekHeader(),this.hideVerticalScrollbar(),this.displayDate=this.selectedDate||this.today,this.isInitialized=!0},n.prototype.hideVerticalScrollbar=function(){var e=this.$element[0],t=e.querySelector(".md-calendar-scroll-mask"),n=this.calendarScroller,i=e.querySelector(".md-calendar-day-header").clientWidth,o=n.offsetWidth-n.clientWidth;t.style.width=i+"px",n.style.width=i+o+"px",n.style.paddingRight=o+"px"},n.prototype.attachCalendarEventListeners=function(){this.$element.on("keydown",t.bind(this,this.handleKeyEvent))},n.prototype.handleKeyEvent=function(e){var t=this;this.$scope.$apply(function(){if(e.which==t.keyCode.ESCAPE||e.which==t.keyCode.TAB)return t.$scope.$emit("md-calendar-close"),void(e.which==t.keyCode.TAB&&e.preventDefault());if(e.which===t.keyCode.ENTER)return t.setNgModelValue(t.displayDate),void e.preventDefault();var n=t.getFocusDateFromKeyEvent(e);n&&(n=t.boundDateByMinAndMax(n),e.preventDefault(),e.stopPropagation(),t.changeDisplayDate(n).then(function(){t.focus(n)}))})},n.prototype.getFocusDateFromKeyEvent=function(e){var t=this.dateUtil,n=this.keyCode;switch(e.which){case n.RIGHT_ARROW:return t.incrementDays(this.displayDate,1);case n.LEFT_ARROW:return t.incrementDays(this.displayDate,-1);case n.DOWN_ARROW:return e.metaKey?t.incrementMonths(this.displayDate,1):t.incrementDays(this.displayDate,7);case n.UP_ARROW:return e.metaKey?t.incrementMonths(this.displayDate,-1):t.incrementDays(this.displayDate,-7);case n.PAGE_DOWN:return t.incrementMonths(this.displayDate,1);case n.PAGE_UP:return t.incrementMonths(this.displayDate,-1);case n.HOME:return t.getFirstDateOfMonth(this.displayDate);case n.END:return t.getLastDateOfMonth(this.displayDate);default:return null}},n.prototype.getSelectedMonthIndex=function(){return this.dateUtil.getMonthDistance(this.firstRenderableDate,this.selectedDate||this.today)},n.prototype.scrollToMonth=function(e){if(this.dateUtil.isValidDate(e)){var t=this.dateUtil.getMonthDistance(this.firstRenderableDate,e);this.calendarScroller.scrollTop=t*i}},n.prototype.setNgModelValue=function(e){this.$scope.$emit("md-calendar-change",e),this.ngModelCtrl.$setViewValue(e),this.ngModelCtrl.$render()},n.prototype.focus=function(e){var t=e||this.selectedDate||this.today,n=this.calendarElement.querySelector(".md-focus");n&&n.classList.remove(a);var i=this.getDateId(t),o=document.getElementById(i);o?(o.classList.add(a),o.focus()):this.focusDate=t},n.prototype.boundDateByMinAndMax=function(e){var t=e;return this.minDate&&e<this.minDate&&(t=new Date(this.minDate.getTime())),this.maxDate&&e>this.maxDate&&(t=new Date(this.maxDate.getTime())),t},n.prototype.changeSelectedDate=function(e){var t=this,n=this.selectedDate;this.selectedDate=e,this.changeDisplayDate(e).then(function(){if(n){var i=document.getElementById(t.getDateId(n));i&&(i.classList.remove(r),i.setAttribute("aria-selected","false"))}if(e){var o=document.getElementById(t.getDateId(e));o&&(o.classList.add(r),o.setAttribute("aria-selected","true"))}})},n.prototype.changeDisplayDate=function(e){if(!this.isInitialized)return this.buildInitialCalendarDisplay(),this.$q.when();if(!this.dateUtil.isValidDate(e)||this.isMonthTransitionInProgress)return this.$q.when();this.isMonthTransitionInProgress=!0;var t=this.animateDateChange(e);this.displayDate=e;var n=this;return t.then(function(){n.isMonthTransitionInProgress=!1}),t},n.prototype.animateDateChange=function(e){return this.scrollToMonth(e),this.$q.when()},n.prototype.buildWeekHeader=function(){for(var e=this.dateLocale.firstDayOfWeek,t=this.dateLocale.shortDays,n=document.createElement("tr"),i=0;7>i;i++){var o=document.createElement("th");o.textContent=t[(i+e)%7],n.appendChild(o)}this.$element.find("thead").append(n)},n.prototype.getDateId=function(e){return["md",this.id,e.getFullYear(),e.getMonth(),e.getDate()].join("-")}}()}(),function(){!function(){function e(){return{require:["^^mdCalendar","mdCalendarMonth"],scope:{offset:"=mdMonthOffset"},controller:n,controllerAs:"mdMonthCtrl",bindToController:!0,link:function(e,t,n,i){var o=i[0],r=i[1];r.calendarCtrl=o,r.generateContent(),e.$watch(function(){return r.offset},function(e,t){e!=t&&r.generateContent()})}}}function n(e,t,n){this.dateUtil=t,this.dateLocale=n,this.$element=e,this.calendarCtrl=null,this.offset,this.focusAfterAppend=null}t.module("material.components.datepicker").directive("mdCalendarMonth",e),n.$inject=["$element","$$mdDateUtil","$mdDateLocale"],n.prototype.generateContent=function(){var e=this.calendarCtrl,t=this.dateUtil.incrementMonths(e.firstRenderableDate,this.offset);this.$element.empty(),this.$element.append(this.buildCalendarForMonth(t)),this.focusAfterAppend&&(this.focusAfterAppend.classList.add("md-focus"),this.focusAfterAppend.focus(),this.focusAfterAppend=null)},n.prototype.buildDateCell=function(e){var t=this.calendarCtrl,n=document.createElement("td");if(n.tabIndex=-1,n.classList.add("md-calendar-date"),n.setAttribute("role","gridcell"),e){n.setAttribute("tabindex","-1"),n.setAttribute("aria-label",this.dateLocale.longDateFormatter(e)),n.id=t.getDateId(e),n.setAttribute("data-timestamp",e.getTime()),this.dateUtil.isSameDay(e,t.today)&&n.classList.add("md-calendar-date-today"),this.dateUtil.isValidDate(t.selectedDate)&&this.dateUtil.isSameDay(e,t.selectedDate)&&(n.classList.add("md-calendar-selected-date"),n.setAttribute("aria-selected","true"));var i=this.dateLocale.dates[e.getDate()];if(this.isDateEnabled(e)){var o=document.createElement("span");n.appendChild(o),o.classList.add("md-calendar-date-selection-indicator"),o.textContent=i,n.addEventListener("click",t.cellClickHandler),t.focusDate&&this.dateUtil.isSameDay(e,t.focusDate)&&(this.focusAfterAppend=n)}else n.classList.add("md-calendar-date-disabled"),n.textContent=i}return n},n.prototype.isDateEnabled=function(e){return this.dateUtil.isDateWithinRange(e,this.calendarCtrl.minDate,this.calendarCtrl.maxDate)&&(!t.isFunction(this.calendarCtrl.dateFilter)||this.calendarCtrl.dateFilter(e))},n.prototype.buildDateRow=function(e){var t=document.createElement("tr");return t.setAttribute("role","row"),t.setAttribute("aria-label",this.dateLocale.weekNumberFormatter(e)),t},n.prototype.buildCalendarForMonth=function(e){var t=this.dateUtil.isValidDate(e)?e:new Date,n=this.dateUtil.getFirstDateOfMonth(t),i=this.getLocaleDay_(n),o=this.dateUtil.getNumberOfDaysInMonth(t),r=document.createDocumentFragment(),a=1,s=this.buildDateRow(a);r.appendChild(s);var l=this.offset===this.calendarCtrl.items.length-1,c=0,d=document.createElement("td");if(d.classList.add("md-calendar-month-label"),this.calendarCtrl.maxDate&&n>this.calendarCtrl.maxDate&&d.classList.add("md-calendar-month-label-disabled"),d.textContent=this.dateLocale.monthHeaderFormatter(t),2>=i){d.setAttribute("colspan","7");var u=this.buildDateRow();if(u.appendChild(d),r.insertBefore(u,s),l)return r}else c=2,d.setAttribute("colspan","2"),s.appendChild(d);for(var p=c;i>p;p++)s.appendChild(this.buildDateCell());for(var g=i,m=n,f=1;o>=f;f++){if(7===g){if(l)return r;g=0,a++,s=this.buildDateRow(a),r.appendChild(s)}m.setDate(f);var h=this.buildDateCell(m);s.appendChild(h),g++}for(;s.childNodes.length<7;)s.appendChild(this.buildDateCell());for(;r.childNodes.length<6;){for(var v=this.buildDateRow(),p=0;7>p;p++)v.appendChild(this.buildDateCell());r.appendChild(v)}return r},n.prototype.getLocaleDay_=function(e){return(e.getDay()+(7-this.dateLocale.firstDayOfWeek))%7}}()}(),function(){!function(){t.module("material.components.datepicker").config(["$provide",function(e){function t(){this.months=null,this.shortMonths=null,this.days=null,this.shortDays=null,this.dates=null,this.firstDayOfWeek=0,this.formatDate=null,this.parseDate=null,this.monthHeaderFormatter=null,this.weekNumberFormatter=null,this.longDateFormatter=null,this.msgCalendar="",this.msgOpenCalendar=""}t.prototype.$get=function(e){function t(e){if(!e)return"";var t=e.toLocaleTimeString(),n=e;return 0!=e.getHours()||-1===t.indexOf("11:")&&-1===t.indexOf("23:")||(n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),1,0,0)),n.toLocaleDateString()}function n(e){return new Date(e)}function i(e){return e=e.trim(),/^(([a-zA-Z]{3,}|[0-9]{1,4})([ \.,]+|[\/\-])){2}([a-zA-Z]{3,}|[0-9]{1,4})$/.test(e)}function o(e){return p.shortMonths[e.getMonth()]+" "+e.getFullYear()}function r(e){return"Week "+e}function a(e){return[p.days[e.getDay()],p.months[e.getMonth()],p.dates[e.getDate()],e.getFullYear()].join(" ")}for(var s=e.DATETIME_FORMATS.DAY.map(function(e){return e[0]}),l=Array(32),c=1;31>=c;c++)l[c]=c;var d="Calendar",u="Open calendar",p={months:this.months||e.DATETIME_FORMATS.MONTH,shortMonths:this.shortMonths||e.DATETIME_FORMATS.SHORTMONTH,days:this.days||e.DATETIME_FORMATS.DAY,shortDays:this.shortDays||s,dates:this.dates||l,firstDayOfWeek:this.firstDayOfWeek||0,formatDate:this.formatDate||t,parseDate:this.parseDate||n,isDateComplete:this.isDateComplete||i,monthHeaderFormatter:this.monthHeaderFormatter||o,weekNumberFormatter:this.weekNumberFormatter||r,longDateFormatter:this.longDateFormatter||a,msgCalendar:this.msgCalendar||d,msgOpenCalendar:this.msgOpenCalendar||u};return p},t.prototype.$get.$inject=["$locale"],e.provider("$mdDateLocale",new t)}])}()}(),function(){!function(){function n(){return{template:'<md-button class="md-datepicker-button md-icon-button" type="button" tabindex="-1" aria-hidden="true" ng-click="ctrl.openCalendarPane($event)"><md-icon class="md-datepicker-calendar-icon" md-svg-icon="md-calendar"></md-icon></md-button><div class="md-datepicker-input-container" ng-class="{\'md-datepicker-focused\': ctrl.isFocused}"><input class="md-datepicker-input" aria-haspopup="true" ng-focus="ctrl.setFocused(true)" ng-blur="ctrl.setFocused(false)"><md-button type="button" md-no-ink class="md-datepicker-triangle-button md-icon-button" ng-click="ctrl.openCalendarPane($event)" aria-label="{{::ctrl.dateLocale.msgOpenCalendar}}"><div class="md-datepicker-expand-triangle"></div></md-button></div><div class="md-datepicker-calendar-pane md-whiteframe-z1"><div class="md-datepicker-input-mask"><div class="md-datepicker-input-mask-opaque"></div></div><div class="md-datepicker-calendar"><md-calendar role="dialog" aria-label="{{::ctrl.dateLocale.msgCalendar}}" md-min-date="ctrl.minDate" md-max-date="ctrl.maxDate"md-date-filter="ctrl.dateFilter"ng-model="ctrl.date" ng-if="ctrl.isCalendarOpen"></md-calendar></div></div>',require:["ngModel","mdDatepicker","?^mdInputContainer"],scope:{minDate:"=mdMinDate",maxDate:"=mdMaxDate",placeholder:"@mdPlaceholder",dateFilter:"=mdDateFilter"},controller:i,controllerAs:"ctrl",bindToController:!0,link:function(e,t,n,i){var o=i[0],r=i[1];if(i[2])throw Error("md-datepicker should not be placed inside md-input-container.");r.configureNgModel(o)}}}function i(e,n,i,o,r,a,s,l,c,d,u,p){this.$compile=o,this.$timeout=r,this.$window=a,this.dateLocale=d,this.dateUtil=u,this.$mdConstant=s,this.$mdUtil=c,this.$$rAF=p,this.documentElement=t.element(document.documentElement),this.ngModelCtrl=null,this.inputElement=n[0].querySelector("input"),this.ngInputElement=t.element(this.inputElement),this.inputContainer=n[0].querySelector(".md-datepicker-input-container"),this.calendarPane=n[0].querySelector(".md-datepicker-calendar-pane"),this.calendarButton=n[0].querySelector(".md-datepicker-button"),this.inputMask=n[0].querySelector(".md-datepicker-input-mask-opaque"),this.$element=n,this.$attrs=i,this.$scope=e,this.date=null,this.isFocused=!1,this.isDisabled,this.setDisabled(n[0].disabled||t.isString(i.disabled)),this.isCalendarOpen=!1,this.calendarPaneOpenedFrom=null,this.calendarPane.id="md-date-pane"+c.nextUid(),l(n),this.bodyClickHandler=t.bind(this,this.handleBodyClick),this.windowResizeHandler=c.debounce(t.bind(this,this.closeCalendarPane),100),i.tabindex||n.attr("tabindex","-1"),this.installPropertyInterceptors(),this.attachChangeListeners(),this.attachInteractionListeners();var g=this;e.$on("$destroy",function(){g.detachCalendarPane()})}t.module("material.components.datepicker").directive("mdDatepicker",n);var o="md-datepicker-invalid",r=368,a=360;i.$inject=["$scope","$element","$attrs","$compile","$timeout","$window","$mdConstant","$mdTheming","$mdUtil","$mdDateLocale","$$mdDateUtil","$$rAF"],i.prototype.configureNgModel=function(e){this.ngModelCtrl=e;var t=this;e.$render=function(){var e=t.ngModelCtrl.$viewValue;if(e&&!(e instanceof Date))throw Error("The ng-model for md-datepicker must be a Date instance. Currently the model is a: "+typeof e);t.date=e,t.inputElement.value=t.dateLocale.formatDate(e),t.resizeInputElement(),t.updateErrorState()}},i.prototype.attachChangeListeners=function(){var e=this;e.$scope.$on("md-calendar-change",function(t,n){e.ngModelCtrl.$setViewValue(n),e.date=n,e.inputElement.value=e.dateLocale.formatDate(n),e.closeCalendarPane(),e.resizeInputElement(),e.updateErrorState()}),e.ngInputElement.on("input",t.bind(e,e.resizeInputElement)),e.ngInputElement.on("input",e.$mdUtil.debounce(e.handleInputEvent,500,e))},i.prototype.attachInteractionListeners=function(){var e=this,t=this.$scope,n=this.$mdConstant.KEY_CODE;e.ngInputElement.on("keydown",function(i){i.altKey&&i.keyCode==n.DOWN_ARROW&&(e.openCalendarPane(i),t.$digest())}),t.$on("md-calendar-close",function(){e.closeCalendarPane()})},i.prototype.installPropertyInterceptors=function(){var e=this;if(this.$attrs.ngDisabled){var t=this.$scope.$parent;t&&t.$watch(this.$attrs.ngDisabled,function(t){e.setDisabled(t)})}Object.defineProperty(this,"placeholder",{get:function(){return e.inputElement.placeholder},set:function(t){e.inputElement.placeholder=t||""}})},i.prototype.setDisabled=function(e){this.isDisabled=e,this.inputElement.disabled=e,this.calendarButton.disabled=e},i.prototype.updateErrorState=function(e){var n=e||this.date;if(this.clearErrorState(),this.dateUtil.isValidDate(n)){if(n=this.dateUtil.createDateAtMidnight(n),this.dateUtil.isValidDate(this.minDate)){var i=this.dateUtil.createDateAtMidnight(this.minDate);this.ngModelCtrl.$setValidity("mindate",n>=i)}if(this.dateUtil.isValidDate(this.maxDate)){var r=this.dateUtil.createDateAtMidnight(this.maxDate);this.ngModelCtrl.$setValidity("maxdate",r>=n)}t.isFunction(this.dateFilter)&&this.ngModelCtrl.$setValidity("filtered",this.dateFilter(n))}else this.ngModelCtrl.$setValidity("valid",null==n);this.ngModelCtrl.$valid||this.inputContainer.classList.add(o)},i.prototype.clearErrorState=function(){this.inputContainer.classList.remove(o),["mindate","maxdate","filtered","valid"].forEach(function(e){this.ngModelCtrl.$setValidity(e,!0)},this)},i.prototype.resizeInputElement=function(){this.inputElement.size=this.inputElement.value.length+3},i.prototype.handleInputEvent=function(){var e=this.inputElement.value,t=e?this.dateLocale.parseDate(e):null;this.dateUtil.setDateTimeToMidnight(t),(""==e||this.dateUtil.isValidDate(t)&&this.dateLocale.isDateComplete(e)&&this.isDateEnabled(t))&&(this.ngModelCtrl.$setViewValue(t),this.date=t),this.updateErrorState(t)},i.prototype.isDateEnabled=function(e){return this.dateUtil.isDateWithinRange(e,this.minDate,this.maxDate)&&(!t.isFunction(this.dateFilter)||this.dateFilter(e))},i.prototype.attachCalendarPane=function(){var e=this.calendarPane;e.style.transform="",this.$element.addClass("md-datepicker-open");var t=this.inputContainer.getBoundingClientRect(),n=document.body.getBoundingClientRect(),i=t.top-n.top,o=t.left-n.left,s=n.top<0&&0==document.body.scrollTop?-n.top:document.body.scrollTop,l=n.left<0&&0==document.body.scrollLeft?-n.left:document.body.scrollLeft,c=s+this.$window.innerHeight,d=l+this.$window.innerWidth;if(o+a>d){if(d-a>0)o=d-a;else{o=l;var u=this.$window.innerWidth/a;e.style.transform="scale("+u+")"}e.classList.add("md-datepicker-pos-adjusted")}i+r>c&&c-r>s&&(i=c-r,e.classList.add("md-datepicker-pos-adjusted")),e.style.left=o+"px",e.style.top=i+"px",document.body.appendChild(e),this.inputMask.style.left=t.width+"px",this.$$rAF(function(){e.classList.add("md-pane-open")})},i.prototype.detachCalendarPane=function(){this.$element.removeClass("md-datepicker-open"),this.calendarPane.classList.remove("md-pane-open"),this.calendarPane.classList.remove("md-datepicker-pos-adjusted"),this.isCalendarOpen&&this.$mdUtil.enableScrolling(),this.calendarPane.parentNode&&this.calendarPane.parentNode.removeChild(this.calendarPane)},i.prototype.openCalendarPane=function(t){if(!this.isCalendarOpen&&!this.isDisabled){this.isCalendarOpen=!0,this.calendarPaneOpenedFrom=t.target,this.$mdUtil.disableScrollAround(this.calendarPane),this.attachCalendarPane(),this.focusCalendar();var n=this;this.$mdUtil.nextTick(function(){n.documentElement.on("click touchstart",n.bodyClickHandler)},!1),e.addEventListener("resize",this.windowResizeHandler)}},i.prototype.closeCalendarPane=function(){this.isCalendarOpen&&(this.detachCalendarPane(),this.isCalendarOpen=!1,this.calendarPaneOpenedFrom.focus(),this.calendarPaneOpenedFrom=null,this.ngModelCtrl.$setTouched(),this.documentElement.off("click touchstart",this.bodyClickHandler),e.removeEventListener("resize",this.windowResizeHandler))},i.prototype.getCalendarCtrl=function(){return t.element(this.calendarPane.querySelector("md-calendar")).controller("mdCalendar")},i.prototype.focusCalendar=function(){var e=this;this.$mdUtil.nextTick(function(){e.getCalendarCtrl().focus()},!1)},i.prototype.setFocused=function(e){e||this.ngModelCtrl.$setTouched(),this.isFocused=e},i.prototype.handleBodyClick=function(e){this.isCalendarOpen&&(this.$mdUtil.getClosest(e.target,"md-calendar")||this.closeCalendarPane(),this.$scope.$digest())}}()}(),function(){!function(){t.module("material.components.datepicker").factory("$$mdDateUtil",function(){function e(e){return new Date(e.getFullYear(),e.getMonth(),1)}function n(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function i(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function o(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function r(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function a(e,t){return e.getDate()==t.getDate()&&r(e,t)}function s(e,t){return r(i(e),t)}function l(e,t){return r(t,o(e))}function c(e,t){return v((e.getTime()+t.getTime())/2)}function d(t){var n=e(t);return Math.floor((n.getDay()+t.getDate()-1)/7)}function u(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)}function p(e,t){var i=new Date(e.getFullYear(),e.getMonth()+t,1),o=n(i);return o<e.getDate()?i.setDate(o):i.setDate(e.getDate()),i}function g(e,t){return 12*(t.getFullYear()-e.getFullYear())+(t.getMonth()-e.getMonth())}function m(e){return new Date(e.getFullYear(),e.getMonth(),n(e))}function f(e){return null!=e&&e.getTime&&!isNaN(e.getTime())}function h(e){f(e)&&e.setHours(0,0,0,0)}function v(e){var n;return n=t.isUndefined(e)?new Date:new Date(e),h(n),n}function y(e,t,n){var i=v(e),o=f(t)?v(t):null,r=f(n)?v(n):null;return(!o||i>=o)&&(!r||r>=i)}return{getFirstDateOfMonth:e,getNumberOfDaysInMonth:n,getDateInNextMonth:i,getDateInPreviousMonth:o,isInNextMonth:s,isInPreviousMonth:l,getDateMidpoint:c,isSameMonthAndYear:r,getWeekOfMonth:d,incrementDays:u,incrementMonths:p,getLastDateOfMonth:m,isSameDay:a,getMonthDistance:g,isValidDate:f,setDateTimeToMidnight:h,createDateAtMidnight:v,isDateWithinRange:y}})}()}(),function(){function e(e,n,i){return{restrict:"E",link:function(o,r,a){n(r),e(function(){function e(){r.toggleClass("md-content-overflow",a.scrollHeight>a.clientHeight)}var n,a=r[0].querySelector("md-dialog-content");a&&(n=a.getElementsByTagName("img"),e(),t.element(n).on("load",e)),o.$on("$destroy",function(){i.destroy(r)})})}}}function i(e){function i(e,t,n){return{template:['<md-dialog md-theme="{{ dialog.theme }}" aria-label="{{ dialog.ariaLabel }}" ng-class="dialog.css">','  <md-dialog-content class="md-dialog-content" role="document" tabIndex="-1">','    <h2 class="md-title">{{ dialog.title }}</h2>','    <div ng-if="::dialog.mdHtmlContent" class="_md-dialog-content-body" ','        ng-bind-html="::dialog.mdHtmlContent"></div>','    <div ng-if="::!dialog.mdHtmlContent" class="_md-dialog-content-body">',"      <p>{{::dialog.mdTextContent}}</p>","    </div>",'    <md-input-container md-no-float ng-if="::dialog.$type == \'prompt\'" class="md-prompt-input-container">','      <input ng-keypress="dialog.keypress($event)" md-autofocus ng-model="dialog.result" placeholder="{{::dialog.placeholder}}">',"    </md-input-container>","  </md-dialog-content>","  <md-dialog-actions>",'    <md-button ng-if="dialog.$type === \'confirm\' || dialog.$type === \'prompt\'"               ng-click="dialog.abort()" class="md-primary">',"      {{ dialog.cancel }}","    </md-button>",'    <md-button ng-click="dialog.hide()" class="md-primary" md-autofocus="dialog.$type===\'alert\'">',"      {{ dialog.ok }}","    </md-button>","  </md-dialog-actions>","</md-dialog>"].join("").replace(/\s\s+/g,""),controller:function(){this.hide=function(){e.hide("prompt"!==this.$type||this.result)},this.abort=function(){e.cancel()},this.keypress=function(t){t.keyCode===n.KEY_CODE.ENTER&&e.hide(this.result)}},controllerAs:"dialog",bindToController:!0,theme:t.defaultTheme()}}function o(e,i,o,s,l,c,d,u,p,g){function m(e,t,n,i){if(i){if(i.mdHtmlContent=i.htmlContent||n.htmlContent||"",i.mdTextContent=i.textContent||n.textContent||i.content||n.content||"",i.mdHtmlContent&&!g.has("$sanitize"))throw Error("The ngSanitize module must be loaded in order to use htmlContent.");if(i.mdHtmlContent&&i.mdTextContent)throw Error("md-dialog cannot have both `htmlContent` and `textContent`")}}function f(e,n,i,r){function a(){n[0].querySelectorAll(".md-actions").length>0&&p.warn("Using a class of md-actions is deprecated, please use <md-dialog-actions>.")}function s(){function e(){var e=n[0].querySelector(".dialog-close");if(!e){var i=n[0].querySelectorAll(".md-actions button, md-dialog-actions button");e=i[i.length-1]}return t.element(e)}if(i.focusOnOpen){(o.findFocusTarget(n)||e()).focus()}}return t.element(c[0].body).addClass("md-dialog-is-showing"),v(i),w(n.find("md-dialog"),i),b(e,n,i),S(n,i).then(function(){y(n,i),C(n,i),a(),s()})}function h(e,n,i){function o(){return E(n,i)}function s(){t.element(c[0].body).removeClass("md-dialog-is-showing"),n.remove(),i.$destroy||i.origin.focus()}return i.deactivateListeners(),i.unlockScreenReader(),i.hideBackdrop(i.$destroy),r&&r.parentNode&&r.parentNode.removeChild(r),a&&a.parentNode&&a.parentNode.removeChild(a),i.$destroy?s():o().then(s)}function v(e){function i(e,i){var o=t.element(e||{});if(o&&o.length){var r={top:0,left:0,height:0,width:0},a=t.isFunction(o[0].getBoundingClientRect);return t.extend(i||{},{element:a?o:n,bounds:a?o[0].getBoundingClientRect():t.extend({},r,o[0]),focus:t.bind(o,o.focus)})}}function o(e,n){if(t.isString(e)){var i=e,o=c[0].querySelectorAll(i);e=o.length?o[0]:null}return t.element(e||n)}e.origin=t.extend({element:null,bounds:null,focus:t.noop},e.origin||{}),e.parent=o(e.parent,u),e.closeTo=i(o(e.closeTo)),e.openFrom=i(o(e.openFrom)),e.targetEvent&&(e.origin=i(e.targetEvent.target,e.origin))}function y(n,i){var r=t.element(d),a=o.debounce(function(){T(n,i)},60),l=[],c=function(){var t="alert"==i.$type?e.hide:e.cancel;o.nextTick(t,!0)};if(i.escapeToClose){var u=i.parent,p=function(e){e.keyCode===s.KEY_CODE.ESCAPE&&(e.stopPropagation(),e.preventDefault(),c())};n.on("keydown",p),u.on("keydown",p),l.push(function(){n.off("keydown",p),u.off("keydown",p)})}if(r.on("resize",a),l.push(function(){r.off("resize",a)}),i.clickOutsideToClose){var g,m=n,f=function(e){g=e.target},h=function(e){g===m[0]&&e.target===m[0]&&(e.stopPropagation(),e.preventDefault(),c())};m.on("mousedown",f),m.on("mouseup",h),l.push(function(){m.off("mousedown",f),m.off("mouseup",h)})}i.deactivateListeners=function(){l.forEach(function(e){e()}),i.deactivateListeners=null}}function b(e,t,n){n.disableParentScroll&&(n.restoreScroll=o.disableScrollAround(t,n.parent)),n.hasBackdrop&&(n.backdrop=o.createBackdrop(e,"_md-dialog-backdrop md-opaque"),l.enter(n.backdrop,n.parent)),n.hideBackdrop=function(e){n.backdrop&&(e?n.backdrop.remove():l.leave(n.backdrop)),n.disableParentScroll&&(n.restoreScroll(),delete n.restoreScroll),n.hideBackdrop=null}}function w(e,t){var n="alert"===t.$type?"alertdialog":"dialog",s=e.find("md-dialog-content"),l="dialogContent_"+(e.attr("id")||o.nextUid());e.attr({role:n,tabIndex:"-1"}),0===s.length&&(s=e),s.attr("id",l),e.attr("aria-describedby",l),t.ariaLabel?i.expect(e,"aria-label",t.ariaLabel):i.expectAsync(e,"aria-label",function(){var e=s.text().split(/\s+/);return e.length>3&&(e=e.slice(0,3).concat("...")),e.join(" ")}),r=document.createElement("div"),r.classList.add("_md-dialog-focus-trap"),r.tabIndex=0,a=r.cloneNode(!1);var c=function(){e.focus()};r.addEventListener("focus",c),a.addEventListener("focus",c),e[0].parentNode.insertBefore(r,e[0]),e.after(a)}function C(e,t){function n(e){for(;e.parentNode;){if(e===document.body)return;for(var t=e.parentNode.children,o=0;o<t.length;o++)e===t[o]||I(t[o],["SCRIPT","STYLE"])||t[o].setAttribute("aria-hidden",i);n(e=e.parentNode)}}var i=!0;n(e[0]),t.unlockScreenReader=function(){i=!1,n(e[0]),t.unlockScreenReader=null}}function T(e,t){var n="fixed"==d.getComputedStyle(c[0].body).position,i=t.backdrop?d.getComputedStyle(t.backdrop[0]):null,r=i?Math.min(c[0].body.clientHeight,Math.ceil(Math.abs(parseInt(i.height,10)))):0;return e.css({top:(n?o.scrollTop(t.parent):0)+"px",height:r?r+"px":"100%"}),e}function S(e,t){t.parent.append(e),T(e,t);var n=e.find("md-dialog"),i=o.dom.animator,r=i.calculateZoomToOrigin,a={transitionInClass:"_md-transition-in",transitionOutClass:"_md-transition-out"},s=i.toTransformCss(r(n,t.openFrom||t.origin)),l=i.toTransformCss("");return t.fullscreen&&n.addClass("md-dialog-fullscreen"),i.translate3d(n,s,l,a).then(function(e){return t.reverseAnimate=function(){return delete t.reverseAnimate,t.closeTo?(a={transitionInClass:"_md-transition-out",transitionOutClass:"_md-transition-in"},s=l,l=i.toTransformCss(r(n,t.closeTo)),i.translate3d(n,s,l,a)):e(i.toTransformCss(r(n,t.origin)))},!0})}function E(e,t){return t.reverseAnimate()}function I(e,t){return-1!==t.indexOf(e.nodeName)||void 0}return{hasBackdrop:!0,isolateScope:!0,onShow:f,onShowing:m,onRemove:h,clickOutsideToClose:!1,escapeToClose:!0,targetEvent:null,closeTo:null,openFrom:null,focusOnOpen:!0,disableParentScroll:!0,autoWrap:!0,fullscreen:!1,transformTemplate:function(e,t){function n(e){return t.autoWrap&&!/<\/md-dialog>/g.test(e)?"<md-dialog>"+(e||"")+"</md-dialog>":e||""}return'<div class="md-dialog-container" tabindex="-1">'+n(e)+"</div>"}}}var r,a;return i.$inject=["$mdDialog","$mdTheming","$mdConstant"],o.$inject=["$mdDialog","$mdAria","$mdUtil","$mdConstant","$animate","$document","$window","$rootElement","$log","$injector"],e("$mdDialog").setDefaults({methods:["disableParentScroll","hasBackdrop","clickOutsideToClose","escapeToClose","targetEvent","closeTo","openFrom","parent","fullscreen"],options:o}).addPreset("alert",{methods:["title","htmlContent","textContent","content","ariaLabel","ok","theme","css"],options:i}).addPreset("confirm",{methods:["title","htmlContent","textContent","content","ariaLabel","ok","cancel","theme","css"],options:i}).addPreset("prompt",{methods:["title","htmlContent","textContent","content","placeholder","ariaLabel","ok","cancel","theme","css"],options:i})}t.module("material.components.dialog",["material.core","material.components.backdrop"]).directive("mdDialog",e).provider("$mdDialog",i),e.$inject=["$$rAF","$mdTheming","$mdDialog"],i.$inject=["$$interimElementProvider"]}(),function(){function e(e){return{restrict:"E",link:e}}t.module("material.components.divider",["material.core"]).directive("mdDivider",e),e.$inject=["$mdTheming"]}(),function(){!function(){function e(){return{restrict:"E",require:["^?mdFabSpeedDial","^?mdFabToolbar"],compile:function(e,n){var i=e.children(),o=!1;t.forEach(["","data-","x-"],function(e){o=o||!!i.attr(e+"ng-repeat")}),o?i.addClass("md-fab-action-item"):i.wrap('<div class="md-fab-action-item">')}}}t.module("material.components.fabActions",["material.core"]).directive("mdFabActions",e)}()}(),function(){!function(){function e(e,n,i,o,r,a){function s(){_.direction=_.direction||"down",_.isOpen=_.isOpen||!1,d(),n.addClass("_md-animations-waiting")}function l(){var i=["click","focusin","focusout"];t.forEach(i,function(e){n.on(e,c)}),e.$on("$destroy",function(){t.forEach(i,function(e){n.off(e,c)}),m()})}function c(e){"click"==e.type&&k(e),"focusout"!=e.type||$||($=a(function(){_.close()},100,!1)),"focusin"==e.type&&$&&(a.cancel($),$=null)}function d(){_.currentActionIndex=-1}function u(){e.$watch("vm.direction",function(e,t){i.removeClass(n,"md-"+t),i.addClass(n,"md-"+e),d()});var t,o;e.$watch("vm.isOpen",function(e){d(),t&&o||(t=A(),o=M()),e?g():m();var r=e?"md-is-open":"",a=e?"":"md-is-open";t.attr("aria-haspopup",!0),t.attr("aria-expanded",e),o.attr("aria-hidden",!e),i.setClass(n,r,a)})}function p(){n[0].scrollHeight>0?i.addClass(n,"_md-animations-ready").then(function(){n.removeClass("_md-animations-waiting")}):10>D&&(a(p,100),D+=1)}function g(){n.on("keydown",h),o.nextTick(function(){t.element(document).on("click touchend",f)})}function m(){n.off("keydown",h),t.element(document).off("click touchend",f)}function f(e){if(e.target){var t=o.getClosest(e.target,"md-fab-trigger"),n=o.getClosest(e.target,"md-fab-actions");t||n||_.close()}}function h(e){switch(e.which){case r.KEY_CODE.ESCAPE:return _.close(),e.preventDefault(),!1;case r.KEY_CODE.LEFT_ARROW:return C(e),!1;case r.KEY_CODE.UP_ARROW:return T(e),!1;case r.KEY_CODE.RIGHT_ARROW:return S(e),!1;case r.KEY_CODE.DOWN_ARROW:return E(e),!1}}function v(e){b(e,-1)}function y(e){b(e,1)}function b(e,n){var i=w();_.currentActionIndex=_.currentActionIndex+n,_.currentActionIndex=Math.min(i.length-1,_.currentActionIndex),_.currentActionIndex=Math.max(0,_.currentActionIndex);var o=t.element(i[_.currentActionIndex]).children()[0];t.element(o).attr("tabindex",0),o.focus(),e.preventDefault(),e.stopImmediatePropagation()}function w(){var e=M()[0].querySelectorAll(".md-fab-action-item");return t.forEach(e,function(e){t.element(t.element(e).children()[0]).attr("tabindex",-1)}),e}function C(e){"left"===_.direction?y(e):v(e)}function T(e){"down"===_.direction?v(e):y(e)}function S(e){"left"===_.direction?v(e):y(e)}function E(e){"up"===_.direction?v(e):y(e)}function I(e){return o.getClosest(e,"md-fab-trigger")}function x(e){return o.getClosest(e,"md-fab-actions")}function k(e){I(e.target)&&_.toggle(),x(e.target)&&_.close()}function A(){return n.find("md-fab-trigger")}function M(){return n.find("md-fab-actions")}var _=this;_.open=function(){e.$evalAsync("vm.isOpen = true")},_.close=function(){e.$evalAsync("vm.isOpen = false"),n.find("md-fab-trigger")[0].focus()},_.toggle=function(){e.$evalAsync("vm.isOpen = !vm.isOpen")},s(),l(),u();var D=0;p();var $}t.module("material.components.fabShared",["material.core"]).controller("MdFabController",e),e.$inject=["$scope","$element","$animate","$mdUtil","$mdConstant","$timeout"]}()}(),function(){!function(){function n(){function e(e,t){t.prepend('<div class="_md-css-variables"></div>')}return{restrict:"E",scope:{direction:"@?mdDirection",isOpen:"=?mdOpen"},bindToController:!0,controller:"MdFabController",controllerAs:"vm",link:e}}function i(n){function i(e){n(e,r,!1)}function o(n){if(!n.hasClass("_md-animations-waiting")||n.hasClass("_md-animations-ready")){var i=n[0],o=n.controller("mdFabSpeedDial"),r=i.querySelectorAll(".md-fab-action-item"),a=i.querySelector("md-fab-trigger"),s=i.querySelector("._md-css-variables"),l=parseInt(e.getComputedStyle(s).zIndex);t.forEach(r,function(e,t){var n=e.style;n.transform=n.webkitTransform="",n.transitionDelay="",n.opacity=1,n.zIndex=r.length-t+l}),a.style.zIndex=l+r.length+1,o.isOpen||t.forEach(r,function(e,t){var n,i,r=e.style,s=(a.clientHeight-e.clientHeight)/2,l=(a.clientWidth-e.clientWidth)/2;switch(o.direction){case"up":n=e.scrollHeight*(t+1)+s,i="Y";break;case"down":n=-(e.scrollHeight*(t+1)+s),i="Y";break;case"left":n=e.scrollWidth*(t+1)+l,i="X";break;case"right":n=-(e.scrollWidth*(t+1)+l),i="X"}var c="translate"+i+"("+n+"px)";r.transform=r.webkitTransform=c})}}return{addClass:function(e,t,n){e.hasClass("md-fling")?(o(e),i(n)):n()},removeClass:function(e,t,n){o(e),i(n)}}}function o(n){function i(e){n(e,r,!1)}function o(n){var i=n[0],o=n.controller("mdFabSpeedDial"),r=i.querySelectorAll(".md-fab-action-item"),s=i.querySelector("._md-css-variables"),l=parseInt(e.getComputedStyle(s).zIndex);t.forEach(r,function(e,t){var n=e.style,i=t*a;n.opacity=o.isOpen?1:0,n.transform=n.webkitTransform=o.isOpen?"scale(1)":"scale(0)",n.transitionDelay=(o.isOpen?i:r.length-i)+"ms",n.zIndex=r.length-t+l})}var a=65;return{addClass:function(e,t,n){o(e),i(n)},removeClass:function(e,t,n){o(e),i(n)}}}var r=300;t.module("material.components.fabSpeedDial",["material.core","material.components.fabShared","material.components.fabTrigger","material.components.fabActions"]).directive("mdFabSpeedDial",n).animation(".md-fling",i).animation(".md-scale",o).service("mdFabSpeedDialFlingAnimation",i).service("mdFabSpeedDialScaleAnimation",o),i.$inject=["$timeout"],o.$inject=["$timeout"]}()}(),function(){!function(){function n(){function e(e,t,n){t.addClass("md-fab-toolbar"),t.find("md-fab-trigger").find("button").prepend('<div class="_md-fab-toolbar-background"></div>')}return{restrict:"E",transclude:!0,template:'<div class="_md-fab-toolbar-wrapper">  <div class="_md-fab-toolbar-content" ng-transclude></div></div>',scope:{direction:"@?mdDirection",isOpen:"=?mdOpen"},bindToController:!0,controller:"MdFabController",controllerAs:"vm",link:e}}function i(){function n(n,i,o){if(i){var r=n[0],a=n.controller("mdFabToolbar"),s=r.querySelector("._md-fab-toolbar-background"),l=r.querySelector("md-fab-trigger button"),c=r.querySelector("md-toolbar"),d=r.querySelector("md-fab-trigger button md-icon"),u=n.find("md-fab-actions").children();if(l&&s){var p=e.getComputedStyle(l).getPropertyValue("background-color"),g=r.offsetWidth,m=(r.offsetHeight,g/l.offsetWidth*2);s.style.backgroundColor=p,s.style.borderRadius=g+"px",a.isOpen?(c.style.pointerEvents="initial",s.style.width=l.offsetWidth+"px",s.style.height=l.offsetHeight+"px",s.style.transform="scale("+m+")",s.style.transitionDelay="0ms",d&&(d.style.transitionDelay=".3s"),t.forEach(u,function(e,t){e.style.transitionDelay=25*(u.length-t)+"ms"})):(c.style.pointerEvents="none",s.style.transform="scale(1)",s.style.top="0",n.hasClass("md-right")&&(s.style.left="0",s.style.right=null),n.hasClass("md-left")&&(s.style.right="0",s.style.left=null),s.style.transitionDelay="200ms",d&&(d.style.transitionDelay="0ms"),t.forEach(u,function(e,t){e.style.transitionDelay=200+25*t+"ms"}))}}}return{addClass:function(e,t,i){n(e,t,i),i()},removeClass:function(e,t,i){n(e,t,i),i()}}}t.module("material.components.fabToolbar",["material.core","material.components.fabShared","material.components.fabTrigger","material.components.fabActions"]).directive("mdFabToolbar",n).animation(".md-fab-toolbar",i).service("mdFabToolbarAnimation",i)}()}(),function(){function e(e,i,o,r){function a(n,a,s,l){function c(){for(var e in i.MEDIA)r(e),r.getQuery(i.MEDIA[e]).addListener(S);return r.watchResponsiveAttributes(["md-cols","md-row-height","md-gutter"],s,u)}function d(){l.layoutDelegate=t.noop,E();for(var e in i.MEDIA)r.getQuery(i.MEDIA[e]).removeListener(S)}function u(e){null==e?l.invalidateLayout():r(e)&&l.invalidateLayout()}function p(e){var i=h(),r={tileSpans:v(i),colCount:y(),rowMode:C(),rowHeight:w(),gutter:b()};if(e||!t.equals(r,I)){var s=o(r.colCount,r.tileSpans,i).map(function(e,n){return{grid:{element:a,style:f(r.colCount,n,r.gutter,r.rowMode,r.rowHeight)},tiles:e.map(function(e,o){return{element:t.element(i[o]),style:m(e.position,e.spans,r.colCount,n,r.gutter,r.rowMode,r.rowHeight)}})}}).reflow().performance();n.mdOnLayout({$event:{performance:s}}),I=r}}function g(e){return x+e+k}function m(e,t,n,i,o,r,a){var s=1/n*100,l=(n-1)/n,c=A({share:s,gutterShare:l,gutter:o}),d={left:M({unit:c,offset:e.col,gutter:o}),width:_({unit:c,span:t.col,gutter:o}),paddingTop:"",marginTop:"",top:"",height:""};switch(r){case"fixed":d.top=M({unit:a,offset:e.row,gutter:o}),d.height=_({unit:a,span:t.row,gutter:o});break;case"ratio":var u=s/a,p=A({share:u,gutterShare:l,gutter:o});d.paddingTop=_({unit:p,span:t.row,gutter:o}),d.marginTop=M({unit:p,offset:e.row,gutter:o});break;case"fit":var g=(i-1)/i,u=1/i*100,p=A({share:u,gutterShare:g,gutter:o});d.top=M({unit:p,offset:e.row,gutter:o}),d.height=_({unit:p,span:t.row,gutter:o})}return d}function f(e,t,n,i,o){var r={};switch(i){case"fixed":r.height=_({unit:o,span:t,gutter:n}),r.paddingBottom="";break;case"ratio":var a=1===e?0:(e-1)/e,s=1/e*100,l=s*(1/o),c=A({share:l,gutterShare:a,gutter:n});r.height="",r.paddingBottom=_({unit:c,span:t,gutter:n})}return r}function h(){return[].filter.call(a.children(),function(e){return"MD-GRID-TILE"==e.tagName&&!e.$$mdDestroyed})}function v(e){return[].map.call(e,function(e){var n=t.element(e).controller("mdGridTile");return{row:parseInt(r.getResponsiveAttribute(n.$attrs,"md-rowspan"),10)||1,col:parseInt(r.getResponsiveAttribute(n.$attrs,"md-colspan"),10)||1}})}function y(){var e=parseInt(r.getResponsiveAttribute(s,"md-cols"),10);if(isNaN(e))throw"md-grid-list: md-cols attribute was not found, or contained a non-numeric value";return e}function b(){return T(r.getResponsiveAttribute(s,"md-gutter")||1)}function w(){var e=r.getResponsiveAttribute(s,"md-row-height");if(!e)throw"md-grid-list: md-row-height attribute was not found";switch(C()){case"fixed":return T(e);case"ratio":var t=e.split(":");return parseFloat(t[0])/parseFloat(t[1]);case"fit":return 0}}function C(){var e=r.getResponsiveAttribute(s,"md-row-height");if(!e)throw"md-grid-list: md-row-height attribute was not found";return"fit"==e?"fit":-1!==e.indexOf(":")?"ratio":"fixed"}function T(e){return/\D$/.test(e)?e:e+"px"}a.attr("role","list"),l.layoutDelegate=p;var S=t.bind(l,l.invalidateLayout),E=c();n.$on("$destroy",d);var I,x=e.startSymbol(),k=e.endSymbol(),A=e(g("share")+"% - ("+g("gutter")+" * "+g("gutterShare")+")"),M=e("calc(("+g("unit")+" + "+g("gutter")+") * "+g("offset")+")"),_=e("calc(("+g("unit")+") * "+g("span")+" + ("+g("span")+" - 1) * "+g("gutter")+")")}return{restrict:"E",controller:n,scope:{mdOnLayout:"&"},link:a}}function n(e){this.layoutInvalidated=!1,this.tilesInvalidated=!1,this.$timeout_=e.nextTick,this.layoutDelegate=t.noop}function i(e){function n(t,n){var i,a,s,l,c,d;return l=e.time(function(){a=o(t,n)}),i={layoutInfo:function(){return a},map:function(t){return c=e.time(function(){var e=i.layoutInfo();s=t(e.positioning,e.rowCount)}),i},reflow:function(t){return d=e.time(function(){(t||r)(s.grid,s.tiles)}),i},performance:function(){return{tileCount:n.length,layoutTime:l,mapTime:c,reflowTime:d,totalTime:l+c+d}}}}function i(e,t){e.element.css(e.style),t.forEach(function(e){e.element.css(e.style)})}function o(e,t){function n(t,n){if(t.col>e)throw"md-grid-list: Tile at position "+n+" has a colspan ("+t.col+") that exceeds the column count ("+e+")";for(var a=0,d=0;d-a<t.col;)s>=e?i():(a=c.indexOf(0,s),-1!==a&&-1!==(d=r(a+1))?s=d+1:(a=d=0,i()));return o(a,t.col,t.row),s=a+t.col,{col:a,row:l}}function i(){s=0,l++,o(0,e,-1)}function o(e,t,n){for(var i=e;e+t>i;i++)c[i]=Math.max(c[i]+n,0)}function r(e){var t;for(t=e;t<c.length;t++)if(0!==c[t])return t;return t===c.length?t:void 0}function a(){for(var t=[],n=0;e>n;n++)t.push(0);return t}var s=0,l=0,c=a();return{positioning:t.map(function(e,t){return{spans:e,position:n(e,t)}}),rowCount:l+Math.max.apply(Math,c)}}var r=i;return n.animateWith=function(e){r=t.isFunction(e)?e:i},n}function o(e){function n(n,i,o,r){i.attr("role","listitem");var a=e.watchResponsiveAttributes(["md-colspan","md-rowspan"],o,t.bind(r,r.invalidateLayout));r.invalidateTiles(),n.$on("$destroy",function(){i[0].$$mdDestroyed=!0,a(),r.invalidateLayout()}),t.isDefined(n.$parent.$index)&&n.$watch(function(){return n.$parent.$index},function(e,t){e!==t&&r.invalidateTiles()})}return{restrict:"E",require:"^mdGridList",template:"<figure ng-transclude></figure>",transclude:!0,scope:{},controller:["$attrs",function(e){this.$attrs=e}],link:n}}function r(){return{template:"<figcaption ng-transclude></figcaption>",transclude:!0}}t.module("material.components.gridList",["material.core"]).directive("mdGridList",e).directive("mdGridTile",o).directive("mdGridTileFooter",r).directive("mdGridTileHeader",r).factory("$mdGridLayout",i),e.$inject=["$interpolate","$mdConstant","$mdGridLayout","$mdMedia"],n.$inject=["$mdUtil"],n.prototype={invalidateTiles:function(){this.tilesInvalidated=!0,this.invalidateLayout()},invalidateLayout:function(){this.layoutInvalidated||(this.layoutInvalidated=!0,this.$timeout_(t.bind(this,this.layout)))},layout:function(){try{this.layoutDelegate(this.tilesInvalidated)}finally{this.layoutInvalidated=!1,this.tilesInvalidated=!1}}},i.$inject=["$mdUtil"],o.$inject=["$mdMedia"]}(),function(){!function(){function e(){return{restrict:"E",require:["^?mdFabSpeedDial","^?mdFabToolbar"]}}t.module("material.components.fabTrigger",["material.core"]).directive("mdFabTrigger",e)}()}(),function(){t.module("material.components.icon",["material.core"])}(),function(){function n(e,t){function n(t,n){e(n);var i=n[0].querySelector(r),o=n[0].querySelector(a);i&&n.addClass("md-icon-left"),o&&n.addClass("md-icon-right")}function i(e,n,i,o){var r=this;r.isErrorGetter=i.mdIsError&&t(i.mdIsError),r.delegateClick=function(){r.input.focus()},r.element=n,r.setFocused=function(e){n.toggleClass("md-input-focused",!!e)},r.setHasValue=function(e){n.toggleClass("md-input-has-value",!!e)},r.setHasPlaceholder=function(e){n.toggleClass("md-input-has-placeholder",!!e)},r.setInvalid=function(e){e?o.addClass(n,"md-input-invalid"):o.removeClass(n,"md-input-invalid")},e.$watch(function(){return r.label&&r.input},function(e){e&&!r.label.attr("for")&&r.label.attr("for",r.input.attr("id"))})}var o=["INPUT","TEXTAREA","SELECT","MD-SELECT"],r=o.reduce(function(e,t){return e.concat(["md-icon ~ "+t,".md-icon ~ "+t])},[]).join(","),a=o.reduce(function(e,t){return e.concat([t+" ~ md-icon",t+" ~ .md-icon"])},[]).join(",");return i.$inject=["$scope","$element","$attrs","$animate"],{restrict:"E",link:n,controller:i}}function i(){return{restrict:"E",require:"^?mdInputContainer",link:function(e,t,n,i){!i||n.mdNoFloat||t.hasClass("_md-container-ignore")||(i.label=t,e.$on("$destroy",function(){i.label=null}))}}}function o(e,n,i,o){function r(r,a,s,l){function c(e){return g.setHasValue(!f.$isEmpty(e)),e}function d(){g.label&&s.$observe("required",function(e){g.label.toggleClass("md-required",e&&!v)})}function u(){g.setHasValue(a.val().length>0||(a[0].validity||{}).badInput)}function p(){function i(){if(a.addClass("md-no-flex").attr("rows",1),u){p||(g.style.minHeight=0,p=a.prop("clientHeight"),g.style.minHeight=null);var e=Math.round(Math.round(l()/p)),t=Math.min(e,u);a.css("height",p*t+"px").attr("rows",t).toggleClass("_md-textarea-scrollable",e>=u)}else{a.css("height","auto"),g.scrollTop=0;var n=l();n&&a.css("height",n+"px")}a.removeClass("md-no-flex")}function l(){var e=g.offsetHeight,t=g.scrollHeight-e;return e+(t>0?t:0)}function c(e){g.scrollTop=0;var t=g.scrollHeight-g.offsetHeight,n=g.offsetHeight+t;g.style.height=n+"px"}function d(e){return i(),e}if(!s.hasOwnProperty("mdNoAutogrow")){var u=s.hasOwnProperty("rows")?parseInt(s.rows):NaN,p=null,g=a[0];if(o(function(){e.nextTick(i)},10,!1),m?(f.$formatters.unshift(d),f.$parsers.unshift(d)):a.on("input",i),u||a.attr("rows",1).on("scroll",c),t.element(n).on("resize",i),r.$on("$destroy",function(){t.element(n).off("resize",i)}),s.hasOwnProperty("mdDetectHidden")){var h=function(){var e=!1;return function(){var t=0===g.offsetHeight;!1===t&&!0===e&&i(),e=t}}();r.$watch(function(){return e.nextTick(h,!1),!0})}}}var g=l[0],m=!!l[1],f=l[1]||e.fakeNgModel(),h=t.isDefined(s.readonly),v=e.parseAttributeBoolean(s.mdNoAsterisk);if(g){if("hidden"===s.type)return void a.attr("aria-hidden","true");if(g.input)throw new Error("<md-input-container> can only have *one* <input>, <textarea> or <md-select> child element!");g.input=a,d();var y=t.element('<div class="md-errors-spacer">');a.after(y),g.label||i.expect(a,"aria-label",a.attr("placeholder")),a.addClass("md-input"),a.attr("id")||a.attr("id","input_"+e.nextUid()),"textarea"===a[0].tagName.toLowerCase()&&p(),m||u();var b=g.isErrorGetter||function(){return f.$invalid&&(f.$touched||w())},w=function(){var n=e.getClosest(a,"form"),i=n?t.element(n).controller("form"):null;return!!i&&i.$submitted};r.$watch(b,g.setInvalid),f.$parsers.push(c),f.$formatters.push(c),a.on("input",u),h||a.on("focus",function(t){e.nextTick(function(){g.setFocused(!0)})}).on("blur",function(t){e.nextTick(function(){g.setFocused(!1),u()})}),r.$on("$destroy",function(){g.setFocused(!1),g.setHasValue(!1),g.input=null})}}return{restrict:"E",require:["^?mdInputContainer","?ngModel"],link:r}}function r(e,n){function i(i,o,r,a){function s(e){return c.parent?(c.text(String(o.val()||e||"").length+"/"+l),e):e}var l,c,d,u=a[0],p=a[1];n.nextTick(function(){d=t.element(p.element[0].querySelector(".md-errors-spacer")),c=t.element('<div class="md-char-counter">'),d.append(c),r.$set("ngTrim","false"),u.$formatters.push(s),u.$viewChangeListeners.push(s),o.on("input keydown keyup",function(){s()}),i.$watch(r.mdMaxlength,function(n){l=n,t.isNumber(n)&&n>0?(c.parent().length||e.enter(c,d),s()):e.leave(c)}),u.$validators["md-maxlength"]=function(e,n){return!t.isNumber(l)||0>l||(e||o.val()||n||"").length<=l}})}return{restrict:"A",require:["ngModel","^mdInputContainer"],link:i}}function a(e){function n(e,n,i,o){if(o){var r=o.element.find("label"),a=t.isDefined(o.element.attr("md-no-float"));if(r&&r.length||a)return void o.setHasPlaceholder(!0);var s=i.placeholder;if(n.removeAttr("placeholder"),o.input&&"MD-SELECT"!=o.input[0].nodeName){var l='<label ng-click="delegateClick()">'+s+"</label>";o.element.addClass("md-icon-float"),o.element.prepend(l)}}}return{restrict:"A",require:"^^?mdInputContainer",priority:200,link:n}}function s(e){function t(t,n,i){function o(){a=!0,e(function(){n[0].select(),a=!1},1,!1)}function r(e){a&&e.preventDefault()}if("INPUT"===n[0].nodeName||"TEXTAREA"===n[0].nodeName){var a=!1;n.on("focus",o).on("mouseup",r),t.$on("$destroy",function(){n.off("focus",o).off("mouseup",r)})}}return{restrict:"A",link:t}}function l(){function e(e,n,i,o){o&&(n.toggleClass("md-input-messages-animation",!0),n.toggleClass("md-auto-hide",!0),("false"==i.mdAutoHide||t(i))&&n.toggleClass("md-auto-hide",!1))}function t(e){return b.some(function(t){return e[t]})}return{restrict:"EA",link:e,require:"^^?mdInputContainer"}}function c(e){function t(t){if(e.getClosest(t,"md-input-container"))return t.toggleClass("md-input-message-animation",!0),{}}return{restrict:"EA",compile:t,priority:100}}function d(e,t){return{addClass:function(n,i,o){var r=y(n);"md-input-invalid"==i&&r.hasClass("md-auto-hide")?g(n,t,e).finally(o):o()}}}function u(e,t){return{enter:function(n,i){g(n,t,e).finally(i)},leave:function(n,i){m(n,t,e).finally(i)},addClass:function(n,i,o){"ng-hide"==i?m(n,t,e).finally(o):o()},removeClass:function(n,i,o){"ng-hide"==i?g(n,t,e).finally(o):o()}}}function p(e){return{enter:function(t,n){return y(t).hasClass("md-auto-hide")?void n():f(t,e)},leave:function(t,n){return h(t,e)}}}function g(e,n,i){var o,r=[],a=y(e);return t.forEach(a.children(),function(e){o=f(t.element(e),n),r.push(o.start())}),i.all(r)}function m(e,n,i){var o,r=[],a=y(e);return t.forEach(a.children(),function(e){o=h(t.element(e),n),r.push(o.start())}),i.all(r)}function f(e,t){return t(e,{event:"enter",structural:!0,from:{opacity:0,"margin-top":-e[0].offsetHeight+"px"},to:{opacity:1,"margin-top":"0"},duration:.3})}function h(t,n){var i=t[0].offsetHeight;return 0==e.getComputedStyle(t[0]).opacity?n(t,{}):n(t,{event:"leave",structural:!0,from:{opacity:1,"margin-top":0},to:{opacity:0,"margin-top":-i+"px"},duration:.3})}function v(e){return e.controller("mdInputContainer").element}function y(e){var n=v(e);return t.element(n[0].querySelector(".md-input-messages-animation"))}t.module("material.components.input",["material.core"]).directive("mdInputContainer",n).directive("label",i).directive("input",o).directive("textarea",o).directive("mdMaxlength",r).directive("placeholder",a).directive("ngMessages",l).directive("ngMessage",c).directive("ngMessageExp",c).directive("mdSelectOnFocus",s).animation(".md-input-invalid",d).animation(".md-input-messages-animation",u).animation(".md-input-message-animation",p),n.$inject=["$mdTheming","$parse"],o.$inject=["$mdUtil","$window","$mdAria","$timeout"],r.$inject=["$animate","$mdUtil"],a.$inject=["$log"],s.$inject=["$timeout"];var b=["ngIf","ngShow","ngHide","ngSwitchWhen","ngSwitchDefault"];c.$inject=["$mdUtil"],d.$inject=["$q","$animateCss"],u.$inject=["$q","$animateCss"],p.$inject=["$animateCss"]}(),function(){function e(e){return{restrict:"E",compile:function(t){return t[0].setAttribute("role","list"),e}}}function n(e,n,i,o){var r=["md-checkbox","md-switch"];return{restrict:"E",controller:"MdListController",compile:function(a,s){function l(){for(var e,t,n=["md-switch","md-checkbox"],i=0;t=n[i];++i)if((e=a.find(t)[0])&&!e.hasAttribute("aria-label")){var o=a.find("p")[0];if(!o)return;e.setAttribute("aria-label","Toggle "+o.textContent)}}function c(e){if("div"==e)b=t.element('<div class="_md-no-style _md-list-item-inner">'),b.append(a.contents()),a.addClass("_md-proxy-focus");else{b=t.element('<div class="md-button _md-no-style">   <div class="_md-list-item-inner"></div></div>');var n=t.element('<md-button class="_md-no-style" md-no-focus-style></md-button>');n[0].setAttribute("aria-label",a[0].textContent),p(a[0],n[0]),b.prepend(n),b.children().eq(1).append(a.contents()),a.addClass("_md-button-wrap")}a[0].setAttribute("tabindex","-1"),a.append(b)}function d(){var e=t.element('<div class="_md-secondary-container">');t.forEach(y,function(t){u(t,e)});var n=t.element('<div class="flex"></div>');b.append(n),b.append(e)}function u(n,i){if(n&&!m(n)&&n.hasAttribute("ng-click")){e.expect(n,"aria-label");var o=t.element('<md-button class="md-secondary md-icon-button">');p(n,o[0]),n.setAttribute("tabindex","-1"),o.append(n),n=o[0]}n&&(!f(n)||!s.ngClick&&g(n))&&t.element(n).removeClass("md-secondary"),a.addClass("md-with-secondary"),i.append(n)}function p(e,n){var i=["ng-if","ng-click","aria-label","ng-disabled","ui-sref","href","ng-href","ng-attr-ui-sref","ui-sref-opts"];t.forEach(i,function(t){e.hasAttribute(t)&&(n.setAttribute(t,e.getAttribute(t)),e.removeAttribute(t))})}function g(e){return-1!=r.indexOf(e.nodeName.toLowerCase())}function m(e){var t=e.nodeName.toUpperCase();return"MD-BUTTON"==t||"BUTTON"==t}function f(e){for(var t=e.attributes,n=0;n<t.length;n++)if("ngClick"===s.$normalize(t[n].name))return!0;return!1}function h(e,a,s,l){function c(){p&&p.children&&!h&&t.forEach(r,function(e){t.forEach(p.querySelectorAll(e+":not(.md-secondary)"),function(e){u.push(e)})})}function d(){(1==u.length||h)&&(a.addClass("md-clickable"),h||l.attachRipple(e,t.element(a[0].querySelector("._md-no-style"))))}var u=[],p=a[0].firstElementChild,g=a.hasClass("_md-button-wrap"),m=g?p.firstElementChild:p,h=m&&f(m);c(),d(),a.hasClass("_md-proxy-focus")&&u.length&&t.forEach(u,function(n){n=t.element(n),e.mouseActive=!1,n.on("mousedown",function(){e.mouseActive=!0,o(function(){e.mouseActive=!1},100)}).on("focus",function(){!1===e.mouseActive&&a.addClass("md-focused"),n.on("blur",function e(){a.removeClass("md-focused"),n.off("blur",e)})})});var v=function(e){if("INPUT"!=e.target.nodeName&&"TEXTAREA"!=e.target.nodeName&&!e.target.isContentEditable){(e.which||e.keyCode)==n.KEY_CODE.SPACE&&m&&(m.click(),e.preventDefault(),e.stopPropagation())}};h||u.length||m&&m.addEventListener("keypress",v),a.off("click"),a.off("keypress"),1==u.length&&m&&a.children().eq(0).on("click",function(e){!i.getClosest(e.target,"BUTTON")&&m.contains(e.target)&&t.forEach(u,function(n){e.target===n||n.contains(e.target)||t.element(n).triggerHandler("click")})}),e.$on("$destroy",function(){m&&m.removeEventListener("keypress",v)})}var v,y=a[0].querySelectorAll(".md-secondary"),b=a;if(a[0].setAttribute("role","listitem"),s.ngClick||s.ngHref||s.href||s.uiSref||s.ngAttrUiSref)c("button");else{for(var w,C=0;w=r[C];++C)if(a[0].querySelector(w)){v=!0;break}v?c("div"):a[0].querySelector("md-button:not(.md-secondary):not(.md-exclude)")||a.addClass("_md-no-proxy")}return d(),l(),h}}}function i(e,t,n){function i(e,t){var i={};n.attach(e,t,i)}this.attachRipple=i}t.module("material.components.list",["material.core"]).controller("MdListController",i).directive("mdList",e).directive("mdListItem",n),e.$inject=["$mdTheming"],n.$inject=["$mdAria","$mdConstant","$mdUtil","$timeout"],i.$inject=["$scope","$element","$mdListInkRipple"]}(),function(){t.module("material.components.menuBar",["material.core","material.components.menu"])}(),function(){t.module("material.components.menu",["material.core","material.components.backdrop"])}(),function(){t.module("material.components.progressCircular",["material.core"])}(),function(){function e(e,n,i){function o(e,t,n){return e.attr("aria-valuemin",0),e.attr("aria-valuemax",100),e.attr("role","progressbar"),r}function r(o,r,u){function p(){u.$observe("value",function(e){var t=a(e);r.attr("aria-valuenow",t),m()!=d&&f(b,t)}),u.$observe("mdBufferValue",function(e){f(y,a(e))}),u.$observe("mdMode",function(e){switch(h&&w.removeClass(h),e){case d:case c:case s:case l:w.addClass(h="_md-mode-"+e);break;default:w.addClass(h="_md-mode-"+l)}})}function g(){if(t.isUndefined(u.mdMode)){var e=t.isDefined(u.value),o=e?s:l;i.debug(n.supplant("Auto-adding the missing md-mode='{0}' to the ProgressLinear element",[o])),r.attr("md-mode",o),u.mdMode=o}}function m(){var e=(u.mdMode||"").trim();if(e)switch(e){case s:case l:case c:case d:break;default:e=l}return e}function f(e,i){if(m()){var o=n.supplant("translateX({0}%) scale({1},1)",[(i-100)/2,i/100]),r=v({transform:o});t.element(e).css(r)}}e(r);var h,v=n.dom.animator.toCss,y=t.element(r[0].querySelector("._md-bar1")),b=t.element(r[0].querySelector("._md-bar2")),w=t.element(r[0].querySelector("._md-container"));r.attr("md-mode",m()),g(),p()}function a(e){return Math.max(0,Math.min(e||0,100))}var s="determinate",l="indeterminate",c="buffer",d="query";return{restrict:"E",template:'<div class="_md-container"><div class="_md-dashed"></div><div class="_md-bar _md-bar1"></div><div class="_md-bar _md-bar2"></div></div>',compile:o}}t.module("material.components.progressLinear",["material.core"]).directive("mdProgressLinear",e),e.$inject=["$mdTheming","$mdUtil","$log"]}(),function(){function e(e,n,i,o){function r(r,a,s,l){function c(){a.hasClass("md-focused")||a.addClass("md-focused")}function d(i){var o=i.which||i.keyCode;if(o==n.KEY_CODE.ENTER||i.currentTarget==i.target)switch(o){case n.KEY_CODE.LEFT_ARROW:case n.KEY_CODE.UP_ARROW:i.preventDefault(),u.selectPrevious(),c();break;case n.KEY_CODE.RIGHT_ARROW:case n.KEY_CODE.DOWN_ARROW:i.preventDefault(),u.selectNext(),c();break;case n.KEY_CODE.ENTER:var r=t.element(e.getClosest(a[0],"form"));r.length>0&&r.triggerHandler("submit")}}i(a);var u=l[0],p=l[1]||e.fakeNgModel();u.init(p),r.mouseActive=!1,a.attr({role:"radiogroup",tabIndex:a.attr("tabindex")||"0"}).on("keydown",d).on("mousedown",function(e){r.mouseActive=!0,o(function(){r.mouseActive=!1},100)}).on("focus",function(){!1===r.mouseActive&&u.$element.addClass("md-focused")}).on("blur",function(){u.$element.removeClass("md-focused")})}function a(e){this._radioButtonRenderFns=[],this.$element=e}function s(){return{init:function(e){this._ngModelCtrl=e,this._ngModelCtrl.$render=t.bind(this,this.render)},add:function(e){this._radioButtonRenderFns.push(e)},remove:function(e){var t=this._radioButtonRenderFns.indexOf(e);-1!==t&&this._radioButtonRenderFns.splice(t,1)},render:function(){this._radioButtonRenderFns.forEach(function(e){e()})},setViewValue:function(e,t){this._ngModelCtrl.$setViewValue(e,t),this.render()},getViewValue:function(){return this._ngModelCtrl.$viewValue},selectNext:function(){return l(this.$element,1)},selectPrevious:function(){return l(this.$element,-1)},setActiveDescendant:function(e){this.$element.attr("aria-activedescendant",e)}}}function l(n,i){var o=e.iterator(n[0].querySelectorAll("md-radio-button"),!0);if(o.count()){var r=function(e){return!t.element(e).attr("disabled")},a=n[0].querySelector("md-radio-button.md-checked"),s=o[0>i?"previous":"next"](a,r)||o.first();t.element(s).triggerHandler("click")}}return a.prototype=s(),{restrict:"E",controller:["$element",a],require:["mdRadioGroup","?ngModel"],link:{pre:r}}}function n(e,t,n){function i(i,r,a,s){function l(e){if(!s)throw"RadioGroupController not found.";s.add(d),a.$observe("value",d),r.on("click",c).on("$destroy",function(){s.remove(d)})}function c(e){r[0].hasAttribute("disabled")||i.$apply(function(){s.setViewValue(a.value,e&&e.type)})}function d(){function e(e){"MD-RADIO-GROUP"!=r.parent()[0].nodeName&&r.parent()[e?"addClass":"removeClass"](o)}var t=s.getViewValue()==a.value;t!==p&&(p=t,r.attr("aria-checked",t),t?(e(!0),r.addClass(o),s.setActiveDescendant(r.attr("id"))):(e(!1),r.removeClass(o)))}function u(n,i){function o(){return a.id||"radio_"+t.nextUid()}i.ariaId=o(),n.attr({id:i.ariaId,role:"radio","aria-checked":"false"}),e.expectWithText(n,"aria-label")}var p;n(r),u(r,i),l()}var o="md-checked";return{restrict:"E",require:"^mdRadioGroup",transclude:!0,template:'<div class="_md-container" md-ink-ripple md-ink-ripple-checkbox><div class="_md-off"></div><div class="_md-on"></div></div><div ng-transclude class="_md-label"></div>',link:i}}t.module("material.components.radioButton",["material.core"]).directive("mdRadioGroup",e).directive("mdRadioButton",n),e.$inject=["$mdUtil","$mdConstant","$mdTheming","$timeout"],n.$inject=["$mdAria","$mdUtil","$mdTheming"]}(),function(){function e(e,i,o,r,a,s){function l(a,l){var c=t.element("<md-select-value><span></span></md-select-value>");if(c.append('<span class="_md-select-icon" aria-hidden="true"></span>'),c.addClass("_md-select-value"),c[0].hasAttribute("id")||c.attr("id","select_value_label_"+i.nextUid()),a.find("md-content").length||a.append(t.element("<md-content>").append(a.contents())),l.mdOnOpen&&(a.find("md-content").prepend(t.element('<div> <md-progress-circular md-mode="{{progressMode}}" ng-hide="$$loadingAsyncDone" md-diameter="25px"></md-progress-circular></div>')),a.find("md-option").attr("ng-show","$$loadingAsyncDone")),l.name){var d=t.element('<select class="_md-visually-hidden">');d.attr({name:"."+l.name,"ng-model":l.ngModel,"aria-hidden":"true",tabindex:"-1"});var u=a.find("md-option");t.forEach(u,function(e){var n=t.element("<option>"+e.innerHTML+"</option>");e.hasAttribute("ng-value")?n.attr("ng-value",e.getAttribute("ng-value")):e.hasAttribute("value")&&n.attr("value",e.getAttribute("value")),d.append(n)}),a.parent().append(d)}var p=i.parseAttributeBoolean(l.multiple),g=p?"multiple":"",m='<div class="_md-select-menu-container" aria-hidden="true"><md-select-menu {0}>{1}</md-select-menu></div>';return m=i.supplant(m,[g,a.html()]),a.empty().append(c),a.append(m),l.tabindex||l.$set("tabindex",0),function(a,l,c,d){function u(){var e=l.attr("aria-label")||l.attr("placeholder");!e&&T&&T.label&&(e=T.label.text()),w=e,r.expect(l,"aria-label",e)}function g(){M&&(D=D||M.find("md-select-menu").controller("mdSelectMenu"),S.setLabelText(D.selectedLabels()))}function m(){if(w){var e=D.selectedLabels({mode:"aria"});l.attr("aria-label",e.length?w+": "+e:w)}}function f(){T&&T.setHasValue(D.selectedLabels().length>0||(l[0].validity||{}).badInput)}function h(){if(M=t.element(l[0].querySelector("._md-select-menu-container")),_=a,c.mdContainerClass){var e=M[0].getAttribute("class")+" "+c.mdContainerClass;M[0].setAttribute("class",e)}D=M.find("md-select-menu").controller("mdSelectMenu"),D.init(E,c.ngModel),l.on("$destroy",function(){M.remove()})}function v(e){if(-1!=[32,13,38,40].indexOf(e.keyCode))e.preventDefault(),y(e);else if(e.keyCode<=90&&e.keyCode>=31){e.preventDefault();var n=D.optNodeForKeyboardSearch(e);if(!n)return;var i=t.element(n).controller("mdOption");D.isMultiple||D.deselect(Object.keys(D.selected)[0]),D.select(i.hashKey,i.value),D.refreshViewValue()}}function y(){_.isOpen=!0,l.attr("aria-expanded","true"),e.show({scope:_,preserveScope:!0,skipCompile:!0,element:M,target:l[0],selectCtrl:S,preserveElement:!0,hasBackdrop:!0,loadingAsync:!!c.mdOnOpen&&(a.$eval(c.mdOnOpen)||!0)}).finally(function(){_.isOpen=!1,l.focus(),l.attr("aria-expanded","false"),E.$setTouched()})}var b,w,C=!0,T=d[0],S=d[1],E=d[2],I=d[3],x=l.find("md-select-value"),k=t.isDefined(c.readonly);if(T){var A=T.isErrorGetter||function(){return E.$invalid&&E.$touched};if(T.input)throw new Error("<md-input-container> can only have *one* child <input>, <textarea> or <select> element!");T.input=l,T.label||r.expect(l,"aria-label",l.attr("placeholder")),a.$watch(A,T.setInvalid)}var M,_,D;if(h(),o(l),c.name&&I){var $=l.parent()[0].querySelector('select[name=".'+c.name+'"]');i.nextTick(function(){var e=t.element($).controller("ngModel");e&&I.$removeControl(e)})}I&&t.isDefined(c.multiple)&&i.nextTick(function(){(E.$modelValue||E.$viewValue)&&I.$setPristine()});var O=E.$render;E.$render=function(){O(),g(),m(),f()},c.$observe("placeholder",E.$render),S.setLabelText=function(e){if(S.setIsPlaceholder(!e),c.mdSelectedText)e=s(c.mdSelectedText)(a);else{var t=c.placeholder||(T&&T.label?T.label.text():"");e=e||t||""}x.children().eq(0).html(e)},S.setIsPlaceholder=function(e){e?(x.addClass("_md-select-placeholder"),T&&T.label&&T.label.addClass("_md-placeholder")):(x.removeClass("_md-select-placeholder"),T&&T.label&&T.label.removeClass("_md-placeholder"))},k||(l.on("focus",function(e){T&&T.element.hasClass("md-input-has-value")&&T.setFocused(!0)}),l.on("blur",function(e){C&&(C=!1,_.isOpen&&e.stopImmediatePropagation()),_.isOpen||(T&&T.setFocused(!1),f())})),S.triggerClose=function(){s(c.mdOnClose)(a)},a.$$postDigest(function(){u(),g(),m()}),a.$watch(D.selectedLabels,g);var P;c.$observe("ngMultiple",function(e){P&&P();var t=s(e);P=a.$watch(function(){return t(a)},function(e,t){e===n&&t===n||(e?l.attr("multiple","multiple"):l.removeAttr("multiple"),l.attr("aria-multiselectable",e?"true":"false"),M&&(D.setMultiple(e),O=E.$render,E.$render=function(){O(),g(),m(),f()},E.$render()))})}),c.$observe("disabled",function(e){t.isString(e)&&(e=!0),b!==n&&b===e||(b=e,e?l.attr({"aria-disabled":"true"}).removeAttr("tabindex").off("click",y).off("keydown",v):l.attr({tabindex:c.tabindex,"aria-disabled":"false"}).on("click",y).on("keydown",v))}),c.hasOwnProperty("disabled")||c.hasOwnProperty("ngDisabled")||(l.attr({"aria-disabled":"false"}),l.on("click",y),l.on("keydown",v));var N={role:"listbox","aria-expanded":"false","aria-multiselectable":p&&!c.ngMultiple?"true":"false"};l[0].hasAttribute("id")||(N.id="select_"+i.nextUid());var F="select_container_"+i.nextUid();M.attr("id",F),N["aria-owns"]=F,l.attr(N),a.$on("$destroy",function(){e.destroy().finally(function(){T&&(T.setFocused(!1),T.setHasValue(!1),T.input=null),E.$setTouched()})})}}return{restrict:"E",require:["^?mdInputContainer","mdSelect","ngModel","?^form"],compile:l,controller:function(){}}}function i(e,i,o){function r(e,n,r,a){function s(e){13!=e.keyCode&&32!=e.keyCode||l(e)}function l(n){var o=i.getClosest(n.target,"md-option"),r=o&&t.element(o).data("$mdOptionController");if(o&&r){if(o.hasAttribute("disabled"))return n.stopImmediatePropagation(),!1;var a=c.hashGetter(r.value),s=t.isDefined(c.selected[a]);e.$apply(function(){c.isMultiple?s?c.deselect(a):c.select(a,r.value):s||(c.deselect(Object.keys(c.selected)[0]),c.select(a,r.value)),c.refreshViewValue()})}}var c=a[0];o(n),n.on("click",l),n.on("keypress",s)}function a(o,r,a){function s(){var e=d.ngModel.$modelValue||d.ngModel.$viewValue||[];if(t.isArray(e)){var n=Object.keys(d.selected),i=e.map(d.hashGetter);n.filter(function(e){return-1===i.indexOf(e)}).forEach(d.deselect),i.forEach(function(t,n){d.select(t,e[n])})}}function c(){var e=d.ngModel.$viewValue||d.ngModel.$modelValue;Object.keys(d.selected).forEach(d.deselect),d.select(d.hashGetter(e),e)}var d=this;d.isMultiple=t.isDefined(r.multiple),d.selected={},d.options={},o.$watchCollection(function(){return d.options},function(){d.ngModel.$render()});var u,p;d.setMultiple=function(e){function n(e,n){return t.isArray(e||n||[])}var i=d.ngModel;p=p||i.$isEmpty,d.isMultiple=e,u&&u(),d.isMultiple?(i.$validators["md-multiple"]=n,i.$render=s,o.$watchCollection(d.modelBinding,function(e){n(e)&&s(e),d.ngModel.$setPristine()}),i.$isEmpty=function(e){return!e||0===e.length}):(delete i.$validators["md-multiple"],i.$render=c)};var g,m,f,h="";d.optNodeForKeyboardSearch=function(e){g&&clearTimeout(g),g=setTimeout(function(){g=n,h="",f=n,m=n},300),h+=String.fromCharCode(e.keyCode);var i=new RegExp("^"+h,"i");m||(m=a.find("md-option"),f=new Array(m.length),t.forEach(m,function(e,t){f[t]=e.textContent.trim()}));for(var o=0;o<f.length;++o)if(i.test(f[o]))return m[o]},d.init=function(n,i){if(d.ngModel=n,d.modelBinding=i,n.$options&&n.$options.trackBy){var r={},a=e(n.$options.trackBy);d.hashGetter=function(e,t){return r.$value=e,a(t||o,r)}}else d.hashGetter=function(e){return t.isObject(e)?"object_"+(e.$$mdSelectId||(e.$$mdSelectId=++l)):e};d.setMultiple(d.isMultiple)},d.selectedLabels=function(e){e=e||{};var t=e.mode||"html",n=i.nodesToArray(a[0].querySelectorAll("md-option[selected]"));if(n.length){var o;return"html"==t?o=function(e){var t=e.innerHTML,n=e.querySelector(".md-ripple-container");return n?t.replace(n.outerHTML,""):t}:"aria"==t&&(o=function(e){return e.hasAttribute("aria-label")?e.getAttribute("aria-label"):e.textContent}),n.map(o).join(", ")}return""},d.select=function(e,t){var n=d.options[e];n&&n.setSelected(!0),d.selected[e]=t},d.deselect=function(e){var t=d.options[e];t&&t.setSelected(!1),delete d.selected[e]},d.addOption=function(e,n){if(t.isDefined(d.options[e]))throw new Error('Duplicate md-option values are not allowed in a select. Duplicate value "'+n.value+'" found.');d.options[e]=n,t.isDefined(d.selected[e])&&(d.select(e,n.value),d.refreshViewValue())},d.removeOption=function(e){delete d.options[e]},d.refreshViewValue=function(){var e,n=[];for(var i in d.selected)(e=d.options[i])?n.push(e.value):n.push(d.selected[i]);var o=d.ngModel.$options&&d.ngModel.$options.trackBy,r=d.isMultiple?n:n[0],a=d.ngModel.$modelValue;(o?t.equals(a,r):a==r)||(d.ngModel.$setViewValue(r),d.ngModel.$render())}}return a.$inject=["$scope","$attrs","$element"],{restrict:"E",require:["mdSelectMenu"],scope:!0,controller:a,link:{pre:r}}}function o(e,n){function i(e,n){return e.append(t.element('<div class="_md-text">').append(e.contents())),e.attr("tabindex",n.tabindex||"0"),o}function o(i,o,r,a){function s(e,t,n){if(!u.hashGetter)return void(n||i.$$postDigest(function(){s(e,t,!0)}));var o=u.hashGetter(t,i),r=u.hashGetter(e,i);d.hashKey=r,d.value=e,u.removeOption(o,d),u.addOption(r,d)}function l(){var e={role:"option","aria-selected":"false"};o[0].hasAttribute("id")||(e.id="select_option_"+n.nextUid()),o.attr(e)}var d=a[0],u=a[1];u.isMultiple&&(o.attr("md-checkbox-enabled",""),o.prepend(c.clone())),t.isDefined(r.ngValue)?i.$watch(r.ngValue,s):t.isDefined(r.value)?s(r.value):i.$watch(function(){return o.text().trim()},s),r.$observe("disabled",function(e){e?o.attr("tabindex","-1"):o.attr("tabindex","0")}),i.$$postDigest(function(){r.$observe("selected",function(e){t.isDefined(e)&&("string"==typeof e&&(e=!0),e?(u.isMultiple||u.deselect(Object.keys(u.selected)[0]),u.select(d.hashKey,d.value)):u.deselect(d.hashKey),u.refreshViewValue())})}),e.attach(i,o),l(),i.$on("$destroy",function(){u.removeOption(d.hashKey,d)})}function r(e){this.selected=!1,this.setSelected=function(t){t&&!this.selected?e.attr({selected:"selected","aria-selected":"true"}):!t&&this.selected&&(e.removeAttr("selected"),e.attr("aria-selected","false")),this.selected=t}}return r.$inject=["$element"],{restrict:"E",require:["mdOption","^^mdSelectMenu"],controller:r,compile:i}}function r(){function e(e,n){var i=e.find("label");i.length||(i=t.element("<label>"),e.prepend(i)),i.addClass("_md-container-ignore"),n.label&&i.text(n.label)}return{restrict:"E",compile:e}}function a(e){function i(e,i,c,d,u,p,g,m,f){function h(e,t,n){function i(){return g(t,{addClass:"_md-leave"}).start()}function o(){t.removeClass("_md-active"),t.attr("aria-hidden","true"),t[0].style.display="none",y(n),!n.$destroy&&n.restoreFocus&&n.target.focus()}return n=n||{},n.cleanupInteraction(),n.cleanupResizing(),n.hideBackdrop(),!0===n.$destroy?o():i().then(o)}function v(o,r,a){function s(e,t,n){return n.parent.append(t),u(function(e,n){try{g(t,{removeClass:"_md-leave",duration:0}).start().then(l).then(e)}catch(e){n(e)}})}function l(){return u(function(e){if(a.isRemoved)return u.reject(!1);var t=b(o,r,a);t.container.element.css(C.toCss(t.container.styles)),t.dropDown.element.css(C.toCss(t.dropDown.styles)),p(function(){r.addClass("_md-active"),t.dropDown.element.css(C.toCss({transform:""})),v(a.focusedNode),e()})})}function h(e,t,n){return n.disableParentScroll&&!c.getClosest(n.target,"MD-DIALOG")?n.restoreScroll=c.disableScrollAround(n.element,n.parent):n.disableParentScroll=!1,n.hasBackdrop&&(n.backdrop=c.createBackdrop(e,"_md-select-backdrop _md-click-catcher"),m.enter(n.backdrop,f[0].body,null,{duration:0})),function(){n.backdrop&&n.backdrop.remove(),n.disableParentScroll&&n.restoreScroll(),delete n.restoreScroll}}function v(e){e&&!e.hasAttribute("disabled")&&e.focus()}function y(e,n){var i=r.find("md-select-menu");if(!n.target)throw new Error(c.supplant(w,[n.target]));t.extend(n,{isRemoved:!1,target:t.element(n.target),parent:t.element(n.parent),selectEl:i,contentEl:r.find("md-content"),optionNodes:i[0].getElementsByTagName("md-option")})}function T(){var e=function(e,t,n){return function(){if(!n.isRemoved){var i=b(e,t,n),o=i.container,r=i.dropDown;o.element.css(C.toCss(o.styles)),r.element.css(C.toCss(r.styles))}}}(o,r,a),n=t.element(d);return n.on("resize",e),n.on("orientationchange",e),function(){n.off("resize",e),n.off("orientationchange",e)}}function S(){a.loadingAsync&&!a.isRemoved&&(o.$$loadingAsyncDone=!1,o.progressMode="indeterminate",u.when(a.loadingAsync).then(function(){o.$$loadingAsyncDone=!0,o.progressMode="",delete a.loadingAsync}).then(function(){p(l)}))}function E(){function t(t){t.preventDefault(),t.stopPropagation(),a.restoreFocus=!1,c.nextTick(e.hide,!0)}function o(t){var n=i.KEY_CODE;switch(t.preventDefault(),t.stopPropagation(),t.keyCode){case n.UP_ARROW:return d();case n.DOWN_ARROW:return l();case n.SPACE:case n.ENTER:var o=c.getClosest(t.target,"md-option");o&&(p.triggerHandler({type:"click",target:o}),t.preventDefault()),u(t);break;case n.TAB:case n.ESCAPE:t.stopPropagation(),t.preventDefault(),a.restoreFocus=!0,c.nextTick(e.hide,!0);break;default:if(t.keyCode>=31&&t.keyCode<=90){var r=p.controller("mdSelectMenu").optNodeForKeyboardSearch(t);a.focusedNode=r||a.focusedNode,r&&r.focus()}}}function s(e){var t,i=c.nodesToArray(a.optionNodes),o=i.indexOf(a.focusedNode);do{-1===o?o=0:"next"===e&&o<i.length-1?o++:"prev"===e&&o>0&&o--,t=i[o],t.hasAttribute("disabled")&&(t=n)}while(!t&&o<i.length-1&&o>0);t&&t.focus(),a.focusedNode=t}function l(){s("next")}function d(){s("prev")}function u(t){function n(){var e=!1;if(t&&t.currentTarget.children.length>0){var n=t.currentTarget.children[0];if(n.scrollHeight>n.clientHeight&&n.children.length>0){t.pageX-t.currentTarget.getBoundingClientRect().left>n.querySelector("md-option").offsetWidth&&(e=!0)}}return e}if(!(t&&"click"==t.type&&t.currentTarget!=p[0]||n())){var i=c.getClosest(t.target,"md-option");i&&i.hasAttribute&&!i.hasAttribute("disabled")&&(t.preventDefault(),t.stopPropagation(),g.isMultiple||(a.restoreFocus=!0,c.nextTick(function(){e.hide(g.ngModel.$viewValue)},!0)))}}if(!a.isRemoved){var p=a.selectEl,g=p.controller("mdSelectMenu")||{};return r.addClass("_md-clickable"),a.backdrop&&a.backdrop.on("click",t),p.on("keydown",o),p.on("click",u),function(){a.backdrop&&a.backdrop.off("click",t),p.off("keydown",o),p.off("click",u),r.removeClass("_md-clickable"),a.isRemoved=!0}}}return S(),y(o,a),a.hideBackdrop=h(o,r,a),s(o,r,a).then(function(e){return r.attr("aria-hidden","false"),a.alreadyOpen=!0,a.cleanupInteraction=E(),a.cleanupResizing=T(),e},a.hideBackdrop)}function y(e){var t=e.selectCtrl;if(t){var n=e.selectEl.controller("mdSelectMenu");t.setLabelText(n?n.selectedLabels():""),t.triggerClose()}}function b(e,n,i){var u,p=n[0],g=i.target[0].children[0],m=f[0].body,h=i.selectEl[0],v=i.contentEl[0],y=m.getBoundingClientRect(),b=g.getBoundingClientRect(),w=!1,C={left:y.left+s,top:s,bottom:y.height-s,right:y.width-s-(c.floatingScrollbars()?16:0)},T={top:b.top-C.top,left:b.left-C.left,right:C.right-(b.left+b.width),bottom:C.bottom-(b.top+b.height)},S=y.width-2*s,E=h.querySelector("md-option[selected]"),I=h.getElementsByTagName("md-option"),x=h.getElementsByTagName("md-optgroup"),k=l(n,v);u=o(i.loadingAsync)?v.firstElementChild||v:E||(x.length?x[0]:I.length?I[0]:v.firstElementChild||v),v.offsetWidth>S?v.style["max-width"]=S+"px":v.style.maxWidth=null,w&&(v.style["min-width"]=b.width+"px"),k&&h.classList.add("_md-overflow");var A=u;"MD-OPTGROUP"===(A.tagName||"").toUpperCase()&&(A=I[0]||v.firstElementChild||v,u=A),i.focusedNode=A,p.style.display="block";var M=h.getBoundingClientRect(),_=a(u);if(u){var D=d.getComputedStyle(u);_.paddingLeft=parseInt(D.paddingLeft,10)||0,_.paddingRight=parseInt(D.paddingRight,10)||0}if(k){var $=v.offsetHeight/2;v.scrollTop=_.top+_.height/2-$,T.top<$?v.scrollTop=Math.min(_.top,v.scrollTop+$-T.top):T.bottom<$&&(v.scrollTop=Math.max(_.top+_.height-M.height,v.scrollTop-$+T.bottom))}var O,P,N,F;w?(O=b.left,P=b.top+b.height,N="50% 0",P+M.height>C.bottom&&(P=b.top-M.height,N="50% 100%")):(O=b.left+_.left-_.paddingLeft+2,P=Math.floor(b.top+b.height/2-_.height/2-_.top+v.scrollTop)+2,N=_.left+b.width/2+"px "+(_.top+_.height/2-v.scrollTop)+"px 0px",F=Math.min(b.width+_.paddingLeft+_.paddingRight,S));var L=p.getBoundingClientRect(),R=Math.round(100*Math.min(b.width/M.width,1))/100,B=Math.round(100*Math.min(b.height/M.height,1))/100;return{container:{element:t.element(p),styles:{left:Math.floor(r(C.left,O,C.right-L.width)),top:Math.floor(r(C.top,P,C.bottom-L.height)),"min-width":F}},dropDown:{element:t.element(h),styles:{transformOrigin:N,transform:i.alreadyOpen?"":c.supplant("scale({0},{1})",[R,B])}}}}var w="$mdSelect.show() expected a target element in options.target but got '{0}'!",C=c.dom.animator;return{parent:"body",themable:!0,onShow:v,onRemove:h,hasBackdrop:!0,disableParentScroll:!0}}function o(e){return e&&t.isFunction(e.then)}function r(e,t,n){return Math.max(e,Math.min(t,n))}function a(e){return e?{left:e.offsetLeft,top:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}:{left:0,top:0,width:0,height:0}}function l(e,t){var n=!1;try{var i=e[0].style.display;e[0].style.display="block",n=t.scrollHeight>t.offsetHeight,e[0].style.display=i}finally{}return n}return i.$inject=["$mdSelect","$mdConstant","$mdUtil","$window","$q","$$rAF","$animateCss","$animate","$document"],e("$mdSelect").setDefaults({methods:["target"],options:i})}var s=8,l=0,c=t.element('<div class="_md-container"><div class="_md-icon"></div></div>');t.module("material.components.select",["material.core","material.components.backdrop"]).directive("mdSelect",e).directive("mdSelectMenu",i).directive("mdOption",o).directive("mdOptgroup",r).provider("$mdSelect",a),e.$inject=["$mdSelect","$mdUtil","$mdTheming","$mdAria","$compile","$parse"],i.$inject=["$parse","$mdUtil","$mdTheming"],o.$inject=["$mdButtonInkRipple","$mdUtil"],a.$inject=["$$interimElementProvider"]}(),function(){function e(e,t){return["$mdUtil",function(n){return{restrict:"A",multiElement:!0,link:function(i,o,r){var a=i.$on("$md-resize-enable",function(){a(),i.$watch(r[e],function(e){!!e===t&&(n.nextTick(function(){i.$broadcast("$md-resize")}),n.dom.animator.waitTransitionEnd(o).then(function(){i.$broadcast("$md-resize")}))})})}}}]}t.module("material.components.showHide",["material.core"]).directive("ngShow",e("ngShow",!0)).directive("ngHide",e("ngHide",!1))}(),function(){function e(e,n){return function(i){function o(){return e.when(i).then(function(e){return a=e,e})}var r="SideNav '"+i+"' is not available!",a=e.get(i);return a||e.notFoundError(i),{isOpen:function(){return a&&a.isOpen()},isLockedOpen:function(){return a&&a.isLockedOpen()},toggle:function(){return a?a.toggle():n.reject(r)},open:function(){return a?a.open():n.reject(r)},close:function(){return a?a.close():n.reject(r)},then:function(e){return(a?n.when(a):o()).then(e||t.noop)}}}}function i(){return{restrict:"A",require:"^mdSidenav",link:function(e,t,n,i){}}}function o(e,i,o,r,a,s,l,c,d,u){function p(s,p,g,m){function f(e,t){s.isLockedOpen=e,e===t?p.toggleClass("_md-locked-open",!!e):a[e?"addClass":"removeClass"](p,"_md-locked-open"),T&&T.toggleClass("_md-locked-open",!!e)}function h(e){var t=i.findFocusTarget(p)||i.findFocusTarget(p,"[md-sidenav-focus]")||p,n=p.parent();return n[e?"on":"off"]("keydown",b),T&&T[e?"on":"off"]("click",w),e&&(S=u[0].activeElement),v(e),E=d.all([e&&T?a.enter(T,n):T?a.leave(T):d.when(!0),a[e?"removeClass":"addClass"](p,"_md-closed")]).then(function(){s.isOpen&&t&&t.focus()})}function v(e){var i=p.parent();e&&!C?(C=i.css("overflow"),i.css("overflow","hidden")):t.isDefined(C)&&(i.css("overflow",C),C=n)}function y(e){return s.isOpen==e?d.when(!0):d(function(t){s.isOpen=e,i.nextTick(function(){E.then(function(e){s.isOpen||(S&&S.focus(),S=null),t(e)})})})}function b(e){return e.keyCode===o.KEY_CODE.ESCAPE?w(e):d.when(!0)}function w(e){return e.preventDefault(),m.close()}var C,T,S=null,E=d.when(!0),I=l(g.mdIsLockedOpen),x=function(){return I(s.$parent,{$media:function(t){return c.warn("$media is deprecated for is-locked-open. Use $mdMedia instead."),e(t)},$mdMedia:e})};t.isDefined(g.mdDisableBackdrop)||(T=i.createBackdrop(s,"_md-sidenav-backdrop md-opaque ng-enter")),r(p),T&&r.inherit(T,p),p.on("$destroy",function(){T&&T.remove(),m.destroy()}),s.$on("$destroy",function(){T&&T.remove()}),s.$watch(x,f),s.$watch("isOpen",h),m.$toggleOpen=y}return{restrict:"E",scope:{isOpen:"=?mdIsOpen"},controller:"$mdSidenavController",compile:function(e){return e.addClass("_md-closed"),e.attr("tabIndex","-1"),p}}}function r(e,t,n,i,o){var r=this;r.isOpen=function(){return!!e.isOpen},r.isLockedOpen=function(){return!!e.isLockedOpen},r.open=function(){return r.$toggleOpen(!0)},r.close=function(){return r.$toggleOpen(!1)},r.toggle=function(){return r.$toggleOpen(!e.isOpen)},r.$toggleOpen=function(t){return o.when(e.isOpen=t)},r.destroy=i.register(r,n.mdComponentId)}t.module("material.components.sidenav",["material.core","material.components.backdrop"]).factory("$mdSidenav",e).directive("mdSidenav",o).directive("mdSidenavFocus",i).controller("$mdSidenavController",r),e.$inject=["$mdComponentRegistry","$q"],o.$inject=["$mdMedia","$mdUtil","$mdConstant","$mdTheming","$animate","$compile","$parse","$log","$q","$document"],r.$inject=["$scope","$element","$attrs","$mdComponentRegistry","$q"]}(),function(){function e(e,i,o,r,a){function s(e){function t(e,t){t.addClass("_md-sticky-clone");var n={element:e,clone:t};return f.items.push(n),r.nextTick(function(){g.prepend(n.clone)}),m(),function(){f.items.forEach(function(t,n){t.element[0]===e[0]&&(f.items.splice(n,1),t.clone.remove())}),m()}}function a(){f.items.forEach(s),f.items=f.items.sort(function(e,t){return e.top<t.top?-1:1});for(var e,t=g.prop("scrollTop"),n=f.items.length-1;n>=0;n--)if(t>f.items[n].top){e=f.items[n];break}d(e)}function s(e){var t=e.element[0];for(e.top=0,e.left=0,e.right=0;t&&t!==g[0];)e.top+=t.offsetTop,e.left+=t.offsetLeft,t.offsetParent&&(e.right+=t.offsetParent.offsetWidth-t.offsetWidth-t.offsetLeft),t=t.offsetParent;e.height=e.element.prop("offsetHeight");var i=r.floatingScrollbars()?"0":n;r.bidi(e.clone,"margin-left",e.left,i),r.bidi(e.clone,"margin-right",i,e.right)}function l(){var e=g.prop("scrollTop"),t=e>(l.prevScrollTop||0);if(l.prevScrollTop=e,0===e)return void d(null);if(t){if(f.next&&f.next.top<=e)return void d(f.next);if(f.current&&f.next&&f.next.top-e<=f.next.height)return void p(f.current,e+(f.next.top-f.next.height-e))}if(!t){if(f.current&&f.prev&&e<f.current.top)return void d(f.prev);if(f.next&&f.current&&e>=f.next.top-f.current.height)return void p(f.current,e+(f.next.top-e-f.current.height))}f.current&&p(f.current,e)}function d(e){if(f.current!==e){f.current&&(p(f.current,null),u(f.current,null)),e&&u(e,"active"),f.current=e;var t=f.items.indexOf(e);f.next=f.items[t+1],f.prev=f.items[t-1],u(f.next,"next"),u(f.prev,"prev")}}function u(e,t){e&&e.state!==t&&(e.state&&(e.clone.attr("sticky-prev-state",e.state),e.element.attr("sticky-prev-state",e.state)),e.clone.attr("sticky-state",t),e.element.attr("sticky-state",t),e.state=t)}function p(e,t){e&&(null===t||t===n?e.translateY&&(e.translateY=null,e.clone.css(i.CSS.TRANSFORM,"")):(e.translateY=t,r.bidi(e.clone,i.CSS.TRANSFORM,"translate3d("+e.left+"px,"+t+"px,0)","translateY("+t+"px)")))}var g=e.$element,m=o.throttle(a);c(g),g.on("$scrollstart",m),g.on("$scroll",l);var f;return f={prev:null,current:null,next:null,items:[],add:t,refreshElements:a}}function l(n){var i,o=t.element("<div>");e[0].body.appendChild(o[0]);for(var r=["sticky","-webkit-sticky"],a=0;a<r.length;++a)if(o.css({position:r[a],top:0,"z-index":2}),o.css("position")==r[a]){i=r[a];break}return o.remove(),i}function c(e){function t(){+r.now()-i>a?(n=!1,e.triggerHandler("$scrollend")):(e.triggerHandler("$scroll"),o.throttle(t))}var n,i,a=200;e.on("scroll touchmove",function(){n||(n=!0,o.throttle(t),e.triggerHandler("$scrollstart")),e.triggerHandler("$scroll"),i=+r.now()})}var d=l();return function(e,t,n){var i=t.controller("mdContent");if(i)if(d)t.css({position:d,top:0,"z-index":2});else{var o=i.$element.data("$$sticky");o||(o=s(i),i.$element.data("$$sticky",o));var r=n||a(t.clone())(e),l=o.add(t,r);e.$on("$destroy",l)}}}t.module("material.components.sticky",["material.core","material.components.content"]).factory("$mdSticky",e),e.$inject=["$document","$mdConstant","$$rAF","$mdUtil","$compile"]}(),function(){function e(){return{controller:function(){},compile:function(e){var i=e.find("md-slider");if(i){return i.attr("md-vertical")!==n&&e.attr("md-vertical",""),i.attr("flex")||i.attr("flex",""),function(e,n,i,o){function r(e){n.children().attr("disabled",e),n.find("input").attr("disabled",e)}var a=t.noop;i.disabled?r(!0):i.ngDisabled&&(a=e.$watch(i.ngDisabled,function(e){r(e)})),e.$on("$destroy",function(){a()});var s;o.fitInputWidthToTextLength=function(e){var t=n.find("md-input-container"),i=getComputedStyle(t[0]),o=parseInt(i["min-width"]),r=2*parseInt(i.padding);s=s||parseInt(i["max-width"]);var a=Math.max(s,o+r+o/2*e);t.css("max-width",a+"px")}}}}}}function i(e,n,i,o,r,a,s,l,c,d){function u(e,n){var o=t.element(e[0].getElementsByClassName("_md-slider-wrapper")),r=n.tabindex||0;return o.attr("tabindex",r),(n.disabled||n.ngDisabled)&&o.attr("tabindex",-1),o.attr("role","slider"),i.expect(e,"aria-label"),p}function p(i,u,p,g){function m(){T(),M()}function f(e){re=parseFloat(e),u.attr("aria-valuemin",e),m()}function h(e){ae=parseFloat(e),u.attr("aria-valuemax",e),m()}function v(e){se=parseFloat(e)}function y(e){le=_(parseInt(e),0,6)}function b(){u.attr("aria-disabled",!!W())}function w(){if(ie&&!W()&&!t.isUndefined(se)){if(0>=se){var e="Slider step value must be greater than zero when in discrete mode";throw c.error(e),new Error(e)}var i=Math.floor((ae-re)/se);ce||(ce=t.element("<canvas>").css("position","absolute"),Q.append(ce),de=ce[0].getContext("2d"));var o=S();!o||o.height||o.width||(T(),o=ue),ce[0].width=o.width,ce[0].height=o.height;for(var r,a=0;i>=a;a++){var s=n.getComputedStyle(Q[0]);de.fillStyle=s.color||"black",r=Math.floor((ne?o.height:o.width)*(a/i)),de.fillRect(ne?0:r-1,ne?r-1:0,ne?o.width:2,ne?2:o.height)}}}function C(){if(ce&&de){var e=S();de.clearRect(0,0,e.width,e.height)}}function T(){ue=J[0].getBoundingClientRect()}function S(){return te(),ue}function E(e){if(!W()){var t;(ne?e.keyCode===r.KEY_CODE.DOWN_ARROW:e.keyCode===r.KEY_CODE.LEFT_ARROW)?t=-se:(ne?e.keyCode===r.KEY_CODE.UP_ARROW:e.keyCode===r.KEY_CODE.RIGHT_ARROW)&&(t=se),t&&((e.metaKey||e.ctrlKey||e.altKey)&&(t*=4),e.preventDefault(),e.stopPropagation(),i.$evalAsync(function(){A(z.$viewValue+t)}))}}function I(){w(),i.mouseActive=!0,ee.removeClass("md-focused"),d(function(){i.mouseActive=!1},100)}function x(){!1===i.mouseActive&&ee.addClass("md-focused")}function k(){ee.removeClass("md-focused"),u.removeClass("_md-active"),C()}function A(e){z.$setViewValue(_(D(e)))}function M(){isNaN(z.$viewValue)&&(z.$viewValue=z.$modelValue),z.$viewValue=_(z.$viewValue);var e=(z.$viewValue-re)/(ae-re);i.modelValue=z.$viewValue,u.attr("aria-valuenow",z.$viewValue),$(e),K.text(z.$viewValue)}function _(e,n,i){return t.isNumber(e)?(n=t.isNumber(n)?n:re,i=t.isNumber(i)?i:ae,Math.max(n,Math.min(i,e))):void 0}function D(e){if(t.isNumber(e)){var n=Math.round((e-re)/se)*se+re;return n=Math.round(n*Math.pow(10,le))/Math.pow(10,le),q&&q.fitInputWidthToTextLength&&o.debounce(function(){q.fitInputWidthToTextLength(n.toString().length)},100)(),n}}function $(e){e=H(e);var t=100*e+"%";X.css(ne?"bottom":"left",t),Z.css(ne?"height":"width",t),u.toggleClass("_md-min",0===e),u.toggleClass("_md-max",1===e)}function O(e){if(!W()){u.addClass("_md-active"),u[0].focus(),T();var t=U(G(ne?e.pointer.y:e.pointer.x)),n=_(D(t));i.$apply(function(){A(n),$(V(n))})}}function P(e){if(!W()){u.removeClass("_md-dragging");var t=U(G(ne?e.pointer.y:e.pointer.x)),n=_(D(t));i.$apply(function(){A(n),M()})}}function N(e){W()||(pe=!0,e.stopPropagation(),u.addClass("_md-dragging"),R(e))}function F(e){pe&&(e.stopPropagation(),R(e))}function L(e){pe&&(e.stopPropagation(),pe=!1)}function R(e){ie?j(ne?e.pointer.y:e.pointer.x):B(ne?e.pointer.y:e.pointer.x)}function B(e){i.$evalAsync(function(){A(U(G(e)))})}function j(e){var t=U(G(e)),n=_(D(t));$(G(e)),K.text(n)}function H(e){return Math.max(0,Math.min(e||0,1))}function G(e){var t=ne?ue.top:ue.left,n=ne?ue.height:ue.width,i=(e-t)/n;return Math.max(0,Math.min(1,ne?1-i:i))}function U(e){return re+e*(ae-re)}function V(e){return(e-re)/(ae-re)}a(u);var z=g[0]||{$setViewValue:function(e){this.$viewValue=e,this.$viewChangeListeners.forEach(function(e){e()})},$parsers:[],$formatters:[],$viewChangeListeners:[]},q=g[1],W=(t.element(o.getClosest(u,"_md-slider-container",!0)),p.ngDisabled?t.bind(null,l(p.ngDisabled),i.$parent):function(){return u[0].hasAttribute("disabled")}),Y=t.element(u[0].querySelector("._md-thumb")),K=t.element(u[0].querySelector("._md-thumb-text")),X=Y.parent(),J=t.element(u[0].querySelector("._md-track-container")),Z=t.element(u[0].querySelector("._md-track-fill")),Q=t.element(u[0].querySelector("._md-track-ticks")),ee=t.element(u[0].getElementsByClassName("_md-slider-wrapper")),te=(t.element(u[0].getElementsByClassName("_md-slider-content")),o.throttle(T,5e3)),ne=t.isDefined(p.mdVertical),ie=t.isDefined(p.mdDiscrete);t.isDefined(p.min)?p.$observe("min",f):f(0),t.isDefined(p.max)?p.$observe("max",h):h(100),t.isDefined(p.step)?p.$observe("step",v):v(1),t.isDefined(p.round)?p.$observe("round",y):y(3);t.noop;p.ngDisabled&&i.$parent.$watch(p.ngDisabled,b),s.register(ee,"drag",{horizontal:!ne}),i.mouseActive=!1,ee.on("keydown",E).on("mousedown",I).on("focus",x).on("blur",k).on("$md.pressdown",O).on("$md.pressup",P).on("$md.dragstart",N).on("$md.drag",F).on("$md.dragend",L),setTimeout(m,0);var oe=e.throttle(m);t.element(n).on("resize",oe),i.$on("$destroy",function(){t.element(n).off("resize",oe)}),z.$render=M,z.$viewChangeListeners.push(M),z.$formatters.push(_),z.$formatters.push(D);var re,ae,se,le,ce,de,ue={};T();var pe=!1}return{scope:{},require:["?ngModel","?^mdSliderContainer"],template:'<div class="_md-slider-wrapper"><div class="_md-slider-content"><div class="_md-track-container"><div class="_md-track"></div><div class="_md-track _md-track-fill"></div><div class="_md-track-ticks"></div></div><div class="_md-thumb-container"><div class="_md-thumb"></div><div class="_md-focus-thumb"></div><div class="_md-focus-ring"></div><div class="_md-sign"><span class="_md-thumb-text"></span></div><div class="_md-disabled-thumb"></div></div></div></div>',compile:u}}t.module("material.components.slider",["material.core"]).directive("mdSlider",i).directive("mdSliderContainer",e),i.$inject=["$$rAF","$window","$mdAria","$mdUtil","$mdConstant","$mdTheming","$mdGesture","$parse","$log","$timeout"]}(),function(){function e(e,n,i,o){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="md-subheader">  <div class="_md-subheader-inner">    <span class="_md-subheader-content"></span>  </div></div>',link:function(r,a,s,l,c){function d(e){return t.element(e[0].querySelector("._md-subheader-content"))}i(a);var u=a[0].outerHTML;c(r,function(e){d(a).append(e)}),a.hasClass("md-no-sticky")||c(r,function(t){var i='<div class="_md-subheader-wrapper">'+u+"</div>",s=n(i)(r);e(r,a,s),o.nextTick(function(){d(s).append(t)})})}}}t.module("material.components.subheader",["material.core","material.components.sticky"]).directive("mdSubheader",e),e.$inject=["$mdSticky","$compile","$mdTheming","$mdUtil"]}(),function(){function e(e){function t(e){function t(t,o,r){var a=e(r[n]);o.on(i,function(e){t.$apply(function(){a(t,{$event:e})})})}return{restrict:"A",link:t}}var n="md"+e,i="$md."+e.toLowerCase();return t.$inject=["$parse"],t}t.module("material.components.swipe",["material.core"]).directive("mdSwipeLeft",e("SwipeLeft")).directive("mdSwipeRight",e("SwipeRight")).directive("mdSwipeUp",e("SwipeUp")).directive("mdSwipeDown",e("SwipeDown"))}(),function(){function e(e,n,i,o,r,a){function s(e,s){var c=l.compile(e,s);return e.addClass("_md-dragging"),function(e,s,l,d){function u(t){f&&f(e)||(t.stopPropagation(),s.addClass("_md-dragging"),y={width:h.prop("offsetWidth")})}function p(e){if(y){e.stopPropagation(),e.srcEvent&&e.srcEvent.preventDefault();var t=e.pointer.distanceX/y.width,n=d.$viewValue?1+t:t;n=Math.max(0,Math.min(1,n)),h.css(i.CSS.TRANSFORM,"translate3d("+100*n+"%,0,0)"),y.translate=n}}function g(e){if(y){e.stopPropagation(),s.removeClass("_md-dragging"),h.css(i.CSS.TRANSFORM,"");(d.$viewValue?y.translate>.5:y.translate<.5)&&m(!d.$viewValue),y=null}}function m(t){e.$apply(function(){d.$setViewValue(t),d.$render()})}d=d||n.fakeNgModel();var f=null;null!=l.disabled?f=function(){return!0}:l.ngDisabled&&(f=o(l.ngDisabled));var h=t.element(s[0].querySelector("._md-thumb-container")),v=t.element(s[0].querySelector("._md-container"));r(function(){s.removeClass("_md-dragging")}),c(e,s,l,d),f&&e.$watch(f,function(e){s.attr("tabindex",e?-1:0)}),a.register(v,"drag"),v.on("$md.dragstart",u).on("$md.drag",p).on("$md.dragend",g);var y}}var l=e[0];return{restrict:"E",priority:210,transclude:!0,template:'<div class="_md-container"><div class="_md-bar"></div><div class="_md-thumb-container"><div class="_md-thumb" md-ink-ripple md-ink-ripple-checkbox></div></div></div><div ng-transclude class="_md-label"></div>',require:"?ngModel",compile:s}}t.module("material.components.switch",["material.core","material.components.checkbox"]).directive("mdSwitch",e),e.$inject=["mdCheckboxDirective","$mdUtil","$mdConstant","$parse","$$rAF","$mdGesture"]}(),function(){t.module("material.components.tabs",["material.core","material.components.icon"])}(),function(){function e(e){return{restrict:"E",link:function(t,n,i){t.$on("$destroy",function(){e.destroy()})}}}function n(e){function n(e){o=e}function i(e,n,i,r){function a(t,a,s){o=s.textContent||s.content;var d=!r("gt-sm");return a=i.extractElementByName(a,"md-toast",!0),s.element=a,s.onSwipe=function(e,t){var o=e.type.replace("$md.",""),r=o.replace("swipe","");"down"===r&&-1!=s.position.indexOf("top")&&!d||"up"===r&&(-1!=s.position.indexOf("bottom")||d)||("left"!==r&&"right"!==r||!d)&&(a.addClass("_md-"+o),i.nextTick(n.cancel))},s.openClass=l(s.position),s.parent.addClass(s.openClass),i.hasComputedStyle(s.parent,"position","static")&&s.parent.css("position","relative"),a.on(c,s.onSwipe),a.addClass(d?"_md-bottom":s.position.split(" ").map(function(e){return"_md-"+e}).join(" ")),s.parent&&s.parent.addClass("_md-toast-animating"),e.enter(a,s.parent).then(function(){s.parent&&s.parent.removeClass("_md-toast-animating")})}function s(t,n,o){return n.off(c,o.onSwipe),o.parent&&o.parent.addClass("_md-toast-animating"),o.openClass&&o.parent.removeClass(o.openClass),(1==o.$destroy?n.remove():e.leave(n)).then(function(){o.parent&&o.parent.removeClass("_md-toast-animating"),i.hasComputedStyle(o.parent,"position","static")&&o.parent.css("position","")})}function l(e){return r("gt-xs")?"_md-toast-open-"+(e.indexOf("top")>-1?"top":"bottom"):"_md-toast-open-bottom"}var c="$md.swipeleft $md.swiperight $md.swipeup $md.swipedown";return{onShow:a,onRemove:s,position:"bottom left",themable:!0,hideDelay:3e3,autoWrap:!0,transformTemplate:function(e,n){if(n.autoWrap&&e&&!/md-toast-content/g.test(e)){var i=document.createElement("md-template");i.innerHTML=e;for(var o=0;o<i.children.length;o++)if("MD-TOAST"===i.children[o].nodeName){var r=t.element('<div class="md-toast-content">');r.append(i.children[o].children),i.children[o].appendChild(r[0])}return i.outerHTML}return e||""}}}var o,r="ok",a=e("$mdToast").setDefaults({methods:["position","hideDelay","capsule","parent","position"],options:i}).addPreset("simple",{argOption:"textContent",methods:["textContent","content","action","highlightAction","highlightClass","theme","parent"],options:["$mdToast","$mdTheming",function(e,t){return{template:'<md-toast md-theme="{{ toast.theme }}" ng-class="{\'md-capsule\': toast.capsule}">  <div class="md-toast-content">    <span flex class="md-toast-text" role="alert" aria-relevant="all" aria-atomic="true">      {{ toast.content }}    </span>    <md-button class="md-action" ng-if="toast.action" ng-click="toast.resolve()"         ng-class="highlightClasses">      {{ toast.action }}    </md-button>  </div></md-toast>',controller:["$scope",function(t){var n=this;n.highlightAction&&(t.highlightClasses=["md-highlight",n.highlightClass]),t.$watch(function(){return o},function(){n.content=o}),this.resolve=function(){e.hide(r)}}],theme:t.defaultTheme(),controllerAs:"toast",bindToController:!0}}]}).addMethod("updateTextContent",n).addMethod("updateContent",n);return i.$inject=["$animate","$mdToast","$mdUtil","$mdMedia"],a}t.module("material.components.toast",["material.core","material.components.button"]).directive("mdToast",e).provider("$mdToast",n),e.$inject=["$mdToast"],n.$inject=["$$interimElementProvider"]}(),function(){function e(e,n,i,o,r){var a=t.bind(null,i.supplant,"translate3d(0,{0}px,0)");return{template:"",restrict:"E",link:function(s,l,c){function d(){function o(e){var t=l.parent().find("md-content");!f&&t.length&&d(null,t),e=s.$eval(e),!1===e?h():h=p()}function d(e,t){t&&l.parent()[0]===t.parent()[0]&&(f&&f.off("scroll",w),f=t,h=p())}function u(e){var t=e?e.target.scrollTop:y;C(),v=Math.min(m/b,Math.max(0,v+t-y)),l.css(n.CSS.TRANSFORM,a([-v*b])),f.css(n.CSS.TRANSFORM,a([(m-v)*b])),y=t,i.nextTick(function(){var e=l.hasClass("md-whiteframe-z1");e&&!v?r.removeClass(l,"md-whiteframe-z1"):!e&&v&&r.addClass(l,"md-whiteframe-z1")})}function p(){return f?(f.on("scroll",w),f.attr("scroll-shrink","true"),e(g),function(){f.off("scroll",w),f.attr("scroll-shrink","false"),e(g)}):t.noop}function g(){m=l.prop("offsetHeight");var e=-m*b+"px";f.css({"margin-top":e,"margin-bottom":e}),u()}var m,f,h=t.noop,v=0,y=0,b=c.mdShrinkSpeedFactor||.5,w=e.throttle(u),C=i.debounce(g,5e3);s.$on("$mdContentLoaded",d),c.$observe("mdScrollShrink",o),c.ngShow&&s.$watch(c.ngShow,g),c.ngHide&&s.$watch(c.ngHide,g),s.$on("$destroy",h)}o(l),t.isDefined(c.mdScrollShrink)&&d()}}}t.module("material.components.toolbar",["material.core","material.components.content"]).directive("mdToolbar",e),e.$inject=["$$rAF","$mdConstant","$mdUtil","$mdTheming","$animate"]}(),function(){function e(){return{controller:i,template:n,compile:function(e,t){e.addClass("md-virtual-repeat-container").addClass(t.hasOwnProperty("mdOrientHorizontal")?"md-orient-horizontal":"md-orient-vertical")}}}function n(e){return'<div class="md-virtual-repeat-scroller"><div class="md-virtual-repeat-sizer"></div><div class="md-virtual-repeat-offsetter">'+e[0].innerHTML+"</div></div>"}function i(e,n,i,o,r,a,s,l){this.$rootScope=o,this.$scope=a,this.$element=s,this.$attrs=l,this.size=0,this.scrollSize=0,this.scrollOffset=0,this.horizontal=this.$attrs.hasOwnProperty("mdOrientHorizontal"),this.repeater=null,this.autoShrink=this.$attrs.hasOwnProperty("mdAutoShrink"),this.autoShrinkMin=parseInt(this.$attrs.mdAutoShrinkMin,10)||0,this.originalSize=null,this.offsetSize=parseInt(this.$attrs.mdOffsetSize,10)||0,this.oldElementSize=null,this.$attrs.mdTopIndex?(this.bindTopIndex=i(this.$attrs.mdTopIndex),this.topIndex=this.bindTopIndex(this.$scope),t.isDefined(this.topIndex)||(this.topIndex=0,this.bindTopIndex.assign(this.$scope,0)),this.$scope.$watch(this.bindTopIndex,t.bind(this,function(e){e!==this.topIndex&&this.scrollToIndex(e)}))):this.topIndex=0,this.scroller=s[0].getElementsByClassName("md-virtual-repeat-scroller")[0],this.sizer=this.scroller.getElementsByClassName("md-virtual-repeat-sizer")[0],this.offsetter=this.scroller.getElementsByClassName("md-virtual-repeat-offsetter")[0];var c=t.bind(this,this.updateSize);e(t.bind(this,function(){c();var e=n.debounce(c,10,null,!1),i=t.element(r);this.size||e(),i.on("resize",e),a.$on("$destroy",function(){i.off("resize",e)}),a.$emit("$md-resize-enable"),a.$on("$md-resize",c)}))}function o(e){return{controller:r,priority:1e3,require:["mdVirtualRepeat","^^mdVirtualRepeatContainer"],restrict:"A",terminal:!0,transclude:"element",compile:function(t,n){var i=n.mdVirtualRepeat,o=i.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)\s*$/),r=o[1],a=e(o[2]),s=n.mdExtraName&&e(n.mdExtraName);return function(e,t,n,i,o){i[0].link_(i[1],o,r,a,s)}}}}function r(e,n,i,o,r,a,s,l){this.$scope=e,this.$element=n,this.$attrs=i,this.$browser=o,this.$document=r,this.$rootScope=a,this.$$rAF=s,this.onDemand=l.parseAttributeBoolean(i.mdOnDemand),this.browserCheckUrlChange=o.$$checkUrlChange,this.newStartIndex=0,this.newEndIndex=0,this.newVisibleEnd=0,this.startIndex=0,this.endIndex=0,this.itemSize=e.$eval(i.mdItemSize)||null,this.isFirstRender=!0,this.isVirtualRepeatUpdating_=!1,this.itemsLength=0,this.unwatchItemSize_=t.noop,this.blocks={},this.pooledBlocks=[]}function a(e){if(!t.isFunction(e.getItemAtIndex)||!t.isFunction(e.getLength))throw Error("When md-on-demand is enabled, the Object passed to md-virtual-repeat must implement functions getItemAtIndex() and getLength() ");this.model=e}t.module("material.components.virtualRepeat",["material.core","material.components.showHide"]).directive("mdVirtualRepeatContainer",e).directive("mdVirtualRepeat",o);var s=1533917,l=3;i.$inject=["$$rAF","$mdUtil","$parse","$rootScope","$window","$scope","$element","$attrs"],i.prototype.register=function(e){this.repeater=e,t.element(this.scroller).on("scroll wheel touchmove touchend",t.bind(this,this.handleScroll_))},i.prototype.isHorizontal=function(){return this.horizontal},i.prototype.getSize=function(){return this.size},i.prototype.setSize_=function(e){var t=this.getDimensionName_();this.size=e,this.$element[0].style[t]=e+"px"},i.prototype.unsetSize_=function(){this.$element[0].style[this.getDimensionName_()]=this.oldElementSize,this.oldElementSize=null},i.prototype.updateSize=function(){this.originalSize||(this.size=this.isHorizontal()?this.$element[0].clientWidth:this.$element[0].clientHeight,this.handleScroll_(),this.repeater&&this.repeater.containerUpdated())},i.prototype.getScrollSize=function(){return this.scrollSize},i.prototype.getDimensionName_=function(){return this.isHorizontal()?"width":"height"},i.prototype.sizeScroller_=function(e){var t=this.getDimensionName_(),n=this.isHorizontal()?"height":"width";if(this.sizer.innerHTML="",s>e)this.sizer.style[t]=e+"px";else{this.sizer.style[t]="auto",this.sizer.style[n]="auto";var i=Math.floor(e/s),o=document.createElement("div");o.style[t]="1533917px",o.style[n]="1px";for(var r=0;i>r;r++)this.sizer.appendChild(o.cloneNode(!1));o.style[t]=e-i*s+"px",this.sizer.appendChild(o)}},i.prototype.autoShrink_=function(e){var t=Math.max(e,this.autoShrinkMin*this.repeater.getItemSize());if(this.autoShrink&&t!==this.size){null===this.oldElementSize&&(this.oldElementSize=this.$element[0].style[this.getDimensionName_()]);var n=this.originalSize||this.size;!n||n>t?(this.originalSize||(this.originalSize=this.size),this.setSize_(t)):null!==this.originalSize&&(this.unsetSize_(),this.originalSize=null,this.updateSize()),this.repeater.containerUpdated()}},i.prototype.setScrollSize=function(e){var t=e+this.offsetSize;this.scrollSize!==t&&(this.sizeScroller_(t),this.autoShrink_(t),this.scrollSize=t)},i.prototype.getScrollOffset=function(){return this.scrollOffset},i.prototype.scrollTo=function(e){this.scroller[this.isHorizontal()?"scrollLeft":"scrollTop"]=e,this.handleScroll_()},i.prototype.scrollToIndex=function(e){var t=this.repeater.getItemSize(),n=this.repeater.itemsLength;e>n&&(e=n-1),this.scrollTo(t*e)},i.prototype.resetScroll=function(){this.scrollTo(0)},i.prototype.handleScroll_=function(){var e=t.element(document)[0],n="rtl"!=e.dir&&"rtl"!=e.body.dir;n||this.maxSize||(this.scroller.scrollLeft=this.scrollSize,this.maxSize=this.scroller.scrollLeft);var i=this.isHorizontal()?n?this.scroller.scrollLeft:this.maxSize-this.scroller.scrollLeft:this.scroller.scrollTop;if(!(i===this.scrollOffset||i>this.scrollSize-this.size)){var o=this.repeater.getItemSize();if(o){var r=Math.max(0,Math.floor(i/o)-l),a=(this.isHorizontal()?"translateX(":"translateY(")+(!this.isHorizontal()||n?r*o:-r*o)+"px)";if(this.scrollOffset=i,this.offsetter.style.webkitTransform=a,this.offsetter.style.transform=a,this.bindTopIndex){var s=Math.floor(i/o);s!==this.topIndex&&s<this.repeater.getItemCount()&&(this.topIndex=s,this.bindTopIndex.assign(this.$scope,s),this.$rootScope.$$phase||this.$scope.$digest())}this.repeater.containerUpdated()}}},o.$inject=["$parse"],r.$inject=["$scope","$element","$attrs","$browser","$document","$rootScope","$$rAF","$mdUtil"],r.Block,r.prototype.link_=function(e,n,i,o,r){this.container=e,this.transclude=n,this.repeatName=i,this.rawRepeatListExpression=o,this.extraName=r,this.sized=!1,this.repeatListExpression=t.bind(this,this.repeatListExpression_),this.container.register(this)},r.prototype.readItemSize_=function(){if(!this.itemSize){this.items=this.repeatListExpression(this.$scope),this.parentNode=this.$element[0].parentNode;var e=this.getBlock_(0);e.element[0].parentNode||this.parentNode.appendChild(e.element[0]),this.itemSize=e.element[0][this.container.isHorizontal()?"offsetWidth":"offsetHeight"]||null,this.blocks[0]=e,this.poolBlock_(0),this.itemSize&&this.containerUpdated()}},r.prototype.repeatListExpression_=function(e){var t=this.rawRepeatListExpression(e);if(this.onDemand&&t){var n=new a(t);return n.$$includeIndexes(this.newStartIndex,this.newVisibleEnd),n}return t},r.prototype.containerUpdated=function(){return this.itemSize?(this.sized||(this.items=this.repeatListExpression(this.$scope)),this.sized||(this.unwatchItemSize_(),this.sized=!0,this.$scope.$watchCollection(this.repeatListExpression,t.bind(this,function(e,t){this.isVirtualRepeatUpdating_||this.virtualRepeatUpdate_(e,t)}))),this.updateIndexes_(),void((this.newStartIndex!==this.startIndex||this.newEndIndex!==this.endIndex||this.container.getScrollOffset()>this.container.getScrollSize())&&(this.items instanceof a&&this.items.$$includeIndexes(this.newStartIndex,this.newEndIndex),this.virtualRepeatUpdate_(this.items,this.items)))):(this.unwatchItemSize_=this.$scope.$watchCollection(this.repeatListExpression,t.bind(this,function(e){e&&e.length&&this.$$rAF(t.bind(this,this.readItemSize_))})),void(this.$rootScope.$$phase||this.$scope.$digest()))},r.prototype.getItemSize=function(){return this.itemSize},r.prototype.getItemCount=function(){return this.itemsLength},r.prototype.virtualRepeatUpdate_=function(e,n){this.isVirtualRepeatUpdating_=!0;var i=e&&e.length||0,o=!1;if(this.items&&i<this.items.length&&0!==this.container.getScrollOffset())return this.items=e,void this.container.resetScroll();if(i!==this.itemsLength&&(o=!0,this.itemsLength=i),this.items=e,(e!==n||o)&&this.updateIndexes_(),this.parentNode=this.$element[0].parentNode,o&&this.container.setScrollSize(i*this.itemSize),this.isFirstRender){this.isFirstRender=!1;var r=this.$attrs.mdStartIndex?this.$scope.$eval(this.$attrs.mdStartIndex):this.container.topIndex;this.container.scrollToIndex(r)}Object.keys(this.blocks).forEach(function(e){var t=parseInt(e,10);(t<this.newStartIndex||t>=this.newEndIndex)&&this.poolBlock_(t)},this),this.$browser.$$checkUrlChange=t.noop;var a,s,l=[],c=[];for(a=this.newStartIndex;a<this.newEndIndex&&null==this.blocks[a];a++)s=this.getBlock_(a),this.updateBlock_(s,a),l.push(s);for(;null!=this.blocks[a];a++)this.updateBlock_(this.blocks[a],a);for(var d=a-1;a<this.newEndIndex;a++)s=this.getBlock_(a),this.updateBlock_(s,a),c.push(s);l.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(l),this.$element[0].nextSibling),c.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(c),this.blocks[d]&&this.blocks[d].element[0].nextSibling),this.$browser.$$checkUrlChange=this.browserCheckUrlChange,this.startIndex=this.newStartIndex,this.endIndex=this.newEndIndex,this.isVirtualRepeatUpdating_=!1},r.prototype.getBlock_=function(e){if(this.pooledBlocks.length)return this.pooledBlocks.pop();var n;return this.transclude(t.bind(this,function(t,i){n={element:t,new:!0,scope:i},this.updateScope_(i,e),this.parentNode.appendChild(t[0])})),n},r.prototype.updateBlock_=function(e,t){this.blocks[t]=e,(e.new||e.scope.$index!==t||e.scope[this.repeatName]!==this.items[t])&&(e.new=!1,this.updateScope_(e.scope,t),this.$rootScope.$$phase||e.scope.$digest())},r.prototype.updateScope_=function(e,t){e.$index=t,e[this.repeatName]=this.items&&this.items[t],this.extraName&&(e[this.extraName(this.$scope)]=this.items[t])},r.prototype.poolBlock_=function(e){this.pooledBlocks.push(this.blocks[e]),this.parentNode.removeChild(this.blocks[e].element[0]),delete this.blocks[e]},r.prototype.domFragmentFromBlocks_=function(e){var t=this.$document[0].createDocumentFragment();return e.forEach(function(e){t.appendChild(e.element[0])}),t},r.prototype.updateIndexes_=function(){var e=this.items?this.items.length:0,t=Math.ceil(this.container.getSize()/this.itemSize);this.newStartIndex=Math.max(0,Math.min(e-t,Math.floor(this.container.getScrollOffset()/this.itemSize))),this.newVisibleEnd=this.newStartIndex+t+l,this.newEndIndex=Math.min(e,this.newVisibleEnd),this.newStartIndex=Math.max(0,this.newStartIndex-l)},a.prototype.$$includeIndexes=function(e,t){for(var n=e;t>n;n++)this.hasOwnProperty(n)||(this[n]=this.model.getItemAtIndex(n));this.length=this.model.getLength()}}(),function(){function e(e,n,i,o,r,a,s,l,c){function d(s,d,g){function m(){s.delay=s.delay||u}function f(){var e="center top";switch(s.direction){case"left":e="right center";break;case"right":e="left center";break;case"top":e="center bottom";break;case"bottom":e="center top"}x.css("transform-origin",e)}function h(){s.$on("$destroy",function(){s.visible=!1,d.remove(),t.element(n).off("resize",A)}),s.$watch("visible",function(e){e?C():T()}),s.$watch("direction",S)}function v(){I.attr("aria-label")||I.text().trim()||I.attr("aria-label",d.text().trim())}function y(){d.detach(),d.attr("role","tooltip")}function b(){function e(){w(!1)}var i=!1,r=t.element(n);if(I[0]&&"MutationObserver"in n){var a=new MutationObserver(function(e){e.forEach(function(e){"disabled"===e.attributeName&&I[0].disabled&&(w(!1),s.$digest())})});a.observe(I[0],{attributes:!0})}var l=function(){c=document.activeElement===I[0]},c=!1;r.on("blur",l),r.on("resize",A),document.addEventListener("scroll",e,!0),s.$on("$destroy",function(){r.off("blur",l),r.off("resize",A),document.removeEventListener("scroll",e,!0),a&&a.disconnect()});var d=function(e){return"focus"===e.type&&c?void(c=!1):(I.on("blur mouseleave touchend touchcancel",u),void w(!0))},u=function(){((s.hasOwnProperty("autohide")?s.autohide:g.hasOwnProperty("mdAutohide"))||i||o[0].activeElement!==I[0])&&(I.off("blur mouseleave touchend touchcancel",u),I.triggerHandler("blur"),w(!1)),i=!1};I.on("mousedown",function(){i=!0}),I.on("focus mouseenter touchstart",d)}function w(t){w.value=!!t,w.queued||(t?(w.queued=!0,e(function(){s.visible=w.value,w.queued=!1},s.delay)):r.nextTick(function(){s.visible=!1}))}function C(){return k.append(d),r.hasComputedStyle(d,"display","none")?(s.visible=!1,void d.detach()):(S(),void t.forEach([d,x],function(e){l.addClass(e,"_md-show")}))}function T(){var e=[];t.forEach([d,x],function(t){t.parent()&&t.hasClass("_md-show")&&e.push(l.removeClass(t,"_md-show"))}),c.all(e).then(function(){s.visible||d.detach()})}function S(){s.visible&&(f(),E())}function E(){function e(e){var t={left:e.left,top:e.top};return t.left=Math.min(t.left,k.prop("scrollWidth")-n.width-p),t.left=Math.max(t.left,p),t.top=Math.min(t.top,k.prop("scrollHeight")-n.height-p),t.top=Math.max(t.top,p),t}function t(e){return"left"===e?{left:i.left-n.width-p,top:i.top+i.height/2-n.height/2}:"right"===e?{left:i.left+i.width+p,top:i.top+i.height/2-n.height/2}:"top"===e?{left:i.left+i.width/2-n.width/2,top:i.top-n.height-p}:{left:i.left+i.width/2-n.width/2,top:i.top+i.height+p}}var n=r.offsetRect(d,k),i=r.offsetRect(I,k),o=t(s.direction),a=d.prop("offsetParent");s.direction?o=e(o):a&&o.top>a.scrollHeight-n.height-p&&(o=e(t("top"))),d.css({left:o.left+"px",top:o.top+"px"})}a(d);var I=r.getParentWithPointerEvents(d),x=t.element(d[0].getElementsByClassName("_md-content")[0]),k=t.element(document.body),A=i.throttle(function(){S()});l.pin&&l.pin(d,I),m(),y(),b(),f(),h(),v()}var u=0,p=8;return{restrict:"E",transclude:!0,priority:210,template:'<div class="_md-content" ng-transclude></div>',scope:{delay:"=?mdDelay",visible:"=?mdVisible",autohide:"=?mdAutohide",direction:"@?mdDirection"},link:d}}t.module("material.components.tooltip",["material.core"]).directive("mdTooltip",e),e.$inject=["$timeout","$window","$$rAF","$document","$mdUtil","$mdTheming","$rootElement","$animate","$q"]}(),function(){function e(e){function t(t,r,a){var s=parseInt(a.mdWhiteframe,10)||o;(s>i||n>s)&&(e.warn("md-whiteframe attribute value is invalid. It should be a number between "+n+" and "+i,r[0]),s=o),r.addClass("md-whiteframe-"+s+"dp")}var n=1,i=24,o=4;return{restrict:"A",link:t}}t.module("material.components.whiteframe",["material.core"]).directive("mdWhiteframe",e),e.$inject=["$log"]}(),function(){function e(e,i,s,l,c,d,u,p,g,m){function f(){s.initOptionalProperties(e,g,{searchText:null,selectedItem:null}),c(i),b(),s.nextTick(function(){C(),v(),y(),i.on("focus",y)})}function h(){function t(){var e=0,t=i.find("md-input-container");if(t.length){var n=t.find("input");e=t.prop("offsetHeight"),e-=n.prop("offsetTop"),e-=n.prop("offsetHeight"),e+=t.prop("offsetTop")}return e}function n(){var e=pe.scrollContainer.getBoundingClientRect(),t={};e.right>u.right-r&&(t.left=c.right-e.width+"px"),pe.$.scrollContainer.css(t)}if(!pe)return s.nextTick(h,!1,e);var l,c=pe.wrap.getBoundingClientRect(),d=pe.snap.getBoundingClientRect(),u=pe.root.getBoundingClientRect(),p=d.bottom-u.top,m=u.bottom-d.top,f=c.left-u.left,v=c.width,y=t();g.mdFloatingLabel&&(f+=a,v-=2*a),l={left:f+"px",minWidth:v+"px",maxWidth:Math.max(c.right-u.left,u.right-c.left)-r+"px"},p>m&&u.height-c.bottom-r<o?(l.top="auto",l.bottom=m+"px",l.maxHeight=Math.min(o,c.top-u.top-r)+"px"):(l.top=p-y+"px",l.bottom="auto",l.maxHeight=Math.min(o,u.bottom+s.scrollTop()-c.bottom-r)+"px"),pe.$.scrollContainer.css(l),s.nextTick(n,!1)}function v(){pe.$.root.length&&(c(pe.$.scrollContainer),pe.$.scrollContainer.detach(),pe.$.root.append(pe.$.scrollContainer),u.pin&&u.pin(pe.$.scrollContainer,p))}function y(){e.autofocus&&pe.input.focus()}function b(){var n=parseInt(e.delay,10)||0;g.$observe("disabled",function(e){ce.isDisabled=s.parseAttributeBoolean(e,!1)}),g.$observe("required",function(e){ce.isRequired=s.parseAttributeBoolean(e,!1)}),g.$observe("readonly",function(e){ce.isReadonly=s.parseAttributeBoolean(e,!1)}),e.$watch("searchText",n?s.debounce(P,n):P),e.$watch("selectedItem",A),t.element(d).on("resize",h),e.$on("$destroy",w)}function w(){if(ce.hidden||s.enableScrolling(),t.element(d).off("resize",h),pe){var e="ul scroller scrollContainer input".split(" ");t.forEach(e,function(e){pe.$[e].remove()})}}function C(){pe={main:i[0],scrollContainer:i[0].getElementsByClassName("md-virtual-repeat-container")[0],scroller:i[0].getElementsByClassName("md-virtual-repeat-scroller")[0],ul:i.find("ul")[0],input:i.find("input")[0],wrap:i.find("md-autocomplete-wrap")[0],root:document.body},pe.li=pe.ul.getElementsByTagName("li"),pe.snap=T(),pe.$=S(pe)}function T(){for(var e=i;e.length;e=e.parent())if(t.isDefined(e.attr("md-autocomplete-snap")))return e[0];return pe.wrap}function S(e){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=t.element(e[i]));return n}function E(t,n){!t&&n?(h(),pe&&s.nextTick(function(){s.disableScrollAround(pe.ul)},!1,e)):t&&!n&&s.nextTick(function(){s.enableScrolling()},!1,e)}function I(){me=!0}function x(){he||pe.input.focus(),me=!1,ce.hidden=V()}function k(){pe.input.focus()}function A(t,n){t&&j(t).then(function(i){e.searchText=i,D(t,n)}),t!==n&&M()}function M(){t.isFunction(e.itemChange)&&e.itemChange(H(e.selectedItem))}function _(){t.isFunction(e.textChange)&&e.textChange()}function D(e,t){fe.forEach(function(n){n(e,t)})}function $(e){-1==fe.indexOf(e)&&fe.push(e)}function O(e){var t=fe.indexOf(e);-1!=t&&fe.splice(t,1)}function P(t,n){ce.index=G(),t!==n&&j(e.selectedItem).then(function(i){t!==i&&(e.selectedItem=null,t!==n&&_(),X()?se():(ce.matches=[],U(!1),te()))})}function N(){he=!1,me||(ce.hidden=V())}function F(e){e&&(me=!1,he=!1),pe.input.blur()}function L(){he=!0,t.isString(e.searchText)||(e.searchText=""),ce.hidden=V(),ce.hidden||se()}function R(e){switch(e.keyCode){case l.KEY_CODE.DOWN_ARROW:if(ce.loading)return;e.stopPropagation(),e.preventDefault(),ce.index=Math.min(ce.index+1,ce.matches.length-1),ie(),te();break;case l.KEY_CODE.UP_ARROW:if(ce.loading)return;e.stopPropagation(),e.preventDefault(),ce.index=ce.index<0?ce.matches.length-1:Math.max(0,ce.index-1),ie(),te();break;case l.KEY_CODE.TAB:if(x(),ce.hidden||ce.loading||ce.index<0||ce.matches.length<1)return;Z(ce.index);break;case l.KEY_CODE.ENTER:if(ce.hidden||ce.loading||ce.index<0||ce.matches.length<1)return;if(W())return;e.stopPropagation(),e.preventDefault(),Z(ce.index);break;case l.KEY_CODE.ESCAPE:e.stopPropagation(),e.preventDefault(),Q(),F(!0)}}function B(){return t.isNumber(e.minLength)?e.minLength:1}function j(t){function n(t){return t&&e.itemText?e.itemText(H(t)):null}return m.when(n(t)||t)}function H(e){if(!e)return n;var t={};return ce.itemName&&(t[ce.itemName]=e),t}function G(){return e.autoselect?0:-1}function U(e){ce.loading!=e&&(ce.loading=e),ce.hidden=V()}function V(){return!(!ce.loading||q())||(!!W()||(!he||!z()))}function z(){return X()&&q()||ae()}function q(){return!!ce.matches.length}function W(){return!!ce.scope.selectedItem}function Y(){return ce.loading&&!W()}function K(){return j(ce.matches[ce.index])}function X(){return(e.searchText||"").length>=B()}function J(e,t,n){Object.defineProperty(ce,e,{get:function(){return n},set:function(e){var i=n;n=e,t(e,i)}})}function Z(t){s.nextTick(function(){j(ce.matches[t]).then(function(e){var t=pe.$.input.controller("ngModel");t.$setViewValue(e),t.$render()}).finally(function(){e.selectedItem=ce.matches[t],U(!1)})},!1)}function Q(){U(!0),ce.index=0,ce.matches=[],e.searchText="";var t=document.createEvent("CustomEvent");t.initCustomEvent("input",!0,!0,{value:e.searchText}),pe.input.dispatchEvent(t),pe.input.focus()}function ee(n){function i(t){t&&(t=m.when(t),ye++,U(!0),s.nextTick(function(){t.then(o).finally(function(){0==--ye&&U(!1)})},!0,e))}function o(t){ge[a]=t,(n||"")===(e.searchText||"")&&(ce.matches=t,ce.hidden=V(),ce.loading&&U(!1),e.selectOnMatch&&le(),te(),h())}var r=e.$parent.$eval(ue),a=n.toLowerCase(),l=t.isArray(r),c=!!r.then;l?o(r):c&&i(r)}function te(){K().then(function(e){ce.messages=[ne(),e]})}function ne(){if(ve===ce.matches.length)return"";switch(ve=ce.matches.length,ce.matches.length){case 0:return"There are no matches available.";case 1:return"There is 1 match available.";default:return"There are "+ce.matches.length+" matches available."}}function ie(){if(pe.li[0]){var e=pe.li[0].offsetHeight,t=e*ce.index,n=t+e,i=pe.scroller.clientHeight,o=pe.scroller.scrollTop;o>t?re(t):n>o+i&&re(n-i)}}function oe(){return 0!==ye}function re(e){pe.$.scrollContainer.controller("mdVirtualRepeatContainer").scrollTo(e)}function ae(){var e=(ce.scope.searchText||"").length;return ce.hasNotFound&&!q()&&(!ce.loading||oe())&&e>=B()&&(he||me)&&!W()}function se(){var t=e.searchText||"",n=t.toLowerCase();!e.noCache&&ge[n]?(ce.matches=ge[n],te()):ee(t),ce.hidden=V()}function le(){var t=e.searchText,n=ce.matches,i=n[0];1===n.length&&j(i).then(function(n){var i=t==n;e.matchInsensitive&&!i&&(i=t.toLowerCase()==n.toLowerCase()),i&&Z(0)})}var ce=this,de=e.itemsExpr.split(/ in /i),ue=de[1],pe=null,ge={},me=!1,fe=[],he=!1,ve=0,ye=0;return J("hidden",E,!0),ce.scope=e,ce.parent=e.$parent,ce.itemName=de[0],ce.matches=[],ce.loading=!1,ce.hidden=!0,ce.index=null,ce.messages=[],ce.id=s.nextUid(),ce.isDisabled=null,ce.isRequired=null,ce.isReadonly=null,ce.hasNotFound=!1,ce.keydown=R,ce.blur=N,ce.focus=L,ce.clear=Q,ce.select=Z,ce.listEnter=I,ce.listLeave=x,ce.mouseUp=k,ce.getCurrentDisplayValue=K,ce.registerSelectedItemWatcher=$,ce.unregisterSelectedItemWatcher=O,ce.notFoundVisible=ae,ce.loadingIsVisible=Y,f()}t.module("material.components.autocomplete").controller("MdAutocompleteCtrl",e);var i=41,o=5.5*i,r=8,a=2;e.$inject=["$scope","$element","$mdUtil","$mdConstant","$mdTheming","$window","$animate","$rootElement","$attrs","$q"]}(),function(){function e(){return{controller:"MdAutocompleteCtrl",controllerAs:"$mdAutocompleteCtrl",scope:{inputName:"@mdInputName",inputMinlength:"@mdInputMinlength",inputMaxlength:"@mdInputMaxlength",searchText:"=?mdSearchText",selectedItem:"=?mdSelectedItem",itemsExpr:"@mdItems",itemText:"&mdItemText",placeholder:"@placeholder",noCache:"=?mdNoCache",selectOnMatch:"=?mdSelectOnMatch",matchInsensitive:"=?mdMatchCaseInsensitive",itemChange:"&?mdSelectedItemChange",textChange:"&?mdSearchTextChange",minLength:"=?mdMinLength",delay:"=?mdDelay",autofocus:"=?mdAutofocus",floatingLabel:"@?mdFloatingLabel",autoselect:"=?mdAutoselect",menuClass:"@?mdMenuClass",inputId:"@?mdInputId"},link:function(e,t,n,i){i.hasNotFound=!!t.attr("md-has-not-found")},template:function(e,t){function n(){var t=e.find("md-item-template").detach(),n=t.length?t.html():e.html();return t.length||e.empty(),"<md-autocomplete-parent-scope md-autocomplete-replace>"+n+"</md-autocomplete-parent-scope>"}function i(){var t=e.find("md-not-found").detach(),n=t.length?t.html():"";return n?'<li ng-if="$mdAutocompleteCtrl.notFoundVisible()"                         md-autocomplete-parent-scope>'+n+"</li>":""}function o(){return t.mdFloatingLabel?'            <md-input-container flex ng-if="floatingLabel">              <label>{{floatingLabel}}</label>              <input type="search"                  '+(null!=l?'tabindex="'+l+'"':"")+'                  id="{{ inputId || \'fl-input-\' + $mdAutocompleteCtrl.id }}"                  name="{{inputName}}"                  autocomplete="off"                  ng-required="$mdAutocompleteCtrl.isRequired"                  ng-readonly="$mdAutocompleteCtrl.isReadonly"                  ng-minlength="inputMinlength"                  ng-maxlength="inputMaxlength"                  ng-disabled="$mdAutocompleteCtrl.isDisabled"                  ng-model="$mdAutocompleteCtrl.scope.searchText"                  ng-keydown="$mdAutocompleteCtrl.keydown($event)"                  ng-blur="$mdAutocompleteCtrl.blur()"                  '+(null!=t.mdNoAsterisk?'md-no-asterisk="'+t.mdNoAsterisk+'"':"")+'                  ng-focus="$mdAutocompleteCtrl.focus()"                  aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                  '+(null!=t.mdSelectOnFocus?'md-select-on-focus=""':"")+'                  aria-label="{{floatingLabel}}"                  aria-autocomplete="list"                  aria-haspopup="true"                  aria-activedescendant=""                  aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>              <div md-autocomplete-parent-scope md-autocomplete-replace>'+s+"</div>            </md-input-container>":'            <input flex type="search"                '+(null!=l?'tabindex="'+l+'"':"")+'                id="{{ inputId || \'input-\' + $mdAutocompleteCtrl.id }}"                name="{{inputName}}"                ng-if="!floatingLabel"                autocomplete="off"                ng-required="$mdAutocompleteCtrl.isRequired"                ng-disabled="$mdAutocompleteCtrl.isDisabled"                ng-readonly="$mdAutocompleteCtrl.isReadonly"                ng-model="$mdAutocompleteCtrl.scope.searchText"                ng-keydown="$mdAutocompleteCtrl.keydown($event)"                ng-blur="$mdAutocompleteCtrl.blur()"                ng-focus="$mdAutocompleteCtrl.focus()"                placeholder="{{placeholder}}"                aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                '+(null!=t.mdSelectOnFocus?'md-select-on-focus=""':"")+'                aria-label="{{placeholder}}"                aria-autocomplete="list"                aria-haspopup="true"                aria-activedescendant=""                aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>            <button                type="button"                tabindex="-1"                ng-if="$mdAutocompleteCtrl.scope.searchText && !$mdAutocompleteCtrl.isDisabled"                ng-click="$mdAutocompleteCtrl.clear()">              <md-icon md-svg-icon="md-close"></md-icon>              <span class="_md-visually-hidden">Clear</span>            </button>                '}var r=i(),a=n(),s=e.html(),l=t.tabindex;return r&&e.attr("md-has-not-found",!0),e.attr("tabindex","-1"),'        <md-autocomplete-wrap            layout="row"            ng-class="{ \'md-whiteframe-z1\': !floatingLabel, \'md-menu-showing\': !$mdAutocompleteCtrl.hidden }"            role="listbox">          '+o()+'          <md-progress-linear              class="'+(t.mdFloatingLabel?"md-inline":"")+'"              ng-if="$mdAutocompleteCtrl.loadingIsVisible()"              md-mode="indeterminate"></md-progress-linear>          <md-virtual-repeat-container              md-auto-shrink              md-auto-shrink-min="1"              ng-mouseenter="$mdAutocompleteCtrl.listEnter()"              ng-mouseleave="$mdAutocompleteCtrl.listLeave()"              ng-mouseup="$mdAutocompleteCtrl.mouseUp()"              ng-hide="$mdAutocompleteCtrl.hidden"              class="md-autocomplete-suggestions-container md-whiteframe-z1"              ng-class="{ \'md-not-found\': $mdAutocompleteCtrl.notFoundVisible() }"              role="presentation">            <ul class="md-autocomplete-suggestions"                ng-class="::menuClass"                id="ul-{{$mdAutocompleteCtrl.id}}">              <li md-virtual-repeat="item in $mdAutocompleteCtrl.matches"                  ng-class="{ selected: $index === $mdAutocompleteCtrl.index }"                  ng-click="$mdAutocompleteCtrl.select($index)"                  md-extra-name="$mdAutocompleteCtrl.itemName">                  '+a+"                  </li>"+r+'            </ul>          </md-virtual-repeat-container>        </md-autocomplete-wrap>        <aria-status            class="_md-visually-hidden"            role="status"            aria-live="assertive">          <p ng-repeat="message in $mdAutocompleteCtrl.messages track by $index" ng-if="message">{{message}}</p>        </aria-status>'}}}t.module("material.components.autocomplete").directive("mdAutocomplete",e)}(),function(){function e(e,t){function n(e,n,i){return function(e,n,o){function r(n,i){l[i]=e[n],e.$watch(n,function(e){t.nextTick(function(){l[i]=e})})}function a(){var t=!1,n=!1;e.$watch(function(){n||t||(t=!0,e.$$postDigest(function(){n||l.$digest(),t=n=!1}))}),l.$watch(function(){n=!0})}var s=e.$mdAutocompleteCtrl,l=s.parent.$new(),c=s.itemName;r("$index","$index"),r("item",c),a(),i(l,function(e){n.after(e)})}}return{restrict:"AE",compile:n,terminal:!0,transclude:"element"}}t.module("material.components.autocomplete").directive("mdAutocompleteParentScope",e),e.$inject=["$compile","$mdUtil"]}(),function(){function e(e,n,i){function o(o,r){var s=null,l=null,c=i.mdHighlightFlags||"",d=e.$watch(function(e){return{term:o(e),unsafeText:r(e)}},function(e,i){null!==s&&e.unsafeText===i.unsafeText||(s=t.element("<div>").text(e.unsafeText).html()),null!==l&&e.term===i.term||(l=a(e.term,c)),n.html(s.replace(l,'<span class="highlight">$&</span>'))},!0);n.on("$destroy",d)}function r(e){return e&&e.replace(/[\\\^\$\*\+\?\.\(\)\|\{}\[\]]/g,"\\$&")}function a(e,t){var n="";return t.indexOf("^")>=1&&(n+="^"),n+=e,t.indexOf("$")>=1&&(n+="$"),new RegExp(r(n),t.replace(/[\$\^]/g,""))}this.init=o}t.module("material.components.autocomplete").controller("MdHighlightCtrl",e),e.$inject=["$scope","$element","$attrs"]}(),function(){function e(e,t){return{terminal:!0,controller:"MdHighlightCtrl",compile:function(n,i){var o=t(i.mdHighlightText),r=e(n.html());return function(e,t,n,i){i.init(o,r)}}}}t.module("material.components.autocomplete").directive("mdHighlightText",e),e.$inject=["$interpolate","$parse"]}(),function(){function i(e,t,i,o,r){this.$scope=e,this.$element=t,this.$mdConstant=i,this.$timeout=o,this.$mdUtil=r,this.isEditting=!1,this.parentController=n,this.enableChipEdit=!1}t.module("material.components.chips").controller("MdChipCtrl",i),i.$inject=["$scope","$element","$mdConstant","$timeout","$mdUtil"],i.prototype.init=function(e){this.parentController=e,this.enableChipEdit=this.parentController.enableChipEdit,this.enableChipEdit&&(this.$element.on("keydown",this.chipKeyDown.bind(this)),this.$element.on("mousedown",this.chipMouseDown.bind(this)),this.getChipContent().addClass("_md-chip-content-edit-is-enabled"))},i.prototype.getChipContent=function(){var e=this.$element[0].getElementsByClassName("_md-chip-content");return t.element(e[0])},i.prototype.getContentElement=function(){return t.element(this.getChipContent().children()[0])},i.prototype.getChipIndex=function(){return parseInt(this.$element.attr("index"))},i.prototype.goOutOfEditMode=function(){if(this.isEditting){this.isEditting=!1,this.$element.removeClass("_md-chip-editing"),this.getChipContent()[0].contentEditable="false";var e=this.getChipIndex();this.getContentElement().text()?(this.parentController.updateChipContents(e,this.getContentElement().text()),this.$mdUtil.nextTick(function(){this.parentController.selectedChip===e&&this.parentController.focusChip(e)}.bind(this))):this.parentController.removeChipAndFocusInput(e)}},i.prototype.selectNodeContents=function(t){var n,i;document.body.createTextRange?(n=document.body.createTextRange(),n.moveToElementText(t),n.select()):e.getSelection&&(i=e.getSelection(),n=document.createRange(),n.selectNodeContents(t),i.removeAllRanges(),i.addRange(n))},i.prototype.goInEditMode=function(){this.isEditting=!0,this.$element.addClass("_md-chip-editing"),this.getChipContent()[0].contentEditable="true",this.getChipContent().on("blur",function(){this.goOutOfEditMode()}.bind(this)),this.selectNodeContents(this.getChipContent()[0])},i.prototype.chipKeyDown=function(e){this.isEditting||e.keyCode!==this.$mdConstant.KEY_CODE.ENTER&&e.keyCode!==this.$mdConstant.KEY_CODE.SPACE?this.isEditting&&e.keyCode===this.$mdConstant.KEY_CODE.ENTER&&(e.preventDefault(),this.goOutOfEditMode()):(e.preventDefault(),this.goInEditMode())},i.prototype.chipMouseDown=function(){this.getChipIndex()==this.parentController.selectedChip&&this.enableChipEdit&&!this.isEditting&&this.goInEditMode()}}(),function(){function e(e,i){function o(n,o){return n.append(i.processTemplate(r)),function(n,i,o,r){var a=r.shift(),s=r.shift();e(i),a&&(s.init(a),t.element(i[0].querySelector("._md-chip-content")).on("blur",function(){a.selectedChip=-1,a.$scope.$applyAsync()}))}}var r=i.processTemplate(n);return{restrict:"E",require:["^?mdChips","mdChip"],compile:o,controller:"MdChipCtrl"}}t.module("material.components.chips").directive("mdChip",e);var n='    <span ng-if="!$mdChipsCtrl.readonly" class="_md-visually-hidden">      {{$mdChipsCtrl.deleteHint}}    </span>';e.$inject=["$mdTheming","$mdUtil"]}(),function(){function e(e){function t(t,n,i,o){n.on("click",function(e){t.$apply(function(){o.removeChip(t.$$replacedScope.$index)})}),e(function(){n.attr({tabindex:-1,"aria-hidden":!0}),n.find("button").attr("tabindex","-1")})}return{restrict:"A",require:"^mdChips",scope:!1,link:t}}t.module("material.components.chips").directive("mdChipRemove",e),e.$inject=["$timeout"]}(),function(){function e(e){function t(t,n,i){var o=t.$parent.$mdChipsCtrl,r=o.parent.$new(!1,o.parent);r.$$replacedScope=t,r.$chip=t.$chip,r.$index=t.$index,r.$mdChipsCtrl=o;var a=o.$scope.$eval(i.mdChipTransclude);n.html(a),e(n.contents())(r)}return{restrict:"EA",terminal:!0,link:t,scope:!1}}t.module("material.components.chips").directive("mdChipTransclude",e),e.$inject=["$compile"]}(),function(){function e(e,t,n,i,o,r){this.$timeout=o,this.$mdConstant=t,this.$scope=e,this.parent=e.$parent,this.$log=n,this.$element=i,this.ngModelCtrl=null,this.userInputNgModelCtrl=null,this.userInputElement=null,this.items=[],this.selectedChip=-1,this.hasAutocomplete=!1,this.enableChipEdit=r.parseAttributeBoolean(this.mdEnableChipEdit),this.deleteHint="Press delete to remove this chip.",this.deleteButtonLabel="Remove",this.chipBuffer="",this.useOnAppend=!1,this.useTransformChip=!1,this.useOnAdd=!1,this.useOnRemove=!1,this.useOnSelect=!1}t.module("material.components.chips").controller("MdChipsCtrl",e),e.$inject=["$scope","$mdConstant","$log","$element","$timeout","$mdUtil"],e.prototype.inputKeydown=function(e){var t=this.getChipBuffer();if(!(this.hasAutocomplete&&e.isDefaultPrevented&&e.isDefaultPrevented())){if(e.keyCode===this.$mdConstant.KEY_CODE.BACKSPACE){if(t)return;return e.preventDefault(),e.stopPropagation(),void(this.items.length&&this.selectAndFocusChipSafe(this.items.length-1))}if((!this.separatorKeys||this.separatorKeys.length<1)&&(this.separatorKeys=[this.$mdConstant.KEY_CODE.ENTER]),-1!==this.separatorKeys.indexOf(e.keyCode)){if(this.hasAutocomplete&&this.requireMatch||!t)return;if(e.preventDefault(),this.hasMaxChipsReached())return;this.appendChip(t.trim()),this.resetChipBuffer()}}},e.prototype.updateChipContents=function(e,t){e>=0&&e<this.items.length&&(this.items[e]=t,this.ngModelCtrl.$setDirty())},e.prototype.isEditingChip=function(){return!!this.$element[0].getElementsByClassName("_md-chip-editing").length},e.prototype.chipKeydown=function(e){if(!this.getChipBuffer()&&!this.isEditingChip())switch(e.keyCode){case this.$mdConstant.KEY_CODE.BACKSPACE:case this.$mdConstant.KEY_CODE.DELETE:if(this.selectedChip<0)return;e.preventDefault(),this.removeAndSelectAdjacentChip(this.selectedChip);break;case this.$mdConstant.KEY_CODE.LEFT_ARROW:e.preventDefault(),this.selectedChip<0&&(this.selectedChip=this.items.length),this.items.length&&this.selectAndFocusChipSafe(this.selectedChip-1);break;case this.$mdConstant.KEY_CODE.RIGHT_ARROW:e.preventDefault(),this.selectAndFocusChipSafe(this.selectedChip+1);break;case this.$mdConstant.KEY_CODE.ESCAPE:case this.$mdConstant.KEY_CODE.TAB:if(this.selectedChip<0)return;e.preventDefault(),this.onFocus()}},e.prototype.getPlaceholder=function(){return this.items.length&&(""==this.secondaryPlaceholder||this.secondaryPlaceholder)?this.secondaryPlaceholder:this.placeholder},e.prototype.removeAndSelectAdjacentChip=function(e){var n=this.getAdjacentChipIndex(e);this.removeChip(e),this.$timeout(t.bind(this,function(){this.selectAndFocusChipSafe(n)}))},e.prototype.resetSelectedChip=function(){this.selectedChip=-1},e.prototype.getAdjacentChipIndex=function(e){var t=this.items.length-1;return 0==t?-1:e==t?e-1:e},e.prototype.appendChip=function(e){if(this.useTransformChip&&this.transformChip){var n=this.transformChip({$chip:e});t.isDefined(n)&&(e=n)}if(t.isObject(e)){if(this.items.some(function(n){return t.equals(e,n)}))return}if(!(null==e||this.items.indexOf(e)+1)){var i=this.items.push(e);this.ngModelCtrl.$setDirty(),this.validateModel(),this.useOnAdd&&this.onAdd&&this.onAdd({$chip:e,$index:i})}},e.prototype.useOnAppendExpression=function(){this.$log.warn("md-on-append is deprecated; please use md-transform-chip or md-on-add instead"),this.useTransformChip&&this.transformChip||(this.useTransformChip=!0,this.transformChip=this.onAppend)},e.prototype.useTransformChipExpression=function(){this.useTransformChip=!0},e.prototype.useOnAddExpression=function(){this.useOnAdd=!0},e.prototype.useOnRemoveExpression=function(){this.useOnRemove=!0},e.prototype.useOnSelectExpression=function(){this.useOnSelect=!0},e.prototype.getChipBuffer=function(){return this.userInputElement?this.userInputNgModelCtrl?this.userInputNgModelCtrl.$viewValue:this.userInputElement[0].value:this.chipBuffer},e.prototype.resetChipBuffer=function(){this.userInputElement?this.userInputNgModelCtrl?(this.userInputNgModelCtrl.$setViewValue(""),this.userInputNgModelCtrl.$render()):this.userInputElement[0].value="":this.chipBuffer=""},e.prototype.hasMaxChipsReached=function(){return t.isString(this.maxChips)&&(this.maxChips=parseInt(this.maxChips,10)||0),this.maxChips>0&&this.items.length>=this.maxChips},e.prototype.validateModel=function(){this.ngModelCtrl.$setValidity("md-max-chips",!this.hasMaxChipsReached())},e.prototype.removeChip=function(e){var t=this.items.splice(e,1);this.ngModelCtrl.$setDirty(),this.validateModel(),t&&t.length&&this.useOnRemove&&this.onRemove&&this.onRemove({$chip:t[0],$index:e})},e.prototype.removeChipAndFocusInput=function(e){this.removeChip(e),this.onFocus()},e.prototype.selectAndFocusChipSafe=function(e){return this.items.length?e===this.items.length?this.onFocus():(e=Math.max(e,0),e=Math.min(e,this.items.length-1),this.selectChip(e),void this.focusChip(e)):(this.selectChip(-1),void this.onFocus())},e.prototype.selectChip=function(e){e>=-1&&e<=this.items.length?(this.selectedChip=e,this.useOnSelect&&this.onSelect&&this.onSelect({$chip:this.items[this.selectedChip]})):this.$log.warn("Selected Chip index out of bounds; ignoring.")},e.prototype.selectAndFocusChip=function(e){this.selectChip(e),-1!=e&&this.focusChip(e)},e.prototype.focusChip=function(e){this.$element[0].querySelector('md-chip[index="'+e+'"] ._md-chip-content').focus()},e.prototype.configureNgModel=function(e){this.ngModelCtrl=e;var t=this;e.$render=function(){t.items=t.ngModelCtrl.$viewValue}},e.prototype.onFocus=function(){var e=this.$element[0].querySelector("input");e&&e.focus(),this.resetSelectedChip()},e.prototype.onInputFocus=function(){this.inputHasFocus=!0,this.resetSelectedChip()},e.prototype.onInputBlur=function(){this.inputHasFocus=!1},e.prototype.configureUserInput=function(e){this.userInputElement=e;var n=e.controller("ngModel");n!=this.ngModelCtrl&&(this.userInputNgModelCtrl=n);var i=this.$scope,o=this,r=function(e,n){i.$evalAsync(t.bind(o,n,e))};e.attr({tabindex:0}).on("keydown",function(e){r(e,o.inputKeydown)}).on("focus",function(e){r(e,o.onInputFocus)}).on("blur",function(e){r(e,o.onInputBlur)})},e.prototype.configureAutocomplete=function(e){e&&(this.hasAutocomplete=!0,e.registerSelectedItemWatcher(t.bind(this,function(e){if(e){if(this.hasMaxChipsReached())return;this.appendChip(e),this.resetChipBuffer()}})),this.$element.find("input").on("focus",t.bind(this,this.onInputFocus)).on("blur",t.bind(this,this.onInputBlur)))},e.prototype.hasFocus=function(){return this.inputHasFocus||this.selectedChip>=0}}(),function(){function e(e,t,a,s,l){function c(n,i){function o(e){if(i.ngModel){var t=r[0].querySelector(e);return t&&t.outerHTML}}var r=i.$mdUserTemplate;i.$mdUserTemplate=null;var c=o("md-chips>md-chip-template"),d=o("md-chips>*[md-chip-remove]")||u.remove,p=c||u.default,g=o("md-chips>md-autocomplete")||o("md-chips>input")||u.input,m=r.find("md-chip");return r[0].querySelector("md-chip-template>*[md-chip-remove]")&&s.warn("invalid placement of md-chip-remove within md-chip-template."),function(n,o,r,s){t.initOptionalProperties(n,i),e(o);var f=s[0];if(c&&(f.enableChipEdit=!1),f.chipContentsTemplate=p,f.chipRemoveTemplate=d,f.chipInputTemplate=g,o.attr({"aria-hidden":!0,tabindex:-1}).on("focus",function(){f.onFocus()}),i.ngModel&&(f.configureNgModel(o.controller("ngModel")),r.mdTransformChip&&f.useTransformChipExpression(),r.mdOnAppend&&f.useOnAppendExpression(),r.mdOnAdd&&f.useOnAddExpression(),r.mdOnRemove&&f.useOnRemoveExpression(),r.mdOnSelect&&f.useOnSelectExpression(),g!=u.input&&n.$watch("$mdChipsCtrl.readonly",function(e){e||t.nextTick(function(){0===g.indexOf("<md-autocomplete")&&f.configureAutocomplete(o.find("md-autocomplete").controller("mdAutocomplete")),f.configureUserInput(o.find("input"))})}),t.nextTick(function(){var e=o.find("input");e&&e.toggleClass("md-input",!0)})),m.length>0){var h=a(m.clone())(n.$parent);l(function(){o.find("md-chips-wrap").prepend(h)})}}}function d(){return{chips:t.processTemplate(n),input:t.processTemplate(i),default:t.processTemplate(o),remove:t.processTemplate(r)}}var u=d();return{template:function(e,t){return t.$mdUserTemplate=e.clone(),u.chips},require:["mdChips"],restrict:"E",controller:"MdChipsCtrl",controllerAs:"$mdChipsCtrl",bindToController:!0,compile:c,scope:{readonly:"=readonly",placeholder:"@",mdEnableChipEdit:"@",secondaryPlaceholder:"@",maxChips:"@mdMaxChips",transformChip:"&mdTransformChip",onAppend:"&mdOnAppend",onAdd:"&mdOnAdd",onRemove:"&mdOnRemove",onSelect:"&mdOnSelect",deleteHint:"@",deleteButtonLabel:"@",separatorKeys:"=?mdSeparatorKeys",requireMatch:"=?mdRequireMatch"}}}t.module("material.components.chips").directive("mdChips",e);var n='      <md-chips-wrap          ng-keydown="$mdChipsCtrl.chipKeydown($event)"          ng-class="{ \'md-focused\': $mdChipsCtrl.hasFocus(), \'md-readonly\': !$mdChipsCtrl.ngModelCtrl || $mdChipsCtrl.readonly}"          class="md-chips">        <md-chip ng-repeat="$chip in $mdChipsCtrl.items"            index="{{$index}}"            ng-class="{\'md-focused\': $mdChipsCtrl.selectedChip == $index, \'md-readonly\': !$mdChipsCtrl.ngModelCtrl || $mdChipsCtrl.readonly}">          <div class="_md-chip-content"              tabindex="-1"              aria-hidden="true"              ng-click="!$mdChipsCtrl.readonly && $mdChipsCtrl.focusChip($index)"              ng-focus="!$mdChipsCtrl.readonly && $mdChipsCtrl.selectChip($index)"              md-chip-transclude="$mdChipsCtrl.chipContentsTemplate"></div>          <div ng-if="!$mdChipsCtrl.readonly"               class="_md-chip-remove-container"               md-chip-transclude="$mdChipsCtrl.chipRemoveTemplate"></div>        </md-chip>        <div class="_md-chip-input-container">          <div ng-if="!$mdChipsCtrl.readonly && $mdChipsCtrl.ngModelCtrl"               md-chip-transclude="$mdChipsCtrl.chipInputTemplate"></div>        </div>      </md-chips-wrap>',i='        <input            class="md-input"            tabindex="0"            placeholder="{{$mdChipsCtrl.getPlaceholder()}}"            aria-label="{{$mdChipsCtrl.getPlaceholder()}}"            ng-model="$mdChipsCtrl.chipBuffer"            ng-focus="$mdChipsCtrl.onInputFocus()"            ng-blur="$mdChipsCtrl.onInputBlur()"            ng-trim="false"            ng-keydown="$mdChipsCtrl.inputKeydown($event)">',o="      <span>{{$chip}}</span>",r='      <button          class="_md-chip-remove"          ng-if="!$mdChipsCtrl.readonly"          ng-click="$mdChipsCtrl.removeChipAndFocusInput($$replacedScope.$index)"          type="button"          aria-hidden="true"          tabindex="-1">        <md-icon md-svg-icon="md-close"></md-icon>        <span class="_md-visually-hidden">          {{$mdChipsCtrl.deleteButtonLabel}}        </span>      </button>';e.$inject=["$mdTheming","$mdUtil","$compile","$log","$timeout"]}(),function(){function e(){this.selectedItem=null,this.searchText=""}t.module("material.components.chips").controller("MdContactChipsCtrl",e),e.prototype.queryContact=function(e){var n=this.contactQuery({$query:e});return this.filterSelected?n.filter(t.bind(this,this.filterSelectedContacts)):n},e.prototype.itemName=function(e){return e[this.contactName]},e.prototype.filterSelectedContacts=function(e){return-1==this.contacts.indexOf(e)}}(),function(){function e(e,t){function i(n,i){return function(n,o,r,a){t.initOptionalProperties(n,i),e(o),o.attr("tabindex","-1")}}return{template:function(e,t){return n},restrict:"E",controller:"MdContactChipsCtrl",controllerAs:"$mdContactChipsCtrl",bindToController:!0,compile:i,scope:{contactQuery:"&mdContacts",placeholder:"@",secondaryPlaceholder:"@",contactName:"@mdContactName",contactImage:"@mdContactImage",contactEmail:"@mdContactEmail",contacts:"=ngModel",requireMatch:"=?mdRequireMatch",highlightFlags:"@?mdHighlightFlags"}}}t.module("material.components.chips").directive("mdContactChips",e);var n='      <md-chips class="md-contact-chips"          ng-model="$mdContactChipsCtrl.contacts"          md-require-match="$mdContactChipsCtrl.requireMatch"          md-autocomplete-snap>          <md-autocomplete              md-menu-class="md-contact-chips-suggestions"              md-selected-item="$mdContactChipsCtrl.selectedItem"              md-search-text="$mdContactChipsCtrl.searchText"              md-items="item in $mdContactChipsCtrl.queryContact($mdContactChipsCtrl.searchText)"              md-item-text="$mdContactChipsCtrl.itemName(item)"              md-no-cache="true"              md-autoselect              placeholder="{{$mdContactChipsCtrl.contacts.length == 0 ?                  $mdContactChipsCtrl.placeholder : $mdContactChipsCtrl.secondaryPlaceholder}}">            <div class="md-contact-suggestion">              <img                   ng-src="{{item[$mdContactChipsCtrl.contactImage]}}"                  alt="{{item[$mdContactChipsCtrl.contactName]}}"                  ng-if="item[$mdContactChipsCtrl.contactImage]" />              <span class="md-contact-name" md-highlight-text="$mdContactChipsCtrl.searchText"                    md-highlight-flags="{{$mdContactChipsCtrl.highlightFlags}}">                {{item[$mdContactChipsCtrl.contactName]}}              </span>              <span class="md-contact-email" >{{item[$mdContactChipsCtrl.contactEmail]}}</span>            </div>          </md-autocomplete>          <md-chip-template>            <div class="md-contact-avatar">              <img                   ng-src="{{$chip[$mdContactChipsCtrl.contactImage]}}"                  alt="{{$chip[$mdContactChipsCtrl.contactName]}}"                  ng-if="$chip[$mdContactChipsCtrl.contactImage]" />            </div>            <div class="md-contact-name">              {{$chip[$mdContactChipsCtrl.contactName]}}            </div>          </md-chip-template>      </md-chips>';e.$inject=["$mdTheming","$mdUtil"]}(),function(){function e(e,t,n){function i(i,o,r){function a(){var e=o.parent();return!(!e.attr("aria-label")&&!e.text())||!(!e.parent().attr("aria-label")&&!e.parent().text())}function s(){r.mdSvgIcon||r.mdSvgSrc||(r.mdFontIcon&&o.addClass("md-font "+r.mdFontIcon),o.addClass(e.fontSet(r.mdFontSet)))}t(o),s();var l=r.alt||r.mdFontIcon||r.mdSvgIcon||o.text(),c=r.$normalize(r.$attr.mdSvgIcon||r.$attr.mdSvgSrc||"");r["aria-label"]||(""===l||a()?o.text()||n.expect(o,"aria-hidden","true"):(n.expect(o,"aria-label",l),n.expect(o,"role","img"))),c&&r.$observe(c,function(t){o.empty(),t&&e(t).then(function(e){o.empty(),o.append(e)})})}return{restrict:"E",link:i}}t.module("material.components.icon").directive("mdIcon",["$mdIcon","$mdTheming","$mdAria",e])}(),function(){function n(){}function i(e,t){this.url=e,this.viewBoxSize=t||r.defaultViewBoxSize}function o(n,i,o,r,a,s){function l(e){return e=e||"",w[e]?o.when(d(w[e])):C.test(e)||T.test(e)?m(e).then(u(e)):(-1==e.indexOf(":")&&(e="$default:"+e),(n[e]?p:g)(e).then(u(e)))}function c(e){if(t.isUndefined(e)||!(e&&e.length))return n.defaultFontSet;var i=e;return t.forEach(n.fontSets,function(t){t.alias==e&&(i=t.fontSet||i)}),i}function d(e){var n=e.clone(),i="_cache"+s.nextUid();return n.id&&(n.id+=i),t.forEach(n.querySelectorAll("[id]"),function(e){e.id+=i}),n}function u(e){return function(t){return w[e]=h(t)?t:new v(t,n[e]),w[e].clone()}}function p(e){var t=n[e];return m(t.url).then(function(e){return new v(e,t)})}function g(e){function t(t){var n=e.slice(e.lastIndexOf(":")+1),o=t.querySelector("#"+n);return o?new v(o,s):i(e)}function i(e){var t="icon "+e+" not found";return r.warn(t),o.reject(t||e)}var a=e.substring(0,e.lastIndexOf(":"))||"$default",s=n[a];return s?m(s.url).then(t):i(e)}function m(n){function r(n){var i=T.exec(n),r=/base64/i.test(n),a=r?e.atob(i[2]):i[2];return o.when(t.element(a)[0])}function s(e){return i.get(e,{cache:a}).then(function(e){return t.element("<div>").append(e.data).find("svg")[0]}).catch(f)}return T.test(n)?r(n):s(n)}function f(e){var n=t.isString(e)?e:e.message||e.data||e.statusText;return r.warn(n),o.reject(n)}function h(e){return t.isDefined(e.element)&&t.isDefined(e.config)}function v(e,n){e&&"svg"!=e.tagName&&(e=t.element('<svg xmlns="http://www.w3.org/2000/svg">').append(e)[0]),e.getAttribute("xmlns")||e.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.element=e,this.config=n,this.prepare()}function y(){var e=this.config?this.config.viewBoxSize:n.defaultViewBoxSize;t.forEach({fit:"",height:"100%",width:"100%",preserveAspectRatio:"xMidYMid meet",viewBox:this.element.getAttribute("viewBox")||"0 0 "+e+" "+e,focusable:!1},function(e,t){this.element.setAttribute(t,e)},this)}function b(){return this.element.cloneNode(!0)}var w={},C=/[-\w@:%\+.~#?&\/\/=]{2,}\.[a-z]{2,4}\b(\/[-\w@:%\+.~#?&\/\/=]*)?/i,T=/^data:image\/svg\+xml[\s*;\w\-\=]*?(base64)?,(.*)$/i;return v.prototype={clone:b,prepare:y},l.fontSet=c,l}t.module("material.components.icon").provider("$mdIcon",n);var r={defaultViewBoxSize:24,defaultFontSet:"material-icons",fontSets:[]};n.prototype={icon:function(e,t,n){return-1==e.indexOf(":")&&(e="$default:"+e),r[e]=new i(t,n),this},iconSet:function(e,t,n){return r[e]=new i(t,n),this},defaultIconSet:function(e,t){var n="$default";return r[n]||(r[n]=new i(e,t)),r[n].viewBoxSize=t||r.defaultViewBoxSize,this},defaultViewBoxSize:function(e){return r.defaultViewBoxSize=e,this},fontSet:function(e,t){return r.fontSets.push({alias:e,fontSet:t||e}),this},defaultFontSet:function(e){return r.defaultFontSet=e||"",this},defaultIconSize:function(e){return r.defaultIconSize=e,this},preloadIcons:function(e){var t=this;[{id:"md-tabs-arrow",url:"md-tabs-arrow.svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 24 24"><g><polygon points="15.4,7.4 14,6 8,12 14,18 15.4,16.6 10.8,12 "/></g></svg>'},{id:"md-close",url:"md-close.svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 24 24"><g><path d="M19 6.41l-1.41-1.41-5.59 5.59-5.59-5.59-1.41 1.41 5.59 5.59-5.59 5.59 1.41 1.41 5.59-5.59 5.59 5.59 1.41-1.41-5.59-5.59z"/></g></svg>'},{id:"md-cancel",url:"md-cancel.svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 24 24"><g><path d="M12 2c-5.53 0-10 4.47-10 10s4.47 10 10 10 10-4.47 10-10-4.47-10-10-10zm5 13.59l-1.41 1.41-3.59-3.59-3.59 3.59-1.41-1.41 3.59-3.59-3.59-3.59 1.41-1.41 3.59 3.59 3.59-3.59 1.41 1.41-3.59 3.59 3.59 3.59z"/></g></svg>'},{id:"md-menu",url:"md-menu.svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>'},{id:"md-toggle-arrow",url:"md-toggle-arrow-svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 48 48"><path d="M24 16l-12 12 2.83 2.83 9.17-9.17 9.17 9.17 2.83-2.83z"/><path d="M0 0h48v48h-48z" fill="none"/></svg>'},{id:"md-calendar",url:"md-calendar.svg",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg>'}].forEach(function(n){t.icon(n.id,n.url),e.put(n.url,n.svg)})},$get:["$http","$q","$log","$templateCache","$mdUtil",function(e,t,n,i,a){return this.preloadIcons(i),o(r,e,t,n,i,a)}]},o.$inject=["config","$http","$q","$log","$templateCache","$mdUtil"]}(),function(){function e(e,n,o,r,a,s,l,c){this.$element=o,this.$attrs=r,this.$mdConstant=a,this.$mdUtil=l,this.$document=s,this.$scope=e,this.$rootScope=n,this.$timeout=c;var d=this;t.forEach(i,function(e){d[e]=t.bind(d,d[e])})}t.module("material.components.menuBar").controller("MenuBarController",e);var i=["handleKeyDown","handleMenuHover","scheduleOpenHoveredMenu","cancelScheduledOpen"];e.$inject=["$scope","$rootScope","$element","$attrs","$mdConstant","$document","$mdUtil","$timeout"],e.prototype.init=function(){var e=this.$element,t=this.$mdUtil,i=this.$scope,o=this,r=[];e.on("keydown",this.handleKeyDown),this.parentToolbar=t.getClosest(e,"MD-TOOLBAR"),r.push(this.$rootScope.$on("$mdMenuOpen",function(t,n){-1!=o.getMenus().indexOf(n[0])&&(e[0].classList.add("_md-open"),n[0].classList.add("_md-open"),o.currentlyOpenMenu=n.controller("mdMenu"),o.currentlyOpenMenu.registerContainerProxy(o.handleKeyDown),o.enableOpenOnHover())})),r.push(this.$rootScope.$on("$mdMenuClose",function(i,r,a){var s=o.getMenus();if(-1!=s.indexOf(r[0])&&(e[0].classList.remove("_md-open"),r[0].classList.remove("_md-open")),e[0].contains(r[0])){for(var l=r[0];l&&-1==s.indexOf(l);)l=t.getClosest(l,"MD-MENU",!0);l&&(a.skipFocus||l.querySelector("button:not([disabled])").focus(),o.currentlyOpenMenu=n,o.disableOpenOnHover(),o.setKeyboardMode(!0))}})),i.$on("$destroy",function(){for(;r.length;)r.shift()()}),this.setKeyboardMode(!0)},e.prototype.setKeyboardMode=function(e){e?this.$element[0].classList.add("_md-keyboard-mode"):this.$element[0].classList.remove("_md-keyboard-mode")},e.prototype.enableOpenOnHover=function(){if(!this.openOnHoverEnabled){this.openOnHoverEnabled=!0;var e;(e=this.parentToolbar)&&(e.dataset.mdRestoreStyle=e.getAttribute("style"),e.style.position="relative",e.style.zIndex=100),t.element(this.getMenus()).on("mouseenter",this.handleMenuHover)}},e.prototype.handleMenuHover=function(e){this.setKeyboardMode(!1),this.openOnHoverEnabled&&this.scheduleOpenHoveredMenu(e)},e.prototype.disableOpenOnHover=function(){if(this.openOnHoverEnabled){this.openOnHoverEnabled=!1;var e;(e=this.parentToolbar)&&(e.style.cssText=e.dataset.mdRestoreStyle||""),t.element(this.getMenus()).off("mouseenter",this.handleMenuHover)}},e.prototype.scheduleOpenHoveredMenu=function(e){var n=t.element(e.currentTarget),i=n.controller("mdMenu");this.setKeyboardMode(!1),this.scheduleOpenMenu(i)},e.prototype.scheduleOpenMenu=function(e){var t=this,i=this.$timeout;e!=t.currentlyOpenMenu&&(i.cancel(t.pendingMenuOpen),t.pendingMenuOpen=i(function(){t.pendingMenuOpen=n,t.currentlyOpenMenu&&t.currentlyOpenMenu.close(!0,{closeAll:!0}),e.open()},200,!1))},e.prototype.handleKeyDown=function(e){var n=this.$mdConstant.KEY_CODE,i=this.currentlyOpenMenu,o=i&&i.isOpen;this.setKeyboardMode(!0);var r,a,s;switch(e.keyCode){case n.DOWN_ARROW:i?i.focusMenuContainer():this.openFocusedMenu(),r=!0;break;case n.UP_ARROW:i&&i.close(),r=!0;break;case n.LEFT_ARROW:a=this.focusMenu(-1),o&&(s=t.element(a).controller("mdMenu"),this.scheduleOpenMenu(s)),r=!0;break;case n.RIGHT_ARROW:a=this.focusMenu(1),o&&(s=t.element(a).controller("mdMenu"),this.scheduleOpenMenu(s)),r=!0}r&&(e&&e.preventDefault&&e.preventDefault(),e&&e.stopImmediatePropagation&&e.stopImmediatePropagation())},e.prototype.focusMenu=function(e){var t=this.getMenus(),n=this.getFocusedMenuIndex();-1==n&&(n=this.getOpenMenuIndex());var i=!1;return-1==n?(n=0,i=!0):(0>e&&n>0||e>0&&n<t.length-e)&&(n+=e,i=!0),i?(t[n].querySelector("button").focus(),t[n]):void 0},e.prototype.openFocusedMenu=function(){var e=this.getFocusedMenu();e&&t.element(e).controller("mdMenu").open()},e.prototype.getMenus=function(){var e=this.$element;return this.$mdUtil.nodesToArray(e[0].children).filter(function(e){return"MD-MENU"==e.nodeName})},e.prototype.getFocusedMenu=function(){return this.getMenus()[this.getFocusedMenuIndex()]},e.prototype.getFocusedMenuIndex=function(){var e=this.$mdUtil,t=e.getClosest(this.$document[0].activeElement,"MD-MENU");return t?this.getMenus().indexOf(t):-1},e.prototype.getOpenMenuIndex=function(){for(var e=this.getMenus(),t=0;t<e.length;++t)if(e[t].classList.contains("_md-open"))return t;return-1}}(),function(){function e(e,n){return{restrict:"E",require:"mdMenuBar",controller:"MenuBarController",compile:function(i,o){return o.ariaRole||i[0].setAttribute("role","menubar"),t.forEach(i[0].children,function(n){if("MD-MENU"==n.nodeName){n.hasAttribute("md-position-mode")||(n.setAttribute("md-position-mode","left bottom"),n.querySelector("button,a").setAttribute("role","menuitem"));var i=e.nodesToArray(n.querySelectorAll("md-menu-content"));t.forEach(i,function(e){e.classList.add("_md-menu-bar-menu"),e.classList.add("md-dense"),e.hasAttribute("width")||e.setAttribute("width",5)})}}),function(e,t,i,o){n(e,t),o.init()}}}}t.module("material.components.menuBar").directive("mdMenuBar",e),e.$inject=["$mdUtil","$mdTheming"]}(),function(){function e(){return{restrict:"E",compile:function(e,t){t.role||e[0].setAttribute("role","separator")}}}t.module("material.components.menuBar").directive("mdMenuDivider",e)}(),function(){function e(e,t,n){this.$element=t,this.$attrs=n,this.$scope=e}t.module("material.components.menuBar").controller("MenuItemController",e),e.$inject=["$scope","$element","$attrs"],e.prototype.init=function(e){var t=this.$element,n=this.$attrs;this.ngModel=e,"checkbox"!=n.type&&"radio"!=n.type||(this.mode=n.type,this.iconEl=t[0].children[0],this.buttonEl=t[0].children[1],e&&this.initClickListeners())},e.prototype.clearNgAria=function(){var e=this.$element[0],n=["role","tabindex","aria-invalid","aria-checked"];t.forEach(n,function(t){e.removeAttribute(t)})},e.prototype.initClickListeners=function(){function e(){if("radio"==s){var e=a.ngValue?r.$eval(a.ngValue):a.value;return o.$modelValue==e}return o.$modelValue}function n(e){e?c.off("click",d):c.on("click",d)}var i=this,o=this.ngModel,r=this.$scope,a=this.$attrs,s=(this.$element,this.mode);this.handleClick=t.bind(this,this.handleClick);var l=this.iconEl,c=t.element(this.buttonEl),d=this.handleClick;a.$observe("disabled",n),n(a.disabled),o.$render=function(){i.clearNgAria(),e()?(l.style.display="",c.attr("aria-checked","true")):(l.style.display="none",c.attr("aria-checked","false"))},r.$$postDigest(o.$render)},e.prototype.handleClick=function(e){var t,n=this.mode,i=this.ngModel,o=this.$attrs;"checkbox"==n?t=!i.$modelValue:"radio"==n&&(t=o.ngValue?this.$scope.$eval(o.ngValue):o.value),i.$setViewValue(t),i.$render()}}(),function(){function e(){return{require:["mdMenuItem","?ngModel"],priority:210,compile:function(e,n){function i(n,i,o){o=o||e,o instanceof t.element&&(o=o[0]),o.hasAttribute(n)||o.setAttribute(n,i)}function o(t){if(e[0].hasAttribute(t)){var n=e[0].getAttribute(t);a[0].setAttribute(t,n),e[0].removeAttribute(t)}}if("checkbox"==n.type||"radio"==n.type){var r=e[0].textContent,a=t.element('<md-button type="button"></md-button>');a.html(r),a.attr("tabindex","0"),e.html(""),e.append(t.element('<md-icon md-svg-icon="check"></md-icon>')),e.append(a),e[0].classList.add("md-indent"),i("role","checkbox"==n.type?"menuitemcheckbox":"menuitemradio",a),t.forEach(["ng-disabled"],o)}else i("role","menuitem",e[0].querySelector("md-button,button,a"));return function(e,t,n,i){var o=i[0],r=i[1];o.init(r)}},controller:"MenuItemController"}}t.module("material.components.menuBar").directive("mdMenuItem",e)}(),function(){function e(e,i,o,r,a,s,l,c){var d,u,p=this;this.nestLevel=parseInt(i.mdNestLevel,10)||0,this.init=function(n,i){i=i||{},d=n,u=o[0].querySelector("[ng-click],[ng-mouseenter]"),u.setAttribute("aria-expanded","false"),this.isInMenuBar=i.isInMenuBar,this.nestedMenus=a.nodesToArray(d[0].querySelectorAll(".md-nested-menu")),d.on("$mdInterimElementRemove",function(){p.isOpen=!1});var s="menu_container_"+a.nextUid();d.attr("id",s),t.element(u).attr({"aria-owns":s,"aria-haspopup":"true"}),r.$on("$destroy",this.disableHoverListener),d.on("$destroy",function(){e.destroy()})};var g,m,f=[];this.enableHoverListener=function(){f.push(l.$on("$mdMenuOpen",function(e,t){d[0].contains(t[0])&&(p.currentlyOpenMenu=t.controller("mdMenu"),p.isAlreadyOpening=!1,p.currentlyOpenMenu.registerContainerProxy(p.triggerContainerProxy.bind(p)))})),f.push(l.$on("$mdMenuClose",function(e,t){d[0].contains(t[0])&&(p.currentlyOpenMenu=n)})),m=t.element(a.nodesToArray(d[0].children[0].children)),m.on("mouseenter",p.handleMenuItemHover),m.on("mouseleave",p.handleMenuItemMouseLeave)},this.disableHoverListener=function(){for(;f.length;)f.shift()();m&&m.off("mouseenter",p.handleMenuItemHover),m&&m.off("mouseleave",p.handleMenuMouseLeave)},this.handleMenuItemHover=function(e){if(!p.isAlreadyOpening){var n=e.target.querySelector("md-menu")||a.getClosest(e.target,"MD-MENU");g=s(function(){if(n&&(n=t.element(n).controller("mdMenu")),p.currentlyOpenMenu&&p.currentlyOpenMenu!=n){var e=p.nestLevel+1;p.currentlyOpenMenu.close(!0,{closeTo:e}),p.isAlreadyOpening=!0,n.open()}else n&&!n.isOpen&&n.open&&(p.isAlreadyOpening=!0,n.open())},n?100:250);var i=e.currentTarget.querySelector(".md-button:not([disabled])");i&&i.focus()}},this.handleMenuItemMouseLeave=function(){g&&(s.cancel(g),g=n)},this.open=function(t){t&&t.stopPropagation(),t&&t.preventDefault(),p.isOpen||(p.enableHoverListener(),p.isOpen=!0,u=u||(t?t.target:o[0]),u.setAttribute("aria-expanded","true"),r.$emit("$mdMenuOpen",o),e.show({scope:r,mdMenuCtrl:p,nestLevel:p.nestLevel,element:d,target:u,preserveElement:!0,parent:"body"}).finally(function(){u.setAttribute("aria-expanded","false"),p.disableHoverListener()}))},r.$mdOpenMenu=this.open,r.$watch(function(){return p.isOpen},function(e){e?(d.attr("aria-hidden","false"),o[0].classList.add("_md-open"),t.forEach(p.nestedMenus,function(e){e.classList.remove("_md-open")})):(d.attr("aria-hidden","true"),o[0].classList.remove("_md-open")),r.$mdMenuIsOpen=p.isOpen}),this.focusMenuContainer=function(){var e=d[0].querySelector("[md-menu-focus-target]");e||(e=d[0].querySelector(".md-button")),e.focus()},this.registerContainerProxy=function(e){this.containerProxy=e},this.triggerContainerProxy=function(e){this.containerProxy&&this.containerProxy(e)},this.destroy=function(){return p.isOpen?e.destroy():c.when(!1)},this.close=function(n,i){if(p.isOpen){p.isOpen=!1;var a=t.extend({},i,{skipFocus:n});if(r.$emit("$mdMenuClose",o,a),e.hide(null,i),!n){var s=p.restoreFocusTo||o.find("button")[0];s instanceof t.element&&(s=s[0]),s&&s.focus()}}},this.positionMode=function(){var e=(i.mdPositionMode||"target").split(" ");return 1==e.length&&e.push(e[0]),{left:e[0],top:e[1]}},this.offsets=function(){var e=(i.mdOffset||"0 0").split(" ").map(parseFloat);if(2==e.length)return{left:e[0],top:e[1]};if(1==e.length)return{top:e[0],left:e[0]};throw Error("Invalid offsets specified. Please follow format <x, y> or <n>")}}t.module("material.components.menu").controller("mdMenuCtrl",e),e.$inject=["$mdMenu","$attrs","$element","$scope","$mdUtil","$timeout","$rootScope","$q"]}(),function(){function e(e){function i(n){n.addClass("md-menu");var i=n.children()[0];if(i.hasAttribute("ng-click")||(i=i.querySelector("[ng-click],[ng-mouseenter]")||i),!i||"MD-BUTTON"!=i.nodeName&&"BUTTON"!=i.nodeName||i.hasAttribute("type")||i.setAttribute("type","button"),2!=n.children().length)throw Error(r+"Expected two children elements.");i&&i.setAttribute("aria-haspopup","true");var a=n[0].querySelectorAll("md-menu"),s=parseInt(n[0].getAttribute("md-nest-level"),10)||0;return a&&t.forEach(e.nodesToArray(a),function(e){e.hasAttribute("md-position-mode")||e.setAttribute("md-position-mode","cascade"),e.classList.add("_md-nested-menu"),e.setAttribute("md-nest-level",s+1)}),o}function o(e,i,o,r){var a=r[0],s=r[1]!=n,l=t.element('<div class="_md-open-menu-container md-whiteframe-z2"></div>'),c=i.children()[1];c.hasAttribute("role")||c.setAttribute("role","menu"),l.append(c),i.on("$destroy",function(){l.remove()}),i.append(l),l[0].style.display="none",a.init(l,{isInMenuBar:s})}var r="Invalid HTML for md-menu: ";return{restrict:"E",require:["mdMenu","?^mdMenuBar"],controller:"mdMenuCtrl",scope:!0,compile:i}}t.module("material.components.menu").directive("mdMenu",e),e.$inject=["$mdUtil"]}(),function(){function e(e){function i(e,i,a,s,l,c,d,u,p){function g(n,i,o){return o.nestLevel?t.noop:(o.disableParentScroll&&!e.getClosest(o.target,"MD-DIALOG")?o.restoreScroll=e.disableScrollAround(o.element,o.parent):o.disableParentScroll=!1,o.hasBackdrop&&(o.backdrop=e.createBackdrop(n,"_md-menu-backdrop _md-click-catcher"),p.enter(o.backdrop,s[0].body)),function(){o.backdrop&&o.backdrop.remove(),o.disableParentScroll&&o.restoreScroll()})}function m(e,t,n){function i(){return u(t,{addClass:"_md-leave"}).start()}function o(){t.removeClass("_md-active"),y(t,n),n.alreadyOpen=!1}return n.cleanupInteraction(),n.cleanupResizing(),n.hideBackdrop(),!0===n.$destroy?o():i().then(o)}function f(n,o,r){function s(){return r.parent.append(o),o[0].style.display="",c(function(e){var t=b(o,r);o.removeClass("_md-leave"),u(o,{addClass:"_md-active",from:w.toCss(t),to:w.toCss({transform:""})}).start().then(e)})}function p(){if(!r.target)throw Error("$mdMenu.show() expected a target to animate from in options.target");t.extend(r,{alreadyOpen:!1,isRemoved:!1,target:t.element(r.target),parent:t.element(r.parent),menuContentEl:t.element(o[0].querySelector("md-menu-content"))})}function m(){var e=function(e,t){return d.throttle(function(){if(!r.isRemoved){var n=b(e,t);e.css(w.toCss(n))}})}(o,r);return l.addEventListener("resize",e),l.addEventListener("orientationchange",e),function(){l.removeEventListener("resize",e),l.removeEventListener("orientationchange",e)}}function f(){function t(t){var n;switch(t.keyCode){case a.KEY_CODE.ESCAPE:r.mdMenuCtrl.close(!1,{closeAll:!0}),n=!0;break;case a.KEY_CODE.UP_ARROW:h(t,r.menuContentEl,r,-1)||r.nestLevel||r.mdMenuCtrl.triggerContainerProxy(t),n=!0;break;case a.KEY_CODE.DOWN_ARROW:h(t,r.menuContentEl,r,1)||r.nestLevel||r.mdMenuCtrl.triggerContainerProxy(t),n=!0;break;case a.KEY_CODE.LEFT_ARROW:r.nestLevel?r.mdMenuCtrl.close():r.mdMenuCtrl.triggerContainerProxy(t),n=!0;break;case a.KEY_CODE.RIGHT_ARROW:var i=e.getClosest(t.target,"MD-MENU");i&&i!=r.parent[0]?t.target.click():r.mdMenuCtrl.triggerContainerProxy(t),n=!0}n&&(t.preventDefault(),t.stopImmediatePropagation())}function i(e){e.preventDefault(),e.stopPropagation(),n.$apply(function(){r.mdMenuCtrl.close(!0,{closeAll:!0})})}function s(t){function i(){n.$apply(function(){r.mdMenuCtrl.close(!0,{closeAll:!0})})}function o(e,t){if(!e)return!1;for(var n,i=0;n=t[i];++i)for(var o,r=[n,"data-"+n,"x-"+n],a=0;o=r[a];++a)if(e.hasAttribute(o))return!0;return!1}var a=t.target;do{if(a==r.menuContentEl[0])return;if((o(a,["ng-click","ng-href","ui-sref"])||"BUTTON"==a.nodeName||"MD-BUTTON"==a.nodeName)&&!o(a,["md-prevent-menu-close"])){var s=e.getClosest(a,"MD-MENU");a.hasAttribute("disabled")||s&&s!=r.parent[0]||i();break}}while(a=a.parentNode)}o.addClass("_md-clickable"),r.backdrop&&r.backdrop.on("click",i),r.menuContentEl.on("keydown",t),r.menuContentEl[0].addEventListener("click",s,!0);var l=r.menuContentEl[0].querySelector("[md-menu-focus-target]");if(!l){var c=r.menuContentEl[0].firstElementChild;l=c&&(c.querySelector(".md-button:not([disabled])")||c.firstElementChild)}return l&&l.focus(),function(){o.removeClass("_md-clickable"),r.backdrop&&r.backdrop.off("click",i),r.menuContentEl.off("keydown",t),r.menuContentEl[0].removeEventListener("click",s,!0)}}return p(r),i.inherit(r.menuContentEl,r.target),r.cleanupResizing=m(),r.hideBackdrop=g(n,o,r),s().then(function(e){return r.alreadyOpen=!0,r.cleanupInteraction=f(),e})}function h(t,n,i,o){for(var r,a=e.getClosest(t.target,"MD-MENU-ITEM"),s=e.nodesToArray(n[0].children),l=s.indexOf(a),c=l+o;c>=0&&c<s.length;c+=o){if(r=v(s[c].querySelector(".md-button")))break}return r}function v(e){return e&&-1!=e.getAttribute("tabindex")?(e.focus(),s[0].activeElement==e):void 0}function y(e,t){t.preserveElement?o(e).style.display="none":o(e).parentNode===o(t.parent)&&o(t.parent).removeChild(o(e))}function b(t,i){function o(e){e.top=Math.max(Math.min(e.top,y.bottom-d.offsetHeight),y.top),e.left=Math.max(Math.min(e.left,y.right-d.offsetWidth),y.left)}function a(){for(var e=0;e<u.children.length;++e)if("none"!=l.getComputedStyle(u.children[e]).display)return u.children[e]}var c,d=t[0],u=t[0].firstElementChild,p=u.getBoundingClientRect(),g=s[0].body,m=g.getBoundingClientRect(),f=l.getComputedStyle(u),h=i.target[0].querySelector("[md-menu-origin]")||i.target[0],v=h.getBoundingClientRect(),y={left:m.left+r,top:Math.max(m.top,0)+r,bottom:Math.max(m.bottom,Math.max(m.top,0)+m.height)-r,right:m.right-r},b={top:0,left:0,right:0,bottom:0},w={top:0,left:0,right:0,bottom:0},C=i.mdMenuCtrl.positionMode();"target"!=C.top&&"target"!=C.left&&"target-right"!=C.left||(c=a())&&(c=c.firstElementChild||c,c=c.querySelector("[md-menu-align-target]")||c,b=c.getBoundingClientRect(),w={top:parseFloat(d.style.top||0),left:parseFloat(d.style.left||0)});var T={},S="top ";switch(C.top){case"target":T.top=w.top+v.top-b.top;break;case"cascade":T.top=v.top-parseFloat(f.paddingTop)-h.style.top;break;case"bottom":T.top=v.top+v.height;break;default:throw new Error('Invalid target mode "'+C.top+'" specified for md-menu on Y axis.')}var E="rtl"==e.bidi();switch(C.left){case"target":T.left=w.left+v.left-b.left,S+=E?"right":"left";break;case"target-left":T.left=v.left,S+="left";break;case"target-right":T.left=v.right-p.width+(p.right-b.right),S+="right";break;case"cascade":var I=E?v.left-p.width<y.left:v.right+p.width<y.right;T.left=I?v.right-h.style.left:v.left-h.style.left-p.width,S+=I?"left":"right";break;case"left":E?(T.left=v.right-p.width,S+="right"):(T.left=v.left,S+="left");break;default:throw new Error('Invalid target mode "'+C.left+'" specified for md-menu on X axis.')}var x=i.mdMenuCtrl.offsets();T.top+=x.top,T.left+=x.left,o(T);var k=Math.round(100*Math.min(v.width/d.offsetWidth,1))/100,A=Math.round(100*Math.min(v.height/d.offsetHeight,1))/100;return{top:Math.round(T.top),left:Math.round(T.left),transform:i.alreadyOpen?n:e.supplant("scale({0},{1})",[k,A]),transformOrigin:S}}var w=e.dom.animator;return{parent:"body",onShow:f,onRemove:m,hasBackdrop:!0,disableParentScroll:!0,skipCompile:!0,preserveScope:!0,skipHide:!0,themable:!0}}function o(e){return e instanceof t.element&&(e=e[0]),e}var r=8;return i.$inject=["$mdUtil","$mdTheming","$mdConstant","$document","$window","$q","$$rAF","$animateCss","$animate"],e("$mdMenu").setDefaults({methods:["target"],options:i})}t.module("material.components.menu").provider("$mdMenu",e),e.$inject=["$$interimElementProvider"]}(),function(){function e(e,n,i,o,r,a,s){function l(s,l,d){function m(t,o,a,l,d){var u=++x,m=r.now(),f=o-t,h=p(s.mdDiameter),v=h-g(h),y=a||i.easeFn,b=l||i.duration;o===t?T.attr("d",c(o,h,v,d)):e(function i(o){var a=n.Math.min((o||r.now())-m,b);T.attr("d",c(y(a,t,f,b),h,v,d)),u===x&&b>a&&e(i)})}function v(){m(S,E,i.easeFnIndeterminate,i.durationIndeterminate,I),I=(I+E)%100;var e=S;S=-E,E=-e}function y(){if(!w){var t=r.now(),n=i.rotationDurationIndeterminate,o=p(s.mdDiameter)/2;o=" "+o+", "+o,e(function a(s){var l=s||r.now(),c=l-t,d=i.easingPresets.linearEase(c,0,360,n);T.attr("transform","rotate("+d+o+")"),w?e(a):T.removeAttr("transform"),c>=n&&(t=l)}),w=a(v,i.durationIndeterminate+50,0,!1),v(),l.removeAttr("aria-valuenow")}}function b(){w&&(a.cancel(w),w=null)}var w,C=t.element(l[0].querySelector("svg")),T=t.element(l[0].querySelector("path")),S=i.startIndeterminate,E=i.endIndeterminate,I=0,x=0;o(l),s.mdMode===h&&y(),s.$watchGroup(["value","mdMode"],function(e,t){var n=e[1];if(n!==f&&n!==h&&(n=h,d.$set("mdMode",n)),n===h)y();else{var i=u(e[0]);b(),l.attr("aria-valuenow",i),m(u(t[0]),i)}}),s.$watch("mdDiameter",function(e){var t=p(e),n=g(t),i={width:t+"px",height:t+"px"};C[0].setAttribute("viewBox","0 0 "+t+" "+t),C.css(i),l.css(i),T.css("stroke-width",n+"px")})}function c(e,t,n,i){var o,r=3.5999,a=i||0,s=t/2,l=n/2,c=a*r,u=e*r,p=d(s,l,c),g=d(s,l,u+c),m=0>u?0:1;return o=0>u?u>=-180?0:1:180>=u?0:1,"M"+p+"A"+l+","+l+" 0 "+o+","+m+" "+g}function d(e,t,i){var o=(i-90)*m;return e+t*n.Math.cos(o)+","+(e+t*n.Math.sin(o))}function u(e){return n.Math.max(0,n.Math.min(e||0,100))}function p(e){var t=i.progressSize;if(e){var n=parseFloat(e);return e.lastIndexOf("%")===e.length-1&&(n=n/100*t),n}return t}function g(e){return i.strokeWidth/100*e}var m=n.Math.PI/180,f="determinate",h="indeterminate";return{restrict:"E",scope:{value:"@",mdDiameter:"@",mdMode:"@"},template:'<svg xmlns="http://www.w3.org/2000/svg"><path fill="none"/></svg>',compile:function(e,n){if(e.attr({"aria-valuemin":0,"aria-valuemax":100,role:"progressbar"}),t.isUndefined(n.mdMode)){var i=t.isDefined(n.value),o=i?f:h;s.debug(r.supplant("Auto-adding the missing md-mode='{0}' to the ProgressCircular element",[o])),n.$set("mdMode",o)}else n.$set("mdMode",n.mdMode.trim());return l}}}t.module("material.components.progressCircular").directive("mdProgressCircular",e),e.$inject=["$$rAF","$window","$mdProgressCircular","$mdTheming","$mdUtil","$interval","$log"]}(),function(){function e(){function e(e,t,n,i){return n*e/i+t}function n(e,t,n,i){var o=(e/=i)*e,r=o*e;return t+n*(6*r*o+-15*o*o+10*r)}var i={progressSize:50,strokeWidth:10,duration:100,easeFn:e,durationIndeterminate:500,startIndeterminate:3,endIndeterminate:80,rotationDurationIndeterminate:2900,easeFnIndeterminate:n,easingPresets:{linearEase:e,materialEase:n}};return{configure:function(e){return i=t.extend(i,e||{})},$get:function(){return i}}}t.module("material.components.progressCircular").provider("$mdProgressCircular",e)}(),function(){function e(){function e(e,i,o,r){if(r){var a=r.getTabElementIndex(i),s=n(i,"md-tab-body").remove(),l=n(i,"md-tab-label").remove(),c=r.insertTab({scope:e,parent:e.$parent,index:a,element:i,template:s.html(),label:l.html()},a);e.select=e.select||t.noop,e.deselect=e.deselect||t.noop,e.$watch("active",function(e){e&&r.select(c.getIndex(),!0)}),e.$watch("disabled",function(){r.refreshIndex()}),e.$watch(function(){return r.getTabElementIndex(i)},function(e){c.index=e,r.updateTabOrder()}),e.$on("$destroy",function(){r.removeTab(c)})}}function n(e,n){for(var i=e[0].children,o=0,r=i.length;r>o;o++){var a=i[o];if(a.tagName===n.toUpperCase())return t.element(a)}return t.element()}return{require:"^?mdTabs",terminal:!0,compile:function(i,o){var r=n(i,"md-tab-label"),a=n(i,"md-tab-body");if(0==r.length&&(r=t.element("<md-tab-label></md-tab-label>"),o.label?r.text(o.label):r.append(i.contents()),0==a.length)){var s=i.contents().detach();a=t.element("<md-tab-body></md-tab-body>"),a.append(s)}return i.append(r),a.html()&&i.append(a),e},scope:{active:"=?mdActive",disabled:"=?ngDisabled",select:"&?mdOnSelect",deselect:"&?mdOnDeselect"}}}t.module("material.components.tabs").directive("mdTab",e)}(),function(){function e(){return{require:"^?mdTabs",link:function(e,t,n,i){i&&i.attachRipple(e,t)}}}t.module("material.components.tabs").directive("mdTabItem",e)}(),function(){function e(){return{terminal:!0}}t.module("material.components.tabs").directive("mdTabLabel",e)}(),function(){function e(e){return{restrict:"A",compile:function(t,n){var i=e(n.mdTabScroll,null,!0);return function(e,t){t.on("mousewheel",function(t){e.$apply(function(){i(e,{$event:t})})})}}}}t.module("material.components.tabs").directive("mdTabScroll",e),e.$inject=["$parse"]}(),function(){function e(e,i,o,r,a,s,l,c,d,u){function p(){ce.selectedIndex=ce.selectedIndex||0,g(),f(),m(),u(i),s.nextTick(function(){oe(),ee(),re(),ce.tabs[ce.selectedIndex]&&ce.tabs[ce.selectedIndex].scope.select(),me=!0,W()})}function g(){var e=c.$mdTabsTemplate,n=t.element(ue.data);n.html(e),d(n.contents())(ce.parent),delete c.$mdTabsTemplate}function m(){t.element(o).on("resize",P),e.$on("$destroy",y)}function f(){e.$watch("$mdTabsCtrl.selectedIndex",x)}function h(e,t){var n=c.$normalize("md-"+e);t&&q(e,t),c.$observe(n,function(t){ce[e]=t})}function v(e,t){function n(t){ce[e]="false"!==t}var i=c.$normalize("md-"+e);t&&q(e,t),c.hasOwnProperty(i)&&n(c[i]),c.$observe(i,n)}function y(){ge=!0,t.element(o).off("resize",P)}function b(e){t.element(ue.wrapper).toggleClass("md-stretch-tabs",G()),re()}function w(e){ce.shouldCenterTabs=U()}function C(e,n){e!==n&&(t.forEach(ue.tabs,function(t){t.style.maxWidth=e+"px"}),s.nextTick(ce.updateInkBarStyles))}function T(e,t){e!==t&&(ce.maxTabWidth=X(),ce.shouldCenterTabs=U(),s.nextTick(function(){ce.maxTabWidth=X(),ee(ce.selectedIndex)}))}function S(e){i[e?"removeClass":"addClass"]("md-no-tab-content")}function E(n){var i=ce.shouldCenterTabs?"":"-"+n+"px";t.element(ue.paging).css(r.CSS.TRANSFORM,"translate3d("+i+", 0, 0)"),e.$broadcast("$mdTabsPaginationChanged")}function I(e,t){e!==t&&ue.tabs[e]&&(ee(),Q())}function x(t,n){t!==n&&(ce.selectedIndex=z(t),ce.lastSelectedIndex=n,ce.updateInkBarStyles(),oe(),ee(t),e.$broadcast("$mdTabsChanged"),ce.tabs[n]&&ce.tabs[n].scope.deselect(),ce.tabs[t]&&ce.tabs[t].scope.select())}function k(e){var t=i[0].getElementsByTagName("md-tab");return Array.prototype.indexOf.call(t,e[0])}function A(){A.watcher||(A.watcher=e.$watch(function(){s.nextTick(function(){A.watcher&&i.prop("offsetParent")&&(A.watcher(),A.watcher=null,P())},!1)}))}function M(e){switch(e.keyCode){case r.KEY_CODE.LEFT_ARROW:e.preventDefault(),Z(-1,!0);break;case r.KEY_CODE.RIGHT_ARROW:e.preventDefault(),Z(1,!0);break;case r.KEY_CODE.SPACE:case r.KEY_CODE.ENTER:e.preventDefault(),de||(ce.selectedIndex=ce.focusIndex)}ce.lastClick=!1}function _(e,t){de||(ce.focusIndex=ce.selectedIndex=e),ce.lastClick=!0,t&&ce.noSelectClick||s.nextTick(function(){ce.tabs[e].element.triggerHandler("click")},!1)}function D(e){ce.shouldPaginate&&(e.preventDefault(),ce.offsetLeft=se(ce.offsetLeft-e.wheelDelta))}function $(){var e,t,n=ue.canvas.clientWidth,i=n+ce.offsetLeft;for(e=0;e<ue.tabs.length&&(t=ue.tabs[e],!(t.offsetLeft+t.offsetWidth>i));e++);ce.offsetLeft=se(t.offsetLeft)}function O(){var e,t;for(e=0;e<ue.tabs.length&&(t=ue.tabs[e],!(t.offsetLeft+t.offsetWidth>=ce.offsetLeft));e++);ce.offsetLeft=se(t.offsetLeft+t.offsetWidth-ue.canvas.clientWidth)}function P(){ce.lastSelectedIndex=ce.selectedIndex,ce.offsetLeft=se(ce.offsetLeft),s.nextTick(function(){ce.updateInkBarStyles(),W()})}function N(e){t.element(ue.inkBar).toggleClass("ng-hide",e)}function F(e){i.toggleClass("md-dynamic-height",e)}function L(e){if(!ge){var t=ce.selectedIndex,n=ce.tabs.splice(e.getIndex(),1)[0];ie(),ce.selectedIndex===t&&(n.scope.deselect(),ce.tabs[ce.selectedIndex]&&ce.tabs[ce.selectedIndex].scope.select()),s.nextTick(function(){W(),ce.offsetLeft=se(ce.offsetLeft)})}}function R(e,n){var i=me,o={getIndex:function(){return ce.tabs.indexOf(r)},isActive:function(){return this.getIndex()===ce.selectedIndex},isLeft:function(){return this.getIndex()<ce.selectedIndex},isRight:function(){return this.getIndex()>ce.selectedIndex},shouldRender:function(){return!ce.noDisconnect||this.isActive()},hasFocus:function(){return!ce.lastClick&&ce.hasFocus&&this.getIndex()===ce.focusIndex},id:s.nextUid()},r=t.extend(o,e);return t.isDefined(n)?ce.tabs.splice(n,0,r):ce.tabs.push(r),te(),ne(),s.nextTick(function(){W(),i&&ce.autoselect&&s.nextTick(function(){s.nextTick(function(){_(ce.tabs.indexOf(r))})})}),r}function B(){var e={};return e.wrapper=i[0].getElementsByTagName("md-tabs-wrapper")[0],e.data=i[0].getElementsByTagName("md-tab-data")[0],e.canvas=e.wrapper.getElementsByTagName("md-tabs-canvas")[0],e.paging=e.canvas.getElementsByTagName("md-pagination-wrapper")[0],e.tabs=e.paging.getElementsByTagName("md-tab-item"),e.dummies=e.canvas.getElementsByTagName("md-dummy-tab"),e.inkBar=e.paging.getElementsByTagName("md-ink-bar")[0],e.contentsWrapper=i[0].getElementsByTagName("md-tabs-content-wrapper")[0],e.contents=e.contentsWrapper.getElementsByTagName("md-tab-content"),e}function j(){return ce.offsetLeft>0}function H(){var e=ue.tabs[ue.tabs.length-1];return e&&e.offsetLeft+e.offsetWidth>ue.canvas.clientWidth+ce.offsetLeft}function G(){switch(ce.stretchTabs){case"always":return!0;case"never":return!1;default:return!ce.shouldPaginate&&o.matchMedia("(max-width: 600px)").matches}}function U(){return ce.centerTabs&&!ce.shouldPaginate}function V(){if(ce.noPagination||!me)return!1;var e=i.prop("clientWidth");return t.forEach(B().dummies,function(t){e-=t.offsetWidth}),0>e}function z(e){if(-1===e)return-1;var t,n,i=Math.max(ce.tabs.length-e,e);for(t=0;i>=t;t++){if((n=ce.tabs[e+t])&&!0!==n.scope.disabled)return n.getIndex();if((n=ce.tabs[e-t])&&!0!==n.scope.disabled)return n.getIndex()}return e}function q(e,t,n){Object.defineProperty(ce,e,{get:function(){return n},set:function(e){var i=n;n=e,t&&t(e,i)}})}function W(){Y(),ce.maxTabWidth=X(),ce.shouldPaginate=V()}function Y(){G()?t.element(ue.paging).css("width",""):t.element(ue.paging).css("width",K()+"px")}function K(){var e=1;return t.forEach(B().dummies,function(t){e+=Math.max(t.offsetWidth,t.getBoundingClientRect().width)}),Math.ceil(e)}function X(){return i.prop("clientWidth")}function J(){var e=ce.tabs[ce.selectedIndex],t=ce.tabs[ce.focusIndex];ce.tabs=ce.tabs.sort(function(e,t){return e.index-t.index}),ce.selectedIndex=ce.tabs.indexOf(e),ce.focusIndex=ce.tabs.indexOf(t)}function Z(e,t){var n,i=t?"focusIndex":"selectedIndex",o=ce[i];for(n=o+e;ce.tabs[n]&&ce.tabs[n].scope.disabled;n+=e);ce.tabs[n]&&(ce[i]=n)}function Q(){B().dummies[ce.focusIndex].focus()}function ee(e){if(null==e&&(e=ce.focusIndex),ue.tabs[e]&&!ce.shouldCenterTabs){var t=ue.tabs[e],n=t.offsetLeft,i=t.offsetWidth+n;ce.offsetLeft=Math.max(ce.offsetLeft,se(i-ue.canvas.clientWidth+64)),ce.offsetLeft=Math.min(ce.offsetLeft,se(n))}}function te(){pe.forEach(function(e){s.nextTick(e)}),pe=[]}function ne(){var e=!1;t.forEach(ce.tabs,function(t){t.template&&(e=!0)}),ce.hasContent=e}function ie(){ce.selectedIndex=z(ce.selectedIndex),ce.focusIndex=z(ce.focusIndex)}function oe(){if(!ce.dynamicHeight)return i.css("height","");if(!ce.tabs.length)return pe.push(oe);var e=ue.contents[ce.selectedIndex],t=e?e.offsetHeight:0,o=ue.wrapper.offsetHeight,r=t+o,a=i.prop("clientHeight");if(a!==r){"bottom"===i.attr("md-align-tabs")&&(a-=o,r-=o,i.attr("md-border-bottom")!==n&&++a),de=!0;var c={height:a+"px"},d={height:r+"px"};i.css(c),l(i,{from:c,to:d,easing:"cubic-bezier(0.35, 0, 0.25, 1)",duration:.5}).start().done(function(){i.css({transition:"none",height:""}),s.nextTick(function(){i.css("transition","")}),de=!1})}}function re(){if(!ue.tabs[ce.selectedIndex])return void t.element(ue.inkBar).css({left:"auto",right:"auto"});if(!ce.tabs.length)return pe.push(ce.updateInkBarStyles);if(!i.prop("offsetParent"))return A();var e,n=ce.selectedIndex,o=ue.paging.offsetWidth,r=ue.tabs[n],a=r.offsetLeft,l=o-a-r.offsetWidth;ce.shouldCenterTabs&&(e=Array.prototype.slice.call(ue.tabs).reduce(function(e,t){return e+t.offsetWidth},0),o>e&&s.nextTick(re,!1)),ae(),t.element(ue.inkBar).css({left:a+"px",right:l+"px"})}function ae(){var e=ce.selectedIndex,n=ce.lastSelectedIndex,i=t.element(ue.inkBar);t.isNumber(n)&&i.toggleClass("md-left",n>e).toggleClass("md-right",e>n)}function se(e){if(!ue.tabs.length||!ce.shouldPaginate)return 0;var t=ue.tabs[ue.tabs.length-1],n=t.offsetLeft+t.offsetWidth;return e=Math.max(0,e),e=Math.min(n-ue.canvas.clientWidth,e)}function le(e,n){var i={colorElement:t.element(ue.inkBar)};a.attach(e,n,i)}var ce=this,de=!1,ue=B(),pe=[],ge=!1,me=!1;h("stretchTabs",b),q("focusIndex",I,ce.selectedIndex||0),q("offsetLeft",E,0),q("hasContent",S,!1),q("maxTabWidth",C,X()),q("shouldPaginate",T,!1),v("noInkBar",N),v("dynamicHeight",F),v("noPagination"),v("swipeContent"),v("noDisconnect"),v("autoselect"),v("noSelectClick"),v("centerTabs",w,!1),v("enableDisconnect"),ce.scope=e,ce.parent=e.$parent,ce.tabs=[],ce.lastSelectedIndex=null,ce.hasFocus=!1,ce.lastClick=!0,ce.shouldCenterTabs=U(),ce.updatePagination=s.debounce(W,100),ce.redirectFocus=Q,ce.attachRipple=le,ce.insertTab=R,ce.removeTab=L,ce.select=_,ce.scroll=D,ce.nextPage=$,ce.previousPage=O,ce.keydown=M,ce.canPageForward=H,ce.canPageBack=j,ce.refreshIndex=ie,ce.incrementIndex=Z,ce.getTabElementIndex=k,ce.updateInkBarStyles=s.debounce(re,100),ce.updateTabOrder=s.debounce(J,100),p()}t.module("material.components.tabs").controller("MdTabsController",e),e.$inject=["$scope","$element","$window","$mdConstant","$mdTabInkRipple","$mdUtil","$animateCss","$attrs","$compile","$mdTheming"]}(),function(){function e(){return{scope:{selectedIndex:"=?mdSelected"},template:function(e,t){return t.$mdTabsTemplate=e.html(),'<md-tabs-wrapper> <md-tab-data></md-tab-data> <md-prev-button tabindex="-1" role="button" aria-label="Previous Page" aria-disabled="{{!$mdTabsCtrl.canPageBack()}}" ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageBack() }" ng-if="$mdTabsCtrl.shouldPaginate" ng-click="$mdTabsCtrl.previousPage()"> <md-icon md-svg-icon="md-tabs-arrow"></md-icon> </md-prev-button> <md-next-button tabindex="-1" role="button" aria-label="Next Page" aria-disabled="{{!$mdTabsCtrl.canPageForward()}}" ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageForward() }" ng-if="$mdTabsCtrl.shouldPaginate" ng-click="$mdTabsCtrl.nextPage()"> <md-icon md-svg-icon="md-tabs-arrow"></md-icon> </md-next-button> <md-tabs-canvas tabindex="{{ $mdTabsCtrl.hasFocus ? -1 : 0 }}" aria-activedescendant="tab-item-{{$mdTabsCtrl.tabs[$mdTabsCtrl.focusIndex].id}}" ng-focus="$mdTabsCtrl.redirectFocus()" ng-class="{ \'md-paginated\': $mdTabsCtrl.shouldPaginate, \'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs }" ng-keydown="$mdTabsCtrl.keydown($event)" role="tablist"> <md-pagination-wrapper ng-class="{ \'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs }" md-tab-scroll="$mdTabsCtrl.scroll($event)"> <md-tab-item tabindex="-1" class="md-tab" ng-repeat="tab in $mdTabsCtrl.tabs" role="tab" aria-controls="tab-content-{{::tab.id}}" aria-selected="{{tab.isActive()}}" aria-disabled="{{tab.scope.disabled || \'false\'}}" ng-click="$mdTabsCtrl.select(tab.getIndex())" ng-class="{ \'md-active\':    tab.isActive(), \'md-focused\':   tab.hasFocus(), \'md-disabled\':  tab.scope.disabled }" ng-disabled="tab.scope.disabled" md-swipe-left="$mdTabsCtrl.nextPage()" md-swipe-right="$mdTabsCtrl.previousPage()" md-tabs-template="::tab.label" md-scope="::tab.parent"></md-tab-item> <md-ink-bar></md-ink-bar> </md-pagination-wrapper> <div class="_md-visually-hidden md-dummy-wrapper"> <md-dummy-tab class="md-tab" tabindex="-1" id="tab-item-{{::tab.id}}" role="tab" aria-controls="tab-content-{{::tab.id}}" aria-selected="{{tab.isActive()}}" aria-disabled="{{tab.scope.disabled || \'false\'}}" ng-focus="$mdTabsCtrl.hasFocus = true" ng-blur="$mdTabsCtrl.hasFocus = false" ng-repeat="tab in $mdTabsCtrl.tabs" md-tabs-template="::tab.label" md-scope="::tab.parent"></md-dummy-tab> </div> </md-tabs-canvas> </md-tabs-wrapper> <md-tabs-content-wrapper ng-show="$mdTabsCtrl.hasContent && $mdTabsCtrl.selectedIndex >= 0"> <md-tab-content id="tab-content-{{::tab.id}}" role="tabpanel" aria-labelledby="tab-item-{{::tab.id}}" md-swipe-left="$mdTabsCtrl.swipeContent && $mdTabsCtrl.incrementIndex(1)" md-swipe-right="$mdTabsCtrl.swipeContent && $mdTabsCtrl.incrementIndex(-1)" ng-if="$mdTabsCtrl.hasContent" ng-repeat="(index, tab) in $mdTabsCtrl.tabs" ng-class="{ \'md-no-transition\': $mdTabsCtrl.lastSelectedIndex == null, \'md-active\':        tab.isActive(), \'md-left\':          tab.isLeft(), \'md-right\':         tab.isRight(), \'md-no-scroll\':     $mdTabsCtrl.dynamicHeight }"> <div md-tabs-template="::tab.template" md-connected-if="tab.isActive()" md-scope="::tab.parent" ng-if="$mdTabsCtrl.enableDisconnect || tab.shouldRender()"></div> </md-tab-content> </md-tabs-content-wrapper>'},controller:"MdTabsController",controllerAs:"$mdTabsCtrl",bindToController:!0}}t.module("material.components.tabs").directive("mdTabs",e)}(),function(){function e(e,t){function n(n,i,o,r){function a(){n.$watch("connected",function(e){!1===e?s():l()}),n.$on("$destroy",l)}function s(){r.enableDisconnect&&t.disconnectScope(c)}function l(){r.enableDisconnect&&t.reconnectScope(c)}if(r){var c=r.enableDisconnect?n.compileScope.$new():n.compileScope;return i.html(n.template),e(i.contents())(c),i.on("DOMSubtreeModified",function(){r.updatePagination(),r.updateInkBarStyles()}),t.nextTick(a)}}return{restrict:"A",link:n,scope:{template:"=mdTabsTemplate",connected:"=?mdConnectedIf",compileScope:"=mdScope"},require:"^?mdTabs"}}t.module("material.components.tabs").directive("mdTabsTemplate",e),e.$inject=["$compile","$mdUtil"]}(),function(){t.module("material.core").constant("$MD_THEME_CSS","/*  Only used with Theme processes */html.md-THEME_NAME-theme, body.md-THEME_NAME-theme {  color: '{{foreground-1}}';  background-color: '{{background-color}}'; }md-autocomplete.md-THEME_NAME-theme {  background: '{{background-A100}}'; }  md-autocomplete.md-THEME_NAME-theme[disabled] {    background: '{{background-100}}'; }  md-autocomplete.md-THEME_NAME-theme button md-icon path {    fill: '{{background-600}}'; }  md-autocomplete.md-THEME_NAME-theme button:after {    background: '{{background-600-0.3}}'; }.md-autocomplete-suggestions-container.md-THEME_NAME-theme {  background: '{{background-A100}}'; }  .md-autocomplete-suggestions-container.md-THEME_NAME-theme li {    color: '{{background-900}}'; }    .md-autocomplete-suggestions-container.md-THEME_NAME-theme li .highlight {      color: '{{background-600}}'; }    .md-autocomplete-suggestions-container.md-THEME_NAME-theme li:hover, .md-autocomplete-suggestions-container.md-THEME_NAME-theme li.selected {      background: '{{background-200}}'; }md-bottom-sheet.md-THEME_NAME-theme {  background-color: '{{background-50}}';  border-top-color: '{{background-300}}'; }  md-bottom-sheet.md-THEME_NAME-theme.md-list md-list-item {    color: '{{foreground-1}}'; }  md-bottom-sheet.md-THEME_NAME-theme .md-subheader {    background-color: '{{background-50}}'; }  md-bottom-sheet.md-THEME_NAME-theme .md-subheader {    color: '{{foreground-1}}'; }md-backdrop {  background-color: '{{background-900-0.0}}'; }  md-backdrop.md-opaque.md-THEME_NAME-theme {    background-color: '{{background-900-1.0}}'; }.md-button.md-THEME_NAME-theme:not([disabled]):hover {  background-color: '{{background-500-0.2}}'; }.md-button.md-THEME_NAME-theme:not([disabled]).md-focused {  background-color: '{{background-500-0.2}}'; }.md-button.md-THEME_NAME-theme:not([disabled]).md-icon-button:hover {  background-color: transparent; }.md-button.md-THEME_NAME-theme.md-fab {  background-color: '{{accent-color}}';  color: '{{accent-contrast}}'; }  .md-button.md-THEME_NAME-theme.md-fab md-icon {    color: '{{accent-contrast}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover {    background-color: '{{accent-600}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused {    background-color: '{{accent-600}}'; }.md-button.md-THEME_NAME-theme.md-primary {  color: '{{primary-color}}'; }  .md-button.md-THEME_NAME-theme.md-primary.md-raised, .md-button.md-THEME_NAME-theme.md-primary.md-fab {    color: '{{primary-contrast}}';    background-color: '{{primary-color}}'; }    .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]) md-icon {      color: '{{primary-contrast}}'; }    .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]):hover {      background-color: '{{primary-600}}'; }    .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]).md-focused {      background-color: '{{primary-600}}'; }  .md-button.md-THEME_NAME-theme.md-primary:not([disabled]) md-icon {    color: '{{primary-color}}'; }.md-button.md-THEME_NAME-theme.md-fab {  background-color: '{{accent-color}}';  color: '{{accent-contrast}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]) .md-icon {    color: '{{accent-contrast}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover {    background-color: '{{accent-600}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused {    background-color: '{{accent-600}}'; }.md-button.md-THEME_NAME-theme.md-raised {  color: '{{background-900}}';  background-color: '{{background-50}}'; }  .md-button.md-THEME_NAME-theme.md-raised:not([disabled]) md-icon {    color: '{{background-900}}'; }  .md-button.md-THEME_NAME-theme.md-raised:not([disabled]):hover {    background-color: '{{background-50}}'; }  .md-button.md-THEME_NAME-theme.md-raised:not([disabled]).md-focused {    background-color: '{{background-200}}'; }.md-button.md-THEME_NAME-theme.md-warn {  color: '{{warn-color}}'; }  .md-button.md-THEME_NAME-theme.md-warn.md-raised, .md-button.md-THEME_NAME-theme.md-warn.md-fab {    color: '{{warn-contrast}}';    background-color: '{{warn-color}}'; }    .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]) md-icon {      color: '{{warn-contrast}}'; }    .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]):hover {      background-color: '{{warn-600}}'; }    .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]).md-focused {      background-color: '{{warn-600}}'; }  .md-button.md-THEME_NAME-theme.md-warn:not([disabled]) md-icon {    color: '{{warn-color}}'; }.md-button.md-THEME_NAME-theme.md-accent {  color: '{{accent-color}}'; }  .md-button.md-THEME_NAME-theme.md-accent.md-raised, .md-button.md-THEME_NAME-theme.md-accent.md-fab {    color: '{{accent-contrast}}';    background-color: '{{accent-color}}'; }    .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]) md-icon {      color: '{{accent-contrast}}'; }    .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]):hover {      background-color: '{{accent-600}}'; }    .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]).md-focused {      background-color: '{{accent-600}}'; }  .md-button.md-THEME_NAME-theme.md-accent:not([disabled]) md-icon {    color: '{{accent-color}}'; }.md-button.md-THEME_NAME-theme[disabled], .md-button.md-THEME_NAME-theme.md-raised[disabled], .md-button.md-THEME_NAME-theme.md-fab[disabled], .md-button.md-THEME_NAME-theme.md-accent[disabled], .md-button.md-THEME_NAME-theme.md-warn[disabled] {  color: '{{foreground-3}}';  cursor: default; }  .md-button.md-THEME_NAME-theme[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-raised[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-fab[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-accent[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-warn[disabled] md-icon {    color: '{{foreground-3}}'; }.md-button.md-THEME_NAME-theme.md-raised[disabled], .md-button.md-THEME_NAME-theme.md-fab[disabled] {  background-color: '{{foreground-4}}'; }.md-button.md-THEME_NAME-theme[disabled] {  background-color: transparent; }a.md-THEME_NAME-theme:not(.md-button) {  color: '{{accent-color}}'; }  a.md-THEME_NAME-theme:not(.md-button):hover {    color: '{{accent-700}}'; }  a.md-THEME_NAME-theme:not(.md-button).md-primary {    color: '{{primary-color}}'; }    a.md-THEME_NAME-theme:not(.md-button).md-primary:hover {      color: '{{primary-700}}'; }  a.md-THEME_NAME-theme:not(.md-button).md-warn {    color: '{{warn-color}}'; }    a.md-THEME_NAME-theme:not(.md-button).md-warn:hover {      color: '{{warn-700}}'; }md-card.md-THEME_NAME-theme {  background-color: '{{background-hue-1}}';  border-radius: 2px; }  md-card.md-THEME_NAME-theme .md-card-image {    border-radius: 2px 2px 0 0; }  md-card.md-THEME_NAME-theme md-card-header md-card-avatar md-icon {    color: '{{background-color}}';    background-color: '{{foreground-3}}'; }  md-card.md-THEME_NAME-theme md-card-header md-card-header-text .md-subhead {    color: '{{foreground-2}}'; }  md-card.md-THEME_NAME-theme md-card-title md-card-title-text:not(:only-child) .md-subhead {    color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme .md-ripple {  color: '{{accent-600}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-ripple {  color: '{{background-600}}'; }md-checkbox.md-THEME_NAME-theme.md-checked.md-focused ._md-container:before {  background-color: '{{accent-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme .md-ink-ripple {  color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-ink-ripple {  color: '{{accent-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme ._md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme.md-checked ._md-icon {  background-color: '{{accent-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme.md-checked ._md-icon:after {  border-color: '{{accent-contrast-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-ripple {  color: '{{primary-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ripple {  color: '{{background-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-ink-ripple {  color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple {  color: '{{primary-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary ._md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked ._md-icon {  background-color: '{{primary-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked.md-focused ._md-container:before {  background-color: '{{primary-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked ._md-icon:after {  border-color: '{{primary-contrast-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-indeterminate[disabled] ._md-container {  color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-ripple {  color: '{{warn-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-ink-ripple {  color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple {  color: '{{warn-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn ._md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked ._md-icon {  background-color: '{{warn-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked.md-focused:not([disabled]) ._md-container:before {  background-color: '{{warn-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked ._md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme[disabled] ._md-icon {  border-color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme[disabled].md-checked ._md-icon {  background-color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme[disabled].md-checked ._md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme[disabled] ._md-label {  color: '{{foreground-3}}'; }md-chips.md-THEME_NAME-theme .md-chips {  box-shadow: 0 1px '{{foreground-4}}'; }  md-chips.md-THEME_NAME-theme .md-chips.md-focused {    box-shadow: 0 2px '{{primary-color}}'; }  md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input {    color: '{{foreground-1}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input::-webkit-input-placeholder {      color: '{{foreground-3}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input:-moz-placeholder {      color: '{{foreground-3}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input::-moz-placeholder {      color: '{{foreground-3}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input:-ms-input-placeholder {      color: '{{foreground-3}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input::-webkit-input-placeholder {      color: '{{foreground-3}}'; }md-chips.md-THEME_NAME-theme md-chip {  background: '{{background-300}}';  color: '{{background-800}}'; }  md-chips.md-THEME_NAME-theme md-chip md-icon {    color: '{{background-700}}'; }  md-chips.md-THEME_NAME-theme md-chip.md-focused {    background: '{{primary-color}}';    color: '{{primary-contrast}}'; }    md-chips.md-THEME_NAME-theme md-chip.md-focused md-icon {      color: '{{primary-contrast}}'; }  md-chips.md-THEME_NAME-theme md-chip._md-chip-editing {    background: transparent;    color: '{{background-800}}'; }md-chips.md-THEME_NAME-theme md-chip-remove .md-button md-icon path {  fill: '{{background-500}}'; }.md-contact-suggestion span.md-contact-email {  color: '{{background-400}}'; }md-content.md-THEME_NAME-theme {  color: '{{foreground-1}}';  background-color: '{{background-hue-1}}'; }/** Theme styles for mdCalendar. */.md-calendar.md-THEME_NAME-theme {  background: '{{background-A100}}';  color: '{{background-A200-0.87}}'; }  .md-calendar.md-THEME_NAME-theme tr:last-child td {    border-bottom-color: '{{background-200}}'; }.md-THEME_NAME-theme .md-calendar-day-header {  background: '{{background-300}}';  color: '{{background-A200-0.87}}'; }.md-THEME_NAME-theme .md-calendar-date.md-calendar-date-today .md-calendar-date-selection-indicator {  border: 1px solid '{{primary-500}}'; }.md-THEME_NAME-theme .md-calendar-date.md-calendar-date-today.md-calendar-date-disabled {  color: '{{primary-500-0.6}}'; }.md-THEME_NAME-theme .md-calendar-date.md-focus .md-calendar-date-selection-indicator {  background: '{{background-hue-1}}'; }.md-THEME_NAME-theme .md-calendar-date-selection-indicator:hover {  background: '{{background-300}}'; }.md-THEME_NAME-theme .md-calendar-date.md-calendar-selected-date .md-calendar-date-selection-indicator,.md-THEME_NAME-theme .md-calendar-date.md-focus.md-calendar-selected-date .md-calendar-date-selection-indicator {  background: '{{primary-500}}';  color: '{{primary-500-contrast}}';  border-color: transparent; }.md-THEME_NAME-theme .md-calendar-date-disabled,.md-THEME_NAME-theme .md-calendar-month-label-disabled {  color: '{{foreground-3}}'; }/** Theme styles for mdDatepicker. */.md-THEME_NAME-theme .md-datepicker-input {  color: '{{foreground-1}}'; }  .md-THEME_NAME-theme .md-datepicker-input::-webkit-input-placeholder {    color: '{{foreground-3}}'; }  .md-THEME_NAME-theme .md-datepicker-input:-moz-placeholder {    color: '{{foreground-3}}'; }  .md-THEME_NAME-theme .md-datepicker-input::-moz-placeholder {    color: '{{foreground-3}}'; }  .md-THEME_NAME-theme .md-datepicker-input:-ms-input-placeholder {    color: '{{foreground-3}}'; }  .md-THEME_NAME-theme .md-datepicker-input::-webkit-input-placeholder {    color: '{{foreground-3}}'; }.md-THEME_NAME-theme .md-datepicker-input-container {  border-bottom-color: '{{background-300}}'; }  .md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-focused {    border-bottom-color: '{{primary-500}}'; }  .md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-invalid {    border-bottom-color: '{{warn-A700}}'; }.md-THEME_NAME-theme .md-datepicker-calendar-pane {  border-color: '{{background-hue-1}}'; }.md-THEME_NAME-theme .md-datepicker-triangle-button .md-datepicker-expand-triangle {  border-top-color: '{{foreground-3}}'; }.md-THEME_NAME-theme .md-datepicker-triangle-button:hover .md-datepicker-expand-triangle {  border-top-color: '{{foreground-2}}'; }.md-THEME_NAME-theme .md-datepicker-open .md-datepicker-calendar-icon {  fill: '{{primary-500}}'; }.md-THEME_NAME-theme .md-datepicker-open .md-datepicker-input-container,.md-THEME_NAME-theme .md-datepicker-input-mask-opaque {  background: '{{background-hue-1}}'; }.md-THEME_NAME-theme .md-datepicker-calendar {  background: '{{background-A100}}'; }md-dialog.md-THEME_NAME-theme {  border-radius: 4px;  background-color: '{{background-hue-1}}'; }  md-dialog.md-THEME_NAME-theme.md-content-overflow .md-actions, md-dialog.md-THEME_NAME-theme.md-content-overflow md-dialog-actions {    border-top-color: '{{foreground-4}}'; }md-divider.md-THEME_NAME-theme {  border-top-color: '{{foreground-4}}'; }.layout-row > md-divider.md-THEME_NAME-theme,.layout-xs-row > md-divider.md-THEME_NAME-theme, .layout-gt-xs-row > md-divider.md-THEME_NAME-theme,.layout-sm-row > md-divider.md-THEME_NAME-theme, .layout-gt-sm-row > md-divider.md-THEME_NAME-theme,.layout-md-row > md-divider.md-THEME_NAME-theme, .layout-gt-md-row > md-divider.md-THEME_NAME-theme,.layout-lg-row > md-divider.md-THEME_NAME-theme, .layout-gt-lg-row > md-divider.md-THEME_NAME-theme,.layout-xl-row > md-divider.md-THEME_NAME-theme {  border-right-color: '{{foreground-4}}'; }md-icon.md-THEME_NAME-theme {  color: '{{foreground-2}}'; }  md-icon.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }  md-icon.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }  md-icon.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }md-input-container.md-THEME_NAME-theme .md-input {  color: '{{foreground-1}}';  border-color: '{{foreground-4}}'; }  md-input-container.md-THEME_NAME-theme .md-input::-webkit-input-placeholder {    color: '{{foreground-3}}'; }  md-input-container.md-THEME_NAME-theme .md-input:-moz-placeholder {    color: '{{foreground-3}}'; }  md-input-container.md-THEME_NAME-theme .md-input::-moz-placeholder {    color: '{{foreground-3}}'; }  md-input-container.md-THEME_NAME-theme .md-input:-ms-input-placeholder {    color: '{{foreground-3}}'; }  md-input-container.md-THEME_NAME-theme .md-input::-webkit-input-placeholder {    color: '{{foreground-3}}'; }md-input-container.md-THEME_NAME-theme > md-icon {  color: '{{foreground-1}}'; }md-input-container.md-THEME_NAME-theme label,md-input-container.md-THEME_NAME-theme ._md-placeholder {  color: '{{foreground-3}}'; }md-input-container.md-THEME_NAME-theme label.md-required:after {  color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-focused):not(.md-input-invalid) label.md-required:after {  color: '{{foreground-2}}'; }md-input-container.md-THEME_NAME-theme .md-input-messages-animation, md-input-container.md-THEME_NAME-theme .md-input-message-animation {  color: '{{warn-A700}}'; }  md-input-container.md-THEME_NAME-theme .md-input-messages-animation .md-char-counter, md-input-container.md-THEME_NAME-theme .md-input-message-animation .md-char-counter {    color: '{{foreground-1}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-has-value label {  color: '{{foreground-2}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused .md-input {  border-color: '{{primary-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused label {  color: '{{primary-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused md-icon {  color: '{{primary-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent .md-input {  border-color: '{{accent-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent label {  color: '{{accent-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn .md-input {  border-color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn label {  color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid .md-input {  border-color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid label {  color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid .md-input-message-animation, md-input-container.md-THEME_NAME-theme.md-input-invalid .md-char-counter {  color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme .md-input[disabled],md-input-container.md-THEME_NAME-theme .md-input [disabled] {  border-bottom-color: transparent;  color: '{{foreground-3}}';  background-image: linear-gradient(to right, \"{{foreground-3}}\" 0%, \"{{foreground-3}}\" 33%, transparent 0%);  background-image: -ms-linear-gradient(left, transparent 0%, \"{{foreground-3}}\" 100%); }md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h3, md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h4,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h3,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h4 {  color: '{{foreground-1}}'; }md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text p,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text p {  color: '{{foreground-2}}'; }md-list.md-THEME_NAME-theme ._md-proxy-focus.md-focused div._md-no-style {  background-color: '{{background-100}}'; }md-list.md-THEME_NAME-theme md-list-item .md-avatar-icon {  background-color: '{{foreground-3}}';  color: '{{background-color}}'; }md-list.md-THEME_NAME-theme md-list-item > md-icon {  color: '{{foreground-2}}'; }  md-list.md-THEME_NAME-theme md-list-item > md-icon.md-highlight {    color: '{{primary-color}}'; }    md-list.md-THEME_NAME-theme md-list-item > md-icon.md-highlight.md-accent {      color: '{{accent-color}}'; }md-menu-bar.md-THEME_NAME-theme > button.md-button {  color: '{{foreground-2}}';  border-radius: 2px; }md-menu-bar.md-THEME_NAME-theme md-menu._md-open > button, md-menu-bar.md-THEME_NAME-theme md-menu > button:focus {  outline: none;  background: '{{background-200}}'; }md-menu-bar.md-THEME_NAME-theme._md-open:not(._md-keyboard-mode) md-menu:hover > button {  background-color: '{{ background-500-0.2}}'; }md-menu-bar.md-THEME_NAME-theme:not(._md-keyboard-mode):not(._md-open) md-menu button:hover,md-menu-bar.md-THEME_NAME-theme:not(._md-keyboard-mode):not(._md-open) md-menu button:focus {  background: transparent; }md-menu-content.md-THEME_NAME-theme .md-menu > .md-button:after {  color: '{{background-A200-0.54}}'; }md-menu-content.md-THEME_NAME-theme .md-menu._md-open > .md-button {  background-color: '{{ background-500-0.2}}'; }md-toolbar.md-THEME_NAME-theme.md-menu-toolbar {  background-color: '{{background-A100}}';  color: '{{background-A200}}'; }  md-toolbar.md-THEME_NAME-theme.md-menu-toolbar md-toolbar-filler {    background-color: '{{primary-color}}';    color: '{{background-A100-0.87}}'; }    md-toolbar.md-THEME_NAME-theme.md-menu-toolbar md-toolbar-filler md-icon {      color: '{{background-A100-0.87}}'; }md-menu-content.md-THEME_NAME-theme {  background-color: '{{background-A100}}'; }  md-menu-content.md-THEME_NAME-theme md-menu-item {    color: '{{background-A200-0.87}}'; }    md-menu-content.md-THEME_NAME-theme md-menu-item md-icon {      color: '{{background-A200-0.54}}'; }    md-menu-content.md-THEME_NAME-theme md-menu-item .md-button[disabled] {      color: '{{background-A200-0.25}}'; }      md-menu-content.md-THEME_NAME-theme md-menu-item .md-button[disabled] md-icon {        color: '{{background-A200-0.25}}'; }  md-menu-content.md-THEME_NAME-theme md-menu-divider {    background-color: '{{background-A200-0.11}}'; }md-progress-circular.md-THEME_NAME-theme path {  stroke: '{{primary-color}}'; }md-progress-circular.md-THEME_NAME-theme.md-warn path {  stroke: '{{warn-color}}'; }md-progress-circular.md-THEME_NAME-theme.md-accent path {  stroke: '{{accent-color}}'; }md-progress-linear.md-THEME_NAME-theme ._md-container {  background-color: '{{primary-100}}'; }md-progress-linear.md-THEME_NAME-theme ._md-bar {  background-color: '{{primary-color}}'; }md-progress-linear.md-THEME_NAME-theme.md-warn ._md-container {  background-color: '{{warn-100}}'; }md-progress-linear.md-THEME_NAME-theme.md-warn ._md-bar {  background-color: '{{warn-color}}'; }md-progress-linear.md-THEME_NAME-theme.md-accent ._md-container {  background-color: '{{accent-100}}'; }md-progress-linear.md-THEME_NAME-theme.md-accent ._md-bar {  background-color: '{{accent-color}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn ._md-bar1 {  background-color: '{{warn-100}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn ._md-dashed:before {  background: radial-gradient(\"{{warn-100}}\" 0%, \"{{warn-100}}\" 16%, transparent 42%); }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent ._md-bar1 {  background-color: '{{accent-100}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent ._md-dashed:before {  background: radial-gradient(\"{{accent-100}}\" 0%, \"{{accent-100}}\" 16%, transparent 42%); }md-radio-button.md-THEME_NAME-theme ._md-off {  border-color: '{{foreground-2}}'; }md-radio-button.md-THEME_NAME-theme ._md-on {  background-color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme.md-checked ._md-off {  border-color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme.md-checked .md-ink-ripple {  color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme ._md-container .md-ripple {  color: '{{accent-600}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary ._md-on, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary ._md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary ._md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary ._md-on {  background-color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked ._md-off {  border-color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple {  color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary ._md-container .md-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary ._md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary ._md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary ._md-container .md-ripple {  color: '{{primary-600}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn ._md-on, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn ._md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn ._md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn ._md-on {  background-color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked ._md-off {  border-color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple {  color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn ._md-container .md-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn ._md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn ._md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn ._md-container .md-ripple {  color: '{{warn-600}}'; }md-radio-group.md-THEME_NAME-theme[disabled],md-radio-button.md-THEME_NAME-theme[disabled] {  color: '{{foreground-3}}'; }  md-radio-group.md-THEME_NAME-theme[disabled] ._md-container ._md-off,  md-radio-button.md-THEME_NAME-theme[disabled] ._md-container ._md-off {    border-color: '{{foreground-3}}'; }  md-radio-group.md-THEME_NAME-theme[disabled] ._md-container ._md-on,  md-radio-button.md-THEME_NAME-theme[disabled] ._md-container ._md-on {    border-color: '{{foreground-3}}'; }md-radio-group.md-THEME_NAME-theme .md-checked .md-ink-ripple {  color: '{{accent-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-primary .md-checked:not([disabled]) .md-ink-ripple, md-radio-group.md-THEME_NAME-theme .md-checked:not([disabled]).md-primary .md-ink-ripple {  color: '{{primary-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme .md-checked.md-primary .md-ink-ripple {  color: '{{warn-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked ._md-container:before {  background-color: '{{accent-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty).md-primary .md-checked ._md-container:before,md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked.md-primary ._md-container:before {  background-color: '{{primary-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty).md-warn .md-checked ._md-container:before,md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked.md-warn ._md-container:before {  background-color: '{{warn-color-0.26}}'; }md-select.md-THEME_NAME-theme[disabled] ._md-select-value {  border-bottom-color: transparent;  background-image: linear-gradient(to right, \"{{foreground-3}}\" 0%, \"{{foreground-3}}\" 33%, transparent 0%);  background-image: -ms-linear-gradient(left, transparent 0%, \"{{foreground-3}}\" 100%); }md-select.md-THEME_NAME-theme ._md-select-value {  border-bottom-color: '{{foreground-4}}'; }  md-select.md-THEME_NAME-theme ._md-select-value._md-select-placeholder {    color: '{{foreground-3}}'; }md-select.md-THEME_NAME-theme.ng-invalid.ng-dirty ._md-select-value {  color: '{{warn-A700}}' !important;  border-bottom-color: '{{warn-A700}}' !important; }md-select.md-THEME_NAME-theme:not([disabled]):focus ._md-select-value {  border-bottom-color: '{{primary-color}}';  color: '{{ foreground-1 }}'; }  md-select.md-THEME_NAME-theme:not([disabled]):focus ._md-select-value._md-select-placeholder {    color: '{{ foreground-1 }}'; }md-select.md-THEME_NAME-theme:not([disabled]):focus.md-accent ._md-select-value {  border-bottom-color: '{{accent-color}}'; }md-select.md-THEME_NAME-theme:not([disabled]):focus.md-warn ._md-select-value {  border-bottom-color: '{{warn-color}}'; }md-select.md-THEME_NAME-theme[disabled] ._md-select-value {  color: '{{foreground-3}}'; }  md-select.md-THEME_NAME-theme[disabled] ._md-select-value._md-select-placeholder {    color: '{{foreground-3}}'; }md-select-menu.md-THEME_NAME-theme md-content {  background: '{{background-A100}}'; }  md-select-menu.md-THEME_NAME-theme md-content md-optgroup {    color: '{{background-600-0.87}}'; }  md-select-menu.md-THEME_NAME-theme md-content md-option {    color: '{{background-900-0.87}}'; }    md-select-menu.md-THEME_NAME-theme md-content md-option[disabled] ._md-text {      color: '{{background-400-0.87}}'; }    md-select-menu.md-THEME_NAME-theme md-content md-option:not([disabled]):focus, md-select-menu.md-THEME_NAME-theme md-content md-option:not([disabled]):hover {      background: '{{background-200}}'; }    md-select-menu.md-THEME_NAME-theme md-content md-option[selected] {      color: '{{primary-500}}'; }      md-select-menu.md-THEME_NAME-theme md-content md-option[selected]:focus {        color: '{{primary-600}}'; }      md-select-menu.md-THEME_NAME-theme md-content md-option[selected].md-accent {        color: '{{accent-500}}'; }        md-select-menu.md-THEME_NAME-theme md-content md-option[selected].md-accent:focus {          color: '{{accent-600}}'; }[md-checkbox-enabled].md-THEME_NAME-theme .md-ripple {  color: '{{primary-600}}'; }[md-checkbox-enabled].md-THEME_NAME-theme[selected] .md-ripple {  color: '{{background-600}}'; }[md-checkbox-enabled].md-THEME_NAME-theme .md-ink-ripple {  color: '{{foreground-2}}'; }[md-checkbox-enabled].md-THEME_NAME-theme[selected] .md-ink-ripple {  color: '{{primary-color-0.87}}'; }[md-checkbox-enabled].md-THEME_NAME-theme ._md-icon {  border-color: '{{foreground-2}}'; }[md-checkbox-enabled].md-THEME_NAME-theme[selected] ._md-icon {  background-color: '{{primary-color-0.87}}'; }[md-checkbox-enabled].md-THEME_NAME-theme[selected].md-focused ._md-container:before {  background-color: '{{primary-color-0.26}}'; }[md-checkbox-enabled].md-THEME_NAME-theme[selected] ._md-icon:after {  border-color: '{{primary-contrast-0.87}}'; }[md-checkbox-enabled].md-THEME_NAME-theme .md-indeterminate[disabled] ._md-container {  color: '{{foreground-3}}'; }[md-checkbox-enabled].md-THEME_NAME-theme md-option ._md-text {  color: '{{background-900-0.87}}'; }md-sidenav.md-THEME_NAME-theme, md-sidenav.md-THEME_NAME-theme md-content {  background-color: '{{background-hue-1}}'; }md-slider.md-THEME_NAME-theme ._md-track {  background-color: '{{foreground-3}}'; }md-slider.md-THEME_NAME-theme ._md-track-ticks {  color: '{{background-contrast}}'; }md-slider.md-THEME_NAME-theme ._md-focus-ring {  background-color: '{{accent-200-0.38}}'; }md-slider.md-THEME_NAME-theme ._md-disabled-thumb {  border-color: '{{background-color}}';  background-color: '{{background-color}}'; }md-slider.md-THEME_NAME-theme._md-min ._md-thumb:after {  background-color: '{{background-color}}';  border-color: '{{foreground-3}}'; }md-slider.md-THEME_NAME-theme._md-min ._md-focus-ring {  background-color: '{{foreground-3-0.38}}'; }md-slider.md-THEME_NAME-theme._md-min[md-discrete] ._md-thumb:after {  background-color: '{{background-contrast}}';  border-color: transparent; }md-slider.md-THEME_NAME-theme._md-min[md-discrete] ._md-sign {  background-color: '{{background-400}}'; }  md-slider.md-THEME_NAME-theme._md-min[md-discrete] ._md-sign:after {    border-top-color: '{{background-400}}'; }md-slider.md-THEME_NAME-theme._md-min[md-discrete][md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{background-400}}'; }md-slider.md-THEME_NAME-theme ._md-track._md-track-fill {  background-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme ._md-thumb:after {  border-color: '{{accent-color}}';  background-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme ._md-sign {  background-color: '{{accent-color}}'; }  md-slider.md-THEME_NAME-theme ._md-sign:after {    border-top-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme[md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme ._md-thumb-text {  color: '{{accent-contrast}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-focus-ring {  background-color: '{{warn-200-0.38}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-track._md-track-fill {  background-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-thumb:after {  border-color: '{{warn-color}}';  background-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-sign {  background-color: '{{warn-color}}'; }  md-slider.md-THEME_NAME-theme.md-warn ._md-sign:after {    border-top-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn[md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-thumb-text {  color: '{{warn-contrast}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-focus-ring {  background-color: '{{primary-200-0.38}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-track._md-track-fill {  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-thumb:after {  border-color: '{{primary-color}}';  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-sign {  background-color: '{{primary-color}}'; }  md-slider.md-THEME_NAME-theme.md-primary ._md-sign:after {    border-top-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary[md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-thumb-text {  color: '{{primary-contrast}}'; }md-slider.md-THEME_NAME-theme[disabled] ._md-thumb:after {  border-color: transparent; }md-slider.md-THEME_NAME-theme[disabled]:not(._md-min) ._md-thumb:after, md-slider.md-THEME_NAME-theme[disabled][md-discrete] ._md-thumb:after {  background-color: '{{foreground-3}}';  border-color: transparent; }md-slider.md-THEME_NAME-theme[disabled][readonly] ._md-sign {  background-color: '{{background-400}}'; }  md-slider.md-THEME_NAME-theme[disabled][readonly] ._md-sign:after {    border-top-color: '{{background-400}}'; }md-slider.md-THEME_NAME-theme[disabled][readonly][md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{background-400}}'; }md-slider.md-THEME_NAME-theme[disabled][readonly] ._md-disabled-thumb {  border-color: transparent;  background-color: transparent; }md-slider-container[disabled] > *:first-child:not(md-slider),md-slider-container[disabled] > *:last-child:not(md-slider) {  color: '{{foreground-3}}'; }.md-subheader.md-THEME_NAME-theme {  color: '{{ foreground-2-0.23 }}';  background-color: '{{background-hue-2}}'; }  .md-subheader.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }md-switch.md-THEME_NAME-theme .md-ink-ripple {  color: '{{background-500}}'; }md-switch.md-THEME_NAME-theme ._md-thumb {  background-color: '{{background-50}}'; }md-switch.md-THEME_NAME-theme ._md-bar {  background-color: '{{background-500}}'; }md-switch.md-THEME_NAME-theme.md-checked .md-ink-ripple {  color: '{{accent-color}}'; }md-switch.md-THEME_NAME-theme.md-checked ._md-thumb {  background-color: '{{accent-color}}'; }md-switch.md-THEME_NAME-theme.md-checked ._md-bar {  background-color: '{{accent-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-focused ._md-thumb:before {  background-color: '{{accent-color-0.26}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary .md-ink-ripple {  color: '{{primary-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary ._md-thumb {  background-color: '{{primary-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary ._md-bar {  background-color: '{{primary-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary.md-focused ._md-thumb:before {  background-color: '{{primary-color-0.26}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn .md-ink-ripple {  color: '{{warn-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn ._md-thumb {  background-color: '{{warn-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn ._md-bar {  background-color: '{{warn-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn.md-focused ._md-thumb:before {  background-color: '{{warn-color-0.26}}'; }md-switch.md-THEME_NAME-theme[disabled] ._md-thumb {  background-color: '{{background-400}}'; }md-switch.md-THEME_NAME-theme[disabled] ._md-bar {  background-color: '{{foreground-4}}'; }md-tabs.md-THEME_NAME-theme md-tabs-wrapper {  background-color: transparent;  border-color: '{{foreground-4}}'; }md-tabs.md-THEME_NAME-theme .md-paginator md-icon {  color: '{{primary-color}}'; }md-tabs.md-THEME_NAME-theme md-ink-bar {  color: '{{accent-color}}';  background: '{{accent-color}}'; }md-tabs.md-THEME_NAME-theme .md-tab {  color: '{{foreground-2}}'; }  md-tabs.md-THEME_NAME-theme .md-tab[disabled], md-tabs.md-THEME_NAME-theme .md-tab[disabled] md-icon {    color: '{{foreground-3}}'; }  md-tabs.md-THEME_NAME-theme .md-tab.md-active, md-tabs.md-THEME_NAME-theme .md-tab.md-active md-icon, md-tabs.md-THEME_NAME-theme .md-tab.md-focused, md-tabs.md-THEME_NAME-theme .md-tab.md-focused md-icon {    color: '{{primary-color}}'; }  md-tabs.md-THEME_NAME-theme .md-tab.md-focused {    background: '{{primary-color-0.1}}'; }  md-tabs.md-THEME_NAME-theme .md-tab .md-ripple-container {    color: '{{accent-100}}'; }md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper {  background-color: '{{accent-color}}'; }  md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{accent-100}}'; }    md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{accent-contrast}}'; }    md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{accent-contrast-0.1}}'; }  md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-ink-bar {    color: '{{primary-600-1}}';    background: '{{primary-600-1}}'; }md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper {  background-color: '{{primary-color}}'; }  md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{primary-100}}'; }    md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{primary-contrast}}'; }    md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{primary-contrast-0.1}}'; }md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper {  background-color: '{{warn-color}}'; }  md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{warn-100}}'; }    md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{warn-contrast}}'; }    md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{warn-contrast-0.1}}'; }md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper {  background-color: '{{primary-color}}'; }  md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{primary-100}}'; }    md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{primary-contrast}}'; }    md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{primary-contrast-0.1}}'; }md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper {  background-color: '{{accent-color}}'; }  md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{accent-100}}'; }    md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{accent-contrast}}'; }    md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{accent-contrast-0.1}}'; }  md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-ink-bar {    color: '{{primary-600-1}}';    background: '{{primary-600-1}}'; }md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper {  background-color: '{{warn-color}}'; }  md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{warn-100}}'; }    md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{warn-contrast}}'; }    md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{warn-contrast-0.1}}'; }md-toast.md-THEME_NAME-theme .md-toast-content {  background-color: #323232;  color: '{{background-50}}'; }  md-toast.md-THEME_NAME-theme .md-toast-content .md-button {    color: '{{background-50}}'; }    md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight {      color: '{{accent-A200}}'; }      md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight.md-primary {        color: '{{primary-A200}}'; }      md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight.md-warn {        color: '{{warn-A200}}'; }md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar) {  background-color: '{{primary-color}}';  color: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar) md-icon {    color: '{{primary-contrast}}';    fill: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar) .md-button[disabled] md-icon {    color: '{{primary-contrast-0.26}}';    fill: '{{primary-contrast-0.26}}'; }  md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent {    background-color: '{{accent-color}}';    color: '{{accent-contrast}}'; }    md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent .md-ink-ripple {      color: '{{accent-contrast}}'; }    md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent md-icon {      color: '{{accent-contrast}}';      fill: '{{accent-contrast}}'; }    md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent .md-button[disabled] md-icon {      color: '{{accent-contrast-0.26}}';      fill: '{{accent-contrast-0.26}}'; }  md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-warn {    background-color: '{{warn-color}}';    color: '{{warn-contrast}}'; }md-tooltip.md-THEME_NAME-theme {  color: '{{background-A100}}'; }  md-tooltip.md-THEME_NAME-theme ._md-content {    background-color: '{{foreground-2}}'; }")}()}(window,window.angular),window.ngMaterial={version:{full:"1.1.0-rc2"}},function(e){var t=function(e,t){var n=function(e,t,n){return function(){n.$apply(function(){t.resolve(e.result)})}},i=function(e,t,n){return function(){n.$apply(function(){t.reject(e.result)})}},o=function(e,t){return function(e){t.$broadcast("fileProgress",{total:e.total,loaded:e.loaded})}},r=function(e,t){var r=new FileReader;return r.onload=n(r,e,t),r.onerror=i(r,e,t),r.onprogress=o(r,t),r};return{readAsDataUrl:function(t,n){var i=e.defer();return r(i,n).readAsDataURL(t),i.promise}}};e.factory("fileReader",["$q","$log",t])}(angular.module("NightLife")),function(){var e=function(e,t,n){var i=e,o=t||0,r=0;this.getRawData=function(){return i},"string"==typeof e?(r=n||i.length,this.getByteAt=function(e){return 255&i.charCodeAt(e+o)},this.getBytesAt=function(e,t){for(var n=[],r=0;r<t;r++)n[r]=255&i.charCodeAt(e+r+o);return n}):"unknown"==typeof e&&(r=n||IEBinary_getLength(i),this.getByteAt=function(e){return IEBinary_getByteAt(i,e+o)},this.getBytesAt=function(e,t){return new VBArray(IEBinary_getBytesAt(i,e+o,t)).toArray()}),this.getLength=function(){return r},this.getSByteAt=function(e){var t=this.getByteAt(e);return t>127?t-256:t},this.getShortAt=function(e,t){var n=t?(this.getByteAt(e)<<8)+this.getByteAt(e+1):(this.getByteAt(e+1)<<8)+this.getByteAt(e);return n<0&&(n+=65536),n},this.getSShortAt=function(e,t){var n=this.getShortAt(e,t);return n>32767?n-65536:n},this.getLongAt=function(e,t){var n=this.getByteAt(e),i=this.getByteAt(e+1),o=this.getByteAt(e+2),r=this.getByteAt(e+3),a=t?(((n<<8)+i<<8)+o<<8)+r:(((r<<8)+o<<8)+i<<8)+n;return a<0&&(a+=4294967296),a},this.getSLongAt=function(e,t){var n=this.getLongAt(e,t);return n>2147483647?n-4294967296:n},this.getStringAt=function(e,t){for(var n=[],i=this.getBytesAt(e,t),o=0;o<t;o++)n[o]=String.fromCharCode(i[o]);return n.join("")},this.getCharAt=function(e){return String.fromCharCode(this.getByteAt(e))},this.toBase64=function(){return window.btoa(i)},this.fromBase64=function(e){i=window.atob(e)}},t=function(){function e(e){return!!e.exifdata}function t(e,t){BinaryAjax(e.src,function(i){var o=n(i.binaryResponse);e.exifdata=o||{},t&&t.call(e)})}function n(e){if(255!=e.getByteAt(0)||216!=e.getByteAt(1))return!1;for(var t,n=2,i=e.getLength();n<i;){if(255!=e.getByteAt(n))return u&&console.log("Not a valid marker at offset "+n+", found: "+e.getByteAt(n)),!1;if(22400==(t=e.getByteAt(n+1)))return u&&console.log("Found 0xFFE1 marker"),r(e,n+4,e.getShortAt(n+2,!0)-2);if(225==t)return u&&console.log("Found 0xFFE1 marker"),r(e,n+4,e.getShortAt(n+2,!0)-2);n+=2+e.getShortAt(n+2,!0)}}function i(e,t,n,i,r){var a,s,l,c=e.getShortAt(n,r),d={};for(l=0;l<c;l++)a=n+12*l+2,s=i[e.getShortAt(a,r)],!s&&u&&console.log("Unknown tag: "+e.getShortAt(a,r)),d[s]=o(e,a,t,n,r);return d}function o(e,t,n,i,o){var r,a,s,l,c,d,u=e.getShortAt(t+2,o),p=e.getLongAt(t+4,o),g=e.getLongAt(t+8,o)+n;switch(u){case 1:case 7:if(1==p)return e.getByteAt(t+8,o);for(r=p>4?g:t+8,a=[],l=0;l<p;l++)a[l]=e.getByteAt(r+l);return a;case 2:return r=p>4?g:t+8,e.getStringAt(r,p-1);case 3:if(1==p)return e.getShortAt(t+8,o);for(r=p>2?g:t+8,a=[],l=0;l<p;l++)a[l]=e.getShortAt(r+2*l,o);return a;case 4:if(1==p)return e.getLongAt(t+8,o);a=[];for(var l=0;l<p;l++)a[l]=e.getLongAt(g+4*l,o);return a;case 5:if(1==p)return c=e.getLongAt(g,o),d=e.getLongAt(g+4,o),s=new Number(c/d),s.numerator=c,s.denominator=d,s;for(a=[],l=0;l<p;l++)c=e.getLongAt(g+8*l,o),d=e.getLongAt(g+4+8*l,o),a[l]=new Number(c/d),a[l].numerator=c,a[l].denominator=d;return a;case 9:if(1==p)return e.getSLongAt(t+8,o);for(a=[],l=0;l<p;l++)a[l]=e.getSLongAt(g+4*l,o);return a;case 10:if(1==p)return e.getSLongAt(g,o)/e.getSLongAt(g+4,o);for(a=[],l=0;l<p;l++)a[l]=e.getSLongAt(g+8*l,o)/e.getSLongAt(g+4+8*l,o);return a}}function r(e,t){if("Exif"!=e.getStringAt(t,4))return u&&console.log("Not valid EXIF data! "+e.getStringAt(t,4)),!1;var n,o,r,a,s,l=t+6;if(18761==e.getShortAt(l))n=!1;else{if(19789!=e.getShortAt(l))return u&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getShortAt(l+2,n))return u&&console.log("Not valid TIFF data! (no 0x002A)"),!1;if(8!=e.getLongAt(l+4,n))return u&&console.log("Not valid TIFF data! (First offset not 8)",e.getShortAt(l+4,n)),!1;if(o=i(e,l,l+8,g,n),o.ExifIFDPointer){a=i(e,l,l+o.ExifIFDPointer,p,n);for(r in a){switch(r){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":a[r]=f[r][a[r]];break;case"ExifVersion":case"FlashpixVersion":a[r]=String.fromCharCode(a[r][0],a[r][1],a[r][2],a[r][3]);break;case"ComponentsConfiguration":a[r]=f.Components[a[r][0]]+f.Components[a[r][1]]+f.Components[a[r][2]]+f.Components[a[r][3]]}o[r]=a[r]}}if(o.GPSInfoIFDPointer){s=i(e,l,l+o.GPSInfoIFDPointer,m,n);for(r in s){switch(r){case"GPSVersionID":s[r]=s[r][0]+"."+s[r][1]+"."+s[r][2]+"."+s[r][3]}o[r]=s[r]}}return o}function a(n,i){return!!n.complete&&(e(n)?i&&i.call(n):t(n,i),!0)}function s(t,n){if(e(t))return t.exifdata[n]}function l(t){if(!e(t))return{};var n,i=t.exifdata,o={};for(n in i)i.hasOwnProperty(n)&&(o[n]=i[n]);return o}function c(t){if(!e(t))return"";var n,i=t.exifdata,o="";for(n in i)i.hasOwnProperty(n)&&("object"==typeof i[n]?i[n]instanceof Number?o+=n+" : "+i[n]+" ["+i[n].numerator+"/"+i[n].denominator+"]\r\n":o+=n+" : ["+i[n].length+" values]\r\n":o+=n+" : "+i[n]+"\r\n");return o}function d(e){return n(e)}var u=!1,p={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},g={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},m={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},f={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};return{readFromBinaryFile:d,pretty:c,getTag:s,getAllTags:l,getData:a,Tags:p,TiffTags:g,GPSTags:m,StringValues:f}}();angular.module("ImageCropper",[]).directive("imageCrop",function(n){return{template:'<div class="image-crop-outer-container"><span class="img-upload-error-note" ng-if="imageUploadError != null">{{imageUploadError}}</span><div id="image-crop-{{ rand }}" class="ng-image-crop ng-image-crop--{{ shape }}" ng-style="moduleStyles" ng-show="imageUploadError == null"><section ng-style="sectionStyles" ng-show="step==1"></section><section ng-style="sectionStyles" ng-show="step==2"><canvas class="cropping-canvas" width="{{ canvasWidth }}" height="{{ canvasHeight }}" ng-mousemove="onCanvasMouseMove($event)" ng-mousedown="onCanvasMouseDown($event)"></canvas><div ng-style="croppingGuideStyles" class="cropping-guide"></div></section><section ng-style="sectionStyles" class="image-crop-section-final" ng-show="step==3"><img class="image-crop-final" ng-src="{{ croppedDataUri }}" /></section></div><div class="final-section" ng-show="imageUploadError == null"><div class="zoom-handle"><span class="zoom-handle-inner" ng-mousemove="onHandleMouseMove($event)" ng-mousedown="onHandleMouseDown($event)" ng-mouseup="onHandleMouseUp($event)"></span></div><button class="btn-white button-full trans" ng-class="{\'disabled\': updateButtonDisabled}" ng-click="crop = true"><span><i class="ion-image"></i>{{uploadButtonLabel}}<span></span></span></button></div></div>',replace:!0,restrict:"AE",scope:{crop:"=",width:"@",height:"@",shape:"@",src:"=",resultBlob:"=",result:"=",step:"=",padding:"@",maxSize:"@",initialZoom:"@",imageType:"@"},link:function(i,o,r){function a(e){return new Promise(function(t,n){if(!K)return t(e);var i=new Image;i.src=e,i.onload=function(){var n=i.height,o=i.width;if(n<=K&&o<=K)return t(e);var r=o/n;r>1?(o=K,n=K/r):(o=K*r,n=K),o=Math.round(o),n=Math.round(n);var a=document.createElement("canvas");a.width=o,a.height=n;var s=a.getContext("2d");s.drawImage(i,0,0,i.width,i.height,0,0,a.width,a.height),s.save();var l=a.toDataURL();t(l)}})}function s(e,t){return new Promise(function(n,i){var o=new Image;o.src=e,o.onload=function(){var e=document.createElement("canvas");t.Orientation>=5?(e.width=o.height,e.height=o.width):(e.width=o.width,e.height=o.height);var i=e.getContext("2d");switch(t.Orientation){case 1:break;case 2:i.translate(o.width,0),i.scale(-1,1);break;case 3:i.translate(o.width,o.height),i.rotate(Math.PI);break;case 4:i.translate(0,o.height),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-o.height);break;case 7:i.rotate(.5*Math.PI),i.translate(o.width,-o.height),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-o.width,0)}i.drawImage(o,0,0),i.save();var r=e.toDataURL();n(r)}})}function l(o){var r=atob(o.split(",")[1]),l=new e(r,0,r.length);Z=t.readFromBinaryFile(l),a(o).then(function(e){return Z&&Z.Orientation&&Z.Orientation>1?s(e,Z):e}).then(function(e){var t=new Image;t.src=e,x.src=e,i.uploadButtonLabel="Upload Photo","cover_photo"==w&&t.width<960?(i.imageUploadError="The photo you have selected is not wide enough. Please select a photo that is at least 960px in width and 640px in height.",n.imageUploadError="err",i.updateButtonDisabled=!0):"cover_photo"==w&&t.height<640?(i.imageUploadError="The photo you have selected is too short in height. Please select a photo that is at least 960px in width and 640px in height.",n.imageUploadError="err",i.updateButtonDisabled=!0):(i.imageUploadError=null,n.imageUploadError=null,i.updateButtonDisabled=!1),n.$apply()}).catch(function(e){console.log(e)})}function c(){Q=[],U=1,O=0,P=0,N=!1,F=0,L=0,R=!1,J.clearRect(0,0,T.width,T.height),x.src=""}function d(e,t,n){return e=e<z?z:e,e=e>q?q:e,t=t<W?W:t,t=t>Y?Y:t,H=e,G=t,console.log(v,y),"resetCoords"!=n&&(v=e,y=t),J.clearRect(0,0,T.width,T.height),J.drawImage(x,e,t,B,j),e==z||e==q||t==W||t==Y}function u(e){return Math.round(1e3*e)/1e3}function p(){z=T.width-x.width*U-b/2,W=T.height-x.height*U-b/2}function g(e,t){var n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),o=u(n/V),r=u((i.maxZoomedOutLevel-i.maxZoomedInLevel)*o*X);return e>0?-r:r}function m(e){var t,n;t=-1!==e.split(",")[0].indexOf("base64")?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0];for(var i=new Array,o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return new Blob([new Uint8Array(i)],{type:n})}function f(e,t){document.documentElement.addEventListener(e,t,!1)}function h(e,t){document.documentElement.removeEventListener(e,t)}var v=0,y=0,b=i.padding?Number(i.padding):200,w="event_cover_photo"==i.imageType||"offer_cover_photo"==i.imageType||"cover_photo"==i.imageType?"cover_photo":"profile_photo";i.rand=Math.round(99999*Math.random()),i.step=i.step||1,i.shape=i.shape||"circle",i.width=parseInt(i.width,10)||300,i.height=parseInt(i.height,10)||300,i.canvasWidth=i.width+b,i.canvasHeight=i.height+b,i.maxZoomedInLevel=0,i.maxZoomedOutLevel=2;var C=o[0],T=C.getElementsByClassName("cropping-canvas")[0],S=C.getElementsByClassName("zoom-handle")[0],E=C.getElementsByClassName("zoom-handle-inner")[0],I=C.getElementsByClassName("image-crop-final")[0],x=new Image,k=new FileReader,A=0,M=0,_=0,D=0,O=0,P=0,N=!1,F=0,L=0,R=!1,B=_,j=D,H=0,G=0,U=i.initialZoom?Number(i.initialZoom):1,V=0,z=0,q=b/2,W=0,Y=b/2,K=i.maxSize?Number(i.maxSize):null,X=.6,J=T.getContext("2d"),Z=null,Q=[];i.moduleStyles={width:i.width+b+"px",height:i.height+b+"px"},i.sectionStyles={width:i.width+b+"px",height:i.height+b+"px"},i.croppingGuideStyles={width:i.width+"px",height:i.height+"px",top:b/2+"px",left:b/2+"px"},k.onload=function(e){l(this.resultBlob)},x.onload=function(){i.step=2,i.$apply(),J.drawImage(x,0,0),_=x.width,D=x.height,A=i.width+b-this.width,M=i.height+b-this.height,B=_,j=D,i.maxZoomedInLevel=_>=D?(T.height-b)/D:(T.width-b)/_,V=u(Math.sqrt(Math.pow(T.width,2)+Math.pow(T.height,2))),p(),d(Math.round((z+q)/2),Math.round((W+Y)/2),"resetCoords"),zoomImage(n.dataScale*x.width/x.width-1,"initial")},zoomImage=function(e,t){if(e){var n=u(U+e);n>i.maxZoomedOutLevel&&(n=i.maxZoomedOutLevel),n<i.maxZoomedInLevel&&(n=i.maxZoomedInLevel),U=n,i.zoomProportion=(U-i.maxZoomedInLevel)/(i.maxZoomedOutLevel-i.maxZoomedInLevel),i.zoom=U,p(),B=x.width*U,j=x.height*U;var o=O*U,r=P*U;o<z?o=z:o>q&&(o=q),r<W?r=W:r>Y&&(r=Y),J.clearRect(0,0,T.width,T.height),J.drawImage(x,o,r,B,j),$(E).css({left:"calc("+i.zoomProportion+" * 97%)"})}},i.$watch("src",function(){i.src?3!=i.step&&("Blob"==typeof i.src?k.readAsDataURL(i.src):l(i.src)):(i.step=1,c())}),i.$watch("crop",function(){i.crop&&(i.doCrop(),i.crop=!1)}),I.onload=function(){var e=document.createElement("canvas");e.width=this.width-b,e.height=this.height-b,e.style.display="none",e.getContext("2d").drawImage(I,-b/2,-b/2),C.getElementsByClassName("image-crop-section-final")[0].appendChild(e);var t=e.toDataURL();i.result=t,i.resultBlob=m(t),i.$apply()},i.doCrop=function(){i.croppedDataUri=T.toDataURL(),n.$broadcast("cover-photo-uploaded",{imageX:v,imageY:y,imageZoom:U,currentViewName:n.currentViewName}),alert("imageX: "+v+", imageY: "+y+", imageZoom: "+U),i.step=3},i.onCanvasMouseUp=function(e){N&&(e.preventDefault(),e.stopPropagation(),F=0,L=0,N=!1,O=H,P=G,h("mouseup",i.onCanvasMouseUp),h("touchend",i.onCanvasMouseUp),h("mousemove",i.onCanvasMouseMove),h("touchmove",i.onCanvasMouseMove))},T.addEventListener("touchend",i.onCanvasMouseUp,!1),i.onCanvasMouseDown=function(e){F="touchstart"===e.type?e.changedTouches[0].clientX:e.clientX,L="touchstart"===e.type?e.changedTouches[0].clientY:e.clientY,R=!1,N=!0,f("mouseup",i.onCanvasMouseUp),f("mousemove",i.onCanvasMouseMove)},T.addEventListener("touchstart",i.onCanvasMouseDown,!1),i.onHandleMouseDown=function(e){e.preventDefault(),e.stopPropagation(),F=ee="touchstart"===e.type?e.changedTouches[0].clientX:e.clientX,L=te="touchstart"===e.type?e.changedTouches[0].clientY:e.clientY,N=!1,R=!0,f("mouseup",i.onHandleMouseUp),f("touchend",i.onHandleMouseUp),f("mousemove",i.onHandleMouseMove),f("touchmove",i.onHandleMouseMove)},S.addEventListener("touchstart",i.onHandleMouseDown,!1),i.onHandleMouseUp=function(e){R&&(e.preventDefault(),e.stopPropagation(),F=0,L=0,R=!1,O=H,P=G,h("mouseup",i.onHandleMouseUp),h("touchend",i.onHandleMouseUp),h("mousemove",i.onHandleMouseMove),h("touchmove",i.onHandleMouseMove))},S.addEventListener("touchend",i.onHandleMouseUp,!1),i.onCanvasMouseMove=function(e){if(e.preventDefault(),e.stopPropagation(),N){var t=F-("touchmove"===e.type?e.changedTouches[0].clientX:e.clientX),n=L-("touchmove"===e.type?e.changedTouches[0].clientY:e.clientY);d(O-t,P-n,"")}},T.addEventListener("touchmove",i.onCanvasMouseMove,!1);var ee=null,te=null;i.onHandleMouseMove=function(e){if(e.stopPropagation(),e.preventDefault(),!R)return!1;var t=ee-("touchmove"===e.type?e.changedTouches[0].clientX:e.clientX),n=te-("touchmove"===e.type?e.changedTouches[0].clientY:e.clientY);ee="touchmove"===e.type?e.changedTouches[0].clientX:e.clientX,te="touchmove"===e.type?e.changedTouches[0].clientY:e.clientY;var i=g(t,n);zoomImage(i,"")},S.addEventListener("touchmove",i.onHandleMouseMove,!1),i.onHandleMouseWheel=function(e){e.preventDefault(),zoomImage(e.deltaY>0?-.05:.05,"")},T.addEventListener("mousewheel",i.onHandleMouseWheel),S.addEventListener("mousewheel",i.onHandleMouseWheel)}}})}(),!function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,".padding_zero {\n  padding: 0;\n}\n\n.ionic_datepicker_popup .font_bold {\n  font-weight: bold;\n}\n.ionic_datepicker_popup .padding_top_zero {\n  padding-top: 0;\n}\n.ionic_datepicker_popup .padding_left_5px {\n  padding-left: 5px;\n}\n.ionic_datepicker_popup .padding_right_5px {\n  padding-right: 5px;\n}\n.ionic_datepicker_popup .calendar_grid {\n  height: 215px;\n}\n.ionic_datepicker_popup .today {\n  border: 1px solid #009688;\n  border-radius: 50%;\n}\n.ionic_datepicker_popup .selected_date {\n  background-color: #009688;\n  border-radius: 50%;\n  color: #fff;\n  font-weight: bold;\n}\n.ionic_datepicker_popup .popup-head {\n  background-color: #009688;\n  display: none;\n}\n.ionic_datepicker_popup .popup-head .popup-title {\n  color: #ffffff;\n}\n.ionic_datepicker_popup .popup-head .popup-sub-title {\n  color: #ffffff;\n}\n.ionic_datepicker_popup .popup-body {\n  background-color: #ffffff;\n}\n.ionic_datepicker_popup .popup-body .selected_date_full {\n  background-color: #019688;\n  margin: -10px -10px 0 -10px;\n  height: 45px;\n  text-align: center;\n  font-weight: bold;\n  color: #fff;\n  line-height: 45px;\n  font-size: 18px;\n}\n.ionic_datepicker_popup .popup-body .select_section {\n  padding: 1px 5px;\n}\n.ionic_datepicker_popup .popup-body .pointer_events_none {\n  pointer-events: none;\n  color: #aaaaaa !important;\n}\n.ionic_datepicker_popup .popup-body .month_select, .ionic_datepicker_popup .popup-body .year_select {\n  border: none;\n  border-bottom: 1px solid #009688;\n  padding: 0;\n}\n.ionic_datepicker_popup .popup-body .month_select .input-label, .ionic_datepicker_popup .popup-body .year_select .input-label {\n  padding: 2px 0;\n  width: 0;\n}\n.ionic_datepicker_popup .popup-body .month_select select, .ionic_datepicker_popup .popup-body .year_select select {\n  left: 10px;\n  border: none;\n  padding: 0;\n}\n.ionic_datepicker_popup .popup-body .month_select:after, .ionic_datepicker_popup .popup-body .year_select:after {\n  right: 5px;\n  color: #009688;\n}\n.ionic_datepicker_popup .popup-body .show_nav {\n  padding: 10px 0 0 0;\n}\n.ionic_datepicker_popup .popup-body .show_nav .prev_btn_section {\n  padding: 5px 0;\n  text-align: left;\n}\n.ionic_datepicker_popup .popup-body .show_nav .prev_btn_section button {\n  padding: 0;\n}\n.ionic_datepicker_popup .popup-body .show_nav .next_btn_section {\n  padding: 5px 0;\n  text-align: right;\n}\n.ionic_datepicker_popup .popup-body .show_nav .next_btn_section button {\n  padding: 0;\n}\n.ionic_datepicker_popup .popup-body .button-clear {\n  color: #009688;\n}\n.ionic_datepicker_popup .popup-buttons {\n  padding: 0;\n  min-height: 45px;\n}\n.ionic_datepicker_popup .popup-buttons button {\n  background-color: #009688;\n  border-radius: 0;\n  margin-right: 1px;\n  color: #ffffff;\n}\n\n.ionic_datepicker_modal .header, .ionic_datepicker_modal .footer {\n  background-color: #009688;\n}\n.ionic_datepicker_modal .header .title, .ionic_datepicker_modal .header .button, .ionic_datepicker_modal .footer .title, .ionic_datepicker_modal .footer .button {\n  color: #ffffff;\n}\n.ionic_datepicker_modal .footer .button-block {\n  margin: 0;\n}\n.ionic_datepicker_modal .today {\n  border: 1px solid #009688;\n}\n.ionic_datepicker_modal .selected_date {\n  background-color: #009688;\n  color: #fff;\n  font-weight: bold;\n}\n.ionic_datepicker_modal .pointer_events_none {\n  pointer-events: none;\n  color: #aaaaaa !important;\n}\n.ionic_datepicker_modal .select_section {\n  padding: 1px 5px;\n}\n.ionic_datepicker_modal .button-clear {\n  color: #009688;\n}\n.ionic_datepicker_modal .month_select, .ionic_datepicker_modal .year_select {\n  border: none;\n  border-bottom: 1px solid #009688;\n  padding: 0;\n}\n.ionic_datepicker_modal .month_select .input-label, .ionic_datepicker_modal .year_select .input-label {\n  padding: 2px 0;\n  width: 0;\n}\n.ionic_datepicker_modal .month_select select, .ionic_datepicker_modal .year_select select {\n  left: 10px;\n  border: none;\n  padding: 0 10px;\n}\n.ionic_datepicker_modal .month_select:after, .ionic_datepicker_modal .year_select:after {\n  right: 5px;\n  color: #009688;\n}\n.ionic_datepicker_modal .padding_left_5px {\n  padding-left: 5px;\n}\n.ionic_datepicker_modal .padding_right_5px {\n  padding-right: 5px;\n}\n.ionic_datepicker_modal .date_col {\n  height: 50px;\n  line-height: 50px;\n}\n.ionic_datepicker_modal .font_bold {\n  font-weight: bold;\n}\n.ionic_datepicker_modal .font_22px {\n  font-size: 22px;\n}\n.platform-android .ionic_datepicker_modal .bar .title.title-left {\n  text-align: center;\n}\n.platform-android .ionic_datepicker_modal select {\n  left: 25%;\n}\n.platform-ios .ionic_datepicker_modal select {\n  left: 5%;\n}"),function(e){try{e=angular.module("ionic-datepicker.templates")}catch(t){e=angular.module("ionic-datepicker.templates",[])}e.run(["$templateCache",function(e){e.put("ionic-datepicker-modal.html",'<ion-modal-view class=ionic_datepicker_modal><ion-header-bar class=header><h1 class=title>{{selctedDateEpoch | date : mainObj.dateFormat}}</h1></ion-header-bar><ion-content class=ionic_datepicker_modal_content><div><div class="row text-center"><div class="col col-10 left_arrow"><button class="button-clear font_22px" ng-click=prevMonth() ng-class="{\'pointer_events_none\':((firstDayEpoch - 86400000) < fromDate)}"><i class="icon ion-chevron-left"></i></button></div><div class="col col-80 text-center"><div class="row select_section"><div class="col-50 padding_right_5px"><label class="item item-input item-select month_select"><span class=input-label>&nbsp;</span><select ng-model=currentMonth ng-change=monthChanged(currentMonth)><option ng-repeat="month in monthsList" ng-selected="month == currentMonthSelected" value={{month}}>{{month}}</option></select></label></div><div class="col-50 padding_left_5px"><label class="item item-input item-select year_select"><span class=input-label>&nbsp;</span><select ng-model=currentYear ng-change=yearChanged(currentYear)><option ng-repeat="year in yearsList" ng-selected="year == currentYearSelected" value={{year}}>{{year}}</option></select></label></div></div></div><div class="col col-10 right_arrow"><button class="button-clear font_22px" ng-click=nextMonth() ng-class="{\'pointer_events_none\':((lastDayEpoch + 86400000)> toDate)}"><i class="icon ion-chevron-right"></i></button></div></div><div class=calendar_grid><div class="row padding-top weeks_row"><div class="col text-center font_bold" ng-repeat="weekName in weeksList track by $index" ng-bind=weekName></div></div><div><div class="row text-center padding_top_zero" ng-repeat="row in rows track by $index"><div class="col padding_zero date_col" ng-repeat="col in cols track by $index" ng-class="{\'selected_date\': (dayList[row + $index].epoch === selctedDateEpoch), \'today\' : (dayList[row + $index].epoch == today), \'pointer_events_none\':((disabledDates.indexOf(dayList[row + $index].epoch) >= 0) || (dayList[row + $index].disabled))}" ng-click="dateSelected(dayList[row + $index])"><div class=date_cell>{{dayList[row + col].date}}</div></div></div></div></div></div></ion-content><ion-footer-bar class=footer><div class="row padding_zero"><button class="button button-clear button-block button_set" ng-if=!mainObj.closeOnSelect ng-click=setIonicDatePickerDate()>{{mainObj.setLabel}}</button> <button class="button button-clear button-block button_today" ng-if=mainObj.showTodayButton ng-click=setIonicDatePickerTodayDate()>{{mainObj.todayLabel}}</button> <button class="button button-clear button-block button_close" ng-click=closeIonicDatePickerModal()>{{mainObj.closeLabel}}</button></div></ion-footer-bar></ion-modal-view>')}])}(),function(e){try{e=angular.module("ionic-datepicker.templates")}catch(t){e=angular.module("ionic-datepicker.templates",[])}e.run(["$templateCache",function(e){e.put("ionic-datepicker-popup.html",'<div class=selected_date_full>{{selctedDateEpoch | date : mainObj.dateFormat}}</div><div class=date_selection><div class="row show_nav"><div class="col-10 prev_btn_section"><button class=button-clear ng-click=prevMonth() ng-class="{\'pointer_events_none\':((firstDayEpoch - 86400000) < fromDate)}"><i class="icon ion-chevron-left"></i></button></div><div class="col-80 text-center"><div class="row select_section"><div class="col-50 padding_right_5px"><label class="item item-input item-select month_select"><span class=input-label>&nbsp;</span><select ng-model=currentMonth ng-change=monthChanged(currentMonth)><option ng-repeat="month in monthsList" ng-selected="month==currentMonthSelected" value={{month}}>{{month}}</option></select></label></div><div class="col-50 padding_left_5px"><label class="item item-input item-select year_select"><span class=input-label>&nbsp;</span><select ng-model=currentYear ng-change=yearChanged(currentYear)><option ng-repeat="year in yearsList" ng-selected="year==currentYearSelected" value={{year}}>{{year}}</option></select></label></div></div></div><div class="col-10 next_btn_section"><button class=button-clear ng-click=nextMonth() ng-class="{\'pointer_events_none\':((lastDayEpoch + 86400000)> toDate)}"><i class="icon ion-chevron-right"></i></button></div></div><div class=calendar_grid><div class="row weeks_row"><div class="col text-center font_bold" ng-repeat="weekName in weeksList track by $index" ng-bind=weekName></div></div><div><div class="row text-center padding_top_zero" ng-repeat="row in rows track by $index"><div class="col no_padding date_col" ng-repeat="col in cols track by $index" ng-class="{\'selected_date\': (dayList[row + $index].epoch === selctedDateEpoch), \'today\' : (dayList[row + $index].epoch == today), \'pointer_events_none\':((disabledDates.indexOf(dayList[row + $index].epoch) >= 0) || dayList[row + $index].disabled)}" ng-click="dateSelected(dayList[row + $index])"><div class=date_cell>{{dayList[row + col].date}}</div></div></div></div></div></div>')}])}(),angular.module("ionic-datepicker",["ionic","ionic-datepicker.service","ionic-datepicker.provider","ionic-datepicker.templates"]),angular.module("ionic-datepicker.provider",[]).provider("ionicDatePicker",function(){var e={setLabel:"Set",todayLabel:"Today",closeLabel:"Close",inputDate:new Date,mondayFirst:!0,weeksList:["S","M","T","W","T","F","S"],monthsList:["Jan","Feb","March","April","May","June","July","Aug","Sept","Oct","Nov","Dec"],templateType:"popup",showTodayButton:!1,closeOnSelect:!1,disableWeekdays:[]};this.configDatePicker=function(t){angular.extend(e,t)},this.$get=["$rootScope","$ionicPopup","$ionicModal","IonicDatepickerService",function(t,n,i,o){function r(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function a(e){e.disabledDates&&0!==e.disabledDates.length?(p.disabledDates=[],angular.forEach(e.disabledDates,function(e,t){e=r(new Date(e)),p.disabledDates.push(e.getTime())})):p.disabledDates=[]}function s(e){e=r(e),p.currentDate=angular.copy(e);var t=new Date(e.getFullYear(),e.getMonth(),1).getDate(),n=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();p.monthsList=[],p.monthsList=p.mainObj.monthsList&&12===p.mainObj.monthsList.length?p.mainObj.monthsList:o.monthsList,p.yearsList=o.getYearsList(p.mainObj.from,p.mainObj.to),p.dayList=[];var i,a;p.firstDayEpoch=r(new Date(e.getFullYear(),e.getMonth(),t)).getTime(),p.lastDayEpoch=r(new Date(e.getFullYear(),e.getMonth(),n)).getTime();for(var s=t;n>=s;s++)i=new Date(e.getFullYear(),e.getMonth(),s),a=i.getTime()<p.fromDate||i.getTime()>p.toDate||p.mainObj.disableWeekdays.indexOf(i.getDay())>=0,p.dayList.push({date:i.getDate(),month:i.getMonth(),year:i.getFullYear(),day:i.getDay(),epoch:i.getTime(),disabled:a});var l=p.dayList[0].day-p.mainObj.mondayFirst;l=0>l?6:l;for(var c=0;l>c;c++)p.dayList.unshift({});p.rows=[0,7,14,21,28,35],p.cols=[0,1,2,3,4,5,6],p.currentMonth=p.mainObj.monthsList[e.getMonth()],p.currentYear=e.getFullYear(),p.currentMonthSelected=angular.copy(p.currentMonth),p.currentYearSelected=angular.copy(p.currentYear),p.numColumns=7}function l(e){p.mainObj=angular.copy(e),p.selctedDateEpoch=r(p.mainObj.inputDate).getTime(),p.weeksList=p.mainObj.weeksList&&7===p.mainObj.weeksList.length?p.mainObj.weeksList:["S","M","T","W","T","F","S"],p.mainObj.mondayFirst&&p.weeksList.push(p.mainObj.weeksList.shift()),p.disableWeekdays=p.mainObj.disableWeekdays,s(p.mainObj.inputDate),a(p.mainObj)}function c(){p.modal.show()}function d(){p.modal.hide()}var u={},p=t.$new();return p.today=r(new Date).getTime(),p.disabledDates=[],p.prevMonth=function(){1===p.currentDate.getMonth()&&p.currentDate.setFullYear(p.currentDate.getFullYear()),p.currentDate.setMonth(p.currentDate.getMonth()-1),p.currentMonth=p.mainObj.monthsList[p.currentDate.getMonth()],p.currentYear=p.currentDate.getFullYear(),s(p.currentDate)},p.nextMonth=function(){11===p.currentDate.getMonth()&&p.currentDate.setFullYear(p.currentDate.getFullYear()),p.currentDate.setDate(1),p.currentDate.setMonth(p.currentDate.getMonth()+1),p.currentMonth=p.mainObj.monthsList[p.currentDate.getMonth()],p.currentYear=p.currentDate.getFullYear(),s(p.currentDate)},p.dateSelected=function(e){e&&0!==Object.keys(e).length&&(p.selctedDateEpoch=e.epoch,p.mainObj.closeOnSelect&&(p.mainObj.callback(p.selctedDateEpoch),"popup"==p.mainObj.templateType.toLowerCase()?p.popup.close():d()))},p.setIonicDatePickerTodayDate=function(){var e=new Date;s(new Date),p.selctedDateEpoch=r(e).getTime(),p.mainObj.closeOnSelect&&(p.mainObj.callback(p.selctedDateEpoch),d())},p.setIonicDatePickerDate=function(){p.mainObj.callback(p.selctedDateEpoch),d()},p.monthChanged=function(e){var t=p.monthsList.indexOf(e);p.currentDate.setMonth(t),s(p.currentDate)},p.yearChanged=function(e){p.currentDate.setFullYear(e),s(p.currentDate)},i.fromTemplateUrl("ionic-datepicker-modal.html",{scope:p,animation:"slide-in-up"}).then(function(e){p.modal=e}),p.$on("$destroy",function(){p.modal.remove()}),p.closeIonicDatePickerModal=function(){d()},u.openDatePicker=function(t){var i=[];p.mainObj=angular.extend({},e,t),p.mainObj.from&&(p.fromDate=r(new Date(p.mainObj.from)).getTime()),p.mainObj.to&&(p.toDate=r(new Date(p.mainObj.to)).getTime()),t.disableWeekdays&&e.disableWeekdays&&(p.mainObj.disableWeekdays=t.disableWeekdays.concat(e.disableWeekdays)),l(p.mainObj),p.mainObj.closeOnSelect||(i=[{text:p.mainObj.setLabel,type:"button_set",onTap:function(e){p.mainObj.callback(p.selctedDateEpoch)}}]),p.mainObj.showTodayButton&&i.push({text:p.mainObj.todayLabel,type:"button_today",onTap:function(e){var t=new Date;s(new Date),p.selctedDateEpoch=r(t).getTime(),p.mainObj.closeOnSelect||e.preventDefault()}}),i.push({text:p.mainObj.closeLabel,type:"button_close",onTap:function(e){console.log("ionic-datepicker popup closed.")}}),"popup"==p.mainObj.templateType.toLowerCase()?p.popup=n.show({templateUrl:"ionic-datepicker-popup.html",scope:p,cssClass:"ionic_datepicker_popup",buttons:i}):c()},u}]}),angular.module("ionic-datepicker.service",[]).service("IonicDatepickerService",function(){this.monthsList=["January","February","March","April","May","June","July","August","September","October","November","December"],this.getYearsList=function(e,t){var n=[],i=1900,o=2100;i=e?new Date(e).getFullYear():i,o=t?new Date(t).getFullYear():o;for(var r=i;o>=r;r++)n.push(r);return n}}),!function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,"/*\nTo customize the look and feel of Ionic, you can override the variables\nin ionic's _variables.scss file.\nFor example, you might change some of the default colors:\n*/\n.ionic_timepicker_popup .font_28px {\n  font-size: 28px;\n}\n.ionic_timepicker_popup .margin_zero {\n  margin: 0;\n}\n.ionic_timepicker_popup .padding_zero {\n  padding: 0;\n}\n.ionic_timepicker_popup .popup {\n  background-color: #ffffff;\n}\n.ionic_timepicker_popup .popup-head {\n  display: none;\n}\n.ionic_timepicker_popup .popup-body {\n  padding: 0;\n}\n.ionic_timepicker_popup .popup-buttons {\n  padding: 0;\n  min-height: 44px;\n  height: 44px;\n}\n.ionic_timepicker_popup .popup-buttons .button:not(:last-child) {\n  margin-right: 1px;\n}\n.ionic_timepicker_popup .padding_left_15px {\n  padding-left: 15px;\n}\n.ionic_timepicker_popup .heading {\n  height: 44px;\n  background-color: #009688;\n  color: #ffffff;\n  text-align: center;\n  line-height: 44px;\n  font-size: 18px;\n  font-weight: bold;\n}\n.ionic_timepicker_popup .time_picker_colon {\n  padding-top: 45px;\n  text-align: center;\n  font-weight: bold;\n}\n.ionic_timepicker_popup .time_picker_arrows {\n  width: 100%;\n}\n.ionic_timepicker_popup .time_picker_box_text {\n  height: 40px;\n  text-align: center;\n  border: 1px solid #dddddd;\n  font-size: 16px;\n  line-height: 38px;\n}\n.ionic_timepicker_popup .overflowShow {\n  white-space: normal !important;\n}\n.ionic_timepicker_popup .button_set, .ionic_timepicker_popup .button_close {\n  background-color: #009688;\n  color: #ffffff;\n}"),function(e){try{e=angular.module("ionic-timepicker.templates")}catch(t){e=angular.module("ionic-timepicker.templates",[])}e.run(["$templateCache",function(e){e.put("ionic-timepicker.html",'<div><div class=heading>{{time.hours}} : {{time.minutes}} <span ng-show="time.format == 12">{{time.meridian}}</span></div><div class=row ng-class="{\'padding_left_15px\':time.format == 12}"><div class="col col-25" ng-class="{\'col-offset-20 col-25\':time.format == 24}"><button type=button class="button button-clear button-small button-dark time_picker_arrows" ng-click=increaseHours()><i class="icon ion-chevron-up"></i></button><div ng-bind=time.hours class=time_picker_box_text></div><button type=button class="button button-clear button-small button-dark time_picker_arrows" ng-click=decreaseHours()><i class="icon ion-chevron-down"></i></button></div><label class="col col-10 time_picker_colon">:</label><div class="col col-25" ng-class="{\'col-25\':time.format == 24}"><button type=button class="button button-clear button-small button-dark time_picker_arrows" ng-click=increaseMinutes()><i class="icon ion-chevron-up"></i></button><div ng-bind=time.minutes class=time_picker_box_text></div><button type=button class="button button-clear button-small button-dark time_picker_arrows" ng-click=decreaseMinutes()><i class="icon ion-chevron-down"></i></button></div><label class="col col-10 time_picker_colon" ng-if="time.format == 12">:</label><div class="col col-25" ng-if="time.format == 12"><button type=button class="button button-clear button-small button-dark time_picker_arrows" ng-click=changeMeridian()><i class="icon ion-chevron-up"></i></button><div ng-bind=time.meridian class=time_picker_box_text></div><button type=button class="button button-clear button-small button-dark time_picker_arrows" ng-click=changeMeridian()><i class="icon ion-chevron-down"></i></button></div></div></div>')}])}(),angular.module("ionic-timepicker",["ionic-timepicker.provider","ionic-timepicker.templates"]),angular.module("ionic-timepicker.provider",[]).provider("ionicTimePicker",function(){var e={setLabel:"Set",closeLabel:"Close",inputTime:60*(new Date).getHours()*60+60*(new Date).getMinutes(),format:12,step:15};this.configTimePicker=function(t){angular.extend(e,t)},this.$get=["$rootScope","$ionicPopup",function(t,n){function i(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function o(e,t){a.time.hours=e/3600;var n=e%3600;12==t&&(a.time.hours>12?(a.time.hours-=12,a.time.meridian="PM"):a.time.meridian="AM"),a.time.minutes=n/60,a.time.hours=a.time.hours.toFixed(0),a.time.minutes=a.time.minutes.toFixed(0),1==a.time.hours.toString().length&&(a.time.hours="0"+a.time.hours),1==a.time.minutes.toString().length&&(a.time.minutes="0"+a.time.minutes),a.time.format=a.mainObj.format}var r={},a=t.$new();return a.today=i(new Date).getTime(),a.time={},a.increaseHours=function(){a.time.hours=Number(a.time.hours),12==a.mainObj.format&&(12!=a.time.hours?a.time.hours+=1:a.time.hours=1),24==a.mainObj.format&&(a.time.hours=(a.time.hours+1)%24),a.time.hours=a.time.hours<10?"0"+a.time.hours:a.time.hours},a.decreaseHours=function(){a.time.hours=Number(a.time.hours),12==a.mainObj.format&&(a.time.hours>1?a.time.hours-=1:a.time.hours=12),24==a.mainObj.format&&(a.time.hours=(a.time.hours+23)%24),a.time.hours=a.time.hours<10?"0"+a.time.hours:a.time.hours},a.increaseMinutes=function(){a.time.minutes=Number(a.time.minutes),a.time.minutes=(a.time.minutes+a.mainObj.step)%60,a.time.minutes=a.time.minutes<10?"0"+a.time.minutes:a.time.minutes},a.decreaseMinutes=function(){a.time.minutes=Number(a.time.minutes),a.time.minutes=(a.time.minutes+(60-a.mainObj.step))%60,a.time.minutes=a.time.minutes<10?"0"+a.time.minutes:a.time.minutes},a.changeMeridian=function(){a.time.meridian="AM"===a.time.meridian?"PM":"AM"},r.openTimePicker=function(t){var i=[];a.mainObj=angular.extend({},e,t),o(a.mainObj.inputTime,a.mainObj.format),i.push({text:a.mainObj.setLabel,type:"button_set",onTap:function(e){var t=0;12==a.time.format?(a.time.hours=Number(a.time.hours),"PM"==a.time.meridian&&12!=a.time.hours?a.time.hours+=12:"AM"==a.time.meridian&&12==a.time.hours&&(a.time.hours-=12),t=60*a.time.hours*60+60*a.time.minutes):t=60*a.time.hours*60+60*a.time.minutes,a.mainObj.callback(t)}}),i.push({text:a.mainObj.closeLabel,type:"button_close"}),a.popup=n.show({templateUrl:"ionic-timepicker.html",scope:a,cssClass:"ionic_timepicker_popup",buttons:i})},r}]}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=re.type(e);return"function"!==n&&!re.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e,t,n){if(re.isFunction(t))return re.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return re.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(fe.test(t))return re.filter(t,e,n);t=re.filter(t,e)}return re.grep(e,function(e){return Q.call(t,e)>-1!==n})}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function r(e){var t={};return re.each(e.match(we)||[],function(e,n){t[n]=!0}),t}function a(){K.removeEventListener("DOMContentLoaded",a),e.removeEventListener("load",a),re.ready()}function s(){this.expando=re.expando+s.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(ke,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:xe.test(n)?re.parseJSON(n):n)}catch(e){}Ie.set(e,t,n)}else n=void 0;return n}function c(e,t,n,i){var o,r=1,a=20,s=i?function(){return i.cur()}:function(){return re.css(e,t,"")},l=s(),c=n&&n[3]||(re.cssNumber[t]?"":"px"),d=(re.cssNumber[t]||"px"!==c&&+l)&&Me.exec(re.css(e,t));if(d&&d[3]!==c){c=c||d[3],n=n||[],d=+l||1;do{r=r||".5",d/=r,re.style(e,t,d+c)}while(r!==(r=s()/l)&&1!==r&&--a)}return n&&(d=+d||+l||0,o=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=d,i.end=o)),o}function d(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&re.nodeName(e,t)?re.merge([e],n):n}function u(e,t){for(var n=0,i=e.length;i>n;n++)Ee.set(e[n],"globalEval",!t||Ee.get(t[n],"globalEval"))}function p(e,t,n,i,o){for(var r,a,s,l,c,p,g=t.createDocumentFragment(),m=[],f=0,h=e.length;h>f;f++)if((r=e[f])||0===r)if("object"===re.type(r))re.merge(m,r.nodeType?[r]:r);else if(Fe.test(r)){for(a=a||g.appendChild(t.createElement("div")),s=(Oe.exec(r)||["",""])[1].toLowerCase(),l=Ne[s]||Ne._default,a.innerHTML=l[1]+re.htmlPrefilter(r)+l[2],p=l[0];p--;)a=a.lastChild;re.merge(m,a.childNodes),a=g.firstChild,a.textContent=""}else m.push(t.createTextNode(r));for(g.textContent="",f=0;r=m[f++];)if(i&&re.inArray(r,i)>-1)o&&o.push(r);else if(c=re.contains(r.ownerDocument,r),a=d(g.appendChild(r),"script"),c&&u(a),n)for(p=0;r=a[p++];)Pe.test(r.type||"")&&n.push(r);return g}function g(){return!0}function m(){return!1}function f(){try{return K.activeElement}catch(e){}}function h(e,t,n,i,o,r){var a,s;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(s in t)h(e,s,n,i,t[s],r);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=m;else if(!o)return this;return 1===r&&(a=o,o=function(e){return re().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=re.guid++)),e.each(function(){re.event.add(this,t,o,i,n)})}function v(e,t){return re.nodeName(e,"table")&&re.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e:e}function y(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function b(e){var t=Ue.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){var n,i,o,r,a,s,l,c;if(1===t.nodeType){if(Ee.hasData(e)&&(r=Ee.access(e),a=Ee.set(t,r),c=r.events)){delete a.handle,a.events={};for(o in c)for(n=0,i=c[o].length;i>n;n++)re.event.add(t,o,c[o][n])}Ie.hasData(e)&&(s=Ie.access(e),l=re.extend({},s),Ie.set(t,l))}}function C(e,t){var n=t.nodeName.toLowerCase();"input"===n&&$e.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function T(e,t,n,i){t=J.apply([],t);var o,r,a,s,l,c,u=0,g=e.length,m=g-1,f=t[0],h=re.isFunction(f);if(h||g>1&&"string"==typeof f&&!ie.checkClone&&Ge.test(f))return e.each(function(o){var r=e.eq(o);h&&(t[0]=f.call(this,o,r.html())),T(r,t,n,i)});if(g&&(o=p(t,e[0].ownerDocument,!1,e,i),r=o.firstChild,1===o.childNodes.length&&(o=r),r||i)){for(a=re.map(d(o,"script"),y),s=a.length;g>u;u++)l=o,u!==m&&(l=re.clone(l,!0,!0),s&&re.merge(a,d(l,"script"))),n.call(e[u],l,u);if(s)for(c=a[a.length-1].ownerDocument,re.map(a,b),u=0;s>u;u++)l=a[u],Pe.test(l.type||"")&&!Ee.access(l,"globalEval")&&re.contains(c,l)&&(l.src?re._evalUrl&&re._evalUrl(l.src):re.globalEval(l.textContent.replace(Ve,"")))}return e}function S(e,t,n){for(var i,o=t?re.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||re.cleanData(d(i)),i.parentNode&&(n&&re.contains(i.ownerDocument,i)&&u(d(i,"script")),i.parentNode.removeChild(i));return e}function E(e,t){var n=re(t.createElement(e)).appendTo(t.body),i=re.css(n[0],"display");return n.detach(),i}function I(e){var t=K,n=qe[e];return n||(n=E(e,t),"none"!==n&&n||(ze=(ze||re("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=ze[0].contentDocument,t.write(),t.close(),n=E(e,t),ze.detach()),qe[e]=n),n}function x(e,t,n){var i,o,r,a,s=e.style;return n=n||Ke(e),n&&(a=n.getPropertyValue(t)||n[t],""!==a||re.contains(e.ownerDocument,e)||(a=re.style(e,t)),!ie.pixelMarginRight()&&Ye.test(a)&&We.test(t)&&(i=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=o,s.maxWidth=r)),void 0!==a?a+"":a}function k(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function A(e){if(e in nt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=tt.length;n--;)if((e=tt[n]+t)in nt)return e}function M(e,t,n){var i=Me.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function _(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>r;r+=2)"margin"===n&&(a+=re.css(e,n+_e[r],!0,o)),i?("content"===n&&(a-=re.css(e,"padding"+_e[r],!0,o)),"margin"!==n&&(a-=re.css(e,"border"+_e[r]+"Width",!0,o))):(a+=re.css(e,"padding"+_e[r],!0,o),"padding"!==n&&(a+=re.css(e,"border"+_e[r]+"Width",!0,o)));return a}function D(t,n,i){var o=!0,r="width"===n?t.offsetWidth:t.offsetHeight,a=Ke(t),s="border-box"===re.css(t,"boxSizing",!1,a);if(K.msFullscreenElement&&e.top!==e&&t.getClientRects().length&&(r=Math.round(100*t.getBoundingClientRect()[n])),0>=r||null==r){if(r=x(t,n,a),(0>r||null==r)&&(r=t.style[n]),Ye.test(r))return r;o=s&&(ie.boxSizingReliable()||r===t.style[n]),r=parseFloat(r)||0}return r+_(t,n,i||(s?"border":"content"),o,a)+"px"}function $(e,t){for(var n,i,o,r=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(r[a]=Ee.get(i,"olddisplay"),n=i.style.display,t?(r[a]||"none"!==n||(i.style.display=""),""===i.style.display&&De(i)&&(r[a]=Ee.access(i,"olddisplay",I(i.nodeName)))):(o=De(i),"none"===n&&o||Ee.set(i,"olddisplay",o?n:re.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[a]||"":"none"));return e}function O(e,t,n,i,o){return new O.prototype.init(e,t,n,i,o)}function P(){return e.setTimeout(function(){it=void 0}),it=re.now()}function N(e,t){var n,i=0,o={height:e};for(t=t?1:0;4>i;i+=2-t)n=_e[i],o["margin"+n]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function F(e,t,n){for(var i,o=(B.tweeners[t]||[]).concat(B.tweeners["*"]),r=0,a=o.length;a>r;r++)if(i=o[r].call(n,t,e))return i}function L(e,t,n){var i,o,r,a,s,l,c,d=this,u={},p=e.style,g=e.nodeType&&De(e),m=Ee.get(e,"fxshow");n.queue||(s=re._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,re.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=re.css(e,"display"),"inline"===("none"===c?Ee.get(e,"olddisplay")||I(e.nodeName):c)&&"none"===re.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],rt.exec(o)){if(delete t[i],r=r||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!m||void 0===m[i])continue;g=!0}u[i]=m&&m[i]||re.style(e,i)}else c=void 0;if(re.isEmptyObject(u))"inline"===("none"===c?I(e.nodeName):c)&&(p.display=c);else{m?"hidden"in m&&(g=m.hidden):m=Ee.access(e,"fxshow",{}),r&&(m.hidden=!g),g?re(e).show():d.done(function(){re(e).hide()}),d.done(function(){var t;Ee.remove(e,"fxshow");for(t in u)re.style(e,t,u[t])});for(i in u)a=F(g?m[i]:0,i,d),i in m||(m[i]=a.start,g&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function R(e,t){var n,i,o,r,a;for(n in e)if(i=re.camelCase(n),o=t[i],r=e[n],re.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),(a=re.cssHooks[i])&&"expand"in a){r=a.expand(r),delete e[i];for(n in r)n in e||(e[n]=r[n],t[n]=o)}else t[i]=o}function B(e,t,n){var i,o,r=0,a=B.prefilters.length,s=re.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=it||P(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,r=1-i,a=0,l=c.tweens.length;l>a;a++)c.tweens[a].run(r);return s.notifyWith(e,[c,r,n]),1>r&&l?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:re.extend({},t),opts:re.extend(!0,{specialEasing:{},easing:re.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||P(),duration:n.duration,tweens:[],createTween:function(t,n){var i=re.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),d=c.props;for(R(d,c.opts.specialEasing);a>r;r++)if(i=B.prefilters[r].call(c,e,d,c.opts))return re.isFunction(i.stop)&&(re._queueHooks(c.elem,c.opts.queue).stop=re.proxy(i.stop,i)),i;return re.map(d,F,c),re.isFunction(c.opts.start)&&c.opts.start.call(e,c),re.fx.timer(re.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function j(e){return e.getAttribute&&e.getAttribute("class")||""}function H(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(we)||[];if(re.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function G(e,t,n,i){function o(s){var l;return r[s]=!0,re.each(e[s]||[],function(e,s){var c=s(t,n,i);return"string"!=typeof c||a||r[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}var r={},a=e===Et;return o(t.dataTypes[0])||!r["*"]&&o("*")}function U(e,t){var n,i,o=re.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&re.extend(!0,e,i),e}function V(e,t,n){for(var i,o,r,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}a||(a=o)}r=r||a}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function z(e,t,n,i){var o,r,a,s,l,c={},d=e.dataTypes.slice();if(d[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(r=d.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=d.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=c[l+" "+r]||c["* "+r]))for(o in c)if(s=o.split(" "),s[1]===r&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[o]:!0!==c[o]&&(r=s[0],d.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}function q(e,t,n,i){var o;if(re.isArray(t))re.each(t,function(t,o){n||At.test(e)?i(e,o):q(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)});else if(n||"object"!==re.type(t))i(e,t);else for(o in t)q(e+"["+o+"]",t[o],n,i)}function W(e){return re.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],K=e.document,X=Y.slice,J=Y.concat,Z=Y.push,Q=Y.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,ie={},oe="2.2.0",re=function(e,t){return new re.fn.init(e,t)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,le=/-([\da-z])/gi,ce=function(e,t){return t.toUpperCase()};re.fn=re.prototype={jquery:oe,constructor:re,selector:"",length:0,toArray:function(){return X.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:X.call(this)},pushStack:function(e){var t=re.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return re.each(this,e)},map:function(e){return this.pushStack(re.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Z,sort:Y.sort,splice:Y.splice},re.extend=re.fn.extend=function(){var e,t,n,i,o,r,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||re.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],i=e[t],a!==i&&(c&&i&&(re.isPlainObject(i)||(o=re.isArray(i)))?(o?(o=!1,r=n&&re.isArray(n)?n:[]):r=n&&re.isPlainObject(n)?n:{},a[t]=re.extend(c,r,i)):void 0!==i&&(a[t]=i));return a},re.extend({expando:"jQuery"+(oe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===re.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!re.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){return"object"===re.type(e)&&!e.nodeType&&!re.isWindow(e)&&!(e.constructor&&!ne.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=re.trim(e))&&(1===e.indexOf("use strict")?(t=K.createElement("script"),t.text=e,K.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(se,"ms-").replace(le,ce)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,o=0;if(n(e))for(i=e.length;i>o&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?re.merge(i,"string"==typeof e?[e]:e):Z.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:Q.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;n>i;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,r=e.length,a=!n;r>o;o++)!t(e[o],o)!==a&&i.push(e[o]);return i},map:function(e,t,i){var o,r,a=0,s=[];if(n(e))for(o=e.length;o>a;a++)null!=(r=t(e[a],a,i))&&s.push(r);else for(a in e)null!=(r=t(e[a],a,i))&&s.push(r);return J.apply([],s)},guid:1,proxy:function(e,t){var n,i,o;return"string"==typeof t&&(n=e[t],t=e,e=n),re.isFunction(e)?(i=X.call(arguments,2),o=function(){return e.apply(t||this,i.concat(X.call(arguments)))},o.guid=e.guid=e.guid||re.guid++,o):void 0},now:Date.now,support:ie}),"function"==typeof Symbol&&(re.fn[Symbol.iterator]=Y[Symbol.iterator]),re.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var de=function(e){function t(e,t,n,i){var o,r,a,s,l,c,u,g,m=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&((t?t.ownerDocument||t:j)!==$&&D(t),t=t||$,P)){if(11!==f&&(c=ve.exec(e)))if(o=c[1]){if(9===f){if(!(a=t.getElementById(o)))return n;if(a.id===o)return n.push(a),n}else if(m&&(a=m.getElementById(o))&&R(t,a)&&a.id===o)return n.push(a),n}else{if(c[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((o=c[3])&&C.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(o)),n}if(C.qsa&&!z[e+" "]&&(!N||!N.test(e))){if(1!==f)m=t,g=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(be,"\\$&"):t.setAttribute("id",s=B),u=I(e),r=u.length,l=pe.test(s)?"#"+s:"[id='"+s+"']";r--;)u[r]=l+" "+p(u[r]);g=u.join(","),m=ye.test(e)&&d(t.parentNode)||t}if(g)try{return Z.apply(n,m.querySelectorAll(g)),n}catch(e){}finally{s===B&&t.removeAttribute("id")}}}return k(e.replace(se,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[B]=!0,e}function o(e){var t=$.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),i=n.length;i--;)T.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function d(e){return e&&void 0!==e.getElementsByTagName&&e}function u(){}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function g(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=G++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var s,l,c,d=[H,r];if(a){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if(c=t[B]||(t[B]={}),l=c[t.uniqueID]||(c[t.uniqueID]={}),(s=l[i])&&s[0]===H&&s[1]===r)return d[2]=s[2];if(l[i]=d,d[2]=e(t,n,a))return!0}}}function m(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function f(e,n,i){for(var o=0,r=n.length;r>o;o++)t(e,n[o],i);return i}function h(e,t,n,i,o){for(var r,a=[],s=0,l=e.length,c=null!=t;l>s;s++)(r=e[s])&&(!n||n(r,i,o))&&(a.push(r),c&&t.push(s));return a}function v(e,t,n,o,r,a){return o&&!o[B]&&(o=v(o)),r&&!r[B]&&(r=v(r,a)),i(function(i,a,s,l){var c,d,u,p=[],g=[],m=a.length,v=i||f(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?v:h(v,p,e,s,l),b=n?r||(i?e:m||o)?[]:a:y;if(n&&n(y,b,s,l),o)for(c=h(b,g),o(c,[],s,l),d=c.length;d--;)(u=c[d])&&(b[g[d]]=!(y[g[d]]=u));if(i){if(r||e){if(r){for(c=[],d=b.length;d--;)(u=b[d])&&c.push(y[d]=u);r(null,b=[],c,l)}for(d=b.length;d--;)(u=b[d])&&(c=r?ee(i,u):p[d])>-1&&(i[c]=!(a[c]=u))}}else b=h(b===a?b.splice(m,b.length):b),r?r(null,a,b,l):Z.apply(a,b)})}function y(e){for(var t,n,i,o=e.length,r=T.relative[e[0].type],a=r||T.relative[" "],s=r?1:0,l=g(function(e){return e===t},a,!0),c=g(function(e){return ee(t,e)>-1},a,!0),d=[function(e,n,i){var o=!r&&(i||n!==A)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,o}];o>s;s++)if(n=T.relative[e[s].type])d=[g(m(d),n)];else{if(n=T.filter[e[s].type].apply(null,e[s].matches),n[B]){for(i=++s;o>i&&!T.relative[e[i].type];i++);return v(s>1&&m(d),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,i>s&&y(e.slice(s,i)),o>i&&y(e=e.slice(i)),o>i&&p(e))}d.push(n)}return m(d)}function b(e,n){var o=n.length>0,r=e.length>0,a=function(i,a,s,l,c){var d,u,p,g=0,m="0",f=i&&[],v=[],y=A,b=i||r&&T.find.TAG("*",c),w=H+=null==y?1:Math.random()||.1,C=b.length;for(c&&(A=a===$||a||c);m!==C&&null!=(d=b[m]);m++){if(r&&d){for(u=0,a||d.ownerDocument===$||(D(d),s=!P);p=e[u++];)if(p(d,a||$,s)){l.push(d);break}c&&(H=w)}o&&((d=!p&&d)&&g--,i&&f.push(d))}if(g+=m,o&&m!==g){for(u=0;p=n[u++];)p(f,v,a,s);if(i){if(g>0)for(;m--;)f[m]||v[m]||(v[m]=X.call(l));v=h(v)}Z.apply(l,v),c&&!i&&v.length>0&&g+n.length>1&&t.uniqueSort(l)}return c&&(H=w,A=y),f};return o?i(a):a}var w,C,T,S,E,I,x,k,A,M,_,D,$,O,P,N,F,L,R,B="sizzle"+1*new Date,j=e.document,H=0,G=0,U=n(),V=n(),z=n(),q=function(e,t){return e===t&&(_=!0),0},W=1<<31,Y={}.hasOwnProperty,K=[],X=K.pop,J=K.push,Z=K.push,Q=K.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",re=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),ue=new RegExp(re),pe=new RegExp("^"+ie+"$"),ge={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,fe=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Ce=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Te=function(){D()};try{Z.apply(K=Q.call(j.childNodes),j.childNodes),K[j.childNodes.length].nodeType}catch(e){Z={apply:K.length?function(e,t){J.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}C=t.support={},E=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},D=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:j;return i!==$&&9===i.nodeType&&i.documentElement?($=i,O=$.documentElement,P=!E($),(n=$.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Te,!1):n.attachEvent&&n.attachEvent("onunload",Te)),C.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),C.getElementsByTagName=o(function(e){return e.appendChild($.createComment("")),!e.getElementsByTagName("*").length}),C.getElementsByClassName=he.test($.getElementsByClassName),C.getById=o(function(e){return O.appendChild(e).id=B,!$.getElementsByName||!$.getElementsByName(B).length}),C.getById?(T.find.ID=function(e,t){if(void 0!==t.getElementById&&P){var n=t.getElementById(e);return n?[n]:[]}},T.filter.ID=function(e){var t=e.replace(we,Ce);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(we,Ce);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=C.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):C.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},T.find.CLASS=C.getElementsByClassName&&function(e,t){return void 0!==t.getElementsByClassName&&P?t.getElementsByClassName(e):void 0},F=[],N=[],(C.qsa=he.test($.querySelectorAll))&&(o(function(e){O.appendChild(e).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||N.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+B+"-]").length||N.push("~="),e.querySelectorAll(":checked").length||N.push(":checked"),e.querySelectorAll("a#"+B+"+*").length||N.push(".#.+[+~]")}),o(function(e){var t=$.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&N.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(C.matchesSelector=he.test(L=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&o(function(e){C.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),F.push("!=",re)}),N=N.length&&new RegExp(N.join("|")),F=F.length&&new RegExp(F.join("|")),t=he.test(O.compareDocumentPosition),R=t||he.test(O.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=t?function(e,t){if(e===t)return _=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!C.sortDetached&&t.compareDocumentPosition(e)===n?e===$||e.ownerDocument===j&&R(j,e)?-1:t===$||t.ownerDocument===j&&R(j,t)?1:M?ee(M,e)-ee(M,t):0:4&n?-1:1)}:function(e,t){if(e===t)return _=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,s=[e],l=[t];if(!o||!r)return e===$?-1:t===$?1:o?-1:r?1:M?ee(M,e)-ee(M,t):0;if(o===r)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?a(s[i],l[i]):s[i]===j?-1:l[i]===j?1:0},$):$},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==$&&D(e),n=n.replace(de,"='$1']"),C.matchesSelector&&P&&!z[n+" "]&&(!F||!F.test(n))&&(!N||!N.test(n)))try{var i=L.call(e,n);if(i||C.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,$,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==$&&D(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==$&&D(e);var n=T.attrHandle[t.toLowerCase()],i=n&&Y.call(T.attrHandle,t.toLowerCase())?n(e,t,!P):void 0;return void 0!==i?i:C.attributes||!P?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,o=0;if(_=!C.detectDuplicates,M=!C.sortStable&&e.slice(0),e.sort(q),_){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return M=null,e},S=t.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=S(t);return n},T=t.selectors={cacheLength:50,createPseudo:i,match:ge,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Ce),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Ce),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ge.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=I(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Ce).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(o){var r=t.attr(o,e);return null==r?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(ae," ")+" ").indexOf(i)>-1:"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,p,g,m,f=r!==a?"nextSibling":"previousSibling",h=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(h){if(r){for(;f;){for(p=t;p=p[f];)if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;m=f="only"===e&&!m&&"nextSibling"}return!0}if(m=[a?h.firstChild:h.lastChild],a&&y){for(p=h,u=p[B]||(p[B]={}),d=u[p.uniqueID]||(u[p.uniqueID]={}),c=d[e]||[],g=c[0]===H&&c[1],b=g&&c[2],p=g&&h.childNodes[g];p=++g&&p&&p[f]||(b=g=0)||m.pop();)if(1===p.nodeType&&++b&&p===t){d[e]=[H,g,b];break}}else if(y&&(p=t,u=p[B]||(p[B]={}),d=u[p.uniqueID]||(u[p.uniqueID]={}),c=d[e]||[],g=c[0]===H&&c[1],b=g),!1===b)for(;(p=++g&&p&&p[f]||(b=g=0)||m.pop())&&((s?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++b||(y&&(u=p[B]||(p[B]={}),d=u[p.uniqueID]||(u[p.uniqueID]={}),d[e]=[H,b]),p!==t)););return(b-=o)===i||b%i==0&&b/i>=0}}},PSEUDO:function(e,n){var o,r=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[B]?r(n):r.length>1?(o=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,o=r(e,n),a=o.length;a--;)i=ee(e,o[a]),e[i]=!(t[i]=o[a])}):function(e){return r(e,0,o)}):r}},pseudos:{not:i(function(e){var t=[],n=[],o=x(e.replace(se,"$1"));return o[B]?i(function(e,t,n,i){for(var r,a=o(e,null,i,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,i,r){return t[0]=e,o(t,null,r,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(we,Ce),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:i(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Ce).toLowerCase(),function(t){var n;do{if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===$.activeElement&&(!$.hasFocus||$.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return fe.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},T.pseudos.nth=T.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})T.pseudos[w]=l(w);return u.prototype=T.filters=T.pseudos,T.setFilters=new u,I=t.tokenize=function(e,n){var i,o,r,a,s,l,c,d=V[e+" "];if(d)return n?0:d.slice(0);for(s=e,l=[],c=T.preFilter;s;){(!i||(o=le.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),i=!1,(o=ce.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(se," ")}),s=s.slice(i.length));for(a in T.filter)!(o=ge[a].exec(s))||c[a]&&!(o=c[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):V(e,l).slice(0)},x=t.compile=function(e,t){var n,i=[],o=[],r=z[e+" "];if(!r){for(t||(t=I(e)),n=t.length;n--;)r=y(t[n]),r[B]?i.push(r):o.push(r);r=z(e,b(o,i)),r.selector=e}return r},k=t.select=function(e,t,n,i){var o,r,a,s,l,c="function"==typeof e&&e,u=!i&&I(e=c.selector||e);if(n=n||[],1===u.length){if(r=u[0]=u[0].slice(0),r.length>2&&"ID"===(a=r[0]).type&&C.getById&&9===t.nodeType&&P&&T.relative[r[1].type]){if(!(t=(T.find.ID(a.matches[0].replace(we,Ce),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=ge.needsContext.test(e)?0:r.length;o--&&(a=r[o],!T.relative[s=a.type]);)if((l=T.find[s])&&(i=l(a.matches[0].replace(we,Ce),ye.test(r[0].type)&&d(t.parentNode)||t))){if(r.splice(o,1),!(e=i.length&&p(r)))return Z.apply(n,i),n;break}}return(c||x(e,u))(i,t,!P,n,!t||ye.test(e)&&d(t.parentNode)||t),n},C.sortStable=B.split("").sort(q).join("")===B,C.detectDuplicates=!!_,D(),C.sortDetached=o(function(e){return 1&e.compareDocumentPosition($.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),C.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(te,function(e,t,n){var i;return n?void 0:!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);re.find=de,re.expr=de.selectors,re.expr[":"]=re.expr.pseudos,re.uniqueSort=re.unique=de.uniqueSort,re.text=de.getText,re.isXMLDoc=de.isXML,re.contains=de.contains;var ue=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&re(e).is(n))break;i.push(e)}return i},pe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},ge=re.expr.match.needsContext,me=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;re.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?re.find.matchesSelector(i,e)?[i]:[]:re.find.matches(e,re.grep(t,function(e){return 1===e.nodeType}))},re.fn.extend({find:function(e){var t,n=this.length,i=[],o=this;if("string"!=typeof e)return this.pushStack(re(e).filter(function(){for(t=0;n>t;t++)if(re.contains(o[t],this))return!0}));for(t=0;n>t;t++)re.find(e,o[t],i);return i=this.pushStack(n>1?re.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ge.test(e)?re(e):e||[],!1).length}});var he,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(re.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||he,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ve.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof re?t[0]:t,re.merge(this,re.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:K,!0)),me.test(i[1])&&re.isPlainObject(t))for(i in t)re.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return o=K.getElementById(i[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=K,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):re.isFunction(e)?void 0!==n.ready?n.ready(e):e(re):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),re.makeArray(e,this))}).prototype=re.fn,he=re(K);var ye=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};re.fn.extend({has:function(e){var t=re(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(re.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,o=this.length,r=[],a=ge.test(e)||"string"!=typeof e?re(e,t||this.context):0;o>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&re.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?re.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?Q.call(re(e),this[0]):Q.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(re.uniqueSort(re.merge(this.get(),re(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),re.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ue(e,"parentNode")},parentsUntil:function(e,t,n){return ue(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return ue(e,"nextSibling")},prevAll:function(e){return ue(e,"previousSibling")},nextUntil:function(e,t,n){return ue(e,"nextSibling",n)},prevUntil:function(e,t,n){return ue(e,"previousSibling",n)},siblings:function(e){return pe((e.parentNode||{}).firstChild,e)},children:function(e){return pe(e.firstChild)},contents:function(e){return e.contentDocument||re.merge([],e.childNodes)}},function(e,t){re.fn[e]=function(n,i){var o=re.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=re.filter(i,o)),this.length>1&&(be[e]||re.uniqueSort(o),ye.test(e)&&o.reverse()),this.pushStack(o)}});var we=/\S+/g;re.Callbacks=function(e){e="string"==typeof e?r(e):re.extend({},e);var t,n,i,o,a=[],s=[],l=-1,c=function(){for(o=e.once,i=t=!0;s.length;l=-1)for(n=s.shift();++l<a.length;)!1===a[l].apply(n[0],n[1])&&e.stopOnFalse&&(l=a.length,n=!1);e.memory||(n=!1),t=!1,o&&(a=n?[]:"")},d={add:function(){return a&&(n&&!t&&(l=a.length-1,s.push(n)),function t(n){re.each(n,function(n,i){re.isFunction(i)?e.unique&&d.has(i)||a.push(i):i&&i.length&&"string"!==re.type(i)&&t(i)})}(arguments),n&&!t&&c()),this},remove:function(){return re.each(arguments,function(e,t){for(var n;(n=re.inArray(t,a,n))>-1;)a.splice(n,1),l>=n&&l--}),this},has:function(e){return e?re.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return o=s=[],n||(a=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||c()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},re.extend({Deferred:function(e){var t=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return re.Deferred(function(n){re.each(t,function(t,r){var a=re.isFunction(e[t])&&e[t];o[r[1]](function(){var e=a&&a.apply(this,arguments);e&&re.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?re.extend(e,i):i}},o={};return i.pipe=i.then,re.each(t,function(e,r){var a=r[2],s=r[3];i[r[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,r=X.call(arguments),a=r.length,s=1!==a||e&&re.isFunction(e.promise)?a:0,l=1===s?e:re.Deferred(),c=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?X.call(arguments):o,i===t?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>o;o++)r[o]&&re.isFunction(r[o].promise)?r[o].promise().progress(c(o,n,t)).done(c(o,i,r)).fail(l.reject):--s;return s||l.resolveWith(i,r),l.promise()}});var Ce;re.fn.ready=function(e){return re.ready.promise().done(e),this},re.extend({isReady:!1,readyWait:1,holdReady:function(e){e?re.readyWait++:re.ready(!0)},ready:function(e){(!0===e?--re.readyWait:re.isReady)||(re.isReady=!0,!0!==e&&--re.readyWait>0||(Ce.resolveWith(K,[re]),re.fn.triggerHandler&&(re(K).triggerHandler("ready"),re(K).off("ready"))))}}),re.ready.promise=function(t){return Ce||(Ce=re.Deferred(),"complete"===K.readyState||"loading"!==K.readyState&&!K.documentElement.doScroll?e.setTimeout(re.ready):(K.addEventListener("DOMContentLoaded",a),e.addEventListener("load",a))),Ce.promise(t)},re.ready.promise();var Te=function(e,t,n,i,o,r,a){var s=0,l=e.length,c=null==n;if("object"===re.type(n)){o=!0;for(s in n)Te(e,t,s,n[s],!0,r,a)}else if(void 0!==i&&(o=!0,re.isFunction(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(re(e),n)})),t))for(;l>s;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return o?e:c?t.call(e):l?t(e[0],n):r},Se=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};s.uid=1,s.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Se(e))return{};var t=e[this.expando];return t||(t={},Se(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[t]=n;else for(i in t)o[i]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,re.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,o,r=e[this.expando];if(void 0!==r){if(void 0===t)this.register(e);else{re.isArray(t)?i=t.concat(t.map(re.camelCase)):(o=re.camelCase(t),t in r?i=[t,o]:(i=o,i=i in r?[i]:i.match(we)||[])),n=i.length;for(;n--;)delete r[i[n]]}(void 0===t||re.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!re.isEmptyObject(t)}};var Ee=new s,Ie=new s,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ke=/[A-Z]/g;re.extend({hasData:function(e){return Ie.hasData(e)||Ee.hasData(e)},data:function(e,t,n){return Ie.access(e,t,n)},removeData:function(e,t){Ie.remove(e,t)},_data:function(e,t,n){return Ee.access(e,t,n)},_removeData:function(e,t){Ee.remove(e,t)}}),re.fn.extend({data:function(e,t){var n,i,o,r=this[0],a=r&&r.attributes;if(void 0===e){if(this.length&&(o=Ie.get(r),1===r.nodeType&&!Ee.get(r,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=re.camelCase(i.slice(5)),l(r,i,o[i])));Ee.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){Ie.set(this,e)}):Te(this,function(t){var n,i;if(r&&void 0===t){if(void 0!==(n=Ie.get(r,e)||Ie.get(r,e.replace(ke,"-$&").toLowerCase())))return n;if(i=re.camelCase(e),void 0!==(n=Ie.get(r,i)))return n;if(void 0!==(n=l(r,i,void 0)))return n}else i=re.camelCase(e),this.each(function(){var n=Ie.get(this,i);Ie.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&Ie.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ie.remove(this,e)})}}),re.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=Ee.get(e,t),n&&(!i||re.isArray(n)?i=Ee.access(e,t,re.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=re.queue(e,t),i=n.length,o=n.shift(),r=re._queueHooks(e,t),a=function(){re.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,a,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Ee.get(e,n)||Ee.access(e,n,{empty:re.Callbacks("once memory").add(function(){Ee.remove(e,[t+"queue",n])})})}}),re.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?re.queue(this[0],e):void 0===t?this:this.each(function(){var n=re.queue(this,e,t);re._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&re.dequeue(this,e)})},dequeue:function(e){return this.each(function(){re.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=re.Deferred(),r=this,a=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Ee.get(r[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(t)}});var Ae=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Me=new RegExp("^(?:([+-])=|)("+Ae+")([a-z%]*)$","i"),_e=["Top","Right","Bottom","Left"],De=function(e,t){return e=t||e,"none"===re.css(e,"display")||!re.contains(e.ownerDocument,e)},$e=/^(?:checkbox|radio)$/i,Oe=/<([\w:-]+)/,Pe=/^$|\/(?:java|ecma)script/i,Ne={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ne.optgroup=Ne.option,Ne.tbody=Ne.tfoot=Ne.colgroup=Ne.caption=Ne.thead,Ne.th=Ne.td;var Fe=/<|&#?\w+;/;!function(){var e=K.createDocumentFragment(),t=e.appendChild(K.createElement("div")),n=K.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Le=/^key/,Re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Be=/^([^.]*)(?:\.(.+)|)/;re.event={global:{},add:function(e,t,n,i,o){var r,a,s,l,c,d,u,p,g,m,f,h=Ee.get(e);if(h)for(n.handler&&(r=n,n=r.handler,o=r.selector),n.guid||(n.guid=re.guid++),(l=h.events)||(l=h.events={}),(a=h.handle)||(a=h.handle=function(t){return void 0!==re&&re.event.triggered!==t.type?re.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(we)||[""],c=t.length;c--;)s=Be.exec(t[c])||[],g=f=s[1],m=(s[2]||"").split(".").sort(),g&&(u=re.event.special[g]||{},g=(o?u.delegateType:u.bindType)||g,u=re.event.special[g]||{},d=re.extend({type:g,origType:f,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&re.expr.match.needsContext.test(o),namespace:m.join(".")},r),(p=l[g])||(p=l[g]=[],p.delegateCount=0,u.setup&&!1!==u.setup.call(e,i,m,a)||e.addEventListener&&e.addEventListener(g,a)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),re.event.global[g]=!0)},remove:function(e,t,n,i,o){var r,a,s,l,c,d,u,p,g,m,f,h=Ee.hasData(e)&&Ee.get(e);if(h&&(l=h.events)){for(t=(t||"").match(we)||[""],c=t.length;c--;)if(s=Be.exec(t[c])||[],g=f=s[1],m=(s[2]||"").split(".").sort(),g){for(u=re.event.special[g]||{},g=(i?u.delegateType:u.bindType)||g,p=l[g]||[],s=s[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=p.length;r--;)d=p[r],!o&&f!==d.origType||n&&n.guid!==d.guid||s&&!s.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(p.splice(r,1),d.selector&&p.delegateCount--,u.remove&&u.remove.call(e,d));a&&!p.length&&(u.teardown&&!1!==u.teardown.call(e,m,h.handle)||re.removeEvent(e,g,h.handle),delete l[g])}else for(g in l)re.event.remove(e,g+t[c],n,i,!0);re.isEmptyObject(l)&&Ee.remove(e,"handle events")}},dispatch:function(e){e=re.event.fix(e);var t,n,i,o,r,a=[],s=X.call(arguments),l=(Ee.get(this,"events")||{})[e.type]||[],c=re.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(a=re.event.handlers.call(this,e,l),t=0;(o=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.rnamespace||e.rnamespace.test(r.namespace))&&(e.handleObj=r,e.data=r.data,void 0!==(i=((re.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,s))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,r,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],n=0;s>n;n++)r=t[n],o=r.selector+" ",void 0===i[o]&&(i[o]=r.needsContext?re(o,this).index(l)>-1:re.find(o,this,null,[l]).length),i[o]&&i.push(r);i.length&&a.push({elem:l,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o,r=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||K,i=n.documentElement,o=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},fix:function(e){if(e[re.expando])return e;var t,n,i,o=e.type,r=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=Re.test(o)?this.mouseHooks:Le.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new re.Event(r),t=i.length;t--;)n=i[t],e[n]=r[n];return e.target||(e.target=K),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,r):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&re.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return re.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},re.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},re.Event=function(e,t){return this instanceof re.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?g:m):this.type=e,t&&re.extend(this,t),this.timeStamp=e&&e.timeStamp||re.now(),void(this[re.expando]=!0)):new re.Event(e,t)},re.Event.prototype={constructor:re.Event,isDefaultPrevented:m,isPropagationStopped:m,isImmediatePropagationStopped:m,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=g,e&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=g,e&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=g,e&&e.stopImmediatePropagation(),this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){re.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return(!o||o!==i&&!re.contains(i,o))&&(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),re.fn.extend({on:function(e,t,n,i){return h(this,e,t,n,i)},one:function(e,t,n,i){return h(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,re(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=m),this.each(function(){re.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,He=/<script|<style|<link/i,Ge=/checked\s*(?:[^=]|=\s*.checked.)/i,Ue=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;re.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var i,o,r,a,s=e.cloneNode(!0),l=re.contains(e.ownerDocument,e);if(!(ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||re.isXMLDoc(e)))for(a=d(s),r=d(e),i=0,o=r.length;o>i;i++)C(r[i],a[i]);if(t)if(n)for(r=r||d(e),a=a||d(s),i=0,o=r.length;o>i;i++)w(r[i],a[i]);else w(e,s);return a=d(s,"script"),a.length>0&&u(a,!l&&d(e,"script")),s},cleanData:function(e){for(var t,n,i,o=re.event.special,r=0;void 0!==(n=e[r]);r++)if(Se(n)){if(t=n[Ee.expando]){if(t.events)for(i in t.events)o[i]?re.event.remove(n,i):re.removeEvent(n,i,t.handle);n[Ee.expando]=void 0}n[Ie.expando]&&(n[Ie.expando]=void 0)}}}),re.fn.extend({domManip:T,detach:function(e){return S(this,e,!0)},remove:function(e){return S(this,e)},text:function(e){return Te(this,function(e){return void 0===e?re.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return T(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){v(this,e).appendChild(e)}})},prepend:function(){return T(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return T(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return T(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(re.cleanData(d(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return re.clone(this,e,t)})},html:function(e){return Te(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!He.test(e)&&!Ne[(Oe.exec(e)||["",""])[1].toLowerCase()]){e=re.htmlPrefilter(e);try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(re.cleanData(d(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return T(this,arguments,function(t){var n=this.parentNode;re.inArray(this,e)<0&&(re.cleanData(d(this)),n&&n.replaceChild(t,this))},e)}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){re.fn[e]=function(e){for(var n,i=[],o=re(e),r=o.length-1,a=0;r>=a;a++)n=a===r?this:this.clone(!0),re(o[a])[t](n),Z.apply(i,n.get());return this.pushStack(i)}});var ze,qe={HTML:"block",BODY:"block"},We=/^margin/,Ye=new RegExp("^("+Ae+")(?!px)[a-z%]+$","i"),Ke=function(t){var n=t.ownerDocument.defaultView;return n.opener||(n=e),n.getComputedStyle(t)},Xe=function(e,t,n,i){var o,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];o=n.apply(e,i||[]);for(r in t)e.style[r]=a[r];return o},Je=K.documentElement;!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Je.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,r="2px"===t.marginLeft,i="4px"===t.width,s.style.marginRight="50%",o="4px"===t.marginRight,Je.removeChild(a)}var n,i,o,r,a=K.createElement("div"),s=K.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),re.extend(ie,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},pixelMarginRight:function(){return null==i&&t(),o},reliableMarginLeft:function(){return null==i&&t(),r},reliableMarginRight:function(){var t,n=s.appendChild(K.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Je.appendChild(a),t=!parseFloat(e.getComputedStyle(n).marginRight),Je.removeChild(a),s.removeChild(n),t}}))}();var Ze=/^(none|table(?!-c[ea]).+)/,Qe={position:"absolute",visibility:"hidden",display:"block"},et={letterSpacing:"0",fontWeight:"400"},tt=["Webkit","O","Moz","ms"],nt=K.createElement("div").style;re.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=x(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,a,s=re.camelCase(t),l=e.style;return t=re.cssProps[s]||(re.cssProps[s]=A(s)||s),a=re.cssHooks[t]||re.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(o=a.get(e,!1,i))?o:l[t]:(r=typeof n,"string"===r&&(o=Me.exec(n))&&o[1]&&(n=c(e,t,o),r="number"),void(null!=n&&n===n&&("number"===r&&(n+=o&&o[3]||(re.cssNumber[s]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l[t]=n))))}},css:function(e,t,n,i){var o,r,a,s=re.camelCase(t);return t=re.cssProps[s]||(re.cssProps[s]=A(s)||s),a=re.cssHooks[t]||re.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=x(e,t,i)),"normal"===o&&t in et&&(o=et[t]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),re.each(["height","width"],function(e,t){re.cssHooks[t]={get:function(e,n,i){return n?Ze.test(re.css(e,"display"))&&0===e.offsetWidth?Xe(e,Qe,function(){return D(e,t,i)}):D(e,t,i):void 0},set:function(e,n,i){var o,r=i&&Ke(e),a=i&&_(e,t,i,"border-box"===re.css(e,"boxSizing",!1,r),r);return a&&(o=Me.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=re.css(e,t)),M(e,n,a)}}}),re.cssHooks.marginLeft=k(ie.reliableMarginLeft,function(e,t){return t?(parseFloat(x(e,"marginLeft"))||e.getBoundingClientRect().left-Xe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),re.cssHooks.marginRight=k(ie.reliableMarginRight,function(e,t){return t?Xe(e,{display:"inline-block"},x,[e,"marginRight"]):void 0}),re.each({margin:"",padding:"",border:"Width"},function(e,t){re.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[e+_e[i]+t]=r[i]||r[i-2]||r[0];return o}},We.test(e)||(re.cssHooks[e+t].set=M)}),re.fn.extend({css:function(e,t){return Te(this,function(e,t,n){var i,o,r={},a=0;if(re.isArray(t)){for(i=Ke(e),o=t.length;o>a;a++)r[t[a]]=re.css(e,t[a],!1,i);return r}return void 0!==n?re.style(e,t,n):re.css(e,t)},e,t,arguments.length>1)},show:function(){return $(this,!0)},hide:function(){return $(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){De(this)?re(this).show():re(this).hide()})}}),re.Tween=O,O.prototype={constructor:O,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||re.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(re.cssNumber[n]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,n=O.propHooks[this.prop];return this.options.duration?this.pos=t=re.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=re.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){re.fx.step[e.prop]?re.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[re.cssProps[e.prop]]&&!re.cssHooks[e.prop]?e.elem[e.prop]=e.now:re.style(e.elem,e.prop,e.now+e.unit)}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},re.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},re.fx=O.prototype.init,re.fx.step={};var it,ot,rt=/^(?:toggle|show|hide)$/,at=/queueHooks$/;re.Animation=re.extend(B,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return c(n.elem,e,Me.exec(t),n),n}]},tweener:function(e,t){re.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var n,i=0,o=e.length;o>i;i++)n=e[i],B.tweeners[n]=B.tweeners[n]||[],B.tweeners[n].unshift(t)},prefilters:[L],prefilter:function(e,t){t?B.prefilters.unshift(e):B.prefilters.push(e)}}),re.speed=function(e,t,n){var i=e&&"object"==typeof e?re.extend({},e):{complete:n||!n&&t||re.isFunction(e)&&e,duration:e,easing:n&&t||t&&!re.isFunction(t)&&t};return i.duration=re.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in re.fx.speeds?re.fx.speeds[i.duration]:re.fx.speeds._default,(null==i.queue||!0===i.queue)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){re.isFunction(i.old)&&i.old.call(this),i.queue&&re.dequeue(this,i.queue)},i},re.fn.extend({fadeTo:function(e,t,n,i){return this.filter(De).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=re.isEmptyObject(e),r=re.speed(t,n,i),a=function(){var t=B(this,re.extend({},e),r);(o||Ee.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=re.timers,a=Ee.get(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&at.test(o)&&i(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));(t||!n)&&re.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Ee.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=re.timers,a=i?i.length:0;for(n.finish=!0,re.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),re.each(["toggle","show","hide"],function(e,t){var n=re.fn[t];re.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(N(t,!0),e,i,o)}}),re.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){re.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),re.timers=[],re.fx.tick=function(){var e,t=0,n=re.timers;for(it=re.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||re.fx.stop(),it=void 0},re.fx.timer=function(e){re.timers.push(e),e()?re.fx.start():re.timers.pop()},re.fx.interval=13,re.fx.start=function(){ot||(ot=e.setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){e.clearInterval(ot),ot=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fn.delay=function(t,n){return t=re.fx?re.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var o=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(o)}})},function(){var e=K.createElement("input"),t=K.createElement("select"),n=t.appendChild(K.createElement("option"));e.type="checkbox",ie.checkOn=""!==e.value,ie.optSelected=n.selected,t.disabled=!0,ie.optDisabled=!n.disabled,e=K.createElement("input"),e.value="t",e.type="radio",ie.radioValue="t"===e.value}();var st,lt=re.expr.attrHandle;re.fn.extend({attr:function(e,t){return Te(this,re.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){re.removeAttr(this,e)})}}),re.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?re.prop(e,t,n):(1===r&&re.isXMLDoc(e)||(t=t.toLowerCase(),o=re.attrHooks[t]||(re.expr.match.bool.test(t)?st:void 0)),void 0!==n?null===n?void re.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:(i=re.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&re.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,o=0,r=t&&t.match(we);if(r&&1===e.nodeType)for(;n=r[o++];)i=re.propFix[n]||n,re.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),st={set:function(e,t,n){return!1===t?re.removeAttr(e,n):e.setAttribute(n,n),n}},re.each(re.expr.match.bool.source.match(/\w+/g),function(e,t){var n=lt[t]||re.find.attr;lt[t]=function(e,t,i){var o,r;return i||(r=lt[t],lt[t]=o,o=null!=n(e,t,i)?t.toLowerCase():null,lt[t]=r),o}});var ct=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;re.fn.extend({prop:function(e,t){return Te(this,re.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[re.propFix[e]||e]})}}),re.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&re.isXMLDoc(e)||(t=re.propFix[t]||t,o=re.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=re.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ie.optSelected||(re.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this});var ut=/[\t\r\n\f]/g;re.fn.extend({addClass:function(e){var t,n,i,o,r,a,s,l=0;if(re.isFunction(e))return this.each(function(t){re(this).addClass(e.call(this,t,j(this)))});if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[l++];)if(o=j(n),i=1===n.nodeType&&(" "+o+" ").replace(ut," ")){for(a=0;r=t[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=re.trim(i),o!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,o,r,a,s,l=0;if(re.isFunction(e))return this.each(function(t){re(this).removeClass(e.call(this,t,j(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[l++];)if(o=j(n),i=1===n.nodeType&&(" "+o+" ").replace(ut," ")){for(a=0;r=t[a++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");s=re.trim(i),o!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):re.isFunction(e)?this.each(function(n){re(this).toggleClass(e.call(this,n,j(this),t),t)}):this.each(function(){var t,i,o,r;if("string"===n)for(i=0,o=re(this),r=e.match(we)||[];t=r[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(void 0===e||"boolean"===n)&&(t=j(this),t&&Ee.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Ee.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+j(n)+" ").replace(ut," ").indexOf(t)>-1)return!0;return!1}});var pt=/\r/g;re.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=re.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,re(this).val()):e,null==o?o="":"number"==typeof o?o+="":re.isArray(o)&&(o=re.map(o,function(e){return null==e?"":e+""})),(t=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=re.valHooks[o.type]||re.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(pt,""):null==n?"":n)):void 0}}),re.extend({valHooks:{option:{get:function(e){return re.trim(e.value)}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,r="select-one"===e.type||0>o,a=r?null:[],s=r?o+1:i.length,l=0>o?s:r?o:0;s>l;l++)if(n=i[l],(n.selected||l===o)&&(ie.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!re.nodeName(n.parentNode,"optgroup"))){if(t=re(n).val(),r)return t;a.push(t)}return a},set:function(e,t){for(var n,i,o=e.options,r=re.makeArray(t),a=o.length;a--;)i=o[a],(i.selected=re.inArray(re.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(e,t){return re.isArray(t)?e.checked=re.inArray(re(e).val(),t)>-1:void 0}},ie.checkOn||(re.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var gt=/^(?:focusinfocus|focusoutblur)$/;re.extend(re.event,{trigger:function(t,n,i,o){var r,a,s,l,c,d,u,p=[i||K],g=ne.call(t,"type")?t.type:t,m=ne.call(t,"namespace")?t.namespace.split("."):[];if(a=s=i=i||K,3!==i.nodeType&&8!==i.nodeType&&!gt.test(g+re.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),c=g.indexOf(":")<0&&"on"+g,t=t[re.expando]?t:new re.Event(g,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:re.makeArray(n,[t]),u=re.event.special[g]||{},o||!u.trigger||!1!==u.trigger.apply(i,n))){if(!o&&!u.noBubble&&!re.isWindow(i)){for(l=u.delegateType||g,gt.test(l+g)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(i.ownerDocument||K)&&p.push(s.defaultView||s.parentWindow||e)}for(r=0;(a=p[r++])&&!t.isPropagationStopped();)t.type=r>1?l:u.bindType||g,d=(Ee.get(a,"events")||{})[t.type]&&Ee.get(a,"handle"),d&&d.apply(a,n),(d=c&&a[c])&&d.apply&&Se(a)&&(t.result=d.apply(a,n),!1===t.result&&t.preventDefault());return t.type=g,o||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(p.pop(),n)||!Se(i)||c&&re.isFunction(i[g])&&!re.isWindow(i)&&(s=i[c],s&&(i[c]=null),re.event.triggered=g,i[g](),re.event.triggered=void 0,s&&(i[c]=s)),t.result}},simulate:function(e,t,n){var i=re.extend(new re.Event,n,{type:e,isSimulated:!0});re.event.trigger(i,null,t),i.isDefaultPrevented()&&n.preventDefault()}}),re.fn.extend({trigger:function(e,t){return this.each(function(){re.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?re.event.trigger(e,t,n,!0):void 0}}),re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){re.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),re.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ie.focusin="onfocusin"in e,ie.focusin||re.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){re.event.simulate(t,e.target,re.event.fix(e))};re.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=Ee.access(i,t);o||i.addEventListener(e,n,!0),Ee.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=Ee.access(i,t)-1;o?Ee.access(i,t,o):(i.removeEventListener(e,n,!0),Ee.remove(i,t))}}});var mt=e.location,ft=re.now(),ht=/\?/;re.parseJSON=function(e){return JSON.parse(e+"")},re.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return(!n||n.getElementsByTagName("parsererror").length)&&re.error("Invalid XML: "+t),n};var vt=/#.*$/,yt=/([?&])_=[^&]*/,bt=/^(.*?):[ \t]*([^\r\n]*)$/gm,wt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ct=/^(?:GET|HEAD)$/,Tt=/^\/\//,St={},Et={},It="*/".concat("*"),xt=K.createElement("a");xt.href=mt.href,re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:wt.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?U(U(e,re.ajaxSettings),t):U(re.ajaxSettings,e)},ajaxPrefilter:H(St),ajaxTransport:H(Et),ajax:function(t,n){function i(t,n,i,s){var c,u,y,b,C,S=n;2!==w&&(w=2,l&&e.clearTimeout(l),o=void 0,a=s||"",T.readyState=t>0?4:0,c=t>=200&&300>t||304===t,i&&(b=V(p,T,i)),b=z(p,b,T,c),c?(p.ifModified&&(C=T.getResponseHeader("Last-Modified"),C&&(re.lastModified[r]=C),(C=T.getResponseHeader("etag"))&&(re.etag[r]=C)),204===t||"HEAD"===p.type?S="nocontent":304===t?S="notmodified":(S=b.state,u=b.data,y=b.error,c=!y)):(y=S,(t||!S)&&(S="error",0>t&&(t=0))),T.status=t,T.statusText=(n||S)+"",c?f.resolveWith(g,[u,S,T]):f.rejectWith(g,[T,S,y]),T.statusCode(v),v=void 0,d&&m.trigger(c?"ajaxSuccess":"ajaxError",[T,p,c?u:y]),h.fireWith(g,[T,S]),d&&(m.trigger("ajaxComplete",[T,p]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var o,r,a,s,l,c,d,u,p=re.ajaxSetup({},n),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?re(g):re.event,f=re.Deferred(),h=re.Callbacks("once memory"),v=p.statusCode||{},y={},b={},w=0,C="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!s)for(s={};t=bt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)v[t]=[v[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||C;return o&&o.abort(t),i(0,t),this}};if(f.promise(T).complete=h.add,T.success=T.done,T.error=T.fail,p.url=((t||p.url||mt.href)+"").replace(vt,"").replace(Tt,mt.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=re.trim(p.dataType||"*").toLowerCase().match(we)||[""],null==p.crossDomain){c=K.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=xt.protocol+"//"+xt.host!=c.protocol+"//"+c.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=re.param(p.data,p.traditional)),G(St,p,n,T),2===w)return T;d=re.event&&p.global,d&&0==re.active++&&re.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ct.test(p.type),r=p.url,p.hasContent||(p.data&&(r=p.url+=(ht.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=yt.test(r)?r.replace(yt,"$1_="+ft++):r+(ht.test(r)?"&":"?")+"_="+ft++)),p.ifModified&&(re.lastModified[r]&&T.setRequestHeader("If-Modified-Since",re.lastModified[r]),re.etag[r]&&T.setRequestHeader("If-None-Match",re.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+It+"; q=0.01":""):p.accepts["*"]);for(u in p.headers)T.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(!1===p.beforeSend.call(g,T,p)||2===w))return T.abort();C="abort";for(u in{success:1,error:1,complete:1})T[u](p[u]);if(o=G(Et,p,n,T)){if(T.readyState=1,d&&m.trigger("ajaxSend",[T,p]),2===w)return T;p.async&&p.timeout>0&&(l=e.setTimeout(function(){T.abort("timeout")},p.timeout));try{w=1,o.send(y,i)}catch(e){if(!(2>w))throw e;i(-1,e)}}else i(-1,"No Transport");return T},getJSON:function(e,t,n){return re.get(e,t,n,"json")},getScript:function(e,t){return re.get(e,void 0,t,"script")}}),re.each(["get","post"],function(e,t){re[t]=function(e,n,i,o){return re.isFunction(n)&&(o=o||i,i=n,n=void 0),re.ajax(re.extend({url:e,type:t,dataType:o,data:n,success:i},re.isPlainObject(e)&&e))}}),re._evalUrl=function(e){return re.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},re.fn.extend({wrapAll:function(e){var t;return re.isFunction(e)?this.each(function(t){re(this).wrapAll(e.call(this,t))}):(this[0]&&(t=re(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return re.isFunction(e)?this.each(function(t){re(this).wrapInner(e.call(this,t))}):this.each(function(){var t=re(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=re.isFunction(e);return this.each(function(n){re(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}}),re.expr.filters.hidden=function(e){return!re.expr.filters.visible(e)},re.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var kt=/%20/g,At=/\[\]$/,Mt=/\r?\n/g,_t=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;re.param=function(e,t){var n,i=[],o=function(e,t){t=re.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(e)||e.jquery&&!re.isPlainObject(e))re.each(e,function(){o(this.name,this.value)});else for(n in e)q(n,e[n],t,o);return i.join("&").replace(kt,"+")},re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=re.prop(this,"elements");return e?re.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!re(this).is(":disabled")&&Dt.test(this.nodeName)&&!_t.test(e)&&(this.checked||!$e.test(e))}).map(function(e,t){var n=re(this).val();return null==n?null:re.isArray(n)?re.map(n,function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}}),re.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var $t={0:200,1223:204},Ot=re.ajaxSettings.xhr();ie.cors=!!Ot&&"withCredentials"in Ot,ie.ajax=Ot=!!Ot,re.ajaxTransport(function(t){var n,i;return ie.cors||Ot&&!t.crossDomain?{send:function(o,r){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(a in o)s.setRequestHeader(a,o[a]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r($t[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}:void 0}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return re.globalEval(e),e}}}),re.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),re.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=re("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),K.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Pt=[],Nt=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Pt.pop()||re.expando+"_"+ft++;return this[e]=!0,e}}),re.ajaxPrefilter("json jsonp",function(t,n,i){var o,r,a,s=!1!==t.jsonp&&(Nt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Nt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=re.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Nt,"$1"+o):!1!==t.jsonp&&(t.url+=(ht.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||re.error(o+" was not called"),a[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){a=arguments},i.always(function(){void 0===r?re(e).removeProp(o):e[o]=r,t[o]&&(t.jsonpCallback=n.jsonpCallback,Pt.push(o)),a&&re.isFunction(r)&&r(a[0]),a=r=void 0}),"script"):void 0}),ie.createHTMLDocument=function(){var e=K.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),re.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||(ie.createHTMLDocument?K.implementation.createHTMLDocument(""):K);var i=me.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=p([e],t,o),o&&o.length&&re(o).remove(),re.merge([],i.childNodes))};var Ft=re.fn.load;re.fn.load=function(e,t,n){if("string"!=typeof e&&Ft)return Ft.apply(this,arguments);var i,o,r,a=this,s=e.indexOf(" ");return s>-1&&(i=re.trim(e.slice(s)),e=e.slice(0,s)),re.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&re.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,a.html(i?re("<div>").append(re.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(a,r||[e.responseText,t,e])})}),this},re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){re.fn[t]=function(e){return this.on(t,e)}}),re.expr.filters.animated=function(e){return re.grep(re.timers,function(t){return e===t.elem}).length},re.offset={setOffset:function(e,t,n){var i,o,r,a,s,l,c,d=re.css(e,"position"),u=re(e),p={};"static"===d&&(e.style.position="relative"),s=u.offset(),r=re.css(e,"top"),l=re.css(e,"left"),c=("absolute"===d||"fixed"===d)&&(r+l).indexOf("auto")>-1,c?(i=u.position(),a=i.top,o=i.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),re.isFunction(t)&&(t=t.call(e,n,re.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+o),"using"in t?t.using.call(e,p):u.css(p)}},re.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){re.offset.setOffset(this,e,t)});var t,n,i=this[0],o={top:0,left:0},r=i&&i.ownerDocument;return r?(t=r.documentElement,re.contains(t,i)?(o=i.getBoundingClientRect(),n=W(r),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===re.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),re.nodeName(e[0],"html")||(i=e.offset()),i.top+=re.css(e[0],"borderTopWidth",!0)-e.scrollTop(),i.left+=re.css(e[0],"borderLeftWidth",!0)-e.scrollLeft()),{top:t.top-i.top-re.css(n,"marginTop",!0),left:t.left-i.left-re.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===re.css(e,"position");)e=e.offsetParent;return e||Je})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;re.fn[e]=function(i){return Te(this,function(e,i,o){var r=W(e);return void 0===o?r?r[t]:e[i]:void(r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):e[i]=o)},e,i,arguments.length)}}),re.each(["top","left"],function(e,t){re.cssHooks[t]=k(ie.pixelPosition,function(e,n){return n?(n=x(e,t),Ye.test(n)?re(e).position()[t]+"px":n):void 0})}),re.each({Height:"height",Width:"width"},function(e,t){re.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){re.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return Te(this,function(t,n,i){var o;return re.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?re.css(t,n,a):re.style(t,n,i,a)},t,r?i:void 0,r,null)}})}),re.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),re.fn.andSelf=re.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return re});var Lt=e.jQuery,Rt=e.$;return re.noConflict=function(t){return e.$===re&&(e.$=Rt),t&&e.jQuery===re&&(e.jQuery=Lt),re},t||(e.jQuery=e.$=re),re}),function(e){function t(t){this.config={},e.extend(this,o),t&&e.extend(this,t);var n={};for(var i in this.output_fields)void 0!==this.output_fields[i]&&(n[i]=e(this.output_fields[i]));this.$output_fields=n}var n=[],i={},o={api_key:"",output_fields:{line_1:"#line_1",line_2:"#line_2",line_3:"#line_3",post_town:"#post_town",postcode:"#postcode",postcode_inward:void 0,postcode_outward:void 0,udprn:void 0,dependant_locality:void 0,double_dependant_locality:void 0,thoroughfare:void 0,dependant_thoroughfare:void 0,building_number:void 0,building_name:void 0,sub_building_name:void 0,po_box:void 0,department_name:void 0,organisation_name:void 0,postcode_type:void 0,su_organisation_indicator:void 0,delivery_point_suffix:void 0},endpoint:"https://api.ideal-postcodes.co.uk/v1",input:void 0,$input:void 0,input_label:"Please enter your postcode",input_muted_style:"color:#CBCBCB;",input_class:"",input_id:"idpc_input",button:void 0,$button:void 0,button_id:"idpc_button",button_label:"Find my Address",button_class:"",button_disabled_message:"Looking up postcode...",$dropdown:void 0,dropdown_id:"idpc_dropdown",dropdown_select_message:"Please select your address",dropdown_class:"",dropdown_container:void 0,$error_message:void 0,error_message_id:"idpc_error_message",error_message_invalid_postcode:"Please check your postcode, it seems to be incorrect",error_message_not_found:"Your postcode could not be found. Please type in your address",error_message_address_not_found:"We could not find a match for your address. Please type in your address",error_message_default:"Sorry, we weren't able to get the address you were looking for. Please type your address manually",error_message_class:"",error_message_container:void 0,address_search:!1,last_lookup:"",disable_interval:1e3,debug_mode:!1,check_key:!1,remove_organisation:!1,address_formatters:{postcode_search:function(e){var t=[e.line_1];return""!==e.line_2&&t.push(e.line_2),t.join(" ")},address_search:function(e){var t=[e.line_1];return""!==e.line_2&&t.push(e.line_2),t.push(e.post_town),t.push(e.postcode_outward),t.join(", ")}},onLoaded:void 0,onFailedCheck:void 0,onSearchCompleted:void 0,onAddressesRetrieved:void 0,onAddressSelected:void 0,onDropdownCreated:void 0,onLookupTriggered:void 0,onSearchError:void 0,tags:void 0};t.prototype.setupPostcodeInput=function(e){this.$context=e,this.setupInputField(),this.setupLookupButton()},t.prototype.setupInputField=function(){var t=this;return e(this.input).length?this.$input=e(this.input).first():this.$input=e("<input />",{type:"text",id:this.input_id,value:this.input_label}).appendTo(this.$context).addClass(this.input_class).val(this.input_label).attr("style",this.input_muted_style).submit(function(){return!1}).keypress(function(e){13===e.which&&t.$button.trigger("click")}).focus(function(){t.$input.removeAttr("style").val("")}).blur(function(){t.$input.val()||(t.$input.val(t.input_label),t.$input.attr("style",t.input_muted_style))}),this.$input},t.prototype.setupLookupButton=function(){var t=this;return e(t.button).length?t.$button=e(t.button).first():t.$button=e("<button />",{html:t.button_label,id:t.button_id,type:"button"}).appendTo(t.$context).addClass(t.button_class).attr("onclick","return false;").submit(function(){return!1}),t.$button.click(function(){var e=t.$input.val();return t.onLookupTriggered&&t.onLookupTriggered.call(t),t.last_lookup!==e&&(t.last_lookup=e,t.clearAll(),t.disableLookup(),t.executeSearch(e)),!1}),t.$button},t.prototype.disableLookup=function(e){this.button||(e=e||this.button_disabled_message,this.$button.prop("disabled",!0).html(e))},t.prototype.enableLookup=function(){if(!this.button){var e=this;0===e.disable_interval?e.$button.prop("disabled",!1).html(e.button_label):setTimeout(function(){e.$button.prop("disabled",!1).html(e.button_label)},e.disable_interval)}},t.prototype.clearAll=function(){this.setDropDown(),this.setErrorMessage()},t.prototype.removeAll=function(){this.$context=null,e.each([this.$input,this.$button,this.$dropdown,this.$error_message],function(e,t){t&&t.remove()})},t.prototype.executeSearch=function(e){var t,n=this,i=function(i,o,r){n.enableLookup(),n.cacheSearchResults(r),i?(t=n.debug_mode?i.message:n.error_message_default,n.setErrorMessage(t),n.onSearchError&&n.onSearchError.call(n,i)):o.length>0?(n.last_lookup=e,n.onAddressesRetrieved&&n.onAddressesRetrieved.call(n,o),n.setDropDown(o)):(t=n.address_search?n.error_message_address_not_found:n.error_message_not_found,n.setErrorMessage(t)),n.onSearchCompleted&&n.onSearchCompleted.call(n,r)};return n.address_search?n.executeAddressSearch(e,i):n.executePostcodeSearch(e,i)},t.prototype.executePostcodeSearch=function(t,n){var i=this,o={query:t,api_key:i.api_key};i.tags&&(o.tags=i.tags),e.idealPostcodes.lookupPostcode(o,n)},t.prototype.executeAddressSearch=function(t,n){var i=this,o={query:t,api_key:i.api_key};"object"==typeof i.address_search&&(o.limit=i.address_search.limit||10),i.tags&&(o.tags=i.tags),e.idealPostcodes.lookupAddress(o,n)},t.prototype.cacheSearchResults=function(e){return this.response_code=e.code,this.response_message=e.message,this.result=e.result,e},t.prototype.setDropDown=function(t){var n=this,i=n.address_formatters.postcode_search;if(n.address_search&&(i=n.address_formatters.address_search),this.$dropdown&&this.$dropdown.length&&(this.$dropdown.remove(),delete this.$dropdown),t){var o=e("<select />",{id:n.dropdown_id}).addClass(n.dropdown_class);e("<option />",{value:"ideal",text:n.dropdown_select_message}).appendTo(o);for(var a=t.length,s=0;a>s;s+=1)e("<option />",{value:s,text:i(t[s])}).appendTo(o);var l;return l=e(this.dropdown_container).length?e(this.dropdown_container).first():this.$context,o.appendTo(l).change(function(){var i,o=e(this).val();o>=0&&(i=n.remove_organisation?r(t[o]):t[o],n.setAddressFields(i),n.onAddressSelected&&n.onAddressSelected.call(n,i))}),n.onDropdownCreated&&n.onDropdownCreated.call(n,o),n.$dropdown=o,o}},t.prototype.setErrorMessage=function(t){if(this.$error_message&&this.$error_message.length&&(this.$error_message.remove(),delete this.$error_message),t){var n;return n=e(this.error_message_container).length?e(this.error_message_container).first():this.$context,this.$error_message=e("<p />",{html:t,id:this.error_message_id}).addClass(this.error_message_class).appendTo(n),this.$error_message}},t.prototype.setAddressFields=function(e){e=e||{};for(var t in this.$output_fields)this.$output_fields[t].val(e[t]||"")};var r=function(e){return 0!==e.organisation_name.length&&e.line_1===e.organisation_name&&(e.line_1=e.line_2,e.line_2=e.line_3,e.line_3=""),e},a=function(e){return e.code+" - "+e.message};e.idealPostcodes={defaults:function(){return o},keyCheckCache:i,lookupPostcode:function(t,n){var i=t.query||t.postcode||"",r=t.api_key||"",s=o.endpoint,l="postcodes",c=[s,l,encodeURI(i)].join("/"),d={api_key:r};t.tags&&e.isArray(t.tags)&&(d.tags=t.tags.join(","));var u={url:c,data:d,dataType:"jsonp",timeout:5e3,success:function(e,t,i){return 2e3===e.code?n(null,e.result,e,i):4040===e.code?n(null,[],e,i):n(new Error(a(e)),[],e,i)}};e.ajax(u)},lookupAddress:function(t,n){var i=t.query||"",r=t.api_key||"",s=o.endpoint,l="addresses",c=[s,l].join("/"),d={api_key:r,query:i};d.limit=t.limit||10,t.tags&&e.isArray(t.tags)&&(d.tags=t.tags.join(","));var u={url:c,data:d,dataType:"jsonp",timeout:5e3,success:function(e,t,i){return 2e3===e.code?n(null,e.result.hits,e,i):n(new Error(a(e)),[],e,i)}};e.ajax(u)},checkKey:function(t,n,r){var a=t.api_key||"";r=r||function(){};var s=i[a];if("boolean"==typeof s)return s?n():r();if("object"==typeof s)return i[a].success.push(n),void i[a].error.push(r);i[a]={success:[n],error:[r]};var l=o.endpoint,c="keys",d=[l,c,a].join("/"),u={url:d,dataType:"jsonp",timeout:5e3};u.success=function(t){if(t&&t.result&&t.result.available){var n=i[a].success;i[a]=!0,e.each(n,function(e,n){n.call(null,t)})}else{var o=i[a].error;i[a]=!1,e.each(o,function(e,t){t.call()})}},u.error=function(){var t=i[a].error;delete i[a],e.each(t,function(e,t){t.call()})},e.ajax(u)},clearAll:function(){for(var e=n.length,t=0;e>t;t+=1)n[t].removeAll()}},e.fn.setupPostcodeLookup=function(i){var o=this;if(0===o.length)return o;var r=function(){e.each(o,function(o,r){var a=new t(i);n.push(a),a.setupPostcodeInput(e(r))}),e.isFunction(i.onLoaded)&&i.onLoaded.call(o)},a=function(){e.isFunction(i.onFailedCheck)&&i.onFailedCheck.call(o)};return i.check_key?e.idealPostcodes.checkKey({api_key:i.api_key},r,a):r(),o}}(jQuery),window.googleLT_||(window.googleLT_=(new Date).getTime()),window.google||(window.google={}),window.google.loader||(window.google.loader={},google.loader.ServiceBase="https://www.google.com/uds",google.loader.GoogleApisBase="https://ajax.googleapis.com/ajax",google.loader.ApiKey="notsupplied",google.loader.KeyVerified=!0,google.loader.LoadFailure=!1,google.loader.Secure=!0,google.loader.GoogleLocale="www.google.com",google.loader.ClientLocation={latitude:52.517,longitude:-1.983,address:{city:"West Bromwich",region:"Staffordshire",country:"United Kingdom",country_code:"GB"}},google.loader.AdditionalParams="",function(){function e(e){return e in m?m[e]:m[e]=-1!=navigator.userAgent.toLowerCase().indexOf(e)}function t(e,t){var n=function(){};n.prototype=t.prototype,e.ca=t.prototype,e.prototype=new n}function n(e,t,n){var i=Array.prototype.slice.call(arguments,2)||[];return function(){return e.apply(t,i.concat(Array.prototype.slice.call(arguments)))}}function i(e){return e=Error(e),e.toString=function(){return this.message},e}function o(e,t){for(var n=e.split(/\./),i=window,o=0;o<n.length-1;o++)i[n[o]]||(i[n[o]]={}),i=i[n[o]];i[n[n.length-1]]=t}function r(e,t,n){e[t]=n}function a(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e["on"+t];e["on"+t]=null!=i?s([n,i]):n}}function s(e){return function(){for(var t=0;t<e.length;t++)e[t]()}}function l(){w[document.readyState]?c():0<b.length&&window.setTimeout(l,10)}function c(){for(var e=0;e<b.length;e++)b[e]();b.length=0}function d(e){this.b=e,this.B=[],this.A={},this.l={},this.g={},this.s=!0,this.c=-1}function u(e){this.T=e,this.v={},this.C=0}function p(e,t,i){this.name=e,this.S=t,this.w=i,this.G=this.j=!1,this.m=[],google.loader.F[this.name]=n(this.o,this)}function g(e,t){this.b=e,this.h=t,this.j=!1}var m={};if(!f)var f=o;if(!h)var h=r;google.loader.F={},f("google.loader.callbacks",google.loader.F);var v={},y={};google.loader.eval={},f("google.loader.eval",google.loader.eval),google.load=function(e,t,n){function o(e){var t=e.split(".");if(2<t.length)throw i("Module: '"+e+"' not found!");void 0!==t[1]&&(r=t[0],n.packages=n.packages||[],n.packages.push(t[1]))}var r=e;if(n=n||{},e instanceof Array||e&&"object"==typeof e&&"function"==typeof e.join&&"function"==typeof e.reverse)for(var a=0;a<e.length;a++)o(e[a]);else o(e);if(!(e=v[":"+r]))throw i("Module: '"+r+"' not found!");if(n&&!n.language&&n.locale&&(n.language=n.locale),n&&"string"==typeof n.callback&&(a=n.callback,a.match(/^[[\]A-Za-z0-9._]+$/)&&(a=window.eval(a),n.callback=a)),(a=n&&null!=n.callback)&&!e.D(t))throw i("Module: '"+r+"' must be loaded before DOM onLoad!");a?e.u(t,n)?window.setTimeout(n.callback,0):e.load(t,n):e.u(t,n)||e.load(t,n)},f("google.load",google.load),google.ba=function(t,n){n?(0==b.length&&(a(window,"load",c),!e("msie")&&!e("safari")&&!e("konqueror")&&e("mozilla")||window.opera?window.addEventListener("DOMContentLoaded",c,!1):e("msie")?document.write("<script defer onreadystatechange='google.loader.domReady()' src=//:><\/script>"):(e("safari")||e("konqueror"))&&window.setTimeout(l,10)),b.push(t)):a(window,"load",t)},f("google.setOnLoadCallback",google.ba);var b=[];google.loader.W=function(){var e=window.event.srcElement;"complete"==e.readyState&&(e.onreadystatechange=null,e.parentNode.removeChild(e),c())},f("google.loader.domReady",google.loader.W);var w={loaded:!0,complete:!0};google.loader.f=function(e,t,n){if(n){var i;"script"==e?(i=document.createElement("script"),i.type="text/javascript",i.src=t):"css"==e&&(i=document.createElement("link"),i.type="text/css",i.href=t,i.rel="stylesheet"),(e=document.getElementsByTagName("head")[0])||(e=document.body.parentNode.appendChild(document.createElement("head"))),e.appendChild(i)}else"script"==e?document.write('<script src="'+t+'" type="text/javascript"><\/script>'):"css"==e&&document.write('<link href="'+t+'" type="text/css" rel="stylesheet"></link>')},f("google.loader.writeLoadTag",google.loader.f),google.loader.Z=function(e){y=e},f("google.loader.rfm",google.loader.Z),google.loader.aa=function(e){for(var t in e)"string"==typeof t&&t&&":"==t.charAt(0)&&!v[t]&&(v[t]=new g(t.substring(1),e[t]))},f("google.loader.rpl",google.loader.aa),google.loader.$=function(e){if((e=e.specs)&&e.length)for(var t=0;t<e.length;++t){var n=e[t];"string"==typeof n?v[":"+n]=new d(n):(n=new p(n.name,n.baseSpec,n.customSpecs),v[":"+n.name]=n)}},f("google.loader.rm",google.loader.$),google.loader.loaded=function(e){v[":"+e.module].o(e)},f("google.loader.loaded",google.loader.loaded),google.loader.V=function(){return"qid="+((new Date).getTime().toString(16)+Math.floor(1e7*Math.random()).toString(16))},f("google.loader.createGuidArg_",google.loader.V),o("google_exportSymbol",o),o("google_exportProperty",r),google.loader.a={},f("google.loader.themes",google.loader.a),google.loader.a.K="//www.google.com/cse/style/look/bubblegum.css",h(google.loader.a,"BUBBLEGUM",google.loader.a.K),google.loader.a.M="//www.google.com/cse/style/look/greensky.css",h(google.loader.a,"GREENSKY",google.loader.a.M),google.loader.a.L="//www.google.com/cse/style/look/espresso.css",h(google.loader.a,"ESPRESSO",google.loader.a.L),google.loader.a.O="//www.google.com/cse/style/look/shiny.css",h(google.loader.a,"SHINY",google.loader.a.O),google.loader.a.N="//www.google.com/cse/style/look/minimalist.css",h(google.loader.a,"MINIMALIST",google.loader.a.N),google.loader.a.P="//www.google.com/cse/style/look/v2/default.css",h(google.loader.a,"V2_DEFAULT",google.loader.a.P),d.prototype.i=function(e,t){var n="";if(void 0!=t&&(void 0!=t.language&&(n+="&hl="+encodeURIComponent(t.language)),void 0!=t.nocss&&(n+="&output="+encodeURIComponent("nocss="+t.nocss)),void 0!=t.nooldnames&&(n+="&nooldnames="+encodeURIComponent(t.nooldnames)),void 0!=t.packages&&(n+="&packages="+encodeURIComponent(t.packages)),null!=t.callback&&(n+="&async=2"),void 0!=t.style&&(n+="&style="+encodeURIComponent(t.style)),void 0!=t.noexp&&(n+="&noexp=true"),void 0!=t.other_params&&(n+="&"+t.other_params)),!this.s){google[this.b]&&google[this.b].JSHash&&(n+="&sig="+encodeURIComponent(google[this.b].JSHash));var i,o=[];for(i in this.A)":"==i.charAt(0)&&o.push(i.substring(1));for(i in this.l)":"==i.charAt(0)&&this.l[i]&&o.push(i.substring(1));n+="&have="+encodeURIComponent(o.join(","))}return google.loader.ServiceBase+"/?file="+this.b+"&v="+e+google.loader.AdditionalParams+n},d.prototype.H=function(e){var t=null;e&&(t=e.packages);var n=null;if(t)if("string"==typeof t)n=[e.packages];else if(t.length)for(n=[],e=0;e<t.length;e++)"string"==typeof t[e]&&n.push(t[e].replace(/^\s*|\s*$/,"").toLowerCase());for(n||(n=["default"]),t=[],e=0;e<n.length;e++)this.A[":"+n[e]]||t.push(n[e]);return t},d.prototype.load=function(e,t){var n=this.H(t),i=t&&null!=t.callback;if(i)var o=new u(t.callback);for(var r=[],a=n.length-1;0<=a;a--){var s=n[a];i&&o.R(s),this.l[":"+s]?(n.splice(a,1),i&&this.g[":"+s].push(o)):r.push(s)}if(n.length){for(t&&t.packages&&(t.packages=n.sort().join(",")),a=0;a<r.length;a++)s=r[a],this.g[":"+s]=[],i&&this.g[":"+s].push(o);if(t||null==y[":"+this.b]||null==y[":"+this.b].versions[":"+e]||google.loader.AdditionalParams||!this.s)t&&t.autoloaded||google.loader.f("script",this.i(e,t),i);else{n=y[":"+this.b],google[this.b]=google[this.b]||{};for(var l in n.properties)l&&":"==l.charAt(0)&&(google[this.b][l.substring(1)]=n.properties[l]);google.loader.f("script",google.loader.ServiceBase+n.path+n.js,i),n.css&&google.loader.f("css",google.loader.ServiceBase+n.path+n.css,i)}for(this.s&&(this.s=!1,this.c=(new Date).getTime(),1!=this.c%100&&(this.c=-1)),a=0;a<r.length;a++)s=r[a],this.l[":"+s]=!0}},d.prototype.o=function(e){-1!=this.c&&(k("al_"+this.b,"jl."+((new Date).getTime()-this.c),!0),this.c=-1),this.B=this.B.concat(e.components),google.loader[this.b]||(google.loader[this.b]={}),google.loader[this.b].packages=this.B.slice(0);for(var t=0;t<e.components.length;t++){this.A[":"+e.components[t]]=!0,this.l[":"+e.components[t]]=!1;var n=this.g[":"+e.components[t]];if(n){for(var i=0;i<n.length;i++)n[i].U(e.components[t]);delete this.g[":"+e.components[t]]}}},d.prototype.u=function(e,t){return 0==this.H(t).length},d.prototype.D=function(){return!0},u.prototype.R=function(e){this.C++,this.v[":"+e]=!0},u.prototype.U=function(e){this.v[":"+e]&&(this.v[":"+e]=!1,0==--this.C&&window.setTimeout(this.T,0))},t(p,d),p.prototype.load=function(e,t){var n=t&&null!=t.callback;n?(this.m.push(t.callback),t.callback="google.loader.callbacks."+this.name):this.j=!0,t&&t.autoloaded||google.loader.f("script",this.i(e,t),n)},p.prototype.u=function(e,t){return t&&null!=t.callback?this.G:this.j},p.prototype.o=function(){this.G=!0;for(var e=0;e<this.m.length;e++)window.setTimeout(this.m[e],0);this.m=[]};var C=function(e,t){return e.string?encodeURIComponent(e.string)+"="+encodeURIComponent(t):e.regex?t.replace(/(^.*$)/,e.regex):""};p.prototype.i=function(e,t){return this.X(this.I(e),e,t)},p.prototype.X=function(e,t,n){var i="";if(e.key&&(i+="&"+C(e.key,google.loader.ApiKey)),e.version&&(i+="&"+C(e.version,t)),t=google.loader.Secure&&e.ssl?e.ssl:e.uri,null!=n)for(var o in n)e.params[o]?i+="&"+C(e.params[o],n[o]):"other_params"==o?i+="&"+n[o]:"base_domain"==o&&(t="http://"+n[o]+e.uri.substring(e.uri.indexOf("/",7)));return google[this.name]={},-1==t.indexOf("?")&&i&&(i="?"+i.substring(1)),t+i},p.prototype.D=function(e){return this.I(e).deferred},p.prototype.I=function(e){if(this.w)for(var t=0;t<this.w.length;++t){var n=this.w[t];if(new RegExp(n.pattern).test(e))return n}return this.S},t(g,d),g.prototype.load=function(e,t){this.j=!0,google.loader.f("script",this.i(e,t),!1)},g.prototype.u=function(){return this.j},g.prototype.o=function(){},g.prototype.i=function(e,t){if(!this.h.versions[":"+e]){if(this.h.aliases){var n=this.h.aliases[":"+e];n&&(e=n)}if(!this.h.versions[":"+e])throw i("Module: '"+this.b+"' with version '"+e+"' not found!")}return google.loader.GoogleApisBase+"/libs/"+this.b+"/"+e+"/"+this.h.versions[":"+e][t&&t.uncompressed?"uncompressed":"compressed"]},g.prototype.D=function(){return!1};var T=!1,S=[],E=(new Date).getTime(),I=function(){T||(a(window,"unload",A),T=!0)},x=function(e,t){if(I(),!(google.loader.Secure||google.loader.Options&&!1!==google.loader.Options.csi)){for(var i=0;i<e.length;i++)e[i]=encodeURIComponent(e[i].toLowerCase().replace(/[^a-z0-9_.]+/g,"_"));for(i=0;i<t.length;i++)t[i]=encodeURIComponent(t[i].toLowerCase().replace(/[^a-z0-9_.]+/g,"_"));window.setTimeout(n(M,null,"//gg.google.com/csi?s=uds&v=2&action="+e.join(",")+"&it="+t.join(",")),1e4)}},k=function(e,t,n){n?x([e],[t]):(I(),S.push("r"+S.length+"="+encodeURIComponent(e+(t?"|"+t:""))),window.setTimeout(A,5<S.length?0:15e3))},A=function(){if(S.length){var e=google.loader.ServiceBase;0==e.indexOf("http:")&&(e=e.replace(/^http:/,"https:")),M(e+"/stats?"+S.join("&")+"&nc="+(new Date).getTime()+"_"+((new Date).getTime()-E)),S.length=0}},M=function(e){var t=new Image,n=M.Y++;M.J[n]=t,t.onload=t.onerror=function(){delete M.J[n]},t.src=e,t=null};M.J={},M.Y=0,o("google.loader.recordCsiStat",x),o("google.loader.recordStat",k),o("google.loader.createImageForLogging",M)}(),google.loader.rm({specs:["visualization","payments",{name:"annotations",baseSpec:{uri:"http://www.google.com/reviews/scripts/annotations_bootstrap.js",ssl:null,key:{string:"key"},version:{string:"v"},deferred:!0,params:{country:{string:"gl"},callback:{string:"callback"},language:{string:"hl"}}}},"language","gdata","wave","spreadsheets","search","orkut","feeds","annotations_v2","picker","identitytoolkit",{name:"maps",baseSpec:{uri:"http://maps.google.com/maps?file=googleapi",ssl:"https://maps-api-ssl.google.com/maps?file=googleapi",key:{string:"key"},version:{string:"v"},deferred:!0,params:{callback:{regex:"callback=$1&async=2"},language:{string:"hl"}}},customSpecs:[{uri:"http://maps.googleapis.com/maps/api/js",ssl:"https://maps.googleapis.com/maps/api/js",version:{string:"v"},deferred:!0,params:{callback:{string:"callback"},language:{string:"hl"}},pattern:"^(3|3..*)$"}]},{name:"friendconnect",baseSpec:{uri:"http://www.google.com/friendconnect/script/friendconnect.js",ssl:"https://www.google.com/friendconnect/script/friendconnect.js",key:{string:"key"},version:{string:"v"},deferred:!1,params:{}}},{name:"sharing",baseSpec:{uri:"http://www.google.com/s2/sharing/js",ssl:null,key:{string:"key"},version:{string:"v"},deferred:!1,params:{language:{string:"hl"}}}},"ads",{name:"books",baseSpec:{uri:"http://books.google.com/books/api.js",ssl:"https://encrypted.google.com/books/api.js",key:{string:"key"},version:{string:"v"},deferred:!0,params:{callback:{string:"callback"},language:{string:"hl"}}}},"elements","earth","ima"]}),google.loader.rfm({":search":{versions:{":1":"1",":1.0":"1"},path:"/api/search/1.0/b16e3ffbc96e4526fdc0cc8394bf713a/",js:"default+en.I.js",css:"default+en.css",properties:{":Version":"1.0",":NoOldNames":!1,":JSHash":"b16e3ffbc96e4526fdc0cc8394bf713a"}},":language":{versions:{":1":"1",":1.0":"1"},path:"/api/language/1.0/b448b2b5ebc88370493ecbd1036fe53a/",js:"default+en.I.js",properties:{":Version":"1.0",":JSHash":"b448b2b5ebc88370493ecbd1036fe53a"}},":annotations":{versions:{":1":"1",":1.0":"1"},path:"/api/annotations/1.0/3b0f18d6e7bf8cf053640179ef6d98d1/",js:"default+en.I.js",properties:{":Version":"1.0",":JSHash":"3b0f18d6e7bf8cf053640179ef6d98d1"}},":wave":{versions:{":1":"1",":1.0":"1"},path:"/api/wave/1.0/3b6f7573ff78da6602dda5e09c9025bf/",js:"default.I.js",properties:{":Version":"1.0",":JSHash":"3b6f7573ff78da6602dda5e09c9025bf"}},":earth":{versions:{":1":"1",":1.0":"1"},path:"/api/earth/1.0/db22e5693e0a8de1f62f3536f5a8d7d3/",js:"default.I.js",properties:{":Version":"1.0",":JSHash":"db22e5693e0a8de1f62f3536f5a8d7d3"}},":feeds":{versions:{":1":"1",":1.0":"1"},path:"/api/feeds/1.0/482f2817cdf8982edf2e5669f9e3a627/",js:"default+en.I.js",css:"default+en.css",properties:{":Version":"1.0",":JSHash":"482f2817cdf8982edf2e5669f9e3a627"}},":picker":{versions:{":1":"1",":1.0":"1"},path:"/api/picker/1.0/1c635e91b9d0c082c660a42091913907/",js:"default.I.js",css:"default.css",properties:{":Version":"1.0",":JSHash":"1c635e91b9d0c082c660a42091913907"}},":ima":{versions:{":3":"1",":3.0":"1"},path:"/api/ima/3.0/28a914332232c9a8ac0ae8da68b1006e/",js:"default.I.js",properties:{":Version":"3.0",":JSHash":"28a914332232c9a8ac0ae8da68b1006e"}}}),google.loader.rpl({":swfobject":{versions:{":2.1":{uncompressed:"swfobject_src.js",compressed:"swfobject.js"},":2.2":{uncompressed:"swfobject_src.js",compressed:"swfobject.js"}},aliases:{":2":"2.2"}},":chrome-frame":{versions:{":1.0.0":{uncompressed:"CFInstall.js",compressed:"CFInstall.min.js"},":1.0.1":{uncompressed:"CFInstall.js",compressed:"CFInstall.min.js"},":1.0.2":{uncompressed:"CFInstall.js",compressed:"CFInstall.min.js"}},aliases:{":1":"1.0.2",":1.0":"1.0.2"}},":ext-core":{versions:{":3.1.0":{uncompressed:"ext-core-debug.js",compressed:"ext-core.js"},":3.0.0":{uncompressed:"ext-core-debug.js",compressed:"ext-core.js"}},aliases:{":3":"3.1.0",":3.0":"3.0.0",":3.1":"3.1.0"}},":webfont":{versions:{":1.0.12":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.13":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.14":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.15":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.10":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.11":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.27":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.28":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.29":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.23":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.24":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.25":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.26":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.21":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.22":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.3":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.4":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.5":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.6":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.9":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.16":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.17":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.0":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.18":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.1":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.19":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.2":{uncompressed:"webfont_debug.js",compressed:"webfont.js"}},aliases:{":1":"1.0.29",":1.0":"1.0.29"}},":scriptaculous":{versions:{":1.8.3":{uncompressed:"scriptaculous.js",compressed:"scriptaculous.js"},":1.9.0":{uncompressed:"scriptaculous.js",compressed:"scriptaculous.js"},":1.8.1":{uncompressed:"scriptaculous.js",compressed:"scriptaculous.js"},":1.8.2":{uncompressed:"scriptaculous.js",compressed:"scriptaculous.js"}},aliases:{":1":"1.9.0",":1.8":"1.8.3",":1.9":"1.9.0"}},":mootools":{versions:{":1.3.0":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.2.1":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.1.2":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.4.0":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.3.1":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.2.2":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.4.1":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.3.2":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.2.3":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.4.2":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.2.4":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.2.5":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.1.1":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"}},aliases:{":1":"1.1.2",":1.1":"1.1.2",":1.2":"1.2.5",":1.3":"1.3.2",":1.4":"1.4.2",":1.11":"1.1.1"}},":jqueryui":{versions:{":1.8.17":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.16":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.15":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.14":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.4":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.13":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.5":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.12":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.6":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.11":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.7":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.10":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.8":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.9":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.6.0":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.7.0":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.5.2":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.0":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.7.1":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.5.3":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.1":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.7.2":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.2":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.7.3":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"}},aliases:{":1":"1.8.17",":1.8.3":"1.8.4",":1.5":"1.5.3",":1.6":"1.6.0",":1.7":"1.7.3",":1.8":"1.8.17"}},":yui":{versions:{":2.8.0r4":{uncompressed:"build/yuiloader/yuiloader.js",compressed:"build/yuiloader/yuiloader-min.js"},":2.9.0":{uncompressed:"build/yuiloader/yuiloader.js",compressed:"build/yuiloader/yuiloader-min.js"},":2.8.1":{uncompressed:"build/yuiloader/yuiloader.js",compressed:"build/yuiloader/yuiloader-min.js"},":2.6.0":{uncompressed:"build/yuiloader/yuiloader.js",compressed:"build/yuiloader/yuiloader-min.js"},":2.7.0":{uncompressed:"build/yuiloader/yuiloader.js",compressed:"build/yuiloader/yuiloader-min.js"},":3.3.0":{uncompressed:"build/yui/yui.js",compressed:"build/yui/yui-min.js"},":2.8.2r1":{uncompressed:"build/yuiloader/yuiloader.js",compressed:"build/yuiloader/yuiloader-min.js"}},aliases:{":2":"2.9.0",":3":"3.3.0",":2.8.2":"2.8.2r1",":2.8.0":"2.8.0r4",":3.3":"3.3.0",":2.6":"2.6.0",":2.7":"2.7.0",":2.8":"2.8.2r1",":2.9":"2.9.0"}},":prototype":{versions:{":1.6.1.0":{uncompressed:"prototype.js",compressed:"prototype.js"},":1.6.0.2":{uncompressed:"prototype.js",compressed:"prototype.js"},":1.7.0.0":{uncompressed:"prototype.js",compressed:"prototype.js"},":1.6.0.3":{uncompressed:"prototype.js",compressed:"prototype.js"}},aliases:{":1":"1.7.0.0",":1.6.0":"1.6.0.3",":1.6.1":"1.6.1.0",":1.7.0":"1.7.0.0",":1.6":"1.6.1.0",":1.7":"1.7.0.0"}},":jquery":{versions:{":1.3.0":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.4.0":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.3.1":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.5.0":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.4.1":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.3.2":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.2.3":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.6.0":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.5.1":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.4.2":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.7.0":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.6.1":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.5.2":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.4.3":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.7.1":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.6.2":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.4.4":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.2.6":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.6.3":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.6.4":{uncompressed:"jquery.js",compressed:"jquery.min.js"}},aliases:{":1":"1.7.1",":1.2":"1.2.6",":1.3":"1.3.2",":1.4":"1.4.4",":1.5":"1.5.2",":1.6":"1.6.4",":1.7":"1.7.1"}},":dojo":{versions:{":1.3.0":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.4.0":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.3.1":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.5.0":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.4.1":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.3.2":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.2.3":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.6.0":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.5.1":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.7.0":{uncompressed:"dojo/dojo.js.uncompressed.js",compressed:"dojo/dojo.js"},":1.6.1":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.4.3":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.7.1":{uncompressed:"dojo/dojo.js.uncompressed.js",compressed:"dojo/dojo.js"},":1.7.2":{uncompressed:"dojo/dojo.js.uncompressed.js",compressed:"dojo/dojo.js"},":1.2.0":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.1.1":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"}},aliases:{":1":"1.6.1",":1.1":"1.1.1",":1.2":"1.2.3",":1.3":"1.3.2",":1.4":"1.4.3",":1.5":"1.5.1",":1.6":"1.6.1",":1.7":"1.7.2"}}})),function(e){try{app=angular.module("locator")}catch(e){app=angular.module("locator",[])}app.run(["$templateCache",function(e){e.put("location-lookup/location-lookup.html",'<div class="search-box">\n  <location-predictions results="results"></location-predictions>\n</div>\n\n<ul>\n\n  \x3c!-- Results --\x3e\n  <li ng-repeat="option in results | limitTo:limitTo"\n    item="option">{{option.description}}<span ng-click="pickLocation(option)">Select</span></li>\n  <li ng-if="results.length > 0"\n    ng-click="clear();"\n    item="option">None of these options</li>\n\n</ul>')}])}(),function(e){try{app=angular.module("locator")}catch(e){app=angular.module("locator",[])}app.run(["$templateCache",function(e){e.put("location-picker/location-picker.html",'<ul>\n\n  \x3c!-- Reverse Geocode Results --\x3e\n  <li ng-repeat="option in options | limitTo:limitTo"\n    item="option">{{option.formatted_address}}<span ng-click="pickLocation(option)">Select</span></li>\n\n  \x3c!-- Loading --\x3e\n  <li ng-if="!options">Loading &hellip;</li>\n\n</ul>')}])}(),angular.module("locator",[]),angular.module("locator").directive("locationLookup",[function(){return{restrict:"E",require:"?ngModel",templateUrl:"location-lookup/location-lookup.html",scope:{},link:function(e,t,n,i){e.clickCount=0,e.limitTo=e.$eval(n.limitTo)||4,e.callback=e.$eval(n.callback),e.results=[];var o=document.createElement("div");o.setAttribute("id",e.ID);var r=new google.maps.places.PlacesService(t[0].appendChild(o));e.clear=function(t,n){i.$setViewValue({name:"Hi",description:"Hey"}),e.callback&&e.callback({name:"Hi",description:"Hey"}),e.results=[]},e.pickLocation=function(t){return 0==e.clickCount&&ionic.Platform.isAndroid()?(e.clickCount=1,!1):(document.activeElement.blur(),e.clickCount=0,e.clear(),r.getDetails({reference:t.reference},function(n){e.$apply(function(){var o={name:t.terms[0].value,description:t.description,latitude:n.geometry.location.lat(),longitude:n.geometry.location.lng()};t.relInput.val(t.description);var r=null,a=null,s=n.adr_address;0!=n.adr_address.indexOf("<")&&(s=s.substr(n.adr_address.indexOf("<"),n.adr_address.length)),$(s).each(function(){var e=$(this)[0].innerHTML,t=/^[A-Z]{1,2}[0-9]{1,2} ?[0-9][A-Z]{2}$/i,n=t.test(e),i=["Bedford","Luton","Northampton","Milton Keynes"],o=-1!=i.indexOf(e);n?r=e:o&&(a=e)}),"pickup-input"==t.relInput.attr("id")?($("#pickup-address-line-1").val($(s)[0].innerHTML),$("#pickup-town").val(a),null!=n&&$("#pickup-postcode").val(r)):"dropoff-input"==t.relInput.attr("id")&&($("#dropoff-address-line-1").val($(s)[0].innerHTML),$("#dropoff-town").val(a),null!=n&&$("#dropoff-postcode").val(r)),i.$setViewValue(o),e.callback&&e.callback(o)})}),!0)}}}}]),angular.module("locator").directive("locationPredictions",["$rootScope",function(e){return{restrict:"AE",scope:{results:"="},template:'<input type="text">',link:function(t,n){var i=angular.element(n.find("input")),o="dropoff-input";"dropoff-location-input"==$(n).parents("location-lookup")[0].id?(i.attr("id","dropoff-input"),i.attr("placeholder","Drop-Off Location"),$(n).parents("location-lookup").find("ul").addClass("dropoff-list")):"pickup-location-input"==$(n).parents("location-lookup")[0].id&&(o="pickup-input",i.attr("id","pickup-input"),i.attr("placeholder","Pick-Up Location"),$(n).parents("location-lookup").find("ul").addClass("pickup-list"));var r=($(n).parents("location-lookup"),new google.maps.places.AutocompleteService),a=function(e){var t=new google.maps.LatLng({lat:52.03,lng:-.47});r.getPlacePredictions({input:e,componentRestrictions:{country:"gb"},location:t,radius:5},s)},s=function(n,r){return r!==google.maps.places.PlacesServiceStatus.OK?void t.$apply(function(){t.results=[];for(var n=/^[A-Z]{1,2}[0-9]{1,2}$/i,r=/^[0-9][A-Z]{2}$/i,a=/^[A-Z]{1,2}[0-9]{1,2}[0-9][A-Z]{2}$/i,s=i[0].value.split(" "),l=!1,c=0;c<s.length;c++)postCodeFirstTest=n.test(s[c]),postCodeWholeTest=a.test(s[c]),postCodeWholeTest&&"pickup-input"==o?($("#pickup-postcode").val(s[c]),l=!0):postCodeWholeTest&&"dropoff-input"==o?($("#dropoff-postcode").val(s[c]),l=!0):postCodeFirstTest&&c<s.length-1&&(postCodeSecondTest=r.test(s[c+1]),postCodeSecondTest&&("pickup-input"==o?$("#dropoff-postcode").val(s[c]+" "+s[c+1]):"dropoff-input"==o&&$("#dropoff-postcode").val(s[c]+" "+s[c+1]),l=!0)),c==s.length-1&&("pickup-input"==o?$("#pickup-address-line-1").val(""):$("#dropoff-address-line-1").val(""),l||"pickup-input"!=o?l||"dropoff-input"!=o||$("#dropoff-postcode").val(""):$("#pickup-postcode").val(""),"pickup-input"==o?$("#pickup-town").val(""):"dropoff-input"==o&&$("#dropoff-town").val(""),e.$broadcast("no-taxi-search-results",{inputType:o}))}):void t.$apply(function(){e.$broadcast("taxi-search-results",{inputType:o});var r=function(e){var o=document.createElement("div");o.setAttribute("id","adiv"),second=document.getElementById("undefined").appendChild(o);var a=new google.maps.places.PlacesService(second);n[e].description=n[e].description.replace(", United Kingdom",""),n[e].description=n[e].description.replace("United Kingdom",""),n[e].relInput=i,a.getDetails({reference:n[e].reference},function(i){if(null!=i){var o=i.adr_address;0!=i.adr_address.indexOf("<")&&(o=o.substr(i.adr_address.indexOf("<"),i.adr_address.length)),$(o).each(function(i){var a=$(this)[0].innerHTML,s=/^[A-Z]{1,2}[0-9]{1,2} ?[0-9][A-Z]{2}$/i,l=s.test(a),c=["Bedford","Luton","Northampton","Milton Keynes"],d=-1==c.indexOf(a);l?n[e].description+=", "+a:d&&(town=a),i==$(o).length-1&&(e<n.length-1?r(e+1):t.results=n)})}else e<n.length-1?r(e+1):t.results=n})};r(0)})};i.on("input",function(){var e=i.val().replace(/,/g,"");e&&e.length>=3?a(e):t.$apply(function(){t.results=[]})})}}}]),angular.module("locator").directive("locationPicker",["$log","location","reverseGeocoder",function(e,t,n){return{restrict:"E",require:"?ngModel",scope:{},templateUrl:"location-picker/location-picker.html",link:function(i,o,r,a){i.limitTo=i.$eval(r.limitTo)||4,t.ready(function(){n.geocode(t.current).then(function(e){i.options=e},e.error)}),i.pickLocation=function(e){document.activeElement.blur();var e={latitude:t.current.latitude,longitude:t.current.longitude,name:e.address_components[0].short_name,description:e.formatted_address};a.$setViewValue(e)}}}}]),angular.module("locator").factory("location",[function(){var e={isReady:!1,gpsAvailable:!0},t=[];return e.get=function(t,n){navigator.geolocation.getCurrentPosition(function(n){e.gpsAvailable=!0,e.current={latitude:n.coords.latitude,longitude:n.coords.longitude},e.isReady=!0,e.onReadyTasks(),t()},function(t){e.gpsAvailable=!1,console.log("code: "+t.code+" message: "+t.message),n()})},e.onReadyTasks=function(){for(var e=t.length-1;e>=0;e--)t[e]()},e.ready=function(n){e.isReady?n():t.push(n)},e}]),angular.module("locator").factory("reverseGeocoder",["$document","$q",function(e,t){var n={};return e.ready(function(){n.geocoder=new google.maps.Geocoder}),n.geocode=function(e){var i=t.defer();if(e)var o=new google.maps.LatLng(e.latitude,e.longitude);else i.reject("You need to provide LatLng");return n.geocoder.geocode({latLng:o},function(e,t){return t!==google.maps.GeocoderStatus.OK?void i.reject("No locations found"):void i.resolve(e)}),i.promise},n}]),angular.module("ngOpenFB",[]).factory("ngFB",function(e,t){function n(e){return t.openFB.init(e)}function i(n){var i=e.defer();return t.openFB.login(function(e){"connected"===e.status?i.resolve(e):i.reject(e)},n),i.promise}function o(){var n=e.defer();return t.openFB.logout(function(){n.resolve()}),n.promise}function r(n){var i=e.defer();return n.success=function(e){i.resolve(e)},n.error=function(e){i.reject(e)},t.openFB.api(n),i.promise}function a(){var n=e.defer();return t.openFB.revokePermissions(function(){n.resolve()},function(){n.reject()}),n.promise}function s(){var n=e.defer();return t.openFB.getLoginStatus(function(e){n.resolve(e)}),n.promise}return{init:n,login:i,logout:o,revokePermissions:a,api:r,getLoginStatus:s}});var openFB=function(){function e(e){if(!e.appId)throw"appId parameter not set in init()";c=e.appId,e.tokenStore&&(m=e.tokenStore),e.accessToken&&(m.fbAccessToken=e.accessToken),p=e.loginURL||p,g=e.logoutURL||g,v=e.oauthRedirectURL||v,y=e.cordovaOAuthRedirectURL||y,b=e.logoutRedirectURL||b}function t(e){var t=m.fbAccessToken,n={};t?(n.status="connected",n.authResponse={accessToken:t}):n.status="unknown",e&&e(n)}function n(e,t){function n(e){var t=e.url;if(t.indexOf("access_token=")>0||t.indexOf("error=")>0){var n=600-((new Date).getTime()-a);setTimeout(function(){r.close()},n>0?n:0),i(t)}}function o(){console.log("exit and remove listeners"),d&&!u&&d({status:"user_cancelled"}),r.removeEventListener("loadstop",loginWindow_loadStopHandler),r.removeEventListener("exit",o),r=null,console.log("done removing listeners")}var r,a,s="",l=w?y:v;if(!c)return e({status:"unknown",error:"Facebook App Id not set."});t&&t.scope&&(s=t.scope),d=e,u=!1,a=(new Date).getTime(),r=window.open(p+"?client_id="+c+"&redirect_uri="+l+"&response_type=token&scope="+s,"_blank","location=no,clearcache=yes"),w&&(r.addEventListener("loadstart",n),r.addEventListener("exit",o))}function i(e){var t,n;u=!0,e.indexOf("access_token=")>0?(t=e.substr(e.indexOf("#")+1),n=s(t),m.fbAccessToken=n.access_token,d&&d({status:"connected",authResponse:{accessToken:n.access_token}})):e.indexOf("error=")>0?(t=e.substring(e.indexOf("?")+1,e.indexOf("#")),n=s(t),d&&d({status:"not_authorized",error:n.error})):d&&d({status:"not_authorized"})}function o(e){var t,n=m.fbAccessToken;m.removeItem("fbtoken"),n&&(t=window.open(g+"?access_token="+n+"&next="+b,"_blank","location=no,clearcache=yes"),w&&setTimeout(function(){t.close()},700)),e&&e()}function r(e){var t,n=e.method||"GET",i=e.params||{},o=new XMLHttpRequest;i.access_token=m.fbAccessToken,t="https://graph.facebook.com"+e.path+"?"+l(i),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)e.success&&e.success(JSON.parse(o.responseText));else{var t=o.responseText?JSON.parse(o.responseText).error:{message:"An error has occurred"};e.error&&e.error(t)}},o.open(n,t,!0),o.send()}function a(e,t){return r({method:"DELETE",path:"/me/permissions",success:function(){e()},error:t})}function s(e){var t=decodeURIComponent(e),n={};return t.split("&").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]}),n}function l(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var c,d,u,p="https://www.facebook.com/dialog/oauth",g="https://www.facebook.com/logout.php",m=window.sessionStorage,f=window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/")),h=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+f,v=h+"/oauthcallback.html",y="https://www.facebook.com/connect/login_success.html",b=h+"/logoutcallback.html",w=!1;return document.addEventListener("deviceready",function(){w=!0},!1),{init:e,login:n,logout:o,revokePermissions:a,api:r,oauthCallback:i,getLoginStatus:t}}(),PushNotification=function(){};PushNotification.prototype.register=function(e,t,n){return null==t&&(t=function(){}),"function"!=typeof t?void console.log("PushNotification.register failure: failure parameter not a function"):"function"!=typeof e?void console.log("PushNotification.register failure: success callback parameter must be a function"):void cordova.exec(e,t,"PushPlugin","register",[n])},PushNotification.prototype.unregister=function(e,t){return null==t&&(t=function(){}),"function"!=typeof t?void console.log("PushNotification.unregister failure: failure parameter not a function"):"function"!=typeof e?void console.log("PushNotification.unregister failure: success callback parameter must be a function"):void cordova.exec(e,t,"PushPlugin","unregister",[])},PushNotification.prototype.setApplicationIconBadgeNumber=function(e,t){return null==errorCallback&&(errorCallback=function(){}),"function"!=typeof errorCallback?void console.log("PushNotification.setApplicationIconBadgeNumber failure: failure parameter not a function"):"function"!=typeof e?void console.log("PushNotification.setApplicationIconBadgeNumber failure: success callback parameter must be a function"):void cordova.exec(e,e,"PushPlugin","setApplicationIconBadgeNumber",[{badge:t}])},window.plugins||(window.plugins={}),window.plugins.pushNotification||(window.plugins.pushNotification=new PushNotification),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.io=e()}}(function(){var e;return function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n||e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){function i(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i=o(e),r=i.source,c=i.id,d=i.path,u=l[c]&&l[c].nsps[d]&&d==l[c].nsps[d].nsp,p=t.forceNew||t["force new connection"]||!1===t.multiplex||u;return p?(s("ignoring socket cache for %s",r),n=a(r,t)):(l[c]||(s("new io instance for %s",r),l[c]=a(r,t)),n=l[c]),n.socket(i.path)}var o=e("./url"),r=e("socket.io-parser"),a=e("./manager"),s=e("debug")("socket.io-client");t.exports=n=i;var l=n.managers={};n.protocol=r.protocol,n.connect=i,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":44}],3:[function(e,t,n){function i(e,t){if(!(this instanceof i))return new i(e,t);e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}var o=(e("./url"),e("engine.io-client")),r=e("./socket"),a=e("component-emitter"),s=e("socket.io-parser"),l=e("./on"),c=e("component-bind"),d=(e("object-component"),e("debug")("socket.io-client:manager")),u=e("indexof"),p=e("backo2");t.exports=i,i.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},i.prototype.updateSocketIds=function(){for(var e in this.nsps)this.nsps[e].id=this.engine.id},a(i.prototype),i.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},i.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},i.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},i.prototype.open=i.prototype.connect=function(e){if(d("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;d("opening %s",this.uri),this.engine=o(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=l(t,"open",function(){n.onopen(),e&&e()}),r=l(t,"error",function(t){if(d("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var i=new Error("Connection error");i.data=t,e(i)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;d("connect attempt will timeout after %d",a);var s=setTimeout(function(){d("connect attempt timed out after %d",a),i.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(i),this.subs.push(r),this},i.prototype.onopen=function(){d("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",c(this,"ondata"))),this.subs.push(l(this.decoder,"decoded",c(this,"ondecoded"))),this.subs.push(l(e,"error",c(this,"onerror"))),this.subs.push(l(e,"close",c(this,"onclose")))},i.prototype.ondata=function(e){this.decoder.add(e)},i.prototype.ondecoded=function(e){this.emit("packet",e)},i.prototype.onerror=function(e){d("error",e),this.emitAll("error",e)},i.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new r(this,e),this.nsps[e]=t;var n=this;t.on("connect",function(){t.id=n.engine.id,~u(n.connected,t)||n.connected.push(t)})}return t},i.prototype.destroy=function(e){var t=u(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},i.prototype.packet=function(e){d("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var n=0;n<e.length;n++)t.engine.write(e[n]);t.encoding=!1,t.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},i.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(e){d("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)d("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();d("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(d("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(d("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(d("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},i.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:40,"object-component":41,"socket.io-parser":44}],4:[function(e,t,n){function i(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}t.exports=i},{}],5:[function(e,t,n){function i(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var o=e("socket.io-parser"),r=e("component-emitter"),a=e("to-array"),s=e("./on"),l=e("component-bind"),c=e("debug")("socket.io-client:socket"),d=e("has-binary");t.exports=i;var u={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},p=r.prototype.emit;r(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",l(this,"onopen")),s(e,"packet",l(this,"onpacket")),s(e,"close",l(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},i.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},i.prototype.emit=function(e){if(u.hasOwnProperty(e))return p.apply(this,arguments),this;var t=a(arguments),n=o.EVENT;d(t)&&(n=o.BINARY_EVENT);var i={type:n,data:t};return"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this},i.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},i.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:o.CONNECT})},i.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0},i.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},i.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},i.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=a(arguments);c("sending ack %j",i);var r=d(i)?o.BINARY_ACK:o.ACK;t.packet({type:r,id:e,data:i})}}},i.prototype.onack=function(e){c("calling ack %s with %j",e.id,e.data),this.acks[e.id].apply(this,e.data),delete this.acks[e.id]},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":36,"socket.io-parser":44,"to-array":48}],6:[function(e,t,n){(function(n){function i(e,t){var i=e,t=t||n.location;return null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(r("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),r("parse %s",e),i=o(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/",i.id=i.protocol+"://"+i.host+":"+i.port,i.href=i.protocol+"://"+i.host+(t&&t.port==i.port?"":":"+i.port),i}var o=e("parseuri"),r=e("debug")("socket.io-client:url");t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:10,parseuri:42}],7:[function(e,t,n){function i(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=i,i.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},i.prototype.reset=function(){this.attempts=0},i.prototype.setMin=function(e){this.ms=e},i.prototype.setMax=function(e){this.max=e},i.prototype.setJitter=function(e){this.jitter=e}},{}],8:[function(e,t,n){var i=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}},{}],9:[function(e,t,n){function i(e){if(e)return o(e)}function o(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,o=0;o<n.length;o++)if((i=n[o])===t||i.fn===t){n.splice(o,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var i=0,o=n.length;i<o;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],10:[function(e,t,n){function i(e){return i.enabled(e)?function(t){t=o(t);var n=new Date,r=n-(i[e]||n);i[e]=n,t=e+" "+t+" +"+i.humanize(r),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function o(e){return e instanceof Error?e.stack||e.message:e}t.exports=i,i.names=[],i.skips=[],i.enable=function(e){try{localStorage.debug=e}catch(e){}for(var t=(e||"").split(/[\s,]+/),n=t.length,o=0;o<n;o++)e=t[o].replace("*",".*?"),"-"===e[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$"))},i.disable=function(){i.enable("")},i.humanize=function(e){var t=1e3,n=6e4,i=60*n;return e>=i?(e/i).toFixed(1)+"h":e>=n?(e/n).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},i.enabled=function(e){for(var t=0,n=i.skips.length;t<n;t++)if(i.skips[t].test(e))return!1;for(var t=0,n=i.names.length;t<n;t++)if(i.names[t].test(e))return!0;return!1};try{window.localStorage&&i.enable(localStorage.debug)}catch(e){}},{}],11:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":12}],12:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":13,"engine.io-parser":25}],13:[function(e,t,n){(function(n){function i(e,t){if(!(this instanceof i))return new i(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=d(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.host){var o=t.host.split(":");t.hostname=o.shift(),o.length?t.port=o.pop():t.port||(t.port=this.secure?"443":"80")}this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized||null,this.open()}function o(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var r=e("./transports"),a=e("component-emitter"),s=e("debug")("engine.io-client:socket"),l=e("indexof"),c=e("engine.io-parser"),d=e("parseuri"),u=e("parsejson"),p=e("parseqs");t.exports=i,i.priorWebsocketSuccess=!1,a(i.prototype),i.protocol=c.protocol,i.Socket=i,i.Transport=e("./transport"),i.transports=e("./transports"),i.parser=e("engine.io-parser"),i.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=o(this.query);return t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id),new r[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized})},i.prototype.open=function(){var e;if(this.rememberUpgrade&&i.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},i.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},i.prototype.probe=function(e){function t(){if(p.onlyBinaryUpgrades){var t=!this.supportsBinary&&p.transport.supportsBinary;u=u||t}u||(s('probe transport "%s" opened',e),d.send([{type:"ping",data:"probe"}]),d.once("packet",function(t){if(!u)if("pong"==t.type&&"probe"==t.data){if(s('probe transport "%s" pong',e),p.upgrading=!0,p.emit("upgrading",d),!d)return;i.priorWebsocketSuccess="websocket"==d.name,s('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){u||"closed"!=p.readyState&&(s("changing transport and sending upgrade packet"),c(),p.setTransport(d),d.send([{type:"upgrade"}]),p.emit("upgrade",d),d=null,p.upgrading=!1,p.flush())})}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=d.name,p.emit("upgradeError",n)}}))}function n(){u||(u=!0,c(),d.close(),d=null)}function o(t){var i=new Error("probe error: "+t);i.transport=d.name,n(),s('probe transport "%s" failed because of error: %s',e,t),p.emit("upgradeError",i)}function r(){o("transport closed")}function a(){o("socket closed")}function l(e){d&&e.name!=d.name&&(s('"%s" works - aborting "%s"',e.name,d.name),n())}function c(){d.removeListener("open",t),d.removeListener("error",o),d.removeListener("close",r),p.removeListener("close",a),p.removeListener("upgrading",l)}s('probing transport "%s"',e);var d=this.createTransport(e,{probe:1}),u=!1,p=this;i.priorWebsocketSuccess=!1,d.once("open",t),d.once("error",o),d.once("close",r),this.once("close",a),this.once("upgrading",l),d.open()},i.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",i.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},i.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(u(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},i.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},i.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},i.prototype.ping=function(){this.sendPacket("ping")},i.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},i.prototype.sendPacket=function(e,t,n){if("closing"!=this.readyState&&"closed"!=this.readyState){var i={type:e,data:t};this.emit("packetCreate",i),this.writeBuffer.push(i),this.callbackBuffer.push(n),this.flush()}},i.prototype.close=function(){function e(){i.onClose("forced close"),s("socket closing - telling transport to close"),i.transport.close()}function t(){i.removeListener("upgrade",t),i.removeListener("upgradeError",t),e()}function n(){i.once("upgrade",t),i.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var i=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},i.prototype.onError=function(e){s("socket error %j",e),i.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},i.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[],n.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},i.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;n<i;n++)~l(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:40,parsejson:32,parseqs:33,parseuri:34}],14:[function(e,t,n){function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized}var o=e("engine.io-parser"),r=e("component-emitter");t.exports=i,r(i.prototype),i.timestamps=0,i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=o.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],15:[function(e,t,n){(function(t){function i(e){var n=!1,i=!1,s=!1!==e.jsonp;if(t.location){var l="https:"==location.protocol,c=location.port;c||(c=l?443:80),n=e.hostname!=location.hostname||c!=e.port,i=e.secure!=l}if(e.xdomain=n,e.xscheme=i,"open"in new o(e)&&!e.forceJSONP)return new r(e);if(!s)throw new Error("JSONP disabled");return new a(e)}var o=e("xmlhttprequest"),r=e("./polling-xhr"),a=e("./polling-jsonp"),s=e("./websocket");n.polling=i,n.websocket=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(e,t,n){(function(n){function i(){}function o(e){r.call(this,e),this.query=this.query||{},s||(n.___eio||(n.___eio=[]),s=n.___eio),this.index=s.length;var t=this;s.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=i)},!1)}var r=e("./polling"),a=e("component-inherit");t.exports=o;var s,l=/\n/g,c=/\\n/g;a(o,r),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},o.prototype.doWrite=function(e,t){function n(){i(),t()}function i(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+o.iframeId+'">';r=document.createElement(e)}catch(e){r=document.createElement("iframe"),r.name=o.iframeId,r.src="javascript:0"}r.id=o.iframeId,o.form.appendChild(r),o.iframe=r}var o=this;if(!this.form){var r,a=document.createElement("form"),s=document.createElement("textarea"),d=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=d,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),i(),e=e.replace(c,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==o.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-inherit":21}],17:[function(e,t,n){(function(n){function i(){}function o(e){if(l.call(this,e),n.location){var t="https:"==location.protocol,i=location.port;i||(i=t?443:80),this.xd=e.hostname!=n.location.hostname||i!=e.port,this.xs=e.secure!=t}}function r(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.create()}function a(){for(var e in r.requests)r.requests.hasOwnProperty(e)&&r.requests[e].abort()}var s=e("xmlhttprequest"),l=e("./polling"),c=e("component-emitter"),d=e("component-inherit"),u=e("debug")("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=r,d(o,l),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,new r(e)},o.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:n}),o=this;i.on("success",t),i.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=i},o.prototype.doPoll=function(){u("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},c(r.prototype),r.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new s(e),i=this;try{if(u("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async),this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){i.onLoad()},t.onerror=function(){i.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?i.onLoad():setTimeout(function(){i.onError(t.status)},0))},u("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){i.onError(e)},0)}n.document&&(this.index=r.requestsCount++,r.requests[this.index]=this)},r.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},r.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},r.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},r.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i,e)try{this.xhr.abort()}catch(e){}n.document&&delete r.requests[this.index],this.xhr=null}},r.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},r.prototype.hasXDR=function(){return void 0!==n.XDomainRequest&&!this.xs&&this.enablesXDR},r.prototype.abort=function(){this.cleanup()},n.document&&(r.requestsCount=0,r.requests={},n.attachEvent?n.attachEvent("onunload",a):n.addEventListener&&n.addEventListener("beforeunload",a,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(e,t,n){function i(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),o.call(this,e)}var o=e("../transport"),r=e("parseqs"),a=e("engine.io-parser"),s=e("component-inherit"),l=e("debug")("engine.io-client:polling");t.exports=i;var c=function(){return null!=new(e("xmlhttprequest"))({xdomain:!1}).responseType}();s(i,o),i.prototype.name="polling",i.prototype.doOpen=function(){this.poll()},i.prototype.pause=function(e){function t(){l("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(l("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){l("pre-pause polling complete"),--i||t()})),this.writable||(l("we are currently writing - waiting to pause"),i++,this.once("drain",function(){l("pre-pause writing complete"),--i||t()}))}else t()},i.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},i.prototype.onData=function(e){var t=this;l("polling got data %s",e);var n=function(e,n,i){if("opening"==t.readyState&&t.onOpen(),"close"==e.type)return t.onClose(),!1;t.onPacket(e)};a.decodePayload(e,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},i.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},i.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")},t=this;a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+o.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=r.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,xmlhttprequest:20}],19:[function(e,t,n){function i(e){e&&e.forceBase64&&(this.supportsBinary=!1),o.call(this,e)}var o=e("../transport"),r=e("engine.io-parser"),a=e("parseqs"),s=e("component-inherit"),l=e("debug")("engine.io-client:websocket"),c=e("ws");t.exports=i,s(i,o),i.prototype.name="websocket",i.prototype.supportsBinary=!0,i.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.ws=new c(e,void 0,t),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},i.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(i.prototype.onData=function(e){var t=this;setTimeout(function(){o.prototype.onData.call(t,e)},0)}),i.prototype.write=function(e){function t(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;for(var i=0,o=e.length;i<o;i++)r.encodePacket(e[i],this.supportsBinary,function(e){try{n.ws.send(e)}catch(e){l("websocket closed before onclose event")}});setTimeout(t,0)},i.prototype.onClose=function(){o.prototype.onClose.call(this)},i.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=a.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e},i.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===i.prototype.name)}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,ws:35}],20:[function(e,t,n){var i=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":38}],21:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],22:[function(e,t,n){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var i="color: "+this.color;e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,r=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(r=o))}),e.splice(r,0,i),e}function r(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(e){}}function s(){var e;try{e=localStorage.debug}catch(e){}return e}n=t.exports=e("./debug"),n.log=r,n.formatArgs=o,n.save=a,n.load=s,n.useColors=i,n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(s())},{"./debug":23}],23:[function(e,t,n){function i(){return n.colors[d++%n.colors.length]}function o(e){function t(){}function o(){var e=o,t=+new Date,r=t-(c||t);e.diff=r,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=i());var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(t,i){if("%%"===t)return t;s++;var o=n.formatters[i];if("function"==typeof o){var r=a[s];t=o.call(e,r),a.splice(s,1),s--}return t}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(e,a)),(o.log||n.log||console.log.bind(console)).apply(e,a)}t.enabled=!1,o.enabled=!0;var r=n.enabled(e)?o:t;return r.namespace=e,r}function r(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),i=t.length,o=0;o<i;o++)t[o]&&(e=t[o].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function a(){n.enable("")}function s(e){var t,i;for(t=0,i=n.skips.length;t<i;t++)if(n.skips[t].test(e))return!1;for(t=0,i=n.names.length;t<i;t++)if(n.names[t].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=o,n.coerce=l,n.disable=a,n.enable=r,n.enabled=s,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var c,d=0},{ms:24}],24:[function(e,t,n){function i(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"y":return n*u;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"h":return n*c;case"minutes":case"minute":case"m":return n*l;case"seconds":case"second":case"s":return n*s;case"ms":return n}}}function o(e){return e>=d?Math.round(e/d)+"d":e>=c?Math.round(e/c)+"h":e>=l?Math.round(e/l)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function r(e){return a(e,d,"day")||a(e,c,"hour")||a(e,l,"minute")||a(e,s,"second")||e+" ms"}function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,l=60*s,c=60*l,d=24*c,u=365.25*d;t.exports=function(e,t){return t=t||{},"string"==typeof e?i(e):t.long?r(e):o(e)}},{}],25:[function(e,t,n){(function(t){function i(e,t){return t("b"+n.packets[e.type]+e.data.data)}function o(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var o=e.data,r=new Uint8Array(o),a=new Uint8Array(1+o.byteLength);a[0]=v[e.type];for(var s=0;s<r.length;s++)a[s+1]=r[s];return i(a.buffer)}function r(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var o=new FileReader;return o.onload=function(){e.data=o.result,n.encodePacket(e,t,!0,i)},o.readAsArrayBuffer(e.data)}function a(e,t,i){if(!t)return n.encodeBase64Packet(e,i);if(h)return r(e,t,i);var o=new Uint8Array(1);return o[0]=v[e.type],i(new w([o.buffer,e.data]))}function s(e,t,n){for(var i=new Array(e.length),o=p(e.length,n),r=function(e,n,o){t(n,function(t,n){i[e]=n,o(t,i)})},a=0;a<e.length;a++)r(a,e[a],o)}var l=e("./keys"),c=e("has-binary"),d=e("arraybuffer.slice"),u=e("base64-arraybuffer"),p=e("after"),g=e("utf8"),m=navigator.userAgent.match(/Android/i),f=/PhantomJS/i.test(navigator.userAgent),h=m||f;n.protocol=3;var v=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=l(v),b={type:"error",data:"parser error"},w=e("blob");n.encodePacket=function(e,n,r,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof r&&(s=r,r=null);var l=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&l instanceof ArrayBuffer)return o(e,n,s);if(w&&l instanceof t.Blob)return a(e,n,s);if(l&&l.base64)return i(e,s);var c=v[e.type];return void 0!==e.data&&(c+=r?g.encode(String(e.data)):String(e.data)),s(""+c)},n.encodeBase64Packet=function(e,i){var o="b"+n.packets[e.type];if(w&&e.data instanceof w){var r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];i(o+e)},r.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),l=new Array(s.length),c=0;c<s.length;c++)l[c]=s[c];a=String.fromCharCode.apply(null,l)}return o+=t.btoa(a),i(o)},n.decodePacket=function(e,t,i){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(i)try{e=g.decode(e)}catch(e){return b}var o=e.charAt(0);return Number(o)==o&&y[o]?e.length>1?{type:y[o],data:e.substring(1)}:{type:y[o]}:b}var r=new Uint8Array(e),o=r[0],a=d(e,1);return w&&"blob"===t&&(a=new w([a])),{type:y[o],data:a}},n.decodeBase64Packet=function(e,n){var i=y[e.charAt(0)];if(!t.ArrayBuffer)return{type:i,data:{base64:!0,data:e.substr(1)}};var o=u.decode(e.substr(1));return"blob"===n&&w&&(o=new w([o])),{type:i,data:o}},n.encodePayload=function(e,t,i){function o(e){return e.length+":"+e}function r(e,i){n.encodePacket(e,!!a&&t,!0,function(e){i(null,o(e))})}"function"==typeof t&&(i=t,t=null);var a=c(e);return t&&a?w&&!h?n.encodePayloadAsBlob(e,i):n.encodePayloadAsArrayBuffer(e,i):e.length?void s(e,r,function(e,t){return i(t.join(""))}):i("0:")},n.decodePayload=function(e,t,i){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,i);"function"==typeof t&&(i=t,t=null);var o;if(""==e)return i(b,0,1);for(var r,a,s="",l=0,c=e.length;l<c;l++){var d=e.charAt(l);if(":"!=d)s+=d;else{if(""==s||s!=(r=Number(s)))return i(b,0,1);if(a=e.substr(l+1,r),s!=a.length)return i(b,0,1);if(a.length){if(o=n.decodePacket(a,t,!0),b.type==o.type&&b.data==o.data)return i(b,0,1);if(!1===i(o,l+r,c))return}l+=r,s=""}}return""!=s?i(b,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){function i(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})}if(!e.length)return t(new ArrayBuffer(0));s(e,i,function(e,n){var i=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),o=new Uint8Array(i),r=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);n=i.buffer}o[r++]=t?0:1;for(var s=n.byteLength.toString(),a=0;a<s.length;a++)o[r++]=parseInt(s[a]);o[r++]=255;for(var i=new Uint8Array(n),a=0;a<i.length;a++)o[r++]=i[a]}),t(o.buffer)})},n.encodePayloadAsBlob=function(e,t){function i(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);e=i.buffer,n[0]=0}for(var r=e instanceof ArrayBuffer?e.byteLength:e.size,a=r.toString(),s=new Uint8Array(a.length+1),o=0;o<a.length;o++)s[o]=parseInt(a[o]);if(s[a.length]=255,w){var l=new w([n.buffer,s.buffer,e]);t(null,l)}})}s(e,i,function(e,n){return t(new w(n))})},n.decodePayloadAsBinary=function(e,t,i){"function"==typeof t&&(i=t,t=null);for(var o=e,r=[],a=!1;o.byteLength>0;){for(var s=new Uint8Array(o),l=0===s[0],c="",u=1;255!=s[u];u++){if(c.length>310){a=!0;break}c+=s[u]}if(a)return i(b,0,1);o=d(o,2+c.length),c=parseInt(c);var p=d(o,0,c);if(l)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(e){var g=new Uint8Array(p);p="";for(var u=0;u<g.length;u++)p+=String.fromCharCode(g[u])}r.push(p),o=d(o,c)}var m=r.length;r.forEach(function(e,o){i(n.decodePacket(e,t,!0),o,m)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":36,utf8:31}],26:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},{}],27:[function(e,t,n){function i(e,t,n){function i(e,o){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(r=!0,t(e),t=n):0!==i.count||r||t(null,o)}var r=!1;return n=n||o,i.count=e,0===e?t():i}function o(){}t.exports=i},{}],28:[function(e,t,n){t.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(t<0&&(t+=i),n<0&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var o=new Uint8Array(e),r=new Uint8Array(n-t),a=t,s=0;a<n;a++,s++)r[s]=o[a];return r.buffer}},{}],29:[function(e,t,n){!function(e){n.encode=function(t){var n,i=new Uint8Array(t),o=i.length,r="";for(n=0;n<o;n+=3)r+=e[i[n]>>2],r+=e[(3&i[n])<<4|i[n+1]>>4],r+=e[(15&i[n+1])<<2|i[n+2]>>6],r+=e[63&i[n+2]];return o%3==2?r=r.substring(0,r.length-1)+"=":o%3==1&&(r=r.substring(0,r.length-2)+"=="),r},n.decode=function(t){var n,i,o,r,a,s=.75*t.length,l=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var d=new ArrayBuffer(s),u=new Uint8Array(d);for(n=0;n<l;n+=4)i=e.indexOf(t[n]),o=e.indexOf(t[n+1]),r=e.indexOf(t[n+2]),a=e.indexOf(t[n+3]),u[c++]=i<<2|o>>4,u[c++]=(15&o)<<4|r>>2,u[c++]=(3&r)<<6|63&a;return d}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],30:[function(e,t,n){(function(e){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var i=n.buffer;if(n.byteLength!==i.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(i,n.byteOffset,n.byteLength)),i=o.buffer}e[t]=i}}}function i(e,t){t=t||{};var i=new r;n(e);for(var o=0;o<e.length;o++)i.append(e[o]);return t.type?i.getBlob(t.type):i.getBlob()}function o(e,t){return n(e),new Blob(e,t||{})}var r=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,a=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),s=a&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),l=r&&r.prototype.append&&r.prototype.getBlob;t.exports=function(){return a?s?e.Blob:o:l?i:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(t,n,i){(function(t){!function(o){function r(e){for(var t,n,i=[],o=0,r=e.length;o<r;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<r?(n=e.charCodeAt(o++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),o--)):i.push(t);return i}function a(e){for(var t,n=e.length,i=-1,o="";++i<n;)t=e[i],t>65535&&(t-=65536,o+=w(t>>>10&1023|55296),t=56320|1023&t),o+=w(t);return o}function s(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function l(e,t){return w(e>>t&63|128)}function c(e){if(0==(4294967168&e))return w(e);var t="";return 0==(4294965248&e)?t=w(e>>6&31|192):0==(4294901760&e)?(s(e),t=w(e>>12&15|224),t+=l(e,6)):0==(4292870144&e)&&(t=w(e>>18&7|240),t+=l(e,12),t+=l(e,6)),t+=w(63&e|128)}function d(e){for(var t,n=r(e),i=n.length,o=-1,a="";++o<i;)t=n[o],a+=c(t);return a}function u(){if(b>=y)throw Error("Invalid byte index");var e=255&v[b];if(b++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function p(){var e,t,n,i,o;if(b>y)throw Error("Invalid byte index");if(b==y)return!1;if(e=255&v[b],b++,0==(128&e))return e;if(192==(224&e)){var t=u();if((o=(31&e)<<6|t)>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=u(),n=u(),(o=(15&e)<<12|t<<6|n)>=2048)return s(o),o;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=u(),n=u(),i=u(),(o=(15&e)<<18|t<<12|n<<6|i)>=65536&&o<=1114111))return o;throw Error("Invalid UTF-8 detected")}function g(e){v=r(e),y=v.length,b=0;for(var t,n=[];!1!==(t=p());)n.push(t);return a(n)}var m="object"==typeof i&&i,f="object"==typeof n&&n&&n.exports==m&&n,h="object"==typeof t&&t;h.global!==h&&h.window!==h||(o=h);var v,y,b,w=String.fromCharCode,C={version:"2.0.0",encode:d,decode:g};if("function"==typeof e&&"object"==typeof e.amd&&e.amd)e(function(){return C});else if(m&&!m.nodeType)if(f)f.exports=C;else{var T={},S=T.hasOwnProperty;for(var E in C)S.call(C,E)&&(m[E]=C[E])}else o.utf8=C}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(a,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(i,"@").replace(o,"]").replace(r,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),i=0,o=n.length;i<o;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}},{}],34:[function(e,t,n){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var a=i.exec(e||""),s={},l=14;l--;)s[o[l]]=a[l]||"";return-1!=n&&-1!=r&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],35:[function(e,t,n){function i(e,t,n){return t?new r(e,t):new r(e)}var o=function(){return this}(),r=o.WebSocket||o.MozWebSocket;t.exports=r?i:null,r&&(i.prototype=r.prototype)},{}],36:[function(e,t,n){(function(n){function i(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(o(e)){for(var i=0;i<e.length;i++)if(t(e[i]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return!0}return!1}return t(e)}var o=e("isarray");t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:37}],37:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],38:[function(e,t,n){var i=e("global");try{t.exports="XMLHttpRequest"in i&&"withCredentials"in new i.XMLHttpRequest}catch(e){t.exports=!1}},{global:39}],39:[function(e,t,n){t.exports=function(){return this}()},{}],40:[function(e,t,n){var i=[].indexOf;t.exports=function(e,t){if(i)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],41:[function(e,t,n){var i=Object.prototype.hasOwnProperty;n.keys=Object.keys||function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},n.values=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(e[n]);return t},n.merge=function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);return e},n.length=function(e){return n.keys(e).length},n.isEmpty=function(e){return 0==n.length(e)}},{}],42:[function(e,t,n){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=i.exec(e||""),n={},r=14;r--;)n[o[r]]=t[r]||"";return n}},{}],43:[function(e,t,n){(function(t){var i=e("isarray"),o=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(o(e)){var r={_placeholder:!0,num:n.length};return n.push(e),r}if(i(e)){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=t(e[s]);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var l in e)a[l]=t(e[l]);return a}return e}var n=[],r=e.data,a=e;return a.data=t(r),a.attachments=n.length,{packet:a,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){return t[e.num]}if(i(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var r in e)e[r]=n(e[r]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function r(e,l,c){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){a++;var d=new FileReader;d.onload=function(){c?c[l]=this.result:s=this.result,--a||n(s)},d.readAsArrayBuffer(e)}else if(i(e))for(var u=0;u<e.length;u++)r(e[u],u,e);else if(e&&"object"==typeof e&&!o(e))for(var p in e)r(e[p],p,e)}var a=0,s=e;r(s),a||n(s)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":45,isarray:46}],44:[function(e,t,n){function i(){}function o(e){var t="",i=!1;return t+=e.type,n.BINARY_EVENT!=e.type&&n.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(i=!0,t+=e.nsp),null!=e.id&&(i&&(t+=",",i=!1),t+=e.id),null!=e.data&&(i&&(t+=","),t+=u.stringify(e.data)),d("encoded %j as %s",e,t),t}function r(e,t){function n(e){var n=g.deconstructPacket(e),i=o(n.packet),r=n.buffers;r.unshift(i),t(r)}g.removeBlobs(e,n)}function a(){this.reconstructor=null}function s(e){var t={},i=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return c();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var o="";"-"!=e.charAt(++i)&&(o+=e.charAt(i),i!=e.length););if(o!=Number(o)||"-"!=e.charAt(i))throw new Error("Illegal attachments");t.attachments=Number(o)}if("/"==e.charAt(i+1))for(t.nsp="";++i;){var r=e.charAt(i);if(","==r)break;if(t.nsp+=r,i==e.length)break}else t.nsp="/";var a=e.charAt(i+1);if(""!==a&&Number(a)==a){for(t.id="";++i;){var r=e.charAt(i);if(null==r||Number(r)!=r){--i;break}if(t.id+=e.charAt(i),i==e.length)break}t.id=Number(t.id)}if(e.charAt(++i))try{t.data=u.parse(e.substr(i))}catch(e){return c()}return d("decoded %s as %j",e,t),t}function l(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:n.ERROR,data:"parser error"}}var d=e("debug")("socket.io-parser"),u=e("json3"),p=(e("isarray"),e("component-emitter")),g=e("./binary"),m=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=i,n.Decoder=a,i.prototype.encode=function(e,t){if(d("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)r(e,t);else{t([o(e)])}},p(a.prototype),a.prototype.add=function(e){var t;if("string"==typeof e)t=s(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new l(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!m(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=g.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":43,"./is-buffer":45,"component-emitter":9,debug:10,isarray:46,json3:47}],45:[function(e,t,n){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(e,t,n){t.exports=e(37)},{}],47:[function(t,n,i){!function(t){function n(e){if(n[e]!==a)return n[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=n("json-stringify")&&n("json-parse");else{var i,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var r=d.stringify,l="function"==typeof r&&u;if(l){(i=function(){return 1}).toJSON=i;try{l="0"===r(0)&&"0"===r(new Number)&&'""'==r(new String)&&r(s)===a&&r(a)===a&&r()===a&&"1"===r(i)&&"[1]"==r([i])&&"[null]"==r([a])&&"null"==r(null)&&"[null,null,null]"==r([a,s,null])&&r({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==o&&"1"===r(null,i)&&"[\n 1,\n 2\n]"==r([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==r(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==r(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==r(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==r(new Date(-1))}catch(e){l=!1}}t=l}if("json-parse"==e){var c=d.parse;if("function"==typeof c)try{if(0===c("0")&&!c(!1)){i=c(o);var p=5==i.a.length&&1===i.a[0];if(p){try{p=!c('"\t"')}catch(e){}if(p)try{p=1!==c("01")}catch(e){}if(p)try{p=1!==c("1.")}catch(e){}}}}catch(e){p=!1}t=p}}return n[e]=!!t}var o,r,a,s={}.toString,l="function"==typeof e&&e.amd,c="object"==typeof JSON&&JSON,d="object"==typeof i&&i&&!i.nodeType&&i;d&&c?(d.stringify=c.stringify,d.parse=c.parse):d=t.JSON=c||{};var u=new Date(-0xc782b5b800cec);try{u=-109252==u.getUTCFullYear()&&0===u.getUTCMonth()&&1===u.getUTCDate()&&10==u.getUTCHours()&&37==u.getUTCMinutes()&&6==u.getUTCSeconds()&&708==u.getUTCMilliseconds()}catch(e){}if(!n("json")){var p="[object Function]",g="[object Date]",m="[object Number]",f="[object String]",h="[object Array]",v="[object Boolean]",y=n("bug-string-char-index");if(!u)var b=Math.floor,w=[0,31,59,90,120,151,181,212,243,273,304,334],C=function(e,t){return w[t]+365*(e-1970)+b((e-1969+(t=+(t>1)))/4)-b((e-1901+t)/100)+b((e-1601+t)/400)};(o={}.hasOwnProperty)||(o=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=s?o=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,o=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,o.call(this,e)});var T={boolean:1,number:1,string:1,undefined:1},S=function(e,t){var n=typeof e[t];return"object"==n?!!e[t]:!T[n]};if(r=function(e,t){var n,i,a,l=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(a in i)o.call(i,a)&&l++;return n=i=null,l?r=2==l?function(e,t){var n,i={},r=s.call(e)==p;for(n in e)r&&"prototype"==n||o.call(i,n)||!(i[n]=1)||!o.call(e,n)||t(n)}:function(e,t){var n,i,r=s.call(e)==p;for(n in e)r&&"prototype"==n||!o.call(e,n)||(i="constructor"===n)||t(n);(i||o.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],r=function(e,t){var n,r,a=s.call(e)==p,l=!a&&"function"!=typeof e.constructor&&S(e,"hasOwnProperty")?e.hasOwnProperty:o;for(n in e)a&&"prototype"==n||!l.call(e,n)||t(n);for(r=i.length;n=i[--r];l.call(e,n)&&t(n));}),r(e,t)},!n("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},I="000000",x=function(e,t){return(I+(t||0)).slice(-e)},k="\\u00",A=function(e){var t,n='"',i=0,o=e.length,r=o>10&&y;for(r&&(t=e.split(""));i<o;i++){var a=e.charCodeAt(i);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=E[a];break;default:if(a<32){n+=k+x(2,a.toString(16));break}n+=r?t[i]:y?e.charAt(i):e[i]}}return n+'"'},M=function(e,t,n,i,l,c,d){var u,p,y,w,T,S,E,I,k,_,D,$,O,P,N,F;try{u=t[e]}catch(e){}if("object"==typeof u&&u)if((p=s.call(u))!=g||o.call(u,"toJSON"))"function"==typeof u.toJSON&&(p!=m&&p!=f&&p!=h||o.call(u,"toJSON"))&&(u=u.toJSON(e));else if(u>-1/0&&u<1/0){if(C){for(T=b(u/864e5),y=b(T/365.2425)+1970-1;C(y+1,0)<=T;y++);for(w=b((T-C(y,0))/30.42);C(y,w+1)<=T;w++);T=1+T-C(y,w),S=(u%864e5+864e5)%864e5,E=b(S/36e5)%24,I=b(S/6e4)%60,k=b(S/1e3)%60,_=S%1e3}else y=u.getUTCFullYear(),w=u.getUTCMonth(),T=u.getUTCDate(),E=u.getUTCHours(),I=u.getUTCMinutes(),k=u.getUTCSeconds(),_=u.getUTCMilliseconds();u=(y<=0||y>=1e4?(y<0?"-":"+")+x(6,y<0?-y:y):x(4,y))+"-"+x(2,w+1)+"-"+x(2,T)+"T"+x(2,E)+":"+x(2,I)+":"+x(2,k)+"."+x(3,_)+"Z"}else u=null;if(n&&(u=n.call(t,e,u)),null===u)return"null";if((p=s.call(u))==v)return""+u;if(p==m)return u>-1/0&&u<1/0?""+u:"null";if(p==f)return A(""+u);if("object"==typeof u){for(P=d.length;P--;)if(d[P]===u)throw TypeError();if(d.push(u),D=[],N=c,c+=l,p==h){for(O=0,P=u.length;O<P;O++)$=M(O,u,n,i,l,c,d),D.push($===a?"null":$);F=D.length?l?"[\n"+c+D.join(",\n"+c)+"\n"+N+"]":"["+D.join(",")+"]":"[]"}else r(i||u,function(e){var t=M(e,u,n,i,l,c,d);t!==a&&D.push(A(e)+":"+(l?" ":"")+t)}),F=D.length?l?"{\n"+c+D.join(",\n"+c)+"\n"+N+"}":"{"+D.join(",")+"}":"{}";return d.pop(),F}};d.stringify=function(e,t,n){var i,o,r,a;if("function"==typeof t||"object"==typeof t&&t)if((a=s.call(t))==p)o=t;else if(a==h){r={};for(var l,c=0,d=t.length;c<d;l=t[c++],((a=s.call(l))==f||a==m)&&(r[l]=1));}if(n)if((a=s.call(n))==m){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else a==f&&(i=n.length<=10?n:n.slice(0,10));return M("",(l={},l[""]=e,l),o,r,i,"",[])}}if(!n("json-parse")){var _,D,$=String.fromCharCode,O={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},P=function(){throw _=D=null,SyntaxError()},N=function(){for(var e,t,n,i,o,r=D,a=r.length;_<a;)switch(o=r.charCodeAt(_)){case 9:case 10:case 13:case 32:_++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=y?r.charAt(_):r[_],_++,e;case 34:for(e="@",_++;_<a;)if((o=r.charCodeAt(_))<32)P();else if(92==o)switch(o=r.charCodeAt(++_)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=O[o],_++;break;case 117:for(t=++_,n=_+4;_<n;_++)(o=r.charCodeAt(_))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||P();e+=$("0x"+r.slice(t,_));break;default:P()}else{if(34==o)break;for(o=r.charCodeAt(_),t=_;o>=32&&92!=o&&34!=o;)o=r.charCodeAt(++_);e+=r.slice(t,_)}if(34==r.charCodeAt(_))return _++,e;P();default:if(t=_,45==o&&(i=!0,o=r.charCodeAt(++_)),o>=48&&o<=57){for(48==o&&(o=r.charCodeAt(_+1))>=48&&o<=57&&P(),i=!1;_<a&&(o=r.charCodeAt(_))>=48&&o<=57;_++);if(46==r.charCodeAt(_)){for(n=++_;n<a&&(o=r.charCodeAt(n))>=48&&o<=57;n++);n==_&&P(),_=n}if(101==(o=r.charCodeAt(_))||69==o){for(o=r.charCodeAt(++_),43!=o&&45!=o||_++,n=_;n<a&&(o=r.charCodeAt(n))>=48&&o<=57;n++);n==_&&P(),_=n}return+r.slice(t,_)}if(i&&P(),"true"==r.slice(_,_+4))return _+=4,!0;if("false"==r.slice(_,_+5))return _+=5,!1;if("null"==r.slice(_,_+4))return _+=4,null;P()}return"$"},F=function(e){var t,n;if("$"==e&&P(),"string"==typeof e){if("@"==(y?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=N());n||(n=!0))n&&(","==e?"]"==(e=N())&&P():P()),","==e&&P(),t.push(F(e));return t}if("{"==e){for(t={};"}"!=(e=N());n||(n=!0))n&&(","==e?"}"==(e=N())&&P():P()),","!=e&&"string"==typeof e&&"@"==(y?e.charAt(0):e[0])&&":"==N()||P(),t[e.slice(1)]=F(N());return t}P()}return e},L=function(e,t,n){var i=R(e,t,n);i===a?delete e[t]:e[t]=i},R=function(e,t,n){var i,o=e[t];if("object"==typeof o&&o)if(s.call(o)==h)for(i=o.length;i--;)L(o,i,n);else r(o,function(e){L(o,e,n)});return n.call(e,t,o)};d.parse=function(e,t){var n,i;return _=0,D=""+e,n=F(N()),"$"!=N()&&P(),_=D=null,t&&s.call(t)==p?R((i={},i[""]=n,i),"",t):n}}}l&&e(function(){return d})}(this)},{}],48:[function(e,t,n){function i(e,t){var n=[];t=t||0;for(var i=t||0;i<e.length;i++)n[i-t]=e[i];return n}t.exports=i},{}]},{},[1])(1)}),function(){var e,t,n,i,o,r,a,s,l,c,d,u,p,g;p=this,n=/^\s*(?:drop|delete|insert|update|create)\s/i,e="INIT",t="OPEN",g={},d=function(e,t){var n;return n=e,t||(t=0),n||(n=new Error("a plugin had an error but provided no response"),n.code=t),"string"==typeof n&&(n=new Error(e),n.code=t),!n.code&&n.message&&(n.code=t),n.code||n.message||(n=new Error("an unknown error was returned: "+JSON.stringify(n)),n.code=t),n},u=window.setImmediate||function(e){window.setTimeout(e,0)},s=function(e){return function(){var t,n,i;if(i=arguments.length){for(t=[],n=-1;++n<i;)t[n]=arguments[n];return e.call(this,t)}return e.call(this,[])}},o=function(e,t,n){var i;if(!e||!e.name)throw d("Cannot create a SQLitePlugin db instance without a db name");if("string"!=typeof(i=e.name))throw d("sqlite plugin database name must be a string");this.openargs=e,this.dbname=i,this.openSuccess=t,this.openError=n,this.openSuccess||(this.openSuccess=function(){console.log("DB opened: "+i)}),this.openError||(this.openError=function(e){console.log(e.message)}),this.open(this.openSuccess,this.openError)},o.prototype.databaseFeatures={isSQLitePluginDatabase:!0},o.prototype.openDBs={},o.prototype.addTransaction=function(t){g[this.dbname]||(g[this.dbname]={queue:[],inProgress:!1}),g[this.dbname].queue.push(t),this.dbname in this.openDBs&&this.openDBs[this.dbname]!==e?this.startNextTransaction():this.dbname in this.openDBs?console.log("new transaction is waiting for open operation"):console.log("database is closed, new transaction is [stuck] waiting until db is opened again!")},o.prototype.transaction=function(e,t,n){if(!this.openDBs[this.dbname])return void t(d("database not open"));this.addTransaction(new r(this,e,t,n,!0,!1))},o.prototype.readTransaction=function(e,t,n){if(!this.openDBs[this.dbname])return void t(d("database not open"));this.addTransaction(new r(this,e,t,n,!1,!0))},o.prototype.startNextTransaction=function(){var e;e=this,u(function(n){return function(){var i;return n.dbname in n.openDBs&&n.openDBs[n.dbname]===t?(i=g[e.dbname])?void(i.queue.length>0&&!i.inProgress&&(i.inProgress=!0,i.queue.shift().start())):void console.log("cannot start next transaction: database connection is lost"):void console.log("cannot start next transaction: database not open")}}(this))},o.prototype.abortAllPendingTransactions=function(){var e,t,n,i,o;if((o=g[this.dbname])&&o.queue.length>0){for(n=o.queue,e=0,t=n.length;e<t;e++)i=n[e],i.abortFromQ(d("Invalid database handle"));o.queue=[],o.inProgress=!1}},o.prototype.open=function(n,i){var o,r;this.dbname in this.openDBs?(console.log("database already open: "+this.dbname),u(function(e){return function(){n(e)}}(this))):(console.log("OPEN database: "+this.dbname),r=function(e){return function(){var i;e.openDBs[e.dbname]||console.log("database was closed during open operation"),e.dbname in e.openDBs&&(e.openDBs[e.dbname]=t),n&&n(e),(i=g[e.dbname])&&i.queue.length>0&&!i.inProgress&&e.startNextTransaction()}}(this),o=function(e){return function(){console.log("OPEN database: "+e.dbname+" failed, aborting any pending transactions"),i&&i(d("Could not open database")),delete e.openDBs[e.dbname],e.abortAllPendingTransactions()}}(this),this.openDBs[this.dbname]=e,cordova.exec(r,o,"SQLitePlugin","open",[this.openargs]))},o.prototype.close=function(e,t){if(this.dbname in this.openDBs){if(g[this.dbname]&&g[this.dbname].inProgress)return console.log("cannot close: transaction is in progress"),void t(d("database cannot be closed while a transaction is in progress"));console.log("CLOSE database: "+this.dbname),delete this.openDBs[this.dbname],g[this.dbname]?console.log("closing db with transaction queue length: "+g[this.dbname].queue.length):console.log("closing db with no transaction lock state"),cordova.exec(e,t,"SQLitePlugin","close",[{path:this.dbname}])}else console.log("cannot close: database is not open"),t&&u(function(){return t()})},o.prototype.executeSql=function(e,t,n,i){var o,a,s;s=function(e,t){if(n)return n(t)},o=function(e,t){if(i)return i(t)},a=function(n){n.addStatement(e,t,s,o)},this.addTransaction(new r(this,a,null,null,!1,!1))},o.prototype.sqlBatch=function(e,t,n){var i,o,a,s,l;if(!e||e.constructor!==Array)throw d("sqlBatch expects an array");for(i=[],o=0,a=e.length;o<a;o++)if(l=e[o],l.constructor===Array){if(0===l.length)throw d("sqlBatch array element of zero (0) length");i.push({sql:l[0],params:0===l.length?[]:l[1]})}else i.push({sql:l,params:[]});s=function(e){var t,n,o,r;for(r=[],n=0,o=i.length;n<o;n++)t=i[n],r.push(e.addStatement(t.sql,t.params,null,null));return r},this.addTransaction(new r(this,s,n,t,!0,!1))},r=function(e,t,n,i,o,r){if("function"!=typeof t)throw d("transaction expected a function");this.db=e,this.fn=t,this.error=n,this.success=i,this.txlock=o,this.readOnly=r,this.executes=[],o?this.addStatement("BEGIN",[],null,function(e,t){throw d("unable to begin transaction: "+t.message,t.code)}):this.addStatement("SELECT 1",[],null,null)},r.prototype.start=function(){var e;try{this.fn(this),this.run()}catch(t){e=t,g[this.db.dbname].inProgress=!1,this.db.startNextTransaction(),this.error&&this.error(d(e))}},r.prototype.executeSql=function(e,t,i,o){if(console.log("done"),this.finalized)throw{message:"InvalidStateError: DOM Exception 11: This transaction is already finalized. Transactions are committed after its success or failure handlers are called. If you are using a Promise to handle callbacks, be aware that implementations following the A+ standard adhere to run-to-completion semantics and so Promise resolution occurs on a subsequent tick and therefore after the transaction commits.",code:11};if(this.readOnly&&n.test(e))return void this.handleStatementFailure(o,{message:"invalid sql for a read-only transaction"});this.addStatement(e,t,i,o)},r.prototype.addStatement=function(e,t,n,i){var o,r,a,s,l,c;if(s="string"==typeof e?e:e.toString(),a=[],t&&t.constructor===Array)for(o=0,r=t.length;o<r;o++)c=t[o],l=typeof c,a.push(null===c||void 0===c||"number"===l||"string"===l?c:c.toString());this.executes.push({success:n,error:i,sql:s,params:a})},r.prototype.handleStatementSuccess=function(e,t){var n,i;e&&(i=t.rows||[],n={rows:{item:function(e){return i[e]},length:i.length},rowsAffected:t.rowsAffected||0,insertId:t.insertId||void 0},e(this,n))},r.prototype.handleStatementFailure=function(e,t){if(!e)throw d("a statement with no error handler failed: "+t.message,t.code);if(!1!==e(this,t))throw d("a statement error callback did not return false: "+t.message,t.code)},r.prototype.run=function(){var e,t,n,i,o,r,a,s,l,c;for(l=null,a=[],e=this.executes,c=e.length,this.executes=[],s=this,t=function(t,n){return function(i){var o;try{n?s.handleStatementSuccess(e[t].success,i):s.handleStatementFailure(e[t].error,d(i))}catch(e){o=e,l||(l=d(o))}0==--c&&(l?s.abort(l):s.executes.length>0?s.run():s.finish())}},n=0,o={};n<e.length;)r=e[n],o[n]={success:t(n,!0),error:t(n,!1)},a.push({qid:1111,sql:r.sql,params:r.params}),n++;i=function(e){var t,i,r,a,s,l,c;for(i=e.length-1,n=t=0,s=i;0<=s?t<=s:t>=s;n=0<=s?++t:--t)a=e[n],c=a.type,l=a.result,(r=o[n])&&r[c]&&r[c](l)},cordova.exec(i,null,"SQLitePlugin","backgroundExecuteSqlBatch",[{dbargs:{dbname:this.db.dbname},executes:a}])},r.prototype.abort=function(e){var t,n,i;this.finalized||(i=this,n=function(t){g[t.db.dbname].inProgress=!1,t.db.startNextTransaction(),t.error&&t.error(e)},t=function(e,t){g[e.db.dbname].inProgress=!1,e.db.startNextTransaction(),e.error&&e.error(d("error while trying to roll back: "+t.message,t.code))},this.finalized=!0,this.txlock?(this.addStatement("ROLLBACK",[],n,t),this.run()):n(i))},r.prototype.finish=function(){var e,t,n;this.finalized||(n=this,t=function(e){g[e.db.dbname].inProgress=!1,e.db.startNextTransaction(),e.success&&e.success()},e=function(e,t){g[e.db.dbname].inProgress=!1,e.db.startNextTransaction(),e.error&&e.error(d("error while trying to commit: "+t.message,t.code))},this.finalized=!0,this.txlock?(this.addStatement("COMMIT",[],t,e),this.run()):t(n))},r.prototype.abortFromQ=function(e){this.error&&this.error(e)},l=["docs","libs","nosync"],c={default:"nosync",Documents:"docs",Library:"libs"},i={openDatabase:s(function(e){var t,n,i,r;if(e.length<1||!e[0])throw d("Sorry missing mandatory open arguments object in openDatabase call");if(e[0].constructor===String)throw d("Sorry first openDatabase argument must be an object");if(r=e[0],r.location="default",r.name="db",!r.name)throw d("Database name value is missing in openDatabase call");if(!r.iosDatabaseLocation&&!r.location&&0!==r.location)throw d("Database location or iosDatabaseLocation value is now mandatory in openDatabase call");if(r.location&&r.iosDatabaseLocation)throw d("Abiguous: both location or iosDatabaseLocation values are present in openDatabase call");if(!(t=r.location&&"default"===r.location?c.default:r.iosDatabaseLocation?c[r.iosDatabaseLocation]:l[r.location]))throw d("Valid iOS database location could not be determined in openDatabase call");return r.dblocation=t,r.createFromLocation&&1===r.createFromLocation&&(r.createFromResource="1"),r.androidDatabaseImplementation&&2===r.androidDatabaseImplementation&&(r.androidOldDatabaseImplementation=1),r.androidLockWorkaround&&1===r.androidLockWorkaround&&(r.androidBugWorkaround=1),i=null,n=null,e.length>=2&&(i=e[1],e.length>2&&(n=e[2])),new o(r,i,n)}),deleteDatabase:function(e,t,n){var i,r,a;if(i={},e.constructor===String)throw d("Sorry first deleteDatabase argument must be an object");if(!e||!e.name)throw new Error("Please specify db name");if("string"!=typeof(a=e.name))throw d("delete database name must be a string");if(i.path=a,!e.iosDatabaseLocation&&!e.location&&0!==e.location)throw d("Database location or iosDatabaseLocation value is now mandatory in deleteDatabase call");if(e.location&&e.iosDatabaseLocation)throw d("Abiguous: both location or iosDatabaseLocation values are present in deleteDatabase call");if(!(r=e.location&&"default"===e.location?c.default:e.iosDatabaseLocation?c[e.iosDatabaseLocation]:l[e.location]))throw d("Valid iOS database location could not be determined in deleteDatabase call");return i.dblocation=r,delete o.prototype.openDBs[i.path],cordova.exec(t,n,"SQLitePlugin","delete",[i])}},a={DBNAME:"___$$$___litehelpers___$$$___test___$$$___.db",start:function(e,t){return i.deleteDatabase({name:a.DBNAME,location:"default"},function(){return a.start2(e,t)},function(){return a.start2(e,t)})},start2:function(e,t){return i.openDatabase({name:a.DBNAME,location:"default"},function(n){return n.sqlBatch(["CREATE TABLE TestTable(TestColumn);",["INSERT INTO TestTable (TestColumn) VALUES (?);",["test-value"]]],function(){return n.executeSql("SELECT * FROM TestTable",[],function(o){return o.rows?o.rows.length?1!==o.rows.length?void a.finishWithError(t,"Incorrect resutSet.rows.length value: "+o.rows.length+" (expected: 1)"):o.rows.item(0).TestColumn?"test-value"!==o.rows.item(0).TestColumn?void a.finishWithError(t,"Incorrect resutSet.rows.item(0).TestColumn value: "+o.rows.item(0).TestColumn+" (expected: 'test-value')"):n.transaction(function(e){return e.executeSql("UPDATE TestTable SET TestColumn = ?",["new-value"])},function(e){return a.finishWithError(t,"UPDATE transaction error: "+e)},function(){return n.readTransaction(function(e){return e.executeSql("SELECT * FROM TestTable",[],function(e,t){if(!t.rows)throw d("Missing resutSet.rows");if(!t.rows.length)throw d("Missing resutSet.rows.length");if(1!==t.rows.length)throw d("Incorrect resutSet.rows.length value: "+o.rows.length+" (expected: 1)");if(!t.rows.item(0).TestColumn)throw d("Missing resutSet.rows.item(0).TestColumn");if("new-value"!==t.rows.item(0).TestColumn)throw d("Incorrect resutSet.rows.item(0).TestColumn value: "+o.rows.item(0).TestColumn+" (expected: 'test-value')")})},function(e){return a.finishWithError(t,"readTransaction error: "+e)},function(){return n.close(function(){return i.deleteDatabase({name:a.DBNAME,location:"default"},e,function(e){return a.finishWithError(t,"Cleanup error: "+e)})},function(e){return a.finishWithError(t,"close error: "+e)})})}):void a.finishWithError(t,"Missing resutSet.rows.item(0).TestColumn"):void a.finishWithError(t,"Missing resutSet.rows.length"):void a.finishWithError(t,"Missing resutSet.rows")},function(e){return a.finishWithError(t,"SELECT error: "+e)})},function(e){return a.finishWithError(t,"sql batch error: "+e)})},function(e){return a.finishWithError(t,"Open database error: "+e)})},finishWithError:function(e,t){return i.deleteDatabase({name:a.DBNAME,location:"default"},function(){return e(d(t))},function(n){return e(d("Cleanup error: "+n+" for error: "+t))})}},p.sqlitePlugin={sqliteFeatures:{isSQLitePlugin:!0},echoTest:function(e,t){return function(n){return"test-string"===n?e():t("Mismatch: got: '"+n+"' expected 'test-string'")},function(e){return t(e)},cordova.exec(e,t,"SQLitePlugin","echoStringValue",[{value:"test-string"}])},selfTest:a.start,openDatabase:i.openDatabase,deleteDatabase:i.deleteDatabase}}.call(this),function(){angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){angular.module("ui.grid").constant("uiGridConstants",{LOG_DEBUG_MESSAGES:!0,LOG_WARN_MESSAGES:!0,LOG_ERROR_MESSAGES:!0,CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,MODEL_COL_FIELD:/MODEL_COL_FIELD/g,TOOLTIP:/title=\"TOOLTIP\"/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,FUNC_REGEXP:/(\([^)]*\))?$/,DOT_REGEXP:/\./g,APOS_REGEXP:/'/g,BRACKET_REGEXP:/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/,COL_CLASS_PREFIX:"ui-grid-col",events:{GRID_SCROLL:"uiGridScroll",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart",COLUMN_HEADER_CLICK:"uiGridColumnHeaderClick"},keymap:{TAB:9,STRG:17,CAPSLOCK:20,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,PG_UP:33,PG_DOWN:34,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512,SELECT:"select",INPUT:"input"},aggregationTypes:{sum:2,count:4,avg:8,min:16,max:32},CURRENCY_SYMBOLS:["Æ","$","Â£","$","Â¤","Â¥","á","â©","â±","à¸¿","â«"],scrollDirection:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},dataChange:{ALL:"all",EDIT:"edit",ROW:"row",COLUMN:"column",OPTIONS:"options"},scrollbars:{NEVER:0,ALWAYS:1}})}(),angular.module("ui.grid").directive("uiGridCell",["$compile","$parse","gridUtil","uiGridConstants",function(e,t,n,i){return{priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function(t,o,r,a){function s(){(0,t.col.compiledElementFn)(t,function(e,t){o.append(e)})}if(a&&t.col.compiledElementFn)s();else if(a&&!t.col.compiledElementFn)t.col.getCompiledElementFn().then(function(e){e(t,function(e,t){o.append(e)})});else{var l=t.col.cellTemplate.replace(i.MODEL_COL_FIELD,"row.entity."+n.preEval(t.col.field)).replace(i.COL_FIELD,"grid.getCellValue(row, col)"),c=e(l)(t);o.append(c)}},post:function(e,t,n,o){var r=e.col.getColClass(!1);t.addClass(r);var a,s=function(n){var i=t;a&&(i.removeClass(a),a=null),a=angular.isFunction(e.col.cellClass)?e.col.cellClass(e.grid,e.row,e.col,e.rowRenderIndex,e.colRenderIndex):e.col.cellClass,i.addClass(a)};e.col.cellClass&&s();var l=e.grid.registerDataChangeCallback(s,[i.dataChange.COLUMN,i.dataChange.EDIT]),c=function(n,i){if(n!==i){(a||e.col.cellClass)&&s();var o=e.col.getColClass(!1);o!==r&&(t.removeClass(r),t.addClass(o),r=o)}},d=e.$watch("row",c),u=function(){l(),d()};e.$on("$destroy",u),t.on("$destroy",u)}}}}}]),function(){angular.module("ui.grid").service("uiGridColumnMenuService",["i18nService","uiGridConstants","gridUtil",function(e,t,n){var i={initialize:function(e,t){e.grid=t.grid,t.columnMenuScope=e,e.menuShown=!1},setColMenuItemWatch:function(e){var t=e.$watch("col.menuItems",function(t){void 0!==t&&t&&angular.isArray(t)?(t.forEach(function(t){void 0!==t.context&&t.context||(t.context={}),t.context.col=e.col}),e.menuItems=e.defaultMenuItems.concat(t)):e.menuItems=e.defaultMenuItems});e.$on("$destroy",t)},sortable:function(e){return!!(e.grid.options.enableSorting&&void 0!==e.col&&e.col&&e.col.enableSorting)},isActiveSort:function(e,t){return void 0!==e.col&&void 0!==e.col.sort&&void 0!==e.col.sort.direction&&e.col.sort.direction===t},suppressRemoveSort:function(e){return!(!e.col||!e.col.suppressRemoveSort)},hideable:function(e){return void 0===e.col||!e.col||!e.col.colDef||!1!==e.col.colDef.enableHiding},getDefaultMenuItems:function(n){return[{title:e.getSafeText("sort.ascending"),icon:"ui-grid-icon-sort-alt-up",action:function(e){e.stopPropagation(),n.sortColumn(e,t.ASC)},shown:function(){return i.sortable(n)},active:function(){return i.isActiveSort(n,t.ASC)}},{title:e.getSafeText("sort.descending"),icon:"ui-grid-icon-sort-alt-down",action:function(e){e.stopPropagation(),n.sortColumn(e,t.DESC)},shown:function(){return i.sortable(n)},active:function(){return i.isActiveSort(n,t.DESC)}},{title:e.getSafeText("sort.remove"),icon:"ui-grid-icon-cancel",action:function(e){e.stopPropagation(),n.unsortColumn()},shown:function(){return i.sortable(n)&&void 0!==n.col&&void 0!==n.col.sort&&void 0!==n.col.sort.direction&&null!==n.col.sort.direction&&!i.suppressRemoveSort(n)}},{title:e.getSafeText("column.hide"),icon:"ui-grid-icon-cancel",shown:function(){return i.hideable(n)},action:function(e){e.stopPropagation(),n.hideColumn()}}]},getColumnElementPosition:function(e,t,i){var o={};return o.left=i[0].offsetLeft,o.top=i[0].offsetTop,o.parentLeft=i[0].offsetParent.offsetLeft,o.offset=0,t.grid.options.offsetLeft&&(o.offset=t.grid.options.offsetLeft),o.height=n.elementHeight(i,!0),o.width=n.elementWidth(i,!0),o},repositionMenu:function(e,t,i,o,r){var a=o[0].querySelectorAll(".ui-grid-menu"),s=n.closestElm(r,".ui-grid-render-container"),l=s.getBoundingClientRect().left-e.grid.element[0].getBoundingClientRect().left,c=s.querySelectorAll(".ui-grid-viewport")[0].scrollLeft,d=t.lastMenuWidth?t.lastMenuWidth:e.lastMenuWidth?e.lastMenuWidth:170,u=t.lastMenuPaddingRight?t.lastMenuPaddingRight:e.lastMenuPaddingRight?e.lastMenuPaddingRight:10;if(0!==a.length){var p=a[0].querySelectorAll(".ui-grid-menu-mid");0===p.length||angular.element(p).hasClass("ng-hide")||(d=n.elementWidth(a,!0),e.lastMenuWidth=d,t.lastMenuWidth=d,u=parseInt(n.getStyles(angular.element(a)[0]).paddingRight,10),e.lastMenuPaddingRight=u,t.lastMenuPaddingRight=u)}var g=i.left+l-c+i.parentLeft+i.width-d+u;g<i.offset&&(g=i.offset),o.css("left",g+"px"),o.css("top",i.top+i.height+"px")}};return i}]).directive("uiGridColumnMenu",["$timeout","gridUtil","uiGridConstants","uiGridColumnMenuService","$document",function(e,t,n,i,o){return{priority:0,scope:!0,require:"^uiGrid",templateUrl:"ui-grid/uiGridColumnMenu",replace:!0,link:function(r,a,s,l){i.initialize(r,l),r.defaultMenuItems=i.getDefaultMenuItems(r),r.menuItems=r.defaultMenuItems,i.setColMenuItemWatch(r),r.showMenu=function(e,t,n){r.col=e;var o=i.getColumnElementPosition(r,e,t);r.menuShown?(r.colElement=t,r.colElementPosition=o,r.hideThenShow=!0,r.$broadcast("hide-menu",{originalEvent:n})):(r.menuShown=!0,i.repositionMenu(r,e,o,a,t),r.colElement=t,r.colElementPosition=o,r.$broadcast("show-menu",{originalEvent:n}))},r.hideMenu=function(e){r.menuShown=!1,e||r.$broadcast("hide-menu")},r.$on("menu-hidden",function(){r.hideThenShow?(delete r.hideThenShow,i.repositionMenu(r,r.col,r.colElementPosition,a,r.colElement),r.$broadcast("show-menu"),r.menuShown=!0):(r.hideMenu(!0),r.col&&t.focus.bySelector(o,".ui-grid-header-cell."+r.col.getColClass()+" .ui-grid-column-menu-button",r.col.grid,!1))}),r.$on("menu-shown",function(){e(function(){i.repositionMenu(r,r.col,r.colElementPosition,a,r.colElement),t.focus.bySelector(o,".ui-grid-menu-items .ui-grid-menu-item",!0),delete r.colElementPosition,delete r.columnElement},200)}),r.sortColumn=function(e,t){e.stopPropagation(),r.grid.sortColumn(r.col,t,!0).then(function(){r.grid.refresh(),r.hideMenu()})},r.unsortColumn=function(){r.col.unsort(),r.grid.refresh(),r.hideMenu()};var c=function(){e(function(){var e,n=function(){return t.focus.byId("grid-menu",r.grid)};r.grid.columns.some(function(t,n){if(angular.equals(t,r.col))return e=n,!0});var i;if(r.grid.columns.some(function(t,n){if(!t.visible)return!1;if(n<e)i=t;else{if(n>e&&!i)return i=t,!0;if(n>e&&i)return!0}}),i){var a=i.getColClass();t.focus.bySelector(o,".ui-grid-header-cell."+a+" .ui-grid-header-cell-primary-focus",!0).then(angular.noop,function(e){if("canceled"!==e)return n()})}else n()})};r.hideColumn=function(){r.col.colDef.visible=!1,r.col.visible=!1,r.grid.queueGridRefresh(),r.hideMenu(),r.grid.api.core.notifyDataChange(n.dataChange.COLUMN),r.grid.api.core.raise.columnVisibilityChanged(r.col),c()}},controller:["$scope",function(e){var t=this;e.$watch("menuItems",function(e){t.menuItems=e})}]}}])}(),function(){angular.module("ui.grid").directive("uiGridFilter",["$compile","$templateCache","i18nService","gridUtil",function(e,t,n,i){return{compile:function(){return{pre:function(t,n,i,o){t.col.updateFilters=function(i){if(n.children().remove(),i){var o=t.col.filterHeaderTemplate;n.append(e(o)(t))}},t.$on("$destroy",function(){delete t.col.updateFilters})},post:function(e,t,o,r){e.aria=n.getSafeText("headerCell.aria"),e.removeFilter=function(e,n){e.term=null,i.focus.bySelector(t,".ui-grid-filter-input-"+n)}}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridFooterCell",["$timeout","gridUtil","uiGridConstants","$compile",function(e,t,n,i){return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},replace:!0,require:"^uiGrid",compile:function(e,t,o){return{pre:function(e,t,n,o){var r=i(e.col.footerCellTemplate)(e);t.append(r)},post:function(e,t,i,o){e.grid=o.grid;var r=e.col.getColClass(!1);t.addClass(r);var a,s=function(n){var i=t;a&&(i.removeClass(a),a=null),a=angular.isFunction(e.col.footerCellClass)?e.col.footerCellClass(e.grid,e.row,e.col,e.rowRenderIndex,e.colRenderIndex):e.col.footerCellClass,i.addClass(a)};e.col.footerCellClass&&s(),e.col.updateAggregationValue();var l=e.grid.registerDataChangeCallback(s,[n.dataChange.COLUMN]);e.grid.api.core.on.rowsRendered(e,e.col.updateAggregationValue),e.grid.api.core.on.rowsRendered(e,s),e.$on("$destroy",l)}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(e,t,n,i,o){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(e,n){return{pre:function(e,n,o,r){var a=r[0],s=r[1];e.grid=a.grid,e.colContainer=s.colContainer,s.footer=n;var l=e.grid.options.footerTemplate;i.getTemplate(l).then(function(i){var o=angular.element(i),r=t(o)(e);if(n.append(r),s){var a=n[0].getElementsByClassName("ui-grid-footer-viewport")[0];a&&(s.footerViewport=a)}})},post:function(e,t,n,o){var r=o[0],a=o[1];r.grid;i.disableAnimations(t),a.footer=t;var s=t[0].getElementsByClassName("ui-grid-footer-viewport")[0];s&&(a.footerViewport=s)}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(e,t,n,i,o){return{restrict:"EA",replace:!0,require:"^uiGrid",scope:!0,compile:function(e,n){return{pre:function(e,n,o,r){e.grid=r.grid;var a=e.grid.options.gridFooterTemplate;i.getTemplate(a).then(function(i){var o=angular.element(i),r=t(o)(e);n.append(r)})},post:function(e,t,n,i){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridGroupPanel",["$compile","uiGridConstants","gridUtil",function(e,t,n){return{restrict:"EA",replace:!0,require:"?^uiGrid",scope:!1,compile:function(t,i){return{pre:function(t,i,o,r){var a=t.grid.options.groupPanelTemplate||"ui-grid/ui-grid-group-panel";n.getTemplate(a).then(function(n){var o=angular.element(n),r=e(o)(t);i.append(r)})},post:function(e,t,n,i){t.bind("$destroy",function(){})}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridHeaderCell",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","ScrollEvent","i18nService",function(e,t,n,i,o,r,a,s){var l=500,c=500;return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:["^uiGrid","^uiGridRenderContainer"],replace:!0,compile:function(){return{pre:function(t,n,i){var o=e(t.col.headerCellTemplate)(t);n.append(o)},post:function(e,n,o,a){var d=a[0],u=a[1];e.i18n={headerCell:s.getSafeText("headerCell"),sort:s.getSafeText("sort")},e.isSortPriorityVisible=function(){return angular.isNumber(e.col.sort.priority)&&e.grid.columns.some(function(t,n){return angular.isNumber(t.sort.priority)&&t!==e.col})},e.getSortDirectionAriaLabel=function(){var t=e.col,n=t.sort.direction===r.ASC?e.i18n.sort.ascending:t.sort.direction===r.DESC?e.i18n.sort.descending:e.i18n.sort.none,i=n;return e.isSortPriorityVisible()&&(i=i+". "+e.i18n.headerCell.priority+" "+t.sort.priority),i},e.grid=d.grid,e.renderContainer=d.grid.renderContainers[u.containerId];var p=e.col.getColClass(!1);n.addClass(p),e.menuShown=!1,e.asc=r.ASC,e.desc=r.DESC;var g,m,f=(angular.element(n[0].querySelectorAll(".ui-grid-header-cell-menu")),angular.element(n[0].querySelectorAll(".ui-grid-cell-contents"))),h=[];e.downFn=function(o){o.stopPropagation(),void 0!==o.originalEvent&&void 0!==o.originalEvent&&(o=o.originalEvent),o.button&&0!==o.button||(m=o.pageX,e.mousedownStartTime=(new Date).getTime(),e.mousedownTimeout=t(function(){},l),e.mousedownTimeout.then(function(){e.colMenu&&d.columnMenuScope.showMenu(e.col,n,o)}),d.fireEvent(r.events.COLUMN_HEADER_CLICK,{event:o,columnName:e.col.colDef.name}),e.offAllEvents(),"touchstart"===o.type?(i.on("touchend",e.upFn),i.on("touchmove",e.moveFn)):"mousedown"===o.type&&(i.on("mouseup",e.upFn),i.on("mousemove",e.moveFn)))},e.upFn=function(n){n.stopPropagation(),t.cancel(e.mousedownTimeout),e.offAllEvents(),e.onDownEvents(n.type),(new Date).getTime()-e.mousedownStartTime>l||e.sortable&&e.handleClick(n)},e.moveFn=function(n){0!=n.pageX-m&&(t.cancel(e.mousedownTimeout),e.offAllEvents(),e.onDownEvents(n.type))},e.clickFn=function(t){t.stopPropagation(),f.off("click",e.clickFn)},e.offAllEvents=function(){f.off("touchstart",e.downFn),f.off("mousedown",e.downFn),i.off("touchend",e.upFn),i.off("mouseup",e.upFn),i.off("touchmove",e.moveFn),i.off("mousemove",e.moveFn),f.off("click",e.clickFn)},e.onDownEvents=function(n){switch(n){case"touchmove":case"touchend":f.on("click",e.clickFn),f.on("touchstart",e.downFn),t(function(){f.on("mousedown",e.downFn)},c);break;case"mousemove":case"mouseup":f.on("click",e.clickFn),f.on("mousedown",e.downFn),t(function(){f.on("touchstart",e.downFn)},c);break;default:f.on("click",e.clickFn),f.on("touchstart",e.downFn),f.on("mousedown",e.downFn)}};var v=function(i){var o=n;g&&(o.removeClass(g),g=null),g=angular.isFunction(e.col.headerCellClass)?e.col.headerCellClass(e.grid,e.row,e.col,e.rowRenderIndex,e.colRenderIndex):e.col.headerCellClass,o.addClass(g),t(function(){var t=e.grid.renderContainers.right?e.grid.renderContainers.right:e.grid.renderContainers.body;e.isLastCol=e.col===t.visibleColumnCache[t.visibleColumnCache.length-1]}),d.grid.options.enableSorting&&e.col.enableSorting?e.sortable=!0:e.sortable=!1;var a=e.filterable;d.grid.options.enableFiltering&&e.col.enableFiltering?e.filterable=!0:e.filterable=!1,a!==e.filterable&&(void 0!==e.col.updateFilters&&e.col.updateFilters(e.filterable),e.filterable?(e.col.filters.forEach(function(t,n){h.push(e.$watch("col.filters["+n+"].term",function(e,t){e!==t&&(d.grid.api.core.raise.filterChanged(),d.grid.api.core.notifyDataChange(r.dataChange.COLUMN),d.grid.queueGridRefresh())}))}),e.$on("$destroy",function(){h.forEach(function(e){e()})})):h.forEach(function(e){e()})),e.col.grid.options&&!1!==e.col.grid.options.enableColumnMenus&&e.col.colDef&&!1!==e.col.colDef.enableColumnMenu?e.colMenu=!0:e.colMenu=!1,e.offAllEvents(),(e.sortable||e.colMenu)&&(e.onDownEvents(),e.$on("$destroy",function(){e.offAllEvents()}))};v();var y=e.grid.registerDataChangeCallback(v,[r.dataChange.COLUMN]);e.$on("$destroy",y),e.handleClick=function(t){var n=!1;t.shiftKey&&(n=!0),d.grid.sortColumn(e.col,n).then(function(){d.columnMenuScope&&d.columnMenuScope.hideMenu(),d.grid.refresh()})},e.toggleMenu=function(t){t.stopPropagation(),d.columnMenuScope.menuShown&&d.columnMenuScope.col===e.col?d.columnMenuScope.hideMenu():d.columnMenuScope.showMenu(e.col,n)}}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridHeader",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout","ScrollEvent",function(e,t,n,i,o,r){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(e,n){return{pre:function(e,n,o,a){function s(){d.header=d.colContainer.header=n;var e=n[0].getElementsByClassName("ui-grid-header-canvas");e.length>0?d.headerCanvas=d.colContainer.headerCanvas=e[0]:d.headerCanvas=null}function l(e){if(!c.grid.isScrollingHorizontally){var t=i.normalizeScrollLeft(d.headerViewport,c.grid),n=d.colContainer.scrollHorizontal(t),o=new r(c.grid,null,d.colContainer,r.Sources.ViewPortScroll);o.newScrollLeft=t,n>-1&&(o.x={percentage:n}),c.grid.scrollContainers(null,o)}}var c=a[0],d=a[1];e.grid=c.grid,e.colContainer=d.colContainer,s();var u;u=e.grid.options.showHeader?e.grid.options.headerTemplate?e.grid.options.headerTemplate:"ui-grid/ui-grid-header":"ui-grid/ui-grid-no-header",i.getTemplate(u).then(function(i){var o=angular.element(i),r=t(o)(e);if(n.replaceWith(r),n=r,s(),d){var a=n[0].getElementsByClassName("ui-grid-header-viewport")[0];a&&(d.headerViewport=a,angular.element(a).on("scroll",l),e.$on("$destroy",function(){angular.element(a).off("scroll",l)}))}e.grid.queueRefresh()})},post:function(e,t,n,o){function r(){var e=s.colContainer.visibleColumnCache,t="",n=0;return e.forEach(function(e){t+=e.getColClassDefinition(),n+=e.drawnWidth}),s.colContainer.canvasWidth=n,t}var a=o[0],s=o[1];a.grid,i.disableAnimations(t),s.header=t;var l=t[0].getElementsByClassName("ui-grid-header-viewport")[0];l&&(s.headerViewport=l),a&&a.grid.registerStyleComputation({priority:15,func:r})}}}}}])}(),function(){angular.module("ui.grid").service("uiGridGridMenuService",["gridUtil","i18nService","uiGridConstants",function(e,t,n){var i={initialize:function(e,t){t.gridMenuScope=e,e.grid=t,e.registeredMenuItems=[],e.$on("$destroy",function(){e.grid&&e.grid.gridMenuScope&&(e.grid.gridMenuScope=null),e.grid&&(e.grid=null),e.registeredMenuItems&&(e.registeredMenuItems=null)}),e.registeredMenuItems=[],t.api.registerMethod("core","addToGridMenu",i.addToGridMenu),t.api.registerMethod("core","removeFromGridMenu",i.removeFromGridMenu)},addToGridMenu:function(t,n){angular.isArray(n)?t.gridMenuScope?(t.gridMenuScope.registeredMenuItems=t.gridMenuScope.registeredMenuItems?t.gridMenuScope.registeredMenuItems:[],t.gridMenuScope.registeredMenuItems=t.gridMenuScope.registeredMenuItems.concat(n)):e.logError("Asked to addToGridMenu, but gridMenuScope not present.  Timing issue?  Please log issue with ui-grid"):e.logError("addToGridMenu: menuItems must be an array, and is not, not adding any items")},removeFromGridMenu:function(t,n){var i=-1;t&&t.gridMenuScope&&t.gridMenuScope.registeredMenuItems.forEach(function(t,o){t.id===n&&(i>-1?e.logError("removeFromGridMenu: found multiple items with the same id, removing only the last"):i=o)}),i>-1&&t.gridMenuScope.registeredMenuItems.splice(i,1)},getMenuItems:function(n){var o=[];n.grid.options.gridMenuCustomItems&&(angular.isArray(n.grid.options.gridMenuCustomItems)?o=o.concat(n.grid.options.gridMenuCustomItems):e.logError("gridOptions.gridMenuCustomItems must be an array, and is not"));var r=[{title:t.getSafeText("gridMenu.clearAllFilters"),action:function(e){n.grid.clearAllFilters(void 0,!0,void 0)},shown:function(){return n.grid.options.enableFiltering},order:100}];return o=o.concat(r),o=o.concat(n.registeredMenuItems),!1!==n.grid.options.gridMenuShowHideColumns&&(o=o.concat(i.showHideColumns(n))),o.sort(function(e,t){return e.order-t.order}),o},showHideColumns:function(e){var n=[];return e.grid.options.columnDefs&&0!==e.grid.options.columnDefs.length&&0!==e.grid.columns.length?(n.push({title:t.getSafeText("gridMenu.columns"),order:300}),e.grid.options.gridMenuTitleFilter=e.grid.options.gridMenuTitleFilter?e.grid.options.gridMenuTitleFilter:function(e){return e},e.grid.options.columnDefs.forEach(function(t,o){if(!1!==t.enableHiding){var r={icon:"ui-grid-icon-ok",action:function(e){e.stopPropagation(),i.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!0===this.context.gridCol.colDef.visible||void 0===this.context.gridCol.colDef.visible},context:{gridCol:e.grid.getColumn(t.name||t.field)},leaveOpen:!0,order:301+2*o};i.setMenuItemTitle(r,t,e.grid),n.push(r),r={icon:"ui-grid-icon-cancel",action:function(e){e.stopPropagation(),i.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!(!0===this.context.gridCol.colDef.visible||void 0===this.context.gridCol.colDef.visible)},context:{gridCol:e.grid.getColumn(t.name||t.field)},leaveOpen:!0,order:301+2*o+1},i.setMenuItemTitle(r,t,e.grid),n.push(r)}}),n):n},setMenuItemTitle:function(t,n,i){var o=i.options.gridMenuTitleFilter(n.displayName||e.readableColumnName(n.name)||n.field);"string"==typeof o?t.title=o:o.then?(t.title="",o.then(function(e){t.title=e},function(e){t.title=e})):(e.logError("Expected gridMenuTitleFilter to return a string or a promise, it has returned neither, bad config"),t.title="badconfig")},toggleColumnVisibility:function(e){e.colDef.visible=!(!0===e.colDef.visible||void 0===e.colDef.visible),e.grid.refresh(),e.grid.api.core.notifyDataChange(n.dataChange.COLUMN),e.grid.api.core.raise.columnVisibilityChanged(e)}};return i}]).directive("uiGridMenuButton",["gridUtil","uiGridConstants","uiGridGridMenuService","i18nService",function(e,t,n,i){return{priority:0,scope:!0,require:["^uiGrid"],templateUrl:"ui-grid/ui-grid-menu-button",replace:!0,link:function(t,o,r,a){var s=a[0];t.i18n={aria:i.getSafeText("gridMenu.aria")},n.initialize(t,s.grid),t.shown=!1,t.toggleMenu=function(){t.shown?(t.$broadcast("hide-menu"),t.shown=!1):(t.menuItems=n.getMenuItems(t),t.$broadcast("show-menu"),t.shown=!0)},t.$on("menu-hidden",function(){t.shown=!1,e.focus.bySelector(o,".ui-grid-icon-container")})}}}])}(),function(){angular.module("ui.grid").directive("uiGridMenu",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","i18nService",function(e,t,n,i,o,r,a){return{priority:0,scope:{menuItems:"=",autoHide:"=?"},require:"?^uiGrid",templateUrl:"ui-grid/uiGridMenu",replace:!1,link:function(e,i,s,l){var c;e.dynamicStyles="",l&&(c=l.grid.gridHeight-30,e.dynamicStyles=[".grid"+l.grid.id+" .ui-grid-menu-mid {","max-height: "+c+"px;","}"].join(" ")),e.i18n={close:a.getSafeText("columnMenu.close")},e.showMenu=function(n,r){e.shown?e.shownMid||(e.shownMid=!0,e.$emit("menu-shown")):(e.shown=!0,t(function(){e.shownMid=!0,e.$emit("menu-shown")}));var a="click";r&&r.originalEvent&&r.originalEvent.type&&"touchstart"===r.originalEvent.type&&(a=r.originalEvent.type),angular.element(document).off("click touchstart",d),i.off("keyup",u),i.off("keydown",p),t(function(){angular.element(document).on(a,d),i.on("keyup",u),i.on("keydown",p)}),o.focus.bySelector(i,"button[type=button]",!0)},e.hideMenu=function(n){e.shown&&(e.shownMid=!1,t(function(){e.shownMid||(e.shown=!1,e.$emit("menu-hidden"))},200)),angular.element(document).off("click touchstart",d),i.off("keyup",u),i.off("keydown",p)},e.$on("hide-menu",function(t,n){e.hideMenu(t,n)}),e.$on("show-menu",function(t,n){e.showMenu(t,n)});var d=function(){e.shown&&e.$apply(function(){e.hideMenu()})},u=function(t){27===t.keyCode&&e.hideMenu()},p=function(e){var t=function(t){return t.focus(),e.preventDefault(),!1};if(9===e.keyCode){var n,o,r=i[0].querySelectorAll("button:not(.ng-hide)");r.length>0&&(n=r[0],o=r[r.length-1],e.target!==o||e.shiftKey?e.target===n&&e.shiftKey&&t(o):t(n))}};void 0!==e.autoHide&&void 0!==e.autoHide||(e.autoHide=!0),e.autoHide&&angular.element(n).on("resize",d),e.$on("$destroy",function(){angular.element(document).off("click touchstart",d)}),e.$on("$destroy",function(){angular.element(n).off("resize",d)}),l&&e.$on("$destroy",l.grid.api.core.on.scrollBegin(e,d)),e.$on("$destroy",e.$on(r.events.ITEM_DRAGGING,d))}}}]).directive("uiGridMenuItem",["gridUtil","$compile","i18nService",function(e,t,n){return{priority:0,scope:{name:"=",active:"=",action:"=",icon:"=",shown:"=",context:"=",templateUrl:"=",leaveOpen:"=",screenReaderOnly:"="},require:["?^uiGrid"],templateUrl:"ui-grid/uiGridMenuItem",replace:!1,compile:function(){return{pre:function(n,i){n.templateUrl&&e.getTemplate(n.templateUrl).then(function(e){var o=angular.element(e),r=t(o)(n);i.replaceWith(r)})},post:function(t,i,o,r){var a=r[0];void 0!==t.shown&&null!==t.shown||(t.shown=function(){return!0}),t.itemShown=function(){var e={};return t.context&&(e.context=t.context),void 0!==a&&a&&(e.grid=a.grid),t.shown.call(e)},t.itemAction=function(n,o){if(e.logDebug("itemAction"),n.stopPropagation(),"function"==typeof t.action){var r={};t.context&&(r.context=t.context),void 0!==a&&a&&(r.grid=a.grid),t.action.call(r,n,o),t.leaveOpen?e.focus.bySelector(angular.element(e.closestElm(i,".ui-grid-menu-items")),"button[type=button]",!0):t.$emit("hide-menu")}},t.i18n=n.get()}}}}}])}(),function(){var e=angular.module("ui.grid");angular.forEach([{tag:"Src",method:"attr"},{tag:"Text",method:"text"},{tag:"Href",method:"attr"},{tag:"Class",method:"addClass"},{tag:"Html",method:"html"},{tag:"Alt",method:"attr"},{tag:"Style",method:"css"},{tag:"Value",method:"attr"},{tag:"Id",method:"attr"},{tag:"Id",directiveName:"IdGrid",method:"attr",appendGridId:!0},{tag:"Title",method:"attr"},{tag:"Label",method:"attr",aria:!0},{tag:"Labelledby",method:"attr",aria:!0},{tag:"Labelledby",directiveName:"LabelledbyGrid",appendGridId:!0,method:"attr",aria:!0},{tag:"Describedby",method:"attr",aria:!0},{tag:"Describedby",directiveName:"DescribedbyGrid",appendGridId:!0,method:"attr",aria:!0}],function(t){var n="uiGridOneBind",i=(t.aria?n+"Aria":n)+(t.directiveName?t.directiveName:t.tag);e.directive(i,["gridUtil",function(e){return{restrict:"A",require:["?uiGrid","?^uiGrid"],link:function(n,o,r,a){var s=function(t){var o;if(n.grid)o=n.grid;else if(n.col&&n.col.grid)o=n.col.grid;else if(!a.some(function(e){if(e&&e.grid)return o=e.grid,!0}))throw e.logError("["+i+"] A valid grid could not be found to bind id. Are you using this directive within the correct scope? Trying to generate id: [gridID]-"+t),new Error("No valid grid could be found");if(o){new RegExp(o.id.toString()).test(t)||(t=o.id.toString()+"-"+t)}return t},l=n.$watch(r[i],function(e){if(e){if(t.appendGridId){var n=null;angular.forEach(e.split(" "),function(e){n=(n?n+" ":"")+s(e)}),e=n}switch(t.method){case"attr":t.aria?o[t.method]("aria-"+t.tag.toLowerCase(),e):o[t.method](t.tag.toLowerCase(),e);break;case"addClass":if(angular.isObject(e)&&!angular.isArray(e)){var i=[],r=!1;if(angular.forEach(e,function(e,t){null!==e&&void 0!==e&&(r=!0,e&&i.push(t))}),!r)return;e=i}if(!e)return;o.addClass(angular.isArray(e)?e.join(" "):e);break;default:o[t.method](e)}l()}},!0)}}}])})}(),function(){var e=angular.module("ui.grid");e.directive("uiGridRenderContainer",["$timeout","$document","uiGridConstants","gridUtil","ScrollEvent",function(e,t,n,i,o){return{replace:!0,transclude:!0,templateUrl:"ui-grid/uiGridRenderContainer",require:["^uiGrid","uiGridRenderContainer"],scope:{containerId:"=",rowContainerName:"=",colContainerName:"=",bindScrollHorizontal:"=",bindScrollVertical:"=",enableVerticalScrollbar:"=",enableHorizontalScrollbar:"="},controller:"uiGridRenderContainer as RenderContainer",compile:function(){return{pre:function(e,t,n,i){var o=i[0],r=i[1],a=e.grid=o.grid;if(!e.rowContainerName)throw"No row render container name specified";if(!e.colContainerName)throw"No column render container name specified";if(!a.renderContainers[e.rowContainerName])throw"Row render container '"+e.rowContainerName+"' is not registered.";if(!a.renderContainers[e.colContainerName])throw"Column render container '"+e.colContainerName+"' is not registered.";var s=e.rowContainer=a.renderContainers[e.rowContainerName],l=e.colContainer=a.renderContainers[e.colContainerName];r.containerId=e.containerId,r.rowContainer=s,r.colContainer=l},post:function(e,t,n,r){function a(){var t="",n=u.canvasWidth,i=u.getViewportWidth(),o=d.getCanvasHeight(),r=d.getViewportHeight();u.needsHScrollbarPlaceholder()&&(r-=c.scrollbarHeight);var a,l;return a=l=u.getHeaderViewportWidth(),t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-canvas { width: "+n+"px; height: "+o+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-canvas { width: "+(n+c.scrollbarWidth)+"px; }",m.explicitHeaderCanvasHeight?t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-canvas { height: "+m.explicitHeaderCanvasHeight+"px; }":t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-canvas { height: inherit; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-viewport { width: "+i+"px; height: "+r+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-viewport { width: "+a+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-footer-canvas { width: "+(n+c.scrollbarWidth)+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-footer-viewport { width: "+l+"px; }"}var s=r[0],l=r[1],c=s.grid,d=l.rowContainer,u=l.colContainer,p=null,g=null,m=c.renderContainers[e.containerId];t.addClass("ui-grid-render-container-"+e.containerId),i.on.mousewheel(t,function(e){var t=new o(c,d,u,o.Sources.RenderContainerMouseWheel);if(0!==e.deltaY){var n=-1*e.deltaY*e.deltaFactor;p=l.viewport[0].scrollTop,t.verticalScrollLength=d.getVerticalScrollLength();var r=(p+n)/t.verticalScrollLength;r>=1&&p<t.verticalScrollLength&&(l.viewport[0].scrollTop=t.verticalScrollLength),r<0?r=0:r>1&&(r=1),t.y={percentage:r,pixels:n}}if(0!==e.deltaX){var a=e.deltaX*e.deltaFactor;g=i.normalizeScrollLeft(l.viewport,c),t.horizontalScrollLength=u.getCanvasWidth()-u.getViewportWidth();var s=(g+a)/t.horizontalScrollLength;s<0?s=0:s>1&&(s=1),t.x={percentage:s,pixels:a}}0!==e.deltaY&&(t.atTop(p)||t.atBottom(p))||0!==e.deltaX&&(t.atLeft(g)||t.atRight(g))||(e.preventDefault(),e.stopPropagation(),t.fireThrottledScrollingEvent("",t))}),t.bind("$destroy",function(){t.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(e){t.unbind(e)})}),s.grid.registerStyleComputation({priority:6,func:a})}}}}}]),e.controller("uiGridRenderContainer",["$scope","gridUtil",function(e,t){}])}(),function(){angular.module("ui.grid").directive("uiGridRow",["gridUtil",function(e){return{replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:{row:"=uiGridRow",rowRenderIndex:"="},compile:function(){return{pre:function(e,t,n,i){function o(){e.row.getRowTemplateFn.then(function(n){var i=e.$new();n(i,function(e,n){s&&(s.remove(),l.$destroy()),t.empty().append(e),s=e,l=i})})}var r=i[0],a=i[1];r.grid;e.grid=r.grid,e.colContainer=a.colContainer;var s,l;o(),e.$watch("row.getRowTemplateFn",function(e,t){e!==t&&o()})},post:function(e,t,n,i){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridStyle",["gridUtil","$interpolate",function(e,t){return{link:function(e,n,i,o){var r=t(n.text(),!0);r&&e.$watch(r,function(e){n.text(e)})}}}])}(),function(){angular.module("ui.grid").directive("uiGridViewport",["gridUtil","ScrollEvent","uiGridConstants","$log",function(e,t,n,i){return{replace:!0,scope:{},controllerAs:"Viewport",templateUrl:"ui-grid/uiGridViewport",require:["^uiGrid","^uiGridRenderContainer"],link:function(n,i,o,r){function a(o){var r=i[0].scrollTop,a=e.normalizeScrollLeft(i,f),s=g.scrollVertical(r),l=m.scrollHorizontal(a),c=new t(f,g,m,t.Sources.ViewPortScroll);c.newScrollLeft=a,c.newScrollTop=r,l>-1&&(c.x={percentage:l}),s>-1&&(c.y={percentage:s}),f.scrollContainers(n.$parent.containerId,c)}function s(e){p.prevScrollArgs=e;var t=e.getNewScrollTop(g,p.viewport);i[0].scrollTop=t}function l(t){p.prevScrollArgs=t;var n=t.getNewScrollLeft(m,p.viewport);i[0].scrollLeft=e.denormalizeScrollLeft(p.viewport,n,f)}function c(t){var n=t.getNewScrollLeft(m,p.viewport);p.headerViewport&&(p.headerViewport.scrollLeft=e.denormalizeScrollLeft(p.viewport,n,f))}function d(t){var n=t.getNewScrollLeft(m,p.viewport);p.footerViewport&&(p.footerViewport.scrollLeft=e.denormalizeScrollLeft(p.viewport,n,f))}var u=r[0],p=r[1];n.containerCtrl=p;var g=p.rowContainer,m=p.colContainer,f=u.grid;n.grid=u.grid,n.rowContainer=p.rowContainer,n.colContainer=p.colContainer,p.viewport=i,i.on("scroll",a);n.$parent.bindScrollVertical&&f.addVerticalScrollSync(n.$parent.containerId,s),n.$parent.bindScrollHorizontal&&(f.addHorizontalScrollSync(n.$parent.containerId,l),f.addHorizontalScrollSync(n.$parent.containerId+"header",c),f.addHorizontalScrollSync(n.$parent.containerId+"footer",d))},controller:["$scope",function(e){this.rowStyle=function(t){var n=e.rowContainer,i=e.colContainer,o={};if(0===t&&0!==n.currentTopRow){var r=n.currentTopRow*n.grid.options.rowHeight;o["margin-top"]=r+"px"}return 0!==i.currentFirstColumn&&(i.grid.isRTL()?o["margin-right"]=i.columnOffset+"px":o["margin-left"]=i.columnOffset+"px"),o}}]}}])}(),function(){angular.module("ui.grid").directive("uiGridVisible",function(){return function(e,t,n){e.$watch(n.uiGridVisible,function(e){t[e?"removeClass":"addClass"]("ui-grid-invisible")})}})}(),function(){function e(e,t,n,i,o,r){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,transclude:!0,controller:"uiGridController",compile:function(){return{post:function(e,t,a,s){function l(){t[0].offsetWidth<=0&&h<f?(setTimeout(l,m),h++):n(d)}function c(){angular.element(i).on("resize",p),t.on("$destroy",function(){angular.element(i).off("resize",p)}),e.$watch(function(){return g.hasLeftContainer()},function(e,t){e!==t&&g.refreshCanvas(!0)}),e.$watch(function(){return g.hasRightContainer()},function(e,t){e!==t&&g.refreshCanvas(!0)})}function d(){g.gridWidth=e.gridWidth=o.elementWidth(t),g.canvasWidth=s.grid.gridWidth,g.gridHeight=e.gridHeight=o.elementHeight(t),g.gridHeight<=g.options.rowHeight&&g.options.enableMinHeightCheck&&u(),g.refreshCanvas(!0)}function u(){var n=g.options.minRowsToShow*g.options.rowHeight,i=g.options.showHeader?g.options.headerRowHeight:0,a=g.calcFooterHeight(),s=0;g.options.enableHorizontalScrollbar===r.scrollbars.ALWAYS&&(s=o.getScrollbarWidth());var l=0;if(angular.forEach(g.options.columnDefs,function(e){e.hasOwnProperty("filter")?l<1&&(l=1):e.hasOwnProperty("filters")&&l<e.filters.length&&(l=e.filters.length)}),g.options.enableFiltering&&!l){g.options.columnDefs.length&&g.options.columnDefs.every(function(e){return!1===e.enableFiltering})||(l=1)}var c=l*i,d=i+n+a+s+c;t.css("height",d+"px"),g.gridHeight=e.gridHeight=o.elementHeight(t)}function p(n){g.gridWidth=e.gridWidth=o.elementWidth(t),g.gridHeight=e.gridHeight=o.elementHeight(t),g.refreshCanvas(!0)}var g=s.grid;s.scrollbars=[],g.element=t;var m=100,f=20,h=0;c(),d(),g.renderingComplete(),l()}}}}}angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","gridUtil","$q","uiGridConstants","$templateCache","gridClassFactory","$timeout","$parse","$compile",function(e,t,n,i,o,r,a,s,l,c,d){function u(t,n){t&&t!==n&&(g.grid.options.columnDefs=e.uiGrid.columnDefs,g.grid.buildColumns({orderByColumnDefs:!0}).then(function(){g.grid.preCompileCellTemplates(),g.grid.callDataChangeCallbacks(r.dataChange.COLUMN)}))}function p(t){var i=[];if(g.grid.options.fastWatch&&(t=angular.isString(e.uiGrid.data)?g.grid.appScope[e.uiGrid.data]:e.uiGrid.data),f=t,t){var a=g.grid.columns.length>(g.grid.rowHeaderColumns?g.grid.rowHeaderColumns.length:0);!a&&!n.uiGridColumns&&0===g.grid.options.columnDefs.length&&t.length>0&&g.grid.buildColumnDefsFromData(t),!a&&(g.grid.options.columnDefs.length>0||t.length>0)&&i.push(g.grid.buildColumns().then(function(){g.grid.preCompileCellTemplates()})),o.all(i).then(function(){g.grid.modifyRows(f).then(function(){g.grid.redrawInPlace(!0),e.$evalAsync(function(){g.grid.refreshCanvas(!0),g.grid.callDataChangeCallbacks(r.dataChange.ROW)})})})}}var g=this;g.grid=s.createGrid(e.uiGrid),g.grid.appScope=g.grid.appScope||e.$parent,t.addClass("grid"+g.grid.id),g.grid.rtl="rtl"===i.getStyles(t[0]).direction,e.grid=g.grid,n.uiGridColumns&&n.$observe("uiGridColumns",function(e){g.grid.options.columnDefs=e,g.grid.buildColumns().then(function(){g.grid.preCompileCellTemplates(),g.grid.refreshCanvas(!0)})});var m=[];g.grid.options.fastWatch?(g.uiGrid=e.uiGrid,angular.isString(e.uiGrid.data)?(m.push(e.$parent.$watch(e.uiGrid.data,p)),m.push(e.$parent.$watch(function(){return g.grid.appScope[e.uiGrid.data]?g.grid.appScope[e.uiGrid.data].length:void 0},p))):(m.push(e.$parent.$watch(function(){return e.uiGrid.data},p)),m.push(e.$parent.$watch(function(){return e.uiGrid.data.length},function(){p(e.uiGrid.data)}))),m.push(e.$parent.$watch(function(){return e.uiGrid.columnDefs},u)),m.push(e.$parent.$watch(function(){return e.uiGrid.columnDefs.length},function(){u(e.uiGrid.columnDefs)}))):(angular.isString(e.uiGrid.data)?m.push(e.$parent.$watchCollection(e.uiGrid.data,p)):m.push(e.$parent.$watchCollection(function(){return e.uiGrid.data},p)),m.push(e.$parent.$watchCollection(function(){return e.uiGrid.columnDefs},u)));var f,h=e.$watch(function(){return g.grid.styleComputations},function(){g.grid.refreshCanvas(!0)});e.$on("$destroy",function(){m.forEach(function(e){e()}),h()}),g.fireEvent=function(t,n){void 0!==n&&void 0!==n||(n={}),void 0!==n.grid&&void 0!==n.grid||(n.grid=g.grid),e.$broadcast(t,n)},g.innerCompile=function(t){d(t)(e)}}]),angular.module("ui.grid").directive("uiGrid",e),e.$inject=["$compile","$templateCache","$timeout","$window","gridUtil","uiGridConstants"]}(),function(){angular.module("ui.grid").directive("uiGridPinnedContainer",["gridUtil",function(e){return{restrict:"EA",replace:!0,template:'<div class="ui-grid-pinned-container"><div ui-grid-render-container container-id="side" row-container-name="\'body\'" col-container-name="side" bind-scroll-vertical="true" class="{{ side }} ui-grid-render-container-{{ side }}"></div></div>',scope:{side:"=uiGridPinnedContainer"},require:"^uiGrid",compile:function(){return{post:function(e,t,n,i){function o(){var e=this,t=0;e.visibleColumnCache.forEach(function(e){t+=e.drawnWidth});var n=e.getViewportAdjustment();return t+=n.width}function r(){if("left"===e.side||"right"===e.side){for(var t=s.renderContainers[e.side].visibleColumnCache,n=0,i=0;i<t.length;i++){var o=t[i];n+=o.drawnWidth||o.width||0}return n}}function a(){var n="";return"left"!==e.side&&"right"!==e.side||(l=r(),t.attr("style",null),n+=".grid"+s.id+" .ui-grid-pinned-container-"+e.side+", .grid"+s.id+" .ui-grid-pinned-container-"+e.side+" .ui-grid-render-container-"+e.side+" .ui-grid-viewport { width: "+l+"px; } "),n}var s=i.grid,l=0;t.addClass("ui-grid-pinned-container-"+e.side),"left"!==e.side&&"right"!==e.side||(s.renderContainers[e.side].getViewportWidth=o),s.renderContainers.body.registerViewportAdjuster(function(t){return l=r(),t.width-=l,t.side=e.side,t}),s.registerStyleComputation({priority:15,func:a})}}}}}])}(),function(){angular.module("ui.grid").factory("Grid",["$q","$compile","$parse","gridUtil","uiGridConstants","GridOptions","GridColumn","GridRow","GridApi","rowSorter","rowSearcher","GridRenderContainer","$timeout","ScrollEvent",function(e,t,n,i,o,r,a,s,l,c,d,u,p,g){function m(){}var f=function(e){function t(e){a.isScrollingVertically=!1,a.api.core.raise.scrollEnd(e),a.scrollDirection=o.scrollDirection.NONE}function n(e){a.isScrollingHorizontally=!1,a.api.core.raise.scrollEnd(e),a.scrollDirection=o.scrollDirection.NONE}var a=this;if(void 0===e||void 0===e.id||!e.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(e.id))throw new Error("Grid id '"+e.id+'" is invalid. It must follow CSS selector syntax rules.');a.id=e.id,delete e.id,a.options=r.initialize(e),a.appScope=a.options.appScopeProvider,a.headerHeight=a.options.headerRowHeight,a.footerHeight=a.calcFooterHeight(),a.columnFooterHeight=a.calcColumnFooterHeight(),a.rtl=!1,a.gridHeight=0,a.gridWidth=0,a.columnBuilders=[],a.rowBuilders=[],a.rowsProcessors=[],a.columnsProcessors=[],a.styleComputations=[],a.viewportAdjusters=[],a.rowHeaderColumns=[],a.dataChangeCallbacks={},a.verticalScrollSyncCallBackFns={},a.horizontalScrollSyncCallBackFns={},a.renderContainers={},a.renderContainers.body=new u("body",a),a.cellValueGetterCache={},a.getRowTemplateFn=null,a.rows=[],a.columns=[],a.isScrollingVertically=!1,a.isScrollingHorizontally=!1,a.scrollDirection=o.scrollDirection.NONE,a.disableScrolling=!1;var s=i.debounce(t,a.options.scrollDebounce),d=i.debounce(t,0),p=i.debounce(n,a.options.scrollDebounce),g=i.debounce(n,0);a.flagScrollingVertically=function(e){a.isScrollingVertically||a.isScrollingHorizontally||a.api.core.raise.scrollBegin(e),a.isScrollingVertically=!0,0!==a.options.scrollDebounce&&e.withDelay?s(e):d(e)},a.flagScrollingHorizontally=function(e){a.isScrollingVertically||a.isScrollingHorizontally||a.api.core.raise.scrollBegin(e),a.isScrollingHorizontally=!0,0!==a.options.scrollDebounce&&e.withDelay?p(e):g(e)},a.scrollbarHeight=0,a.scrollbarWidth=0,a.options.enableHorizontalScrollbar===o.scrollbars.ALWAYS&&(a.scrollbarHeight=i.getScrollbarWidth()),a.options.enableVerticalScrollbar===o.scrollbars.ALWAYS&&(a.scrollbarWidth=i.getScrollbarWidth()),a.api=new l(a),a.api.registerMethod("core","refresh",this.refresh),a.api.registerMethod("core","queueGridRefresh",this.queueGridRefresh),a.api.registerMethod("core","refreshRows",this.refreshRows),a.api.registerMethod("core","queueRefresh",this.queueRefresh),a.api.registerMethod("core","handleWindowResize",this.handleWindowResize),a.api.registerMethod("core","addRowHeaderColumn",this.addRowHeaderColumn),a.api.registerMethod("core","scrollToIfNecessary",function(e,t){return a.scrollToIfNecessary(e,t)}),a.api.registerMethod("core","scrollTo",function(e,t){return a.scrollTo(e,t)}),a.api.registerMethod("core","registerRowsProcessor",this.registerRowsProcessor),a.api.registerMethod("core","registerColumnsProcessor",this.registerColumnsProcessor),a.api.registerMethod("core","sortHandleNulls",c.handleNulls),a.api.registerEvent("core","sortChanged"),a.api.registerEvent("core","columnVisibilityChanged"),a.api.registerMethod("core","notifyDataChange",this.notifyDataChange),a.api.registerMethod("core","clearAllFilters",this.clearAllFilters),a.registerDataChangeCallback(a.columnRefreshCallback,[o.dataChange.COLUMN]),a.registerDataChangeCallback(a.processRowsCallback,[o.dataChange.EDIT]),a.registerDataChangeCallback(a.updateFooterHeightCallback,[o.dataChange.OPTIONS]),a.registerStyleComputation({priority:10,func:a.getFooterStyles})};return f.prototype.calcFooterHeight=function(){if(!this.hasFooter())return 0;var e=0;return this.options.showGridFooter&&(e+=this.options.gridFooterHeight),e+=this.calcColumnFooterHeight()},f.prototype.calcColumnFooterHeight=function(){var e=0;return this.options.showColumnFooter&&(e+=this.options.columnFooterHeight),e},f.prototype.getFooterStyles=function(){var e=".grid"+this.id+" .ui-grid-footer-aggregates-row { height: "+this.options.columnFooterHeight+"px; }";return e+=" .grid"+this.id+" .ui-grid-footer-info { height: "+this.options.gridFooterHeight+"px; }"},f.prototype.hasFooter=function(){return this.options.showGridFooter||this.options.showColumnFooter},f.prototype.isRTL=function(){return this.rtl},f.prototype.registerColumnBuilder=function(e){this.columnBuilders.push(e)},f.prototype.buildColumnDefsFromData=function(e){this.options.columnDefs=i.getColumnsFromData(e,this.options.excludeProperties)},f.prototype.registerRowBuilder=function(e){this.rowBuilders.push(e)},f.prototype.registerDataChangeCallback=function(e,t,n){var r=i.nextUid();t||(t=[o.dataChange.ALL]),Array.isArray(t)||i.logError("Expected types to be an array or null in registerDataChangeCallback, value passed was: "+t),this.dataChangeCallbacks[r]={callback:e,types:t,_this:n};var a=this;return function(){delete a.dataChangeCallbacks[r]}},f.prototype.callDataChangeCallbacks=function(e,t){angular.forEach(this.dataChangeCallbacks,function(t,n){-1===t.types.indexOf(o.dataChange.ALL)&&-1===t.types.indexOf(e)&&e!==o.dataChange.ALL||(t._this?t.callback.apply(t._this,this):t.callback(this))},this)},f.prototype.notifyDataChange=function(e){var t=o.dataChange;e===t.ALL||e===t.COLUMN||e===t.EDIT||e===t.ROW||e===t.OPTIONS?this.callDataChangeCallbacks(e):i.logError("Notified of a data change, but the type was not recognised, so no action taken, type was: "+e)},f.prototype.columnRefreshCallback=function(e){e.buildColumns(),e.queueGridRefresh()},f.prototype.processRowsCallback=function(e){e.queueGridRefresh()},f.prototype.updateFooterHeightCallback=function(e){e.footerHeight=e.calcFooterHeight(),e.columnFooterHeight=e.calcColumnFooterHeight()},f.prototype.getColumn=function(e){var t=this.columns.filter(function(t){return t.colDef.name===e});return t.length>0?t[0]:null},f.prototype.getColDef=function(e){var t=this.options.columnDefs.filter(function(t){return t.name===e});return t.length>0?t[0]:null},f.prototype.assignTypes=function(){var e=this;e.options.columnDefs.forEach(function(t,n){if(!t.type){var o=new a(t,n,e),r=e.rows.length>0?e.rows[0]:null;t.type=r?i.guessType(e.getCellValue(r,o)):"string"}})},f.prototype.isRowHeaderColumn=function(e){return-1!==this.rowHeaderColumns.indexOf(e)},f.prototype.addRowHeaderColumn=function(e){var t=this,n=new a(e,i.nextUid(),t);n.isRowHeader=!0,t.isRTL()?(t.createRightContainer(),n.renderContainer="right"):(t.createLeftContainer(),n.renderContainer="left"),t.columnBuilders[0](e,n,t.options).then(function(){n.enableFiltering=!1,n.enableSorting=!1,n.enableHiding=!1,t.rowHeaderColumns.push(n),t.buildColumns().then(function(){t.preCompileCellTemplates(),t.queueGridRefresh()})})},f.prototype.getOnlyDataColumns=function(){var e=this,t=[];return e.columns.forEach(function(n){-1===e.rowHeaderColumns.indexOf(n)&&t.push(n)}),t},f.prototype.buildColumns=function(t){var n={orderByColumnDefs:!1};angular.extend(n,t);var o,r=this,s=[],l=r.rowHeaderColumns.length;for(o=0;o<r.columns.length;o++)r.getColDef(r.columns[o].name)||(r.columns.splice(o,1),o--);if(r.rowHeaderColumns.forEach(function(e){r.columns.unshift(e)}),r.options.columnDefs.forEach(function(e,t){r.preprocessColDef(e);var n=r.getColumn(e.name);n?n.updateColumnDef(e,!1):(n=new a(e,i.nextUid(),r),r.columns.splice(t+l,0,n)),r.columnBuilders.forEach(function(t){s.push(t.call(r,e,n,r.options))})}),n.orderByColumnDefs){var c=r.columns.slice(0),d=Math.min(r.options.columnDefs.length,r.columns.length);for(o=0;o<d;o++)r.columns[o+l].name!==r.options.columnDefs[o].name?c[o+l]=r.getColumn(r.options.columnDefs[o].name):c[o+l]=r.columns[o+l];r.columns.length=0,Array.prototype.splice.apply(r.columns,[0,0].concat(c))}return e.all(s).then(function(){r.rows.length>0&&r.assignTypes()})},f.prototype.preCompileCellTemplates=function(){var e=this,n=function(n){var i=n.cellTemplate.replace(o.MODEL_COL_FIELD,e.getQualifiedColField(n));i=i.replace(o.COL_FIELD,"grid.getCellValue(row, col)");var r=t(i);n.compiledElementFn=r,n.compiledElementFnDefer&&n.compiledElementFnDefer.resolve(n.compiledElementFn)};this.columns.forEach(function(e){e.cellTemplate?n(e):e.cellTemplatePromise&&e.cellTemplatePromise.then(function(){n(e)})})},f.prototype.getQualifiedColField=function(e){return"row.entity."+i.preEval(e.field)},f.prototype.createLeftContainer=function(){this.hasLeftContainer()||(this.renderContainers.left=new u("left",this,{disableColumnOffset:!0}))},f.prototype.createRightContainer=function(){this.hasRightContainer()||(this.renderContainers.right=new u("right",this,{disableColumnOffset:!0}))},f.prototype.hasLeftContainer=function(){return void 0!==this.renderContainers.left},f.prototype.hasRightContainer=function(){return void 0!==this.renderContainers.right},f.prototype.preprocessColDef=function(e){var t=this;if(!e.field&&!e.name)throw new Error("colDef.name or colDef.field property is required");if(void 0===e.name&&void 0!==e.field){for(var n=e.field,i=2;t.getColumn(n);)n=e.field+i.toString(),i++;e.name=n}},f.prototype.newInN=function(e,t,n,i){for(var o=this,r=[],a=0;a<t.length;a++){for(var s=i?t[a][i]:t[a],l=!1,c=0;c<e.length;c++){var d=n?e[c][n]:e[c];if(o.options.rowEquality(s,d)){l=!0;break}}l||r.push(s)}return r},f.prototype.getRow=function(e,t){var n=this;t=void 0===t?n.rows:t;var i=t.filter(function(t){return n.options.rowEquality(t.entity,e)});return i.length>0?i[0]:null},f.prototype.modifyRows=function(t){var n=this,i=n.rows.slice(0),o=n.rowHashMap||n.createRowHashMap();n.rowHashMap=n.createRowHashMap(),n.rows.length=0,t.forEach(function(e,t){var r;r=n.options.enableRowHashing?o.get(e):n.getRow(e,i),r||(r=n.processRowBuilders(new s(e,t,n))),n.rows.push(r),n.rowHashMap.put(e,r)}),n.assignTypes();var r=e.when(n.processRowsProcessors(n.rows)).then(function(e){return n.setVisibleRows(e)}),a=e.when(n.processColumnsProcessors(n.columns)).then(function(e){return n.setVisibleColumns(e)});return e.all([r,a])},f.prototype.addRows=function(e){for(var t=this,n=t.rows.length,i=0;i<e.length;i++){var o=t.processRowBuilders(new s(e[i],i+n,t));if(t.options.enableRowHashing){var r=t.rowHashMap.get(o.entity);r&&(r.row=o)}t.rows.push(o)}},f.prototype.processRowBuilders=function(e){var t=this;return t.rowBuilders.forEach(function(n){n.call(t,e,t.options)}),e},f.prototype.registerStyleComputation=function(e){this.styleComputations.push(e)},f.prototype.registerRowsProcessor=function(e,t){if(!angular.isFunction(e))throw"Attempt to register non-function rows processor: "+e;this.rowsProcessors.push({processor:e,priority:t}),this.rowsProcessors.sort(function(e,t){return e.priority-t.priority})},f.prototype.removeRowsProcessor=function(e){var t=-1;this.rowsProcessors.forEach(function(n,i){n.processor===e&&(t=i)}),-1!==t&&this.rowsProcessors.splice(t,1)},f.prototype.processRowsProcessors=function(t){function n(t,o){var a=i.rowsProcessors[t].processor;return e.when(a.call(i,o,i.columns)).then(function(e){if(!e)throw"Processor at index "+t+" did not return a set of renderable rows";if(!angular.isArray(e))throw"Processor at index "+t+" did not return an array";if(++t<=i.rowsProcessors.length-1)return n(t,e);r.resolve(e)})}var i=this,o=t.slice(0);if(0===i.rowsProcessors.length)return e.when(o);var r=e.defer();return n(0,o),r.promise},f.prototype.setVisibleRows=function(e){var t=this;for(var n in t.renderContainers){var i=t.renderContainers[n];i.canvasHeightShouldUpdate=!0,void 0===i.visibleRowCache?i.visibleRowCache=[]:i.visibleRowCache.length=0}for(var o=0;o<e.length;o++){var r=e[o],a=void 0!==r.renderContainer&&r.renderContainer?r.renderContainer:"body";r.visible&&t.renderContainers[a].visibleRowCache.push(r)}t.api.core.raise.rowsRendered(this.api)},f.prototype.registerColumnsProcessor=function(e,t){if(!angular.isFunction(e))throw"Attempt to register non-function rows processor: "+e;this.columnsProcessors.push({processor:e,priority:t}),this.columnsProcessors.sort(function(e,t){return e.priority-t.priority})},f.prototype.removeColumnsProcessor=function(e){var t=this.columnsProcessors.indexOf(e);void 0!==t&&void 0!==t&&this.columnsProcessors.splice(t,1)},f.prototype.processColumnsProcessors=function(t){function n(t,a){var s=i.columnsProcessors[t].processor;return e.when(s.call(i,a,i.rows)).then(function(e){if(!e)throw"Processor at index "+t+" did not return a set of renderable rows";if(!angular.isArray(e))throw"Processor at index "+t+" did not return an array";if(++t<=i.columnsProcessors.length-1)return n(t,o);r.resolve(o)})}var i=this,o=t.slice(0);if(0===i.columnsProcessors.length)return e.when(o);var r=e.defer();return n(0,o),r.promise},f.prototype.setVisibleColumns=function(e){var t=this;for(var n in t.renderContainers){t.renderContainers[n].visibleColumnCache.length=0}for(var i=0;i<e.length;i++){var o=e[i];o.visible&&(void 0!==o.renderContainer&&o.renderContainer?t.renderContainers[o.renderContainer].visibleColumnCache.push(o):t.renderContainers.body.visibleColumnCache.push(o))}},f.prototype.handleWindowResize=function(e){var t=this;return t.gridWidth=i.elementWidth(t.element),t.gridHeight=i.elementHeight(t.element),t.queueRefresh()},f.prototype.queueRefresh=function(){var e=this;return e.refreshCanceller&&p.cancel(e.refreshCanceller),e.refreshCanceller=p(function(){e.refreshCanvas(!0)}),e.refreshCanceller.then(function(){e.refreshCanceller=null}),e.refreshCanceller},f.prototype.queueGridRefresh=function(){var e=this;return e.gridRefreshCanceller&&p.cancel(e.gridRefreshCanceller),e.gridRefreshCanceller=p(function(){e.refresh(!0)}),e.gridRefreshCanceller.then(function(){e.gridRefreshCanceller=null}),e.gridRefreshCanceller},f.prototype.updateCanvasHeight=function(){var e=this;for(var t in e.renderContainers)if(e.renderContainers.hasOwnProperty(t)){var n=e.renderContainers[t];n.canvasHeightShouldUpdate=!0}},f.prototype.buildStyles=function(){var e=this;e.customStyles="",e.styleComputations.sort(function(e,t){return null===e.priority?1:null===t.priority?-1:null===e.priority&&null===t.priority?0:e.priority-t.priority}).forEach(function(t){var n=t.func.call(e);angular.isString(n)&&(e.customStyles+="\n"+n)})},f.prototype.minColumnsToRender=function(){var e=this,t=this.getViewportWidth(),n=0,i=0;return e.columns.forEach(function(o,r){if(i<t)i+=o.drawnWidth,n++;else{for(var a=0,s=r;s>=r-n;s--)a+=e.columns[s].drawnWidth;a<t&&n++}}),n},f.prototype.getBodyHeight=function(){return this.getViewportHeight()},f.prototype.getViewportHeight=function(){var e=this,t=this.gridHeight-this.headerHeight-this.footerHeight;return t+=e.getViewportAdjustment().height},f.prototype.getViewportWidth=function(){var e=this,t=this.gridWidth;return t+=e.getViewportAdjustment().width},f.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},f.prototype.addVerticalScrollSync=function(e,t){this.verticalScrollSyncCallBackFns[e]=t},f.prototype.addHorizontalScrollSync=function(e,t){this.horizontalScrollSyncCallBackFns[e]=t},f.prototype.scrollContainers=function(e,t){if(t.y){var n=["body","left","right"];this.flagScrollingVertically(t),"body"===e?n=["left","right"]:"left"===e?n=["body","right"]:"right"===e&&(n=["body","left"]);for(var i=0;i<n.length;i++){var o=n[i];this.verticalScrollSyncCallBackFns[o]&&this.verticalScrollSyncCallBackFns[o](t)}}if(t.x){var r=["body","bodyheader","bodyfooter"];this.flagScrollingHorizontally(t),"body"===e&&(r=["bodyheader","bodyfooter"]);for(var a=0;a<r.length;a++){var s=r[a];this.horizontalScrollSyncCallBackFns[s]&&this.horizontalScrollSyncCallBackFns[s](t)}}},f.prototype.registerViewportAdjuster=function(e){this.viewportAdjusters.push(e)},f.prototype.removeViewportAdjuster=function(e){var t=this.viewportAdjusters.indexOf(e);void 0!==t&&void 0!==t&&this.viewportAdjusters.splice(t,1)},f.prototype.getViewportAdjustment=function(){var e=this,t={height:0,width:0};return e.viewportAdjusters.forEach(function(e){t=e.call(this,t)}),t},f.prototype.getVisibleRowCount=function(){return this.renderContainers.body.visibleRowCache.length},f.prototype.getVisibleRows=function(){return this.renderContainers.body.visibleRowCache},f.prototype.getVisibleColumnCount=function(){return this.renderContainers.body.visibleColumnCache.length},f.prototype.searchRows=function(e){return d.search(this,e,this.columns)},f.prototype.sortByColumn=function(e){return c.sort(this,e,this.columns)},f.prototype.getCellValue=function(e,t){return void 0!==e.entity["$$"+t.uid]?e.entity["$$"+t.uid].rendered:this.options.flatEntityAccess&&void 0!==t.field?e.entity[t.field]:(t.cellValueGetterCache||(t.cellValueGetterCache=n(e.getEntityQualifiedColField(t))),t.cellValueGetterCache(e))},f.prototype.getCellDisplayValue=function(e,t){if(!t.cellDisplayGetterCache){var i=t.cellFilter?" | "+t.cellFilter:"";void 0!==e.entity["$$"+t.uid]?t.cellDisplayGetterCache=n(e.entity["$$"+t.uid].rendered+i):this.options.flatEntityAccess&&void 0!==t.field?t.cellDisplayGetterCache=n(e.entity[t.field]+i):t.cellDisplayGetterCache=n(e.getEntityQualifiedColField(t)+i)}return t.cellDisplayGetterCache(e)},f.prototype.getNextColumnSortPriority=function(){var e=this,t=0;return e.columns.forEach(function(e){e.sort&&void 0!==e.sort.priority&&e.sort.priority>=t&&(t=e.sort.priority+1)}),t},f.prototype.resetColumnSorting=function(e){this.columns.forEach(function(t){t===e||t.suppressRemoveSort||(t.sort={})})},f.prototype.getColumnSorting=function(){var e,t=this,n=[];return e=t.columns.slice(0),e.sort(c.prioritySort).forEach(function(e){e.sort&&void 0!==e.sort.direction&&e.sort.direction&&(e.sort.direction===o.ASC||e.sort.direction===o.DESC)&&n.push(e)}),n},f.prototype.sortColumn=function(t,n,i){var o=this,r=null;if(void 0===t||!t)throw new Error("No column parameter provided");if("boolean"==typeof n?i=n:r=n,i?t.sort.priority||(t.sort.priority=o.getNextColumnSortPriority()):(o.resetColumnSorting(t),t.sort.priority=void 0,t.sort.priority=o.getNextColumnSortPriority()),r)t.sort.direction=r;else{var a=t.sortDirectionCycle.indexOf(t.sort.direction?t.sort.direction:null);a=(a+1)%t.sortDirectionCycle.length,t.colDef&&t.suppressRemoveSort&&!t.sortDirectionCycle[a]&&(a=(a+1)%t.sortDirectionCycle.length),t.sortDirectionCycle[a]?t.sort.direction=t.sortDirectionCycle[a]:t.sort={}}return o.api.core.raise.sortChanged(o,o.getColumnSorting()),e.when(t)},f.prototype.renderingComplete=function(){angular.isFunction(this.options.onRegisterApi)&&this.options.onRegisterApi(this.api),this.api.core.raise.renderingComplete(this.api)},f.prototype.createRowHashMap=function(){var e=this,t=new m;return t.grid=e,t},f.prototype.refresh=function(t){var n=this,i=n.processRowsProcessors(n.rows).then(function(e){n.setVisibleRows(e)}),o=n.processColumnsProcessors(n.columns).then(function(e){n.setVisibleColumns(e)});return e.all([i,o]).then(function(){n.redrawInPlace(t),n.refreshCanvas(!0)})},f.prototype.refreshRows=function(){var e=this;return e.processRowsProcessors(e.rows).then(function(t){e.setVisibleRows(t),e.redrawInPlace(),e.refreshCanvas(!0)})},f.prototype.refreshCanvas=function(t){var n=this;t&&n.buildStyles();var o=e.defer(),r=[];for(var a in n.renderContainers)if(n.renderContainers.hasOwnProperty(a)){var s=n.renderContainers[a];if(null===s.canvasWidth||isNaN(s.canvasWidth))continue;(s.header||s.headerCanvas)&&(s.explicitHeaderHeight=s.explicitHeaderHeight||null,s.explicitHeaderCanvasHeight=s.explicitHeaderCanvasHeight||null,r.push(s))}return r.length>0?(t&&n.buildStyles(),p(function(){var e,a,s=!1,l=0,c=0,d=function(e,t){return e!==t&&(s=!0),t};for(e=0;e<r.length;e++)if(a=r[e],null!==a.canvasWidth&&!isNaN(a.canvasWidth)){if(a.header){var u=a.headerHeight=d(a.headerHeight,parseInt(i.outerElementHeight(a.header),10)),p=i.getBorderSize(a.header,"top"),g=i.getBorderSize(a.header,"bottom"),m=parseInt(u-p-g,10);m=m<0?0:m,a.innerHeaderHeight=m,!a.explicitHeaderHeight&&m>l&&(l=m)}if(a.headerCanvas){var f=a.headerCanvasHeight=d(a.headerCanvasHeight,parseInt(i.outerElementHeight(a.headerCanvas),10));!a.explicitHeaderCanvasHeight&&f>c&&(c=f)}}for(e=0;e<r.length;e++)a=r[e],l>0&&void 0!==a.headerHeight&&null!==a.headerHeight&&(a.explicitHeaderHeight||a.headerHeight<l)&&(a.explicitHeaderHeight=d(a.explicitHeaderHeight,l)),c>0&&void 0!==a.headerCanvasHeight&&null!==a.headerCanvasHeight&&(a.explicitHeaderCanvasHeight||a.headerCanvasHeight<c)&&(a.explicitHeaderCanvasHeight=d(a.explicitHeaderCanvasHeight,c));t&&s&&n.buildStyles(),o.resolve()})):p(function(){o.resolve()}),o.promise},f.prototype.redrawInPlace=function(e){var t=this;for(var n in t.renderContainers){var i=t.renderContainers[n];e?(i.adjustRows(i.prevScrollTop,null),i.adjustColumns(i.prevScrollLeft,null)):(i.adjustRows(null,i.prevScrolltopPercentage),i.adjustColumns(null,i.prevScrollleftPercentage))}},f.prototype.hasLeftContainerColumns=function(){return this.hasLeftContainer()&&this.renderContainers.left.renderedColumns.length>0},f.prototype.hasRightContainerColumns=function(){return this.hasRightContainer()&&this.renderContainers.right.renderedColumns.length>0},f.prototype.scrollToIfNecessary=function(t,n){var i=this,o=new g(i,"uiGrid.scrollToIfNecessary"),r=i.renderContainers.body.visibleRowCache,a=i.renderContainers.body.visibleColumnCache,s=i.renderContainers.body.prevScrollTop+i.headerHeight;s=s<0?0:s;var l=i.renderContainers.body.prevScrollLeft,c=i.renderContainers.body.prevScrollTop+i.gridHeight-i.renderContainers.body.headerHeight-i.footerHeight-i.scrollbarWidth,d=i.renderContainers.body.prevScrollLeft+Math.ceil(i.renderContainers.body.getViewportWidth());if(null!==t){var u=r.indexOf(t),p=i.renderContainers.body.getCanvasHeight()-i.renderContainers.body.getViewportHeight(),m=u*i.options.rowHeight+i.headerHeight;m=m<0?0:m;var f,h;m<s?(f=i.renderContainers.body.prevScrollTop-(s-m),h=f/p,o.y={percentage:h}):m>c&&(f=m-c+i.renderContainers.body.prevScrollTop,h=f/p,o.y={percentage:h})}if(null!==n){for(var v=a.indexOf(n),y=i.renderContainers.body.getCanvasWidth()-i.renderContainers.body.getViewportWidth(),b=0,w=0;w<v;w++){b+=a[w].drawnWidth}b=b<0?0:b;var C=b+n.drawnWidth;C=C<0?0:C;var T,S;b<l?(T=i.renderContainers.body.prevScrollLeft-(l-b),S=T/y,S=S>1?1:S,o.x={percentage:S}):C>d&&(T=C-d+i.renderContainers.body.prevScrollLeft,S=T/y,S=S>1?1:S,o.x={percentage:S})}var E=e.defer();if(o.y||o.x){o.withDelay=!1,i.scrollContainers("",o);var I=i.api.core.on.scrollEnd(null,function(){E.resolve(o),I()})}else E.resolve();return E.promise},f.prototype.scrollTo=function(e,t){var n=null,i=null;return null!==e&&void 0!==e&&(n=this.getRow(e)),null!==t&&void 0!==t&&(i=this.getColumn(t.name?t.name:t.field)),this.scrollToIfNecessary(n,i)},f.prototype.clearAllFilters=function(e,t,n){if(void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===n&&(n=!1),this.columns.forEach(function(e){e.filters.forEach(function(e){e.term=void 0,t&&(e.condition=void 0),n&&(e.flags=void 0)})}),e)return this.refreshRows()},m.prototype={put:function(e,t){this[this.grid.options.rowIdentity(e)]=t},get:function(e){return this[this.grid.options.rowIdentity(e)]},remove:function(e){var t=this[e=this.grid.options.rowIdentity(e)];return delete this[e],t}},f}])}(),function(){angular.module("ui.grid").factory("GridApi",["$q","$rootScope","gridUtil","uiGridConstants","GridRow","uiGridGridMenuService",function(e,t,n,i,o,r){function a(e,n,i,o){return t.$on(e,function(e){var t=Array.prototype.slice.call(arguments);t.splice(0,1),n.apply(o||i.api,t)})}var s=function(e){this.grid=e,this.listeners=[],this.registerEvent("core","renderingComplete"),this.registerEvent("core","filterChanged"),this.registerMethod("core","setRowInvisible",o.prototype.setRowInvisible),this.registerMethod("core","clearRowInvisible",o.prototype.clearRowInvisible),this.registerMethod("core","getVisibleRows",this.grid.getVisibleRows),this.registerEvent("core","rowsVisibleChanged"),this.registerEvent("core","rowsRendered"),this.registerEvent("core","scrollBegin"),this.registerEvent("core","scrollEnd"),this.registerEvent("core","canvasHeightChanged")};return s.prototype.suppressEvents=function(e,t){var n=this,i=angular.isArray(e)?e:[e],o=n.listeners.filter(function(e){return i.some(function(t){return e.handler===t})});o.forEach(function(e){e.dereg()}),t(),o.forEach(function(e){e.dereg=a(e.eventId,e.handler,n.grid,e._this)})},s.prototype.registerEvent=function(e,i){var o=this;o[e]||(o[e]={});var r=o[e];r.on||(r.on={},r.raise={});var s=o.grid.id+e+i;r.raise[i]=function(){t.$emit.apply(t,[s].concat(Array.prototype.slice.call(arguments)))},r.on[i]=function(t,r,l){if(null!==t&&void 0===t.$on)return void n.logError("asked to listen on "+e+".on."+i+" but scope wasn't passed in the input parameters.  It is legitimate to pass null, but you've passed something else, so you probably forgot to provide scope rather than did it deliberately, not registering");var c=a(s,r,o.grid,l),d={handler:r,dereg:c,eventId:s,scope:t,_this:l};o.listeners.push(d);var u=function(){d.dereg();var e=o.listeners.indexOf(d);o.listeners.splice(e,1)};return t&&t.$on("$destroy",function(){u()}),u}},s.prototype.registerEventsFromObject=function(e){var t=this,n=[];angular.forEach(e,function(e,t){var i={name:t,events:[]};angular.forEach(e,function(e,t){i.events.push(t)}),n.push(i)}),n.forEach(function(e){e.events.forEach(function(n){t.registerEvent(e.name,n)})})},s.prototype.registerMethod=function(e,t,i,o){this[e]||(this[e]={}),this[e][t]=n.createBoundedWrapper(o||this.grid,i)},s.prototype.registerMethodsFromObject=function(e,t){var n=this,i=[];angular.forEach(e,function(e,t){var n={name:t,methods:[]};angular.forEach(e,function(e,t){n.methods.push({name:t,fn:e})}),i.push(n)}),i.forEach(function(e){e.methods.forEach(function(i){n.registerMethod(e.name,i.name,i.fn,t)})})},s}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil","uiGridConstants","i18nService",function(e,t,n){function i(e,n,i){var o=this;o.grid=i,o.uid=n,o.updateColumnDef(e,!0),o.aggregationValue=void 0,o.updateAggregationValue=function(){if(!o.aggregationType)return void(o.aggregationValue=void 0);var e=0,n=o.grid.getVisibleRows(),i=function(){var e=[];return n.forEach(function(t){var n=o.grid.getCellValue(t,o),i=Number(n);isNaN(i)||e.push(i)}),e};angular.isFunction(o.aggregationType)?o.aggregationValue=o.aggregationType(n,o):o.aggregationType===t.aggregationTypes.count?o.aggregationValue=o.grid.getVisibleRowCount():o.aggregationType===t.aggregationTypes.sum?(i().forEach(function(t){e+=t}),o.aggregationValue=e):o.aggregationType===t.aggregationTypes.avg?(i().forEach(function(t){e+=t}),e/=i().length,o.aggregationValue=e):o.aggregationType===t.aggregationTypes.min?o.aggregationValue=Math.min.apply(null,i()):o.aggregationType===t.aggregationTypes.max?o.aggregationValue=Math.max.apply(null,i()):o.aggregationValue="Â "},this.getAggregationValue=function(){return o.aggregationValue}}return i.prototype.hideColumn=function(){this.colDef.visible=!1},i.prototype.setPropertyOrDefault=function(e,t,n){var i=this;void 0!==e[t]&&e[t]?i[t]=e[t]:void 0!==i[t]?i[t]=i[t]:i[t]=n||{}},i.prototype.updateColumnDef=function(n,i){var o=this;if(o.colDef=n,void 0===n.name)throw new Error("colDef.name is required for column at index "+o.grid.options.columnDefs.indexOf(n));if(o.displayName=void 0===n.displayName?e.readableColumnName(n.name):n.displayName,!angular.isNumber(o.width)||!o.hasCustomWidth||n.allowCustomWidthOverride){var r=n.width,a="Cannot parse column width '"+r+"' for column named '"+n.name+"'";if(o.hasCustomWidth=!1,angular.isString(r)||angular.isNumber(r))if(angular.isString(r))if(e.endsWith(r,"%")){var s=r.replace(/%/g,""),l=parseInt(s,10);if(isNaN(l))throw new Error(a);o.width=r}else if(r.match(/^(\d+)$/))o.width=parseInt(r.match(/^(\d+)$/)[1],10);else{if(!r.match(/^\*+$/))throw new Error(a);o.width=r}else o.width=r;else o.width="*"}["minWidth","maxWidth"].forEach(function(e){var t=n[e],i="Cannot parse column "+e+" '"+t+"' for column named '"+n.name+"'";if(angular.isString(t)||angular.isNumber(t))if(angular.isString(t)){if(!t.match(/^(\d+)$/))throw new Error(i);o[e]=parseInt(t.match(/^(\d+)$/)[1],10)}else o[e]=t;else o[e]="minWidth"===e?30:9e3}),o.field=void 0===n.field?n.name:n.field,"string"!=typeof o.field&&e.logError("Field is not a string, this is likely to break the code, Field is: "+o.field),o.name=n.name,o.displayName=void 0===n.displayName?e.readableColumnName(n.name):n.displayName,o.aggregationType=angular.isDefined(n.aggregationType)?n.aggregationType:null,o.footerCellTemplate=angular.isDefined(n.footerCellTemplate)?n.footerCellTemplate:null,void 0===n.cellTooltip||!1===n.cellTooltip?o.cellTooltip=!1:!0===n.cellTooltip?o.cellTooltip=function(e,t){return o.grid.getCellValue(e,t)}:"function"==typeof n.cellTooltip?o.cellTooltip=n.cellTooltip:o.cellTooltip=function(e,t){return t.colDef.cellTooltip},void 0===n.headerTooltip||!1===n.headerTooltip?o.headerTooltip=!1:!0===n.headerTooltip?o.headerTooltip=function(e){return e.displayName}:"function"==typeof n.headerTooltip?o.headerTooltip=n.headerTooltip:o.headerTooltip=function(e){return e.colDef.headerTooltip},o.footerCellClass=n.footerCellClass,o.cellClass=n.cellClass,o.headerCellClass=n.headerCellClass,o.cellFilter=n.cellFilter?n.cellFilter:"",o.sortCellFiltered=!!n.sortCellFiltered,o.filterCellFiltered=!!n.filterCellFiltered,o.headerCellFilter=n.headerCellFilter?n.headerCellFilter:"",o.footerCellFilter=n.footerCellFilter?n.footerCellFilter:"",o.visible=e.isNullOrUndefined(n.visible)||n.visible,o.headerClass=n.headerClass,o.enableSorting=void 0===n.enableSorting||n.enableSorting,o.sortingAlgorithm=n.sortingAlgorithm,o.sortDirectionCycle=void 0!==n.sortDirectionCycle?n.sortDirectionCycle:[null,t.ASC,t.DESC],void 0===o.suppressRemoveSort&&(o.suppressRemoveSort=void 0!==n.suppressRemoveSort&&n.suppressRemoveSort),o.enableFiltering=void 0===n.enableFiltering||n.enableFiltering,o.setPropertyOrDefault(n,"menuItems",[]),i&&o.setPropertyOrDefault(n,"sort");var c=[];n.filter?c.push(n.filter):n.filters?c=n.filters:c.push({}),i?(o.setPropertyOrDefault(n,"filter"),o.setPropertyOrDefault(n,"filters",c)):o.filters.length===c.length&&o.filters.forEach(function(e,t){void 0!==c[t].placeholder&&(e.placeholder=c[t].placeholder),void 0!==c[t].ariaLabel&&(e.ariaLabel=c[t].ariaLabel),void 0!==c[t].flags&&(e.flags=c[t].flags),void 0!==c[t].type&&(e.type=c[t].type),void 0!==c[t].selectOptions&&(e.selectOptions=c[t].selectOptions)})},i.prototype.unsort=function(){this.sort={},this.grid.api.core.raise.sortChanged(this.grid,this.grid.getColumnSorting())},i.prototype.getColClass=function(e){var n=t.COL_CLASS_PREFIX+this.uid;return e?"."+n:n},i.prototype.isPinnedLeft=function(){return"left"===this.renderContainer},i.prototype.isPinnedRight=function(){return"right"===this.renderContainer},i.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { min-width: "+this.drawnWidth+"px; max-width: "+this.drawnWidth+"px; }"},i.prototype.getRenderContainer=function(){var e=this,t=e.renderContainer;return null!==t&&""!==t&&void 0!==t||(t="body"),e.grid.renderContainers[t]},i.prototype.showColumn=function(){this.colDef.visible=!0},i.prototype.getAggregationText=function(){var e=this;if(e.colDef.aggregationHideLabel)return"";if(e.colDef.aggregationLabel)return e.colDef.aggregationLabel;switch(e.colDef.aggregationType){case t.aggregationTypes.count:return n.getSafeText("aggregation.count");case t.aggregationTypes.sum:return n.getSafeText("aggregation.sum");case t.aggregationTypes.avg:return n.getSafeText("aggregation.avg");case t.aggregationTypes.min:return n.getSafeText("aggregation.min");case t.aggregationTypes.max:return n.getSafeText("aggregation.max");default:return""}},i.prototype.getCellTemplate=function(){return this.cellTemplatePromise},i.prototype.getCompiledElementFn=function(){return this.compiledElementFnDefer.promise},i}])}(),function(){angular.module("ui.grid").factory("GridOptions",["gridUtil","uiGridConstants",function(e,t){return{initialize:function(n){return n.onRegisterApi=n.onRegisterApi||angular.noop(),n.data=n.data||[],n.columnDefs=n.columnDefs||[],n.excludeProperties=n.excludeProperties||["$$hashKey"],n.enableRowHashing=!1!==n.enableRowHashing,n.rowIdentity=n.rowIdentity||function(t){return e.hashKey(t)},n.getRowIdentity=n.getRowIdentity||function(e){return e.$$hashKey},n.flatEntityAccess=!0===n.flatEntityAccess,n.showHeader=void 0===n.showHeader||n.showHeader,n.showHeader?n.headerRowHeight=void 0!==n.headerRowHeight?n.headerRowHeight:30:n.headerRowHeight=0,n.rowHeight=n.rowHeight||30,n.minRowsToShow=void 0!==n.minRowsToShow?n.minRowsToShow:10,n.showGridFooter=!0===n.showGridFooter,n.showColumnFooter=!0===n.showColumnFooter,n.columnFooterHeight=void 0!==n.columnFooterHeight?n.columnFooterHeight:30,n.gridFooterHeight=void 0!==n.gridFooterHeight?n.gridFooterHeight:30,n.columnWidth=void 0!==n.columnWidth?n.columnWidth:50,n.maxVisibleColumnCount=void 0!==n.maxVisibleColumnCount?n.maxVisibleColumnCount:200,n.virtualizationThreshold=void 0!==n.virtualizationThreshold?n.virtualizationThreshold:20,n.columnVirtualizationThreshold=void 0!==n.columnVirtualizationThreshold?n.columnVirtualizationThreshold:10,n.excessRows=void 0!==n.excessRows?n.excessRows:4,n.scrollThreshold=void 0!==n.scrollThreshold?n.scrollThreshold:4,n.excessColumns=void 0!==n.excessColumns?n.excessColumns:4,n.horizontalScrollThreshold=void 0!==n.horizontalScrollThreshold?n.horizontalScrollThreshold:2,n.aggregationCalcThrottle=void 0!==n.aggregationCalcThrottle?n.aggregationCalcThrottle:500,n.wheelScrollThrottle=void 0!==n.wheelScrollThrottle?n.wheelScrollThrottle:70,n.scrollDebounce=void 0!==n.scrollDebounce?n.scrollDebounce:300,n.enableSorting=!1!==n.enableSorting,n.enableFiltering=!0===n.enableFiltering,n.enableColumnMenus=!1!==n.enableColumnMenus,n.enableVerticalScrollbar=void 0!==n.enableVerticalScrollbar?n.enableVerticalScrollbar:t.scrollbars.ALWAYS,n.enableHorizontalScrollbar=void 0!==n.enableHorizontalScrollbar?n.enableHorizontalScrollbar:t.scrollbars.ALWAYS,n.enableMinHeightCheck=!1!==n.enableMinHeightCheck,n.minimumColumnSize=void 0!==n.minimumColumnSize?n.minimumColumnSize:10,n.rowEquality=n.rowEquality||function(e,t){return e===t},n.headerTemplate=n.headerTemplate||null,n.footerTemplate=n.footerTemplate||"ui-grid/ui-grid-footer",n.gridFooterTemplate=n.gridFooterTemplate||"ui-grid/ui-grid-grid-footer",n.rowTemplate=n.rowTemplate||"ui-grid/ui-grid-row",n.appScopeProvider=n.appScopeProvider||null,n}}}])}(),function(){angular.module("ui.grid").factory("GridRenderContainer",["gridUtil","uiGridConstants",function(e,t){function n(e,t,n){var i=this;i.name=e,i.grid=t,i.visibleRowCache=[],i.visibleColumnCache=[],i.renderedRows=[],i.renderedColumns=[],i.prevScrollTop=0,i.prevScrolltopPercentage=0,i.prevRowScrollIndex=0,i.prevScrollLeft=0,i.prevScrollleftPercentage=0,i.prevColumnScrollIndex=0,i.columnStyles="",i.viewportAdjusters=[],i.hasHScrollbar=!1,i.hasVScrollbar=!1,i.canvasHeightShouldUpdate=!0,i.$$canvasHeight=0,n&&angular.isObject(n)&&angular.extend(i,n),t.registerStyleComputation({priority:5,func:function(){return i.updateColumnWidths(),i.columnStyles}})}return n.prototype.reset=function(){this.visibleColumnCache.length=0,this.visibleRowCache.length=0,this.renderedRows.length=0,this.renderedColumns.length=0},n.prototype.containsColumn=function(e){return-1!==this.visibleColumnCache.indexOf(e)},n.prototype.minRowsToRender=function(){for(var e=this,t=0,n=0,i=e.getViewportHeight(),o=e.visibleRowCache.length-1;n<i&&o>=0;o--)n+=e.visibleRowCache[o].height,t++;return t},n.prototype.minColumnsToRender=function(){for(var e=this,t=this.getViewportWidth(),n=0,i=0,o=0;o<e.visibleColumnCache.length;o++){var r=e.visibleColumnCache[o];if(i<t)i+=r.drawnWidth?r.drawnWidth:0,n++;else{for(var a=0,s=o;s>=o-n;s--)a+=e.visibleColumnCache[s].drawnWidth?e.visibleColumnCache[s].drawnWidth:0;a<t&&n++}}return n},n.prototype.getVisibleRowCount=function(){return this.visibleRowCache.length},n.prototype.registerViewportAdjuster=function(e){this.viewportAdjusters.push(e)},n.prototype.removeViewportAdjuster=function(e){var t=this.viewportAdjusters.indexOf(e);t>-1&&this.viewportAdjusters.splice(t,1)},n.prototype.getViewportAdjustment=function(){var e=this,t={height:0,width:0};return e.viewportAdjusters.forEach(function(e){t=e.call(this,t)}),t},n.prototype.getMargin=function(e){var t=this,n=0;return t.viewportAdjusters.forEach(function(t){var i=t.call(this,{height:0,width:0});i.side&&i.side===e&&(n+=-1*i.width)}),n},n.prototype.getViewportHeight=function(){var e=this,t=e.headerHeight?e.headerHeight:e.grid.headerHeight,n=e.grid.gridHeight-t-e.grid.footerHeight;return n+=e.getViewportAdjustment().height},n.prototype.getViewportWidth=function(){var e=this,t=e.grid.gridWidth;return t+=e.getViewportAdjustment().width},n.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},n.prototype.getCanvasHeight=function(){var e=this;if(!e.canvasHeightShouldUpdate)return e.$$canvasHeight;var t=e.$$canvasHeight;return e.$$canvasHeight=0,e.visibleRowCache.forEach(function(t){e.$$canvasHeight+=t.height}),e.canvasHeightShouldUpdate=!1,e.grid.api.core.raise.canvasHeightChanged(t,e.$$canvasHeight),e.$$canvasHeight},n.prototype.getVerticalScrollLength=function(){return this.getCanvasHeight()-this.getViewportHeight()+this.grid.scrollbarHeight},n.prototype.getCanvasWidth=function(){return this.canvasWidth},n.prototype.setRenderedRows=function(e){this.renderedRows.length=e.length;for(var t=0;t<e.length;t++)this.renderedRows[t]=e[t]},n.prototype.setRenderedColumns=function(e){this.renderedColumns.length=e.length;for(var t=0;t<e.length;t++)this.renderedColumns[t]=e[t];this.updateColumnOffset()},n.prototype.updateColumnOffset=function(){for(var e=0,t=0;t<this.currentFirstColumn;t++)e+=this.visibleColumnCache[t].drawnWidth;this.columnOffset=e},n.prototype.scrollVertical=function(e){var n=-1;if(e!==this.prevScrollTop){var i=e-this.prevScrollTop;i>0&&(this.grid.scrollDirection=t.scrollDirection.DOWN),i<0&&(this.grid.scrollDirection=t.scrollDirection.UP);return n=e/this.getVerticalScrollLength(),n>1&&(n=1),n<0&&(n=0),this.adjustScrollVertical(e,n),n}},n.prototype.scrollHorizontal=function(e){var n=-1;if(e!==this.prevScrollLeft){var i=e-this.prevScrollLeft;i>0&&(this.grid.scrollDirection=t.scrollDirection.RIGHT),i<0&&(this.grid.scrollDirection=t.scrollDirection.LEFT);var o=this.canvasWidth-this.getViewportWidth();return n=0!==o?e/o:0,this.adjustScrollHorizontal(e,n),n}},n.prototype.adjustScrollVertical=function(e,t,n){(this.prevScrollTop!==e||n)&&(void 0!==e&&void 0!==e&&null!==e||(e=(this.getCanvasHeight()-this.getViewportHeight())*t),this.adjustRows(e,t,!1),this.prevScrollTop=e,this.prevScrolltopPercentage=t,this.grid.queueRefresh())},n.prototype.adjustScrollHorizontal=function(e,t,n){(this.prevScrollLeft!==e||n)&&(void 0!==e&&void 0!==e&&null!==e||(e=(this.getCanvasWidth()-this.getViewportWidth())*t),this.adjustColumns(e,t),this.prevScrollLeft=e,this.prevScrollleftPercentage=t,this.grid.queueRefresh())},n.prototype.adjustRows=function(e,t,n){var i=this,o=i.minRowsToRender(),r=i.visibleRowCache,a=r.length-o;void 0!==t&&null!==t||!e||(t=e/i.getVerticalScrollLength());var s=Math.ceil(Math.min(a,a*t));s>a&&(s=a);var l=[];if(r.length>i.grid.options.virtualizationThreshold){if(void 0!==e&&null!==e){if(!i.grid.suppressParentScrollDown&&i.prevScrollTop<e&&s<i.prevRowScrollIndex+i.grid.options.scrollThreshold&&s<a)return;if(!i.grid.suppressParentScrollUp&&i.prevScrollTop>e&&s>i.prevRowScrollIndex-i.grid.options.scrollThreshold&&s<a)return}var c={},d={};c=Math.max(0,s-i.grid.options.excessRows),d=Math.min(r.length,s+o+i.grid.options.excessRows),l=[c,d]}else{var u=i.visibleRowCache.length;l=[0,Math.max(u,o+i.grid.options.excessRows)]}i.updateViewableRowRange(l),i.prevRowScrollIndex=s},n.prototype.adjustColumns=function(e,t){var n=this,i=n.minColumnsToRender(),o=n.visibleColumnCache,r=o.length-i;if((void 0===t||null===t)&&e){t=e/(n.getCanvasWidth()-n.getViewportWidth())}var a=Math.ceil(Math.min(r,r*t));a>r&&(a=r);var s=[];if(o.length>n.grid.options.columnVirtualizationThreshold&&n.getCanvasWidth()>n.getViewportWidth()){s=[Math.max(0,a-n.grid.options.excessColumns),Math.min(o.length,a+i+n.grid.options.excessColumns)]}else{var l=n.visibleColumnCache.length;s=[0,Math.max(l,i+n.grid.options.excessColumns)]}n.updateViewableColumnRange(s),n.prevColumnScrollIndex=a},n.prototype.updateViewableRowRange=function(e){var t=this.visibleRowCache.slice(e[0],e[1]);this.currentTopRow=e[0],this.setRenderedRows(t)},n.prototype.updateViewableColumnRange=function(e){var t=this.visibleColumnCache.slice(e[0],e[1]);this.currentFirstColumn=e[0],this.setRenderedColumns(t)},n.prototype.headerCellWrapperStyle=function(){var e=this;if(0!==e.currentFirstColumn){var t=e.columnOffset;return e.grid.isRTL()?{"margin-right":t+"px"}:{"margin-left":t+"px"}}return null},n.prototype.updateColumnWidths=function(){var t=this,n=[],i=0,o=0,r="",a=t.grid.getViewportWidth()-t.grid.scrollbarWidth,s=[];angular.forEach(t.grid.renderContainers,function(e,t){s=s.concat(e.visibleColumnCache)}),s.forEach(function(t,r){var s=0;t.visible&&(angular.isNumber(t.width)?(s=parseInt(t.width,10),o+=s,t.drawnWidth=s):e.endsWith(t.width,"%")?(s=parseInt(parseInt(t.width.replace(/%/g,""),10)/100*a),s>t.maxWidth&&(s=t.maxWidth),s<t.minWidth&&(s=t.minWidth),o+=s,t.drawnWidth=s):angular.isString(t.width)&&-1!==t.width.indexOf("*")&&(i+=t.width.length,n.push(t)))});var l=a-o;if(n.length>0){var c=l/i;n.forEach(function(e){var t=parseInt(e.width.length*c,10);t>e.maxWidth&&(t=e.maxWidth),t<e.minWidth&&(t=e.minWidth),o+=t,e.drawnWidth=t})}for(var d=function(e){e.drawnWidth<e.maxWidth&&u>0&&(e.drawnWidth++,o++,u--,p=!0)},u=a-o,p=!0;u>0&&p;)p=!1,n.forEach(d);var g=function(e){e.drawnWidth>e.minWidth&&m>0&&(e.drawnWidth--,o--,m--,p=!0)},m=o-a;for(p=!0;m>0&&p;)p=!1,n.forEach(g);var f=0;t.visibleColumnCache.forEach(function(e){e.visible&&(f+=e.drawnWidth)}),s.forEach(function(e){r+=e.getColClassDefinition()}),t.canvasWidth=f,this.columnStyles=r},n.prototype.needsHScrollbarPlaceholder=function(){return this.grid.options.enableHorizontalScrollbar&&!this.hasHScrollbar&&!this.grid.disableScrolling},n.prototype.getViewportStyle=function(){var e=this,n={};return e.hasHScrollbar=!1,e.hasVScrollbar=!1,e.grid.disableScrolling?(n["overflow-x"]="hidden",n["overflow-y"]="hidden",n):("body"===e.name?(e.hasHScrollbar=e.grid.options.enableHorizontalScrollbar!==t.scrollbars.NEVER,e.grid.isRTL()?e.grid.hasLeftContainerColumns()||(e.hasVScrollbar=e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER):e.grid.hasRightContainerColumns()||(e.hasVScrollbar=e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER)):"left"===e.name?e.hasVScrollbar=!!e.grid.isRTL()&&e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER:e.hasVScrollbar=!e.grid.isRTL()&&e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER,n["overflow-x"]=e.hasHScrollbar?"scroll":"hidden",n["overflow-y"]=e.hasVScrollbar?"scroll":"hidden",n)},n}])}(),function(){angular.module("ui.grid").factory("GridRow",["gridUtil",function(e){function t(t,n,i){this.grid=i,this.entity=t,this.uid=e.nextUid(),this.visible=!0,this.$$height=i.options.rowHeight}return Object.defineProperty(t.prototype,"height",{get:function(){return this.$$height},set:function(e){e!==this.$$height&&(this.grid.updateCanvasHeight(),this.$$height=e)}}),t.prototype.getQualifiedColField=function(e){return"row."+this.getEntityQualifiedColField(e)},t.prototype.getEntityQualifiedColField=function(t){return e.preEval("entity."+t.field)},t.prototype.setRowInvisible=function(e){e&&e.setThisRowInvisible&&e.setThisRowInvisible("user")},t.prototype.clearRowInvisible=function(e){e&&e.clearThisRowInvisible&&e.clearThisRowInvisible("user")},t.prototype.setThisRowInvisible=function(e,t){this.invisibleReason||(this.invisibleReason={}),this.invisibleReason[e]=!0,this.evaluateRowVisibility(t)},t.prototype.clearThisRowInvisible=function(e,t){void 0!==this.invisibleReason&&delete this.invisibleReason[e],this.evaluateRowVisibility(t)},t.prototype.evaluateRowVisibility=function(e){var t=!0;void 0!==this.invisibleReason&&angular.forEach(this.invisibleReason,function(e,n){e&&(t=!1)}),void 0!==this.visible&&this.visible===t||(this.visible=t,e||(this.grid.queueGridRefresh(),this.grid.api.core.raise.rowsVisibleChanged(this)))},t}])}(),function(){angular.module("ui.grid").factory("GridRowColumn",["$parse","$filter",function(e,t){var n=function e(t,n){if(!(this instanceof e))throw"Using GridRowColumn as a function insead of as a constructor. Must be called with `new` keyword";this.row=t,this.col=n};return n.prototype.getIntersectionValueRaw=function(){return e(this.row.getEntityQualifiedColField(this.col))(this.row)},n.prototype.getIntersectionValueFiltered=function(){var e=this.getIntersectionValueRaw();if(this.col.cellFilter&&""!==this.col.cellFilter){var n=function(e){try{return t(e)}catch(e){return null}},i=n(this.col.cellFilter);if(i)e=i(e);else{var o,r=/([^:]*):([^:]*):?([\s\S]+)?/;null!==(o=r.exec(this.col.cellFilter))&&(e=t(o[1])(e,o[2],o[3]))}}return e},n}])}(),function(){angular.module("ui.grid").factory("ScrollEvent",["gridUtil",function(e){function t(t,n,i,o){var r=this;if(!t)throw new Error("grid argument is required");r.grid=t,r.source=o,r.withDelay=!0,r.sourceRowContainer=n,r.sourceColContainer=i,r.newScrollLeft=null,r.newScrollTop=null,r.x=null,r.y=null,r.verticalScrollLength=-9999999,r.horizontalScrollLength=-999999,r.fireThrottledScrollingEvent=e.throttle(function(e){r.grid.scrollContainers(e,r)},r.grid.options.wheelScrollThrottle,{trailing:!0})}return t.prototype.getNewScrollLeft=function(t,n){var i=this;if(!i.newScrollLeft){var o,r=t.getCanvasWidth()-t.getViewportWidth(),a=e.normalizeScrollLeft(n,i.grid);if(void 0!==i.x.percentage&&void 0!==i.x.percentage)o=i.x.percentage;else{if(void 0===i.x.pixels||void 0===i.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");o=i.x.percentage=(a+i.x.pixels)/r}return Math.max(0,o*r)}return i.newScrollLeft},t.prototype.getNewScrollTop=function(e,t){var n=this;if(!n.newScrollTop){var i,o=e.getVerticalScrollLength(),r=t[0].scrollTop;if(void 0!==n.y.percentage&&void 0!==n.y.percentage)i=n.y.percentage;else{if(void 0===n.y.pixels||void 0===n.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");i=n.y.percentage=(r+n.y.pixels)/o}return Math.max(0,i*o)}return n.newScrollTop},t.prototype.atTop=function(e){return this.y&&(0===this.y.percentage||this.verticalScrollLength<0)&&0===e},t.prototype.atBottom=function(e){return this.y&&(1===this.y.percentage||0===this.verticalScrollLength)&&e>0},t.prototype.atLeft=function(e){return this.x&&(0===this.x.percentage||this.horizontalScrollLength<0)&&0===e},t.prototype.atRight=function(e){return this.x&&(1===this.x.percentage||0===this.horizontalScrollLength)&&e>0},t.Sources={ViewPortScroll:"ViewPortScroll",RenderContainerMouseWheel:"RenderContainerMouseWheel",RenderContainerTouchMove:"RenderContainerTouchMove",Other:99},t}])}(),function(){angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$compile","$templateCache","uiGridConstants","Grid","GridColumn","GridRow",function(e,t,n,i,o,r,a,s){var l={createGrid:function(i){i=void 0!==i?i:{},i.id=e.newId();var o=new r(i);if(o.options.rowTemplate){var a=t.defer();o.getRowTemplateFn=a.promise,e.getTemplate(o.options.rowTemplate).then(function(e){var t=n(e);a.resolve(t)},function(e){throw new Error("Couldn't fetch/use row template '"+o.options.rowTemplate+"'")})}return o.registerColumnBuilder(l.defaultColumnBuilder),o.registerRowBuilder(l.rowTemplateAssigner),o.registerRowsProcessor(function(e){return e.forEach(function(e){e.evaluateRowVisibility(!0)},50),e}),o.registerColumnsProcessor(function(e){return e.forEach(function(e){e.visible=!0}),e},50),o.registerColumnsProcessor(function(e){return e.forEach(function(e){!1===e.colDef.visible&&(e.visible=!1)}),e},50),o.registerRowsProcessor(o.searchRows,100),o.options.externalSort&&angular.isFunction(o.options.externalSort)?o.registerRowsProcessor(o.options.externalSort,200):o.registerRowsProcessor(o.sortByColumn,200),o},defaultColumnBuilder:function(n,i,r){var a=[],s=function(t,r,s,l,c){n[t]?i[r]=n[t]:i[r]=s,a.push(e.getTemplate(i[r]).then(function(e){angular.isFunction(e)&&(e=e());var n="cellTooltip"===c?"col.cellTooltip(row,col)":"col.headerTooltip(col)";c&&!1===i[c]?e=e.replace(o.TOOLTIP,""):c&&i[c]&&(e=e.replace(o.TOOLTIP,'title="{{'+n+' CUSTOM_FILTERS }}"')),i[t]=l?e.replace(o.CUSTOM_FILTERS,function(){return i[l]?"|"+i[l]:""}):e},function(e){throw new Error("Couldn't fetch/use colDef."+t+" '"+n[t]+"'")}))};return s("cellTemplate","providedCellTemplate","ui-grid/uiGridCell","cellFilter","cellTooltip"),i.cellTemplatePromise=a[0],s("headerCellTemplate","providedHeaderCellTemplate","ui-grid/uiGridHeaderCell","headerCellFilter","headerTooltip"),s("footerCellTemplate","providedFooterCellTemplate","ui-grid/uiGridFooterCell","footerCellFilter"),s("filterHeaderTemplate","providedFilterHeaderTemplate","ui-grid/ui-grid-filter"),i.compiledElementFnDefer=t.defer(),t.all(a)},rowTemplateAssigner:function(i){var o=this;if(i.rowTemplate){var r=t.defer();i.getRowTemplateFn=r.promise,e.getTemplate(i.rowTemplate).then(function(e){var t=n(e);r.resolve(t)},function(e){throw new Error("Couldn't fetch/use row template '"+i.rowTemplate+"'")})}else i.rowTemplate=o.options.rowTemplate,i.getRowTemplateFn=o.getRowTemplateFn;return i.getRowTemplateFn}};return l}])}(),function(){function e(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}angular.module("ui.grid").service("rowSearcher",["gridUtil","uiGridConstants",function(t,n){var i=n.filter.CONTAINS,o={};return o.getTerm=function(e){if(void 0===e.term)return e.term;var t=e.term;return"string"==typeof t&&(t=t.trim()),t},o.stripTerm=function(t){var n=o.getTerm(t);return"string"==typeof n?e(n.replace(/(^\*|\*$)/g,"")):n},o.guessCondition=function(e){if(void 0===e.term||!e.term)return i;var t=o.getTerm(e);if(/\*/.test(t)){var n="";e.flags&&e.flags.caseSensitive||(n+="i");var r=t.replace(/(\\)?\*/g,function(e,t){return t?e:"[\\s\\S]*?"});return new RegExp("^"+r+"$",n)}return i},o.setupFilters=function(e){for(var i=[],r=e.length,a=0;a<r;a++){var s=e[a];if(s.noTerm||!t.isNullOrUndefined(s.term)){var l={},c="";s.flags&&s.flags.caseSensitive||(c+="i"),t.isNullOrUndefined(s.term)||(l.term=o.stripTerm(s)),s.condition?l.condition=s.condition:l.condition=o.guessCondition(s),l.flags=angular.extend({caseSensitive:!1,date:!1},s.flags),l.condition===n.filter.STARTS_WITH&&(l.startswithRE=new RegExp("^"+l.term,c)),l.condition===n.filter.ENDS_WITH&&(l.endswithRE=new RegExp(l.term+"$",c)),l.condition===n.filter.CONTAINS&&(l.containsRE=new RegExp(l.term,c)),l.condition===n.filter.EXACT&&(l.exactRE=new RegExp("^"+l.term+"$",c)),i.push(l)}}return i},o.runColumnFilter=function(e,t,i,o){var r,a=typeof o.condition,s=o.term;if(r=i.filterCellFiltered?e.getCellDisplayValue(t,i):e.getCellValue(t,i),o.condition instanceof RegExp)return o.condition.test(r);if("function"===a)return o.condition(s,r,t,i);if(o.startswithRE)return o.startswithRE.test(r);if(o.endswithRE)return o.endswithRE.test(r);if(o.containsRE)return o.containsRE.test(r);if(o.exactRE)return o.exactRE.test(r);if(o.condition===n.filter.NOT_EQUAL)return!new RegExp("^"+s+"$").exec(r);if("number"==typeof r&&"string"==typeof s){var l=parseFloat(s.replace(/\\\./,".").replace(/\\\-/,"-"));isNaN(l)||(s=l)}return!0===o.flags.date&&(r=new Date(r),s=new Date(s.replace(/\\/g,""))),o.condition===n.filter.GREATER_THAN?r>s:o.condition===n.filter.GREATER_THAN_OR_EQUAL?r>=s:o.condition===n.filter.LESS_THAN?r<s:o.condition!==n.filter.LESS_THAN_OR_EQUAL||r<=s},o.searchColumn=function(e,t,n,i){if(e.options.useExternalFiltering)return!0;for(var r=i.length,a=0;a<r;a++){var s=i[a];if(!o.runColumnFilter(e,t,n,s))return!1}return!0},o.search=function(e,n,i){if(n){if(!e.options.enableFiltering)return n;for(var r=[],a=i.length,s=function(e){var n=!1;return e.forEach(function(e){(!t.isNullOrUndefined(e.term)&&""!==e.term||e.noTerm)&&(n=!0)}),n},l=0;l<a;l++){var c=i[l];void 0!==c.filters&&s(c.filters)&&r.push({col:c,filters:o.setupFilters(c.filters)})}if(r.length>0){for(var d=function(e,t,n,i){t.visible&&!o.searchColumn(e,t,n,i)&&(t.visible=!1)},u=function(e,t){for(var i=n.length,o=0;o<i;o++)d(e,n[o],t.col,t.filters)},p=r.length,g=0;g<p;g++)u(e,r[g]);e.api.core.raise.rowsVisibleChanged&&e.api.core.raise.rowsVisibleChanged()}return n}},o}])}(),function(){angular.module("ui.grid").service("rowSorter",["$parse","uiGridConstants",function(e,t){var n="("+t.CURRENCY_SYMBOLS.map(function(e){return"\\"+e}).join("|")+")?",i=(new RegExp("^[-+]?"+n+"[\\d,.]+"+n+"%?$"),{colSortFnCache:{}});return i.guessSortFn=function(e){switch(e){case"number":return i.sortNumber;case"numberStr":return i.sortNumberStr;case"boolean":return i.sortBool;case"string":return i.sortAlpha;case"date":return i.sortDate;case"object":return i.basicSort;default:throw new Error("No sorting function found for type:"+e)}},i.handleNulls=function(e,t){if(!e&&0!==e&&!1!==e||!t&&0!==t&&!1!==t){if(!e&&0!==e&&!1!==e&&!t&&0!==t&&!1!==t)return 0;if(!e&&0!==e&&!1!==e)return 1;if(!t&&0!==t&&!1!==t)return-1}return null},i.basicSort=function(e,t){var n=i.handleNulls(e,t);return null!==n?n:e===t?0:e<t?-1:1},i.sortNumber=function(e,t){var n=i.handleNulls(e,t);return null!==n?n:e-t},i.sortNumberStr=function(e,t){var n=i.handleNulls(e,t);if(null!==n)return n;var o,r,a=!1,s=!1;return o=parseFloat(e.replace(/[^0-9.-]/g,"")),isNaN(o)&&(a=!0),r=parseFloat(t.replace(/[^0-9.-]/g,"")),isNaN(r)&&(s=!0),a&&s?0:a?1:s?-1:o-r},i.sortAlpha=function(e,t){var n=i.handleNulls(e,t);if(null!==n)return n;var o=e.toString().toLowerCase(),r=t.toString().toLowerCase();return o===r?0:o.localeCompare(r)},i.sortDate=function(e,t){var n=i.handleNulls(e,t);if(null!==n)return n;e instanceof Date||(e=new Date(e)),t instanceof Date||(t=new Date(t));var o=e.getTime(),r=t.getTime();return o===r?0:o<r?-1:1},i.sortBool=function(e,t){var n=i.handleNulls(e,t);return null!==n?n:e&&t?0:e||t?e?1:-1:0},i.getSortFn=function(e,t,n){var o;return i.colSortFnCache[t.colDef.name]?o=i.colSortFnCache[t.colDef.name]:void 0!==t.sortingAlgorithm?(o=t.sortingAlgorithm,i.colSortFnCache[t.colDef.name]=t.sortingAlgorithm):t.sortCellFiltered&&t.cellFilter?(o=i.sortAlpha,i.colSortFnCache[t.colDef.name]=o):(o=i.guessSortFn(t.colDef.type),o?i.colSortFnCache[t.colDef.name]=o:o=i.sortAlpha),o},i.prioritySort=function(e,t){return void 0!==e.sort.priority&&void 0!==t.sort.priority?e.sort.priority<t.sort.priority?-1:e.sort.priority===t.sort.priority?0:1:e.sort.priority||void 0===e.sort.priority?-1:t.sort.priority||void 0===t.sort.priority?1:0},i.sort=function(e,n,o){if(n){if(e.options.useExternalSorting)return n;var r=[];if(o.forEach(function(e){!e.sort||e.sort.ignoreSort||!e.sort.direction||e.sort.direction!==t.ASC&&e.sort.direction!==t.DESC||r.push(e)}),r=r.sort(i.prioritySort),0===r.length)return n;var a,s,l=function(e,t){e.entity.$$uiGridIndex=t};n.forEach(l);var c=n.slice(0),d=function(n,o){for(var l,d=0,u=0;0===d&&u<r.length;){a=r[u],s=r[u].sort.direction,l=i.getSortFn(e,a,c);var p,g;a.sortCellFiltered?(p=e.getCellDisplayValue(n,a),g=e.getCellDisplayValue(o,a)):(p=e.getCellValue(n,a),g=e.getCellValue(o,a)),d=l(p,g,n,o,s),u++}return 0===d?n.entity.$$uiGridIndex-o.entity.$$uiGridIndex:s===t.ASC?d:0-d},u=n.sort(d),p=function(e,t){delete e.entity.$$uiGridIndex};return n.forEach(p),u}},i}])}(),function(){function e(e){var t=e;return void 0!==t.length&&t.length&&(t=e[0]),t.ownerDocument.defaultView.getComputedStyle(t,null)}function t(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,a=0,s=["Top","Right","Bottom","Left"];r<4;r+=2){var l=s[r];if("margin"===n){var c=parseFloat(o[n+l]);isNaN(c)||(a+=c)}if(i){if("content"===n){var d=parseFloat(o["padding"+l]);isNaN(d)||(a-=d)}if("margin"!==n){var u=parseFloat(o["border"+l+"Width"]);isNaN(u)||(a-=u)}}else{var p=parseFloat(o["padding"+l]);if(isNaN(p)||(a+=p),"padding"!==n){var g=parseFloat(o["border"+l+"Width"]);isNaN(g)||(a+=g)}}}return a}function n(n,i,o){var r,s=!0,l=e(n),c="border-box"===l.boxSizing;if(r<=0||null==r){if(r=l[i],(r<0||null==r)&&(r=n.style[i]),a.test(r))return r;s=c&&!0,r=parseFloat(r)||0}return r+t(n,i,o||(c?"border":"content"),s,l)}function i(t){t=angular.element(t)[0];var n=t.parentElement;return n||(n=document.getElementsByTagName("body")[0]),parseInt(e(n).fontSize)||parseInt(e(t).fontSize)||16}var o,r=angular.module("ui.grid");"function"!=typeof Function.prototype.bind&&(o=function(){var e=Array.prototype.slice;return function(t){var n=this,i=e.call(arguments,1);return i.length?function(){return arguments.length?n.apply(t,i.concat(e.call(arguments))):n.apply(t,i)}:function(){return arguments.length?n.apply(t,arguments):n.call(t)}}});var a=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),s=/^(block|none|table(?!-c[ea]).+)/,l={position:"absolute",visibility:"hidden",display:"block"},c=["0","0","0","0"],d="uiGrid-";r.service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$interval","$injector","$q","$interpolate","uiGridConstants",function(r,a,u,p,g,m,f,h,v,y,b){function w(e,t){var n=angular.element(this),i=0,o=0,r=0,a=0;if(t.originalEvent&&(t=t.originalEvent),"detail"in t&&(r=-1*t.detail),"wheelDelta"in t&&(r=t.wheelDelta),"wheelDeltaY"in t&&(r=t.wheelDeltaY),"wheelDeltaX"in t&&(o=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(o=-1*r,r=0),i=0===r?o:r,"deltaY"in t&&(r=-1*t.deltaY,i=r),"deltaX"in t&&(o=t.deltaX,0===r&&(i=-1*o)),0!==r||0!==o){if(1===t.deltaMode){var s=n.data("mousewheel-line-height");i*=s,r*=s,o*=s}else if(2===t.deltaMode){var l=n.data("mousewheel-page-height");i*=l,r*=l,o*=l}a=Math.max(Math.abs(r),Math.abs(o)),(!I||a<I)&&(I=a,T(t,a)&&(I/=40)),i=Math[i>=1?"floor":"ceil"](i/I),o=Math[o>=1?"floor":"ceil"](o/I),r=Math[r>=1?"floor":"ceil"](r/I),t.deltaMode=0;var c={originalEvent:t,deltaX:o,deltaY:r,deltaFactor:I,preventDefault:function(){t.preventDefault()},stopPropagation:function(){t.stopPropagation()}};E&&clearTimeout(E),E=setTimeout(C,200),e.call(n[0],c)}}function C(){I=null}function T(e,t){return"mousewheel"===e.type&&t%120==0}var S={augmentWidthOrHeight:t,getStyles:e,createBoundedWrapper:function(e,t){return function(){return t.apply(e,arguments)}},readableColumnName:function(e){return void 0===e||void 0===e||null===e?e:("string"!=typeof e&&(e=String(e)),e.replace(/_+/g," ").replace(/^[A-Z]+$/,function(e){return angular.lowercase(angular.uppercase(e.charAt(0))+e.slice(1))}).replace(/([\w\u00C0-\u017F]+)/g,function(e){return angular.uppercase(e.charAt(0))+e.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(e,t){var n=[];if(!e||void 0===e[0]||void 0===e[0])return[];angular.isUndefined(t)&&(t=[]);var i=e[0];return angular.forEach(i,function(e,i){-1===t.indexOf(i)&&n.push({name:i})}),n},newId:function(){var e=(new Date).getTime();return function(){return e+=1}}(),getTemplate:function(e){if(g.get(e))return S.postProcessTemplate(g.get(e));if(e.hasOwnProperty("then"))return e.then(S.postProcessTemplate);try{if(angular.element(e).length>0)return v.when(e).then(S.postProcessTemplate)}catch(e){}return S.logDebug("fetching url",e),p({method:"GET",url:e}).then(function(t){var n=t.data.trim();return g.put(e,n),n},function(t){throw new Error("Could not get template "+e+": "+t)}).then(S.postProcessTemplate)},postProcessTemplate:function(e){var t=y.startSymbol(),n=y.endSymbol();return"{{"===t&&"}}"===n||(e=e.replace(/\{\{/g,t),e=e.replace(/\}\}/g,n)),v.when(e)},guessType:function(e){var t=typeof e;switch(t){case"number":case"boolean":case"string":return t;default:return angular.isDate(e)?"date":"object"}},elementWidth:function(e){},elementHeight:function(e){},getScrollbarWidth:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),t-i},swap:function(e,t,n,i){var o,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];o=n.apply(e,i||[]);for(r in t)e.style[r]=a[r];return o},fakeElement:function(e,t,n,i){var o,r,a=angular.element(e).clone()[0];for(r in t)a.style[r]=t[r];return angular.element(document.body).append(a),o=n.call(a,a),angular.element(a).remove(),o},normalizeWheelEvent:function(e){var t,n,i,o=e||window.event,r=([].slice.call(arguments,1),0),a=0,s=0,l=0,c=0;return o.originalEvent&&(o=o.originalEvent),o.wheelDelta&&(r=o.wheelDelta),o.detail&&(r=-1*o.detail),s=r,void 0!==o.axis&&o.axis===o.HORIZONTAL_AXIS&&(s=0,a=-1*r),o.deltaY&&(s=-1*o.deltaY,r=s),o.deltaX&&(a=o.deltaX,r=-1*a),void 0!==o.wheelDeltaY&&(s=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(a=o.wheelDeltaX),l=Math.abs(r),(!t||l<t)&&(t=l),c=Math.max(Math.abs(s),Math.abs(a)),(!n||c<n)&&(n=c),i=r>0?"floor":"ceil",r=Math[i](r/t),a=Math[i](a/n),s=Math[i](s/n),{delta:r,deltaX:a,deltaY:s}},isTouchEnabled:function(){var e;return("ontouchstart"in a||a.DocumentTouch&&u instanceof DocumentTouch)&&(e=!0),e},isNullOrUndefined:function(e){return void 0===e||null===e},endsWith:function(e,t){return!(!e||!t||"string"!=typeof e)&&-1!==e.indexOf(t,e.length-t.length)},arrayContainsObjectWithProperty:function(e,t,n){var i=!1;return angular.forEach(e,function(e){e[t]===n&&(i=!0)}),i},numericAndNullSort:function(e,t){return null===e?1:null===t?-1:null===e&&null===t?0:e-t},disableAnimations:function(e){var t;try{t=h.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?t.enabled(e,!1):t.enabled(!1,e)}catch(e){}},enableAnimations:function(e){var t;try{return t=h.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?t.enabled(e,!0):t.enabled(!0,e),t}catch(e){}},nextUid:function(){for(var e,t=c.length;t;){if(t--,57===(e=c[t].charCodeAt(0)))return c[t]="A",d+c.join("");if(90!==e)return c[t]=String.fromCharCode(e+1),d+c.join("");c[t]="0"}return c.unshift("0"),d+c.join("")},hashKey:function(e){var t,n=typeof e;return"object"===n&&null!==e?"function"==typeof(t=e.$$hashKey)?t=e.$$hashKey():void 0!==e.$$hashKey&&e.$$hashKey?t=e.$$hashKey:void 0===t&&(t=e.$$hashKey=S.nextUid()):t=e,n+":"+t},resetUids:function(){c=["0","0","0"]},logError:function(e){b.LOG_ERROR_MESSAGES&&r.error(e)},logWarn:function(e){b.LOG_WARN_MESSAGES&&r.warn(e)},logDebug:function(){b.LOG_DEBUG_MESSAGES&&r.debug.apply(r,arguments)}};S.focus={queue:[],byId:function(e,t){this._purgeQueue();var n=m(function(){var n=(t&&t.id?t.id+"-":"")+e,i=a.document.getElementById(n);i?i.focus():S.logWarn("[focus.byId] Element id "+n+" was not found.")});return this.queue.push(n),n},byElement:function(e){if(!angular.isElement(e))return S.logWarn("Trying to focus on an element that isn't an element."),v.reject("not-element");e=angular.element(e),this._purgeQueue();var t=m(function(){e&&e[0].focus()});return this.queue.push(t),t},bySelector:function(e,t,n){var i=this;if(!angular.isElement(e))throw new Error("The parent element is not an element.");e=angular.element(e);var o=function(){var n=e[0].querySelector(t);return i.byElement(n)};if(this._purgeQueue(),n){var r=m(o);return this.queue.push(m(o)),r}return o()},_purgeQueue:function(){this.queue.forEach(function(e){m.cancel(e)}),this.queue=[]}},["width","height"].forEach(function(t){var i=angular.uppercase(t.charAt(0))+t.substr(1);S["element"+i]=function(i,o){var r=i;if(r&&void 0!==r.length&&r.length&&(r=i[0]),r){var a=e(r);return 0===r.offsetWidth&&s.test(a.display)?S.swap(r,l,function(){return n(r,t,o)}):n(r,t,o)}return null},S["outerElement"+i]=function(e,t){return e?S["element"+i].call(this,e,t?"margin":"border"):null}}),S.closestElm=function(e,t){void 0!==e.length&&e.length&&(e=e[0]);var n;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(n=e,!0)});for(var i;null!==e;){if(null!==(i=e.parentElement)&&i[n](t))return i;e=i}return null},S.type=function(e){return Function.prototype.toString.call(e.constructor).match(/function (.*?)\(/)[1]},S.getBorderSize=function(t,n){void 0!==t.length&&t.length&&(t=t[0]);var i=e(t);n=n?"border"+n.charAt(0).toUpperCase()+n.slice(1):"border",n+="Width";var o=parseInt(i[n],10);return isNaN(o)?0:o},S.detectBrowser=function(){var e=a.navigator.userAgent,t={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer|trident\//i};for(var n in t)if(t[n].test(e))return n;return"unknown"},S.rtlScrollType=function e(){if(e.type)return e.type;var t=angular.element('<div dir="rtl" style="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll">A</div>')[0],n="reverse";return document.body.appendChild(t),t.scrollLeft>0?n="default":(t.scrollLeft=1,0===t.scrollLeft&&(n="negative")),angular.element(t).remove(),e.type=n,n},S.normalizeScrollLeft=function(e,t){void 0!==e.length&&e.length&&(e=e[0]);var n=e.scrollLeft;if(t.isRTL())switch(S.rtlScrollType()){case"default":return e.scrollWidth-n-e.clientWidth;case"negative":return Math.abs(n);case"reverse":return n}return n},S.denormalizeScrollLeft=function(e,t,n){if(void 0!==e.length&&e.length&&(e=e[0]),n.isRTL())switch(S.rtlScrollType()){case"default":return e.scrollWidth-e.clientWidth-t;case"negative":return-1*t;case"reverse":return t}return t},S.preEval=function(e){var t=b.BRACKET_REGEXP.exec(e);if(t)return(t[1]?S.preEval(t[1]):t[1])+t[2]+(t[3]?S.preEval(t[3]):t[3]);e=e.replace(b.APOS_REGEXP,"\\'");var n=e.split(b.DOT_REGEXP),i=[n.shift()];return angular.forEach(n,function(e){i.push(e.replace(b.FUNC_REGEXP,"']$1"))}),i.join("['")},S.debounce=function(e,t,n){function i(){a=this,r=arguments;var i=function(){o=null,n||(s=e.apply(a,r))},l=n&&!o;return o&&m.cancel(o),o=m(i,t,!1),l&&(s=e.apply(a,r)),s}var o,r,a,s;return i.cancel=function(){m.cancel(o),o=null},i},S.throttle=function(e,t,n){function i(t){a=+new Date,e.apply(o,r),f(function(){s=null},0,1,!1)}n=n||{};var o,r,a=0,s=null;return function(){if(o=this,r=arguments,null===s){var e=+new Date-a;e>t?i():n.trailing&&(s=f(i,t-e,1,!1))}}},S.on={},S.off={},S._events={},S.addOff=function(e){S.off[e]=function(t,n){var i=S._events[e].indexOf(n);i>0&&S._events[e].removeAt(i)}};var E,I,x="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];return S.on.mousewheel=function(e,t){if(e&&t){var n=angular.element(e);n.data("mousewheel-line-height",i(n)),n.data("mousewheel-page-height",S.elementHeight(n)),n.data("mousewheel-callbacks")||n.data("mousewheel-callbacks",{});var r=n.data("mousewheel-callbacks");r[t]=(Function.prototype.bind||o).call(w,n[0],t);for(var a=x.length;a;)n.on(x[--a],r[t])}},S.off.mousewheel=function(e,t){var n=angular.element(e),i=n.data("mousewheel-callbacks"),o=i[t];if(o)for(var r=x.length;r;)n.off(x[--r],o);delete i[t],0===Object.keys(i).length&&(n.removeData("mousewheel-line-height"),n.removeData("mousewheel-page-height"),n.removeData("mousewheel-callbacks"))},S}]),r.filter("px",function(){return function(e){return e.match(/^[\d\.]+$/)?e+"px":e}})}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){var t={aggregate:{label:"poloÅ¾ky"},groupPanel:{description:"PÅesuÅte zÃ¡hlavÃ­ zde pro vytvoÅenÃ­ skupiny dle sloupce."},search:{placeholder:"Hledat...",showingItems:"Zobrazuji poloÅ¾ky:",selectedItems:"VybranÃ© poloÅ¾ky:",totalItems:"Celkem poloÅ¾ek:",size:"Velikost strany:",first:"PrvnÃ­ strana",next:"DalÅ¡Ã­ strana",previous:"PÅedchozÃ­ strana",last:"PoslednÃ­ strana"},menu:{text:"Vyberte sloupec:"},sort:{ascending:"SeÅadit od A-Z",descending:"SeÅadit od Z-A",remove:"Odebrat seÅazenÃ­"},column:{hide:"Schovat sloupec"},aggregation:{count:"celkem ÅÃ¡dkÅ¯: ",sum:"celkem: ",avg:"avg: ",min:"min.: ",max:"max.: "},pinning:{pinLeft:"Zamknout vlevo",pinRight:"Zamknout vpravo",unpin:"Odemknout"},gridMenu:{columns:"Sloupce:",importerTitle:"Importovat soubor",exporterAllAsCsv:"Exportovat vÅ¡echna data do csv",exporterVisibleAsCsv:"Exportovat viditelnÃ¡ data do csv",exporterSelectedAsCsv:"Exportovat vybranÃ¡ data do csv",exporterAllAsPdf:"Exportovat vÅ¡echna data do pdf",exporterVisibleAsPdf:"Exportovat viditelnÃ¡ data do pdf",exporterSelectedAsPdf:"Exportovat vybranÃ¡ data do pdf",clearAllFilters:"Odstranit vÅ¡echny filtry"},importer:{noHeaders:"NÃ¡zvy sloupcÅ¯ se nepodaÅilo zÃ­skat, obsahuje soubor zÃ¡hlavÃ­?",noObjects:"Data se nepodaÅilo zpracovat, obsahuje soubor ÅÃ¡dky mimo zÃ¡hlavÃ­?",invalidCsv:"Soubor nelze zpracovat, jednÃ¡ se o CSV?",invalidJson:"Soubor nelze zpracovat, je to JSON?",jsonNotArray:"Soubor musÃ­ obsahovat json. UkonÄuji.."},pagination:{sizes:"poloÅ¾ek na strÃ¡nku",totalItems:"poloÅ¾ek"},grouping:{group:"Seskupit",ungroup:"Odebrat seskupenÃ­",aggregate_count:"Agregace: Count",aggregate_sum:"Agregace: Sum",aggregate_max:"Agregace: Max",aggregate_min:"Agregace: Min",aggregate_avg:"Agregace: Avg",aggregate_remove:"Agregace: Odebrat"}};return e.add("cs",t),e.add("cz",t),e.add("cs-cz",t),e.add("cs-CZ",t),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"GrupÃ©r rÃ¦kker udfra en kolonne ved at trÃ¦kke dens overskift hertil."},search:{placeholder:"SÃ¸g...",showingItems:"Viste rÃ¦kker:",selectedItems:"Valgte rÃ¦kker:",totalItems:"RÃ¦kker totalt:",size:"Side stÃ¸rrelse:",first:"FÃ¸rste side",next:"NÃ¦ste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"VÃ¦lg kolonner:"},sort:{ascending:"Sorter stigende",descending:"Sorter faldende",none:"Sorter ingen",remove:"Fjern sortering"},column:{hide:"Skjul kolonne"},aggregation:{count:"antal rÃ¦kker: ",sum:"sum: ",avg:"gns: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("de",{headerCell:{aria:{defaultFilterLabel:"Filter fÃ¼r Spalte",removeFilter:"Filter lÃ¶schen",columnMenuButtonLabel:"SpaltenmenÃ¼"},priority:"PrioritÃ¤t:",filterLabel:"Filter fÃ¼r Spalte: "},aggregate:{label:"Eintrag"},groupPanel:{description:"Ziehen Sie eine SpaltenÃ¼berschrift hierhin, um nach dieser Spalte zu gruppieren."},search:{placeholder:"Suche...",showingItems:"Zeige EintrÃ¤ge:",selectedItems:"AusgewÃ¤hlte EintrÃ¤ge:",totalItems:"EintrÃ¤ge gesamt:",size:"EintrÃ¤ge pro Seite:",first:"Erste Seite",next:"NÃ¤chste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten auswÃ¤hlen:"},sort:{ascending:"aufsteigend sortieren",descending:"absteigend sortieren",none:"keine Sortierung",remove:"Sortierung zurÃ¼cksetzen"},column:{hide:"Spalte ausblenden"},aggregation:{count:"Zeilen insgesamt: ",sum:"gesamt: ",avg:"Durchschnitt: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Links anheften",pinRight:"Rechts anheften",unpin:"LÃ¶sen"},columnMenu:{close:"SchlieÃen"},gridMenu:{aria:{buttonLabel:"TabellenmenÃ¼"},columns:"Spalten:",importerTitle:"Datei importieren",exporterAllAsCsv:"Alle Daten als CSV exportieren",exporterVisibleAsCsv:"sichtbare Daten als CSV exportieren",exporterSelectedAsCsv:"markierte Daten als CSV exportieren",exporterAllAsPdf:"Alle Daten als PDF exportieren",exporterVisibleAsPdf:"sichtbare Daten als PDF exportieren",exporterSelectedAsPdf:"markierte Daten als CSV exportieren",clearAllFilters:"Alle Filter zurÃ¼cksetzen"},importer:{noHeaders:"Es konnten keine Spaltennamen ermittelt werden. Sind in der Datei Spaltendefinitionen enthalten?",noObjects:"Es konnten keine Zeileninformationen gelesen werden, Sind in der Datei auÃer den Spaltendefinitionen auch Daten enthalten?",invalidCsv:"Die Datei konnte nicht eingelesen werden, ist es eine gÃ¼ltige CSV-Datei?",invalidJson:"Die Datei konnte nicht eingelesen werden. EnthÃ¤lt sie gÃ¼ltiges JSON?",jsonNotArray:"Die importierte JSON-Datei muÃ ein Array enthalten. Breche Import ab."},pagination:{aria:{pageToFirst:"Zum Anfang",pageBack:"Seite zurÃ¼ck",pageSelected:"AusgwÃ¤hlte Seite",pageForward:"Seite vor",pageToLast:"Zum Ende"},sizes:"EintrÃ¤ge pro Seite",totalItems:"EintrÃ¤ge",through:"bis",of:"von"},grouping:{group:"Gruppieren",ungroup:"Gruppierung aufheben",aggregate_count:"Agg: Anzahl",aggregate_sum:"Agg: Summe",aggregate_max:"Agg: Maximum",aggregate_min:"Agg: Minimum",aggregate_avg:"Agg: Mittelwert",aggregate_remove:"Aggregation entfernen"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("en",{headerCell:{aria:{defaultFilterLabel:"Filter for column",removeFilter:"Remove Filter",columnMenuButtonLabel:"Column Menu"},priority:"Priority:",filterLabel:"Filter for column: "},aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",none:"Sort None",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},columnMenu:{close:"Close"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Page to first",pageBack:"Page back",pageSelected:"Selected page",pageForward:"Page forward",pageToLast:"Page to last"},sizes:"items per page",totalItems:"items",through:"through",of:"of"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"},validate:{error:"Error:",minLength:"Value should be at least THRESHOLD characters long.",maxLength:"Value should be at most THRESHOLD characters long.",required:"A value is needed."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("es",{aggregate:{label:"ArtÃ­culos"},groupPanel:{description:"Arrastre un encabezado de columna aquÃ­ y suÃ©ltelo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"ArtÃ­culos Mostrados:",selectedItems:"ArtÃ­culos Seleccionados:",totalItems:"ArtÃ­culos Totales:",size:"TamaÃ±o de PÃ¡gina:",first:"Primera PÃ¡gina",next:"PÃ¡gina Siguiente",previous:"PÃ¡gina Anterior",last:"Ãltima PÃ¡gina"},menu:{text:"Elegir columnas:"},sort:{ascending:"Orden Ascendente",descending:"Orden Descendente",remove:"Sin Ordenar"},column:{hide:"Ocultar la columna"},aggregation:{count:"filas totales: ",sum:"total: ",avg:"media: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fijar a la Izquierda",pinRight:"Fijar a la Derecha",unpin:"Quitar FijaciÃ³n"},gridMenu:{columns:"Columnas:",importerTitle:"Importar archivo",exporterAllAsCsv:"Exportar todo como csv",exporterVisibleAsCsv:"Exportar vista como csv",exporterSelectedAsCsv:"Exportar selecciÃ³n como csv",exporterAllAsPdf:"Exportar todo como pdf",exporterVisibleAsPdf:"Exportar vista como pdf",exporterSelectedAsPdf:"Exportar selecciÃ³n como pdf",clearAllFilters:"Limpiar todos los filtros"},importer:{noHeaders:"No fue posible derivar los nombres de las columnas, Â¿tiene encabezados el archivo?",noObjects:"No fue posible obtener registros, Â¿contiene datos el archivo, aparte de los encabezados?",invalidCsv:"No fue posible procesar el archivo, Â¿es un CSV vÃ¡lido?",invalidJson:"No fue posible procesar el archivo, Â¿es un Json vÃ¡lido?",jsonNotArray:"El archivo json importado debe contener un array, abortando."},pagination:{sizes:"registros por pÃ¡gina",totalItems:"registros",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Cont",aggregate_sum:"Agr: Sum",aggregate_max:"Agr: MÃ¡x",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Prom",aggregate_remove:"Agr: Quitar"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("fa",{aggregate:{label:"ÙÙÙ"},groupPanel:{description:"Ø¹ÙÙØ§Ù ÛÚ© Ø³ØªÙÙ Ø±Ø§ Ø¨Ú¯ÛØ± Ù Ø¨Ù Ú¯Ø±ÙÙÛ Ø§Ø² Ø¢Ù Ø³ØªÙÙ Ø±ÙØ§ Ú©Ù."},search:{placeholder:"Ø¬Ø³ØªØ¬Ù...",showingItems:"ÙÙØ§ÛØ´ Ø§ÙÙØ§Ù:",selectedItems:"ÙÙÙâÙØ§Û Ø§ÙØªØ®Ø§Ø¨ Ø´Ø¯Ù:",totalItems:"ÙØ¬ÙÙØ¹ Ø§ÙÙØ§Ù:",size:"Ø§ÙØ¯Ø§Ø²ÙâÛ ØµÙØ­Ù:",first:"Ø§ÙÙÛÙ ØµÙØ­Ù",next:"ØµÙØ­ÙâÛâØ¨Ø¹Ø¯Û",previous:"ØµÙØ­ÙâÛâ ÙØ¨ÙÛ",last:"Ø¢Ø®Ø±ÛÙ ØµÙØ­Ù"},menu:{text:"Ø³ØªÙÙâÙØ§Û Ø§ÙØªØ®Ø§Ø¨Û:"},sort:{ascending:"ØªØ±ØªÛØ¨ ØµØ¹ÙØ¯Û",descending:"ØªØ±ØªÛØ¨ ÙØ²ÙÙÛ",remove:"Ø­Ø°Ù ÙØ±ØªØ¨ Ú©Ø±Ø¯Ù"},column:{hide:"Ù¾ÙÙØ§ÙâÚ©Ø±Ø¯Ù Ø³ØªÙÙ"},aggregation:{count:"ØªØ¹Ø¯Ø§Ø¯: ",sum:"ÙØ¬ÙÙØ¹: ",avg:"ÙÛØ§ÙÚ¯ÛÙ: ",min:"Ú©ÙØªØ±ÛÙ: ",max:"Ø¨ÛØ´ØªØ±ÛÙ: "},pinning:{pinLeft:"Ù¾ÛÙ Ú©Ø±Ø¯Ù Ø³ÙØª ÚÙ¾",pinRight:"Ù¾ÛÙ Ú©Ø±Ø¯Ù Ø³ÙØª Ø±Ø§Ø³Øª",unpin:"Ø­Ø°Ù Ù¾ÛÙ"},gridMenu:{columns:"Ø³ØªÙÙâÙØ§:",importerTitle:"ÙØ§Ø±Ø¯ Ú©Ø±Ø¯Ù ÙØ§ÛÙ",exporterAllAsCsv:"Ø®Ø±ÙØ¬Û ØªÙØ§Ù Ø¯Ø§Ø¯ÙâÙØ§ Ø¯Ø± ÙØ§ÛÙ csv",exporterVisibleAsCsv:"Ø®Ø±ÙØ¬Û Ø¯Ø§Ø¯ÙâÙØ§Û ÙØ§Ø¨Ù ÙØ´Ø§ÙØ¯Ù Ø¯Ø± ÙØ§ÛÙ csv",exporterSelectedAsCsv:"Ø®Ø±ÙØ¬Û Ø¯Ø§Ø¯ÙâÙØ§Û Ø§ÙØªØ®Ø§Ø¨âØ´Ø¯Ù Ø¯Ø± ÙØ§ÛÙ csv",exporterAllAsPdf:"Ø®Ø±ÙØ¬Û ØªÙØ§Ù Ø¯Ø§Ø¯ÙâÙØ§ Ø¯Ø± ÙØ§ÛÙ pdf",exporterVisibleAsPdf:"Ø®Ø±ÙØ¬Û Ø¯Ø§Ø¯ÙâÙØ§Û ÙØ§Ø¨Ù ÙØ´Ø§ÙØ¯Ù Ø¯Ø± ÙØ§ÛÙ pdf",exporterSelectedAsPdf:"Ø®Ø±ÙØ¬Û Ø¯Ø§Ø¯ÙâÙØ§Û Ø§ÙØªØ®Ø§Ø¨âØ´Ø¯Ù Ø¯Ø± ÙØ§ÛÙ pdf",clearAllFilters:"Ù¾Ø§Ú© Ú©Ø±Ø¯Ù ØªÙØ§Ù ÙÛÙØªØ±"},importer:{noHeaders:"ÙØ§Ù Ø³ØªÙÙ ÙØ§Ø¨Ù Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙÛØ³Øª. Ø¢ÛØ§ ÙØ§ÛÙ Ø¹ÙÙØ§Ù Ø¯Ø§Ø±Ø¯Ø",noObjects:"Ø§Ø´ÛØ§ ÙØ§Ø¨Ù Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙÛØ³ØªÙØ¯. Ø¢ÛØ§ Ø¨Ù Ø¬Ø² Ø¹ÙÙØ§ÙâÙØ§ Ø¯Ø± ÙØ§ÛÙ Ø¯Ø§Ø¯Ù ÙØ¬ÙØ¯ Ø¯Ø§Ø±Ø¯Ø",invalidCsv:"ÙØ§ÛÙ ÙØ§Ø¨Ù Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙÛØ³Øª. Ø¢ÛØ§ ÙØ±ÙØª  csv  ÙØ¹ØªØ¨Ø± Ø§Ø³ØªØ",invalidJson:"ÙØ§ÛÙ ÙØ§Ø¨Ù Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙÛØ³Øª. Ø¢ÛØ§ ÙØ±ÙØª json   ÙØ¹ØªØ¨Ø± Ø§Ø³ØªØ",jsonNotArray:"ÙØ§ÛÙ json ÙØ§Ø±Ø¯ Ø´Ø¯Ù Ø¨Ø§ÛØ¯ Ø­Ø§ÙÛ Ø¢Ø±Ø§ÛÙ Ø¨Ø§Ø´Ø¯. Ø¹ÙÙÛØ§Øª Ø³Ø§ÙØ· Ø´Ø¯."},pagination:{sizes:"Ø§ÙÙØ§Ù Ø¯Ø± ÙØ± ØµÙØ­Ù",totalItems:"Ø§ÙÙØ§Ù",of:"Ø§Ø²"},grouping:{group:"Ú¯Ø±ÙÙâØ¨ÙØ¯Û",ungroup:"Ø­Ø°Ù Ú¯Ø±ÙÙâØ¨ÙØ¯Û",aggregate_count:"Agg: ØªØ¹Ø¯Ø§Ø¯",aggregate_sum:"Agg: Ø¬ÙØ¹",aggregate_max:"Agg: Ø¨ÛØ´ÛÙÙ",aggregate_min:"Agg: Ú©ÙÛÙÙ",aggregate_avg:"Agg: ÙÛØ§ÙÚ¯ÛÙ",aggregate_remove:"Agg: Ø­Ø°Ù"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("fi",{aggregate:{label:"rivit"},groupPanel:{description:"Raahaa ja pudota otsikko tÃ¤hÃ¤n ryhmittÃ¤Ã¤ksesi sarakkeen mukaan."},search:{placeholder:"Hae...",showingItems:"NÃ¤ytetÃ¤Ã¤n rivejÃ¤:",selectedItems:"Valitut rivit:",totalItems:"RivejÃ¤ yht.:",size:"NÃ¤ytÃ¤:",first:"EnsimmÃ¤inen sivu",next:"Seuraava sivu",previous:"Edellinen sivu",last:"Viimeinen sivu"},menu:{text:"Valitse sarakkeet:"},sort:{ascending:"JÃ¤rjestÃ¤ nouseva",descending:"JÃ¤rjestÃ¤ laskeva",remove:"Poista jÃ¤rjestys"},column:{hide:"Piilota sarake"},aggregation:{count:"RivejÃ¤ yht.: ",sum:"Summa: ",avg:"K.a.: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Lukitse vasemmalle",pinRight:"Lukitse oikealle",unpin:"Poista lukitus"},gridMenu:{columns:"Sarakkeet:",importerTitle:"Tuo tiedosto",exporterAllAsCsv:"Vie tiedot csv-muodossa",exporterVisibleAsCsv:"Vie nÃ¤kyvÃ¤ tieto csv-muodossa",exporterSelectedAsCsv:"Vie valittu tieto csv-muodossa",exporterAllAsPdf:"Vie tiedot pdf-muodossa",exporterVisibleAsPdf:"Vie nÃ¤kyvÃ¤ tieto pdf-muodossa",exporterSelectedAsPdf:"Vie valittu tieto pdf-muodossa",clearAllFilters:"Puhdista kaikki suodattimet"},importer:{noHeaders:"Sarakkeen nimiÃ¤ ei voitu pÃ¤Ã¤tellÃ¤, onko tiedostossa otsikkoriviÃ¤?",noObjects:"Tietoja ei voitu lukea, onko tiedostossa muuta kuin otsikkot?",invalidCsv:"Tiedostoa ei voitu kÃ¤sitellÃ¤, oliko se CSV-muodossa?",invalidJson:"Tiedostoa ei voitu kÃ¤sitellÃ¤, oliko se JSON-muodossa?",jsonNotArray:"Tiedosto ei sisÃ¤ltÃ¤nyt taulukkoa, lopetetaan."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("fr",{aggregate:{label:"Ã©lÃ©ments"},groupPanel:{description:"Faites glisser une en-tÃªte de colonne ici pour crÃ©er un groupe de colonnes."},search:{placeholder:"Recherche...",showingItems:"Affichage des Ã©lÃ©ments :",selectedItems:"ÃlÃ©ments sÃ©lectionnÃ©s :",totalItems:"Nombre total d'Ã©lÃ©ments:",size:"Taille de page:",first:"PremiÃ¨re page",next:"Page Suivante",previous:"Page prÃ©cÃ©dente",last:"DerniÃ¨re page"},menu:{text:"Choisir des colonnes :"},sort:{ascending:"Trier par ordre croissant",descending:"Trier par ordre dÃ©croissant",remove:"Enlever le tri"},column:{hide:"Cacher la colonne"},aggregation:{count:"lignes totales: ",sum:"total: ",avg:"moy: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Ãpingler Ã  gauche",pinRight:"Ãpingler Ã  droite",unpin:"DÃ©tacher"},gridMenu:{columns:"Colonnes:",importerTitle:"Importer un fichier",exporterAllAsCsv:"Exporter toutes les donnÃ©es en CSV",exporterVisibleAsCsv:"Exporter les donnÃ©es visibles en CSV",exporterSelectedAsCsv:"Exporter les donnÃ©es sÃ©lectionnÃ©es en CSV",exporterAllAsPdf:"Exporter toutes les donnÃ©es en PDF",exporterVisibleAsPdf:"Exporter les donnÃ©es visibles en PDF",exporterSelectedAsPdf:"Exporter les donnÃ©es sÃ©lectionnÃ©es en PDF",clearAllFilters:"Nettoyez tous les filtres"},importer:{noHeaders:"Impossible de dÃ©terminer le nom des colonnes, le fichier possÃ¨de-t-il une en-tÃªte ?",noObjects:"Aucun objet trouvÃ©, le fichier possÃ¨de-t-il des donnÃ©es autres que l'en-tÃªte ?",invalidCsv:"Le fichier n'a pas pu Ãªtre traitÃ©, le CSV est-il valide ?",invalidJson:"Le fichier n'a pas pu Ãªtre traitÃ©, le JSON est-il valide ?",jsonNotArray:"Le fichier JSON importÃ© doit contenir un tableau, abandon."},pagination:{sizes:"Ã©lÃ©ments par page",totalItems:"Ã©lÃ©ments",of:"sur"},grouping:{group:"Grouper",ungroup:"DÃ©grouper",aggregate_count:"Agg: Compte",aggregate_sum:"Agg: Somme",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Moy",aggregate_remove:"Agg: Retirer"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("he",{aggregate:{label:"items"},groupPanel:{description:"××¨××¨ ×¢×××× ×××× ××©××¨×¨ ×××× ××§××¥ ×¢×××× ××."},search:{placeholder:"××¤×©...",showingItems:"××¦××:",selectedItems:'×¡×"× × ×××¨×:',totalItems:'×¡×"× ×¨×©××××ª:',size:"×ª××¦×××ª ×××£:",first:"××£ ×¨××©××",next:"××£ ×××",previous:"××£ ×§×××",last:"××£ ×××¨××"},menu:{text:"×××¨ ×¢×××××ª:"},sort:{ascending:"×¡××¨ ×¢×××",descending:"×¡××¨ ×××¨×",remove:"×××"},column:{hide:"×××¨ ××¡×ª×¨"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clean all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("hy",{aggregate:{label:"Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥Ö"},groupPanel:{description:"Ô¸Õ½Õ¿ Õ½ÕµÕ¡Õ¶ Õ­Õ´Õ¢Õ¡Õ¾Õ¸ÖÕ¥Õ¬Õ¸Ö Õ°Õ¡Õ´Õ¡Ö ÖÕ¡Õ·Õ¥Ö Ö Õ£ÖÕ¥Ö Õ¾Õ¥ÖÕ¶Õ¡Õ£Õ«ÖÕ¶ Õ¡ÕµÕ½Õ¿Õ¥Õ²Ö"},search:{placeholder:"ÕÕ¶Õ¿ÖÕ¸ÖÕ´...",showingItems:"ÕÕ¸ÖÖÕ¡Õ¤ÖÕ¾Õ¡Õ® Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÕ",selectedItems:"Ô¸Õ¶Õ¿ÖÕ¾Õ¡Õ®:",totalItems:"Ô¸Õ¶Õ¤Õ¡Õ´Õ¥Õ¶Õ¨Õ",size:"ÕÕ¸Õ²Õ¥ÖÕ« ÖÕ¡Õ¶Õ¡Õ¯Õ¨ Õ§Õ»Õ¸ÖÕ´Õ",first:"Ô±Õ¼Õ¡Õ»Õ«Õ¶ Õ§Õ»",next:"ÕÕ¡Õ»Õ¸ÖÕ¤ Õ§Õ»",previous:"ÕÕ¡Õ­Õ¸ÖÕ¤ Õ§Õ»",last:"ÕÕ¥ÖÕ»Õ«Õ¶ Õ§Õ»"},menu:{text:"Ô¸Õ¶Õ¿ÖÕ¥Õ¬ Õ½ÕµÕ¸ÖÕ¶Õ¥ÖÕ¨:"},sort:{ascending:"Ô±Õ³Õ´Õ¡Õ¶ Õ¯Õ¡ÖÕ£Õ¸Õ¾",descending:"ÕÕ¾Õ¡Õ¦Õ´Õ¡Õ¶ Õ¯Õ¡ÖÕ£Õ¸Õ¾",remove:"ÕÕ¡Õ¶Õ¥Õ¬ "},column:{hide:"Ô¹Õ¡ÖÖÕ¶Õ¥Õ¬ Õ½ÕµÕ¸ÖÕ¶Õ¨"},aggregation:{count:"Õ¨Õ¶Õ¤Õ¡Õ´Õ¥Õ¶Õ¨ Õ¿Õ¸Õ²Õ ",sum:"Õ¨Õ¶Õ¤Õ¡Õ´Õ¥Õ¶Õ¨Õ ",avg:"Õ´Õ«Õ»Õ«Õ¶Õ ",min:"Õ´Õ«Õ¶Õ ",max:"Õ´Õ¡ÖÕ½Õ "},pinning:{pinLeft:"Ô¿ÕºÖÕ¶Õ¥Õ¬ Õ±Õ¡Õ­ Õ¯Õ¸Õ²Õ´Õ¸ÖÕ´",pinRight:"Ô¿ÕºÖÕ¶Õ¥Õ¬ Õ¡Õ» Õ¯Õ¸Õ²Õ´Õ¸ÖÕ´",unpin:"Ô±ÖÕ±Õ¡Õ¯Õ¥Õ¬"},gridMenu:{columns:"ÕÕµÕ¸ÖÕ¶Õ¥Ö:",importerTitle:"ÕÕ¥ÖÕ´Õ¸ÖÕ®Õ¥Õ¬ ÖÕ¡ÕµÕ¬",exporterAllAsCsv:"Ô±ÖÕ¿Õ¡Õ°Õ¡Õ¶Õ¥Õ¬ Õ¡Õ´Õ¢Õ¸Õ²Õ»Õ¨ CSV",exporterVisibleAsCsv:"Ô±ÖÕ¿Õ¡Õ°Õ¡Õ¶Õ¥Õ¬ Õ¥ÖÖÕ¡ÖÕ¸Õ² Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÕ¨ CSV",exporterSelectedAsCsv:"Ô±ÖÕ¿Õ¡Õ°Õ¡Õ¶Õ¥Õ¬ Õ¨Õ¶Õ¿ÖÕ¾Õ¡Õ® Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÕ¨ CSV",exporterAllAsPdf:"Ô±ÖÕ¿Õ¡Õ°Õ¡Õ¶Õ¥Õ¬ PDF",exporterVisibleAsPdf:"Ô±ÖÕ¿Õ¡Õ°Õ¡Õ¶Õ¥Õ¬ Õ¥ÖÖÕ¡ÖÕ¸Õ² Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÕ¨ PDF",exporterSelectedAsPdf:"Ô±ÖÕ¿Õ¡Õ°Õ¡Õ¶Õ¥Õ¬ Õ¨Õ¶Õ¿ÖÕ¾Õ¡Õ® Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÕ¨ PDF",clearAllFilters:"ÕÕ¡ÖÖÕ¥Õ¬ Õ¢Õ¸Õ¬Õ¸Ö ÖÕ«Õ¬Õ¿ÖÕ¥ÖÕ¨"},importer:{noHeaders:"ÕÕ¶Õ¡ÖÕ¡Õ¾Õ¸Ö Õ¹Õ¥Õ²Õ¡Õ¾ Õ¸ÖÕ¸Õ·Õ¥Õ¬ Õ½ÕµÕ¡Õ¶ Õ¾Õ¥ÖÕ¶Õ¡Õ£ÖÕ¥ÖÕ¨Ö Ô±ÖÕ¤ÕµÕ¸ÕÖ ÖÕ¡ÕµÕ¬Õ¨ Õ¸ÖÕ¶Õ« Õ¾Õ¥ÖÕ¶Õ¡Õ£ÖÕ¥ÖÖ",noObjects:"ÕÕ¶Õ¡ÖÕ¡Õ¾Õ¸Ö Õ¹Õ¥Õ²Õ¡Õ¾ Õ¯Õ¡ÖÕ¤Õ¡Õ¬ Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÕ¨Ö Ô±ÖÕ¤ÕµÕ¸ÕÖ ÖÕ¡ÕµÕ¬Õ¸ÖÕ´ Õ¯Õ¡Õ¶ Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÖ",invalidCsv:"ÕÕ¶Õ¡ÖÕ¡Õ¾Õ¸Ö Õ¹Õ¥Õ²Õ¡Õ¾ Õ´Õ·Õ¡Õ¯Õ¥Õ¬ ÖÕ¡ÕµÕ¬Õ¨Ö Ô±ÖÕ¤ÕµÕ¸ÕÖ Õ¡ÕµÕ¶ Õ¾Õ¡Õ¾Õ¥Ö CSV Õ§Ö",invalidJson:"ÕÕ¶Õ¡ÖÕ¡Õ¾Õ¸Ö Õ¹Õ¥Õ²Õ¡Õ¾ Õ´Õ·Õ¡Õ¯Õ¥Õ¬ ÖÕ¡ÕµÕ¬Õ¨Ö Ô±ÖÕ¤ÕµÕ¸ÕÖ Õ¡ÕµÕ¶ Õ¾Õ¡Õ¾Õ¥Ö Json Õ§Ö",jsonNotArray:"ÕÕ¥ÖÕ´Õ¸ÖÕ®Õ¾Õ¡Õ® json ÖÕ¡ÕµÕ¬Õ¨ ÕºÕ¥Õ¿Ö Õ§ ÕºÕ¡ÖÕ¸ÖÕ¶Õ¡Õ¯Õ« Õ¦Õ¡Õ¶Õ£Õ¾Õ¡Õ®, Õ¯Õ¡Õ½Õ¥ÖÕ¾Õ¸ÖÕ´ Õ§Ö"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("it",{aggregate:{label:"elementi"},groupPanel:{description:"Trascina un'intestazione all'interno del gruppo della colonna."},search:{placeholder:"Ricerca...",showingItems:"Mostra:",selectedItems:"Selezionati:",totalItems:"Totali:",size:"Tot Pagine:",first:"Prima",next:"Prossima",previous:"Precedente",last:"Ultima"},menu:{text:"Scegli le colonne:"},sort:{ascending:"Asc.",descending:"Desc.",remove:"Annulla ordinamento"},column:{hide:"Nascondi"},aggregation:{count:"righe totali: ",sum:"tot: ",avg:"media: ",min:"minimo: ",max:"massimo: "},pinning:{pinLeft:"Blocca a sx",pinRight:"Blocca a dx",unpin:"Blocca in alto"},gridMenu:{columns:"Colonne:",importerTitle:"Importa",exporterAllAsCsv:"Esporta tutti i dati in CSV",exporterVisibleAsCsv:"Esporta i dati visibili in CSV",exporterSelectedAsCsv:"Esporta i dati selezionati in CSV",exporterAllAsPdf:"Esporta tutti i dati in PDF",exporterVisibleAsPdf:"Esporta i dati visibili in PDF",exporterSelectedAsPdf:"Esporta i dati selezionati in PDF",clearAllFilters:"Pulire tutti i filtri"},importer:{noHeaders:"Impossibile reperire i nomi delle colonne, sicuro che siano indicati all'interno del file?",noObjects:"Impossibile reperire gli oggetti, sicuro che siano indicati all'interno del file?",invalidCsv:"Impossibile elaborare il file, sicuro che sia un CSV?",invalidJson:"Impossibile elaborare il file, sicuro che sia un JSON valido?",jsonNotArray:"Errore! Il file JSON da importare deve contenere un array."},grouping:{group:"Raggruppa",ungroup:"Separa",aggregate_count:"Agg: N. Elem.",aggregate_sum:"Agg: Somma",aggregate_max:"Agg: Massimo",aggregate_min:"Agg: Minimo",aggregate_avg:"Agg: Media",aggregate_remove:"Agg: Rimuovi"},validate:{error:"Errore:",minLength:"Lunghezza minima pari a THRESHOLD caratteri.",maxLength:"Lunghezza massima pari a THRESHOLD caratteri.",required:"Necessario inserire un valore."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ja",{aggregate:{label:"é ç®"},groupPanel:{description:"ããã«åãããããã©ãã°ã¢ã³ããã­ãããã¦ããã®åã§ã°ã«ã¼ãåãã¾ãã"},search:{placeholder:"æ¤ç´¢...",showingItems:"è¡¨ç¤ºä¸­ã®é ç®:",selectedItems:"é¸æããé ç®:",totalItems:"é ç®ã®ç·æ°:",size:"ãã¼ã¸ãµã¤ãº:",first:"æåã®ãã¼ã¸",next:"æ¬¡ã®ãã¼ã¸",previous:"åã®ãã¼ã¸",last:"åã®ãã¼ã¸"},menu:{text:"åã®é¸æ:"},sort:{ascending:"æé ã«ä¸¦ã¹æ¿ã",descending:"éé ã«ä¸¦ã¹æ¿ã",remove:"ä¸¦ã¹æ¿ãã®è§£é¤"},column:{hide:"åã®éè¡¨ç¤º"},aggregation:{count:"åè¨è¡æ°: ",sum:"åè¨: ",avg:"å¹³å: ",min:"æå°: ",max:"æå¤§: "},pinning:{pinLeft:"å·¦ã«åºå®",pinRight:"å³ã«åºå®",unpin:"åºå®è§£é¤"},gridMenu:{columns:"å:",importerTitle:"ãã¡ã¤ã«ã®ã¤ã³ãã¼ã",exporterAllAsCsv:"ãã¹ã¦ã®ãã¼ã¿ãCSVå½¢å¼ã§ã¨ã¯ã¹ãã¼ã",exporterVisibleAsCsv:"è¡¨ç¤ºä¸­ã®ãã¼ã¿ãCSVå½¢å¼ã§ã¨ã¯ã¹ãã¼ã",exporterSelectedAsCsv:"é¸æãããã¼ã¿ãCSVå½¢å¼ã§ã¨ã¯ã¹ãã¼ã",exporterAllAsPdf:"ãã¹ã¦ã®ãã¼ã¿ãPDFå½¢å¼ã§ã¨ã¯ã¹ãã¼ã",exporterVisibleAsPdf:"è¡¨ç¤ºä¸­ã®ãã¼ã¿ãPDFå½¢å¼ã§ã¨ã¯ã¹ãã¼ã",exporterSelectedAsPdf:"é¸æãããã¼ã¿ãPDFå½¢å¼ã§ã¨ã¯ã¹ãã¼ã",clearAllFilters:"ãã¹ã¦ã®ãã£ã«ã¿ãæ¸æãã¦ãã ãã"},importer:{noHeaders:"ååãåå¾ã§ãã¾ããããã¡ã¤ã«ã«ããããå«ã¾ãã¦ãããã¨ãç¢ºèªãã¦ãã ããã",noObjects:"ãªãã¸ã§ã¯ããåå¾ã§ãã¾ããããã¡ã¤ã«ã«ãããä»¥å¤ã®ãã¼ã¿ãå«ã¾ãã¦ãããã¨ãç¢ºèªãã¦ãã ããã",invalidCsv:"ãã¡ã¤ã«ãå¦çã§ãã¾ããããã¡ã¤ã«ãæå¹ãªCSVå½¢å¼ã§ãããã¨ãç¢ºèªãã¦ãã ããã",invalidJson:"ãã¡ã¤ã«ãå¦çã§ãã¾ããããã¡ã¤ã«ãæå¹ãªJSONå½¢å¼ã§ãããã¨ãç¢ºèªãã¦ãã ããã",jsonNotArray:"ã¤ã³ãã¼ãããJSONãã¡ã¤ã«ã«ã¯éåãå«ã¾ãã¦ããå¿è¦ãããã¾ããå¦çãä¸­æ­¢ãã¾ãã"},pagination:{aria:{pageToFirst:"æåã®ãã¼ã¸",pageBack:"åã®ãã¼ã¸",pageSelected:"ç¾å¨ã®ãã¼ã¸",pageForward:"æ¬¡ã®ãã¼ã¸",pageToLast:"æå¾ã®ãã¼ã¸"},sizes:"é ç®/ãã¼ã¸",totalItems:"é ç®",through:"ãã",of:"é ç®/å¨"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ko",{aggregate:{label:"ìì´í"},groupPanel:{description:"ì»¬ë¼ì¼ë¡ ê·¸ë£¹ííê¸° ìí´ìë ì»¬ë¼ í¤ëë¥¼ ëì´ ë¨ì´ë¨ë ¤ ì£¼ì¸ì."},search:{placeholder:"ê²ì...",showingItems:"í­ëª© ë³´ì¬ì£¼ê¸°:",selectedItems:"ì í í­ëª©:",totalItems:"ì ì²´ í­ëª©:",size:"íì´ì§ í¬ê¸°:",first:"ì²«ë²ì§¸ íì´ì§",next:"ë¤ì íì´ì§",previous:"ì´ì  íì´ì§",last:"ë§ì§ë§ íì´ì§"},menu:{text:"ì»¬ë¼ì ì ííì¸ì:"},sort:{ascending:"ì¤ë¦ì°¨ì ì ë ¬",descending:"ë´ë¦¼ì°¨ì ì ë ¬",remove:"ìí ì ê±°"},column:{hide:"ì»¬ë¼ ì ê±°"},aggregation:{count:"ì ì²´ ê°¯ì: ",sum:"ì ì²´: ",avg:"íê· : ",min:"ìµì: ",max:"ìµë: "},pinning:{pinLeft:"ì¼ìª½ í",pinRight:"ì¤ë¥¸ìª½ í",unpin:"í ì ê±°"},gridMenu:{columns:"ì»¬ë¼:",importerTitle:"íì¼ ê°ì ¸ì¤ê¸°",exporterAllAsCsv:"csvë¡ ëª¨ë  ë°ì´í° ë´ë³´ë´ê¸°",exporterVisibleAsCsv:"csvë¡ ë³´ì´ë ë°ì´í° ë´ë³´ë´ê¸°",exporterSelectedAsCsv:"csvë¡ ì íë ë°ì´í° ë´ë³´ë´ê¸°",exporterAllAsPdf:"pdfë¡ ëª¨ë  ë°ì´í° ë´ë³´ë´ê¸°",exporterVisibleAsPdf:"pdfë¡ ë³´ì´ë ë°ì´í° ë´ë³´ë´ê¸°",exporterSelectedAsPdf:"pdfë¡ ì í ë°ì´í° ë´ë³´ë´ê¸°",clearAllFilters:"ëª¨ë  íí°ë¥¼ ì²­ì"},importer:{noHeaders:"ì»¬ë¼ëªì´ ì§ì ëì´ ìì§ ììµëë¤. íì¼ì í¤ëê° ëªìëì´ ìëì§ íì¸í´ ì£¼ì¸ì.",noObjects:"ë°ì´í°ê° ì§ì ëì´ ìì§ ììµëë¤. ë°ì´í°ê° íì¼ì ìëì§ íì¸í´ ì£¼ì¸ì.",invalidCsv:"íì¼ì ì²ë¦¬í  ì ììµëë¤. ì¬ë°ë¥¸ csvì¸ì§ íì¸í´ ì£¼ì¸ì.",invalidJson:"íì¼ì ì²ë¦¬í  ì ììµëë¤. ì¬ë°ë¥¸ jsonì¸ì§ íì¸í´ ì£¼ì¸ì.",jsonNotArray:"json íì¼ì ë°°ì´ì í¬í¨í´ì¼ í©ëë¤."},pagination:{sizes:"íì´ì§ë¹ í­ëª©",totalItems:"ì ì²´ í­ëª©"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("nl",{aggregate:{label:"items"},groupPanel:{description:"Sleep hier een kolomnaam heen om op te groeperen."},search:{placeholder:"Zoeken...",showingItems:"Getoonde items:",selectedItems:"Geselecteerde items:",totalItems:"Totaal aantal items:",size:"Items per pagina:",first:"Eerste pagina",next:"Volgende pagina",previous:"Vorige pagina",last:"Laatste pagina"},menu:{text:"Kies kolommen:"},sort:{ascending:"Sorteer oplopend",descending:"Sorteer aflopend",remove:"Verwijder sortering"},column:{hide:"Verberg kolom"},aggregation:{count:"Aantal rijen: ",sum:"Som: ",avg:"Gemiddelde: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Zet links vast",pinRight:"Zet rechts vast",unpin:"Maak los"},gridMenu:{columns:"Kolommen:",importerTitle:"Importeer bestand",exporterAllAsCsv:"Exporteer alle data als csv",exporterVisibleAsCsv:"Exporteer zichtbare data als csv",exporterSelectedAsCsv:"Exporteer geselecteerde data als csv",exporterAllAsPdf:"Exporteer alle data als pdf",exporterVisibleAsPdf:"Exporteer zichtbare data als pdf",exporterSelectedAsPdf:"Exporteer geselecteerde data als pdf",clearAllFilters:"Reinig alle filters"},importer:{noHeaders:"Kolomnamen kunnen niet worden afgeleid. Heeft het bestand een header?",noObjects:"Objecten kunnen niet worden afgeleid. Bevat het bestand data naast de headers?",invalidCsv:"Het bestand kan niet verwerkt worden. Is het een valide csv bestand?",invalidJson:"Het bestand kan niet verwerkt worden. Is het valide json?",jsonNotArray:"Het json bestand moet een array bevatten. De actie wordt geannuleerd."},pagination:{sizes:"items per pagina",totalItems:"items",of:"van de"},grouping:{group:"Groepeer",ungroup:"Groepering opheffen",aggregate_count:"Agg: Aantal",aggregate_sum:"Agg: Som",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Gem",aggregate_remove:"Agg: Verwijder"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("pl",{headerCell:{aria:{defaultFilterLabel:"Filter dla kolumny",removeFilter:"UsuÅ filter",columnMenuButtonLabel:"Menu kolumny"},priority:"Prioritet:",filterLabel:"Filtr dla kolumny: "},aggregate:{label:"pozycji"},groupPanel:{description:"PrzeciÄgnij nagÅÃ³wek kolumny tutaj, aby pogrupowaÄ wedÅug niej."},search:{placeholder:"Szukaj...",showingItems:"Widoczne pozycje:",selectedItems:"Zaznaczone pozycje:",totalItems:"Wszystkich pozycji:",size:"Rozmiar strony:",first:"Pierwsza strona",next:"NastÄpna strona",previous:"Poprzednia strona",last:"Ostatnia strona"},menu:{text:"Wybierz kolumny:"},sort:{ascending:"Sortuj rosnÄco",descending:"Sortuj malejÄco",none:"Brak sortowania",remove:"WyÅÄcz sortowanie"},column:{hide:"Ukryj kolumne"},aggregation:{count:"Razem pozycji: ",sum:"Razem: ",avg:"Årednia: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Przypnij do lewej",pinRight:"Przypnij do prawej",unpin:"Odepnij"},columnMenu:{close:"Zamknij"},gridMenu:{aria:{buttonLabel:"Menu Grida"},columns:"Kolumny:",importerTitle:"Importuj plik",exporterAllAsCsv:"Eksportuj wszystkie dane do csv",exporterVisibleAsCsv:"Eksportuj widoczne dane do csv",exporterSelectedAsCsv:"Eksportuj zaznaczone dane do csv",exporterAllAsPdf:"Eksportuj wszystkie dane do pdf",exporterVisibleAsPdf:"Eksportuj widoczne dane do pdf",exporterSelectedAsPdf:"Eksportuj zaznaczone dane do pdf",clearAllFilters:"WyczyÅÄ filtry"},importer:{noHeaders:"Nie udaÅo siÄ wczytaÄ nazw kolumn. Czy plik posiada nagÅÃ³wek?",noObjects:"Nie udalo siÄ wczytaÄ pozycji. Czy plik zawiera dane??",invalidCsv:"Nie udaÅo siÄ przetworzyÄ pliku, jest to prawidlowy plik CSV??",invalidJson:"Nie udaÅo siÄ przetworzyÄ pliku, jest to prawidlowy plik Json?",jsonNotArray:"Importowany plik json musi zawieraÄ tablicÄ, importowanie przerwane."},pagination:{aria:{pageToFirst:"Pierwsza strona",pageBack:"Poprzednia strona",pageSelected:"Wybrana strona",pageForward:"NastÄpna strona",pageToLast:"Ostatnia strona"},sizes:"pozycji na stronÄ",totalItems:"pozycji",through:"do",of:"z"},grouping:{group:"Grupuj",ungroup:"Rozgrupuj",aggregate_count:"Zbiorczo: Razem",aggregate_sum:"Zbiorczo: Suma",aggregate_max:"Zbiorczo: Max",aggregate_min:"Zbiorczo: Min",aggregate_avg:"Zbiorczo: Årednia",aggregate_remove:"Zbiorczo: UsuÅ"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("pt-br",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da PÃ¡gina:",first:"Primeira PÃ¡gina",next:"PrÃ³xima PÃ¡gina",previous:"PÃ¡gina Anterior",last:"Ãltima PÃ¡gina"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover OrdenaÃ§Ã£o"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar arquivo",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visÃ­veis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visÃ­veis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas nÃ£o puderam ser derivados. O arquivo tem um cabeÃ§alho?",noObjects:"Objetos nÃ£o puderam ser derivados. Havia dados no arquivo, alÃ©m dos cabeÃ§alhos?",invalidCsv:"Arquivo nÃ£o pode ser processado. Ã um CSV vÃ¡lido?",invalidJson:"Arquivo nÃ£o pode ser processado. Ã um Json vÃ¡lido?",jsonNotArray:"Arquivo json importado tem que conter um array. Abortando."},pagination:{aria:{pageToFirst:"Primeira pÃ¡gina",pageBack:"PÃ¡gina anterior",pageSelected:"PÃ¡gina Selecionada",pageForward:"Proxima",pageToLast:"Anterior"},sizes:"itens por pÃ¡gina",totalItems:"itens",through:"atravÃ©s dos",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("pt",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Itens Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da PÃ¡gina:",first:"Primeira PÃ¡gina",next:"PrÃ³xima PÃ¡gina",previous:"PÃ¡gina Anterior",last:"Ãltima PÃ¡gina"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover OrdenaÃ§Ã£o"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar ficheiro",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visÃ­veis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visÃ­veis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas nÃ£o puderam ser derivados. O ficheiro tem um cabeÃ§alho?",noObjects:"Objetos nÃ£o puderam ser derivados. Havia dados no ficheiro, alÃ©m dos cabeÃ§alhos?",invalidCsv:"Ficheiro nÃ£o pode ser processado. Ã um CSV vÃ¡lido?",invalidJson:"Ficheiro nÃ£o pode ser processado. Ã um Json vÃ¡lido?",jsonNotArray:"Ficheiro json importado tem que conter um array. Interrompendo."},pagination:{aria:{pageToFirst:"Primeira pÃ¡gina",pageBack:"PÃ¡gina anterior",pageSelected:"PÃ¡gina Selecionada",pageForward:"PrÃ³xima",pageToLast:"Anterior"},sizes:"itens por pÃ¡gina",totalItems:"itens",through:"atravÃ©s dos",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ro",{headerCell:{aria:{defaultFilterLabel:"Filtru pentru coloana",removeFilter:"Sterge filtru",columnMenuButtonLabel:"Column Menu"},priority:"Prioritate:",filterLabel:"Filtru pentru coloana:"},aggregate:{label:"Elemente"},groupPanel:{description:"Trage un cap de coloana aici pentru a grupa elementele dupa coloana respectiva"},search:{placeholder:"Cauta...",showingItems:"Arata elementele:",selectedItems:"Elementele selectate:",totalItems:"Total elemente:",size:"Marime pagina:",first:"Prima pagina",next:"Pagina urmatoare",previous:"Pagina anterioara",last:"Ultima pagina"},menu:{text:"Alege coloane:"},sort:{ascending:"Ordoneaza crescator",descending:"Ordoneaza descrescator",none:"Fara ordonare",remove:"Sterge ordonarea"},column:{hide:"Ascunde coloana"},aggregation:{count:"total linii: ",sum:"total: ",avg:"medie: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin la stanga",pinRight:"Pin la dreapta",unpin:"Sterge pinul"},columnMenu:{close:"Inchide"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Coloane:",importerTitle:"Incarca fisier",exporterAllAsCsv:"Exporta toate datele ca csv",exporterVisibleAsCsv:"Exporta datele vizibile ca csv",exporterSelectedAsCsv:"Exporta datele selectate ca csv",exporterAllAsPdf:"Exporta toate datele ca pdf",exporterVisibleAsPdf:"Exporta datele vizibile ca pdf",exporterSelectedAsPdf:"Exporta datele selectate ca csv pdf",clearAllFilters:"Sterge toate filtrele"},importer:{noHeaders:"Numele coloanelor nu a putut fi incarcat, acest fisier are un header?",noObjects:"Datele nu au putut fi incarcate, exista date in fisier in afara numelor de coloane?",invalidCsv:"Fisierul nu a putut fi procesat, ati incarcat un CSV valid ?",invalidJson:"Fisierul nu a putut fi procesat, ati incarcat un Json valid?",jsonNotArray:"Json-ul incarcat trebuie sa contina un array, inchidere."},pagination:{aria:{pageToFirst:"Prima pagina",pageBack:"O pagina inapoi",pageSelected:"Pagina selectata",pageForward:"O pagina inainte",pageToLast:"Ultima pagina"},sizes:"Elemente per pagina",totalItems:"elemente",through:"prin",of:"of"},grouping:{group:"Grupeaza",ungroup:"Opreste gruparea",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ru",{headerCell:{aria:{defaultFilterLabel:"Ð¤Ð¸Ð»ÑÑÑ ÑÑÐ¾Ð»Ð±ÑÐ°",removeFilter:"Ð£Ð´Ð°Ð»Ð¸ÑÑ ÑÐ¸Ð»ÑÑÑ",columnMenuButtonLabel:"ÐÐµÐ½Ñ ÑÑÐ¾Ð»Ð±ÑÐ°"},priority:"ÐÑÐ¸Ð¾ÑÐ¸ÑÐµÑ:",filterLabel:"Ð¤Ð¸Ð»ÑÑÑ ÑÑÐ¾Ð»Ð±ÑÐ°: "},aggregate:{label:"ÑÐ»ÐµÐ¼ÐµÐ½ÑÑ"},groupPanel:{description:"ÐÐ»Ñ Ð³ÑÑÐ¿Ð¿Ð¸ÑÐ¾Ð²ÐºÐ¸ Ð¿Ð¾ ÑÑÐ¾Ð»Ð±ÑÑ Ð¿ÐµÑÐµÑÐ°ÑÐ¸ÑÐµ ÑÑÐ´Ð° ÐµÐ³Ð¾ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ."},search:{placeholder:"ÐÐ¾Ð¸ÑÐº...",showingItems:"ÐÐ¾ÐºÐ°Ð·Ð°ÑÑ ÑÐ»ÐµÐ¼ÐµÐ½ÑÑ:",selectedItems:"ÐÑÐ±ÑÐ°Ð½Ð½ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½ÑÑ:",totalItems:"ÐÑÐµÐ³Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½ÑÐ¾Ð²:",size:"Ð Ð°Ð·Ð¼ÐµÑ ÑÑÑÐ°Ð½Ð¸ÑÑ:",first:"ÐÐµÑÐ²Ð°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",next:"Ð¡Ð»ÐµÐ´ÑÑÑÐ°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",previous:"ÐÑÐµÐ´ÑÐ´ÑÑÐ°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",last:"ÐÐ¾ÑÐ»ÐµÐ´Ð½ÑÑ ÑÑÑÐ°Ð½Ð¸ÑÐ°"},menu:{text:"ÐÑÐ±ÑÐ°ÑÑ ÑÑÐ¾Ð»Ð±ÑÑ:"},sort:{ascending:"ÐÐ¾ Ð²Ð¾Ð·ÑÐ°ÑÑÐ°Ð½Ð¸Ñ",descending:"ÐÐ¾ ÑÐ±ÑÐ²Ð°Ð½Ð¸Ñ",none:"ÐÐµÐ· ÑÐ¾ÑÑÐ¸ÑÐ¾Ð²ÐºÐ¸",remove:"Ð£Ð±ÑÐ°ÑÑ ÑÐ¾ÑÑÐ¸ÑÐ¾Ð²ÐºÑ"},column:{hide:"Ð¡Ð¿ÑÑÑÐ°ÑÑ ÑÑÐ¾Ð»Ð±ÐµÑ"},aggregation:{count:"Ð²ÑÐµÐ³Ð¾ ÑÑÑÐ¾Ðº: ",sum:"Ð¸ÑÐ¾Ð³Ð¾: ",avg:"ÑÑÐµÐ´Ð½ÐµÐµ: ",min:"Ð¼Ð¸Ð½: ",max:"Ð¼Ð°ÐºÑ: "},pinning:{pinLeft:"ÐÐ°ÐºÑÐµÐ¿Ð¸ÑÑ ÑÐ»ÐµÐ²Ð°",pinRight:"ÐÐ°ÐºÑÐµÐ¿Ð¸ÑÑ ÑÐ¿ÑÐ°Ð²Ð°",unpin:"ÐÑÐºÑÐµÐ¿Ð¸ÑÑ"},columnMenu:{close:"ÐÐ°ÐºÑÑÑÑ"},gridMenu:{aria:{buttonLabel:"ÐÐµÐ½Ñ"},columns:"Ð¡ÑÐ¾Ð»Ð±ÑÑ:",importerTitle:"ÐÐ¼Ð¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ ÑÐ°Ð¹Ð»",exporterAllAsCsv:"Ð­ÐºÑÐ¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ Ð²ÑÑ Ð² CSV",exporterVisibleAsCsv:"Ð­ÐºÑÐ¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ Ð²Ð¸Ð´Ð¸Ð¼ÑÐµ Ð´Ð°Ð½Ð½ÑÐµ Ð² CSV",exporterSelectedAsCsv:"Ð­ÐºÑÐ¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ Ð²ÑÐ±ÑÐ°Ð½Ð½ÑÐµ Ð´Ð°Ð½Ð½ÑÐµ Ð² CSV",exporterAllAsPdf:"Ð­ÐºÑÐ¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ Ð²ÑÑ Ð² PDF",exporterVisibleAsPdf:"Ð­ÐºÑÐ¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ Ð²Ð¸Ð´Ð¸Ð¼ÑÐµ Ð´Ð°Ð½Ð½ÑÐµ Ð² PDF",exporterSelectedAsPdf:"Ð­ÐºÑÐ¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ Ð²ÑÐ±ÑÐ°Ð½Ð½ÑÐµ Ð´Ð°Ð½Ð½ÑÐµ Ð² PDF",clearAllFilters:"ÐÑÐ¸ÑÑÐ¸ÑÐµ Ð²ÑÐµ ÑÐ¸Ð»ÑÑÑÑ"},importer:{noHeaders:"ÐÐµ ÑÐ´Ð°Ð»Ð¾ÑÑ Ð¿Ð¾Ð»ÑÑÐ¸ÑÑ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ ÑÑÐ¾Ð»Ð±ÑÐ¾Ð², ÐµÑÑÑ Ð»Ð¸ Ð² ÑÐ°Ð¹Ð»Ðµ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº?",noObjects:"ÐÐµ ÑÐ´Ð°Ð»Ð¾ÑÑ Ð¿Ð¾Ð»ÑÑÐ¸ÑÑ Ð´Ð°Ð½Ð½ÑÐµ, ÐµÑÑÑ Ð»Ð¸ Ð² ÑÐ°Ð¹Ð»Ðµ ÑÑÑÐ¾ÐºÐ¸ ÐºÑÐ¾Ð¼Ðµ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ°?",invalidCsv:"ÐÐµ ÑÐ´Ð°Ð»Ð¾ÑÑ Ð¾Ð±ÑÐ°Ð±Ð¾ÑÐ°ÑÑ ÑÐ°Ð¹Ð», ÑÑÐ¾ Ð¿ÑÐ°Ð²Ð¸Ð»ÑÐ½ÑÐ¹ CSV-ÑÐ°Ð¹Ð»?",invalidJson:"ÐÐµ ÑÐ´Ð°Ð»Ð¾ÑÑ Ð¾Ð±ÑÐ°Ð±Ð¾ÑÐ°ÑÑ ÑÐ°Ð¹Ð», ÑÑÐ¾ Ð¿ÑÐ°Ð²Ð¸Ð»ÑÐ½ÑÐ¹ JSON?",jsonNotArray:"ÐÐ¼Ð¿Ð¾ÑÑÐ¸ÑÑÐµÐ¼ÑÐ¹ JSON-ÑÐ°Ð¹Ð» Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑÐ¾Ð´ÐµÑÐ¶Ð°ÑÑ Ð¼Ð°ÑÑÐ¸Ð², Ð¾Ð¿ÐµÑÐ°ÑÐ¸Ñ Ð¾ÑÐ¼ÐµÐ½ÐµÐ½Ð°."},pagination:{aria:{pageToFirst:"ÐÐµÑÐ²Ð°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",pageBack:"ÐÑÐµÐ´ÑÐ´ÑÑÐ°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",pageSelected:"ÐÑÐ±ÑÐ°Ð½Ð½Ð°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",pageForward:"Ð¡Ð»ÐµÐ´ÑÑÑÐ°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",pageToLast:"ÐÐ¾ÑÐ»ÐµÐ´Ð½ÑÑ ÑÑÑÐ°Ð½Ð¸ÑÐ°"},sizes:"ÑÑÑÐ¾Ðº Ð½Ð° ÑÑÑÐ°Ð½Ð¸ÑÑ",totalItems:"ÑÑÑÐ¾Ðº",through:"Ð¿Ð¾",of:"Ð¸Ð·"},grouping:{group:"ÐÑÑÐ¿Ð¿Ð¸ÑÐ¾Ð²Ð°ÑÑ",ungroup:"Ð Ð°Ð·Ð³ÑÑÐ¿Ð¿Ð¸ÑÐ¾Ð²Ð°ÑÑ",aggregate_count:"ÐÑÑÐ¿Ð¿Ð¸ÑÐ¾Ð²Ð°ÑÑ: Count",aggregate_sum:"ÐÐ»Ñ Ð³ÑÑÐ¿Ð¿Ñ: Ð¡ÑÐ¼Ð¼Ð°",aggregate_max:"ÐÐ»Ñ Ð³ÑÑÐ¿Ð¿Ñ: ÐÐ°ÐºÑÐ¸Ð¼ÑÐ¼",aggregate_min:"ÐÐ»Ñ Ð³ÑÑÐ¿Ð¿Ñ: ÐÐ¸Ð½Ð¸Ð¼ÑÐ¼",aggregate_avg:"ÐÐ»Ñ Ð³ÑÑÐ¿Ð¿Ñ: Ð¡ÑÐµÐ´Ð½ÐµÐµ",aggregate_remove:"ÐÐ»Ñ Ð³ÑÑÐ¿Ð¿Ñ: ÐÑÑÑÐ¾"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("sk",{aggregate:{label:"items"},groupPanel:{description:"Pretiahni sem nÃ¡zov stÄºpca pre zoskupenie podÄ¾a toho stÄºpca."},search:{placeholder:"HÄ¾adaj...",showingItems:"Zobrazujem poloÅ¾ky:",selectedItems:"VybratÃ© poloÅ¾ky:",totalItems:"PoÄet poloÅ¾iek:",size:"PoÄet:",first:"PrvÃ¡ strana",next:"ÄalÅ¡ia strana",previous:"PredchÃ¡dzajÃºca strana",last:"PoslednÃ¡ strana"},menu:{text:"Vyberte stÄºpce:"},sort:{ascending:"ZotriediÅ¥ vzostupne",descending:"ZotriediÅ¥ zostupne",remove:"VymazaÅ¥ triedenie"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("sv",{aggregate:{label:"Artiklar"},groupPanel:{description:"Dra en kolumnrubrik hit och slÃ¤pp den fÃ¶r att gruppera efter den kolumnen."},search:{placeholder:"SÃ¶k...",showingItems:"Visar artiklar:",selectedItems:"Valda artiklar:",totalItems:"Antal artiklar:",size:"Sidstorlek:",first:"FÃ¶rsta sidan",next:"NÃ¤sta sida",previous:"FÃ¶regÃ¥ende sida",last:"Sista sidan"},menu:{text:"VÃ¤lj kolumner:"},sort:{ascending:"Sortera stigande",descending:"Sortera fallande",remove:"Inaktivera sortering"},column:{hide:"GÃ¶m kolumn"},aggregation:{count:"Antal rader: ",sum:"Summa: ",avg:"Genomsnitt: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"FÃ¤st vÃ¤nster",pinRight:"FÃ¤st hÃ¶ger",unpin:"LÃ¶sgÃ¶r"},gridMenu:{columns:"Kolumner:",importerTitle:"Importera fil",exporterAllAsCsv:"Exportera all data som CSV",exporterVisibleAsCsv:"Exportera synlig data som CSV",exporterSelectedAsCsv:"Exportera markerad data som CSV",exporterAllAsPdf:"Exportera all data som PDF",exporterVisibleAsPdf:"Exportera synlig data som PDF",exporterSelectedAsPdf:"Exportera markerad data som PDF",clearAllFilters:"RengÃ¶r alla filter"},importer:{noHeaders:"Kolumnnamn kunde inte hÃ¤rledas. Har filen ett sidhuvud?",noObjects:"Objekt kunde inte hÃ¤rledas. Har filen data undantaget sidhuvud?",invalidCsv:"Filen kunde inte behandlas, Ã¤r den en giltig CSV?",invalidJson:"Filen kunde inte behandlas, Ã¤r den en giltig JSON?",jsonNotArray:"Importerad JSON-fil mÃ¥ste innehÃ¥lla ett fÃ¤lt. Import avbruten."},pagination:{sizes:"Artiklar per sida",totalItems:"Artiklar"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ta",{aggregate:{label:"à®à®°à¯à®ªà¯à®ªà®à®¿à®à®³à¯"},groupPanel:{description:"à®à®°à¯ à®ªà®¤à¯à®¤à®¿à®¯à¯ à®à¯à®´à¯à®µà®¾à® à®à®®à¯à®à¯à® à®à®ªà¯à®ªà®¤à¯à®¤à®¿à®¯à®¿à®©à¯ à®¤à®²à¯à®ªà¯à®ªà¯ à®à®à¯à®à¯  à®à®´à¯à®¤à¯à®¤à¯ à®µà®°à®µà¯à®®à¯ "},search:{placeholder:"à®¤à¯à®à®²à¯ ...",showingItems:"à®à®°à¯à®ªà¯à®ªà®à®¿à®à®³à¯ à®à®¾à®£à¯à®ªà®¿à®¤à¯à®¤à®²à¯:",selectedItems:"à®¤à¯à®°à¯à®¨à¯à®¤à¯à®à¯à®à¯à®à®ªà¯à®ªà®à¯à®  à®à®°à¯à®ªà¯à®ªà®à®¿à®à®³à¯:",totalItems:"à®®à¯à®¤à¯à®¤ à®à®°à¯à®ªà¯à®ªà®à®¿à®à®³à¯:",size:"à®ªà®à¯à® à®à®³à®µà¯: ",first:"à®®à¯à®¤à®²à¯ à®ªà®à¯à®à®®à¯",next:"à®à®à¯à®¤à¯à®¤ à®ªà®à¯à®à®®à¯",previous:"à®®à¯à®¨à¯à®¤à¯à®¯ à®ªà®à¯à®à®®à¯ ",last:"à®à®±à¯à®¤à®¿ à®ªà®à¯à®à®®à¯"},menu:{text:"à®ªà®¤à¯à®¤à®¿à®à®³à¯ à®¤à¯à®°à¯à®¨à¯à®¤à¯à®à¯:"},sort:{ascending:"à®®à¯à®²à®¿à®°à¯à®¨à¯à®¤à¯ à®à¯à®´à®¾à®",descending:"à®à¯à®´à®¿à®°à¯à®¨à¯à®¤à¯ à®®à¯à®²à®¾à®",remove:"à®µà®°à®¿à®à¯à®¯à¯ à®¨à¯à®à¯à®à¯"},column:{hide:"à®ªà®¤à¯à®¤à®¿à®¯à¯ à®®à®±à¯à®¤à¯à®¤à¯ à®µà¯ "},aggregation:{count:"à®®à¯à®¤à¯à®¤ à®µà®°à®¿à®à®³à¯:",sum:"à®®à¯à®¤à¯à®¤à®®à¯: ",avg:"à®à®°à®¾à®à®°à®¿: ",min:"à®à¯à®±à¯à®¨à¯à®¤à®ªà®à¯à®: ",max:"à®à®¤à®¿à®à®ªà®à¯à®: "},pinning:{pinLeft:"à®à®à®¤à¯à®ªà¯à®±à®®à®¾à® à®¤à¯à®à¯à® ",pinRight:"à®µà®²à®¤à¯à®ªà¯à®±à®®à®¾à® à®¤à¯à®à¯à®",unpin:"à®ªà®¿à®°à®¿"},gridMenu:{columns:"à®ªà®¤à¯à®¤à®¿à®à®³à¯:",importerTitle:"à®à¯à®ªà¯à®ªà¯ : à®ªà®à®¿à®¤à¯à®¤à®²à¯",exporterAllAsCsv:"à®à®²à¯à®²à®¾ à®¤à®°à®µà¯à®à®³à¯à®¯à¯à®®à¯ à®à¯à®ªà¯à®ªà®¾à®à¯à®à¯: csv",exporterVisibleAsCsv:"à®à®°à¯à®à¯à®à¯à®®à¯ à®¤à®°à®µà¯à®à®³à¯ à®à¯à®ªà¯à®ªà®¾à®à¯à®à¯: csv",exporterSelectedAsCsv:"à®¤à¯à®°à¯à®¨à¯à®¤à¯à®à¯à®¤à¯à®¤ à®¤à®°à®µà¯à®à®³à¯ à®à¯à®ªà¯à®ªà®¾à®à¯à®à¯: csv",exporterAllAsPdf:"à®à®²à¯à®²à®¾ à®¤à®°à®µà¯à®à®³à¯à®¯à¯à®®à¯ à®à¯à®ªà¯à®ªà®¾à®à¯à®à¯: pdf",exporterVisibleAsPdf:"à®à®°à¯à®à¯à®à¯à®®à¯ à®¤à®°à®µà¯à®à®³à¯ à®à¯à®ªà¯à®ªà®¾à®à¯à®à¯: pdf",exporterSelectedAsPdf:"à®¤à¯à®°à¯à®¨à¯à®¤à¯à®à¯à®¤à¯à®¤ à®¤à®°à®µà¯à®à®³à¯ à®à¯à®ªà¯à®ªà®¾à®à¯à®à¯: pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"à®ªà®¤à¯à®¤à®¿à®¯à®¿à®©à¯ à®¤à®²à¯à®ªà¯à®ªà¯à®à®³à¯ à®ªà¯à®± à®à®¯à®²à®µà®¿à®²à¯à®²à¯, à®à¯à®ªà¯à®ªà®¿à®±à¯à®à¯ à®¤à®²à¯à®ªà¯à®ªà¯ à®à®³à¯à®³à®¤à®¾?",noObjects:"à®à®²à®à¯à®à¯à®à®³à¯ à®à®°à¯à®µà®¾à®à¯à® à®®à¯à®à®¿à®¯à®µà®¿à®²à¯à®²à¯, à®à¯à®ªà¯à®ªà®¿à®²à¯ à®¤à®²à¯à®ªà¯à®ªà¯à®à®³à¯ à®¤à®µà®¿à®° à®¤à®°à®µà¯ à®à®¤à¯à®©à¯à®®à¯ à®à®³à¯à®³à®¤à®¾? ",invalidCsv:"à®à®°à®¿à®µà®° à®¨à®à¯à®®à¯à®±à¯ à®ªà®à¯à®¤à¯à®¤ à®à®¯à®²à®µà®¿à®²à¯à®²à¯, à®à¯à®ªà¯à®ªà¯ à®à®°à®¿à®¤à®¾à®©à®¾? - csv",invalidJson:"à®à®°à®¿à®µà®° à®¨à®à¯à®®à¯à®±à¯ à®ªà®à¯à®¤à¯à®¤ à®à®¯à®²à®µà®¿à®²à¯à®²à¯, à®à¯à®ªà¯à®ªà¯ à®à®°à®¿à®¤à®¾à®©à®¾? - json",jsonNotArray:"à®ªà®à®¿à®¤à¯à®¤ à®à¯à®ªà¯à®ªà®¿à®²à¯ à®µà®°à®¿à®à¯à®à®³à¯ à®à®³à¯à®³à®¤à¯, à®¨à®à¯à®®à¯à®±à¯ à®°à®¤à¯à®¤à¯ à®à¯à®¯à¯ : json"},pagination:{sizes:"à®à®°à¯à®ªà¯à®ªà®à®¿à®à®³à¯ / à®ªà®à¯à®à®®à¯",totalItems:"à®à®°à¯à®ªà¯à®ªà®à®¿à®à®³à¯ "},grouping:{group:"à®à¯à®´à¯",ungroup:"à®ªà®¿à®°à®¿",aggregate_count:"à®®à®¤à®¿à®ªà¯à®ªà¯à®à¯à®à¯ : à®à®£à¯à®£à¯",aggregate_sum:"à®®à®¤à®¿à®ªà¯à®ªà¯à®à¯à®à¯ : à®à¯à®à¯à®à®²à¯",aggregate_max:"à®®à®¤à®¿à®ªà¯à®ªà¯à®à¯à®à¯ : à®à®¤à®¿à®à®ªà®à¯à®à®®à¯",aggregate_min:"à®®à®¤à®¿à®ªà¯à®ªà¯à®à¯à®à¯ : à®à¯à®±à¯à®¨à¯à®¤à®ªà®à¯à®à®®à¯",aggregate_avg:"à®®à®¤à®¿à®ªà¯à®ªà¯à®à¯à®à¯ : à®à®°à®¾à®à®°à®¿",aggregate_remove:"à®®à®¤à®¿à®ªà¯à®ªà¯à®à¯à®à¯ : à®¨à¯à®à¯à®à¯"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("tr",{headerCell:{aria:{defaultFilterLabel:"SÃ¼tun iÃ§in filtre",removeFilter:"Filtreyi KaldÄ±r",columnMenuButtonLabel:"SÃ¼tun MenÃ¼sÃ¼"},priority:"Ãncelik:",filterLabel:"SÃ¼tun iÃ§in filtre: "},aggregate:{label:"kayÄ±tlar"},groupPanel:{description:"SÃ¼tuna gÃ¶re gruplamak iÃ§in sÃ¼tun baÅlÄ±ÄÄ±nÄ± buraya sÃ¼rÃ¼kleyin ve bÄ±rakÄ±n."},search:{placeholder:"Arama...",showingItems:"GÃ¶sterilen KayÄ±t:",selectedItems:"SeÃ§ili KayÄ±t:",totalItems:"Toplam KayÄ±t:",size:"Sayfa Boyutu:",first:"Ä°lk Sayfa",next:"Sonraki Sayfa",previous:"Ãnceki Sayfa",last:"Son Sayfa"},menu:{text:"SÃ¼tunlarÄ± SeÃ§:"},sort:{ascending:"Artan SÄ±rada SÄ±rala",descending:"Azalan SÄ±rada SÄ±rala",none:"SÄ±ralama Yapma",remove:"SÄ±ralamayÄ± KaldÄ±r"},column:{hide:"SÃ¼tunu Gizle"},aggregation:{count:"toplam satÄ±r: ",sum:"toplam: ",avg:"ort: ",min:"min: ",max:"maks: "},pinning:{pinLeft:"Sola Sabitle",pinRight:"SaÄa Sabitle",unpin:"Sabitlemeyi KaldÄ±r"},columnMenu:{close:"Kapat"},gridMenu:{aria:{buttonLabel:"Tablo MenÃ¼"},columns:"SÃ¼tunlar:",importerTitle:"Dosya iÃ§eri aktar",exporterAllAsCsv:"BÃ¼tÃ¼n veriyi CSV olarak dÄ±ÅarÄ± aktar",exporterVisibleAsCsv:"GÃ¶rÃ¼nen veriyi CSV olarak dÄ±ÅarÄ± aktar",exporterSelectedAsCsv:"SeÃ§ili veriyi CSV olarak dÄ±ÅarÄ± aktar",exporterAllAsPdf:"BÃ¼tÃ¼n veriyi PDF olarak dÄ±ÅarÄ± aktar",exporterVisibleAsPdf:"GÃ¶rÃ¼nen veriyi PDF olarak dÄ±ÅarÄ± aktar",exporterSelectedAsPdf:"SeÃ§ili veriyi PDF olarak dÄ±ÅarÄ± aktar",clearAllFilters:"BÃ¼tÃ¼n filtreleri kaldÄ±r"},importer:{noHeaders:"SÃ¼tun isimleri Ã¼retilemiyor, dosyanÄ±n bir baÅlÄ±ÄÄ± var mÄ±?",noObjects:"Nesneler Ã¼retilemiyor, dosyada baÅlÄ±ktan baÅka bir veri var mÄ±?",invalidCsv:"Dosya iÅlenemedi, geÃ§erli bir CSV dosyasÄ± mÄ±?",invalidJson:"Dosya iÅlenemedi, geÃ§erli bir Json dosyasÄ± mÄ±?",jsonNotArray:"AlÄ±nan Json dosyasÄ±nda bir dizi bulunmalÄ±dÄ±r, iÅlem iptal ediliyor."},pagination:{aria:{pageToFirst:"Ä°lk sayfaya",pageBack:"Geri git",pageSelected:"SeÃ§ili sayfa",pageForward:"Ä°leri git",pageToLast:"Sona git"},sizes:"Sayfadaki nesne sayÄ±sÄ±",totalItems:"kayÄ±tlar",through:"",of:""},grouping:{group:"Grupla",ungroup:"Gruplama",aggregate_count:"Yekun: SayÄ±",aggregate_sum:"Yekun: Toplam",aggregate_max:"Yekun: Maks",aggregate_min:"Yekun: Min",aggregate_avg:"Yekun: Ort",aggregate_remove:"Yekun: Sil"}}),e}])}])}(),function(){var e=["uiT","uiTranslate"],t=["t","uiTranslate"],n=angular.module("ui.grid.i18n");n.constant("i18nConstants",{MISSING:"[MISSING]",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),n.service("i18nService",["$log","i18nConstants","$rootScope",function(e,t,n){var i={_langs:{},current:null,get:function(e){return this._langs[e.toLowerCase()]},add:function(e,t){var n=e.toLowerCase();this._langs[n]||(this._langs[n]={}),angular.extend(this._langs[n],t)},getAllLangs:function(){var e=[];if(!this._langs)return e;for(var t in this._langs)e.push(t);return e},setCurrent:function(e){this.current=e.toLowerCase()},getCurrentLang:function(){return this.current}},o={add:function(e,t){"object"==typeof e?angular.forEach(e,function(e){e&&i.add(e,t)}):i.add(e,t)},getAllLangs:function(){return i.getAllLangs()},get:function(e){var t=e||o.getCurrentLang();return i.get(t)},getSafeText:function(e,n){var r=n||o.getCurrentLang(),a=i.get(r);if(!a)return t.MISSING;for(var s=e.split("."),l=a,c=0;c<s.length;++c){if(void 0===l[s[c]]||null===l[s[c]])return t.MISSING;l=l[s[c]]}return l},setCurrentLang:function(e){e&&(i.setCurrent(e),n.$broadcast(t.UPDATE_EVENT))},getCurrentLang:function(){var e=i.getCurrentLang();return e||(e=t.DEFAULT_LANG,i.setCurrent(e)),e}};return o}]);var i=function(e,t){return{compile:function(){return{pre:function(n,i,o){var r=t.LOCALE_DIRECTIVE_ALIAS,a=n.$eval(o[r]);a?n.$watch(o[r],function(){e.setCurrentLang(a)}):o.$$observers&&o.$observe(r,function(){e.setCurrentLang(o[r]||t.DEFAULT_LANG)})}}}}};n.directive("uiI18n",["i18nService","i18nConstants",i]);var o=function(t,n,i){return{restrict:"EA",compile:function(){return{pre:function(o,r,a){var s,l=e[0],c=e[1],d=a[l]||a[c]||r.html(),u=i.MISSING+d;if(a.$$observers){var p=a[l]?l:c;s=a.$observe(p,function(e){e&&r.html(t(e)(n.getCurrentLang())||u)})}var g=t(d),m=o.$on(i.UPDATE_EVENT,function(e){s?s(a[l]||a[c]):r.html(g(n.get())||u)});o.$on("$destroy",m),r.html(g(n.get())||u)}}}}};angular.forEach(e,function(e){n.directive(e,["$parse","i18nService","i18nConstants",o])});var r=function(e,t,n){return function(i){return e(i)(t.get())||n.MISSING+i}};angular.forEach(t,function(e){n.filter(e,["$parse","i18nService","i18nConstants",r])})}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("zh-cn",{headerCell:{aria:{defaultFilterLabel:"åè¿æ»¤å¨",removeFilter:"ç§»é¤è¿æ»¤å¨",columnMenuButtonLabel:"åèå"},priority:"ä¼åçº§:",filterLabel:"åè¿æ»¤å¨: "},aggregate:{label:"è¡"},groupPanel:{description:"ææ³è¡¨å¤´å°æ­¤å¤è¿è¡åç»"},search:{placeholder:"æ¥æ¾",showingItems:"å·²æ¾ç¤ºè¡æ°ï¼",selectedItems:"å·²éæ©è¡æ°ï¼",totalItems:"æ»è¡æ°ï¼",size:"æ¯é¡µæ¾ç¤ºè¡æ°ï¼",first:"é¦é¡µ",next:"ä¸ä¸é¡µ",previous:"ä¸ä¸é¡µ",last:"æ«é¡µ"},menu:{text:"éæ©åï¼"},sort:{ascending:"ååº",descending:"éåº",none:"æ åº",remove:"åæ¶æåº"},column:{hide:"éèå"},aggregation:{count:"è®¡æ°ï¼",sum:"æ±åï¼",avg:"åå¼ï¼",min:"æå°å¼ï¼",max:"æå¤§å¼ï¼"},pinning:{pinLeft:"å·¦ä¾§åºå®",pinRight:"å³ä¾§åºå®",unpin:"åæ¶åºå®"},columnMenu:{close:"å³é­"},gridMenu:{aria:{buttonLabel:"è¡¨æ ¼èå"},columns:"åï¼",importerTitle:"å¯¼å¥æä»¶",exporterAllAsCsv:"å¯¼åºå¨é¨æ°æ®å°CSV",exporterVisibleAsCsv:"å¯¼åºå¯è§æ°æ®å°CSV",exporterSelectedAsCsv:"å¯¼åºå·²éæ°æ®å°CSV",exporterAllAsPdf:"å¯¼åºå¨é¨æ°æ®å°PDF",exporterVisibleAsPdf:"å¯¼åºå¯è§æ°æ®å°PDF",exporterSelectedAsPdf:"å¯¼åºå·²éæ°æ®å°PDF",clearAllFilters:"æ¸é¤ææè¿æ»¤å¨"},importer:{noHeaders:"æ æ³è·åååï¼ç¡®å®æä»¶åå«è¡¨å¤´ï¼",noObjects:"æ æ³è·åæ°æ®ï¼ç¡®å®æä»¶åå«æ°æ®ï¼",invalidCsv:"æ æ³å¤çæä»¶ï¼ç¡®å®æ¯åæ³çCSVæä»¶ï¼",invalidJson:"æ æ³å¤çæä»¶ï¼ç¡®å®æ¯åæ³çJSONæä»¶ï¼",jsonNotArray:"å¯¼å¥çæä»¶ä¸æ¯JSONæ°ç»ï¼"},pagination:{aria:{pageToFirst:"ç¬¬ä¸é¡µ",pageBack:"ä¸ä¸é¡µ",pageSelected:"å½åé¡µ",pageForward:"ä¸ä¸é¡µ",pageToLast:"æåä¸é¡µ"},sizes:"è¡æ¯é¡µ",totalItems:"è¡",through:"è³",of:"å±"},grouping:{group:"åç»",ungroup:"åæ¶åç»",aggregate_count:"åè®¡: è®¡æ°",aggregate_sum:"åè®¡: æ±å",aggregate_max:"åè®¡: æå¤§",aggregate_min:"åè®¡: æå°",aggregate_avg:"åè®¡: å¹³å",aggregate_remove:"åè®¡: ç§»é¤"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("zh-tw",{aggregate:{label:"è¡"},groupPanel:{description:"ææ³è¡¨é ­å°æ­¤èé²è¡åçµ"},search:{placeholder:"æ¥æ¾",showingItems:"å·²é¡¯ç¤ºè¡æ¸ï¼",selectedItems:"å·²é¸æè¡æ¸ï¼",totalItems:"ç¸½è¡æ¸ï¼",size:"æ¯é é¡¯ç¤ºè¡æ¸ï¼",first:"é¦é ",next:"ä¸å£¹é ",previous:"ä¸å£¹é ",last:"æ«é "},menu:{text:"é¸æåï¼"},sort:{ascending:"ååº",descending:"éåº",remove:"åæ¶æåº"},column:{hide:"é±èå"},aggregation:{count:"è¨æ¸ï¼",sum:"æ±åï¼",avg:"åå¼ï¼",min:"æå°å¼ï¼",max:"æå¤§å¼ï¼"},pinning:{pinLeft:"å·¦å´åºå®",pinRight:"å³å´åºå®",unpin:"åæ¶åºå®"},gridMenu:{columns:"åï¼",importerTitle:"å°å¥æä»¶",exporterAllAsCsv:"å°åºå¨é¨æ¸æå°CSV",exporterVisibleAsCsv:"å°åºå¯è¦æ¸æå°CSV",exporterSelectedAsCsv:"å°åºå·²é¸æ¸æå°CSV",exporterAllAsPdf:"å°åºå¨é¨æ¸æå°PDF",exporterVisibleAsPdf:"å°åºå¯è¦æ¸æå°PDF",exporterSelectedAsPdf:"å°åºå·²é¸æ¸æå°PDF",clearAllFilters:"æ¸é¤ææè¿æ»¤å¨"},importer:{noHeaders:"ç¡æ³ç²åååï¼ç¢ºå®æä»¶åå«è¡¨é ­ï¼",noObjects:"ç¡æ³ç²åæ¸æï¼ç¢ºå®æä»¶åå«æ¸æï¼",invalidCsv:"ç¡æ³èçæä»¶ï¼ç¢ºå®æ¯åæ³çCSVæä»¶ï¼",invalidJson:"ç¡æ³èçæä»¶ï¼ç¢ºå®æ¯åæ³çJSONæä»¶ï¼",jsonNotArray:"å°å¥çæä»¶ä¸æ¯JSONæ¸çµï¼"},pagination:{sizes:"è¡æ¯é ",totalItems:"è¡"}}),e}])}])}(),function(){angular.module("ui.grid.autoResize",["ui.grid"]).directive("uiGridAutoResize",["$timeout","gridUtil",function(e,t){return{require:"uiGrid",scope:!1,link:function(e,n,i,o){function r(){l=t.elementHeight(n),s=t.elementWidth(n)}function a(){clearTimeout(c),c=setTimeout(function(){var i=t.elementHeight(n),c=t.elementWidth(n);i!==l||c!==s?(o.grid.gridHeight=i,o.grid.gridWidth=c,e.$apply(function(){o.grid.refresh().then(function(){r(),a()})})):a()},250)}var s,l;r();var c;a(),e.$on("$destroy",function(){clearTimeout(c)})}}}])}(),function(){var e=angular.module("ui.grid.cellNav",["ui.grid"]);e.constant("uiGridCellNavConstants",{FEATURE_NAME:"gridCellNav",CELL_NAV_EVENT:"cellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3,PG_UP:4,PG_DOWN:5},EVENT_TYPE:{KEYDOWN:0,CLICK:1,CLEAR:2}}),e.factory("uiGridCellNavFactory",["gridUtil","uiGridConstants","uiGridCellNavConstants","GridRowColumn","$q",function(e,t,n,i,o){var r=function(e,t,n,i){this.rows=e.visibleRowCache,this.columns=t.visibleColumnCache,this.leftColumns=n?n.visibleColumnCache:[],this.rightColumns=i?i.visibleColumnCache:[],this.bodyContainer=e};return r.prototype.getFocusableCols=function(){return this.leftColumns.concat(this.columns,this.rightColumns).filter(function(e){return e.colDef.allowCellFocus})},r.prototype.getFocusableRows=function(){return this.rows.filter(function(e){return!1!==e.allowCellFocus})},r.prototype.getNextRowCol=function(e,t,i){switch(e){case n.direction.LEFT:return this.getRowColLeft(t,i);case n.direction.RIGHT:return this.getRowColRight(t,i);case n.direction.UP:return this.getRowColUp(t,i);case n.direction.DOWN:return this.getRowColDown(t,i);case n.direction.PG_UP:return this.getRowColPageUp(t,i);case n.direction.PG_DOWN:return this.getRowColPageDown(t,i)}},r.prototype.initializeSelection=function(){var e=this.getFocusableCols(),t=this.getFocusableRows();if(0===e.length||0===t.length)return null;return new i(t[0],e[0])},r.prototype.getRowColLeft=function(e,t){var n=this.getFocusableCols(),o=this.getFocusableRows(),r=n.indexOf(t),a=o.indexOf(e);-1===r&&(r=1);var s=0===r?n.length-1:r-1;return s>r?0===a?new i(e,n[s]):new i(o[a-1],n[s]):new i(e,n[s])},r.prototype.getRowColRight=function(e,t){var n=this.getFocusableCols(),o=this.getFocusableRows(),r=n.indexOf(t),a=o.indexOf(e);-1===r&&(r=0);var s=r===n.length-1?0:r+1;return s<r?a===o.length-1?new i(e,n[s]):new i(o[a+1],n[s]):new i(e,n[s])},r.prototype.getRowColDown=function(e,t){var n=this.getFocusableCols(),o=this.getFocusableRows(),r=n.indexOf(t),a=o.indexOf(e);return-1===r&&(r=0),a===o.length-1?new i(e,n[r]):new i(o[a+1],n[r])},r.prototype.getRowColPageDown=function(e,t){var n=this.getFocusableCols(),o=this.getFocusableRows(),r=n.indexOf(t),a=o.indexOf(e);-1===r&&(r=0);var s=this.bodyContainer.minRowsToRender();return a>=o.length-s?new i(o[o.length-1],n[r]):new i(o[a+s],n[r])},r.prototype.getRowColUp=function(e,t){var n=this.getFocusableCols(),o=this.getFocusableRows(),r=n.indexOf(t),a=o.indexOf(e);return-1===r&&(r=0),0===a?new i(e,n[r]):new i(o[a-1],n[r])},r.prototype.getRowColPageUp=function(e,t){var n=this.getFocusableCols(),o=this.getFocusableRows(),r=n.indexOf(t),a=o.indexOf(e);-1===r&&(r=0);var s=this.bodyContainer.minRowsToRender();return a-s<0?new i(o[0],n[r]):new i(o[a-s],n[r])},r}]),e.service("uiGridCellNavService",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q","uiGridCellNavFactory","GridRowColumn","ScrollEvent",function(e,t,n,i,o,r,a){var s={initializeGrid:function(e){e.registerColumnBuilder(s.cellNavColumnBuilder),e.cellNav={},e.cellNav.lastRowCol=null,e.cellNav.focusedCells=[],s.defaultGridOptions(e.options);var t={events:{cellNav:{navigate:function(e,t){},viewPortKeyDown:function(e,t){},viewPortKeyPress:function(e,t){}}},methods:{cellNav:{scrollToFocus:function(t,n){return s.scrollToFocus(e,t,n)},getFocusedCell:function(){return e.cellNav.lastRowCol},getCurrentSelection:function(){return e.cellNav.focusedCells},rowColSelectIndex:function(t){for(var n=-1,i=0;i<e.cellNav.focusedCells.length;i++)if(e.cellNav.focusedCells[i].col.uid===t.col.uid&&e.cellNav.focusedCells[i].row.uid===t.row.uid){n=i;break}return n}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.modifierKeysToMultiSelectCells=!0===e.modifierKeysToMultiSelectCells},decorateRenderContainers:function(e){var t=e.hasRightContainer()?e.renderContainers.right:null,n=e.hasLeftContainer()?e.renderContainers.left:null;null!==n&&(e.renderContainers.left.cellNav=new o(e.renderContainers.body,n,t,e.renderContainers.body)),null!==t&&(e.renderContainers.right.cellNav=new o(e.renderContainers.body,t,e.renderContainers.body,n)),e.renderContainers.body.cellNav=new o(e.renderContainers.body,e.renderContainers.body,n,t)},getDirection:function(e){return e.keyCode===t.keymap.LEFT||e.keyCode===t.keymap.TAB&&e.shiftKey?n.direction.LEFT:e.keyCode===t.keymap.RIGHT||e.keyCode===t.keymap.TAB?n.direction.RIGHT:e.keyCode===t.keymap.UP||e.keyCode===t.keymap.ENTER&&e.shiftKey?n.direction.UP:e.keyCode===t.keymap.PG_UP?n.direction.PG_UP:e.keyCode===t.keymap.DOWN||e.keyCode===t.keymap.ENTER&&!e.ctrlKey&&!e.altKey?n.direction.DOWN:e.keyCode===t.keymap.PG_DOWN?n.direction.PG_DOWN:null},cellNavColumnBuilder:function(e,t,n){var o=[];return e.allowCellFocus=void 0===e.allowCellFocus||e.allowCellFocus,i.all(o)},scrollToFocus:function(e,t,n){var i=null,o=null;return void 0!==t&&null!==t&&(i=e.getRow(t)),void 0!==n&&null!==n&&(o=e.getColumn(n.name?n.name:n.field)),e.api.core.scrollToIfNecessary(i,o).then(function(){var t={row:i,col:o};null!==i&&null!==o&&e.cellNav.broadcastCellNav(t)})},getLeftWidth:function(e,t){var n=0;if(!t)return n;var i=e.renderContainers.body.visibleColumnCache.indexOf(t);e.renderContainers.body.visibleColumnCache.forEach(function(e,t){t<i&&(n+=e.drawnWidth)});var o=0===i?0:(i+1)/e.renderContainers.body.visibleColumnCache.length;return n+=t.drawnWidth*o}};return s}]),e.directive("uiGridCellnav",["gridUtil","uiGridCellNavService","uiGridCellNavConstants","uiGridConstants","GridRowColumn","$timeout","$compile",function(e,t,n,i,o,r,a){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,controller:function(){},compile:function(){return{pre:function(e,r,a,s){var l=e,c=s.grid;t.initializeGrid(c),s.cellNav={},s.cellNav.makeRowCol=function(e){return e instanceof o||(e=new o(e.row,e.col)),e},s.cellNav.getActiveCell=function(){var e=r[0].getElementsByClassName("ui-grid-cell-focus");if(e.length>0)return e[0]},s.cellNav.broadcastCellNav=c.cellNav.broadcastCellNav=function(e,t,i){t=!(void 0===t||!t),e=s.cellNav.makeRowCol(e),s.cellNav.broadcastFocus(e,t,i),l.$broadcast(n.CELL_NAV_EVENT,e,t,i)},s.cellNav.clearFocus=c.cellNav.clearFocus=function(){c.cellNav.focusedCells=[],l.$broadcast(n.CELL_NAV_EVENT)},s.cellNav.broadcastFocus=function(e,t,n){t=!(void 0===t||!t),e=s.cellNav.makeRowCol(e);var i=e.row,r=e.col,a=s.grid.api.cellNav.rowColSelectIndex(e);if(null===c.cellNav.lastRowCol||-1===a){var l=new o(i,r);null!==c.cellNav.lastRowCol&&c.cellNav.lastRowCol.row===l.row&&c.cellNav.lastRowCol.col===l.col||(c.api.cellNav.raise.navigate(l,c.cellNav.lastRowCol),c.cellNav.lastRowCol=l),s.grid.options.modifierKeysToMultiSelectCells&&t?c.cellNav.focusedCells.push(e):c.cellNav.focusedCells=[e]}else c.options.modifierKeysToMultiSelectCells&&t&&a>=0&&c.cellNav.focusedCells.splice(a,1)},s.cellNav.handleKeyDown=function(e){var o=t.getDirection(e);if(null===o)return null;var r="body";e.uiGridTargetRenderContainerId&&(r=e.uiGridTargetRenderContainerId);var a=s.grid.api.cellNav.getFocusedCell();if(a){var l=s.grid.renderContainers[r].cellNav.getNextRowCol(o,a.row,a.col),d=s.grid.renderContainers[r].cellNav.getFocusableCols(),u=s.grid.api.cellNav.rowColSelectIndex(l);return o===n.direction.LEFT&&l.col===d[d.length-1]&&l.row===a.row&&e.keyCode===i.keymap.TAB&&e.shiftKey?(c.cellNav.focusedCells.splice(u,1),s.cellNav.clearFocus(),!0):o!==n.direction.RIGHT||l.col!==d[0]||l.row!==a.row||e.keyCode!==i.keymap.TAB||e.shiftKey?(c.scrollToIfNecessary(l.row,l.col).then(function(){s.cellNav.broadcastCellNav(l)}),e.stopPropagation(),e.preventDefault(),!1):(c.cellNav.focusedCells.splice(u,1),s.cellNav.clearFocus(),!0)}}},post:function(e,t,i,o){function r(){var i='<div id="'+s.id+'-aria-speakable" class="ui-grid-a11y-ariascreenreader-speakable ui-grid-offscreen" aria-live="assertive" role="region" aria-atomic="true" aria-hidden="false" aria-relevant="additions" >&nbsp;</div>',o=a(i)(e);t.prepend(o),e.$on(n.CELL_NAV_EVENT,function(e,t,n,i){function r(e){e!==o.text()&&(o[0].style.clip="rect(0px,0px,0px,0px)",o[0].innerHTML="",o[0].style.visibility="hidden",o[0].style.visibility="visible",""!==e&&(o[0].style.clip="auto",o[0].appendChild(document.createTextNode(e+" ")),o[0].style.visibility="hidden",o[0].style.visibility="visible"))}if(!i||"focus"!==i.type){for(var a=[],l=s.api.cellNav.getCurrentSelection(),c=0;c<l.length;c++)a.push(l[c].getIntersectionValueFiltered());r(a.toString())}})}var s=o.grid;r()}}}}}]),e.directive("uiGridRenderContainer",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","$compile","uiGridCellNavConstants",function(e,t,n,i,o,r,a){return{replace:!0,priority:-99999,require:["^uiGrid","uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{post:function(t,i,s,l){var c=l[0],d=l[1],u=l[2];if(c.grid.api.cellNav){var p=d.containerId,g=c.grid;if(o.decorateRenderContainers(g),"body"===p){c.grid.options.modifierKeysToMultiSelectCells?i.attr("aria-multiselectable",!0):i.attr("aria-multiselectable",!1);var m=r('<div class="ui-grid-focuser" role="region" aria-live="assertive" aria-atomic="false" tabindex="0" aria-controls="'+g.id+"-aria-speakable "+g.id+'-grid-container" aria-owns="'+g.id+'-grid-container"></div>')(t);i.append(m),m.on("focus",function(e){e.uiGridTargetRenderContainerId=p;var t=c.grid.api.cellNav.getFocusedCell();null===t&&(t=c.grid.renderContainers[p].cellNav.getNextRowCol(a.direction.DOWN,null,null),t.row&&t.col&&c.cellNav.broadcastCellNav(t))}),u.setAriaActivedescendant=function(e){i.attr("aria-activedescendant",e)},u.removeAriaActivedescendant=function(e){i.attr("aria-activedescendant")===e&&i.attr("aria-activedescendant","")},c.focus=function(){n.focus.byElement(m[0])};var f=null;m.on("keydown",function(e){e.uiGridTargetRenderContainerId=p;var t=c.grid.api.cellNav.getFocusedCell();null===c.cellNav.handleKeyDown(e)&&(c.grid.api.cellNav.raise.viewPortKeyDown(e,t),f=t)}),m.on("keypress",function(t){f&&(e(function(){c.grid.api.cellNav.raise.viewPortKeyPress(t,f)},4),f=null)}),t.$on("$destroy",function(){m.off()})}}}}}}}]),e.directive("uiGridViewport",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","uiGridCellNavConstants","$log","$compile",function(e,t,n,i,o,r,a,s){return{replace:!0,priority:-99999,require:["^uiGrid","^uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{pre:function(e,t,n,i){},post:function(e,t,n,i){var o=i[0],r=i[1];if(o.grid.api.cellNav){if("body"===r.containerId){var a=o.grid;a.api.core.on.scrollBegin(e,function(e){var t=o.grid.api.cellNav.getFocusedCell();null!==t&&r.colContainer.containsColumn(t.col)&&o.cellNav.clearFocus()}),a.api.core.on.scrollEnd(e,function(e){var t=o.grid.api.cellNav.getFocusedCell();null!==t&&r.colContainer.containsColumn(t.col)&&o.cellNav.broadcastCellNav(t)}),a.api.cellNav.on.navigate(e,function(){o.focus()})}}}}}}}]),e.directive("uiGridCell",["$timeout","$document","uiGridCellNavService","gridUtil","uiGridCellNavConstants","uiGridConstants","GridRowColumn",function(e,t,n,i,o,r,a){return{priority:-150,restrict:"A",require:["^uiGrid","?^uiGridCellnav"],scope:!1,link:function(e,t,n,i){function r(e){e.preventDefault()}function s(){if(!e.focused){t.find("div").addClass("ui-grid-cell-focus"),t.attr("aria-selected",!0),d.setAriaActivedescendant(t.attr("id")),e.focused=!0}}function l(){if(e.focused){t.find("div").removeClass("ui-grid-cell-focus"),t.attr("aria-selected",!1),d.removeAriaActivedescendant(t.attr("id")),e.focused=!1}}var c=i[0],d=i[1];if(c.grid.api.cellNav&&e.col.colDef.allowCellFocus){var u=c.grid;e.focused=!1,t.attr("tabindex",-1),t.find("div").on("click",function(t){c.cellNav.broadcastCellNav(new a(e.row,e.col),t.ctrlKey||t.metaKey,t),t.stopPropagation(),e.$apply()}),t.on("mousedown",r),c.grid.api.edit&&(c.grid.api.edit.on.beginCellEdit(e,function(){t.off("mousedown",r)}),c.grid.api.edit.on.afterCellEdit(e,function(){t.on("mousedown",r)}),c.grid.api.edit.on.cancelCellEdit(e,function(){t.on("mousedown",r)})),t.on("focus",function(t){c.cellNav.broadcastCellNav(new a(e.row,e.col),!1,t),t.stopPropagation(),e.$apply()}),e.$on(o.CELL_NAV_EVENT,function(t,n,i){u.cellNav.focusedCells.some(function(t,n){return t.row===e.row&&t.col===e.col})?s():l()}),e.$on("$destroy",function(){t.find("div").off(),t.off()})}}}}])}(),function(){var e=angular.module("ui.grid.edit",["ui.grid"]);e.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),e.service("uiGridEditService",["$q","uiGridConstants","gridUtil",function(e,t,n){var i={initializeGrid:function(e){i.defaultGridOptions(e.options),e.registerColumnBuilder(i.editColumnBuilder),e.edit={};var t={events:{edit:{afterCellEdit:function(e,t,n,i){},beginCellEdit:function(e,t,n){},cancelCellEdit:function(e,t){}}},methods:{edit:{}}};e.api.registerEventsFromObject(t.events)},defaultGridOptions:function(e){e.cellEditableCondition=void 0===e.cellEditableCondition||e.cellEditableCondition,e.enableCellEditOnFocus=void 0!==e.enableCellEditOnFocus&&e.enableCellEditOnFocus},editColumnBuilder:function(t,i,o){var r=[];return t.enableCellEdit=void 0===t.enableCellEdit?void 0===o.enableCellEdit?"object"!==t.type:o.enableCellEdit:t.enableCellEdit,t.cellEditableCondition=void 0===t.cellEditableCondition?o.cellEditableCondition:t.cellEditableCondition,t.enableCellEdit&&(t.editableCellTemplate=t.editableCellTemplate||o.editableCellTemplate||"ui-grid/cellEditor",r.push(n.getTemplate(t.editableCellTemplate).then(function(e){i.editableCellTemplate=e},function(e){throw new Error("Couldn't fetch/use colDef.editableCellTemplate '"+t.editableCellTemplate+"'")}))),t.enableCellEditOnFocus=void 0===t.enableCellEditOnFocus?o.enableCellEditOnFocus:t.enableCellEditOnFocus,e.all(r)},isStartEditKey:function(e){return!(e.metaKey||e.keyCode===t.keymap.ESC||e.keyCode===t.keymap.SHIFT||e.keyCode===t.keymap.CTRL||e.keyCode===t.keymap.ALT||e.keyCode===t.keymap.WIN||e.keyCode===t.keymap.CAPSLOCK||e.keyCode===t.keymap.LEFT||e.keyCode===t.keymap.TAB&&e.shiftKey||e.keyCode===t.keymap.RIGHT||e.keyCode===t.keymap.TAB||e.keyCode===t.keymap.UP||e.keyCode===t.keymap.ENTER&&e.shiftKey||e.keyCode===t.keymap.DOWN||e.keyCode===t.keymap.ENTER)}};return i}]),e.directive("uiGridEdit",["gridUtil","uiGridEditService",function(e,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){t.initializeGrid(o.grid)},post:function(e,t,n,i){}}}}}]),e.directive("uiGridViewport",["uiGridEditConstants",function(e){return{replace:!0,priority:-99998,require:["^uiGrid","^uiGridRenderContainer"],scope:!1,compile:function(){return{post:function(t,n,i,o){var r=o[0];if(r.grid.api.edit&&r.grid.api.cellNav){"body"===o[1].containerId&&(t.$on(e.events.CANCEL_CELL_EDIT,function(){r.focus()}),t.$on(e.events.END_CELL_EDIT,function(){r.focus()}))}}}}}}]),e.directive("uiGridCell",["$compile","$injector","$timeout","uiGridConstants","uiGridEditConstants","gridUtil","$parse","uiGridEditService","$rootScope","$q",function(e,t,n,i,o,r,a,s,l,c){var d=500;if(t.has("uiGridCellNavService")){t.get("uiGridCellNavService")}return{priority:-100,restrict:"A",scope:!1,require:"?^uiGrid",link:function(t,u,p,g){function m(){u.on("dblclick",w),u.on("touchstart",f),g&&g.grid.api.cellNav&&($=g.grid.api.cellNav.on.viewPortKeyDown(t,function(e,n){null!==n&&(n.row!==t.row||n.col!==t.col||t.col.colDef.enableCellEditOnFocus||y(e))}),D=g.grid.api.cellNav.on.navigate(t,function(e,i){t.col.colDef.enableCellEditOnFocus&&(i&&e.row===i.row&&e.col===i.col||e.row!==t.row||e.col!==t.col||n(function(){w()}))})),t.beginEditEventsWired=!0}function f(e){void 0!==e.originalEvent&&void 0!==e.originalEvent&&(e=e.originalEvent),u.on("touchend",h),A=n(function(){},d),A.then(function(){setTimeout(w,0),u.off("touchend",h)})}function h(e){n.cancel(A),u.off("touchend",h)}function v(){u.off("dblclick",w),u.off("keydown",y),u.off("touchstart",f),D(),$(),t.beginEditEventsWired=!1}function y(e){s.isStartEditKey(e)&&w(e)}function b(e,n){return!n.isSaving&&(angular.isFunction(e.colDef.cellEditableCondition)?e.colDef.cellEditableCondition(t):e.colDef.cellEditableCondition)}function w(e){t.grid.api.core.scrollToIfNecessary(t.row,t.col).then(function(){C(e)})}function C(s){if(!_&&b(t.col,t.row)){k=a(t.row.getQualifiedColField(t.col)),x=k(t),I=t.col.editableCellTemplate,I=t.col.colDef.editModelField?I.replace(i.MODEL_COL_FIELD,r.preEval("row.entity."+t.col.colDef.editModelField)):I.replace(i.MODEL_COL_FIELD,t.row.getQualifiedColField(t.col)),I=I.replace(i.COL_FIELD,"grid.getCellValue(row, col)");var d=t.col.colDef.editDropdownFilter?"|"+t.col.colDef.editDropdownFilter:"";I=I.replace(i.CUSTOM_FILTERS,d);var p="text";switch(t.col.colDef.type){case"boolean":p="checkbox";break;case"number":p="number";break;case"date":p="date"}I=I.replace("INPUT_TYPE",p);var g=t.col.colDef.editDropdownOptionsFunction;if(g)c.when(g(t.row.entity,t.col.colDef)).then(function(e){t.editDropdownOptionsArray=e});else{var m=t.col.colDef.editDropdownRowEntityOptionsArrayPath;t.editDropdownOptionsArray=m?E(t.row.entity,m):t.col.colDef.editDropdownOptionsArray}t.editDropdownIdLabel=t.col.colDef.editDropdownIdLabel?t.col.colDef.editDropdownIdLabel:"id",t.editDropdownValueLabel=t.col.colDef.editDropdownValueLabel?t.col.colDef.editDropdownValueLabel:"value";var f=function(){_=!0,v();var n=angular.element(I);u.append(n),M=t.$new(),e(n)(M),angular.element(u.children()[0]).addClass("ui-grid-cell-contents-hidden")};l.$$phase?f():t.$apply(f);var h=t.col.grid.api.core.on.scrollBegin(t,function(){t.grid.disableScrolling||(T(),t.grid.api.edit.raise.afterCellEdit(t.row.entity,t.col.colDef,k(t),x),h(),y(),w())}),y=t.$on(o.events.END_CELL_EDIT,function(){T(),t.grid.api.edit.raise.afterCellEdit(t.row.entity,t.col.colDef,k(t),x),y(),h(),w()}),w=t.$on(o.events.CANCEL_CELL_EDIT,function(){S(),w(),h(),y()});t.$broadcast(o.events.BEGIN_CELL_EDIT,s),n(function(){t.grid.api.edit.raise.beginCellEdit(t.row.entity,t.col.colDef,s)})}}function T(){if(t.grid.disableScrolling=!1,_){g&&g.grid.api.cellNav&&g.focus();var e=angular.element(u.children()[0]);M.$destroy(),angular.element(u.children()[1]).remove(),e.removeClass("ui-grid-cell-contents-hidden"),_=!1,m(),t.grid.api.core.notifyDataChange(i.dataChange.EDIT)}}function S(){t.grid.disableScrolling=!1,_&&(k.assign(t,x),t.$apply(),t.grid.api.edit.raise.cancelCellEdit(t.row.entity,t.col.colDef),T())}function E(e,t){t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var n=t.split(".");n.length;){var i=n.shift();if(!(i in e))return;e=e[i]}return e}var I,x,k,A,M,_=!1;if(t.col.colDef.enableCellEdit){var D=function(){},$=function(){},O=function(){t.col.colDef.enableCellEdit&&!1!==t.row.enableCellEdit?t.beginEditEventsWired||m():t.beginEditEventsWired&&v()};O();var P=t.$watch("row",function(e,t){e!==t&&O()});t.$on("$destroy",P)}}}}]),e.directive("uiGridEditor",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout","uiGridEditService",function(e,t,n,i,o){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer","ngModel"],compile:function(){return{pre:function(e,t,n){},post:function(e,r,a,s){var l,c,d;s[0]&&(l=s[0]),s[1]&&(c=s[1]),s[2]&&(d=s[2]),e.$on(n.events.BEGIN_CELL_EDIT,function(t,n){if(i(function(){if(r[0].focus(),r[0].select&&e.col.colDef.enableCellEditOnFocus||!l||!l.grid.api.cellNav)r[0].select();else try{r[0].setSelectionRange(r[0].value.length,r[0].value.length)}catch(e){}}),l&&l.grid.api.cellNav)var a=l.grid.api.cellNav.on.viewPortKeyPress(e,function(e,t){o.isStartEditKey(e)&&(d.$setViewValue(String.fromCharCode("number"==typeof e.which?e.which:e.keyCode),e),d.$render()),a()});r.on("blur",function(t){e.stopEdit(t)})}),e.deepEdit=!1,e.stopEdit=function(t){e.inputForm&&!e.inputForm.$valid?(t.stopPropagation(),e.$emit(n.events.CANCEL_CELL_EDIT)):e.$emit(n.events.END_CELL_EDIT),e.deepEdit=!1},r.on("click",function(t){"checkbox"!==r[0].type&&(e.deepEdit=!0,i(function(){e.grid.disableScrolling=!0}))}),r.on("keydown",function(i){switch(i.keyCode){case t.keymap.ESC:i.stopPropagation(),e.$emit(n.events.CANCEL_CELL_EDIT)}if(!e.deepEdit||i.keyCode!==t.keymap.LEFT&&i.keyCode!==t.keymap.RIGHT&&i.keyCode!==t.keymap.UP&&i.keyCode!==t.keymap.DOWN)if(l&&l.grid.api.cellNav)i.uiGridTargetRenderContainerId=c.containerId,null!==l.cellNav.handleKeyDown(i)&&e.stopEdit(i);else switch(i.keyCode){case t.keymap.ENTER:case t.keymap.TAB:i.stopPropagation(),i.preventDefault(),e.stopEdit(i)}else i.stopPropagation();return!0})}}}}}]),e.directive("uiGridEditor",["$filter",function(e){function t(e){if(void 0===e||""===e)return null;var t=e.split("-");if(3!==t.length)return null;var n=parseInt(t[0],10),i=parseInt(t[1],10),o=parseInt(t[2],10);return i<1||n<1||o<1?null:new Date(n,i-1,o)}return{priority:-100,require:"?ngModel",link:function(n,i,o,r){2===angular.version.minor&&o.type&&"date"===o.type&&r&&(r.$formatters.push(function(t){return r.$setValidity(null,!t||!isNaN(t.getTime())),e("date")(t,"yyyy-MM-dd")}),r.$parsers.push(function(e){if(e&&e.length>0){var n=t(e);return r.$setValidity(null,n&&!isNaN(n.getTime())),n}return r.$setValidity(null,!0),null}))}}}]),e.directive("uiGridEditDropdown",["uiGridConstants","uiGridEditConstants",function(e,t){return{require:["?^uiGrid","?^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function(e,t,n){},post:function(n,i,o,r){var a=r[0],s=r[1];n.$on(t.events.BEGIN_CELL_EDIT,function(){i[0].focus(),i[0].style.width=i[0].parentElement.offsetWidth-1+"px",i.on("blur",function(e){n.stopEdit(e)})}),n.stopEdit=function(e){n.$emit(t.events.END_CELL_EDIT)},i.on("keydown",function(i){switch(i.keyCode){case e.keymap.ESC:i.stopPropagation(),n.$emit(t.events.CANCEL_CELL_EDIT)}if(a&&a.grid.api.cellNav)i.uiGridTargetRenderContainerId=s.containerId,null!==a.cellNav.handleKeyDown(i)&&n.stopEdit(i);else switch(i.keyCode){case e.keymap.ENTER:case e.keymap.TAB:i.stopPropagation(),i.preventDefault(),n.stopEdit(i)}return!0})}}}}}]),e.directive("uiGridEditFileChooser",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout",function(e,t,n,i){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function(e,t,n){},post:function(t,i,o,r){var a;r[0]&&(a=r[0]),r[1]&&r[1];var s=(a.grid,function(i){var o=i.srcElement||i.target;o&&o.files&&o.files.length>0?("function"==typeof t.col.colDef.editFileChooserCallback?t.col.colDef.editFileChooserCallback(t.row,t.col,o.files):e.logError("You need to set colDef.editFileChooserCallback to use the file chooser"),o.form.reset(),t.$emit(n.events.END_CELL_EDIT)):t.$emit(n.events.CANCEL_CELL_EDIT)});i[0].addEventListener("change",s,!1),t.$on(n.events.BEGIN_CELL_EDIT,function(){i[0].focus(),i[0].select(),i.on("blur",function(e){t.$emit(n.events.END_CELL_EDIT)})})}}}}}])}(),function(){var e=angular.module("ui.grid.expandable",["ui.grid"]);e.service("uiGridExpandableService",["gridUtil","$compile",function(e,t){var n={initializeGrid:function(t){t.expandable={},t.expandable.expandedAll=!1,t.options.enableExpandable=!1!==t.options.enableExpandable,t.options.expandableRowHeight=t.options.expandableRowHeight||150,t.options.expandableRowHeaderWidth=t.options.expandableRowHeaderWidth||40,t.options.enableExpandable&&!t.options.expandableRowTemplate&&(e.logError("You have not set the expandableRowTemplate, disabling expandable module"),t.options.enableExpandable=!1);var i={events:{expandable:{rowExpandedBeforeStateChanged:function(e,t){},rowExpandedStateChanged:function(e,t){}}},methods:{expandable:{toggleRowExpansion:function(e){var i=t.getRow(e);null!==i&&n.toggleRowExpansion(t,i)},expandAllRows:function(){n.expandAllRows(t)},collapseAllRows:function(){n.collapseAllRows(t)},toggleAllRows:function(){n.toggleAllRows(t)},expandRow:function(e){var i=t.getRow(e);null===i||i.isExpanded||n.toggleRowExpansion(t,i)},collapseRow:function(e){var i=t.getRow(e);null!==i&&i.isExpanded&&n.toggleRowExpansion(t,i)},getExpandedRows:function(){return n.getExpandedRows(t).map(function(e){return e.entity})}}}};t.api.registerEventsFromObject(i.events),t.api.registerMethodsFromObject(i.methods)},toggleRowExpansion:function(e,t){e.api.expandable.raise.rowExpandedBeforeStateChanged(t),t.isExpanded=!t.isExpanded,angular.isUndefined(t.expandedRowHeight)&&(t.expandedRowHeight=e.options.expandableRowHeight),t.isExpanded?t.height=t.grid.options.rowHeight+t.expandedRowHeight:(t.height=t.grid.options.rowHeight,e.expandable.expandedAll=!1),e.api.expandable.raise.rowExpandedStateChanged(t)},expandAllRows:function(e,t){e.renderContainers.body.visibleRowCache.forEach(function(t){t.isExpanded||n.toggleRowExpansion(e,t)}),e.expandable.expandedAll=!0,e.queueGridRefresh()},collapseAllRows:function(e){e.renderContainers.body.visibleRowCache.forEach(function(t){t.isExpanded&&n.toggleRowExpansion(e,t)}),e.expandable.expandedAll=!1,e.queueGridRefresh()},toggleAllRows:function(e){e.expandable.expandedAll?n.collapseAllRows(e):n.expandAllRows(e)},getExpandedRows:function(e){return e.rows.filter(function(e){return e.isExpanded})}};return n}]),e.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(e,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(n,i,o,r){if(!1!==r.grid.options.enableExpandableRowHeader){var a={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:r.grid.options.expandableRowHeaderWidth||40};a.cellTemplate=t.get("ui-grid/expandableRowHeader"),a.headerCellTemplate=t.get("ui-grid/expandableTopRowHeader"),r.grid.addRowHeaderColumn(a)}e.initializeGrid(r.grid)},post:function(e,t,n,i){}}}}}]),e.directive("uiGrid",["uiGridExpandableService","$templateCache",function(e,t){return{replace:!0,priority:599,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,t,n,i){i.grid.api.core.on.renderingComplete(e,function(){e.row&&e.row.grid&&e.row.grid.options&&e.row.grid.options.enableExpandable&&(i.grid.parentRow=e.row)})},post:function(e,t,n,i){}}}}}]),e.directive("uiGridExpandableRow",["uiGridExpandableService","$timeout","$compile","uiGridConstants","gridUtil","$interval","$log",function(e,t,n,i,o,r,a){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function(e,t,i,r){o.getTemplate(e.grid.options.expandableRowTemplate).then(function(i){if(e.grid.options.expandableRowScope){var o=e.grid.options.expandableRowScope;for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r])}var a=n(i)(e);t.append(a),e.row.expandedRendered=!0})},post:function(e,t,n,i){e.$on("$destroy",function(){e.row.expandedRendered=!1})}}}}}]),e.directive("uiGridRow",["$compile","gridUtil","$templateCache",function(e,t,n){return{priority:-200,scope:!1,compile:function(e,t){return{pre:function(e,t,n,i){e.expandableRow={},e.expandableRow.shouldRenderExpand=function(){return"body"===e.colContainer.name&&!1!==e.grid.options.enableExpandable&&e.row.isExpanded&&(!e.grid.isScrollingVertically||e.row.expandedRendered)},e.expandableRow.shouldRenderFiller=function(){return e.row.isExpanded&&("body"!==e.colContainer.name||e.grid.isScrollingVertically&&!e.row.expandedRendered)}},post:function(e,t,n,i){}}}}}]),e.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(e,t,n){return{priority:-200,scope:!1,compile:function(e,t){var i=angular.element(e.children().children()[0]),o=n.get("ui-grid/expandableScrollFiller"),r=n.get("ui-grid/expandableRow");return i.append(r),i.append(o),{pre:function(e,t,n,i){},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.exporter",["ui.grid"]);e.constant("uiGridExporterConstants",{featureName:"exporter",ALL:"all",VISIBLE:"visible",SELECTED:"selected",CSV_CONTENT:"CSV_CONTENT",BUTTON_LABEL:"BUTTON_LABEL",FILE_NAME:"FILE_NAME"}),e.service("uiGridExporterService",["$q","uiGridExporterConstants","gridUtil","$compile","$interval","i18nService",function(e,t,n,i,o,r){var a={delay:100,initializeGrid:function(e){e.exporter={},this.defaultGridOptions(e.options);var t={events:{exporter:{}},methods:{exporter:{csvExport:function(t,n){a.csvExport(e,t,n)},pdfExport:function(t,n){a.pdfExport(e,t,n)}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods),e.api.core.addToGridMenu?a.addToMenu(e):o(function(){e.api.core.addToGridMenu&&a.addToMenu(e)},this.delay,1)},defaultGridOptions:function(e){e.exporterSuppressMenu=!0===e.exporterSuppressMenu,e.exporterMenuLabel=e.exporterMenuLabel?e.exporterMenuLabel:"Export",e.exporterSuppressColumns=e.exporterSuppressColumns?e.exporterSuppressColumns:[],e.exporterCsvColumnSeparator=e.exporterCsvColumnSeparator?e.exporterCsvColumnSeparator:",",e.exporterCsvFilename=e.exporterCsvFilename?e.exporterCsvFilename:"download.csv",e.exporterPdfFilename=e.exporterPdfFilename?e.exporterPdfFilename:"download.pdf",e.exporterOlderExcelCompatibility=!0===e.exporterOlderExcelCompatibility,e.exporterPdfDefaultStyle=e.exporterPdfDefaultStyle?e.exporterPdfDefaultStyle:{fontSize:11},e.exporterPdfTableStyle=e.exporterPdfTableStyle?e.exporterPdfTableStyle:{margin:[0,5,0,15]},e.exporterPdfTableHeaderStyle=e.exporterPdfTableHeaderStyle?e.exporterPdfTableHeaderStyle:{bold:!0,fontSize:12,color:"black"},e.exporterPdfHeader=e.exporterPdfHeader?e.exporterPdfHeader:null,e.exporterPdfFooter=e.exporterPdfFooter?e.exporterPdfFooter:null,e.exporterPdfOrientation=e.exporterPdfOrientation?e.exporterPdfOrientation:"landscape",e.exporterPdfPageSize=e.exporterPdfPageSize?e.exporterPdfPageSize:"A4",e.exporterPdfMaxGridWidth=e.exporterPdfMaxGridWidth?e.exporterPdfMaxGridWidth:720,e.exporterMenuAllData=void 0===e.exporterMenuAllData||e.exporterMenuAllData,e.exporterMenuVisibleData=void 0===e.exporterMenuVisibleData||e.exporterMenuVisibleData,e.exporterMenuSelectedData=void 0===e.exporterMenuSelectedData||e.exporterMenuSelectedData,e.exporterMenuCsv=void 0===e.exporterMenuCsv||e.exporterMenuCsv,e.exporterMenuPdf=void 0===e.exporterMenuPdf||e.exporterMenuPdf,e.exporterPdfCustomFormatter=e.exporterPdfCustomFormatter&&"function"==typeof e.exporterPdfCustomFormatter?e.exporterPdfCustomFormatter:function(e){return e},e.exporterHeaderFilterUseName=!0===e.exporterHeaderFilterUseName,e.exporterFieldCallback=e.exporterFieldCallback?e.exporterFieldCallback:function(e,t,n,i){return i},e.exporterAllDataFn=e.exporterAllDataFn?e.exporterAllDataFn:null,null==e.exporterAllDataFn&&e.exporterAllDataPromise&&(e.exporterAllDataFn=e.exporterAllDataPromise)},addToMenu:function(e){e.api.core.addToGridMenu(e,[{title:r.getSafeText("gridMenu.exporterAllAsCsv"),action:function(e){this.grid.api.exporter.csvExport(t.ALL,t.ALL)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuAllData},order:200},{title:r.getSafeText("gridMenu.exporterVisibleAsCsv"),action:function(e){this.grid.api.exporter.csvExport(t.VISIBLE,t.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuVisibleData},order:201},{title:r.getSafeText("gridMenu.exporterSelectedAsCsv"),action:function(e){this.grid.api.exporter.csvExport(t.SELECTED,t.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuSelectedData&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:202},{title:r.getSafeText("gridMenu.exporterAllAsPdf"),action:function(e){this.grid.api.exporter.pdfExport(t.ALL,t.ALL)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuAllData},order:203},{title:r.getSafeText("gridMenu.exporterVisibleAsPdf"),action:function(e){this.grid.api.exporter.pdfExport(t.VISIBLE,t.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuVisibleData},order:204},{title:r.getSafeText("gridMenu.exporterSelectedAsPdf"),action:function(e){this.grid.api.exporter.pdfExport(t.SELECTED,t.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuSelectedData&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:205}])},csvExport:function(e,t,n){var i=this;this.loadAllDataIfNeeded(e,t,n).then(function(){var o=e.options.showHeader?i.getColumnHeaders(e,n):[],r=i.getData(e,t,n),a=i.formatAsCsv(o,r,e.options.exporterCsvColumnSeparator);i.downloadFile(e.options.exporterCsvFilename,a,e.options.exporterOlderExcelCompatibility)})},loadAllDataIfNeeded:function(n,i,o){if(i===t.ALL&&n.rows.length!==n.options.totalItems&&n.options.exporterAllDataFn)return n.options.exporterAllDataFn().then(function(){n.modifyRows(n.options.data)});var r=e.defer();return r.resolve(),r.promise},getColumnHeaders:function(e,n){var i,o=[];if(n===t.ALL)i=e.columns;else{var r=e.renderContainers.left?e.renderContainers.left.visibleColumnCache.filter(function(e){return e.visible}):[],a=e.renderContainers.body?e.renderContainers.body.visibleColumnCache.filter(function(e){return e.visible}):[],s=e.renderContainers.right?e.renderContainers.right.visibleColumnCache.filter(function(e){return e.visible}):[];i=r.concat(a,s)}return i.forEach(function(t,n){!0!==t.colDef.exporterSuppressExport&&-1===e.options.exporterSuppressColumns.indexOf(t.name)&&o.push({name:t.field,displayName:e.options.exporterHeaderFilter?e.options.exporterHeaderFilterUseName?e.options.exporterHeaderFilter(t.name):e.options.exporterHeaderFilter(t.displayName):t.displayName,width:t.drawnWidth?t.drawnWidth:t.width,align:"number"===t.colDef.type?"right":"left"})}),o},getData:function(e,i,o,r){var a,s,l=[];switch(i){case t.ALL:a=e.rows;break;case t.VISIBLE:a=e.getVisibleRows();break;case t.SELECTED:e.api.selection?a=e.api.selection.getSelectedGridRows():n.logError("selection feature must be enabled to allow selected rows to be exported")}if(o===t.ALL)s=e.columns;else{var c=e.renderContainers.left?e.renderContainers.left.visibleColumnCache.filter(function(e){return e.visible}):[],d=e.renderContainers.body?e.renderContainers.body.visibleColumnCache.filter(function(e){return e.visible}):[],u=e.renderContainers.right?e.renderContainers.right.visibleColumnCache.filter(function(e){return e.visible}):[];s=c.concat(d,u)}return a.forEach(function(n,i){if(!1!==n.exporterEnableExporting){var a=[];s.forEach(function(i,s){if((i.visible||o===t.ALL)&&!0!==i.colDef.exporterSuppressExport&&-1===e.options.exporterSuppressColumns.indexOf(i.name)){var l=r?e.getCellDisplayValue(n,i):e.getCellValue(n,i),c={value:e.options.exporterFieldCallback(e,n,i,l)};i.colDef.exporterPdfAlign&&(c.alignment=i.colDef.exporterPdfAlign),a.push(c)}}),l.push(a)}}),l},formatAsCsv:function(e,t,n){var i=this,o=e.map(function(e){return{value:e.displayName}}),r=o.length>0?i.formatRowAsCsv(this,n)(o)+"\n":"";return r+=t.map(this.formatRowAsCsv(this,n)).join("\n")},formatRowAsCsv:function(e,t){return function(n){return n.map(e.formatFieldAsCsv).join(t)}},formatFieldAsCsv:function(e){return null==e.value?"":"number"==typeof e.value?e.value:"boolean"==typeof e.value?e.value?"TRUE":"FALSE":"string"==typeof e.value?'"'+e.value.replace(/"/g,'""')+'"':JSON.stringify(e.value)},isIE:function(){var e=navigator.userAgent.search(/(?:Edge|MSIE|Trident\/.*; rv:)/),t=!1;return-1!==e&&(t=!0),t},downloadFile:function(e,t,n){var i,o,r=document,a=r.createElement("a"),s="application/octet-stream;charset=utf-8";if((o=this.isIE())&&o<10){var l=r.createElement("iframe");return document.body.appendChild(l),l.contentWindow.document.open("text/html","replace"),l.contentWindow.document.write("sep=,\r\n"+t),l.contentWindow.document.close(),l.contentWindow.focus(),l.contentWindow.document.execCommand("SaveAs",!0,e),document.body.removeChild(l),!0}if(navigator.msSaveBlob)return navigator.msSaveOrOpenBlob(new Blob([n?"\ufeff":"",t],{type:s}),e);if("download"in a){var c=new Blob([n?"\ufeff":"",t],{type:s});i=URL.createObjectURL(c),a.setAttribute("download",e)}else i="data:"+s+","+encodeURIComponent(t),a.setAttribute("target","_blank");a.href=i,a.setAttribute("style","display:none;"),r.body.appendChild(a),setTimeout(function(){if(a.click)a.click();else if(document.createEvent){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),a.dispatchEvent(e)}r.body.removeChild(a)},this.delay)},pdfExport:function(e,t,n){var i=this;this.loadAllDataIfNeeded(e,t,n).then(function(){var o=i.getColumnHeaders(e,n),r=i.getData(e,t,n),a=i.prepareAsPdf(e,o,r);i.isIE()||-1!==navigator.appVersion.indexOf("Edge")?i.downloadPDF(e.options.exporterPdfFilename,a):pdfMake.createPdf(a).open()})},downloadPDF:function(e,t){var n,i=document;i.createElement("a");n=this.isIE();var o,r=pdfMake.createPdf(t);r.getBuffer(function(t){if(o=new Blob([t]),navigator.msSaveBlob)return navigator.msSaveBlob(o,e);if(n){var r=i.createElement("iframe");return document.body.appendChild(r),r.contentWindow.document.open("text/html","replace"),r.contentWindow.document.write(o),r.contentWindow.document.close(),r.contentWindow.focus(),r.contentWindow.document.execCommand("SaveAs",!0,e),document.body.removeChild(r),!0}})},prepareAsPdf:function(e,t,n){var i=this.calculatePdfHeaderWidths(e,t),o=t.map(function(e){return{text:e.displayName,style:"tableHeader"}}),r=n.map(this.formatRowAsPdf(this)),a=[o].concat(r),s={pageOrientation:e.options.exporterPdfOrientation,pageSize:e.options.exporterPdfPageSize,content:[{style:"tableStyle",table:{headerRows:1,widths:i,body:a}}],styles:{tableStyle:e.options.exporterPdfTableStyle,tableHeader:e.options.exporterPdfTableHeaderStyle},defaultStyle:e.options.exporterPdfDefaultStyle};return e.options.exporterPdfLayout&&(s.layout=e.options.exporterPdfLayout),e.options.exporterPdfHeader&&(s.header=e.options.exporterPdfHeader),e.options.exporterPdfFooter&&(s.footer=e.options.exporterPdfFooter),e.options.exporterPdfCustomFormatter&&(s=e.options.exporterPdfCustomFormatter(s)),s},calculatePdfHeaderWidths:function(e,t){var n=0;t.forEach(function(e){"number"==typeof e.width&&(n+=e.width)});var i=0;t.forEach(function(e){if("*"===e.width&&(i+=100),"string"==typeof e.width&&e.width.match(/(\d)*%/)){var t=parseInt(e.width.match(/(\d)*%/)[0]);e.width=n*t/100,i+=e.width}});var o=n+i;return t.map(function(t){return"*"===t.width?t.width:t.width*e.options.exporterPdfMaxGridWidth/o})},formatRowAsPdf:function(e){return function(t){return t.map(e.formatFieldAsPdfString)}},formatFieldAsPdfString:function(e){var t;return t=null==e.value?"":"number"==typeof e.value?e.value.toString():"boolean"==typeof e.value?e.value?"TRUE":"FALSE":"string"==typeof e.value?e.value.replace(/"/g,'""'):JSON.stringify(e.value).replace(/^"/,"").replace(/"$/,""),e.alignment&&"string"==typeof e.alignment&&(t={text:t,alignment:e.alignment}),t}};return a}]),e.directive("uiGridExporter",["uiGridExporterConstants","uiGridExporterService","gridUtil","$compile",function(e,t,n,i){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(e,n,i,o){t.initializeGrid(o.grid),o.grid.exporter.$scope=e}}}])}(),function(){var e=angular.module("ui.grid.grouping",["ui.grid","ui.grid.treeBase"]);e.constant("uiGridGroupingConstants",{featureName:"grouping",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),e.service("uiGridGroupingService",["$q","uiGridGroupingConstants","gridUtil","rowSorter","GridRow","gridClassFactory","i18nService","uiGridConstants","uiGridTreeBaseService",function(e,t,n,i,o,r,a,s,l){var c={initializeGrid:function(e,t){l.initializeGrid(e,t),e.grouping={},e.grouping.groupHeaderCache={},c.defaultGridOptions(e.options),e.registerRowsProcessor(c.groupRows,400),e.registerColumnBuilder(c.groupingColumnBuilder),e.registerColumnsProcessor(c.groupingColumnProcessor,400);var n={events:{grouping:{aggregationChanged:{},groupingChanged:{}}},methods:{grouping:{getGrouping:function(t){var n=c.getGrouping(e);return n.grouping.forEach(function(e){e.colName=e.col.name,delete e.col}),n.aggregations.forEach(function(e){e.colName=e.col.name,delete e.col}),n.aggregations=n.aggregations.filter(function(e){return!e.aggregation.source||"grouping"!==e.aggregation.source}),t&&(n.rowExpandedStates=c.getRowExpandedStates(e.grouping.groupingHeaderCache)),n},setGrouping:function(t){c.setGrouping(e,t)},groupColumn:function(t){var n=e.getColumn(t);c.groupColumn(e,n)},ungroupColumn:function(t){var n=e.getColumn(t);c.ungroupColumn(e,n)},clearGrouping:function(){c.clearGrouping(e)},aggregateColumn:function(t,n,i){var o=e.getColumn(t);c.aggregateColumn(e,o,n,i)}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods),e.api.core.on.sortChanged(t,c.tidyPriorities)},defaultGridOptions:function(e){e.enableGrouping=!1!==e.enableGrouping,e.groupingShowCounts=!1!==e.groupingShowCounts,e.groupingNullLabel=void 0===e.groupingNullLabel?"Null":e.groupingNullLabel,e.enableGroupHeaderSelection=!0===e.enableGroupHeaderSelection},groupingColumnBuilder:function(e,i,o){if(!1!==e.enableGrouping){void 0===i.grouping&&void 0!==e.grouping?(i.grouping=angular.copy(e.grouping),void 0!==i.grouping.groupPriority&&i.grouping.groupPriority>-1&&(i.treeAggregationFn=l.nativeAggregations()[t.aggregation.COUNT].aggregationFn,i.treeAggregationFinalizerFn=c.groupedFinalizerFn)):void 0===i.grouping&&(i.grouping={}),void 0!==i.grouping&&void 0!==i.grouping.groupPriority&&i.grouping.groupPriority>=0&&(i.suppressRemoveSort=!0);var r={name:"ui.grid.grouping.group",title:a.get().grouping.group,icon:"ui-grid-icon-indent-right",shown:function(){return void 0===this.context.col.grouping||void 0===this.context.col.grouping.groupPriority||this.context.col.grouping.groupPriority<0},action:function(){c.groupColumn(this.context.col.grid,this.context.col)}},s={name:"ui.grid.grouping.ungroup",title:a.get().grouping.ungroup,icon:"ui-grid-icon-indent-left",shown:function(){return void 0!==this.context.col.grouping&&void 0!==this.context.col.grouping.groupPriority&&this.context.col.grouping.groupPriority>=0},action:function(){c.ungroupColumn(this.context.col.grid,this.context.col)}},d={name:"ui.grid.grouping.aggregateRemove",title:a.get().grouping.aggregate_remove,shown:function(){return void 0!==this.context.col.treeAggregationFn},action:function(){c.aggregateColumn(this.context.col.grid,this.context.col,null)}},u=function(e,t){t=t||a.get().grouping["aggregate_"+e]||e;var o={name:"ui.grid.grouping.aggregate"+e,title:t,shown:function(){return void 0===this.context.col.treeAggregation||void 0===this.context.col.treeAggregation.type||this.context.col.treeAggregation.type!==e},action:function(){c.aggregateColumn(this.context.col.grid,this.context.col,e)}};n.arrayContainsObjectWithProperty(i.menuItems,"name","ui.grid.grouping.aggregate"+e)||i.menuItems.push(o)};!1!==i.colDef.groupingShowGroupingMenu&&(n.arrayContainsObjectWithProperty(i.menuItems,"name","ui.grid.grouping.group")||i.menuItems.push(r),n.arrayContainsObjectWithProperty(i.menuItems,"name","ui.grid.grouping.ungroup")||i.menuItems.push(s)),!1!==i.colDef.groupingShowAggregationMenu&&(angular.forEach(l.nativeAggregations(),function(e,t){u(t)}),angular.forEach(o.treeCustomAggregations,function(e,t){u(t,e.menuTitle)}),n.arrayContainsObjectWithProperty(i.menuItems,"name","ui.grid.grouping.aggregateRemove")||i.menuItems.push(d))}},groupingColumnProcessor:function(e,t){return e=c.moveGroupColumns(this,e,t)},groupedFinalizerFn:function(e){var t=this;void 0!==e.groupVal?(e.rendered=e.groupVal,t.grid.options.groupingShowCounts&&"date"!==t.colDef.type&&(e.rendered+=" ("+e.value+")")):e.rendered=null},moveGroupColumns:function(e,t,n){return!1===e.options.moveGroupColumns?t:(t.forEach(function(e,t){e.groupingPosition=t}),t.sort(function(e,t){var n,i;return n=e.isRowHeader?-1e3:void 0===e.grouping||void 0===e.grouping.groupPriority||e.grouping.groupPriority<0?null:e.grouping.groupPriority,i=t.isRowHeader?-1e3:void 0===t.grouping||void 0===t.grouping.groupPriority||t.grouping.groupPriority<0?null:t.grouping.groupPriority,null!==n&&null===i?-1:null!==i&&null===n?1:null!==n&&null!==i?n-i:e.groupingPosition-t.groupingPosition}),t.forEach(function(e,t){delete e.groupingPosition}),t)},groupColumn:function(e,n){void 0===n.grouping&&(n.grouping={});var i=c.getGrouping(e);n.grouping.groupPriority=i.grouping.length,n.sort?void 0!==n.sort.direction&&null!==n.sort.direction||(n.sort.direction=s.ASC):n.sort={direction:s.ASC},n.treeAggregation={type:t.aggregation.COUNT,source:"grouping"},n.treeAggregationFn=l.nativeAggregations()[t.aggregation.COUNT].aggregationFn,n.treeAggregationFinalizerFn=c.groupedFinalizerFn,e.api.grouping.raise.groupingChanged(n),e.api.core.raise.sortChanged(e,e.getColumnSorting()),e.queueGridRefresh()},ungroupColumn:function(e,t){void 0!==t.grouping&&(delete t.grouping.groupPriority,delete t.treeAggregation,delete t.customTreeAggregationFinalizer,c.tidyPriorities(e),e.api.grouping.raise.groupingChanged(t),e.queueGridRefresh())},aggregateColumn:function(e,t,n){void 0!==t.grouping&&void 0!==t.grouping.groupPriority&&t.grouping.groupPriority>=0&&c.ungroupColumn(e,t);var i={};void 0!==e.options.treeCustomAggregations[n]?i=e.options.treeCustomAggregations[n]:void 0!==l.nativeAggregations()[n]&&(i=l.nativeAggregations()[n]),t.treeAggregation={type:n,label:a.get().aggregation[i.label]||i.label},t.treeAggregationFn=i.aggregationFn,t.treeAggregationFinalizerFn=i.finalizerFn,e.api.grouping.raise.aggregationChanged(t),e.queueGridRefresh()},setGrouping:function(e,t){void 0!==t&&(c.clearGrouping(e),t.grouping&&t.grouping.length&&t.grouping.length>0&&t.grouping.forEach(function(t){var n=e.getColumn(t.colName);n&&c.groupColumn(e,n)}),t.aggregations&&t.aggregations.length&&t.aggregations.forEach(function(t){var n=e.getColumn(t.colName);n&&c.aggregateColumn(e,n,t.aggregation.type)}),t.rowExpandedStates&&c.applyRowExpandedStates(e.grouping.groupingHeaderCache,t.rowExpandedStates))},clearGrouping:function(e){var t=c.getGrouping(e);t.grouping.length>0&&t.grouping.forEach(function(t){t.col||(t.col=e.getColumn(t.colName)),c.ungroupColumn(e,t.col)}),t.aggregations.length>0&&t.aggregations.forEach(function(t){t.col||(t.col=e.getColumn(t.colName)),c.aggregateColumn(e,t.col,null)})},tidyPriorities:function(e){void 0!==e&&void 0===e.grid||void 0===this.grid||(e=this.grid);var t=[],n=[];e.columns.forEach(function(e,i){void 0!==e.grouping&&void 0!==e.grouping.groupPriority&&e.grouping.groupPriority>=0?t.push(e):void 0!==e.sort&&void 0!==e.sort.priority&&e.sort.priority>=0&&n.push(e)}),t.sort(function(e,t){return e.grouping.groupPriority-t.grouping.groupPriority}),t.forEach(function(e,t){e.grouping.groupPriority=t,e.suppressRemoveSort=!0,void 0===e.sort&&(e.sort={}),e.sort.priority=t});var i=t.length;n.sort(function(e,t){return e.sort.priority-t.sort.priority}),n.forEach(function(e,t){e.sort.priority=i,e.suppressRemoveSort=e.colDef.suppressRemoveSort,i++})},groupRows:function(e){if(0===e.length)return e;var t=this;t.grouping.oldGroupingHeaderCache=t.grouping.groupingHeaderCache||{},t.grouping.groupingHeaderCache={};for(var n=c.initialiseProcessingState(t),o=function(o,s){var l=t.getCellValue(a,o.col);o.initialised&&0===i.getSortFn(t,o.col,e)(l,o.currentValue)||(c.insertGroupHeader(t,e,r,n,s),r++)},r=0;r<e.length;r++){var a=e[r];a.visible&&n.forEach(o)}return delete t.grouping.oldGroupingHeaderCache,e},initialiseProcessingState:function(e){var t=[];return c.getGrouping(e).grouping.forEach(function(e,n){t.push({fieldName:e.field,col:e.col,initialised:!1,currentValue:null,currentRow:null})}),t},getGrouping:function(e){var t=[],n=[];return e.columns.forEach(function(e,i){e.grouping&&void 0!==e.grouping.groupPriority&&e.grouping.groupPriority>=0&&t.push({field:e.field,col:e,groupPriority:e.grouping.groupPriority,grouping:e.grouping}),e.treeAggregation&&e.treeAggregation.type&&n.push({field:e.field,col:e,aggregation:e.treeAggregation})}),t.sort(function(e,t){return e.groupPriority-t.groupPriority}),t.forEach(function(e,t){e.grouping.groupPriority=t,e.groupPriority=t,delete e.grouping}),{grouping:t,aggregations:n}},insertGroupHeader:function(e,t,n,i,a){var s=(i[a].fieldName,i[a].col),l=e.getCellValue(t[n],s),d=l;void 0!==l&&null!==l||(d=e.options.groupingNullLabel);for(var u=function(e){return angular.isObject(e)?JSON.stringify(e):e},p=e.grouping.oldGroupingHeaderCache,g=0;g<a;g++)p&&p[u(i[g].currentValue)]&&(p=p[u(i[g].currentValue)].children);var m;for(p&&p[u(l)]?(m=p[u(l)].row,m.entity={}):(m=new o({},null,e),r.rowTemplateAssigner.call(e,m)),m.entity["$$"+i[a].col.uid]={groupVal:d},m.treeLevel=a,m.groupHeader=!0,m.internalRow=!0,m.enableCellEdit=!1,m.enableSelection=e.options.enableGroupHeaderSelection,i[a].initialised=!0,i[a].currentValue=l,i[a].currentRow=m,c.finaliseProcessingState(i,a+1),t.splice(n,0,m),p=e.grouping.groupingHeaderCache,g=0;g<a;g++)p=p[u(i[g].currentValue)].children;p[u(l)]={row:m,children:{}}},finaliseProcessingState:function(e,t){for(var n=t;n<e.length;n++)e[n].initialised=!1,e[n].currentRow=null,e[n].currentValue=null},getRowExpandedStates:function(e){if(void 0===e)return{};var t={};return angular.forEach(e,function(e,n){t[n]={state:e.row.treeNode.state},e.children?t[n].children=c.getRowExpandedStates(e.children):t[n].children={}}),t},applyRowExpandedStates:function(e,t){void 0!==t&&angular.forEach(t,function(t,n){e[n]&&(e[n].row.treeNode.state=t.state,t.children&&e[n].children&&c.applyRowExpandedStates(e[n].children,t.children))})}};return c}]),e.directive("uiGridGrouping",["uiGridGroupingConstants","uiGridGroupingService","$templateCache",function(e,t,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){!1!==o.grid.options.enableGrouping&&t.initializeGrid(o.grid,e)},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.importer",["ui.grid"]);e.constant("uiGridImporterConstants",{featureName:"importer"}),e.service("uiGridImporterService",["$q","uiGridConstants","uiGridImporterConstants","gridUtil","$compile","$interval","i18nService","$window",function(e,t,n,i,o,r,a,s){var l={initializeGrid:function(e,t){t.importer={$scope:e},this.defaultGridOptions(t.options);var n={events:{importer:{}},methods:{importer:{importFile:function(e){l.importThisFile(t,e)}}}};t.api.registerEventsFromObject(n.events),t.api.registerMethodsFromObject(n.methods),t.options.enableImporter&&t.options.importerShowMenu&&(t.api.core.addToGridMenu?l.addToMenu(t):r(function(){t.api.core.addToGridMenu&&l.addToMenu(t)},100,1))},defaultGridOptions:function(e){e.enableImporter||void 0===e.enableImporter?s.hasOwnProperty("File")&&s.hasOwnProperty("FileReader")&&s.hasOwnProperty("FileList")&&s.hasOwnProperty("Blob")?e.enableImporter=!0:(i.logError("The File APIs are not fully supported in this browser, grid importer cannot be used."),e.enableImporter=!1):e.enableImporter=!1,e.importerProcessHeaders=e.importerProcessHeaders||l.processHeaders,e.importerHeaderFilter=e.importerHeaderFilter||function(e){return e},e.importerErrorCallback&&"function"==typeof e.importerErrorCallback||delete e.importerErrorCallback,!0!==e.enableImporter||e.importerDataAddCallback||(i.logError("You have not set an importerDataAddCallback, importer is disabled"),e.enableImporter=!1),e.importerShowMenu=!1!==e.importerShowMenu,e.importerObjectCallback=e.importerObjectCallback||function(e,t){return t}},addToMenu:function(e){e.api.core.addToGridMenu(e,[{title:a.getSafeText("gridMenu.importerTitle"),order:150},{templateUrl:"ui-grid/importerMenuItemContainer",action:function(t){this.grid.api.importer.importAFile(e)},order:151}])},importThisFile:function(e,t){if(!t)return void i.logError("No file object provided to importThisFile, should be impossible, aborting");var n=new FileReader;switch(t.type){case"application/json":n.onload=l.importJsonClosure(e);break;default:n.onload=l.importCsvClosure(e)}n.readAsText(t)},importJsonClosure:function(e){return function(t){var n,i=[],o=l.parseJson(e,t);null!==o&&(o.forEach(function(t,o){n=l.newObject(e),angular.extend(n,t),n=e.options.importerObjectCallback(e,n),i.push(n)}),l.addObjects(e,i))}},parseJson:function(e,t){var n;try{n=JSON.parse(t.target.result)}catch(n){return void l.alertError(e,"importer.invalidJson","File could not be processed, is it valid json? Content was: ",t.target.result)}return Array.isArray(n)?n:(l.alertError(e,"importer.jsonNotarray","Import failed, file is not an array, file was: ",t.target.result),[])},importCsvClosure:function(e){return function(t){var n=l.parseCsv(t);if(!n||n.length<1)return void l.alertError(e,"importer.invalidCsv","File could not be processed, is it valid csv? Content was: ",t.target.result);var i=l.createCsvObjects(e,n);if(!i||0===i.length)return void l.alertError(e,"importer.noObjects","Objects were not able to be derived, content was: ",t.target.result);l.addObjects(e,i)}},parseCsv:function(e){var t=e.target.result;return CSV.parse(t)},createCsvObjects:function(e,t){var n=e.options.importerProcessHeaders(e,t.shift());if(!n||0===n.length)return l.alertError(e,"importer.noHeaders","Column names could not be derived, content was: ",t),[];var i,o=[];return t.forEach(function(t,r){i=l.newObject(e),null!==t&&t.forEach(function(e,t){null!==n[t]&&(i[n[t]]=e)}),i=e.options.importerObjectCallback(e,i),o.push(i)}),o},processHeaders:function(e,t){var n=[];if(e.options.columnDefs&&0!==e.options.columnDefs.length){var i=l.flattenColumnDefs(e,e.options.columnDefs);return t.forEach(function(e,t){i[e]?n.push(i[e]):i[e.toLowerCase()]?n.push(i[e.toLowerCase()]):n.push(null)}),n}return t.forEach(function(e,t){n.push(e.replace(/[^0-9a-zA-Z\-_]/g,"_"))}),n},flattenColumnDefs:function(e,t){var n={};return t.forEach(function(t,i){t.name&&(n[t.name]=t.field||t.name,n[t.name.toLowerCase()]=t.field||t.name),t.field&&(n[t.field]=t.field||t.name,n[t.field.toLowerCase()]=t.field||t.name),t.displayName&&(n[t.displayName]=t.field||t.name,n[t.displayName.toLowerCase()]=t.field||t.name),t.displayName&&e.options.importerHeaderFilter&&(n[e.options.importerHeaderFilter(t.displayName)]=t.field||t.name,n[e.options.importerHeaderFilter(t.displayName).toLowerCase()]=t.field||t.name)}),n},addObjects:function(e,n,i){if(e.api.rowEdit){var o=e.registerDataChangeCallback(function(){e.api.rowEdit.setRowsDirty(n),o()},[t.dataChange.ROW]);e.importer.$scope.$on("$destroy",o)}e.importer.$scope.$apply(e.options.importerDataAddCallback(e,n))},newObject:function(e){return void 0!==e.options&&void 0!==e.options.importerNewObject?new e.options.importerNewObject:{}},alertError:function(e,t,n,o){e.options.importerErrorCallback?e.options.importerErrorCallback(e,t,n,o):(s.alert(a.getSafeText(t)),i.logError(n+o))}};return l}]),e.directive("uiGridImporter",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(e,t,n,i){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(e,n,i,o){t.initializeGrid(e,o.grid)}}}]),e.directive("uiGridImporterMenuItem",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(e,t,n,i){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,templateUrl:"ui-grid/importerMenuItem",link:function(e,i,o,r){var a=function(e){var n=e.srcElement||e.target;if(n&&n.files&&1===n.files.length){var i=n.files[0];t.importThisFile(l,i),n.form.reset()}},s=i[0].querySelectorAll(".ui-grid-importer-file-chooser"),l=r.grid;1!==s.length?n.logError("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):s[0].addEventListener("change",a,!1)}}}])}(),function(){var e=angular.module("ui.grid.infiniteScroll",["ui.grid"]);e.service("uiGridInfiniteScrollService",["gridUtil","$compile","$timeout","uiGridConstants","ScrollEvent","$q",function(e,t,n,i,o,r){var a={initializeGrid:function(e,t){if(a.defaultGridOptions(e.options),e.options.enableInfiniteScroll){e.infiniteScroll={dataLoading:!1},a.setScrollDirections(e,e.options.infiniteScrollUp,e.options.infiniteScrollDown),e.api.core.on.scrollEnd(t,a.handleScroll);var n={events:{infiniteScroll:{needLoadMoreData:function(e,t){},needLoadMoreDataTop:function(e,t){}}},methods:{infiniteScroll:{dataLoaded:function(t,n){return a.setScrollDirections(e,t,n),a.adjustScroll(e).then(function(){e.infiniteScroll.dataLoading=!1})},resetScroll:function(t,n){return a.setScrollDirections(e,t,n),a.adjustInfiniteScrollPosition(e,0)},saveScrollPercentage:function(){e.infiniteScroll.prevScrollTop=e.renderContainers.body.prevScrollTop,e.infiniteScroll.previousVisibleRows=e.getVisibleRowCount()},dataRemovedTop:function(t,n){a.dataRemovedTop(e,t,n)},dataRemovedBottom:function(t,n){a.dataRemovedBottom(e,t,n)},setScrollDirections:function(t,n){a.setScrollDirections(e,t,n)}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods)}},defaultGridOptions:function(e){e.enableInfiniteScroll=!1!==e.enableInfiniteScroll,e.infiniteScrollRowsFromEnd=e.infiniteScrollRowsFromEnd||20,e.infiniteScrollUp=!0===e.infiniteScrollUp,e.infiniteScrollDown=!1!==e.infiniteScrollDown},setScrollDirections:function(e,t,n){e.infiniteScroll.scrollUp=!0===t,e.suppressParentScrollUp=!0===t,e.infiniteScroll.scrollDown=!1!==n,e.suppressParentScrollDown=!1!==n},handleScroll:function(e){if(!(e.grid.infiniteScroll&&e.grid.infiniteScroll.dataLoading||"ui.grid.adjustInfiniteScrollPosition"===e.source)&&e.y){var t=e.grid.options.infiniteScrollRowsFromEnd/e.grid.renderContainers.body.visibleRowCache.length;e.grid.scrollDirection===i.scrollDirection.UP?e.y.percentage<=t&&a.loadData(e.grid):e.grid.scrollDirection===i.scrollDirection.DOWN&&1-e.y.percentage<=t&&a.loadData(e.grid)}},loadData:function(e){e.infiniteScroll.previousVisibleRows=e.renderContainers.body.visibleRowCache.length,e.infiniteScroll.direction=e.scrollDirection,delete e.infiniteScroll.prevScrollTop,e.scrollDirection===i.scrollDirection.UP&&e.infiniteScroll.scrollUp?(e.infiniteScroll.dataLoading=!0,e.api.infiniteScroll.raise.needLoadMoreDataTop()):e.scrollDirection===i.scrollDirection.DOWN&&e.infiniteScroll.scrollDown&&(e.infiniteScroll.dataLoading=!0,e.api.infiniteScroll.raise.needLoadMoreData())},adjustScroll:function(e){var t=r.defer();return n(function(){var o,r,s,l,c;o=e.getViewportHeight()+e.headerHeight-e.renderContainers.body.headerHeight-e.scrollbarHeight,r=e.options.rowHeight,void 0===e.infiniteScroll.direction&&a.adjustInfiniteScrollPosition(e,0),s=e.getVisibleRowCount();var d=r*s;e.infiniteScroll.scrollDown&&o>d&&e.api.infiniteScroll.raise.needLoadMoreData(),e.infiniteScroll.direction===i.scrollDirection.UP&&(l=e.infiniteScroll.prevScrollTop||0,c=l+(s-e.infiniteScroll.previousVisibleRows)*r,a.adjustInfiniteScrollPosition(e,c),n(function(){t.resolve()})),e.infiniteScroll.direction===i.scrollDirection.DOWN&&(c=e.infiniteScroll.prevScrollTop||e.infiniteScroll.previousVisibleRows*r-o,a.adjustInfiniteScrollPosition(e,c),n(function(){t.resolve()}))},0),t.promise},adjustInfiniteScrollPosition:function(e,t){var n=new o(e,null,null,"ui.grid.adjustInfiniteScrollPosition"),i=e.getVisibleRowCount(),r=e.getViewportHeight()+e.headerHeight-e.renderContainers.body.headerHeight-e.scrollbarHeight,a=e.options.rowHeight,s=i*a-r;0===t&&e.infiniteScroll.scrollUp?n.y={percentage:1/s}:n.y={percentage:t/s},e.scrollContainers("",n)},dataRemovedTop:function(e,t,n){var i,o,r,s;return a.setScrollDirections(e,t,n),i=e.renderContainers.body.visibleRowCache.length,o=e.infiniteScroll.prevScrollTop,s=e.options.rowHeight,r=o-(e.infiniteScroll.previousVisibleRows-i)*s,a.adjustInfiniteScrollPosition(e,r)},dataRemovedBottom:function(e,t,n){var i;return a.setScrollDirections(e,t,n),i=e.infiniteScroll.prevScrollTop,a.adjustInfiniteScrollPosition(e,i)}};return a}]),e.directive("uiGridInfiniteScroll",["uiGridInfiniteScrollService",function(e){return{priority:-200,scope:!1,require:"^uiGrid",compile:function(t,n,i){return{pre:function(t,n,i,o){e.initializeGrid(o.grid,t)},post:function(e,t,n){}}}}}])}(),function(){var e=angular.module("ui.grid.moveColumns",["ui.grid"]);e.service("uiGridMoveColumnService",["$q","$timeout","$log","ScrollEvent","uiGridConstants","gridUtil",function(e,t,n,i,o,r){var a={initializeGrid:function(e){var t=this;this.registerPublicApi(e),this.defaultGridOptions(e.options),e.moveColumns={orderCache:[]},e.registerColumnBuilder(t.movableColumnBuilder),e.registerDataChangeCallback(t.verifyColumnOrder,[o.dataChange.COLUMN])},registerPublicApi:function(e){var t=this,n={events:{colMovable:{columnPositionChanged:function(e,t,n){}}},methods:{colMovable:{moveColumn:function(n,i){var o=e.columns;if(!angular.isNumber(n)||!angular.isNumber(i))return void r.logError("MoveColumn: Please provide valid values for originalPosition and finalPosition");for(var a=0,s=0;s<o.length;s++)(angular.isDefined(o[s].colDef.visible)&&!1===o[s].colDef.visible||!0===o[s].isRowHeader)&&a++;if(n>=o.length-a||i>=o.length-a)return void r.logError("MoveColumn: Invalid values for originalPosition, finalPosition");var l=function(e){for(var t=e,n=0;n<=t;n++)angular.isDefined(o[n])&&(angular.isDefined(o[n].colDef.visible)&&!1===o[n].colDef.visible||!0===o[n].isRowHeader)&&t++;return t};t.redrawColumnAtPosition(e,l(n),l(i))}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods)},defaultGridOptions:function(e){e.enableColumnMoving=!1!==e.enableColumnMoving},movableColumnBuilder:function(t,n,i){var o=[];return t.enableColumnMoving=void 0===t.enableColumnMoving?i.enableColumnMoving:t.enableColumnMoving,e.all(o)},updateColumnCache:function(e){e.moveColumns.orderCache=e.getOnlyDataColumns()},verifyColumnOrder:function(e){var t,n=e.rowHeaderColumns.length;angular.forEach(e.moveColumns.orderCache,function(i,o){if(-1!==(t=e.columns.indexOf(i))&&t-n!==o){var r=e.columns.splice(t,1)[0];e.columns.splice(o+n,0,r)}})},redrawColumnAtPosition:function(e,n,i){if(n!==i){var r=e.columns,s=r[n];if(s.colDef.enableColumnMoving){if(n>i)for(var l=n;l>i;l--)r[l]=r[l-1];else if(i>n)for(var c=n;c<i;c++)r[c]=r[c+1];r[i]=s,a.updateColumnCache(e),e.queueGridRefresh(),t(function(){e.api.core.notifyDataChange(o.dataChange.COLUMN),e.api.colMovable.raise.columnPositionChanged(s.colDef,n,i)})}}}};return a}]),e.directive("uiGridMoveColumns",["uiGridMoveColumnService",function(e){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(t,n,i,o){e.initializeGrid(o.grid)},post:function(e,t,n,i){}}}}}]),e.directive("uiGridHeaderCell",["$q","gridUtil","uiGridMoveColumnService","$document","$log","uiGridConstants","ScrollEvent",function(e,t,n,i,o,r,a){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(e,t,o,r){if(e.col.colDef.enableColumnMoving){var s,l,c,d,u,p,g=angular.element(t[0].querySelectorAll(".ui-grid-cell-contents")),m=!1,f=!1,h=function(t){s=e.grid.element[0].getBoundingClientRect().left,e.grid.hasLeftContainer()&&(s+=e.grid.renderContainers.left.header[0].getBoundingClientRect().width),l=t.pageX,c=0,d=s+e.grid.getViewportWidth(),"mousedown"===t.type?(i.on("mousemove",v),i.on("mouseup",y)):"touchstart"===t.type&&(i.on("touchmove",v),i.on("touchend",y))},v=function(e){var t=e.pageX-l;0!==t&&(document.onselectstart=function(){return!1},f=!0,m?m&&(T(t),l=e.pageX):C())},y=function(t){if(document.onselectstart=null,u&&(u.remove(),m=!1),w(),b(),f){for(var i=e.grid.columns,o=0,r=0;r<i.length&&i[r].colDef.name!==e.col.colDef.name;r++)o++;var a;if(c<0){var s,l=0;if(e.grid.isRTL()){for(s=o+1;s<i.length;s++)if((angular.isUndefined(i[s].colDef.visible)||!0===i[s].colDef.visible)&&(l+=i[s].drawnWidth||i[s].width||i[s].colDef.width)>Math.abs(c)){n.redrawColumnAtPosition(e.grid,o,s-1);break}}else for(s=o-1;s>=0;s--)if((angular.isUndefined(i[s].colDef.visible)||!0===i[s].colDef.visible)&&(l+=i[s].drawnWidth||i[s].width||i[s].colDef.width)>Math.abs(c)){n.redrawColumnAtPosition(e.grid,o,s+1);break}l<Math.abs(c)&&(a=0,e.grid.isRTL()&&(a=i.length-1),n.redrawColumnAtPosition(e.grid,o,a))}else if(c>0){var d,p=0;if(e.grid.isRTL()){for(d=o-1;d>0;d--)if((angular.isUndefined(i[d].colDef.visible)||!0===i[d].colDef.visible)&&(p+=i[d].drawnWidth||i[d].width||i[d].colDef.width)>c){n.redrawColumnAtPosition(e.grid,o,d);break}}else for(d=o+1;d<i.length;d++)if((angular.isUndefined(i[d].colDef.visible)||!0===i[d].colDef.visible)&&(p+=i[d].drawnWidth||i[d].width||i[d].colDef.width)>c){n.redrawColumnAtPosition(e.grid,o,d-1);break}p<c&&(a=i.length-1,e.grid.isRTL()&&(a=0),n.redrawColumnAtPosition(e.grid,o,a))}}},b=function(){g.on("touchstart",h),g.on("mousedown",h)},w=function(){g.off("touchstart",h),g.off("mousedown",h),i.off("mousemove",v),i.off("touchmove",v),i.off("mouseup",y),i.off("touchend",y)};b();var C=function(){m=!0,u=t.clone(),t.parent().append(u),u.addClass("movingColumn");var n={};n.left=t[0].offsetLeft+"px";var i=e.grid.element[0].getBoundingClientRect().right,o=t[0].getBoundingClientRect().right;o>i&&(p=e.col.drawnWidth+(i-o),n.width=p+"px"),u.css(n)},T=function(t){for(var n=e.grid.columns,i=0,o=0;o<n.length;o++)(angular.isUndefined(n[o].colDef.visible)||!0===n[o].colDef.visible)&&(i+=n[o].drawnWidth||n[o].width||n[o].colDef.width);var l,g=u[0].getBoundingClientRect().left-1,m=u[0].getBoundingClientRect().right;if(l=g-s+t,l=l<d?l:d,(g>=s||t>0)&&(m<=d||t<0))u.css({visibility:"visible",left:u[0].offsetLeft+(l<d?t:d-g)+"px"});else if(i>Math.ceil(r.grid.gridWidth)){t*=8;var f=new a(e.col.grid,null,null,"uiGridHeaderCell.moveElement");f.x={pixels:t},f.grid.scrollContainers("",f)}for(var h=0,v=0;v<n.length;v++)if(angular.isUndefined(n[v].colDef.visible)||!0===n[v].colDef.visible){if(n[v].colDef.name===e.col.colDef.name)break;h+=n[v].drawnWidth||n[v].width||n[v].colDef.width}void 0===e.newScrollLeft?c+=t:c=e.newScrollLeft+l-h,p<e.col.drawnWidth&&(p+=Math.abs(t),u.css({width:p+"px"}))}}}}}}}])}(),function(){var e=angular.module("ui.grid.pagination",["ng","ui.grid"]);e.service("uiGridPaginationService",["gridUtil",function(e){var t={initializeGrid:function(e){t.defaultGridOptions(e.options);var n={events:{pagination:{paginationChanged:function(e,t){}}},methods:{pagination:{getPage:function(){return e.options.enablePagination?e.options.paginationCurrentPage:null},getTotalPages:function(){return e.options.enablePagination?0===e.options.totalItems?1:Math.ceil(e.options.totalItems/e.options.paginationPageSize):null},nextPage:function(){e.options.enablePagination&&(e.options.totalItems>0?e.options.paginationCurrentPage=Math.min(e.options.paginationCurrentPage+1,n.methods.pagination.getTotalPages()):e.options.paginationCurrentPage++)},previousPage:function(){e.options.enablePagination&&(e.options.paginationCurrentPage=Math.max(e.options.paginationCurrentPage-1,1))},seek:function(t){if(e.options.enablePagination){if(!angular.isNumber(t)||t<1)throw"Invalid page number: "+t;e.options.paginationCurrentPage=Math.min(t,n.methods.pagination.getTotalPages())}}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods);var i=function(t){if(e.options.useExternalPagination||!e.options.enablePagination)return t;var n=parseInt(e.options.paginationPageSize,10),i=parseInt(e.options.paginationCurrentPage,10),o=t.filter(function(e){return e.visible});e.options.totalItems=o.length;var r=(i-1)*n;return r>o.length&&(i=e.options.paginationCurrentPage=1,r=(i-1)*n),o.slice(r,r+n)};e.registerRowsProcessor(i,900)},defaultGridOptions:function(t){t.enablePagination=!1!==t.enablePagination,t.enablePaginationControls=!1!==t.enablePaginationControls,t.useExternalPagination=!0===t.useExternalPagination,e.isNullOrUndefined(t.totalItems)&&(t.totalItems=0),e.isNullOrUndefined(t.paginationPageSizes)&&(t.paginationPageSizes=[250,500,1e3]),e.isNullOrUndefined(t.paginationPageSize)&&(t.paginationPageSizes.length>0?t.paginationPageSize=t.paginationPageSizes[0]:t.paginationPageSize=0),e.isNullOrUndefined(t.paginationCurrentPage)&&(t.paginationCurrentPage=1),e.isNullOrUndefined(t.paginationTemplate)&&(t.paginationTemplate="ui-grid/pagination")},onPaginationChanged:function(e,t,n){e.api.pagination.raise.paginationChanged(t,n),e.options.useExternalPagination||e.queueGridRefresh()}};return t}]),e.directive("uiGridPagination",["gridUtil","uiGridPaginationService",function(e,t){return{priority:-200,scope:!1,require:"uiGrid",link:{pre:function(n,i,o,r){t.initializeGrid(r.grid),e.getTemplate(r.grid.options.paginationTemplate).then(function(e){var t=angular.element(e);i.append(t),r.innerCompile(t)})}}}}]),e.directive("uiGridPager",["uiGridPaginationService","uiGridConstants","gridUtil","i18nService",function(e,t,n,i){return{priority:-200,scope:!0,require:"^uiGrid",link:function(o,r,a,s){var l=".ui-grid-pager-control-input";o.aria=i.getSafeText("pagination.aria"),o.paginationApi=s.grid.api.pagination,o.sizesLabel=i.getSafeText("pagination.sizes"),o.totalItemsLabel=i.getSafeText("pagination.totalItems"),o.paginationOf=i.getSafeText("pagination.of"),o.paginationThrough=i.getSafeText("pagination.through");var c=s.grid.options;s.grid.renderContainers.body.registerViewportAdjuster(function(e){return e.height=e.height-n.elementHeight(r,"padding"),e});var d=s.grid.registerDataChangeCallback(function(e){e.options.useExternalPagination||(e.options.totalItems=e.rows.length)},[t.dataChange.ROW]);o.$on("$destroy",d);var u=function(){o.showingLow=(c.paginationCurrentPage-1)*c.paginationPageSize+1,o.showingHigh=Math.min(c.paginationCurrentPage*c.paginationPageSize,c.totalItems)},p=o.$watch("grid.options.totalItems + grid.options.paginationPageSize",u),g=o.$watch("grid.options.paginationCurrentPage + grid.options.paginationPageSize",function(t,n){if(t!==n&&void 0!==n){if(!angular.isNumber(c.paginationCurrentPage)||c.paginationCurrentPage<1)return void(c.paginationCurrentPage=1);if(c.totalItems>0&&c.paginationCurrentPage>o.paginationApi.getTotalPages())return void(c.paginationCurrentPage=o.paginationApi.getTotalPages());u(),e.onPaginationChanged(o.grid,c.paginationCurrentPage,c.paginationPageSize)}});o.$on("$destroy",function(){p(),g()}),o.cantPageForward=function(){return c.totalItems>0?c.paginationCurrentPage>=o.paginationApi.getTotalPages():c.data.length<1},o.cantPageToLast=function(){return!(c.totalItems>0)||o.cantPageForward()},o.cantPageBackward=function(){return c.paginationCurrentPage<=1};var m=function(e){e&&n.focus.bySelector(r,l)};o.pageFirstPageClick=function(){o.paginationApi.seek(1),m(o.cantPageBackward())},o.pagePreviousPageClick=function(){o.paginationApi.previousPage(),m(o.cantPageBackward())},o.pageNextPageClick=function(){o.paginationApi.nextPage(),m(o.cantPageForward())},o.pageLastPageClick=function(){o.paginationApi.seek(o.paginationApi.getTotalPages()),m(o.cantPageToLast())}}}}])}(),function(){var e=angular.module("ui.grid.pinning",["ui.grid"]);e.constant("uiGridPinningConstants",{container:{LEFT:"left",RIGHT:"right",NONE:""}}),e.service("uiGridPinningService",["gridUtil","GridRenderContainer","i18nService","uiGridPinningConstants",function(e,t,n,i){var o={initializeGrid:function(e){o.defaultGridOptions(e.options),e.registerColumnBuilder(o.pinningColumnBuilder);var t={events:{pinning:{columnPinned:function(e,t){}}},methods:{pinning:{pinColumn:function(t,n){o.pinColumn(e,t,n)}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.enablePinning=!1!==e.enablePinning},pinningColumnBuilder:function(t,r,a){if(t.enablePinning=void 0===t.enablePinning?a.enablePinning:t.enablePinning,t.pinnedLeft?(r.renderContainer="left",r.grid.createLeftContainer()):t.pinnedRight&&(r.renderContainer="right",r.grid.createRightContainer()),t.enablePinning){var s={name:"ui.grid.pinning.pinLeft",title:n.get().pinning.pinLeft,icon:"ui-grid-icon-left-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"left"!==this.context.col.renderContainer},action:function(){o.pinColumn(this.context.col.grid,this.context.col,i.container.LEFT)}},l={name:"ui.grid.pinning.pinRight",title:n.get().pinning.pinRight,icon:"ui-grid-icon-right-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"right"!==this.context.col.renderContainer},action:function(){o.pinColumn(this.context.col.grid,this.context.col,i.container.RIGHT)}},c={name:"ui.grid.pinning.unpin",title:n.get().pinning.unpin,icon:"ui-grid-icon-cancel",shown:function(){return void 0!==this.context.col.renderContainer&&null!==this.context.col.renderContainer&&"body"!==this.context.col.renderContainer},action:function(){o.pinColumn(this.context.col.grid,this.context.col,i.container.NONE)}};e.arrayContainsObjectWithProperty(r.menuItems,"name","ui.grid.pinning.pinLeft")||r.menuItems.push(s),e.arrayContainsObjectWithProperty(r.menuItems,"name","ui.grid.pinning.pinRight")||r.menuItems.push(l),e.arrayContainsObjectWithProperty(r.menuItems,"name","ui.grid.pinning.unpin")||r.menuItems.push(c)}},pinColumn:function(e,t,n){n===i.container.NONE?(t.renderContainer=null,t.colDef.pinnedLeft=t.colDef.pinnedRight=!1):(t.renderContainer=n,n===i.container.LEFT?e.createLeftContainer():n===i.container.RIGHT&&e.createRightContainer()),e.refresh().then(function(){e.api.pinning.raise.columnPinned(t.colDef,n)})}};return o}]),e.directive("uiGridPinning",["gridUtil","uiGridPinningService",function(e,t){return{require:"uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){t.initializeGrid(o.grid)},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.resizeColumns",["ui.grid"]);e.service("uiGridResizeColumnsService",["gridUtil","$q","$timeout",function(e,t,n){return{defaultGridOptions:function(e){e.enableColumnResizing=!1!==e.enableColumnResizing,!1===e.enableColumnResize&&(e.enableColumnResizing=!1)},colResizerColumnBuilder:function(e,n,i){var o=[];return e.enableColumnResizing=void 0===e.enableColumnResizing?i.enableColumnResizing:e.enableColumnResizing,!1===e.enableColumnResize&&(e.enableColumnResizing=!1),t.all(o)},registerPublicApi:function(e){var t={events:{colResizable:{columnSizeChanged:function(e,t){}}}};e.api.registerEventsFromObject(t.events)},fireColumnSizeChanged:function(t,i,o){n(function(){t.api.colResizable?t.api.colResizable.raise.columnSizeChanged(i,o):e.logError("The resizeable api is not registered, this may indicate that you've included the module but not added the 'ui-grid-resize-columns' directive to your grid definition.  Cannot raise any events.")})},findTargetCol:function(e,t,n){var i=e.getRenderContainer();if("left"===t){var o=i.visibleColumnCache.indexOf(e);return i.visibleColumnCache[o-1*n]}return e}}}]),e.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(e,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){t.defaultGridOptions(o.grid.options),o.grid.registerColumnBuilder(t.colResizerColumnBuilder),t.registerPublicApi(o.grid)},post:function(e,t,n,i){}}}}}]),e.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q","uiGridResizeColumnsService","uiGridConstants","$timeout",function(e,t,n,i,o,r,a){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(e,i,s,l){var c=l.grid;if(c.options.enableColumnResizing){var d=t.get("ui-grid/columnResizer"),u=1;c.isRTL()&&(e.position="left",u=-1);var p=function(){for(var t=i[0].getElementsByClassName("ui-grid-column-resizer"),r=0;r<t.length;r++)angular.element(t[r]).remove();var a=o.findTargetCol(e.col,"left",u),s=e.col.getRenderContainer();if(a&&0!==s.visibleColumnCache.indexOf(e.col)&&!1!==a.colDef.enableColumnResizing){var l=angular.element(d).clone();l.attr("position","left"),i.prepend(l),n(l)(e)}if(!1!==e.col.colDef.enableColumnResizing){var c=angular.element(d).clone();c.attr("position","right"),i.append(c),n(c)(e)}};p();var g=function(){a(p)},m=c.registerDataChangeCallback(g,[r.dataChange.COLUMN]);e.$on("$destroy",m)}}}}}}]),e.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","uiGridResizeColumnsService",function(e,t,n,i){var o=angular.element('<div class="ui-grid-resize-overlay"></div>');return{priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function(r,a,s,l){function c(e){l.grid.refreshCanvas(!0).then(function(){l.grid.queueGridRefresh()})}function d(e,t){var n=t;return e.minWidth&&n<e.minWidth?n=e.minWidth:e.maxWidth&&n>e.maxWidth&&(n=e.maxWidth),n}function u(e,t){e.originalEvent&&(e=e.originalEvent),e.preventDefault(),m=(e.targetTouches?e.targetTouches[0]:e).clientX-f,m<0?m=0:m>l.grid.gridWidth&&(m=l.grid.gridWidth);var a=i.findTargetCol(r.col,r.position,h);if(!1!==a.colDef.enableColumnResizing){l.grid.element.hasClass("column-resizing")||l.grid.element.addClass("column-resizing");var s=m-g,c=parseInt(a.drawnWidth+s*h,10);m+=(d(a,c)-c)*h,o.css({left:m+"px"}),l.fireEvent(n.events.ITEM_DRAGGING)}}function p(e,t){e.originalEvent&&(e=e.originalEvent),e.preventDefault(),l.grid.element.removeClass("column-resizing"),o.remove(),m=(e.changedTouches?e.changedTouches[0]:e).clientX-f;var n=m-g;if(0===n)return b(),void y();var a=i.findTargetCol(r.col,r.position,h);if(!1!==a.colDef.enableColumnResizing){var s=parseInt(a.drawnWidth+n*h,10);a.width=d(a,s),a.hasCustomWidth=!0,c(n),i.fireColumnSizeChanged(l.grid,a.colDef,n),b(),y()}}var g=0,m=0,f=0,h=1;l.grid.isRTL()&&(r.position="left",h=-1),"left"===r.position?a.addClass("left"):"right"===r.position&&a.addClass("right");var v=function(t,n){t.originalEvent&&(t=t.originalEvent),t.stopPropagation(),f=l.grid.element[0].getBoundingClientRect().left,g=(t.targetTouches?t.targetTouches[0]:t).clientX-f,l.grid.element.append(o),o.css({left:g}),"touchstart"===t.type?(e.on("touchend",p),e.on("touchmove",u),a.off("mousedown",v)):(e.on("mouseup",p),e.on("mousemove",u),a.off("touchstart",v))},y=function(){a.on("mousedown",v),a.on("touchstart",v)},b=function(){e.off("mouseup",p),e.off("touchend",p),e.off("mousemove",u),e.off("touchmove",u),a.off("mousedown",v),a.off("touchstart",v)};y();var w=function(e,o){e.stopPropagation();var s=i.findTargetCol(r.col,r.position,h);if(!1!==s.colDef.enableColumnResizing){var u=0,p=0,g=t.closestElm(a,".ui-grid-render-container"),m=g.querySelectorAll("."+n.COL_CLASS_PREFIX+s.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(m,function(e){var n;angular.element(e).parent().hasClass("ui-grid-header-cell")&&(n=angular.element(e).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),t.fakeElement(e,{},function(e){var i=angular.element(e);i.attr("style","float: left");var o=t.elementWidth(i);if(n){o+=t.elementWidth(n)}o>u&&(u=o,p=u-o)})}),s.width=d(s,u),s.hasCustomWidth=!0,c(p),i.fireColumnSizeChanged(l.grid,s.colDef,p)}};a.on("dblclick",w),a.on("$destroy",function(){a.off("dblclick",w),b()})}}}])}(),function(){var e=angular.module("ui.grid.rowEdit",["ui.grid","ui.grid.edit","ui.grid.cellNav"]);e.constant("uiGridRowEditConstants",{}),e.service("uiGridRowEditService",["$interval","$q","uiGridConstants","uiGridRowEditConstants","gridUtil",function(e,t,n,i,o){var r={initializeGrid:function(e,t){t.rowEdit={};var n={events:{rowEdit:{saveRow:function(e){}}},methods:{rowEdit:{setSavePromise:function(e,n){r.setSavePromise(t,e,n)},getDirtyRows:function(){return t.rowEdit.dirtyRows?t.rowEdit.dirtyRows:[]},getErrorRows:function(){return t.rowEdit.errorRows?t.rowEdit.errorRows:[]},flushDirtyRows:function(){return r.flushDirtyRows(t)},setRowsDirty:function(e){r.setRowsDirty(t,e)},setRowsClean:function(e){r.setRowsClean(t,e)}}}};t.api.registerEventsFromObject(n.events),t.api.registerMethodsFromObject(n.methods),t.api.core.on.renderingComplete(e,function(n){t.api.edit.on.afterCellEdit(e,r.endEditCell),t.api.edit.on.beginCellEdit(e,r.beginEditCell),t.api.edit.on.cancelCellEdit(e,r.cancelEditCell),t.api.cellNav&&t.api.cellNav.on.navigate(e,r.navigate)})},defaultGridOptions:function(e){},saveRow:function(e,t){var n=this;return function(){if(t.isSaving=!0,t.rowEditSavePromise)return t.rowEditSavePromise;var i=e.api.rowEdit.raise.saveRow(t.entity);return t.rowEditSavePromise?t.rowEditSavePromise.then(n.processSuccessPromise(e,t),n.processErrorPromise(e,t)):o.logError("A promise was not returned when saveRow event was raised, either nobody is listening to event, or event handler did not return a promise"),i}},setSavePromise:function(e,t,n){e.getRow(t).rowEditSavePromise=n},processSuccessPromise:function(e,t){var n=this;return function(){delete t.isSaving,delete t.isDirty,delete t.isError,delete t.rowEditSaveTimer,delete t.rowEditSavePromise,n.removeRow(e.rowEdit.errorRows,t),n.removeRow(e.rowEdit.dirtyRows,t)}},processErrorPromise:function(e,t){return function(){delete t.isSaving,delete t.rowEditSaveTimer,delete t.rowEditSavePromise,t.isError=!0,e.rowEdit.errorRows||(e.rowEdit.errorRows=[]),r.isRowPresent(e.rowEdit.errorRows,t)||e.rowEdit.errorRows.push(t)}},removeRow:function(e,t){void 0!==e&&null!==e&&e.forEach(function(n,i){n.uid===t.uid&&e.splice(i,1)})},isRowPresent:function(e,t){var n=!1;return e.forEach(function(e,i){e.uid===t.uid&&(n=!0)}),n},flushDirtyRows:function(e){var n=[];return e.api.rowEdit.getDirtyRows().forEach(function(t){r.saveRow(e,t)(),n.push(t.rowEditSavePromise)}),t.all(n)},endEditCell:function(e,t,n,i){var a=this.grid,s=a.getRow(e);if(!s)return void o.logError("Unable to find rowEntity in grid data, dirty flag cannot be set");(n!==i||s.isDirty)&&(a.rowEdit.dirtyRows||(a.rowEdit.dirtyRows=[]),s.isDirty||(s.isDirty=!0,a.rowEdit.dirtyRows.push(s)),delete s.isError,r.considerSetTimer(a,s))},beginEditCell:function(e,t){var n=this.grid,i=n.getRow(e);if(!i)return void o.logError("Unable to find rowEntity in grid data, timer cannot be cancelled");r.cancelTimer(n,i)},cancelEditCell:function(e,t){var n=this.grid,i=n.getRow(e);if(!i)return void o.logError("Unable to find rowEntity in grid data, timer cannot be set");r.considerSetTimer(n,i)},navigate:function(e,t){var n=this.grid;e.row.rowEditSaveTimer&&r.cancelTimer(n,e.row),t&&t.row&&t.row!==e.row&&r.considerSetTimer(n,t.row)},considerSetTimer:function(t,n){if(r.cancelTimer(t,n),n.isDirty&&!n.isSaving&&-1!==t.options.rowEditWaitInterval){var i=t.options.rowEditWaitInterval?t.options.rowEditWaitInterval:2e3;n.rowEditSaveTimer=e(r.saveRow(t,n),i,1)}},cancelTimer:function(t,n){n.rowEditSaveTimer&&!n.isSaving&&(e.cancel(n.rowEditSaveTimer),delete n.rowEditSaveTimer)},setRowsDirty:function(e,t){var n;t.forEach(function(t,i){n=e.getRow(t),n?(e.rowEdit.dirtyRows||(e.rowEdit.dirtyRows=[]),n.isDirty||(n.isDirty=!0,e.rowEdit.dirtyRows.push(n)),delete n.isError,r.considerSetTimer(e,n)):o.logError("requested row not found in rowEdit.setRowsDirty, row was: "+t)})},setRowsClean:function(e,t){var n;t.forEach(function(t,i){n=e.getRow(t),n?(delete n.isDirty,r.removeRow(e.rowEdit.dirtyRows,n),r.cancelTimer(e,n),delete n.isError,r.removeRow(e.rowEdit.errorRows,n)):o.logError("requested row not found in rowEdit.setRowsClean, row was: "+t)})}};return r}]),e.directive("uiGridRowEdit",["gridUtil","uiGridRowEditService","uiGridEditConstants",function(e,t,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){t.initializeGrid(e,o.grid)},post:function(e,t,n,i){}}}}}]),e.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(e,t,n,i){return{priority:-200,scope:!1,compile:function(e,t){var n=angular.element(e.children().children()[0]),i=n.attr("ng-class"),o="";return o=i?i.slice(0,-1)+", 'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}":"{'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}",n.attr("ng-class",o),{pre:function(e,t,n,i){},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.saveState",["ui.grid","ui.grid.selection","ui.grid.cellNav","ui.grid.grouping","ui.grid.pinning","ui.grid.treeView"]);e.constant("uiGridSaveStateConstants",{featureName:"saveState"}),e.service("uiGridSaveStateService",["$q","uiGridSaveStateConstants","gridUtil","$compile","$interval","uiGridConstants",function(e,t,n,i,o,r){var a={initializeGrid:function(e){e.saveState={},this.defaultGridOptions(e.options);var t={events:{saveState:{}},methods:{saveState:{save:function(){return a.save(e)},restore:function(t,n){a.restore(e,t,n)}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.saveWidths=!1!==e.saveWidths,e.saveOrder=!1!==e.saveOrder,e.saveScroll=!0===e.saveScroll,e.saveFocus=!0!==e.saveScroll&&!1!==e.saveFocus,e.saveVisible=!1!==e.saveVisible,e.saveSort=!1!==e.saveSort,e.saveFilter=!1!==e.saveFilter,e.saveSelection=!1!==e.saveSelection,e.saveGrouping=!1!==e.saveGrouping,e.saveGroupingExpandedStates=!0===e.saveGroupingExpandedStates,e.savePinning=!1!==e.savePinning,e.saveTreeView=!1!==e.saveTreeView},save:function(e){var t={};return t.columns=a.saveColumns(e),t.scrollFocus=a.saveScrollFocus(e),t.selection=a.saveSelection(e),t.grouping=a.saveGrouping(e),t.treeView=a.saveTreeView(e),t.pagination=a.savePagination(e),t},restore:function(e,t,n){n.columns&&a.restoreColumns(e,n.columns),n.scrollFocus&&a.restoreScrollFocus(e,t,n.scrollFocus),n.selection&&a.restoreSelection(e,n.selection),n.grouping&&a.restoreGrouping(e,n.grouping),n.treeView&&a.restoreTreeView(e,n.treeView),n.pagination&&a.restorePagination(e,n.pagination),e.refresh()},saveColumns:function(e){var t=[];return e.getOnlyDataColumns().forEach(function(n){var i={};i.name=n.name,e.options.saveVisible&&(i.visible=n.visible),e.options.saveWidths&&(i.width=n.width),e.options.saveSort&&(i.sort=angular.copy(n.sort)),e.options.saveFilter&&(i.filters=[],n.filters.forEach(function(e){var t={};angular.forEach(e,function(e,n){"condition"!==n&&"$$hashKey"!==n&&"placeholder"!==n&&(t[n]=e)}),i.filters.push(t)})),e.api.pinning&&e.options.savePinning&&(i.pinned=n.renderContainer?n.renderContainer:""),t.push(i)}),t},saveScrollFocus:function(e){if(!e.api.cellNav)return{};var t={};if(e.options.saveFocus){t.focus=!0;var n=e.api.cellNav.getFocusedCell();null!==n&&(null!==n.col&&(t.colName=n.col.colDef.name),null!==n.row&&(t.rowVal=a.getRowVal(e,n.row)))}return(e.options.saveScroll||e.options.saveFocus&&!t.colName&&!t.rowVal)&&(t.focus=!1,e.renderContainers.body.prevRowScrollIndex&&(t.rowVal=a.getRowVal(e,e.renderContainers.body.visibleRowCache[e.renderContainers.body.prevRowScrollIndex])),e.renderContainers.body.prevColScrollIndex&&(t.colName=e.renderContainers.body.visibleColumnCache[e.renderContainers.body.prevColScrollIndex].name)),t},saveSelection:function(e){return e.api.selection&&e.options.saveSelection?e.api.selection.getSelectedGridRows().map(function(t){return a.getRowVal(e,t)}):[]},saveGrouping:function(e){return e.api.grouping&&e.options.saveGrouping?e.api.grouping.getGrouping(e.options.saveGroupingExpandedStates):{}},savePagination:function(e){return e.api.pagination&&e.options.paginationPageSize?{paginationCurrentPage:e.options.paginationCurrentPage,paginationPageSize:e.options.paginationPageSize}:{}},saveTreeView:function(e){return e.api.treeView&&e.options.saveTreeView?e.api.treeView.getTreeView():{}},getRowVal:function(e,t){if(!t)return null;var n={};return e.options.saveRowIdentity?(n.identity=!0,n.row=e.options.saveRowIdentity(t.entity)):(n.identity=!1,n.row=e.renderContainers.body.visibleRowCache.indexOf(t)),n},restoreColumns:function(e,t){var n=!1;t.forEach(function(t,i){var o=e.getColumn(t.name);if(o&&!e.isRowHeaderColumn(o)){!e.options.saveVisible||o.visible===t.visible&&o.colDef.visible===t.visible||(o.visible=t.visible,o.colDef.visible=t.visible,e.api.core.raise.columnVisibilityChanged(o)),e.options.saveWidths&&o.width!==t.width&&(o.width=t.width,o.hasCustomWidth=!0),!e.options.saveSort||angular.equals(o.sort,t.sort)||void 0===o.sort&&angular.isEmpty(t.sort)||(o.sort=angular.copy(t.sort),n=!0),e.options.saveFilter&&!angular.equals(o.filters,t.filters)&&(t.filters.forEach(function(e,t){angular.extend(o.filters[t],e),void 0!==e.term&&null!==e.term||delete o.filters[t].term}),e.api.core.raise.filterChanged()),e.api.pinning&&e.options.savePinning&&o.renderContainer!==t.pinned&&e.api.pinning.pinColumn(o,t.pinned);var r=e.getOnlyDataColumns().indexOf(o);if(-1!==r&&e.options.saveOrder&&r!==i){var a=e.columns.splice(r+e.rowHeaderColumns.length,1)[0];e.columns.splice(i+e.rowHeaderColumns.length,0,a)}}}),n&&e.api.core.raise.sortChanged(e,e.getColumnSorting())},restoreScrollFocus:function(e,t,n){if(e.api.cellNav){var i,o;if(n.colName){var r=e.options.columnDefs.filter(function(e){return e.name===n.colName});r.length>0&&(i=r[0])}n.rowVal&&n.rowVal.row&&(o=n.rowVal.identity?a.findRowByIdentity(e,n.rowVal):e.renderContainers.body.visibleRowCache[n.rowVal.row]);var s=o&&o.entity?o.entity:null;(i||s)&&(n.focus?e.api.cellNav.scrollToFocus(s,i):e.scrollTo(s,i))}},restoreSelection:function(e,t){e.api.selection&&(e.api.selection.clearSelectedRows(),t.forEach(function(t){if(t.identity){var n=a.findRowByIdentity(e,t);n&&e.api.selection.selectRow(n.entity)}else e.api.selection.selectRowByVisibleIndex(t.row)}))},restoreGrouping:function(e,t){e.api.grouping&&void 0!==t&&null!==t&&!angular.equals(t,{})&&e.api.grouping.setGrouping(t)},restoreTreeView:function(e,t){e.api.treeView&&void 0!==t&&null!==t&&!angular.equals(t,{})&&e.api.treeView.setTreeView(t)},restorePagination:function(e,t){e.api.pagination&&e.options.paginationPageSize&&(e.options.paginationCurrentPage=t.paginationCurrentPage,e.options.paginationPageSize=t.paginationPageSize)},findRowByIdentity:function(e,t){if(!e.options.saveRowIdentity)return null;var n=e.rows.filter(function(n){return e.options.saveRowIdentity(n.entity)===t.row});return n.length>0?n[0]:null}};return a}]),e.directive("uiGridSaveState",["uiGridSaveStateConstants","uiGridSaveStateService","gridUtil","$compile",function(e,t,n,i){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(e,n,i,o){t.initializeGrid(o.grid)}}}])}(),function(){var e=angular.module("ui.grid.selection",["ui.grid"]);e.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),angular.module("ui.grid").config(["$provide",function(e){e.decorator("GridRow",["$delegate",function(e){return e.prototype.setSelected=function(e){this.isSelected=e,e?this.grid.selection.selectedCount++:this.grid.selection.selectedCount--},e}])}]),e.service("uiGridSelectionService",["$q","$templateCache","uiGridSelectionConstants","gridUtil",function(e,t,n,i){var o={initializeGrid:function(e){e.selection={},e.selection.lastSelectedRow=null,e.selection.selectAll=!1,e.selection.selectedCount=0,o.defaultGridOptions(e.options);var t={events:{selection:{rowSelectionChanged:function(e,t,n){},rowSelectionChangedBatch:function(e,t,n){}}},methods:{selection:{toggleRowSelection:function(t,n){var i=e.getRow(t);null!==i&&o.toggleRowSelection(e,i,n,e.options.multiSelect,e.options.noUnselect)},selectRow:function(t,n){var i=e.getRow(t);null===i||i.isSelected||o.toggleRowSelection(e,i,n,e.options.multiSelect,e.options.noUnselect)},selectRowByVisibleIndex:function(t,n){var i=e.renderContainers.body.visibleRowCache[t];null===i||void 0===i||i.isSelected||o.toggleRowSelection(e,i,n,e.options.multiSelect,e.options.noUnselect)},unSelectRow:function(t,n){var i=e.getRow(t);null!==i&&i.isSelected&&o.toggleRowSelection(e,i,n,e.options.multiSelect,e.options.noUnselect)},selectAllRows:function(t){if(!1!==e.options.multiSelect){var n=[];e.rows.forEach(function(i){i.isSelected||!1===i.enableSelection||(i.setSelected(!0),o.decideRaiseSelectionEvent(e,i,n,t))}),o.decideRaiseSelectionBatchEvent(e,n,t),e.selection.selectAll=!0}},selectAllVisibleRows:function(t){if(!1!==e.options.multiSelect){var n=[];e.rows.forEach(function(i){i.visible?i.isSelected||!1===i.enableSelection||(i.setSelected(!0),o.decideRaiseSelectionEvent(e,i,n,t)):i.isSelected&&(i.setSelected(!1),o.decideRaiseSelectionEvent(e,i,n,t))}),o.decideRaiseSelectionBatchEvent(e,n,t),e.selection.selectAll=!0}},clearSelectedRows:function(t){o.clearSelectedRows(e,t)},getSelectedRows:function(){return o.getSelectedRows(e).map(function(e){return e.entity})},getSelectedGridRows:function(){return o.getSelectedRows(e)},getSelectedCount:function(){return e.selection.selectedCount},setMultiSelect:function(t){e.options.multiSelect=t},setModifierKeysToMultiSelect:function(t){e.options.modifierKeysToMultiSelect=t},getSelectAllState:function(){return e.selection.selectAll}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.enableRowSelection=!1!==e.enableRowSelection,e.multiSelect=!1!==e.multiSelect,e.noUnselect=!0===e.noUnselect,e.modifierKeysToMultiSelect=!0===e.modifierKeysToMultiSelect,e.enableRowHeaderSelection=!1!==e.enableRowHeaderSelection,void 0===e.enableFullRowSelection&&(e.enableFullRowSelection=!e.enableRowHeaderSelection),e.enableSelectAll=!1!==e.enableSelectAll,e.enableSelectionBatchEvent=!1!==e.enableSelectionBatchEvent,e.selectionRowHeaderWidth=angular.isDefined(e.selectionRowHeaderWidth)?e.selectionRowHeaderWidth:30,e.enableFooterTotalSelected=!1!==e.enableFooterTotalSelected,e.isRowSelectable=angular.isDefined(e.isRowSelectable)?e.isRowSelectable:angular.noop},toggleRowSelection:function(e,t,n,i,r){var a=t.isSelected;if(!1!==t.enableSelection||a){var s;i||a?!i&&a&&(s=o.getSelectedRows(e),s.length>1&&(a=!1,o.clearSelectedRows(e,n))):o.clearSelectedRows(e,n),a&&r||(t.setSelected(!a),!0===t.isSelected&&(e.selection.lastSelectedRow=t),s=o.getSelectedRows(e),e.selection.selectAll=e.rows.length===s.length,e.api.selection.raise.rowSelectionChanged(t,n))}},shiftSelect:function(e,t,n,i){if(i){var r=o.getSelectedRows(e),a=r.length>0?e.renderContainers.body.visibleRowCache.indexOf(e.selection.lastSelectedRow):0,s=e.renderContainers.body.visibleRowCache.indexOf(t);if(a>s){var l=a;a=s,s=l}for(var c=[],d=a;d<=s;d++){var u=e.renderContainers.body.visibleRowCache[d];u&&(u.isSelected||!1===u.enableSelection||(u.setSelected(!0),e.selection.lastSelectedRow=u,o.decideRaiseSelectionEvent(e,u,c,n)))}o.decideRaiseSelectionBatchEvent(e,c,n)}},getSelectedRows:function(e){return e.rows.filter(function(e){return e.isSelected})},clearSelectedRows:function(e,t){var n=[];o.getSelectedRows(e).forEach(function(i){i.isSelected&&(i.setSelected(!1),o.decideRaiseSelectionEvent(e,i,n,t))}),o.decideRaiseSelectionBatchEvent(e,n,t),e.selection.selectAll=!1,e.selection.selectedCount=0},decideRaiseSelectionEvent:function(e,t,n,i){e.options.enableSelectionBatchEvent?n.push(t):e.api.selection.raise.rowSelectionChanged(t,i)},decideRaiseSelectionBatchEvent:function(e,t,n){t.length>0&&e.api.selection.raise.rowSelectionChangedBatch(t,n)}};return o}]),e.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","$templateCache","uiGridConstants",function(e,t,n,i){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(n,o,r,a){if(t.initializeGrid(a.grid),a.grid.options.enableRowHeaderSelection){var s={name:e.selectionRowHeaderColName,displayName:"",width:a.grid.options.selectionRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};a.grid.addRowHeaderColumn(s)}var l=!1,c=function(e){return e.forEach(function(e){e.enableSelection=a.grid.options.isRowSelectable(e)}),e},d=function(){a.grid.options.isRowSelectable!==angular.noop&&!0!==l&&(a.grid.registerRowsProcessor(c,500),l=!0)};d();var u=a.grid.registerDataChangeCallback(d,[i.dataChange.OPTIONS]);n.$on("$destroy",u)},post:function(e,t,n,i){}}}}}]),e.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService","gridUtil",function(e,t,n){return{replace:!0,restrict:"E",template:e.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(e,i,o,r){function a(e,n){n.stopPropagation(),n.shiftKey?t.shiftSelect(l,e,n,l.options.multiSelect):n.ctrlKey||n.metaKey?t.toggleRowSelection(l,e,n,l.options.multiSelect,l.options.noUnselect):t.toggleRowSelection(l,e,n,l.options.multiSelect&&!l.options.modifierKeysToMultiSelect,l.options.noUnselect)}function s(e){(e.ctrlKey||e.shiftKey)&&(e.target.onselectstart=function(){return!1},window.setTimeout(function(){e.target.onselectstart=null},0))}var l=r.grid;e.selectButtonClick=a,"ie"===n.detectBrowser()&&i.on("mousedown",s)}}}]),e.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function(e,t){return{replace:!0,restrict:"E",template:e.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function(e,n,i,o){var r=e.col.grid;e.headerButtonClick=function(e,n){r.selection.selectAll?(t.clearSelectedRows(r,n),r.options.noUnselect&&r.api.selection.selectRowByVisibleIndex(0,n),r.selection.selectAll=!1):r.options.multiSelect&&(r.api.selection.selectAllVisibleRows(n),r.selection.selectAll=!0)}}}}]),e.directive("uiGridViewport",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function(e,t,n,i,o,r){return{priority:-200,scope:!1,compile:function(e,t){var n=angular.element(e.children().children()[0]),i=n.attr("ng-class"),o="";return o=i?i.slice(0,-1)+",'ui-grid-row-selected': row.isSelected}":"{'ui-grid-row-selected': row.isSelected}",n.attr("ng-class",o),{pre:function(e,t,n,i){},post:function(e,t,n,i){}}}}}]),e.directive("uiGridCell",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService","$timeout",function(e,t,n,i,o,r,a){return{priority:-200,restrict:"A",require:"?^uiGrid",scope:!1,link:function(e,n,i,o){function s(){e.grid.options.enableRowSelection&&e.grid.options.enableFullRowSelection&&(n.addClass("ui-grid-disable-selection"),n.on("touchstart",p),n.on("touchend",g),n.on("click",u),e.registered=!0)}function l(){e.registered&&(n.removeClass("ui-grid-disable-selection"),n.off("touchstart",p),n.off("touchend",g),n.off("click",u),e.registered=!1)}var c=0,d=300;o.grid.api.cellNav&&o.grid.api.cellNav.on.viewPortKeyDown(e,function(t,n){null!==n&&n.row===e.row&&n.col===e.col&&32===t.keyCode&&"selectionRowHeaderCol"===e.col.colDef.name&&(r.toggleRowSelection(e.grid,e.row,t,e.grid.options.multiSelect&&!e.grid.options.modifierKeysToMultiSelect,e.grid.options.noUnselect),e.$apply())});var u=function(t){n.off("touchend",g),t.shiftKey?r.shiftSelect(e.grid,e.row,t,e.grid.options.multiSelect):t.ctrlKey||t.metaKey?r.toggleRowSelection(e.grid,e.row,t,e.grid.options.multiSelect,e.grid.options.noUnselect):r.toggleRowSelection(e.grid,e.row,t,e.grid.options.multiSelect&&!e.grid.options.modifierKeysToMultiSelect,e.grid.options.noUnselect),e.$apply(),a(function(){n.on("touchend",g)},d)},p=function(e){c=(new Date).getTime(),n.off("click",u)},g=function(e){(new Date).getTime()-c<d&&u(e),a(function(){n.on("click",u)},d)};s();var m=e.grid.registerDataChangeCallback(function(){e.grid.options.enableRowSelection&&e.grid.options.enableFullRowSelection&&!e.registered?s():e.grid.options.enableRowSelection&&e.grid.options.enableFullRowSelection||!e.registered||l()},[t.dataChange.OPTIONS]);n.on("$destroy",m)}}}]),e.directive("uiGridGridFooter",["$compile","uiGridConstants","gridUtil",function(e,t,n){return{restrict:"EA",replace:!0,priority:-1e3,require:"^uiGrid",scope:!0,compile:function(t,i){return{pre:function(t,i,o,r){r.grid.options.showGridFooter&&n.getTemplate("ui-grid/gridFooterSelectedItems").then(function(n){var o=angular.element(n),r=e(o)(t);angular.element(i[0].getElementsByClassName("ui-grid-grid-footer")[0]).append(r)})},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.treeBase",["ui.grid"]);e.constant("uiGridTreeBaseConstants",{featureName:"treeBase",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),e.service("uiGridTreeBaseService",["$q","uiGridTreeBaseConstants","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants","rowSorter",function(e,t,n,i,o,r,a,s){var l={initializeGrid:function(e,t){e.treeBase={},e.treeBase.numberLevels=0,e.treeBase.expandAll=!1,e.treeBase.tree=[],l.defaultGridOptions(e.options),e.registerRowsProcessor(l.treeRows,410),e.registerColumnBuilder(l.treeBaseColumnBuilder),l.createRowHeader(e);var n={events:{treeBase:{rowExpanded:{},rowCollapsed:{}}},methods:{treeBase:{expandAllRows:function(){l.expandAllRows(e)},collapseAllRows:function(){l.collapseAllRows(e)},toggleRowTreeState:function(t){l.toggleRowTreeState(e,t)},expandRow:function(t){l.expandRow(e,t)},expandRowChildren:function(t){l.expandRowChildren(e,t)},collapseRow:function(t){l.collapseRow(e,t)},collapseRowChildren:function(t){l.collapseRowChildren(e,t)},getTreeExpandedState:function(){return{expandedState:l.getTreeState(e)}},setTreeState:function(t){l.setTreeState(e,t)},getRowChildren:function(e){return e.treeNode.children.map(function(e){return e.row})}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods)},defaultGridOptions:function(e){e.treeRowHeaderBaseWidth=e.treeRowHeaderBaseWidth||30,e.treeIndent=e.treeIndent||10,e.showTreeRowHeader=!1!==e.showTreeRowHeader,e.showTreeExpandNoChildren=!1!==e.showTreeExpandNoChildren,e.treeRowHeaderAlwaysVisible=!1!==e.treeRowHeaderAlwaysVisible,e.treeCustomAggregations=e.treeCustomAggregations||{},e.enableExpandAll=!1!==e.enableExpandAll},treeBaseColumnBuilder:function(e,t,n){void 0!==e.customTreeAggregationFn&&(t.treeAggregationFn=e.customTreeAggregationFn),void 0!==e.treeAggregationType&&(t.treeAggregation={type:e.treeAggregationType},void 0!==n.treeCustomAggregations[e.treeAggregationType]?(t.treeAggregationFn=n.treeCustomAggregations[e.treeAggregationType].aggregationFn,t.treeAggregationFinalizerFn=n.treeCustomAggregations[e.treeAggregationType].finalizerFn,t.treeAggregation.label=n.treeCustomAggregations[e.treeAggregationType].label):void 0!==l.nativeAggregations()[e.treeAggregationType]&&(t.treeAggregationFn=l.nativeAggregations()[e.treeAggregationType].aggregationFn,t.treeAggregation.label=l.nativeAggregations()[e.treeAggregationType].label)),void 0!==e.treeAggregationLabel&&(void 0===t.treeAggregation&&(t.treeAggregation={}),t.treeAggregation.label=e.treeAggregationLabel),t.treeAggregationUpdateEntity=!1!==e.treeAggregationUpdateEntity,void 0===t.customTreeAggregationFinalizerFn&&(t.customTreeAggregationFinalizerFn=e.customTreeAggregationFinalizerFn)},createRowHeader:function(e){var n={name:t.rowHeaderColName,displayName:"",width:e.options.treeRowHeaderBaseWidth,minWidth:10,cellTemplate:"ui-grid/treeBaseRowHeader",headerCellTemplate:"ui-grid/treeBaseHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};n.visible=e.options.treeRowHeaderAlwaysVisible,e.addRowHeaderColumn(n)},expandAllRows:function(e){e.treeBase.tree.forEach(function(n){l.setAllNodes(e,n,t.EXPANDED)}),e.treeBase.expandAll=!0,e.queueGridRefresh()},collapseAllRows:function(e){e.treeBase.tree.forEach(function(n){l.setAllNodes(e,n,t.COLLAPSED)}),e.treeBase.expandAll=!1,e.queueGridRefresh()},setAllNodes:function(e,n,i){void 0!==n.state&&n.state!==i&&(n.state=i,i===t.EXPANDED?e.api.treeBase.raise.rowExpanded(n.row):e.api.treeBase.raise.rowCollapsed(n.row)),n.children&&n.children.forEach(function(t){l.setAllNodes(e,t,i)})},toggleRowTreeState:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||(n.treeNode.state===t.EXPANDED?l.collapseRow(e,n):l.expandRow(e,n),e.queueGridRefresh())},expandRow:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||n.treeNode.state!==t.EXPANDED&&(n.treeNode.state=t.EXPANDED,e.api.treeBase.raise.rowExpanded(n),e.treeBase.expandAll=l.allExpanded(e.treeBase.tree),e.queueGridRefresh())},expandRowChildren:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||(l.setAllNodes(e,n.treeNode,t.EXPANDED),e.treeBase.expandAll=l.allExpanded(e.treeBase.tree),e.queueGridRefresh())},collapseRow:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||n.treeNode.state!==t.COLLAPSED&&(n.treeNode.state=t.COLLAPSED,e.treeBase.expandAll=!1,e.api.treeBase.raise.rowCollapsed(n),e.queueGridRefresh())},collapseRowChildren:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||(l.setAllNodes(e,n.treeNode,t.COLLAPSED),e.treeBase.expandAll=!1,e.queueGridRefresh())},allExpanded:function(e){var t=!0;return e.forEach(function(e){l.allExpandedInternal(e)||(t=!1)}),t},allExpandedInternal:function(e){if(e.children&&e.children.length>0){if(e.state===t.COLLAPSED)return!1;var n=!0;return e.children.forEach(function(e){l.allExpandedInternal(e)||(n=!1)}),n}return!0},treeRows:function(e){if(0===e.length)return e;var n=this;t.EXPANDED;return n.treeBase.tree=l.createTree(n,e),l.updateRowHeaderWidth(n),l.sortTree(n),l.fixFilter(n),l.renderTree(n.treeBase.tree)},updateRowHeaderWidth:function(e){var n=e.getColumn(t.rowHeaderColName),i=e.options.treeRowHeaderBaseWidth+e.options.treeIndent*Math.max(e.treeBase.numberLevels-1,0);n&&i!==n.width&&(n.width=i,e.queueRefresh());var o=!0;!1===e.options.showTreeRowHeader&&(o=!1),!1===e.options.treeRowHeaderAlwaysVisible&&e.treeBase.numberLevels<=0&&(o=!1),n.visible!==o&&(n.visible=o,n.colDef.visible=o,e.queueGridRefresh())},renderTree:function(e){var n=[];return e.forEach(function(e){e.row.visible&&n.push(e.row),e.state===t.EXPANDED&&e.children&&e.children.length>0&&(n=n.concat(l.renderTree(e.children)))}),n},createTree:function(e,n){var i,o=-1,r=[];e.treeBase.tree=[],e.treeBase.numberLevels=0;var a=l.getAggregations(e),s=function(n){if(void 0!==n.entity.$$treeLevel&&n.treeLevel!==n.entity.$$treeLevel&&(n.treeLevel=n.entity.$$treeLevel),n.treeLevel<=o){for(;n.treeLevel<=o;){var s=r.pop();l.finaliseAggregations(s),o--}i=r.length>0?l.setCurrentState(r):t.EXPANDED}(void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0)&&n.visible&&l.aggregate(e,n,r),l.addOrUseNode(e,n,r,a),void 0!==n.treeLevel&&null!==n.treeLevel&&n.treeLevel>=0&&(r.push(n),o++,i=l.setCurrentState(r)),e.treeBase.numberLevels<n.treeLevel+1&&(e.treeBase.numberLevels=n.treeLevel+1)};for(n.forEach(s);r.length>0;){var c=r.pop();l.finaliseAggregations(c)}return e.treeBase.tree},addOrUseNode:function(e,n,i,o){var r=[];o.forEach(function(e){r.push(l.buildAggregationObject(e.col))});var a={state:t.COLLAPSED,row:n,parentRow:null,aggregations:r,children:[]};n.treeNode&&(a.state=n.treeNode.state),i.length>0&&(a.parentRow=i[i.length-1]),n.treeNode=a,0===i.length?e.treeBase.tree.push(a):i[i.length-1].treeNode.children.push(a)},setCurrentState:function(e){var n=t.EXPANDED;return e.forEach(function(e){e.treeNode.state===t.COLLAPSED&&(n=t.COLLAPSED)}),n},sortTree:function(e){e.columns.forEach(function(e){e.sort&&e.sort.ignoreSort&&delete e.sort.ignoreSort}),e.treeBase.tree=l.sortInternal(e,e.treeBase.tree)},sortInternal:function(e,n){var i=n.map(function(e){return e.row});i=s.sort(e,i,e.columns);var o=i.map(function(e){return e.treeNode});return o.forEach(function(n){n.state===t.EXPANDED&&n.children&&n.children.length>0&&(n.children=l.sortInternal(e,n.children))}),o},fixFilter:function(e){var t;e.treeBase.tree.forEach(function(e){e.children&&e.children.length>0&&(t=e.row.visible,l.fixFilterInternal(e.children,t))})},fixFilterInternal:function(e,t){return e.forEach(function(e){e.row.visible&&!t&&(l.setParentsVisible(e),t=!0),e.children&&e.children.length>0&&l.fixFilterInternal(e.children,t&&e.row.visible)&&(t=!0)}),t},setParentsVisible:function(e){for(;e.parentRow;)e.parentRow.visible=!0,e=e.parentRow.treeNode},buildAggregationObject:function(e){var t={col:e};return e.treeAggregation&&e.treeAggregation.type&&(t.type=e.treeAggregation.type),e.treeAggregation&&e.treeAggregation.label&&(t.label=e.treeAggregation.label),t},getAggregations:function(e){var t=[];return e.columns.forEach(function(n){void 0!==n.treeAggregationFn&&(t.push(l.buildAggregationObject(n)),e.options.showColumnFooter&&void 0===n.colDef.aggregationType&&n.treeAggregation&&(n.treeFooterAggregation=l.buildAggregationObject(n),n.aggregationType=l.treeFooterAggregationType))}),t},aggregate:function(e,t,n){0===n.length&&t.treeNode&&t.treeNode.aggregations&&t.treeNode.aggregations.forEach(function(n){if(void 0!==n.col.treeFooterAggregation){var i=e.getCellValue(t,n.col),o=Number(i);n.col.treeAggregationFn(n.col.treeFooterAggregation,i,o,t)}}),n.forEach(function(n,i){n.treeNode.aggregations&&n.treeNode.aggregations.forEach(function(n){var o=e.getCellValue(t,n.col),r=Number(o);n.col.treeAggregationFn(n,o,r,t),0===i&&void 0!==n.col.treeFooterAggregation&&n.col.treeAggregationFn(n.col.treeFooterAggregation,o,r,t)})})},nativeAggregations:function(){return{count:{label:r.get().aggregation.count,menuTitle:r.get().grouping.aggregate_count,aggregationFn:function(e,t,n){void 0===e.value?e.value=1:e.value++}},sum:{label:r.get().aggregation.sum,menuTitle:r.get().grouping.aggregate_sum,aggregationFn:function(e,t,n){isNaN(n)||(void 0===e.value?e.value=n:e.value+=n)}},min:{label:r.get().aggregation.min,menuTitle:r.get().grouping.aggregate_min,aggregationFn:function(e,t,n){void 0===e.value?e.value=t:void 0!==t&&null!==t&&(t<e.value||null===e.value)&&(e.value=t)}},max:{label:r.get().aggregation.max,menuTitle:r.get().grouping.aggregate_max,aggregationFn:function(e,t,n){void 0===e.value?e.value=t:void 0!==t&&null!==t&&(t>e.value||null===e.value)&&(e.value=t)}},avg:{label:r.get().aggregation.avg,menuTitle:r.get().grouping.aggregate_avg,aggregationFn:function(e,t,n){void 0===e.count?e.count=1:e.count++,isNaN(n)||(void 0===e.value||void 0===e.sum?(e.value=n,e.sum=n):(e.sum+=n,e.value=e.sum/e.count))}}}},finaliseAggregation:function(e,t){t.col.treeAggregationUpdateEntity&&void 0!==e&&void 0!==e.entity["$$"+t.col.uid]&&angular.extend(t,e.entity["$$"+t.col.uid]),"function"==typeof t.col.treeAggregationFinalizerFn&&t.col.treeAggregationFinalizerFn(t),"function"==typeof t.col.customTreeAggregationFinalizerFn&&t.col.customTreeAggregationFinalizerFn(t),void 0===t.rendered&&(t.rendered=t.label?t.label+t.value:t.value)},finaliseAggregations:function(e){void 0!==e.treeNode.aggregations&&e.treeNode.aggregations.forEach(function(t){if(l.finaliseAggregation(e,t),t.col.treeAggregationUpdateEntity){var n={};angular.forEach(t,function(e,i){t.hasOwnProperty(i)&&"col"!==i&&(n[i]=e)}),e.entity["$$"+t.col.uid]=n}})},treeFooterAggregationType:function(e,t){return l.finaliseAggregation(void 0,t.treeFooterAggregation),void 0===t.treeFooterAggregation.value||null===t.treeFooterAggregation.rendered?"":t.treeFooterAggregation.rendered}};return l}]),e.directive("uiGridTreeBaseRowHeaderButtons",["$templateCache","uiGridTreeBaseService",function(e,t){return{replace:!0,restrict:"E",template:e.get("ui-grid/treeBaseRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(e,n,i,o){var r=o.grid;e.treeButtonClick=function(e,n){t.toggleRowTreeState(r,e,n)}}}}]),e.directive("uiGridTreeBaseExpandAllButtons",["$templateCache","uiGridTreeBaseService",function(e,t){return{replace:!0,restrict:"E",template:e.get("ui-grid/treeBaseExpandAllButtons"),scope:!1,link:function(e,n,i,o){var r=e.col.grid;e.headerButtonClick=function(e,n){r.treeBase.expandAll?t.collapseAllRows(r,n):t.expandAllRows(r,n)}}}}]),e.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(e,t,n,i){return{priority:-200,scope:!1,compile:function(e,t){var n=angular.element(e.children().children()[0]),i=n.attr("ng-class"),o="";return o=i?i.slice(0,-1)+",'ui-grid-tree-header-row': row.treeLevel > -1}":"{'ui-grid-tree-header-row': row.treeLevel > -1}",n.attr("ng-class",o),{pre:function(e,t,n,i){},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.treeView",["ui.grid","ui.grid.treeBase"]);e.constant("uiGridTreeViewConstants",{featureName:"treeView",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),e.service("uiGridTreeViewService",["$q","uiGridTreeViewConstants","uiGridTreeBaseConstants","uiGridTreeBaseService","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants",function(e,t,n,i,o,r,a,s,l){var c={initializeGrid:function(e,t){i.initializeGrid(e,t),e.treeView={},e.registerRowsProcessor(c.adjustSorting,60);var n={events:{treeView:{}},methods:{treeView:{}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods)},defaultGridOptions:function(e){e.enableTreeView=!1!==e.enableTreeView},adjustSorting:function(e){return this.columns.forEach(function(e){e.sort&&(e.sort.ignoreSort=!0)}),e}};return c}]),e.directive("uiGridTreeView",["uiGridTreeViewConstants","uiGridTreeViewService","$templateCache",function(e,t,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){!1!==o.grid.options.enableTreeView&&t.initializeGrid(o.grid,e)},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.validate",["ui.grid"]);e.service("uiGridValidateService",["$sce","$q","$http","i18nService","uiGridConstants",function(e,t,n,i,o){var r={validatorFactories:{},setExternalFactoryFunction:function(e){r.externalFactoryFunction=e},clearExternalFactory:function(){delete r.externalFactoryFunction},getValidatorFromExternalFactory:function(e,t){return r.externalFactoryFunction(e,t).validatorFactory(t)},getMessageFromExternalFactory:function(e,t){return r.externalFactoryFunction(e,t).messageFunction(t)},setValidator:function(e,t,n){r.validatorFactories[e]={validatorFactory:t,messageFunction:n}},getValidator:function(e,t){if(r.externalFactoryFunction){var n=r.getValidatorFromExternalFactory(e,t);if(n)return n}if(!r.validatorFactories[e])throw"Invalid validator name: "+e;return r.validatorFactories[e].validatorFactory(t)},getMessage:function(e,t){if(r.externalFactoryFunction){var n=r.getMessageFromExternalFactory(e,t);if(n)return n}return r.validatorFactories[e].messageFunction(t)},isInvalid:function(e,t){return e["$$invalid"+t.name]},setInvalid:function(e,t){e["$$invalid"+t.name]=!0},setValid:function(e,t){delete e["$$invalid"+t.name]},setError:function(e,t,n){e["$$errors"+t.name]||(e["$$errors"+t.name]={}),e["$$errors"+t.name][n]=!0},clearError:function(e,t,n){e["$$errors"+t.name]&&n in e["$$errors"+t.name]&&delete e["$$errors"+t.name][n]},getErrorMessages:function(e,t){var n=[];return e["$$errors"+t.name]&&0!==Object.keys(e["$$errors"+t.name]).length?(Object.keys(e["$$errors"+t.name]).sort().forEach(function(e){n.push(r.getMessage(e,t.validators[e]))}),n):n},getFormattedErrors:function(t,n){var o="",a=r.getErrorMessages(t,n);if(a.length)return a.forEach(function(e){o+=e+"<br/>"}),e.trustAsHtml("<p><b>"+i.getSafeText("validate.error")+"</b></p>"+o)},getTitleFormattedErrors:function(t,n){var o="\n",a="",s=r.getErrorMessages(t,n);if(s.length)return s.forEach(function(e){a+=e+o}),e.trustAsHtml(i.getSafeText("validate.error")+o+a)},runValidators:function(e,n,i,o,a){if(i!==o){if(void 0===n.name||!n.name)throw new Error("colDef.name is required to perform validation");r.setValid(e,n);var s=function(e,t,n){return function(s){s||(r.setInvalid(e,t),r.setError(e,t,n),a&&a.api.validate.raise.validationFailed(e,t,i,o))}};for(var l in n.validators){r.clearError(e,n,l);var c=r.getValidator(l,n.validators[l]);t.when(c(o,i,e,n)).then(s(e,n,l))}}},createDefaultValidators:function(){r.setValidator("minLength",function(e){return function(t,n,i,o){return void 0===n||null===n||""===n||n.length>=e}},function(e){return i.getSafeText("validate.minLength").replace("THRESHOLD",e)}),r.setValidator("maxLength",function(e){return function(t,n,i,o){return void 0===n||null===n||""===n||n.length<=e}},function(e){return i.getSafeText("validate.maxLength").replace("THRESHOLD",e)}),r.setValidator("required",function(e){return function(t,n,i,o){return!e||!(void 0===n||null===n||""===n)}},function(e){return i.getSafeText("validate.required")})},initializeGrid:function(e,t){t.validate={isInvalid:r.isInvalid,getFormattedErrors:r.getFormattedErrors,getTitleFormattedErrors:r.getTitleFormattedErrors,runValidators:r.runValidators};var n={events:{validate:{validationFailed:function(e,t,n,i){}}},methods:{validate:{isInvalid:function(e,n){return t.validate.isInvalid(e,n)},getErrorMessages:function(e,n){return t.validate.getErrorMessages(e,n)},getFormattedErrors:function(e,n){return t.validate.getFormattedErrors(e,n)},getTitleFormattedErrors:function(e,n){return t.validate.getTitleFormattedErrors(e,n)}}}};t.api.registerEventsFromObject(n.events),t.api.registerMethodsFromObject(n.methods),t.edit&&t.api.edit.on.afterCellEdit(e,function(e,n,i,o){t.validate.runValidators(e,n,i,o,t)}),r.createDefaultValidators()}};return r}]),e.directive("uiGridValidate",["gridUtil","uiGridValidateService",function(e,t){return{priority:0,replace:!0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){t.initializeGrid(e,o.grid)},post:function(e,t,n,i){}}}}}])}(),angular.module("ui.grid").run(["$templateCache",function(e){e.put("ui-grid/ui-grid-filter",'<div class="ui-grid-filter-container" ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><div ng-if="colFilter.type !== \'select\'"><input type="text" class="ui-grid-filter-input ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}" aria-label="{{colFilter.ariaLabel || aria.defaultFilterLabel}}"><div role="button" class="ui-grid-filter-button" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term !== null && colFilter.term !== \'\'"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div><div ng-if="colFilter.type === \'select\'"><select class="ui-grid-filter-select ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || aria.defaultFilterLabel}}" aria-label="{{colFilter.ariaLabel || \'\'}}" ng-options="option.value as option.label for option in colFilter.selectOptions"><option value=""></option></select><div role="button" class="ui-grid-filter-button-select" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div></div>'),e.put("ui-grid/ui-grid-footer",'<div class="ui-grid-footer-panel ui-grid-footer-aggregates-row">\x3c!-- tfooter --\x3e<div class="ui-grid-footer ui-grid-footer-viewport"><div class="ui-grid-footer-canvas"><div class="ui-grid-footer-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-footer-cell-row"><div ui-grid-footer-cell role="gridcell" ng-repeat="col in colContainer.renderedColumns track by col.uid" col="col" render-index="$index" class="ui-grid-footer-cell ui-grid-clearfix"></div></div></div></div></div></div>'),e.put("ui-grid/ui-grid-grid-footer",'<div class="ui-grid-footer-info ui-grid-grid-footer"><span>{{\'search.totalItems\' | t}} {{grid.rows.length}}</span> <span ng-if="grid.renderContainers.body.visibleRowCache.length !== grid.rows.length" class="ngLabel">({{"search.showingItems" | t}} {{grid.renderContainers.body.visibleRowCache.length}})</span></div>'),e.put("ui-grid/ui-grid-group-panel",'<div class="ui-grid-group-panel"><div ui-t="groupPanel.description" class="description" ng-show="groupings.length == 0"></div><ul ng-show="groupings.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}} <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span> <span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div>'),e.put("ui-grid/ui-grid-header",'<div role="rowgroup" class="ui-grid-header">\x3c!-- theader --\x3e<div class="ui-grid-top-panel"><div class="ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div class="ui-grid-header-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-header-cell-row"><div class="ui-grid-header-cell ui-grid-clearfix" ng-repeat="col in colContainer.renderedColumns track by col.uid" ui-grid-header-cell col="col" render-index="$index"></div></div></div></div></div></div></div>'),e.put("ui-grid/ui-grid-menu-button",'<div class="ui-grid-menu-button"><div role="button" ui-grid-one-bind-id-grid="\'grid-menu\'" class="ui-grid-icon-container" ng-click="toggleMenu()" aria-haspopup="true"><i class="ui-grid-icon-menu" ui-grid-one-bind-aria-label="i18n.aria.buttonLabel">&nbsp;</i></div><div ui-grid-menu menu-items="menuItems"></div></div>'),e.put("ui-grid/ui-grid-no-header",'<div class="ui-grid-top-panel"></div>'),e.put("ui-grid/ui-grid-row","<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.uid\" ui-grid-one-bind-id-grid=\"rowRenderIndex + '-' + col.uid + '-cell'\" class=\"ui-grid-cell\" ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader }\" role=\"{{col.isRowHeader ? 'rowheader' : 'gridcell'}}\" ui-grid-cell></div>"),e.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid">\x3c!-- TODO (c0bra): add "scoped" attr here, eventually? --\x3e<style ui-grid-style>.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ ((grid.getTotalRowHeight() < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    /*\n    .ui-grid[dir=rtl] .ui-grid-viewport {\n      padding-left: {{ grid.verticalScrollbarWidth }}px;\n    }\n    */\n\n    {{ grid.customStyles }}</style><div class="ui-grid-contents-wrapper"><div ui-grid-menu-button ng-if="grid.options.enableGridMenu"></div><div ng-if="grid.hasLeftContainer()" style="width: 0" ui-grid-pinned-container="\'left\'"></div><div ui-grid-render-container container-id="\'body\'" col-container-name="\'body\'" row-container-name="\'body\'" bind-scroll-horizontal="true" bind-scroll-vertical="true" enable-horizontal-scrollbar="grid.options.enableHorizontalScrollbar" enable-vertical-scrollbar="grid.options.enableVerticalScrollbar"></div><div ng-if="grid.hasRightContainer()" style="width: 0" ui-grid-pinned-container="\'right\'"></div><div ui-grid-grid-footer ng-if="grid.options.showGridFooter"></div><div ui-grid-column-menu ng-if="grid.options.enableColumnMenus"></div><div ng-transclude></div></div></div>'),e.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>'),e.put("ui-grid/uiGridColumnMenu",'<div class="ui-grid-column-menu"><div ui-grid-menu menu-items="menuItems">\x3c!-- <div class="ui-grid-column-menu">\n    <div class="inner" ng-show="menuShown">\n      <ul>\n        <div ng-show="grid.options.enableSorting">\n          <li ng-click="sortColumn($event, asc)" ng-class="{ \'selected\' : col.sort.direction == asc }"><i class="ui-grid-icon-sort-alt-up"></i> Sort Ascending</li>\n          <li ng-click="sortColumn($event, desc)" ng-class="{ \'selected\' : col.sort.direction == desc }"><i class="ui-grid-icon-sort-alt-down"></i> Sort Descending</li>\n          <li ng-show="col.sort.direction" ng-click="unsortColumn()"><i class="ui-grid-icon-cancel"></i> Remove Sort</li>\n        </div>\n      </ul>\n    </div>\n  </div> --\x3e</div></div>'),e.put("ui-grid/uiGridFooterCell",'<div class="ui-grid-cell-contents" col-index="renderIndex"><div>{{ col.getAggregationText() + ( col.getAggregationValue() CUSTOM_FILTERS ) }}</div></div>'),e.put("ui-grid/uiGridHeaderCell",'<div role="columnheader" ng-class="{ \'sortable\': sortable }" ui-grid-one-bind-aria-labelledby-grid="col.uid + \'-header-text \' + col.uid + \'-sortdir-text\'" aria-sort="{{col.sort.direction == asc ? \'ascending\' : ( col.sort.direction == desc ? \'descending\' : (!col.sort.direction ? \'none\' : \'other\'))}}"><div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus" col-index="renderIndex" title="TOOLTIP"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'">{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{isSortPriorityVisible() ? i18n.headerCell.priority + \' \' + ( col.sort.priority + 1 )  : null}}" aria-hidden="true"></i> <sub ui-grid-visible="isSortPriorityVisible()" class="ui-grid-sort-priority-number">{{col.sort.priority + 1}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>'),e.put("ui-grid/uiGridMenu",'<div class="ui-grid-menu" ng-if="shown"><style ui-grid-style>{{dynamicStyles}}</style><div class="ui-grid-menu-mid" ng-show="shownMid"><div class="ui-grid-menu-inner"><ul role="menu" class="ui-grid-menu-items"><li ng-repeat="item in menuItems" role="menuitem" ui-grid-menu-item ui-grid-one-bind-id="\'menuitem-\'+$index" action="item.action" name="item.title" active="item.active" icon="item.icon" shown="item.shown" context="item.context" template-url="item.templateUrl" leave-open="item.leaveOpen" screen-reader-only="item.screenReaderOnly"></li></ul></div></div></div>'),e.put("ui-grid/uiGridMenuItem",'<button type="button" class="ui-grid-menu-item" ng-click="itemAction($event, title)" ng-show="itemShown()" ng-class="{ \'ui-grid-menu-item-active\': active(), \'ui-grid-sr-only\': (!focus && screenReaderOnly) }" aria-pressed="{{active()}}" tabindex="0" ng-focus="focus=true" ng-blur="focus=false"><i ng-class="icon" aria-hidden="true">&nbsp;</i> {{ name }}</button>'),e.put("ui-grid/uiGridRenderContainer","<div role=\"grid\" ui-grid-one-bind-id-grid=\"'grid-container'\" class=\"ui-grid-render-container\" ng-style=\"{ 'margin-left': colContainer.getMargin('left') + 'px', 'margin-right': colContainer.getMargin('right') + 'px' }\">\x3c!-- All of these dom elements are replaced in place --\x3e<div ui-grid-header></div><div ui-grid-viewport></div><div ng-if=\"colContainer.needsHScrollbarPlaceholder()\" class=\"ui-grid-scrollbar-placeholder\" ng-style=\"{height:colContainer.grid.scrollbarHeight + 'px'}\"></div><ui-grid-footer ng-if=\"grid.options.showColumnFooter\"></ui-grid-footer></div>"),e.put("ui-grid/uiGridViewport",'<div role="rowgroup" class="ui-grid-viewport" ng-style="colContainer.getViewportStyle()">\x3c!-- tbody --\x3e<div class="ui-grid-canvas"><div ng-repeat="(rowRenderIndex, row) in rowContainer.renderedRows track by $index" class="ui-grid-row" ng-style="Viewport.rowStyle(rowRenderIndex)"><div role="row" ui-grid-row="row" row-render-index="rowRenderIndex"></div></div></div></div>'),e.put("ui-grid/cellEditor",'<div><form name="inputForm"><input type="INPUT_TYPE" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></form></div>'),e.put("ui-grid/dropdownEditor",'<div><form name="inputForm"><select ng-class="\'colt\' + col.uid" ui-grid-edit-dropdown ng-model="MODEL_COL_FIELD" ng-options="field[editDropdownIdLabel] as field[editDropdownValueLabel] CUSTOM_FILTERS for field in editDropdownOptionsArray"></select></form></div>'),e.put("ui-grid/fileChooserEditor",'<div><form name="inputForm"><input ng-class="\'colt\' + col.uid" ui-grid-edit-file-chooser type="file" id="files" name="files[]" ng-model="MODEL_COL_FIELD"></form></div>'),e.put("ui-grid/expandableRow",'<div ui-grid-expandable-row ng-if="expandableRow.shouldRenderExpand()" class="expandableRow" style="float:left; margin-top: 1px; margin-bottom: 1px" ng-style="{width: (grid.renderContainers.body.getCanvasWidth()) + \'px\', height: row.expandedRowHeight + \'px\'}"></div>'),e.put("ui-grid/expandableRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !row.isExpanded, \'ui-grid-icon-minus-squared\' : row.isExpanded }" ng-click="grid.api.expandable.toggleRowExpansion(row.entity)"></i></div></div>'),e.put("ui-grid/expandableScrollFiller","<div ng-if=\"expandableRow.shouldRenderFiller()\" ng-class=\"{scrollFiller:true, scrollFillerClass:(colContainer.name === 'body')}\" ng-style=\"{ width: (grid.getViewportWidth()) + 'px', height: row.expandedRowHeight + 2 + 'px', 'margin-left': grid.options.rowHeader.rowHeaderWidth + 'px' }\"><i class=\"ui-grid-icon-spin5 ui-grid-animate-spin\" ng-style=\"{'margin-top': ( row.expandedRowHeight/2 - 5) + 'px', 'margin-left' : ((grid.getViewportWidth() - grid.options.rowHeader.rowHeaderWidth)/2 - 5) + 'px'}\"></i></div>"),e.put("ui-grid/expandableTopRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !grid.expandable.expandedAll, \'ui-grid-icon-minus-squared\' : grid.expandable.expandedAll }" ng-click="grid.api.expandable.toggleAllRows()"></i></div></div>'),e.put("ui-grid/csvLink",'<span class="ui-grid-exporter-csv-link-span"><a href="data:text/csv;charset=UTF-8,CSV_CONTENT" download="FILE_NAME">LINK_LABEL</a></span>'),e.put("ui-grid/importerMenuItem",'<li class="ui-grid-menu-item"><form><input class="ui-grid-importer-file-chooser" type="file" id="files" name="files[]"></form></li>'),e.put("ui-grid/importerMenuItemContainer","<div ui-grid-importer-menu-item></div>"),e.put("ui-grid/pagination",'<div role="contentinfo" class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"><div role="navigation" class="ui-grid-pager-container"><div role="menubar" class="ui-grid-pager-control"><button type="button" role="menuitem" class="ui-grid-pager-first" ui-grid-one-bind-title="aria.pageToFirst" ui-grid-one-bind-aria-label="aria.pageToFirst" ng-click="pageFirstPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle\' : \'first-triangle\'"><div ng-class="grid.isRTL() ? \'last-bar-rtl\' : \'first-bar\'"></div></div></button> <button type="button" role="menuitem" class="ui-grid-pager-previous" ui-grid-one-bind-title="aria.pageBack" ui-grid-one-bind-aria-label="aria.pageBack" ng-click="pagePreviousPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle prev-triangle\' : \'first-triangle prev-triangle\'"></div></button> <input type="number" ui-grid-one-bind-title="aria.pageSelected" ui-grid-one-bind-aria-label="aria.pageSelected" class="ui-grid-pager-control-input" ng-model="grid.options.paginationCurrentPage" min="1" max="{{ paginationApi.getTotalPages() }}" required> <span class="ui-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0"><abbr ui-grid-one-bind-title="paginationOf">/</abbr> {{ paginationApi.getTotalPages() }}</span> <button type="button" role="menuitem" class="ui-grid-pager-next" ui-grid-one-bind-title="aria.pageForward" ui-grid-one-bind-aria-label="aria.pageForward" ng-click="pageNextPageClick()" ng-disabled="cantPageForward()"><div ng-class="grid.isRTL() ? \'first-triangle next-triangle\' : \'last-triangle next-triangle\'"></div></button> <button type="button" role="menuitem" class="ui-grid-pager-last" ui-grid-one-bind-title="aria.pageToLast" ui-grid-one-bind-aria-label="aria.pageToLast" ng-click="pageLastPageClick()" ng-disabled="cantPageToLast()"><div ng-class="grid.isRTL() ? \'first-triangle\' : \'last-triangle\'"><div ng-class="grid.isRTL() ? \'first-bar-rtl\' : \'last-bar\'"></div></div></button></div><div class="ui-grid-pager-row-count-picker" ng-if="grid.options.paginationPageSizes.length > 1"><select ui-grid-one-bind-aria-labelledby-grid="\'items-per-page-label\'" ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span ui-grid-one-bind-id-grid="\'items-per-page-label\'" class="ui-grid-pager-row-count-label">&nbsp;{{sizesLabel}}</span></div><span ng-if="grid.options.paginationPageSizes.length <= 1" class="ui-grid-pager-row-count-label">{{grid.options.paginationPageSize}}&nbsp;{{sizesLabel}}</span></div><div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"><span ng-show="grid.options.totalItems > 0">{{showingLow}} <abbr ui-grid-one-bind-title="paginationThrough">-</abbr> {{showingHigh}} {{paginationOf}} {{grid.options.totalItems}} {{totalItemsLabel}}</span></div></div></div>'),e.put("ui-grid/columnResizer",'<div ui-grid-column-resizer ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex" unselectable="on"></div>'),e.put("ui-grid/gridFooterSelectedItems",'<span ng-if="grid.selection.selectedCount !== 0 && grid.options.enableFooterTotalSelected">({{"search.selectedItems" | t}} {{grid.selection.selectedCount}})</span>'),e.put("ui-grid/selectionHeaderCell",'<div>\x3c!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --\x3e<div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-selection-select-all-buttons ng-if="grid.options.enableSelectAll"></ui-grid-selection-select-all-buttons></div></div>'),e.put("ui-grid/selectionRowHeader",'<div class="ui-grid-disable-selection"><div class="ui-grid-cell-contents"><ui-grid-selection-row-header-buttons></ui-grid-selection-row-header-buttons></div></div>'),e.put("ui-grid/selectionRowHeaderButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ng-click="selectButtonClick(row, $event)">&nbsp;</div>'),e.put("ui-grid/selectionSelectAllButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-all-selected\': grid.selection.selectAll}" ng-click="headerButtonClick($event)"></div>'),e.put("ui-grid/treeBaseExpandAllButtons",'<div class="ui-grid-tree-base-row-header-buttons" ng-class="{\'ui-grid-icon-minus-squared\': grid.treeBase.numberLevels > 0 && grid.treeBase.expandAll, \'ui-grid-icon-plus-squared\': grid.treeBase.numberLevels > 0 && !grid.treeBase.expandAll}" ng-click="headerButtonClick($event)"></div>'),e.put("ui-grid/treeBaseHeaderCell",'<div><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-tree-base-expand-all-buttons ng-if="grid.options.enableExpandAll"></ui-grid-tree-base-expand-all-buttons></div></div>'),e.put("ui-grid/treeBaseRowHeader",'<div class="ui-grid-cell-contents"><ui-grid-tree-base-row-header-buttons></ui-grid-tree-base-row-header-buttons></div>'),e.put("ui-grid/treeBaseRowHeaderButtons","<div class=\"ui-grid-tree-base-row-header-buttons\" ng-class=\"{'ui-grid-tree-base-header': row.treeLevel > -1 }\" ng-click=\"treeButtonClick(row, $event)\"><i ng-class=\"{'ui-grid-icon-minus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'expanded', 'ui-grid-icon-plus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'collapsed'}\" ng-style=\"{'padding-left': grid.options.treeIndent * row.treeLevel + 'px'}\"></i> &nbsp;</div>"),e.put("ui-grid/cellTitleValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" title="{{grid.validate.getTitleFormattedErrors(row.entity,col.colDef)}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'),e.put("ui-grid/cellTooltipValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" tooltip-html-unsafe="{{grid.validate.getFormattedErrors(row.entity,col.colDef)}}" tooltip-enable="grid.validate.isInvalid(row.entity,col.colDef)" tooltip-append-to-body="true" tooltip-placement="top" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>')}]),function(){angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){angular.module("ui.grid").constant("uiGridConstants",{LOG_DEBUG_MESSAGES:!0,LOG_WARN_MESSAGES:!0,LOG_ERROR_MESSAGES:!0,CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,MODEL_COL_FIELD:/MODEL_COL_FIELD/g,TOOLTIP:/title=\"TOOLTIP\"/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,FUNC_REGEXP:/(\([^)]*\))?$/,DOT_REGEXP:/\./g,APOS_REGEXP:/'/g,BRACKET_REGEXP:/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/,COL_CLASS_PREFIX:"ui-grid-col",events:{GRID_SCROLL:"uiGridScroll",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart",COLUMN_HEADER_CLICK:"uiGridColumnHeaderClick"},keymap:{TAB:9,STRG:17,CAPSLOCK:20,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,PG_UP:33,PG_DOWN:34,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512,SELECT:"select",INPUT:"input"},aggregationTypes:{sum:2,count:4,avg:8,min:16,max:32},CURRENCY_SYMBOLS:["Æ","$","Â£","$","Â¤","Â¥","á","â©","â±","à¸¿","â«"],scrollDirection:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},dataChange:{ALL:"all",EDIT:"edit",ROW:"row",COLUMN:"column",OPTIONS:"options"},scrollbars:{NEVER:0,ALWAYS:1}})}(),angular.module("ui.grid").directive("uiGridCell",["$compile","$parse","gridUtil","uiGridConstants",function(e,t,n,i){return{priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function(t,o,r,a){function s(){(0,t.col.compiledElementFn)(t,function(e,t){o.append(e)})}if(a&&t.col.compiledElementFn)s();else if(a&&!t.col.compiledElementFn)t.col.getCompiledElementFn().then(function(e){e(t,function(e,t){o.append(e)})});else{var l=t.col.cellTemplate.replace(i.MODEL_COL_FIELD,"row.entity."+n.preEval(t.col.field)).replace(i.COL_FIELD,"grid.getCellValue(row, col)"),c=e(l)(t);o.append(c)}},post:function(e,t,n,o){var r=e.col.getColClass(!1);t.addClass(r);var a,s=function(n){var i=t;a&&(i.removeClass(a),a=null),a=angular.isFunction(e.col.cellClass)?e.col.cellClass(e.grid,e.row,e.col,e.rowRenderIndex,e.colRenderIndex):e.col.cellClass,i.addClass(a)};e.col.cellClass&&s();var l=e.grid.registerDataChangeCallback(s,[i.dataChange.COLUMN,i.dataChange.EDIT]),c=function(n,i){if(n!==i){(a||e.col.cellClass)&&s();var o=e.col.getColClass(!1);o!==r&&(t.removeClass(r),t.addClass(o),r=o)}},d=e.$watch("row",c),u=function(){l(),d()};e.$on("$destroy",u),t.on("$destroy",u)}}}}}]),function(){angular.module("ui.grid").service("uiGridColumnMenuService",["i18nService","uiGridConstants","gridUtil",function(e,t,n){var i={initialize:function(e,t){e.grid=t.grid,t.columnMenuScope=e,e.menuShown=!1},setColMenuItemWatch:function(e){var t=e.$watch("col.menuItems",function(t){void 0!==t&&t&&angular.isArray(t)?(t.forEach(function(t){void 0!==t.context&&t.context||(t.context={}),t.context.col=e.col}),e.menuItems=e.defaultMenuItems.concat(t)):e.menuItems=e.defaultMenuItems});e.$on("$destroy",t)},sortable:function(e){return!!(e.grid.options.enableSorting&&void 0!==e.col&&e.col&&e.col.enableSorting)},isActiveSort:function(e,t){return void 0!==e.col&&void 0!==e.col.sort&&void 0!==e.col.sort.direction&&e.col.sort.direction===t},suppressRemoveSort:function(e){return!(!e.col||!e.col.suppressRemoveSort)},hideable:function(e){return void 0===e.col||!e.col||!e.col.colDef||!1!==e.col.colDef.enableHiding},getDefaultMenuItems:function(n){return[{title:e.getSafeText("sort.ascending"),icon:"ui-grid-icon-sort-alt-up",action:function(e){e.stopPropagation(),n.sortColumn(e,t.ASC)},shown:function(){return i.sortable(n)},active:function(){return i.isActiveSort(n,t.ASC)}},{title:e.getSafeText("sort.descending"),icon:"ui-grid-icon-sort-alt-down",action:function(e){e.stopPropagation(),n.sortColumn(e,t.DESC)},shown:function(){return i.sortable(n)},active:function(){return i.isActiveSort(n,t.DESC)}},{title:e.getSafeText("sort.remove"),icon:"ui-grid-icon-cancel",action:function(e){e.stopPropagation(),n.unsortColumn()},shown:function(){return i.sortable(n)&&void 0!==n.col&&void 0!==n.col.sort&&void 0!==n.col.sort.direction&&null!==n.col.sort.direction&&!i.suppressRemoveSort(n)}},{title:e.getSafeText("column.hide"),icon:"ui-grid-icon-cancel",shown:function(){return i.hideable(n)},action:function(e){e.stopPropagation(),n.hideColumn()}}]},getColumnElementPosition:function(e,t,i){var o={};return o.left=i[0].offsetLeft,o.top=i[0].offsetTop,o.parentLeft=i[0].offsetParent.offsetLeft,o.offset=0,t.grid.options.offsetLeft&&(o.offset=t.grid.options.offsetLeft),o.height=n.elementHeight(i,!0),o.width=n.elementWidth(i,!0),o},repositionMenu:function(e,t,i,o,r){var a=o[0].querySelectorAll(".ui-grid-menu"),s=n.closestElm(r,".ui-grid-render-container"),l=s.getBoundingClientRect().left-e.grid.element[0].getBoundingClientRect().left,c=s.querySelectorAll(".ui-grid-viewport")[0].scrollLeft,d=t.lastMenuWidth?t.lastMenuWidth:e.lastMenuWidth?e.lastMenuWidth:170,u=t.lastMenuPaddingRight?t.lastMenuPaddingRight:e.lastMenuPaddingRight?e.lastMenuPaddingRight:10;if(0!==a.length){var p=a[0].querySelectorAll(".ui-grid-menu-mid");0===p.length||angular.element(p).hasClass("ng-hide")||(d=n.elementWidth(a,!0),e.lastMenuWidth=d,t.lastMenuWidth=d,u=parseInt(n.getStyles(angular.element(a)[0]).paddingRight,10),e.lastMenuPaddingRight=u,t.lastMenuPaddingRight=u)}var g=i.left+l-c+i.parentLeft+i.width-d+u;g<i.offset&&(g=i.offset),o.css("left",g+"px"),o.css("top",i.top+i.height+"px")}};return i}]).directive("uiGridColumnMenu",["$timeout","gridUtil","uiGridConstants","uiGridColumnMenuService","$document",function(e,t,n,i,o){return{priority:0,scope:!0,require:"^uiGrid",templateUrl:"ui-grid/uiGridColumnMenu",replace:!0,link:function(r,a,s,l){i.initialize(r,l),r.defaultMenuItems=i.getDefaultMenuItems(r),r.menuItems=r.defaultMenuItems,i.setColMenuItemWatch(r),r.showMenu=function(e,t,n){r.col=e;var o=i.getColumnElementPosition(r,e,t);r.menuShown?(r.colElement=t,r.colElementPosition=o,r.hideThenShow=!0,r.$broadcast("hide-menu",{originalEvent:n})):(r.menuShown=!0,i.repositionMenu(r,e,o,a,t),r.colElement=t,r.colElementPosition=o,r.$broadcast("show-menu",{originalEvent:n}))},r.hideMenu=function(e){r.menuShown=!1,e||r.$broadcast("hide-menu")},r.$on("menu-hidden",function(){r.hideThenShow?(delete r.hideThenShow,i.repositionMenu(r,r.col,r.colElementPosition,a,r.colElement),r.$broadcast("show-menu"),r.menuShown=!0):(r.hideMenu(!0),r.col&&t.focus.bySelector(o,".ui-grid-header-cell."+r.col.getColClass()+" .ui-grid-column-menu-button",r.col.grid,!1))}),r.$on("menu-shown",function(){e(function(){i.repositionMenu(r,r.col,r.colElementPosition,a,r.colElement),t.focus.bySelector(o,".ui-grid-menu-items .ui-grid-menu-item",!0),delete r.colElementPosition,delete r.columnElement},200)}),r.sortColumn=function(e,t){e.stopPropagation(),r.grid.sortColumn(r.col,t,!0).then(function(){r.grid.refresh(),r.hideMenu()})},r.unsortColumn=function(){r.col.unsort(),r.grid.refresh(),r.hideMenu()};var c=function(){e(function(){var e,n=function(){return t.focus.byId("grid-menu",r.grid)};r.grid.columns.some(function(t,n){if(angular.equals(t,r.col))return e=n,!0});var i;if(r.grid.columns.some(function(t,n){if(!t.visible)return!1;if(n<e)i=t;else{if(n>e&&!i)return i=t,!0;if(n>e&&i)return!0}}),i){var a=i.getColClass();t.focus.bySelector(o,".ui-grid-header-cell."+a+" .ui-grid-header-cell-primary-focus",!0).then(angular.noop,function(e){if("canceled"!==e)return n()})}else n()})};r.hideColumn=function(){r.col.colDef.visible=!1,r.col.visible=!1,r.grid.queueGridRefresh(),r.hideMenu(),r.grid.api.core.notifyDataChange(n.dataChange.COLUMN),r.grid.api.core.raise.columnVisibilityChanged(r.col),c()}},controller:["$scope",function(e){var t=this;e.$watch("menuItems",function(e){t.menuItems=e})}]}}])}(),function(){angular.module("ui.grid").directive("uiGridFilter",["$compile","$templateCache","i18nService","gridUtil",function(e,t,n,i){return{compile:function(){return{pre:function(t,n,i,o){t.col.updateFilters=function(i){if(n.children().remove(),i){var o=t.col.filterHeaderTemplate;n.append(e(o)(t))}},t.$on("$destroy",function(){delete t.col.updateFilters})},post:function(e,t,o,r){e.aria=n.getSafeText("headerCell.aria"),e.removeFilter=function(e,n){e.term=null,i.focus.bySelector(t,".ui-grid-filter-input-"+n)}}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridFooterCell",["$timeout","gridUtil","uiGridConstants","$compile",function(e,t,n,i){return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},replace:!0,require:"^uiGrid",compile:function(e,t,o){return{pre:function(e,t,n,o){var r=i(e.col.footerCellTemplate)(e);t.append(r)},post:function(e,t,i,o){e.grid=o.grid;var r=e.col.getColClass(!1);t.addClass(r);var a,s=function(n){var i=t;a&&(i.removeClass(a),a=null),a=angular.isFunction(e.col.footerCellClass)?e.col.footerCellClass(e.grid,e.row,e.col,e.rowRenderIndex,e.colRenderIndex):e.col.footerCellClass,i.addClass(a)};e.col.footerCellClass&&s(),e.col.updateAggregationValue();var l=e.grid.registerDataChangeCallback(s,[n.dataChange.COLUMN]);e.grid.api.core.on.rowsRendered(e,e.col.updateAggregationValue),e.grid.api.core.on.rowsRendered(e,s),e.$on("$destroy",l)}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(e,t,n,i,o){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(e,n){return{pre:function(e,n,o,r){var a=r[0],s=r[1];e.grid=a.grid,e.colContainer=s.colContainer,s.footer=n;var l=e.grid.options.footerTemplate;i.getTemplate(l).then(function(i){var o=angular.element(i),r=t(o)(e);if(n.append(r),s){var a=n[0].getElementsByClassName("ui-grid-footer-viewport")[0];a&&(s.footerViewport=a)}})},post:function(e,t,n,o){var r=o[0],a=o[1];r.grid;i.disableAnimations(t),a.footer=t;var s=t[0].getElementsByClassName("ui-grid-footer-viewport")[0];s&&(a.footerViewport=s)}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(e,t,n,i,o){return{restrict:"EA",replace:!0,require:"^uiGrid",scope:!0,compile:function(e,n){return{pre:function(e,n,o,r){e.grid=r.grid;var a=e.grid.options.gridFooterTemplate;i.getTemplate(a).then(function(i){var o=angular.element(i),r=t(o)(e);n.append(r)})},post:function(e,t,n,i){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridGroupPanel",["$compile","uiGridConstants","gridUtil",function(e,t,n){return{restrict:"EA",replace:!0,require:"?^uiGrid",scope:!1,compile:function(t,i){return{pre:function(t,i,o,r){var a=t.grid.options.groupPanelTemplate||"ui-grid/ui-grid-group-panel";n.getTemplate(a).then(function(n){var o=angular.element(n),r=e(o)(t);i.append(r)})},post:function(e,t,n,i){t.bind("$destroy",function(){})}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridHeaderCell",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","ScrollEvent","i18nService",function(e,t,n,i,o,r,a,s){var l=500,c=500;return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:["^uiGrid","^uiGridRenderContainer"],replace:!0,compile:function(){return{pre:function(t,n,i){var o=e(t.col.headerCellTemplate)(t);n.append(o)},post:function(e,n,o,a){var d=a[0],u=a[1];e.i18n={headerCell:s.getSafeText("headerCell"),sort:s.getSafeText("sort")},e.isSortPriorityVisible=function(){return angular.isNumber(e.col.sort.priority)&&e.grid.columns.some(function(t,n){return angular.isNumber(t.sort.priority)&&t!==e.col})},e.getSortDirectionAriaLabel=function(){var t=e.col,n=t.sort.direction===r.ASC?e.i18n.sort.ascending:t.sort.direction===r.DESC?e.i18n.sort.descending:e.i18n.sort.none,i=n;return e.isSortPriorityVisible()&&(i=i+". "+e.i18n.headerCell.priority+" "+t.sort.priority),i},e.grid=d.grid,e.renderContainer=d.grid.renderContainers[u.containerId];var p=e.col.getColClass(!1);n.addClass(p),e.menuShown=!1,e.asc=r.ASC,e.desc=r.DESC;var g,m,f=(angular.element(n[0].querySelectorAll(".ui-grid-header-cell-menu")),angular.element(n[0].querySelectorAll(".ui-grid-cell-contents"))),h=[];e.downFn=function(o){o.stopPropagation(),void 0!==o.originalEvent&&void 0!==o.originalEvent&&(o=o.originalEvent),o.button&&0!==o.button||(m=o.pageX,e.mousedownStartTime=(new Date).getTime(),e.mousedownTimeout=t(function(){},l),e.mousedownTimeout.then(function(){e.colMenu&&d.columnMenuScope.showMenu(e.col,n,o)}),d.fireEvent(r.events.COLUMN_HEADER_CLICK,{event:o,columnName:e.col.colDef.name}),e.offAllEvents(),"touchstart"===o.type?(i.on("touchend",e.upFn),i.on("touchmove",e.moveFn)):"mousedown"===o.type&&(i.on("mouseup",e.upFn),i.on("mousemove",e.moveFn)))},e.upFn=function(n){n.stopPropagation(),t.cancel(e.mousedownTimeout),e.offAllEvents(),e.onDownEvents(n.type),(new Date).getTime()-e.mousedownStartTime>l||e.sortable&&e.handleClick(n)},e.moveFn=function(n){0!=n.pageX-m&&(t.cancel(e.mousedownTimeout),e.offAllEvents(),e.onDownEvents(n.type))},e.clickFn=function(t){t.stopPropagation(),f.off("click",e.clickFn)},e.offAllEvents=function(){f.off("touchstart",e.downFn),f.off("mousedown",e.downFn),i.off("touchend",e.upFn),i.off("mouseup",e.upFn),i.off("touchmove",e.moveFn),i.off("mousemove",e.moveFn),f.off("click",e.clickFn)},e.onDownEvents=function(n){switch(n){case"touchmove":case"touchend":f.on("click",e.clickFn),f.on("touchstart",e.downFn),t(function(){f.on("mousedown",e.downFn)},c);break;case"mousemove":case"mouseup":f.on("click",e.clickFn),f.on("mousedown",e.downFn),t(function(){f.on("touchstart",e.downFn)},c);break;default:f.on("click",e.clickFn),f.on("touchstart",e.downFn),f.on("mousedown",e.downFn)}};var v=function(i){var o=n;g&&(o.removeClass(g),g=null),g=angular.isFunction(e.col.headerCellClass)?e.col.headerCellClass(e.grid,e.row,e.col,e.rowRenderIndex,e.colRenderIndex):e.col.headerCellClass,o.addClass(g),t(function(){var t=e.grid.renderContainers.right?e.grid.renderContainers.right:e.grid.renderContainers.body;e.isLastCol=e.col===t.visibleColumnCache[t.visibleColumnCache.length-1]}),d.grid.options.enableSorting&&e.col.enableSorting?e.sortable=!0:e.sortable=!1;var a=e.filterable;d.grid.options.enableFiltering&&e.col.enableFiltering?e.filterable=!0:e.filterable=!1,a!==e.filterable&&(void 0!==e.col.updateFilters&&e.col.updateFilters(e.filterable),e.filterable?(e.col.filters.forEach(function(t,n){h.push(e.$watch("col.filters["+n+"].term",function(e,t){e!==t&&(d.grid.api.core.raise.filterChanged(),d.grid.api.core.notifyDataChange(r.dataChange.COLUMN),d.grid.queueGridRefresh())}))}),e.$on("$destroy",function(){h.forEach(function(e){e()})})):h.forEach(function(e){e()})),e.col.grid.options&&!1!==e.col.grid.options.enableColumnMenus&&e.col.colDef&&!1!==e.col.colDef.enableColumnMenu?e.colMenu=!0:e.colMenu=!1,e.offAllEvents(),(e.sortable||e.colMenu)&&(e.onDownEvents(),e.$on("$destroy",function(){e.offAllEvents()}))};v();var y=e.grid.registerDataChangeCallback(v,[r.dataChange.COLUMN]);e.$on("$destroy",y),e.handleClick=function(t){var n=!1;t.shiftKey&&(n=!0),d.grid.sortColumn(e.col,n).then(function(){d.columnMenuScope&&d.columnMenuScope.hideMenu(),d.grid.refresh()})},e.toggleMenu=function(t){t.stopPropagation(),d.columnMenuScope.menuShown&&d.columnMenuScope.col===e.col?d.columnMenuScope.hideMenu():d.columnMenuScope.showMenu(e.col,n)}}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridHeader",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout","ScrollEvent",function(e,t,n,i,o,r){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(e,n){return{pre:function(e,n,o,a){function s(){d.header=d.colContainer.header=n;var e=n[0].getElementsByClassName("ui-grid-header-canvas");e.length>0?d.headerCanvas=d.colContainer.headerCanvas=e[0]:d.headerCanvas=null}function l(e){if(!c.grid.isScrollingHorizontally){var t=i.normalizeScrollLeft(d.headerViewport,c.grid),n=d.colContainer.scrollHorizontal(t),o=new r(c.grid,null,d.colContainer,r.Sources.ViewPortScroll);o.newScrollLeft=t,n>-1&&(o.x={percentage:n}),c.grid.scrollContainers(null,o)}}var c=a[0],d=a[1];e.grid=c.grid,e.colContainer=d.colContainer,s();var u;u=e.grid.options.showHeader?e.grid.options.headerTemplate?e.grid.options.headerTemplate:"ui-grid/ui-grid-header":"ui-grid/ui-grid-no-header",i.getTemplate(u).then(function(i){var o=angular.element(i),r=t(o)(e);if(n.replaceWith(r),n=r,s(),d){var a=n[0].getElementsByClassName("ui-grid-header-viewport")[0];a&&(d.headerViewport=a,angular.element(a).on("scroll",l),e.$on("$destroy",function(){angular.element(a).off("scroll",l)}))}e.grid.queueRefresh()})},post:function(e,t,n,o){function r(){var e=s.colContainer.visibleColumnCache,t="",n=0;return e.forEach(function(e){t+=e.getColClassDefinition(),n+=e.drawnWidth}),s.colContainer.canvasWidth=n,t}var a=o[0],s=o[1];a.grid,i.disableAnimations(t),s.header=t;var l=t[0].getElementsByClassName("ui-grid-header-viewport")[0];l&&(s.headerViewport=l),a&&a.grid.registerStyleComputation({priority:15,func:r})}}}}}])}(),function(){angular.module("ui.grid").service("uiGridGridMenuService",["gridUtil","i18nService","uiGridConstants",function(e,t,n){var i={initialize:function(e,t){t.gridMenuScope=e,e.grid=t,e.registeredMenuItems=[],e.$on("$destroy",function(){e.grid&&e.grid.gridMenuScope&&(e.grid.gridMenuScope=null),e.grid&&(e.grid=null),e.registeredMenuItems&&(e.registeredMenuItems=null)}),e.registeredMenuItems=[],t.api.registerMethod("core","addToGridMenu",i.addToGridMenu),t.api.registerMethod("core","removeFromGridMenu",i.removeFromGridMenu)},addToGridMenu:function(t,n){angular.isArray(n)?t.gridMenuScope?(t.gridMenuScope.registeredMenuItems=t.gridMenuScope.registeredMenuItems?t.gridMenuScope.registeredMenuItems:[],t.gridMenuScope.registeredMenuItems=t.gridMenuScope.registeredMenuItems.concat(n)):e.logError("Asked to addToGridMenu, but gridMenuScope not present.  Timing issue?  Please log issue with ui-grid"):e.logError("addToGridMenu: menuItems must be an array, and is not, not adding any items")},removeFromGridMenu:function(t,n){var i=-1;t&&t.gridMenuScope&&t.gridMenuScope.registeredMenuItems.forEach(function(t,o){t.id===n&&(i>-1?e.logError("removeFromGridMenu: found multiple items with the same id, removing only the last"):i=o)}),i>-1&&t.gridMenuScope.registeredMenuItems.splice(i,1)},getMenuItems:function(n){var o=[];n.grid.options.gridMenuCustomItems&&(angular.isArray(n.grid.options.gridMenuCustomItems)?o=o.concat(n.grid.options.gridMenuCustomItems):e.logError("gridOptions.gridMenuCustomItems must be an array, and is not"));var r=[{title:t.getSafeText("gridMenu.clearAllFilters"),action:function(e){n.grid.clearAllFilters(void 0,!0,void 0)},shown:function(){return n.grid.options.enableFiltering},order:100}];return o=o.concat(r),o=o.concat(n.registeredMenuItems),!1!==n.grid.options.gridMenuShowHideColumns&&(o=o.concat(i.showHideColumns(n))),o.sort(function(e,t){return e.order-t.order}),o},showHideColumns:function(e){var n=[];return e.grid.options.columnDefs&&0!==e.grid.options.columnDefs.length&&0!==e.grid.columns.length?(n.push({title:t.getSafeText("gridMenu.columns"),order:300}),e.grid.options.gridMenuTitleFilter=e.grid.options.gridMenuTitleFilter?e.grid.options.gridMenuTitleFilter:function(e){return e},e.grid.options.columnDefs.forEach(function(t,o){if(!1!==t.enableHiding){var r={icon:"ui-grid-icon-ok",action:function(e){e.stopPropagation(),i.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!0===this.context.gridCol.colDef.visible||void 0===this.context.gridCol.colDef.visible},context:{gridCol:e.grid.getColumn(t.name||t.field)},leaveOpen:!0,order:301+2*o};i.setMenuItemTitle(r,t,e.grid),n.push(r),r={icon:"ui-grid-icon-cancel",action:function(e){e.stopPropagation(),i.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!(!0===this.context.gridCol.colDef.visible||void 0===this.context.gridCol.colDef.visible)},context:{gridCol:e.grid.getColumn(t.name||t.field)},leaveOpen:!0,order:301+2*o+1},i.setMenuItemTitle(r,t,e.grid),n.push(r)}}),n):n},setMenuItemTitle:function(t,n,i){var o=i.options.gridMenuTitleFilter(n.displayName||e.readableColumnName(n.name)||n.field);"string"==typeof o?t.title=o:o.then?(t.title="",o.then(function(e){t.title=e},function(e){t.title=e})):(e.logError("Expected gridMenuTitleFilter to return a string or a promise, it has returned neither, bad config"),t.title="badconfig")},toggleColumnVisibility:function(e){e.colDef.visible=!(!0===e.colDef.visible||void 0===e.colDef.visible),e.grid.refresh(),e.grid.api.core.notifyDataChange(n.dataChange.COLUMN),e.grid.api.core.raise.columnVisibilityChanged(e)}};return i}]).directive("uiGridMenuButton",["gridUtil","uiGridConstants","uiGridGridMenuService","i18nService",function(e,t,n,i){return{priority:0,scope:!0,require:["^uiGrid"],templateUrl:"ui-grid/ui-grid-menu-button",replace:!0,link:function(t,o,r,a){var s=a[0];t.i18n={aria:i.getSafeText("gridMenu.aria")},n.initialize(t,s.grid),t.shown=!1,t.toggleMenu=function(){t.shown?(t.$broadcast("hide-menu"),t.shown=!1):(t.menuItems=n.getMenuItems(t),t.$broadcast("show-menu"),t.shown=!0)},t.$on("menu-hidden",function(){t.shown=!1,e.focus.bySelector(o,".ui-grid-icon-container")})}}}])}(),function(){angular.module("ui.grid").directive("uiGridMenu",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","i18nService",function(e,t,n,i,o,r,a){return{priority:0,scope:{menuItems:"=",autoHide:"=?"},require:"?^uiGrid",templateUrl:"ui-grid/uiGridMenu",replace:!1,link:function(e,i,s,l){var c;e.dynamicStyles="",l&&(c=l.grid.gridHeight-30,e.dynamicStyles=[".grid"+l.grid.id+" .ui-grid-menu-mid {","max-height: "+c+"px;","}"].join(" ")),e.i18n={close:a.getSafeText("columnMenu.close")},e.showMenu=function(n,r){e.shown?e.shownMid||(e.shownMid=!0,e.$emit("menu-shown")):(e.shown=!0,t(function(){e.shownMid=!0,e.$emit("menu-shown")}));var a="click";r&&r.originalEvent&&r.originalEvent.type&&"touchstart"===r.originalEvent.type&&(a=r.originalEvent.type),angular.element(document).off("click touchstart",d),i.off("keyup",u),i.off("keydown",p),t(function(){angular.element(document).on(a,d),i.on("keyup",u),i.on("keydown",p)}),o.focus.bySelector(i,"button[type=button]",!0)},e.hideMenu=function(n){e.shown&&(e.shownMid=!1,t(function(){e.shownMid||(e.shown=!1,e.$emit("menu-hidden"))},200)),angular.element(document).off("click touchstart",d),i.off("keyup",u),i.off("keydown",p)},e.$on("hide-menu",function(t,n){e.hideMenu(t,n)}),e.$on("show-menu",function(t,n){e.showMenu(t,n)});var d=function(){e.shown&&e.$apply(function(){e.hideMenu()})},u=function(t){27===t.keyCode&&e.hideMenu()},p=function(e){var t=function(t){return t.focus(),e.preventDefault(),!1};if(9===e.keyCode){var n,o,r=i[0].querySelectorAll("button:not(.ng-hide)");r.length>0&&(n=r[0],o=r[r.length-1],e.target!==o||e.shiftKey?e.target===n&&e.shiftKey&&t(o):t(n))}};void 0!==e.autoHide&&void 0!==e.autoHide||(e.autoHide=!0),e.autoHide&&angular.element(n).on("resize",d),e.$on("$destroy",function(){angular.element(document).off("click touchstart",d)}),e.$on("$destroy",function(){angular.element(n).off("resize",d)}),l&&e.$on("$destroy",l.grid.api.core.on.scrollBegin(e,d)),e.$on("$destroy",e.$on(r.events.ITEM_DRAGGING,d))}}}]).directive("uiGridMenuItem",["gridUtil","$compile","i18nService",function(e,t,n){return{priority:0,scope:{name:"=",active:"=",action:"=",icon:"=",shown:"=",context:"=",templateUrl:"=",leaveOpen:"=",screenReaderOnly:"="},require:["?^uiGrid"],templateUrl:"ui-grid/uiGridMenuItem",replace:!1,compile:function(){return{pre:function(n,i){n.templateUrl&&e.getTemplate(n.templateUrl).then(function(e){var o=angular.element(e),r=t(o)(n);i.replaceWith(r)})},post:function(t,i,o,r){var a=r[0];void 0!==t.shown&&null!==t.shown||(t.shown=function(){return!0}),t.itemShown=function(){var e={};return t.context&&(e.context=t.context),void 0!==a&&a&&(e.grid=a.grid),t.shown.call(e)},t.itemAction=function(n,o){if(e.logDebug("itemAction"),n.stopPropagation(),"function"==typeof t.action){var r={};t.context&&(r.context=t.context),void 0!==a&&a&&(r.grid=a.grid),t.action.call(r,n,o),t.leaveOpen?e.focus.bySelector(angular.element(e.closestElm(i,".ui-grid-menu-items")),"button[type=button]",!0):t.$emit("hide-menu")}},t.i18n=n.get()}}}}}])}(),function(){var e=angular.module("ui.grid");angular.forEach([{tag:"Src",method:"attr"},{tag:"Text",method:"text"},{tag:"Href",method:"attr"},{tag:"Class",method:"addClass"},{tag:"Html",method:"html"},{tag:"Alt",method:"attr"},{tag:"Style",method:"css"},{tag:"Value",method:"attr"},{tag:"Id",method:"attr"},{tag:"Id",directiveName:"IdGrid",method:"attr",appendGridId:!0},{tag:"Title",method:"attr"},{tag:"Label",method:"attr",aria:!0},{tag:"Labelledby",method:"attr",aria:!0},{tag:"Labelledby",directiveName:"LabelledbyGrid",appendGridId:!0,method:"attr",aria:!0},{tag:"Describedby",method:"attr",aria:!0},{tag:"Describedby",directiveName:"DescribedbyGrid",appendGridId:!0,method:"attr",aria:!0}],function(t){var n="uiGridOneBind",i=(t.aria?n+"Aria":n)+(t.directiveName?t.directiveName:t.tag);e.directive(i,["gridUtil",function(e){return{restrict:"A",require:["?uiGrid","?^uiGrid"],link:function(n,o,r,a){var s=function(t){var o;if(n.grid)o=n.grid;else if(n.col&&n.col.grid)o=n.col.grid;else if(!a.some(function(e){if(e&&e.grid)return o=e.grid,!0}))throw e.logError("["+i+"] A valid grid could not be found to bind id. Are you using this directive within the correct scope? Trying to generate id: [gridID]-"+t),new Error("No valid grid could be found");if(o){new RegExp(o.id.toString()).test(t)||(t=o.id.toString()+"-"+t)}return t},l=n.$watch(r[i],function(e){if(e){if(t.appendGridId){var n=null;angular.forEach(e.split(" "),function(e){n=(n?n+" ":"")+s(e)}),e=n}switch(t.method){case"attr":t.aria?o[t.method]("aria-"+t.tag.toLowerCase(),e):o[t.method](t.tag.toLowerCase(),e);break;case"addClass":if(angular.isObject(e)&&!angular.isArray(e)){var i=[],r=!1;if(angular.forEach(e,function(e,t){null!==e&&void 0!==e&&(r=!0,e&&i.push(t))}),!r)return;e=i}if(!e)return;o.addClass(angular.isArray(e)?e.join(" "):e);break;default:o[t.method](e)}l()}},!0)}}}])})}(),function(){var e=angular.module("ui.grid");e.directive("uiGridRenderContainer",["$timeout","$document","uiGridConstants","gridUtil","ScrollEvent",function(e,t,n,i,o){return{replace:!0,transclude:!0,templateUrl:"ui-grid/uiGridRenderContainer",require:["^uiGrid","uiGridRenderContainer"],scope:{containerId:"=",rowContainerName:"=",colContainerName:"=",bindScrollHorizontal:"=",bindScrollVertical:"=",enableVerticalScrollbar:"=",enableHorizontalScrollbar:"="},controller:"uiGridRenderContainer as RenderContainer",compile:function(){return{pre:function(e,t,n,i){var o=i[0],r=i[1],a=e.grid=o.grid;if(!e.rowContainerName)throw"No row render container name specified";if(!e.colContainerName)throw"No column render container name specified";if(!a.renderContainers[e.rowContainerName])throw"Row render container '"+e.rowContainerName+"' is not registered.";if(!a.renderContainers[e.colContainerName])throw"Column render container '"+e.colContainerName+"' is not registered.";var s=e.rowContainer=a.renderContainers[e.rowContainerName],l=e.colContainer=a.renderContainers[e.colContainerName];r.containerId=e.containerId,r.rowContainer=s,r.colContainer=l},post:function(e,t,n,r){function a(){var t="",n=u.canvasWidth,i=u.getViewportWidth(),o=d.getCanvasHeight(),r=d.getViewportHeight();u.needsHScrollbarPlaceholder()&&(r-=c.scrollbarHeight);var a,l;return a=l=u.getHeaderViewportWidth(),t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-canvas { width: "+n+"px; height: "+o+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-canvas { width: "+(n+c.scrollbarWidth)+"px; }",m.explicitHeaderCanvasHeight?t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-canvas { height: "+m.explicitHeaderCanvasHeight+"px; }":t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-canvas { height: inherit; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-viewport { width: "+i+"px; height: "+r+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-viewport { width: "+a+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-footer-canvas { width: "+(n+c.scrollbarWidth)+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-footer-viewport { width: "+l+"px; }"}var s=r[0],l=r[1],c=s.grid,d=l.rowContainer,u=l.colContainer,p=null,g=null,m=c.renderContainers[e.containerId];t.addClass("ui-grid-render-container-"+e.containerId),i.on.mousewheel(t,function(e){var t=new o(c,d,u,o.Sources.RenderContainerMouseWheel);if(0!==e.deltaY){var n=-1*e.deltaY*e.deltaFactor;p=l.viewport[0].scrollTop,t.verticalScrollLength=d.getVerticalScrollLength();var r=(p+n)/t.verticalScrollLength;r>=1&&p<t.verticalScrollLength&&(l.viewport[0].scrollTop=t.verticalScrollLength),r<0?r=0:r>1&&(r=1),t.y={percentage:r,pixels:n}}if(0!==e.deltaX){var a=e.deltaX*e.deltaFactor;g=i.normalizeScrollLeft(l.viewport,c),t.horizontalScrollLength=u.getCanvasWidth()-u.getViewportWidth();var s=(g+a)/t.horizontalScrollLength;s<0?s=0:s>1&&(s=1),t.x={percentage:s,pixels:a}}0!==e.deltaY&&(t.atTop(p)||t.atBottom(p))||0!==e.deltaX&&(t.atLeft(g)||t.atRight(g))||(e.preventDefault(),e.stopPropagation(),t.fireThrottledScrollingEvent("",t))}),t.bind("$destroy",function(){t.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(e){t.unbind(e)})}),s.grid.registerStyleComputation({priority:6,func:a})}}}}}]),e.controller("uiGridRenderContainer",["$scope","gridUtil",function(e,t){}])}(),function(){angular.module("ui.grid").directive("uiGridRow",["gridUtil",function(e){return{replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:{row:"=uiGridRow",rowRenderIndex:"="},compile:function(){return{pre:function(e,t,n,i){function o(){e.row.getRowTemplateFn.then(function(n){var i=e.$new();n(i,function(e,n){s&&(s.remove(),l.$destroy()),t.empty().append(e),s=e,l=i})})}var r=i[0],a=i[1];r.grid;e.grid=r.grid,e.colContainer=a.colContainer;var s,l;o(),e.$watch("row.getRowTemplateFn",function(e,t){e!==t&&o()})},post:function(e,t,n,i){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridStyle",["gridUtil","$interpolate",function(e,t){return{link:function(e,n,i,o){var r=t(n.text(),!0);r&&e.$watch(r,function(e){n.text(e)})}}}])}(),function(){angular.module("ui.grid").directive("uiGridViewport",["gridUtil","ScrollEvent","uiGridConstants","$log",function(e,t,n,i){return{replace:!0,scope:{},controllerAs:"Viewport",templateUrl:"ui-grid/uiGridViewport",require:["^uiGrid","^uiGridRenderContainer"],link:function(n,i,o,r){function a(o){var r=i[0].scrollTop,a=e.normalizeScrollLeft(i,f),s=g.scrollVertical(r),l=m.scrollHorizontal(a),c=new t(f,g,m,t.Sources.ViewPortScroll);c.newScrollLeft=a,c.newScrollTop=r,l>-1&&(c.x={percentage:l}),s>-1&&(c.y={percentage:s}),f.scrollContainers(n.$parent.containerId,c)}function s(e){p.prevScrollArgs=e;var t=e.getNewScrollTop(g,p.viewport);i[0].scrollTop=t}function l(t){p.prevScrollArgs=t;var n=t.getNewScrollLeft(m,p.viewport);i[0].scrollLeft=e.denormalizeScrollLeft(p.viewport,n,f)}function c(t){var n=t.getNewScrollLeft(m,p.viewport);p.headerViewport&&(p.headerViewport.scrollLeft=e.denormalizeScrollLeft(p.viewport,n,f))}function d(t){var n=t.getNewScrollLeft(m,p.viewport);p.footerViewport&&(p.footerViewport.scrollLeft=e.denormalizeScrollLeft(p.viewport,n,f))}var u=r[0],p=r[1];n.containerCtrl=p;var g=p.rowContainer,m=p.colContainer,f=u.grid;n.grid=u.grid,n.rowContainer=p.rowContainer,n.colContainer=p.colContainer,p.viewport=i,i.on("scroll",a);n.$parent.bindScrollVertical&&f.addVerticalScrollSync(n.$parent.containerId,s),n.$parent.bindScrollHorizontal&&(f.addHorizontalScrollSync(n.$parent.containerId,l),f.addHorizontalScrollSync(n.$parent.containerId+"header",c),f.addHorizontalScrollSync(n.$parent.containerId+"footer",d))},controller:["$scope",function(e){this.rowStyle=function(t){var n=e.rowContainer,i=e.colContainer,o={};if(0===t&&0!==n.currentTopRow){var r=n.currentTopRow*n.grid.options.rowHeight;o["margin-top"]=r+"px"}return 0!==i.currentFirstColumn&&(i.grid.isRTL()?o["margin-right"]=i.columnOffset+"px":o["margin-left"]=i.columnOffset+"px"),o}}]}}])}(),function(){angular.module("ui.grid").directive("uiGridVisible",function(){return function(e,t,n){e.$watch(n.uiGridVisible,function(e){t[e?"removeClass":"addClass"]("ui-grid-invisible")})}})}(),function(){function e(e,t,n,i,o,r){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,transclude:!0,controller:"uiGridController",compile:function(){return{post:function(e,t,a,s){function l(){t[0].offsetWidth<=0&&h<f?(setTimeout(l,m),h++):n(d)}function c(){angular.element(i).on("resize",p),t.on("$destroy",function(){angular.element(i).off("resize",p)}),e.$watch(function(){return g.hasLeftContainer()},function(e,t){e!==t&&g.refreshCanvas(!0)}),e.$watch(function(){return g.hasRightContainer()},function(e,t){e!==t&&g.refreshCanvas(!0)})}function d(){g.gridWidth=e.gridWidth=o.elementWidth(t),g.canvasWidth=s.grid.gridWidth,g.gridHeight=e.gridHeight=o.elementHeight(t),g.gridHeight<=g.options.rowHeight&&g.options.enableMinHeightCheck&&u(),g.refreshCanvas(!0)}function u(){var n=g.options.minRowsToShow*g.options.rowHeight,i=g.options.showHeader?g.options.headerRowHeight:0,a=g.calcFooterHeight(),s=0;g.options.enableHorizontalScrollbar===r.scrollbars.ALWAYS&&(s=o.getScrollbarWidth());var l=0;if(angular.forEach(g.options.columnDefs,function(e){e.hasOwnProperty("filter")?l<1&&(l=1):e.hasOwnProperty("filters")&&l<e.filters.length&&(l=e.filters.length)}),g.options.enableFiltering&&!l){g.options.columnDefs.length&&g.options.columnDefs.every(function(e){return!1===e.enableFiltering})||(l=1)}var c=l*i,d=i+n+a+s+c;t.css("height",d+"px"),g.gridHeight=e.gridHeight=o.elementHeight(t)}function p(n){g.gridWidth=e.gridWidth=o.elementWidth(t),g.gridHeight=e.gridHeight=o.elementHeight(t),g.refreshCanvas(!0)}var g=s.grid;s.scrollbars=[],g.element=t;var m=100,f=20,h=0;c(),d(),g.renderingComplete(),l()}}}}}angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","gridUtil","$q","uiGridConstants","$templateCache","gridClassFactory","$timeout","$parse","$compile",function(e,t,n,i,o,r,a,s,l,c,d){function u(t,n){t&&t!==n&&(g.grid.options.columnDefs=e.uiGrid.columnDefs,g.grid.buildColumns({orderByColumnDefs:!0}).then(function(){g.grid.preCompileCellTemplates(),g.grid.callDataChangeCallbacks(r.dataChange.COLUMN)}))}function p(t){var i=[];if(g.grid.options.fastWatch&&(t=angular.isString(e.uiGrid.data)?g.grid.appScope[e.uiGrid.data]:e.uiGrid.data),f=t,t){var a=g.grid.columns.length>(g.grid.rowHeaderColumns?g.grid.rowHeaderColumns.length:0);!a&&!n.uiGridColumns&&0===g.grid.options.columnDefs.length&&t.length>0&&g.grid.buildColumnDefsFromData(t),!a&&(g.grid.options.columnDefs.length>0||t.length>0)&&i.push(g.grid.buildColumns().then(function(){g.grid.preCompileCellTemplates()})),o.all(i).then(function(){g.grid.modifyRows(f).then(function(){g.grid.redrawInPlace(!0),e.$evalAsync(function(){g.grid.refreshCanvas(!0),g.grid.callDataChangeCallbacks(r.dataChange.ROW)})})})}}var g=this;g.grid=s.createGrid(e.uiGrid),g.grid.appScope=g.grid.appScope||e.$parent,t.addClass("grid"+g.grid.id),g.grid.rtl="rtl"===i.getStyles(t[0]).direction,e.grid=g.grid,n.uiGridColumns&&n.$observe("uiGridColumns",function(e){g.grid.options.columnDefs=e,g.grid.buildColumns().then(function(){g.grid.preCompileCellTemplates(),g.grid.refreshCanvas(!0)})});var m=[];g.grid.options.fastWatch?(g.uiGrid=e.uiGrid,angular.isString(e.uiGrid.data)?(m.push(e.$parent.$watch(e.uiGrid.data,p)),m.push(e.$parent.$watch(function(){return g.grid.appScope[e.uiGrid.data]?g.grid.appScope[e.uiGrid.data].length:void 0},p))):(m.push(e.$parent.$watch(function(){return e.uiGrid.data},p)),m.push(e.$parent.$watch(function(){return e.uiGrid.data.length},function(){p(e.uiGrid.data)}))),m.push(e.$parent.$watch(function(){return e.uiGrid.columnDefs},u)),m.push(e.$parent.$watch(function(){return e.uiGrid.columnDefs.length},function(){u(e.uiGrid.columnDefs)}))):(angular.isString(e.uiGrid.data)?m.push(e.$parent.$watchCollection(e.uiGrid.data,p)):m.push(e.$parent.$watchCollection(function(){return e.uiGrid.data},p)),m.push(e.$parent.$watchCollection(function(){return e.uiGrid.columnDefs},u)));var f,h=e.$watch(function(){return g.grid.styleComputations},function(){g.grid.refreshCanvas(!0)});e.$on("$destroy",function(){m.forEach(function(e){e()}),h()}),g.fireEvent=function(t,n){void 0!==n&&void 0!==n||(n={}),void 0!==n.grid&&void 0!==n.grid||(n.grid=g.grid),e.$broadcast(t,n)},g.innerCompile=function(t){d(t)(e)}}]),angular.module("ui.grid").directive("uiGrid",e),e.$inject=["$compile","$templateCache","$timeout","$window","gridUtil","uiGridConstants"]}(),function(){angular.module("ui.grid").directive("uiGridPinnedContainer",["gridUtil",function(e){return{restrict:"EA",replace:!0,template:'<div class="ui-grid-pinned-container"><div ui-grid-render-container container-id="side" row-container-name="\'body\'" col-container-name="side" bind-scroll-vertical="true" class="{{ side }} ui-grid-render-container-{{ side }}"></div></div>',scope:{side:"=uiGridPinnedContainer"},require:"^uiGrid",compile:function(){return{post:function(e,t,n,i){function o(){var e=this,t=0;e.visibleColumnCache.forEach(function(e){t+=e.drawnWidth});var n=e.getViewportAdjustment();return t+=n.width}function r(){if("left"===e.side||"right"===e.side){for(var t=s.renderContainers[e.side].visibleColumnCache,n=0,i=0;i<t.length;i++){var o=t[i];n+=o.drawnWidth||o.width||0}return n}}function a(){var n="";return"left"!==e.side&&"right"!==e.side||(l=r(),t.attr("style",null),n+=".grid"+s.id+" .ui-grid-pinned-container-"+e.side+", .grid"+s.id+" .ui-grid-pinned-container-"+e.side+" .ui-grid-render-container-"+e.side+" .ui-grid-viewport { width: "+l+"px; } "),n}var s=i.grid,l=0;t.addClass("ui-grid-pinned-container-"+e.side),"left"!==e.side&&"right"!==e.side||(s.renderContainers[e.side].getViewportWidth=o),s.renderContainers.body.registerViewportAdjuster(function(t){return l=r(),t.width-=l,t.side=e.side,t}),s.registerStyleComputation({priority:15,func:a})}}}}}])}(),function(){angular.module("ui.grid").factory("Grid",["$q","$compile","$parse","gridUtil","uiGridConstants","GridOptions","GridColumn","GridRow","GridApi","rowSorter","rowSearcher","GridRenderContainer","$timeout","ScrollEvent",function(e,t,n,i,o,r,a,s,l,c,d,u,p,g){function m(){}var f=function(e){function t(e){a.isScrollingVertically=!1,a.api.core.raise.scrollEnd(e),a.scrollDirection=o.scrollDirection.NONE}function n(e){a.isScrollingHorizontally=!1,a.api.core.raise.scrollEnd(e),a.scrollDirection=o.scrollDirection.NONE}var a=this;if(void 0===e||void 0===e.id||!e.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(e.id))throw new Error("Grid id '"+e.id+'" is invalid. It must follow CSS selector syntax rules.');a.id=e.id,delete e.id,a.options=r.initialize(e),a.appScope=a.options.appScopeProvider,a.headerHeight=a.options.headerRowHeight,a.footerHeight=a.calcFooterHeight(),a.columnFooterHeight=a.calcColumnFooterHeight(),a.rtl=!1,a.gridHeight=0,a.gridWidth=0,a.columnBuilders=[],a.rowBuilders=[],a.rowsProcessors=[],a.columnsProcessors=[],a.styleComputations=[],a.viewportAdjusters=[],a.rowHeaderColumns=[],a.dataChangeCallbacks={},a.verticalScrollSyncCallBackFns={},a.horizontalScrollSyncCallBackFns={},a.renderContainers={},a.renderContainers.body=new u("body",a),a.cellValueGetterCache={},a.getRowTemplateFn=null,a.rows=[],a.columns=[],a.isScrollingVertically=!1,a.isScrollingHorizontally=!1,a.scrollDirection=o.scrollDirection.NONE,a.disableScrolling=!1;var s=i.debounce(t,a.options.scrollDebounce),d=i.debounce(t,0),p=i.debounce(n,a.options.scrollDebounce),g=i.debounce(n,0);a.flagScrollingVertically=function(e){a.isScrollingVertically||a.isScrollingHorizontally||a.api.core.raise.scrollBegin(e),a.isScrollingVertically=!0,0!==a.options.scrollDebounce&&e.withDelay?s(e):d(e)},a.flagScrollingHorizontally=function(e){a.isScrollingVertically||a.isScrollingHorizontally||a.api.core.raise.scrollBegin(e),a.isScrollingHorizontally=!0,0!==a.options.scrollDebounce&&e.withDelay?p(e):g(e)},a.scrollbarHeight=0,a.scrollbarWidth=0,a.options.enableHorizontalScrollbar===o.scrollbars.ALWAYS&&(a.scrollbarHeight=i.getScrollbarWidth()),a.options.enableVerticalScrollbar===o.scrollbars.ALWAYS&&(a.scrollbarWidth=i.getScrollbarWidth()),a.api=new l(a),a.api.registerMethod("core","refresh",this.refresh),a.api.registerMethod("core","queueGridRefresh",this.queueGridRefresh),a.api.registerMethod("core","refreshRows",this.refreshRows),a.api.registerMethod("core","queueRefresh",this.queueRefresh),a.api.registerMethod("core","handleWindowResize",this.handleWindowResize),a.api.registerMethod("core","addRowHeaderColumn",this.addRowHeaderColumn),a.api.registerMethod("core","scrollToIfNecessary",function(e,t){return a.scrollToIfNecessary(e,t)}),a.api.registerMethod("core","scrollTo",function(e,t){return a.scrollTo(e,t)}),a.api.registerMethod("core","registerRowsProcessor",this.registerRowsProcessor),a.api.registerMethod("core","registerColumnsProcessor",this.registerColumnsProcessor),a.api.registerMethod("core","sortHandleNulls",c.handleNulls),a.api.registerEvent("core","sortChanged"),a.api.registerEvent("core","columnVisibilityChanged"),a.api.registerMethod("core","notifyDataChange",this.notifyDataChange),a.api.registerMethod("core","clearAllFilters",this.clearAllFilters),a.registerDataChangeCallback(a.columnRefreshCallback,[o.dataChange.COLUMN]),a.registerDataChangeCallback(a.processRowsCallback,[o.dataChange.EDIT]),a.registerDataChangeCallback(a.updateFooterHeightCallback,[o.dataChange.OPTIONS]),a.registerStyleComputation({priority:10,func:a.getFooterStyles})};return f.prototype.calcFooterHeight=function(){if(!this.hasFooter())return 0;var e=0;return this.options.showGridFooter&&(e+=this.options.gridFooterHeight),e+=this.calcColumnFooterHeight()},f.prototype.calcColumnFooterHeight=function(){var e=0;return this.options.showColumnFooter&&(e+=this.options.columnFooterHeight),e},f.prototype.getFooterStyles=function(){var e=".grid"+this.id+" .ui-grid-footer-aggregates-row { height: "+this.options.columnFooterHeight+"px; }";return e+=" .grid"+this.id+" .ui-grid-footer-info { height: "+this.options.gridFooterHeight+"px; }"},f.prototype.hasFooter=function(){return this.options.showGridFooter||this.options.showColumnFooter},f.prototype.isRTL=function(){return this.rtl},f.prototype.registerColumnBuilder=function(e){this.columnBuilders.push(e)},f.prototype.buildColumnDefsFromData=function(e){this.options.columnDefs=i.getColumnsFromData(e,this.options.excludeProperties)},f.prototype.registerRowBuilder=function(e){this.rowBuilders.push(e)},f.prototype.registerDataChangeCallback=function(e,t,n){var r=i.nextUid();t||(t=[o.dataChange.ALL]),Array.isArray(t)||i.logError("Expected types to be an array or null in registerDataChangeCallback, value passed was: "+t),this.dataChangeCallbacks[r]={callback:e,types:t,_this:n};var a=this;return function(){delete a.dataChangeCallbacks[r]}},f.prototype.callDataChangeCallbacks=function(e,t){angular.forEach(this.dataChangeCallbacks,function(t,n){-1===t.types.indexOf(o.dataChange.ALL)&&-1===t.types.indexOf(e)&&e!==o.dataChange.ALL||(t._this?t.callback.apply(t._this,this):t.callback(this))},this)},f.prototype.notifyDataChange=function(e){var t=o.dataChange;e===t.ALL||e===t.COLUMN||e===t.EDIT||e===t.ROW||e===t.OPTIONS?this.callDataChangeCallbacks(e):i.logError("Notified of a data change, but the type was not recognised, so no action taken, type was: "+e)},f.prototype.columnRefreshCallback=function(e){e.buildColumns(),e.queueGridRefresh()},f.prototype.processRowsCallback=function(e){e.queueGridRefresh()},f.prototype.updateFooterHeightCallback=function(e){e.footerHeight=e.calcFooterHeight(),e.columnFooterHeight=e.calcColumnFooterHeight()},f.prototype.getColumn=function(e){var t=this.columns.filter(function(t){return t.colDef.name===e});return t.length>0?t[0]:null},f.prototype.getColDef=function(e){var t=this.options.columnDefs.filter(function(t){return t.name===e});return t.length>0?t[0]:null},f.prototype.assignTypes=function(){var e=this;e.options.columnDefs.forEach(function(t,n){if(!t.type){var o=new a(t,n,e),r=e.rows.length>0?e.rows[0]:null;t.type=r?i.guessType(e.getCellValue(r,o)):"string"}})},f.prototype.isRowHeaderColumn=function(e){return-1!==this.rowHeaderColumns.indexOf(e)},f.prototype.addRowHeaderColumn=function(e){var t=this,n=new a(e,i.nextUid(),t);n.isRowHeader=!0,t.isRTL()?(t.createRightContainer(),n.renderContainer="right"):(t.createLeftContainer(),n.renderContainer="left"),t.columnBuilders[0](e,n,t.options).then(function(){n.enableFiltering=!1,n.enableSorting=!1,n.enableHiding=!1,t.rowHeaderColumns.push(n),t.buildColumns().then(function(){t.preCompileCellTemplates(),t.queueGridRefresh()})})},f.prototype.getOnlyDataColumns=function(){var e=this,t=[];return e.columns.forEach(function(n){-1===e.rowHeaderColumns.indexOf(n)&&t.push(n)}),t},f.prototype.buildColumns=function(t){var n={orderByColumnDefs:!1};angular.extend(n,t);var o,r=this,s=[],l=r.rowHeaderColumns.length;for(o=0;o<r.columns.length;o++)r.getColDef(r.columns[o].name)||(r.columns.splice(o,1),o--);if(r.rowHeaderColumns.forEach(function(e){r.columns.unshift(e)}),r.options.columnDefs.forEach(function(e,t){r.preprocessColDef(e);var n=r.getColumn(e.name);n?n.updateColumnDef(e,!1):(n=new a(e,i.nextUid(),r),r.columns.splice(t+l,0,n)),r.columnBuilders.forEach(function(t){s.push(t.call(r,e,n,r.options))})}),n.orderByColumnDefs){var c=r.columns.slice(0),d=Math.min(r.options.columnDefs.length,r.columns.length);for(o=0;o<d;o++)r.columns[o+l].name!==r.options.columnDefs[o].name?c[o+l]=r.getColumn(r.options.columnDefs[o].name):c[o+l]=r.columns[o+l];r.columns.length=0,Array.prototype.splice.apply(r.columns,[0,0].concat(c))}return e.all(s).then(function(){r.rows.length>0&&r.assignTypes()})},f.prototype.preCompileCellTemplates=function(){var e=this,n=function(n){var i=n.cellTemplate.replace(o.MODEL_COL_FIELD,e.getQualifiedColField(n));i=i.replace(o.COL_FIELD,"grid.getCellValue(row, col)");var r=t(i);n.compiledElementFn=r,n.compiledElementFnDefer&&n.compiledElementFnDefer.resolve(n.compiledElementFn)};this.columns.forEach(function(e){e.cellTemplate?n(e):e.cellTemplatePromise&&e.cellTemplatePromise.then(function(){n(e)})})},f.prototype.getQualifiedColField=function(e){return"row.entity."+i.preEval(e.field)},f.prototype.createLeftContainer=function(){this.hasLeftContainer()||(this.renderContainers.left=new u("left",this,{disableColumnOffset:!0}))},f.prototype.createRightContainer=function(){this.hasRightContainer()||(this.renderContainers.right=new u("right",this,{disableColumnOffset:!0}))},f.prototype.hasLeftContainer=function(){return void 0!==this.renderContainers.left},f.prototype.hasRightContainer=function(){return void 0!==this.renderContainers.right},f.prototype.preprocessColDef=function(e){var t=this;if(!e.field&&!e.name)throw new Error("colDef.name or colDef.field property is required");if(void 0===e.name&&void 0!==e.field){for(var n=e.field,i=2;t.getColumn(n);)n=e.field+i.toString(),i++;e.name=n}},f.prototype.newInN=function(e,t,n,i){for(var o=this,r=[],a=0;a<t.length;a++){for(var s=i?t[a][i]:t[a],l=!1,c=0;c<e.length;c++){var d=n?e[c][n]:e[c];if(o.options.rowEquality(s,d)){l=!0;break}}l||r.push(s)}return r},f.prototype.getRow=function(e,t){var n=this;t=void 0===t?n.rows:t;var i=t.filter(function(t){return n.options.rowEquality(t.entity,e)});return i.length>0?i[0]:null},f.prototype.modifyRows=function(t){var n=this,i=n.rows.slice(0),o=n.rowHashMap||n.createRowHashMap();n.rowHashMap=n.createRowHashMap(),n.rows.length=0,t.forEach(function(e,t){var r;r=n.options.enableRowHashing?o.get(e):n.getRow(e,i),r||(r=n.processRowBuilders(new s(e,t,n))),n.rows.push(r),n.rowHashMap.put(e,r)}),n.assignTypes();var r=e.when(n.processRowsProcessors(n.rows)).then(function(e){return n.setVisibleRows(e)}),a=e.when(n.processColumnsProcessors(n.columns)).then(function(e){return n.setVisibleColumns(e)});return e.all([r,a])},f.prototype.addRows=function(e){for(var t=this,n=t.rows.length,i=0;i<e.length;i++){var o=t.processRowBuilders(new s(e[i],i+n,t));if(t.options.enableRowHashing){var r=t.rowHashMap.get(o.entity);r&&(r.row=o)}t.rows.push(o)}},f.prototype.processRowBuilders=function(e){var t=this;return t.rowBuilders.forEach(function(n){n.call(t,e,t.options)}),e},f.prototype.registerStyleComputation=function(e){this.styleComputations.push(e)},f.prototype.registerRowsProcessor=function(e,t){if(!angular.isFunction(e))throw"Attempt to register non-function rows processor: "+e;this.rowsProcessors.push({processor:e,priority:t}),this.rowsProcessors.sort(function(e,t){return e.priority-t.priority})},f.prototype.removeRowsProcessor=function(e){var t=-1;this.rowsProcessors.forEach(function(n,i){n.processor===e&&(t=i)}),-1!==t&&this.rowsProcessors.splice(t,1)},f.prototype.processRowsProcessors=function(t){function n(t,o){var a=i.rowsProcessors[t].processor;return e.when(a.call(i,o,i.columns)).then(function(e){if(!e)throw"Processor at index "+t+" did not return a set of renderable rows";if(!angular.isArray(e))throw"Processor at index "+t+" did not return an array";if(++t<=i.rowsProcessors.length-1)return n(t,e);r.resolve(e)})}var i=this,o=t.slice(0);if(0===i.rowsProcessors.length)return e.when(o);var r=e.defer();return n(0,o),r.promise},f.prototype.setVisibleRows=function(e){var t=this;for(var n in t.renderContainers){var i=t.renderContainers[n];i.canvasHeightShouldUpdate=!0,void 0===i.visibleRowCache?i.visibleRowCache=[]:i.visibleRowCache.length=0}for(var o=0;o<e.length;o++){var r=e[o],a=void 0!==r.renderContainer&&r.renderContainer?r.renderContainer:"body";r.visible&&t.renderContainers[a].visibleRowCache.push(r)}t.api.core.raise.rowsRendered(this.api)},f.prototype.registerColumnsProcessor=function(e,t){if(!angular.isFunction(e))throw"Attempt to register non-function rows processor: "+e;this.columnsProcessors.push({processor:e,priority:t}),this.columnsProcessors.sort(function(e,t){return e.priority-t.priority})},f.prototype.removeColumnsProcessor=function(e){var t=this.columnsProcessors.indexOf(e);void 0!==t&&void 0!==t&&this.columnsProcessors.splice(t,1)},f.prototype.processColumnsProcessors=function(t){function n(t,a){var s=i.columnsProcessors[t].processor;return e.when(s.call(i,a,i.rows)).then(function(e){if(!e)throw"Processor at index "+t+" did not return a set of renderable rows";if(!angular.isArray(e))throw"Processor at index "+t+" did not return an array";if(++t<=i.columnsProcessors.length-1)return n(t,o);r.resolve(o)})}var i=this,o=t.slice(0);if(0===i.columnsProcessors.length)return e.when(o);var r=e.defer();return n(0,o),r.promise},f.prototype.setVisibleColumns=function(e){var t=this;for(var n in t.renderContainers){t.renderContainers[n].visibleColumnCache.length=0}for(var i=0;i<e.length;i++){var o=e[i];o.visible&&(void 0!==o.renderContainer&&o.renderContainer?t.renderContainers[o.renderContainer].visibleColumnCache.push(o):t.renderContainers.body.visibleColumnCache.push(o))}},f.prototype.handleWindowResize=function(e){var t=this;return t.gridWidth=i.elementWidth(t.element),t.gridHeight=i.elementHeight(t.element),t.queueRefresh()},f.prototype.queueRefresh=function(){var e=this;return e.refreshCanceller&&p.cancel(e.refreshCanceller),e.refreshCanceller=p(function(){e.refreshCanvas(!0)}),e.refreshCanceller.then(function(){e.refreshCanceller=null}),e.refreshCanceller},f.prototype.queueGridRefresh=function(){var e=this;return e.gridRefreshCanceller&&p.cancel(e.gridRefreshCanceller),e.gridRefreshCanceller=p(function(){e.refresh(!0)}),e.gridRefreshCanceller.then(function(){e.gridRefreshCanceller=null}),e.gridRefreshCanceller},f.prototype.updateCanvasHeight=function(){var e=this;for(var t in e.renderContainers)if(e.renderContainers.hasOwnProperty(t)){var n=e.renderContainers[t];n.canvasHeightShouldUpdate=!0}},f.prototype.buildStyles=function(){var e=this;e.customStyles="",e.styleComputations.sort(function(e,t){return null===e.priority?1:null===t.priority?-1:null===e.priority&&null===t.priority?0:e.priority-t.priority}).forEach(function(t){var n=t.func.call(e);angular.isString(n)&&(e.customStyles+="\n"+n)})},f.prototype.minColumnsToRender=function(){var e=this,t=this.getViewportWidth(),n=0,i=0;return e.columns.forEach(function(o,r){if(i<t)i+=o.drawnWidth,n++;else{for(var a=0,s=r;s>=r-n;s--)a+=e.columns[s].drawnWidth;a<t&&n++}}),n},f.prototype.getBodyHeight=function(){return this.getViewportHeight()},f.prototype.getViewportHeight=function(){var e=this,t=this.gridHeight-this.headerHeight-this.footerHeight;return t+=e.getViewportAdjustment().height},f.prototype.getViewportWidth=function(){var e=this,t=this.gridWidth;return t+=e.getViewportAdjustment().width},f.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},f.prototype.addVerticalScrollSync=function(e,t){this.verticalScrollSyncCallBackFns[e]=t},f.prototype.addHorizontalScrollSync=function(e,t){this.horizontalScrollSyncCallBackFns[e]=t},f.prototype.scrollContainers=function(e,t){if(t.y){var n=["body","left","right"];this.flagScrollingVertically(t),"body"===e?n=["left","right"]:"left"===e?n=["body","right"]:"right"===e&&(n=["body","left"]);for(var i=0;i<n.length;i++){var o=n[i];this.verticalScrollSyncCallBackFns[o]&&this.verticalScrollSyncCallBackFns[o](t)}}if(t.x){var r=["body","bodyheader","bodyfooter"];this.flagScrollingHorizontally(t),"body"===e&&(r=["bodyheader","bodyfooter"]);for(var a=0;a<r.length;a++){var s=r[a];this.horizontalScrollSyncCallBackFns[s]&&this.horizontalScrollSyncCallBackFns[s](t)}}},f.prototype.registerViewportAdjuster=function(e){this.viewportAdjusters.push(e)},f.prototype.removeViewportAdjuster=function(e){var t=this.viewportAdjusters.indexOf(e);void 0!==t&&void 0!==t&&this.viewportAdjusters.splice(t,1)},f.prototype.getViewportAdjustment=function(){var e=this,t={height:0,width:0};return e.viewportAdjusters.forEach(function(e){t=e.call(this,t)}),t},f.prototype.getVisibleRowCount=function(){return this.renderContainers.body.visibleRowCache.length},f.prototype.getVisibleRows=function(){return this.renderContainers.body.visibleRowCache},f.prototype.getVisibleColumnCount=function(){return this.renderContainers.body.visibleColumnCache.length},f.prototype.searchRows=function(e){return d.search(this,e,this.columns)},f.prototype.sortByColumn=function(e){return c.sort(this,e,this.columns)},f.prototype.getCellValue=function(e,t){return void 0!==e.entity["$$"+t.uid]?e.entity["$$"+t.uid].rendered:this.options.flatEntityAccess&&void 0!==t.field?e.entity[t.field]:(t.cellValueGetterCache||(t.cellValueGetterCache=n(e.getEntityQualifiedColField(t))),t.cellValueGetterCache(e))},f.prototype.getCellDisplayValue=function(e,t){if(!t.cellDisplayGetterCache){var i=t.cellFilter?" | "+t.cellFilter:"";void 0!==e.entity["$$"+t.uid]?t.cellDisplayGetterCache=n(e.entity["$$"+t.uid].rendered+i):this.options.flatEntityAccess&&void 0!==t.field?t.cellDisplayGetterCache=n(e.entity[t.field]+i):t.cellDisplayGetterCache=n(e.getEntityQualifiedColField(t)+i)}return t.cellDisplayGetterCache(e)},f.prototype.getNextColumnSortPriority=function(){var e=this,t=0;return e.columns.forEach(function(e){e.sort&&void 0!==e.sort.priority&&e.sort.priority>=t&&(t=e.sort.priority+1)}),t},f.prototype.resetColumnSorting=function(e){this.columns.forEach(function(t){t===e||t.suppressRemoveSort||(t.sort={})})},f.prototype.getColumnSorting=function(){var e,t=this,n=[];return e=t.columns.slice(0),e.sort(c.prioritySort).forEach(function(e){e.sort&&void 0!==e.sort.direction&&e.sort.direction&&(e.sort.direction===o.ASC||e.sort.direction===o.DESC)&&n.push(e)}),n},f.prototype.sortColumn=function(t,n,i){var o=this,r=null;if(void 0===t||!t)throw new Error("No column parameter provided");if("boolean"==typeof n?i=n:r=n,i?t.sort.priority||(t.sort.priority=o.getNextColumnSortPriority()):(o.resetColumnSorting(t),t.sort.priority=void 0,t.sort.priority=o.getNextColumnSortPriority()),r)t.sort.direction=r;else{var a=t.sortDirectionCycle.indexOf(t.sort.direction?t.sort.direction:null);a=(a+1)%t.sortDirectionCycle.length,t.colDef&&t.suppressRemoveSort&&!t.sortDirectionCycle[a]&&(a=(a+1)%t.sortDirectionCycle.length),t.sortDirectionCycle[a]?t.sort.direction=t.sortDirectionCycle[a]:t.sort={}}return o.api.core.raise.sortChanged(o,o.getColumnSorting()),e.when(t)},f.prototype.renderingComplete=function(){angular.isFunction(this.options.onRegisterApi)&&this.options.onRegisterApi(this.api),this.api.core.raise.renderingComplete(this.api)},f.prototype.createRowHashMap=function(){var e=this,t=new m;return t.grid=e,t},f.prototype.refresh=function(t){var n=this,i=n.processRowsProcessors(n.rows).then(function(e){n.setVisibleRows(e)}),o=n.processColumnsProcessors(n.columns).then(function(e){n.setVisibleColumns(e)});return e.all([i,o]).then(function(){n.redrawInPlace(t),n.refreshCanvas(!0)})},f.prototype.refreshRows=function(){var e=this;return e.processRowsProcessors(e.rows).then(function(t){e.setVisibleRows(t),e.redrawInPlace(),e.refreshCanvas(!0)})},f.prototype.refreshCanvas=function(t){var n=this;t&&n.buildStyles();var o=e.defer(),r=[];for(var a in n.renderContainers)if(n.renderContainers.hasOwnProperty(a)){var s=n.renderContainers[a];if(null===s.canvasWidth||isNaN(s.canvasWidth))continue;(s.header||s.headerCanvas)&&(s.explicitHeaderHeight=s.explicitHeaderHeight||null,s.explicitHeaderCanvasHeight=s.explicitHeaderCanvasHeight||null,r.push(s))}return r.length>0?(t&&n.buildStyles(),p(function(){var e,a,s=!1,l=0,c=0,d=function(e,t){return e!==t&&(s=!0),t};for(e=0;e<r.length;e++)if(a=r[e],null!==a.canvasWidth&&!isNaN(a.canvasWidth)){if(a.header){var u=a.headerHeight=d(a.headerHeight,parseInt(i.outerElementHeight(a.header),10)),p=i.getBorderSize(a.header,"top"),g=i.getBorderSize(a.header,"bottom"),m=parseInt(u-p-g,10);m=m<0?0:m,a.innerHeaderHeight=m,!a.explicitHeaderHeight&&m>l&&(l=m)}if(a.headerCanvas){var f=a.headerCanvasHeight=d(a.headerCanvasHeight,parseInt(i.outerElementHeight(a.headerCanvas),10));!a.explicitHeaderCanvasHeight&&f>c&&(c=f)}}for(e=0;e<r.length;e++)a=r[e],l>0&&void 0!==a.headerHeight&&null!==a.headerHeight&&(a.explicitHeaderHeight||a.headerHeight<l)&&(a.explicitHeaderHeight=d(a.explicitHeaderHeight,l)),c>0&&void 0!==a.headerCanvasHeight&&null!==a.headerCanvasHeight&&(a.explicitHeaderCanvasHeight||a.headerCanvasHeight<c)&&(a.explicitHeaderCanvasHeight=d(a.explicitHeaderCanvasHeight,c));t&&s&&n.buildStyles(),o.resolve()})):p(function(){o.resolve()}),o.promise},f.prototype.redrawInPlace=function(e){var t=this;for(var n in t.renderContainers){var i=t.renderContainers[n];e?(i.adjustRows(i.prevScrollTop,null),i.adjustColumns(i.prevScrollLeft,null)):(i.adjustRows(null,i.prevScrolltopPercentage),i.adjustColumns(null,i.prevScrollleftPercentage))}},f.prototype.hasLeftContainerColumns=function(){return this.hasLeftContainer()&&this.renderContainers.left.renderedColumns.length>0},f.prototype.hasRightContainerColumns=function(){return this.hasRightContainer()&&this.renderContainers.right.renderedColumns.length>0},f.prototype.scrollToIfNecessary=function(t,n){var i=this,o=new g(i,"uiGrid.scrollToIfNecessary"),r=i.renderContainers.body.visibleRowCache,a=i.renderContainers.body.visibleColumnCache,s=i.renderContainers.body.prevScrollTop+i.headerHeight;s=s<0?0:s;var l=i.renderContainers.body.prevScrollLeft,c=i.renderContainers.body.prevScrollTop+i.gridHeight-i.renderContainers.body.headerHeight-i.footerHeight-i.scrollbarWidth,d=i.renderContainers.body.prevScrollLeft+Math.ceil(i.renderContainers.body.getViewportWidth());if(null!==t){var u=r.indexOf(t),p=i.renderContainers.body.getCanvasHeight()-i.renderContainers.body.getViewportHeight(),m=u*i.options.rowHeight+i.headerHeight;m=m<0?0:m;var f,h;m<s?(f=i.renderContainers.body.prevScrollTop-(s-m),h=f/p,o.y={percentage:h}):m>c&&(f=m-c+i.renderContainers.body.prevScrollTop,h=f/p,o.y={percentage:h})}if(null!==n){for(var v=a.indexOf(n),y=i.renderContainers.body.getCanvasWidth()-i.renderContainers.body.getViewportWidth(),b=0,w=0;w<v;w++){b+=a[w].drawnWidth}b=b<0?0:b;var C=b+n.drawnWidth;C=C<0?0:C;var T,S;b<l?(T=i.renderContainers.body.prevScrollLeft-(l-b),S=T/y,S=S>1?1:S,o.x={percentage:S}):C>d&&(T=C-d+i.renderContainers.body.prevScrollLeft,S=T/y,S=S>1?1:S,o.x={percentage:S})}var E=e.defer();if(o.y||o.x){o.withDelay=!1,i.scrollContainers("",o);var I=i.api.core.on.scrollEnd(null,function(){E.resolve(o),I()})}else E.resolve();return E.promise},f.prototype.scrollTo=function(e,t){var n=null,i=null;return null!==e&&void 0!==e&&(n=this.getRow(e)),null!==t&&void 0!==t&&(i=this.getColumn(t.name?t.name:t.field)),this.scrollToIfNecessary(n,i)},f.prototype.clearAllFilters=function(e,t,n){if(void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===n&&(n=!1),this.columns.forEach(function(e){e.filters.forEach(function(e){e.term=void 0,t&&(e.condition=void 0),n&&(e.flags=void 0)})}),e)return this.refreshRows()},m.prototype={put:function(e,t){this[this.grid.options.rowIdentity(e)]=t},get:function(e){return this[this.grid.options.rowIdentity(e)]},remove:function(e){var t=this[e=this.grid.options.rowIdentity(e)];return delete this[e],t}},f}])}(),function(){angular.module("ui.grid").factory("GridApi",["$q","$rootScope","gridUtil","uiGridConstants","GridRow","uiGridGridMenuService",function(e,t,n,i,o,r){function a(e,n,i,o){return t.$on(e,function(e){var t=Array.prototype.slice.call(arguments);t.splice(0,1),n.apply(o||i.api,t)})}var s=function(e){this.grid=e,this.listeners=[],this.registerEvent("core","renderingComplete"),this.registerEvent("core","filterChanged"),this.registerMethod("core","setRowInvisible",o.prototype.setRowInvisible),this.registerMethod("core","clearRowInvisible",o.prototype.clearRowInvisible),this.registerMethod("core","getVisibleRows",this.grid.getVisibleRows),this.registerEvent("core","rowsVisibleChanged"),this.registerEvent("core","rowsRendered"),this.registerEvent("core","scrollBegin"),this.registerEvent("core","scrollEnd"),this.registerEvent("core","canvasHeightChanged")};return s.prototype.suppressEvents=function(e,t){var n=this,i=angular.isArray(e)?e:[e],o=n.listeners.filter(function(e){return i.some(function(t){return e.handler===t})});o.forEach(function(e){e.dereg()}),t(),o.forEach(function(e){e.dereg=a(e.eventId,e.handler,n.grid,e._this)})},s.prototype.registerEvent=function(e,i){var o=this;o[e]||(o[e]={});var r=o[e];r.on||(r.on={},r.raise={});var s=o.grid.id+e+i;r.raise[i]=function(){t.$emit.apply(t,[s].concat(Array.prototype.slice.call(arguments)))},r.on[i]=function(t,r,l){if(null!==t&&void 0===t.$on)return void n.logError("asked to listen on "+e+".on."+i+" but scope wasn't passed in the input parameters.  It is legitimate to pass null, but you've passed something else, so you probably forgot to provide scope rather than did it deliberately, not registering");var c=a(s,r,o.grid,l),d={handler:r,dereg:c,eventId:s,scope:t,_this:l};o.listeners.push(d);var u=function(){d.dereg();var e=o.listeners.indexOf(d);o.listeners.splice(e,1)};return t&&t.$on("$destroy",function(){u()}),u}},s.prototype.registerEventsFromObject=function(e){var t=this,n=[];angular.forEach(e,function(e,t){var i={name:t,events:[]};angular.forEach(e,function(e,t){i.events.push(t)}),n.push(i)}),n.forEach(function(e){e.events.forEach(function(n){t.registerEvent(e.name,n)})})},s.prototype.registerMethod=function(e,t,i,o){this[e]||(this[e]={}),this[e][t]=n.createBoundedWrapper(o||this.grid,i)},s.prototype.registerMethodsFromObject=function(e,t){var n=this,i=[];angular.forEach(e,function(e,t){var n={name:t,methods:[]};angular.forEach(e,function(e,t){n.methods.push({name:t,fn:e})}),i.push(n)}),i.forEach(function(e){e.methods.forEach(function(i){n.registerMethod(e.name,i.name,i.fn,t)})})},s}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil","uiGridConstants","i18nService",function(e,t,n){function i(e,n,i){var o=this;o.grid=i,o.uid=n,o.updateColumnDef(e,!0),o.aggregationValue=void 0,o.updateAggregationValue=function(){if(!o.aggregationType)return void(o.aggregationValue=void 0);var e=0,n=o.grid.getVisibleRows(),i=function(){var e=[];return n.forEach(function(t){var n=o.grid.getCellValue(t,o),i=Number(n);isNaN(i)||e.push(i)}),e};angular.isFunction(o.aggregationType)?o.aggregationValue=o.aggregationType(n,o):o.aggregationType===t.aggregationTypes.count?o.aggregationValue=o.grid.getVisibleRowCount():o.aggregationType===t.aggregationTypes.sum?(i().forEach(function(t){e+=t}),o.aggregationValue=e):o.aggregationType===t.aggregationTypes.avg?(i().forEach(function(t){e+=t}),e/=i().length,o.aggregationValue=e):o.aggregationType===t.aggregationTypes.min?o.aggregationValue=Math.min.apply(null,i()):o.aggregationType===t.aggregationTypes.max?o.aggregationValue=Math.max.apply(null,i()):o.aggregationValue="Â "},this.getAggregationValue=function(){return o.aggregationValue}}return i.prototype.hideColumn=function(){this.colDef.visible=!1},i.prototype.setPropertyOrDefault=function(e,t,n){var i=this;void 0!==e[t]&&e[t]?i[t]=e[t]:void 0!==i[t]?i[t]=i[t]:i[t]=n||{}},i.prototype.updateColumnDef=function(n,i){var o=this;if(o.colDef=n,void 0===n.name)throw new Error("colDef.name is required for column at index "+o.grid.options.columnDefs.indexOf(n));if(o.displayName=void 0===n.displayName?e.readableColumnName(n.name):n.displayName,!angular.isNumber(o.width)||!o.hasCustomWidth||n.allowCustomWidthOverride){var r=n.width,a="Cannot parse column width '"+r+"' for column named '"+n.name+"'";if(o.hasCustomWidth=!1,angular.isString(r)||angular.isNumber(r))if(angular.isString(r))if(e.endsWith(r,"%")){var s=r.replace(/%/g,""),l=parseInt(s,10);if(isNaN(l))throw new Error(a);o.width=r}else if(r.match(/^(\d+)$/))o.width=parseInt(r.match(/^(\d+)$/)[1],10);else{if(!r.match(/^\*+$/))throw new Error(a);o.width=r}else o.width=r;else o.width="*"}["minWidth","maxWidth"].forEach(function(e){var t=n[e],i="Cannot parse column "+e+" '"+t+"' for column named '"+n.name+"'";if(angular.isString(t)||angular.isNumber(t))if(angular.isString(t)){if(!t.match(/^(\d+)$/))throw new Error(i);o[e]=parseInt(t.match(/^(\d+)$/)[1],10)}else o[e]=t;else o[e]="minWidth"===e?30:9e3}),o.field=void 0===n.field?n.name:n.field,"string"!=typeof o.field&&e.logError("Field is not a string, this is likely to break the code, Field is: "+o.field),o.name=n.name,o.displayName=void 0===n.displayName?e.readableColumnName(n.name):n.displayName,o.aggregationType=angular.isDefined(n.aggregationType)?n.aggregationType:null,o.footerCellTemplate=angular.isDefined(n.footerCellTemplate)?n.footerCellTemplate:null,void 0===n.cellTooltip||!1===n.cellTooltip?o.cellTooltip=!1:!0===n.cellTooltip?o.cellTooltip=function(e,t){return o.grid.getCellValue(e,t)}:"function"==typeof n.cellTooltip?o.cellTooltip=n.cellTooltip:o.cellTooltip=function(e,t){return t.colDef.cellTooltip},void 0===n.headerTooltip||!1===n.headerTooltip?o.headerTooltip=!1:!0===n.headerTooltip?o.headerTooltip=function(e){return e.displayName}:"function"==typeof n.headerTooltip?o.headerTooltip=n.headerTooltip:o.headerTooltip=function(e){return e.colDef.headerTooltip},o.footerCellClass=n.footerCellClass,o.cellClass=n.cellClass,o.headerCellClass=n.headerCellClass,o.cellFilter=n.cellFilter?n.cellFilter:"",o.sortCellFiltered=!!n.sortCellFiltered,o.filterCellFiltered=!!n.filterCellFiltered,o.headerCellFilter=n.headerCellFilter?n.headerCellFilter:"",o.footerCellFilter=n.footerCellFilter?n.footerCellFilter:"",o.visible=e.isNullOrUndefined(n.visible)||n.visible,o.headerClass=n.headerClass,o.enableSorting=void 0===n.enableSorting||n.enableSorting,o.sortingAlgorithm=n.sortingAlgorithm,o.sortDirectionCycle=void 0!==n.sortDirectionCycle?n.sortDirectionCycle:[null,t.ASC,t.DESC],void 0===o.suppressRemoveSort&&(o.suppressRemoveSort=void 0!==n.suppressRemoveSort&&n.suppressRemoveSort),o.enableFiltering=void 0===n.enableFiltering||n.enableFiltering,o.setPropertyOrDefault(n,"menuItems",[]),i&&o.setPropertyOrDefault(n,"sort");var c=[];n.filter?c.push(n.filter):n.filters?c=n.filters:c.push({}),i?(o.setPropertyOrDefault(n,"filter"),o.setPropertyOrDefault(n,"filters",c)):o.filters.length===c.length&&o.filters.forEach(function(e,t){void 0!==c[t].placeholder&&(e.placeholder=c[t].placeholder),void 0!==c[t].ariaLabel&&(e.ariaLabel=c[t].ariaLabel),void 0!==c[t].flags&&(e.flags=c[t].flags),void 0!==c[t].type&&(e.type=c[t].type),void 0!==c[t].selectOptions&&(e.selectOptions=c[t].selectOptions)})},i.prototype.unsort=function(){this.sort={},this.grid.api.core.raise.sortChanged(this.grid,this.grid.getColumnSorting())},i.prototype.getColClass=function(e){var n=t.COL_CLASS_PREFIX+this.uid;return e?"."+n:n},i.prototype.isPinnedLeft=function(){return"left"===this.renderContainer},i.prototype.isPinnedRight=function(){return"right"===this.renderContainer},i.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { min-width: "+this.drawnWidth+"px; max-width: "+this.drawnWidth+"px; }"},i.prototype.getRenderContainer=function(){var e=this,t=e.renderContainer;return null!==t&&""!==t&&void 0!==t||(t="body"),e.grid.renderContainers[t]},i.prototype.showColumn=function(){this.colDef.visible=!0},i.prototype.getAggregationText=function(){var e=this;if(e.colDef.aggregationHideLabel)return"";if(e.colDef.aggregationLabel)return e.colDef.aggregationLabel;switch(e.colDef.aggregationType){case t.aggregationTypes.count:return n.getSafeText("aggregation.count");case t.aggregationTypes.sum:return n.getSafeText("aggregation.sum");case t.aggregationTypes.avg:return n.getSafeText("aggregation.avg");case t.aggregationTypes.min:return n.getSafeText("aggregation.min");case t.aggregationTypes.max:return n.getSafeText("aggregation.max");default:return""}},i.prototype.getCellTemplate=function(){return this.cellTemplatePromise},i.prototype.getCompiledElementFn=function(){return this.compiledElementFnDefer.promise},i}])}(),function(){angular.module("ui.grid").factory("GridOptions",["gridUtil","uiGridConstants",function(e,t){return{initialize:function(n){return n.onRegisterApi=n.onRegisterApi||angular.noop(),n.data=n.data||[],n.columnDefs=n.columnDefs||[],n.excludeProperties=n.excludeProperties||["$$hashKey"],n.enableRowHashing=!1!==n.enableRowHashing,n.rowIdentity=n.rowIdentity||function(t){return e.hashKey(t)},n.getRowIdentity=n.getRowIdentity||function(e){return e.$$hashKey},n.flatEntityAccess=!0===n.flatEntityAccess,n.showHeader=void 0===n.showHeader||n.showHeader,n.showHeader?n.headerRowHeight=void 0!==n.headerRowHeight?n.headerRowHeight:30:n.headerRowHeight=0,n.rowHeight=n.rowHeight||30,n.minRowsToShow=void 0!==n.minRowsToShow?n.minRowsToShow:10,n.showGridFooter=!0===n.showGridFooter,n.showColumnFooter=!0===n.showColumnFooter,n.columnFooterHeight=void 0!==n.columnFooterHeight?n.columnFooterHeight:30,n.gridFooterHeight=void 0!==n.gridFooterHeight?n.gridFooterHeight:30,n.columnWidth=void 0!==n.columnWidth?n.columnWidth:50,n.maxVisibleColumnCount=void 0!==n.maxVisibleColumnCount?n.maxVisibleColumnCount:200,n.virtualizationThreshold=void 0!==n.virtualizationThreshold?n.virtualizationThreshold:20,n.columnVirtualizationThreshold=void 0!==n.columnVirtualizationThreshold?n.columnVirtualizationThreshold:10,n.excessRows=void 0!==n.excessRows?n.excessRows:4,n.scrollThreshold=void 0!==n.scrollThreshold?n.scrollThreshold:4,n.excessColumns=void 0!==n.excessColumns?n.excessColumns:4,n.horizontalScrollThreshold=void 0!==n.horizontalScrollThreshold?n.horizontalScrollThreshold:2,n.aggregationCalcThrottle=void 0!==n.aggregationCalcThrottle?n.aggregationCalcThrottle:500,n.wheelScrollThrottle=void 0!==n.wheelScrollThrottle?n.wheelScrollThrottle:70,n.scrollDebounce=void 0!==n.scrollDebounce?n.scrollDebounce:300,n.enableSorting=!1!==n.enableSorting,n.enableFiltering=!0===n.enableFiltering,n.enableColumnMenus=!1!==n.enableColumnMenus,n.enableVerticalScrollbar=void 0!==n.enableVerticalScrollbar?n.enableVerticalScrollbar:t.scrollbars.ALWAYS,n.enableHorizontalScrollbar=void 0!==n.enableHorizontalScrollbar?n.enableHorizontalScrollbar:t.scrollbars.ALWAYS,n.enableMinHeightCheck=!1!==n.enableMinHeightCheck,n.minimumColumnSize=void 0!==n.minimumColumnSize?n.minimumColumnSize:10,n.rowEquality=n.rowEquality||function(e,t){return e===t},n.headerTemplate=n.headerTemplate||null,n.footerTemplate=n.footerTemplate||"ui-grid/ui-grid-footer",n.gridFooterTemplate=n.gridFooterTemplate||"ui-grid/ui-grid-grid-footer",n.rowTemplate=n.rowTemplate||"ui-grid/ui-grid-row",n.appScopeProvider=n.appScopeProvider||null,n}}}])}(),function(){angular.module("ui.grid").factory("GridRenderContainer",["gridUtil","uiGridConstants",function(e,t){function n(e,t,n){var i=this;i.name=e,i.grid=t,i.visibleRowCache=[],i.visibleColumnCache=[],i.renderedRows=[],i.renderedColumns=[],i.prevScrollTop=0,i.prevScrolltopPercentage=0,i.prevRowScrollIndex=0,i.prevScrollLeft=0,i.prevScrollleftPercentage=0,i.prevColumnScrollIndex=0,i.columnStyles="",i.viewportAdjusters=[],i.hasHScrollbar=!1,i.hasVScrollbar=!1,i.canvasHeightShouldUpdate=!0,i.$$canvasHeight=0,n&&angular.isObject(n)&&angular.extend(i,n),t.registerStyleComputation({priority:5,func:function(){return i.updateColumnWidths(),i.columnStyles}})}return n.prototype.reset=function(){this.visibleColumnCache.length=0,this.visibleRowCache.length=0,this.renderedRows.length=0,this.renderedColumns.length=0},n.prototype.containsColumn=function(e){return-1!==this.visibleColumnCache.indexOf(e)},n.prototype.minRowsToRender=function(){for(var e=this,t=0,n=0,i=e.getViewportHeight(),o=e.visibleRowCache.length-1;n<i&&o>=0;o--)n+=e.visibleRowCache[o].height,t++;return t},n.prototype.minColumnsToRender=function(){for(var e=this,t=this.getViewportWidth(),n=0,i=0,o=0;o<e.visibleColumnCache.length;o++){var r=e.visibleColumnCache[o];if(i<t)i+=r.drawnWidth?r.drawnWidth:0,n++;else{for(var a=0,s=o;s>=o-n;s--)a+=e.visibleColumnCache[s].drawnWidth?e.visibleColumnCache[s].drawnWidth:0;a<t&&n++}}return n},n.prototype.getVisibleRowCount=function(){return this.visibleRowCache.length},n.prototype.registerViewportAdjuster=function(e){this.viewportAdjusters.push(e)},n.prototype.removeViewportAdjuster=function(e){var t=this.viewportAdjusters.indexOf(e);t>-1&&this.viewportAdjusters.splice(t,1)},n.prototype.getViewportAdjustment=function(){var e=this,t={height:0,width:0};return e.viewportAdjusters.forEach(function(e){t=e.call(this,t)}),t},n.prototype.getMargin=function(e){var t=this,n=0;return t.viewportAdjusters.forEach(function(t){var i=t.call(this,{height:0,width:0});i.side&&i.side===e&&(n+=-1*i.width)}),n},n.prototype.getViewportHeight=function(){var e=this,t=e.headerHeight?e.headerHeight:e.grid.headerHeight,n=e.grid.gridHeight-t-e.grid.footerHeight;return n+=e.getViewportAdjustment().height},n.prototype.getViewportWidth=function(){var e=this,t=e.grid.gridWidth;return t+=e.getViewportAdjustment().width},n.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},n.prototype.getCanvasHeight=function(){var e=this;if(!e.canvasHeightShouldUpdate)return e.$$canvasHeight;var t=e.$$canvasHeight;return e.$$canvasHeight=0,e.visibleRowCache.forEach(function(t){e.$$canvasHeight+=t.height}),e.canvasHeightShouldUpdate=!1,e.grid.api.core.raise.canvasHeightChanged(t,e.$$canvasHeight),e.$$canvasHeight},n.prototype.getVerticalScrollLength=function(){return this.getCanvasHeight()-this.getViewportHeight()+this.grid.scrollbarHeight},n.prototype.getCanvasWidth=function(){return this.canvasWidth},n.prototype.setRenderedRows=function(e){this.renderedRows.length=e.length;for(var t=0;t<e.length;t++)this.renderedRows[t]=e[t]},n.prototype.setRenderedColumns=function(e){this.renderedColumns.length=e.length;for(var t=0;t<e.length;t++)this.renderedColumns[t]=e[t];this.updateColumnOffset()},n.prototype.updateColumnOffset=function(){for(var e=0,t=0;t<this.currentFirstColumn;t++)e+=this.visibleColumnCache[t].drawnWidth;this.columnOffset=e},n.prototype.scrollVertical=function(e){var n=-1;if(e!==this.prevScrollTop){var i=e-this.prevScrollTop;i>0&&(this.grid.scrollDirection=t.scrollDirection.DOWN),i<0&&(this.grid.scrollDirection=t.scrollDirection.UP);return n=e/this.getVerticalScrollLength(),n>1&&(n=1),n<0&&(n=0),this.adjustScrollVertical(e,n),n}},n.prototype.scrollHorizontal=function(e){var n=-1;if(e!==this.prevScrollLeft){var i=e-this.prevScrollLeft;i>0&&(this.grid.scrollDirection=t.scrollDirection.RIGHT),i<0&&(this.grid.scrollDirection=t.scrollDirection.LEFT);var o=this.canvasWidth-this.getViewportWidth();return n=0!==o?e/o:0,this.adjustScrollHorizontal(e,n),n}},n.prototype.adjustScrollVertical=function(e,t,n){(this.prevScrollTop!==e||n)&&(void 0!==e&&void 0!==e&&null!==e||(e=(this.getCanvasHeight()-this.getViewportHeight())*t),this.adjustRows(e,t,!1),this.prevScrollTop=e,this.prevScrolltopPercentage=t,this.grid.queueRefresh())},n.prototype.adjustScrollHorizontal=function(e,t,n){(this.prevScrollLeft!==e||n)&&(void 0!==e&&void 0!==e&&null!==e||(e=(this.getCanvasWidth()-this.getViewportWidth())*t),this.adjustColumns(e,t),this.prevScrollLeft=e,this.prevScrollleftPercentage=t,this.grid.queueRefresh())},n.prototype.adjustRows=function(e,t,n){var i=this,o=i.minRowsToRender(),r=i.visibleRowCache,a=r.length-o;void 0!==t&&null!==t||!e||(t=e/i.getVerticalScrollLength());var s=Math.ceil(Math.min(a,a*t));s>a&&(s=a);var l=[];if(r.length>i.grid.options.virtualizationThreshold){if(void 0!==e&&null!==e){if(!i.grid.suppressParentScrollDown&&i.prevScrollTop<e&&s<i.prevRowScrollIndex+i.grid.options.scrollThreshold&&s<a)return;if(!i.grid.suppressParentScrollUp&&i.prevScrollTop>e&&s>i.prevRowScrollIndex-i.grid.options.scrollThreshold&&s<a)return}var c={},d={};c=Math.max(0,s-i.grid.options.excessRows),d=Math.min(r.length,s+o+i.grid.options.excessRows),l=[c,d]}else{var u=i.visibleRowCache.length;l=[0,Math.max(u,o+i.grid.options.excessRows)]}i.updateViewableRowRange(l),i.prevRowScrollIndex=s},n.prototype.adjustColumns=function(e,t){var n=this,i=n.minColumnsToRender(),o=n.visibleColumnCache,r=o.length-i;if((void 0===t||null===t)&&e){t=e/(n.getCanvasWidth()-n.getViewportWidth())}var a=Math.ceil(Math.min(r,r*t));a>r&&(a=r);var s=[];if(o.length>n.grid.options.columnVirtualizationThreshold&&n.getCanvasWidth()>n.getViewportWidth()){s=[Math.max(0,a-n.grid.options.excessColumns),Math.min(o.length,a+i+n.grid.options.excessColumns)]}else{var l=n.visibleColumnCache.length;s=[0,Math.max(l,i+n.grid.options.excessColumns)]}n.updateViewableColumnRange(s),n.prevColumnScrollIndex=a},n.prototype.updateViewableRowRange=function(e){var t=this.visibleRowCache.slice(e[0],e[1]);this.currentTopRow=e[0],this.setRenderedRows(t)},n.prototype.updateViewableColumnRange=function(e){var t=this.visibleColumnCache.slice(e[0],e[1]);this.currentFirstColumn=e[0],this.setRenderedColumns(t)},n.prototype.headerCellWrapperStyle=function(){var e=this;if(0!==e.currentFirstColumn){var t=e.columnOffset;return e.grid.isRTL()?{"margin-right":t+"px"}:{"margin-left":t+"px"}}return null},n.prototype.updateColumnWidths=function(){var t=this,n=[],i=0,o=0,r="",a=t.grid.getViewportWidth()-t.grid.scrollbarWidth,s=[];angular.forEach(t.grid.renderContainers,function(e,t){s=s.concat(e.visibleColumnCache)}),s.forEach(function(t,r){var s=0;t.visible&&(angular.isNumber(t.width)?(s=parseInt(t.width,10),o+=s,t.drawnWidth=s):e.endsWith(t.width,"%")?(s=parseInt(parseInt(t.width.replace(/%/g,""),10)/100*a),s>t.maxWidth&&(s=t.maxWidth),s<t.minWidth&&(s=t.minWidth),o+=s,t.drawnWidth=s):angular.isString(t.width)&&-1!==t.width.indexOf("*")&&(i+=t.width.length,n.push(t)))});var l=a-o;if(n.length>0){var c=l/i;n.forEach(function(e){var t=parseInt(e.width.length*c,10);t>e.maxWidth&&(t=e.maxWidth),t<e.minWidth&&(t=e.minWidth),o+=t,e.drawnWidth=t})}for(var d=function(e){e.drawnWidth<e.maxWidth&&u>0&&(e.drawnWidth++,o++,u--,p=!0)},u=a-o,p=!0;u>0&&p;)p=!1,n.forEach(d);var g=function(e){e.drawnWidth>e.minWidth&&m>0&&(e.drawnWidth--,o--,m--,p=!0)},m=o-a;for(p=!0;m>0&&p;)p=!1,n.forEach(g);var f=0;t.visibleColumnCache.forEach(function(e){e.visible&&(f+=e.drawnWidth)}),s.forEach(function(e){r+=e.getColClassDefinition()}),t.canvasWidth=f,this.columnStyles=r},n.prototype.needsHScrollbarPlaceholder=function(){return this.grid.options.enableHorizontalScrollbar&&!this.hasHScrollbar&&!this.grid.disableScrolling},n.prototype.getViewportStyle=function(){var e=this,n={};return e.hasHScrollbar=!1,e.hasVScrollbar=!1,e.grid.disableScrolling?(n["overflow-x"]="hidden",n["overflow-y"]="hidden",n):("body"===e.name?(e.hasHScrollbar=e.grid.options.enableHorizontalScrollbar!==t.scrollbars.NEVER,e.grid.isRTL()?e.grid.hasLeftContainerColumns()||(e.hasVScrollbar=e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER):e.grid.hasRightContainerColumns()||(e.hasVScrollbar=e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER)):"left"===e.name?e.hasVScrollbar=!!e.grid.isRTL()&&e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER:e.hasVScrollbar=!e.grid.isRTL()&&e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER,n["overflow-x"]=e.hasHScrollbar?"scroll":"hidden",n["overflow-y"]=e.hasVScrollbar?"scroll":"hidden",n)},n}])}(),function(){angular.module("ui.grid").factory("GridRow",["gridUtil",function(e){function t(t,n,i){this.grid=i,this.entity=t,this.uid=e.nextUid(),this.visible=!0,this.$$height=i.options.rowHeight}return Object.defineProperty(t.prototype,"height",{get:function(){return this.$$height},set:function(e){e!==this.$$height&&(this.grid.updateCanvasHeight(),this.$$height=e)}}),t.prototype.getQualifiedColField=function(e){return"row."+this.getEntityQualifiedColField(e)},t.prototype.getEntityQualifiedColField=function(t){return e.preEval("entity."+t.field)},t.prototype.setRowInvisible=function(e){e&&e.setThisRowInvisible&&e.setThisRowInvisible("user")},t.prototype.clearRowInvisible=function(e){e&&e.clearThisRowInvisible&&e.clearThisRowInvisible("user")},t.prototype.setThisRowInvisible=function(e,t){this.invisibleReason||(this.invisibleReason={}),this.invisibleReason[e]=!0,this.evaluateRowVisibility(t)},t.prototype.clearThisRowInvisible=function(e,t){void 0!==this.invisibleReason&&delete this.invisibleReason[e],this.evaluateRowVisibility(t)},t.prototype.evaluateRowVisibility=function(e){var t=!0;void 0!==this.invisibleReason&&angular.forEach(this.invisibleReason,function(e,n){e&&(t=!1)}),void 0!==this.visible&&this.visible===t||(this.visible=t,e||(this.grid.queueGridRefresh(),this.grid.api.core.raise.rowsVisibleChanged(this)))},t}])}(),function(){angular.module("ui.grid").factory("GridRowColumn",["$parse","$filter",function(e,t){var n=function e(t,n){if(!(this instanceof e))throw"Using GridRowColumn as a function insead of as a constructor. Must be called with `new` keyword";this.row=t,this.col=n};return n.prototype.getIntersectionValueRaw=function(){return e(this.row.getEntityQualifiedColField(this.col))(this.row)},n.prototype.getIntersectionValueFiltered=function(){var e=this.getIntersectionValueRaw();if(this.col.cellFilter&&""!==this.col.cellFilter){var n=function(e){try{return t(e)}catch(e){return null}},i=n(this.col.cellFilter);if(i)e=i(e);else{var o,r=/([^:]*):([^:]*):?([\s\S]+)?/;null!==(o=r.exec(this.col.cellFilter))&&(e=t(o[1])(e,o[2],o[3]))}}return e},n}])}(),function(){angular.module("ui.grid").factory("ScrollEvent",["gridUtil",function(e){function t(t,n,i,o){var r=this;if(!t)throw new Error("grid argument is required");r.grid=t,r.source=o,r.withDelay=!0,r.sourceRowContainer=n,r.sourceColContainer=i,r.newScrollLeft=null,r.newScrollTop=null,r.x=null,r.y=null,r.verticalScrollLength=-9999999,r.horizontalScrollLength=-999999,r.fireThrottledScrollingEvent=e.throttle(function(e){r.grid.scrollContainers(e,r)},r.grid.options.wheelScrollThrottle,{trailing:!0})}return t.prototype.getNewScrollLeft=function(t,n){var i=this;if(!i.newScrollLeft){var o,r=t.getCanvasWidth()-t.getViewportWidth(),a=e.normalizeScrollLeft(n,i.grid);if(void 0!==i.x.percentage&&void 0!==i.x.percentage)o=i.x.percentage;else{if(void 0===i.x.pixels||void 0===i.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");o=i.x.percentage=(a+i.x.pixels)/r}return Math.max(0,o*r)}return i.newScrollLeft},t.prototype.getNewScrollTop=function(e,t){var n=this;if(!n.newScrollTop){var i,o=e.getVerticalScrollLength(),r=t[0].scrollTop;if(void 0!==n.y.percentage&&void 0!==n.y.percentage)i=n.y.percentage;else{if(void 0===n.y.pixels||void 0===n.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");i=n.y.percentage=(r+n.y.pixels)/o}return Math.max(0,i*o)}return n.newScrollTop},t.prototype.atTop=function(e){return this.y&&(0===this.y.percentage||this.verticalScrollLength<0)&&0===e},t.prototype.atBottom=function(e){return this.y&&(1===this.y.percentage||0===this.verticalScrollLength)&&e>0},t.prototype.atLeft=function(e){return this.x&&(0===this.x.percentage||this.horizontalScrollLength<0)&&0===e},t.prototype.atRight=function(e){return this.x&&(1===this.x.percentage||0===this.horizontalScrollLength)&&e>0},t.Sources={ViewPortScroll:"ViewPortScroll",RenderContainerMouseWheel:"RenderContainerMouseWheel",RenderContainerTouchMove:"RenderContainerTouchMove",Other:99},t}])}(),function(){angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$compile","$templateCache","uiGridConstants","Grid","GridColumn","GridRow",function(e,t,n,i,o,r,a,s){var l={createGrid:function(i){i=void 0!==i?i:{},i.id=e.newId();var o=new r(i);if(o.options.rowTemplate){var a=t.defer();o.getRowTemplateFn=a.promise,e.getTemplate(o.options.rowTemplate).then(function(e){var t=n(e);a.resolve(t)},function(e){throw new Error("Couldn't fetch/use row template '"+o.options.rowTemplate+"'")})}return o.registerColumnBuilder(l.defaultColumnBuilder),o.registerRowBuilder(l.rowTemplateAssigner),o.registerRowsProcessor(function(e){return e.forEach(function(e){e.evaluateRowVisibility(!0)},50),e}),o.registerColumnsProcessor(function(e){return e.forEach(function(e){e.visible=!0}),e},50),o.registerColumnsProcessor(function(e){return e.forEach(function(e){!1===e.colDef.visible&&(e.visible=!1)}),e},50),o.registerRowsProcessor(o.searchRows,100),o.options.externalSort&&angular.isFunction(o.options.externalSort)?o.registerRowsProcessor(o.options.externalSort,200):o.registerRowsProcessor(o.sortByColumn,200),o},defaultColumnBuilder:function(n,i,r){var a=[],s=function(t,r,s,l,c){n[t]?i[r]=n[t]:i[r]=s,a.push(e.getTemplate(i[r]).then(function(e){angular.isFunction(e)&&(e=e());var n="cellTooltip"===c?"col.cellTooltip(row,col)":"col.headerTooltip(col)";c&&!1===i[c]?e=e.replace(o.TOOLTIP,""):c&&i[c]&&(e=e.replace(o.TOOLTIP,'title="{{'+n+' CUSTOM_FILTERS }}"')),i[t]=l?e.replace(o.CUSTOM_FILTERS,function(){return i[l]?"|"+i[l]:""}):e},function(e){throw new Error("Couldn't fetch/use colDef."+t+" '"+n[t]+"'")}))};return s("cellTemplate","providedCellTemplate","ui-grid/uiGridCell","cellFilter","cellTooltip"),i.cellTemplatePromise=a[0],s("headerCellTemplate","providedHeaderCellTemplate","ui-grid/uiGridHeaderCell","headerCellFilter","headerTooltip"),s("footerCellTemplate","providedFooterCellTemplate","ui-grid/uiGridFooterCell","footerCellFilter"),s("filterHeaderTemplate","providedFilterHeaderTemplate","ui-grid/ui-grid-filter"),i.compiledElementFnDefer=t.defer(),t.all(a)},rowTemplateAssigner:function(i){var o=this;if(i.rowTemplate){var r=t.defer();i.getRowTemplateFn=r.promise,e.getTemplate(i.rowTemplate).then(function(e){var t=n(e);r.resolve(t)},function(e){throw new Error("Couldn't fetch/use row template '"+i.rowTemplate+"'")})}else i.rowTemplate=o.options.rowTemplate,i.getRowTemplateFn=o.getRowTemplateFn;return i.getRowTemplateFn}};return l}])}(),function(){function e(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}angular.module("ui.grid").service("rowSearcher",["gridUtil","uiGridConstants",function(t,n){var i=n.filter.CONTAINS,o={};return o.getTerm=function(e){if(void 0===e.term)return e.term;var t=e.term;return"string"==typeof t&&(t=t.trim()),t},o.stripTerm=function(t){var n=o.getTerm(t);return"string"==typeof n?e(n.replace(/(^\*|\*$)/g,"")):n},o.guessCondition=function(e){if(void 0===e.term||!e.term)return i;var t=o.getTerm(e);if(/\*/.test(t)){var n="";e.flags&&e.flags.caseSensitive||(n+="i");var r=t.replace(/(\\)?\*/g,function(e,t){return t?e:"[\\s\\S]*?"});return new RegExp("^"+r+"$",n)}return i},o.setupFilters=function(e){for(var i=[],r=e.length,a=0;a<r;a++){var s=e[a];if(s.noTerm||!t.isNullOrUndefined(s.term)){var l={},c="";s.flags&&s.flags.caseSensitive||(c+="i"),t.isNullOrUndefined(s.term)||(l.term=o.stripTerm(s)),s.condition?l.condition=s.condition:l.condition=o.guessCondition(s),l.flags=angular.extend({caseSensitive:!1,date:!1},s.flags),l.condition===n.filter.STARTS_WITH&&(l.startswithRE=new RegExp("^"+l.term,c)),l.condition===n.filter.ENDS_WITH&&(l.endswithRE=new RegExp(l.term+"$",c)),l.condition===n.filter.CONTAINS&&(l.containsRE=new RegExp(l.term,c)),l.condition===n.filter.EXACT&&(l.exactRE=new RegExp("^"+l.term+"$",c)),i.push(l)}}return i},o.runColumnFilter=function(e,t,i,o){var r,a=typeof o.condition,s=o.term;if(r=i.filterCellFiltered?e.getCellDisplayValue(t,i):e.getCellValue(t,i),o.condition instanceof RegExp)return o.condition.test(r);if("function"===a)return o.condition(s,r,t,i);if(o.startswithRE)return o.startswithRE.test(r);if(o.endswithRE)return o.endswithRE.test(r);if(o.containsRE)return o.containsRE.test(r);if(o.exactRE)return o.exactRE.test(r);if(o.condition===n.filter.NOT_EQUAL)return!new RegExp("^"+s+"$").exec(r);if("number"==typeof r&&"string"==typeof s){var l=parseFloat(s.replace(/\\\./,".").replace(/\\\-/,"-"));isNaN(l)||(s=l)}return!0===o.flags.date&&(r=new Date(r),s=new Date(s.replace(/\\/g,""))),o.condition===n.filter.GREATER_THAN?r>s:o.condition===n.filter.GREATER_THAN_OR_EQUAL?r>=s:o.condition===n.filter.LESS_THAN?r<s:o.condition!==n.filter.LESS_THAN_OR_EQUAL||r<=s},o.searchColumn=function(e,t,n,i){if(e.options.useExternalFiltering)return!0;for(var r=i.length,a=0;a<r;a++){var s=i[a];if(!o.runColumnFilter(e,t,n,s))return!1}return!0},o.search=function(e,n,i){if(n){if(!e.options.enableFiltering)return n;for(var r=[],a=i.length,s=function(e){var n=!1;return e.forEach(function(e){(!t.isNullOrUndefined(e.term)&&""!==e.term||e.noTerm)&&(n=!0)}),n},l=0;l<a;l++){var c=i[l];void 0!==c.filters&&s(c.filters)&&r.push({col:c,filters:o.setupFilters(c.filters)})}if(r.length>0){for(var d=function(e,t,n,i){t.visible&&!o.searchColumn(e,t,n,i)&&(t.visible=!1)},u=function(e,t){for(var i=n.length,o=0;o<i;o++)d(e,n[o],t.col,t.filters)},p=r.length,g=0;g<p;g++)u(e,r[g]);e.api.core.raise.rowsVisibleChanged&&e.api.core.raise.rowsVisibleChanged()}return n}},o}])}(),function(){angular.module("ui.grid").service("rowSorter",["$parse","uiGridConstants",function(e,t){var n="("+t.CURRENCY_SYMBOLS.map(function(e){return"\\"+e}).join("|")+")?",i=(new RegExp("^[-+]?"+n+"[\\d,.]+"+n+"%?$"),{colSortFnCache:{}});return i.guessSortFn=function(e){switch(e){case"number":return i.sortNumber;case"numberStr":return i.sortNumberStr;case"boolean":return i.sortBool;case"string":return i.sortAlpha;case"date":return i.sortDate;case"object":return i.basicSort;default:throw new Error("No sorting function found for type:"+e)}},i.handleNulls=function(e,t){if(!e&&0!==e&&!1!==e||!t&&0!==t&&!1!==t){if(!e&&0!==e&&!1!==e&&!t&&0!==t&&!1!==t)return 0;if(!e&&0!==e&&!1!==e)return 1;if(!t&&0!==t&&!1!==t)return-1}return null},i.basicSort=function(e,t){var n=i.handleNulls(e,t);return null!==n?n:e===t?0:e<t?-1:1},i.sortNumber=function(e,t){var n=i.handleNulls(e,t);return null!==n?n:e-t},i.sortNumberStr=function(e,t){var n=i.handleNulls(e,t);if(null!==n)return n;var o,r,a=!1,s=!1;return o=parseFloat(e.replace(/[^0-9.-]/g,"")),isNaN(o)&&(a=!0),r=parseFloat(t.replace(/[^0-9.-]/g,"")),isNaN(r)&&(s=!0),a&&s?0:a?1:s?-1:o-r},i.sortAlpha=function(e,t){var n=i.handleNulls(e,t);if(null!==n)return n;var o=e.toString().toLowerCase(),r=t.toString().toLowerCase();return o===r?0:o.localeCompare(r)},i.sortDate=function(e,t){var n=i.handleNulls(e,t);if(null!==n)return n;e instanceof Date||(e=new Date(e)),t instanceof Date||(t=new Date(t));var o=e.getTime(),r=t.getTime();return o===r?0:o<r?-1:1},i.sortBool=function(e,t){var n=i.handleNulls(e,t);return null!==n?n:e&&t?0:e||t?e?1:-1:0},i.getSortFn=function(e,t,n){var o;return i.colSortFnCache[t.colDef.name]?o=i.colSortFnCache[t.colDef.name]:void 0!==t.sortingAlgorithm?(o=t.sortingAlgorithm,i.colSortFnCache[t.colDef.name]=t.sortingAlgorithm):t.sortCellFiltered&&t.cellFilter?(o=i.sortAlpha,i.colSortFnCache[t.colDef.name]=o):(o=i.guessSortFn(t.colDef.type),o?i.colSortFnCache[t.colDef.name]=o:o=i.sortAlpha),o},i.prioritySort=function(e,t){return void 0!==e.sort.priority&&void 0!==t.sort.priority?e.sort.priority<t.sort.priority?-1:e.sort.priority===t.sort.priority?0:1:e.sort.priority||void 0===e.sort.priority?-1:t.sort.priority||void 0===t.sort.priority?1:0},i.sort=function(e,n,o){if(n){if(e.options.useExternalSorting)return n;var r=[];if(o.forEach(function(e){!e.sort||e.sort.ignoreSort||!e.sort.direction||e.sort.direction!==t.ASC&&e.sort.direction!==t.DESC||r.push(e)}),r=r.sort(i.prioritySort),0===r.length)return n;var a,s,l=function(e,t){e.entity.$$uiGridIndex=t};n.forEach(l);var c=n.slice(0),d=function(n,o){for(var l,d=0,u=0;0===d&&u<r.length;){a=r[u],s=r[u].sort.direction,l=i.getSortFn(e,a,c);var p,g;a.sortCellFiltered?(p=e.getCellDisplayValue(n,a),g=e.getCellDisplayValue(o,a)):(p=e.getCellValue(n,a),g=e.getCellValue(o,a)),d=l(p,g,n,o,s),u++}return 0===d?n.entity.$$uiGridIndex-o.entity.$$uiGridIndex:s===t.ASC?d:0-d},u=n.sort(d),p=function(e,t){delete e.entity.$$uiGridIndex};return n.forEach(p),u}},i}])}(),function(){function e(e){var t=e;return void 0!==t.length&&t.length&&(t=e[0]),t.ownerDocument.defaultView.getComputedStyle(t,null)}function t(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,a=0,s=["Top","Right","Bottom","Left"];r<4;r+=2){var l=s[r];if("margin"===n){var c=parseFloat(o[n+l]);isNaN(c)||(a+=c)}if(i){if("content"===n){var d=parseFloat(o["padding"+l]);isNaN(d)||(a-=d)}if("margin"!==n){var u=parseFloat(o["border"+l+"Width"]);isNaN(u)||(a-=u)}}else{var p=parseFloat(o["padding"+l]);if(isNaN(p)||(a+=p),"padding"!==n){var g=parseFloat(o["border"+l+"Width"]);isNaN(g)||(a+=g)}}}return a}function n(n,i,o){var r,s=!0,l=e(n),c="border-box"===l.boxSizing;if(r<=0||null==r){if(r=l[i],(r<0||null==r)&&(r=n.style[i]),a.test(r))return r;s=c&&!0,r=parseFloat(r)||0}return r+t(n,i,o||(c?"border":"content"),s,l)}function i(t){t=angular.element(t)[0];var n=t.parentElement;return n||(n=document.getElementsByTagName("body")[0]),parseInt(e(n).fontSize)||parseInt(e(t).fontSize)||16}var o,r=angular.module("ui.grid");"function"!=typeof Function.prototype.bind&&(o=function(){var e=Array.prototype.slice;return function(t){var n=this,i=e.call(arguments,1);return i.length?function(){return arguments.length?n.apply(t,i.concat(e.call(arguments))):n.apply(t,i)}:function(){return arguments.length?n.apply(t,arguments):n.call(t)}}});var a=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),s=/^(block|none|table(?!-c[ea]).+)/,l={position:"absolute",visibility:"hidden",display:"block"},c=["0","0","0","0"],d="uiGrid-";r.service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$interval","$injector","$q","$interpolate","uiGridConstants",function(r,a,u,p,g,m,f,h,v,y,b){function w(e,t){var n=angular.element(this),i=0,o=0,r=0,a=0;if(t.originalEvent&&(t=t.originalEvent),"detail"in t&&(r=-1*t.detail),"wheelDelta"in t&&(r=t.wheelDelta),"wheelDeltaY"in t&&(r=t.wheelDeltaY),"wheelDeltaX"in t&&(o=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(o=-1*r,r=0),i=0===r?o:r,"deltaY"in t&&(r=-1*t.deltaY,i=r),"deltaX"in t&&(o=t.deltaX,0===r&&(i=-1*o)),0!==r||0!==o){if(1===t.deltaMode){var s=n.data("mousewheel-line-height");i*=s,r*=s,o*=s}else if(2===t.deltaMode){var l=n.data("mousewheel-page-height");i*=l,r*=l,o*=l}a=Math.max(Math.abs(r),Math.abs(o)),(!I||a<I)&&(I=a,T(t,a)&&(I/=40)),i=Math[i>=1?"floor":"ceil"](i/I),o=Math[o>=1?"floor":"ceil"](o/I),r=Math[r>=1?"floor":"ceil"](r/I),t.deltaMode=0;var c={originalEvent:t,deltaX:o,deltaY:r,deltaFactor:I,preventDefault:function(){t.preventDefault()},stopPropagation:function(){t.stopPropagation()}};E&&clearTimeout(E),E=setTimeout(C,200),e.call(n[0],c)}}function C(){I=null}function T(e,t){return"mousewheel"===e.type&&t%120==0}var S={augmentWidthOrHeight:t,getStyles:e,createBoundedWrapper:function(e,t){return function(){return t.apply(e,arguments)}},readableColumnName:function(e){return void 0===e||void 0===e||null===e?e:("string"!=typeof e&&(e=String(e)),e.replace(/_+/g," ").replace(/^[A-Z]+$/,function(e){return angular.lowercase(angular.uppercase(e.charAt(0))+e.slice(1))}).replace(/([\w\u00C0-\u017F]+)/g,function(e){return angular.uppercase(e.charAt(0))+e.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(e,t){var n=[];if(!e||void 0===e[0]||void 0===e[0])return[];angular.isUndefined(t)&&(t=[]);var i=e[0];return angular.forEach(i,function(e,i){-1===t.indexOf(i)&&n.push({name:i})}),n},newId:function(){var e=(new Date).getTime();return function(){return e+=1}}(),getTemplate:function(e){if(g.get(e))return S.postProcessTemplate(g.get(e));if(e.hasOwnProperty("then"))return e.then(S.postProcessTemplate);try{if(angular.element(e).length>0)return v.when(e).then(S.postProcessTemplate)}catch(e){}return S.logDebug("fetching url",e),p({method:"GET",url:e}).then(function(t){var n=t.data.trim();return g.put(e,n),n},function(t){throw new Error("Could not get template "+e+": "+t)}).then(S.postProcessTemplate)},postProcessTemplate:function(e){var t=y.startSymbol(),n=y.endSymbol();return"{{"===t&&"}}"===n||(e=e.replace(/\{\{/g,t),e=e.replace(/\}\}/g,n)),v.when(e)},guessType:function(e){var t=typeof e;switch(t){case"number":case"boolean":case"string":return t;default:return angular.isDate(e)?"date":"object"}},elementWidth:function(e){},elementHeight:function(e){},getScrollbarWidth:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),t-i},swap:function(e,t,n,i){var o,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];o=n.apply(e,i||[]);for(r in t)e.style[r]=a[r];return o},fakeElement:function(e,t,n,i){var o,r,a=angular.element(e).clone()[0];for(r in t)a.style[r]=t[r];return angular.element(document.body).append(a),o=n.call(a,a),angular.element(a).remove(),o},normalizeWheelEvent:function(e){var t,n,i,o=e||window.event,r=([].slice.call(arguments,1),0),a=0,s=0,l=0,c=0;return o.originalEvent&&(o=o.originalEvent),o.wheelDelta&&(r=o.wheelDelta),o.detail&&(r=-1*o.detail),s=r,void 0!==o.axis&&o.axis===o.HORIZONTAL_AXIS&&(s=0,a=-1*r),o.deltaY&&(s=-1*o.deltaY,r=s),o.deltaX&&(a=o.deltaX,r=-1*a),void 0!==o.wheelDeltaY&&(s=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(a=o.wheelDeltaX),l=Math.abs(r),(!t||l<t)&&(t=l),c=Math.max(Math.abs(s),Math.abs(a)),(!n||c<n)&&(n=c),i=r>0?"floor":"ceil",r=Math[i](r/t),a=Math[i](a/n),s=Math[i](s/n),{delta:r,deltaX:a,deltaY:s}},isTouchEnabled:function(){var e;return("ontouchstart"in a||a.DocumentTouch&&u instanceof DocumentTouch)&&(e=!0),e},isNullOrUndefined:function(e){return void 0===e||null===e},endsWith:function(e,t){return!(!e||!t||"string"!=typeof e)&&-1!==e.indexOf(t,e.length-t.length)},arrayContainsObjectWithProperty:function(e,t,n){var i=!1;return angular.forEach(e,function(e){e[t]===n&&(i=!0)}),i},numericAndNullSort:function(e,t){return null===e?1:null===t?-1:null===e&&null===t?0:e-t},disableAnimations:function(e){var t;try{t=h.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?t.enabled(e,!1):t.enabled(!1,e)}catch(e){}},enableAnimations:function(e){var t;try{return t=h.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?t.enabled(e,!0):t.enabled(!0,e),t}catch(e){}},nextUid:function(){for(var e,t=c.length;t;){if(t--,57===(e=c[t].charCodeAt(0)))return c[t]="A",d+c.join("");if(90!==e)return c[t]=String.fromCharCode(e+1),d+c.join("");c[t]="0"}return c.unshift("0"),d+c.join("")},hashKey:function(e){var t,n=typeof e;return"object"===n&&null!==e?"function"==typeof(t=e.$$hashKey)?t=e.$$hashKey():void 0!==e.$$hashKey&&e.$$hashKey?t=e.$$hashKey:void 0===t&&(t=e.$$hashKey=S.nextUid()):t=e,n+":"+t},resetUids:function(){c=["0","0","0"]},logError:function(e){b.LOG_ERROR_MESSAGES&&r.error(e)},logWarn:function(e){b.LOG_WARN_MESSAGES&&r.warn(e)},logDebug:function(){b.LOG_DEBUG_MESSAGES&&r.debug.apply(r,arguments)}};S.focus={queue:[],byId:function(e,t){this._purgeQueue();var n=m(function(){var n=(t&&t.id?t.id+"-":"")+e,i=a.document.getElementById(n);i?i.focus():S.logWarn("[focus.byId] Element id "+n+" was not found.")});return this.queue.push(n),n},byElement:function(e){if(!angular.isElement(e))return S.logWarn("Trying to focus on an element that isn't an element."),v.reject("not-element");e=angular.element(e),this._purgeQueue();var t=m(function(){e&&e[0].focus()});return this.queue.push(t),t},bySelector:function(e,t,n){var i=this;if(!angular.isElement(e))throw new Error("The parent element is not an element.");e=angular.element(e);var o=function(){var n=e[0].querySelector(t);return i.byElement(n)};if(this._purgeQueue(),n){var r=m(o);return this.queue.push(m(o)),r}return o()},_purgeQueue:function(){this.queue.forEach(function(e){m.cancel(e)}),this.queue=[]}},["width","height"].forEach(function(t){var i=angular.uppercase(t.charAt(0))+t.substr(1);S["element"+i]=function(i,o){var r=i;if(r&&void 0!==r.length&&r.length&&(r=i[0]),r){var a=e(r);return 0===r.offsetWidth&&s.test(a.display)?S.swap(r,l,function(){return n(r,t,o)}):n(r,t,o)}return null},S["outerElement"+i]=function(e,t){return e?S["element"+i].call(this,e,t?"margin":"border"):null}}),S.closestElm=function(e,t){void 0!==e.length&&e.length&&(e=e[0]);var n;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(n=e,!0)});for(var i;null!==e;){if(null!==(i=e.parentElement)&&i[n](t))return i;e=i}return null},S.type=function(e){return Function.prototype.toString.call(e.constructor).match(/function (.*?)\(/)[1]},S.getBorderSize=function(t,n){void 0!==t.length&&t.length&&(t=t[0]);var i=e(t);n=n?"border"+n.charAt(0).toUpperCase()+n.slice(1):"border",n+="Width";var o=parseInt(i[n],10);return isNaN(o)?0:o},S.detectBrowser=function(){var e=a.navigator.userAgent,t={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer|trident\//i};for(var n in t)if(t[n].test(e))return n;return"unknown"},S.rtlScrollType=function e(){if(e.type)return e.type;var t=angular.element('<div dir="rtl" style="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll">A</div>')[0],n="reverse";return document.body.appendChild(t),t.scrollLeft>0?n="default":(t.scrollLeft=1,0===t.scrollLeft&&(n="negative")),angular.element(t).remove(),e.type=n,n},S.normalizeScrollLeft=function(e,t){void 0!==e.length&&e.length&&(e=e[0]);var n=e.scrollLeft;if(t.isRTL())switch(S.rtlScrollType()){case"default":return e.scrollWidth-n-e.clientWidth;case"negative":return Math.abs(n);case"reverse":return n}return n},S.denormalizeScrollLeft=function(e,t,n){if(void 0!==e.length&&e.length&&(e=e[0]),n.isRTL())switch(S.rtlScrollType()){case"default":return e.scrollWidth-e.clientWidth-t;case"negative":return-1*t;case"reverse":return t}return t},S.preEval=function(e){var t=b.BRACKET_REGEXP.exec(e);if(t)return(t[1]?S.preEval(t[1]):t[1])+t[2]+(t[3]?S.preEval(t[3]):t[3]);e=e.replace(b.APOS_REGEXP,"\\'");var n=e.split(b.DOT_REGEXP),i=[n.shift()];return angular.forEach(n,function(e){i.push(e.replace(b.FUNC_REGEXP,"']$1"))}),i.join("['")},S.debounce=function(e,t,n){function i(){a=this,r=arguments;var i=function(){o=null,n||(s=e.apply(a,r))},l=n&&!o;return o&&m.cancel(o),o=m(i,t,!1),l&&(s=e.apply(a,r)),s}var o,r,a,s;return i.cancel=function(){m.cancel(o),o=null},i},S.throttle=function(e,t,n){function i(t){a=+new Date,e.apply(o,r),f(function(){s=null},0,1,!1)}n=n||{};var o,r,a=0,s=null;return function(){if(o=this,r=arguments,null===s){var e=+new Date-a;e>t?i():n.trailing&&(s=f(i,t-e,1,!1))}}},S.on={},S.off={},S._events={},S.addOff=function(e){S.off[e]=function(t,n){var i=S._events[e].indexOf(n);i>0&&S._events[e].removeAt(i)}};var E,I,x="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];return S.on.mousewheel=function(e,t){if(e&&t){var n=angular.element(e);n.data("mousewheel-line-height",i(n)),n.data("mousewheel-page-height",S.elementHeight(n)),n.data("mousewheel-callbacks")||n.data("mousewheel-callbacks",{});var r=n.data("mousewheel-callbacks");r[t]=(Function.prototype.bind||o).call(w,n[0],t);for(var a=x.length;a;)n.on(x[--a],r[t])}},S.off.mousewheel=function(e,t){var n=angular.element(e),i=n.data("mousewheel-callbacks"),o=i[t];if(o)for(var r=x.length;r;)n.off(x[--r],o);delete i[t],0===Object.keys(i).length&&(n.removeData("mousewheel-line-height"),n.removeData("mousewheel-page-height"),n.removeData("mousewheel-callbacks"))},S}]),r.filter("px",function(){return function(e){return e.match(/^[\d\.]+$/)?e+"px":e}})}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){var t={aggregate:{label:"poloÅ¾ky"},groupPanel:{description:"PÅesuÅte zÃ¡hlavÃ­ zde pro vytvoÅenÃ­ skupiny dle sloupce."},search:{placeholder:"Hledat...",showingItems:"Zobrazuji poloÅ¾ky:",selectedItems:"VybranÃ© poloÅ¾ky:",totalItems:"Celkem poloÅ¾ek:",size:"Velikost strany:",first:"PrvnÃ­ strana",next:"DalÅ¡Ã­ strana",previous:"PÅedchozÃ­ strana",last:"PoslednÃ­ strana"},menu:{text:"Vyberte sloupec:"},sort:{ascending:"SeÅadit od A-Z",descending:"SeÅadit od Z-A",remove:"Odebrat seÅazenÃ­"},column:{hide:"Schovat sloupec"},aggregation:{count:"celkem ÅÃ¡dkÅ¯: ",sum:"celkem: ",avg:"avg: ",min:"min.: ",max:"max.: "},pinning:{pinLeft:"Zamknout vlevo",pinRight:"Zamknout vpravo",unpin:"Odemknout"},gridMenu:{columns:"Sloupce:",importerTitle:"Importovat soubor",exporterAllAsCsv:"Exportovat vÅ¡echna data do csv",exporterVisibleAsCsv:"Exportovat viditelnÃ¡ data do csv",exporterSelectedAsCsv:"Exportovat vybranÃ¡ data do csv",exporterAllAsPdf:"Exportovat vÅ¡echna data do pdf",exporterVisibleAsPdf:"Exportovat viditelnÃ¡ data do pdf",exporterSelectedAsPdf:"Exportovat vybranÃ¡ data do pdf",clearAllFilters:"Odstranit vÅ¡echny filtry"},importer:{noHeaders:"NÃ¡zvy sloupcÅ¯ se nepodaÅilo zÃ­skat, obsahuje soubor zÃ¡hlavÃ­?",noObjects:"Data se nepodaÅilo zpracovat, obsahuje soubor ÅÃ¡dky mimo zÃ¡hlavÃ­?",invalidCsv:"Soubor nelze zpracovat, jednÃ¡ se o CSV?",invalidJson:"Soubor nelze zpracovat, je to JSON?",jsonNotArray:"Soubor musÃ­ obsahovat json. UkonÄuji.."},pagination:{sizes:"poloÅ¾ek na strÃ¡nku",totalItems:"poloÅ¾ek"},grouping:{group:"Seskupit",ungroup:"Odebrat seskupenÃ­",aggregate_count:"Agregace: Count",aggregate_sum:"Agregace: Sum",aggregate_max:"Agregace: Max",aggregate_min:"Agregace: Min",aggregate_avg:"Agregace: Avg",aggregate_remove:"Agregace: Odebrat"}};return e.add("cs",t),e.add("cz",t),e.add("cs-cz",t),e.add("cs-CZ",t),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"GrupÃ©r rÃ¦kker udfra en kolonne ved at trÃ¦kke dens overskift hertil."},search:{placeholder:"SÃ¸g...",showingItems:"Viste rÃ¦kker:",selectedItems:"Valgte rÃ¦kker:",totalItems:"RÃ¦kker totalt:",size:"Side stÃ¸rrelse:",first:"FÃ¸rste side",next:"NÃ¦ste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"VÃ¦lg kolonner:"},sort:{ascending:"Sorter stigende",descending:"Sorter faldende",none:"Sorter ingen",remove:"Fjern sortering"},column:{hide:"Skjul kolonne"},aggregation:{count:"antal rÃ¦kker: ",sum:"sum: ",avg:"gns: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("de",{headerCell:{aria:{defaultFilterLabel:"Filter fÃ¼r Spalte",removeFilter:"Filter lÃ¶schen",columnMenuButtonLabel:"SpaltenmenÃ¼"},priority:"PrioritÃ¤t:",filterLabel:"Filter fÃ¼r Spalte: "},aggregate:{label:"Eintrag"},groupPanel:{description:"Ziehen Sie eine SpaltenÃ¼berschrift hierhin, um nach dieser Spalte zu gruppieren."},search:{placeholder:"Suche...",showingItems:"Zeige EintrÃ¤ge:",selectedItems:"AusgewÃ¤hlte EintrÃ¤ge:",totalItems:"EintrÃ¤ge gesamt:",size:"EintrÃ¤ge pro Seite:",first:"Erste Seite",next:"NÃ¤chste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten auswÃ¤hlen:"},sort:{ascending:"aufsteigend sortieren",descending:"absteigend sortieren",none:"keine Sortierung",remove:"Sortierung zurÃ¼cksetzen"},column:{hide:"Spalte ausblenden"},aggregation:{count:"Zeilen insgesamt: ",sum:"gesamt: ",avg:"Durchschnitt: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Links anheften",pinRight:"Rechts anheften",unpin:"LÃ¶sen"},columnMenu:{close:"SchlieÃen"},gridMenu:{aria:{buttonLabel:"TabellenmenÃ¼"},columns:"Spalten:",importerTitle:"Datei importieren",exporterAllAsCsv:"Alle Daten als CSV exportieren",exporterVisibleAsCsv:"sichtbare Daten als CSV exportieren",exporterSelectedAsCsv:"markierte Daten als CSV exportieren",exporterAllAsPdf:"Alle Daten als PDF exportieren",exporterVisibleAsPdf:"sichtbare Daten als PDF exportieren",exporterSelectedAsPdf:"markierte Daten als CSV exportieren",clearAllFilters:"Alle Filter zurÃ¼cksetzen"},importer:{noHeaders:"Es konnten keine Spaltennamen ermittelt werden. Sind in der Datei Spaltendefinitionen enthalten?",noObjects:"Es konnten keine Zeileninformationen gelesen werden, Sind in der Datei auÃer den Spaltendefinitionen auch Daten enthalten?",invalidCsv:"Die Datei konnte nicht eingelesen werden, ist es eine gÃ¼ltige CSV-Datei?",invalidJson:"Die Datei konnte nicht eingelesen werden. EnthÃ¤lt sie gÃ¼ltiges JSON?",jsonNotArray:"Die importierte JSON-Datei muÃ ein Array enthalten. Breche Import ab."},pagination:{aria:{pageToFirst:"Zum Anfang",pageBack:"Seite zurÃ¼ck",pageSelected:"AusgwÃ¤hlte Seite",pageForward:"Seite vor",pageToLast:"Zum Ende"},sizes:"EintrÃ¤ge pro Seite",totalItems:"EintrÃ¤ge",through:"bis",of:"von"},grouping:{group:"Gruppieren",ungroup:"Gruppierung aufheben",aggregate_count:"Agg: Anzahl",aggregate_sum:"Agg: Summe",aggregate_max:"Agg: Maximum",aggregate_min:"Agg: Minimum",aggregate_avg:"Agg: Mittelwert",aggregate_remove:"Aggregation entfernen"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("en",{headerCell:{aria:{defaultFilterLabel:"Filter for column",removeFilter:"Remove Filter",columnMenuButtonLabel:"Column Menu"},priority:"Priority:",filterLabel:"Filter for column: "},aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",none:"Sort None",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},columnMenu:{close:"Close"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Page to first",pageBack:"Page back",pageSelected:"Selected page",pageForward:"Page forward",pageToLast:"Page to last"},sizes:"items per page",totalItems:"items",through:"through",of:"of"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"},validate:{error:"Error:",minLength:"Value should be at least THRESHOLD characters long.",maxLength:"Value should be at most THRESHOLD characters long.",required:"A value is needed."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("es",{aggregate:{label:"ArtÃ­culos"},groupPanel:{description:"Arrastre un encabezado de columna aquÃ­ y suÃ©ltelo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"ArtÃ­culos Mostrados:",selectedItems:"ArtÃ­culos Seleccionados:",totalItems:"ArtÃ­culos Totales:",size:"TamaÃ±o de PÃ¡gina:",first:"Primera PÃ¡gina",next:"PÃ¡gina Siguiente",previous:"PÃ¡gina Anterior",last:"Ãltima PÃ¡gina"},menu:{text:"Elegir columnas:"},sort:{ascending:"Orden Ascendente",descending:"Orden Descendente",remove:"Sin Ordenar"},column:{hide:"Ocultar la columna"},aggregation:{count:"filas totales: ",sum:"total: ",avg:"media: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fijar a la Izquierda",pinRight:"Fijar a la Derecha",unpin:"Quitar FijaciÃ³n"},gridMenu:{columns:"Columnas:",importerTitle:"Importar archivo",exporterAllAsCsv:"Exportar todo como csv",exporterVisibleAsCsv:"Exportar vista como csv",exporterSelectedAsCsv:"Exportar selecciÃ³n como csv",exporterAllAsPdf:"Exportar todo como pdf",exporterVisibleAsPdf:"Exportar vista como pdf",exporterSelectedAsPdf:"Exportar selecciÃ³n como pdf",clearAllFilters:"Limpiar todos los filtros"},importer:{noHeaders:"No fue posible derivar los nombres de las columnas, Â¿tiene encabezados el archivo?",noObjects:"No fue posible obtener registros, Â¿contiene datos el archivo, aparte de los encabezados?",invalidCsv:"No fue posible procesar el archivo, Â¿es un CSV vÃ¡lido?",invalidJson:"No fue posible procesar el archivo, Â¿es un Json vÃ¡lido?",jsonNotArray:"El archivo json importado debe contener un array, abortando."},pagination:{sizes:"registros por pÃ¡gina",totalItems:"registros",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Cont",aggregate_sum:"Agr: Sum",aggregate_max:"Agr: MÃ¡x",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Prom",aggregate_remove:"Agr: Quitar"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("fa",{aggregate:{label:"ÙÙÙ"},groupPanel:{description:"Ø¹ÙÙØ§Ù ÛÚ© Ø³ØªÙÙ Ø±Ø§ Ø¨Ú¯ÛØ± Ù Ø¨Ù Ú¯Ø±ÙÙÛ Ø§Ø² Ø¢Ù Ø³ØªÙÙ Ø±ÙØ§ Ú©Ù."},search:{placeholder:"Ø¬Ø³ØªØ¬Ù...",showingItems:"ÙÙØ§ÛØ´ Ø§ÙÙØ§Ù:",selectedItems:"ÙÙÙâÙØ§Û Ø§ÙØªØ®Ø§Ø¨ Ø´Ø¯Ù:",totalItems:"ÙØ¬ÙÙØ¹ Ø§ÙÙØ§Ù:",size:"Ø§ÙØ¯Ø§Ø²ÙâÛ ØµÙØ­Ù:",first:"Ø§ÙÙÛÙ ØµÙØ­Ù",next:"ØµÙØ­ÙâÛâØ¨Ø¹Ø¯Û",previous:"ØµÙØ­ÙâÛâ ÙØ¨ÙÛ",last:"Ø¢Ø®Ø±ÛÙ ØµÙØ­Ù"},menu:{text:"Ø³ØªÙÙâÙØ§Û Ø§ÙØªØ®Ø§Ø¨Û:"},sort:{ascending:"ØªØ±ØªÛØ¨ ØµØ¹ÙØ¯Û",descending:"ØªØ±ØªÛØ¨ ÙØ²ÙÙÛ",remove:"Ø­Ø°Ù ÙØ±ØªØ¨ Ú©Ø±Ø¯Ù"},column:{hide:"Ù¾ÙÙØ§ÙâÚ©Ø±Ø¯Ù Ø³ØªÙÙ"},aggregation:{count:"ØªØ¹Ø¯Ø§Ø¯: ",sum:"ÙØ¬ÙÙØ¹: ",avg:"ÙÛØ§ÙÚ¯ÛÙ: ",min:"Ú©ÙØªØ±ÛÙ: ",max:"Ø¨ÛØ´ØªØ±ÛÙ: "},pinning:{pinLeft:"Ù¾ÛÙ Ú©Ø±Ø¯Ù Ø³ÙØª ÚÙ¾",pinRight:"Ù¾ÛÙ Ú©Ø±Ø¯Ù Ø³ÙØª Ø±Ø§Ø³Øª",unpin:"Ø­Ø°Ù Ù¾ÛÙ"},gridMenu:{columns:"Ø³ØªÙÙâÙØ§:",importerTitle:"ÙØ§Ø±Ø¯ Ú©Ø±Ø¯Ù ÙØ§ÛÙ",exporterAllAsCsv:"Ø®Ø±ÙØ¬Û ØªÙØ§Ù Ø¯Ø§Ø¯ÙâÙØ§ Ø¯Ø± ÙØ§ÛÙ csv",exporterVisibleAsCsv:"Ø®Ø±ÙØ¬Û Ø¯Ø§Ø¯ÙâÙØ§Û ÙØ§Ø¨Ù ÙØ´Ø§ÙØ¯Ù Ø¯Ø± ÙØ§ÛÙ csv",exporterSelectedAsCsv:"Ø®Ø±ÙØ¬Û Ø¯Ø§Ø¯ÙâÙØ§Û Ø§ÙØªØ®Ø§Ø¨âØ´Ø¯Ù Ø¯Ø± ÙØ§ÛÙ csv",exporterAllAsPdf:"Ø®Ø±ÙØ¬Û ØªÙØ§Ù Ø¯Ø§Ø¯ÙâÙØ§ Ø¯Ø± ÙØ§ÛÙ pdf",exporterVisibleAsPdf:"Ø®Ø±ÙØ¬Û Ø¯Ø§Ø¯ÙâÙØ§Û ÙØ§Ø¨Ù ÙØ´Ø§ÙØ¯Ù Ø¯Ø± ÙØ§ÛÙ pdf",exporterSelectedAsPdf:"Ø®Ø±ÙØ¬Û Ø¯Ø§Ø¯ÙâÙØ§Û Ø§ÙØªØ®Ø§Ø¨âØ´Ø¯Ù Ø¯Ø± ÙØ§ÛÙ pdf",clearAllFilters:"Ù¾Ø§Ú© Ú©Ø±Ø¯Ù ØªÙØ§Ù ÙÛÙØªØ±"},importer:{noHeaders:"ÙØ§Ù Ø³ØªÙÙ ÙØ§Ø¨Ù Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙÛØ³Øª. Ø¢ÛØ§ ÙØ§ÛÙ Ø¹ÙÙØ§Ù Ø¯Ø§Ø±Ø¯Ø",noObjects:"Ø§Ø´ÛØ§ ÙØ§Ø¨Ù Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙÛØ³ØªÙØ¯. Ø¢ÛØ§ Ø¨Ù Ø¬Ø² Ø¹ÙÙØ§ÙâÙØ§ Ø¯Ø± ÙØ§ÛÙ Ø¯Ø§Ø¯Ù ÙØ¬ÙØ¯ Ø¯Ø§Ø±Ø¯Ø",invalidCsv:"ÙØ§ÛÙ ÙØ§Ø¨Ù Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙÛØ³Øª. Ø¢ÛØ§ ÙØ±ÙØª  csv  ÙØ¹ØªØ¨Ø± Ø§Ø³ØªØ",invalidJson:"ÙØ§ÛÙ ÙØ§Ø¨Ù Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙÛØ³Øª. Ø¢ÛØ§ ÙØ±ÙØª json   ÙØ¹ØªØ¨Ø± Ø§Ø³ØªØ",jsonNotArray:"ÙØ§ÛÙ json ÙØ§Ø±Ø¯ Ø´Ø¯Ù Ø¨Ø§ÛØ¯ Ø­Ø§ÙÛ Ø¢Ø±Ø§ÛÙ Ø¨Ø§Ø´Ø¯. Ø¹ÙÙÛØ§Øª Ø³Ø§ÙØ· Ø´Ø¯."},pagination:{sizes:"Ø§ÙÙØ§Ù Ø¯Ø± ÙØ± ØµÙØ­Ù",totalItems:"Ø§ÙÙØ§Ù",of:"Ø§Ø²"},grouping:{group:"Ú¯Ø±ÙÙâØ¨ÙØ¯Û",ungroup:"Ø­Ø°Ù Ú¯Ø±ÙÙâØ¨ÙØ¯Û",aggregate_count:"Agg: ØªØ¹Ø¯Ø§Ø¯",aggregate_sum:"Agg: Ø¬ÙØ¹",aggregate_max:"Agg: Ø¨ÛØ´ÛÙÙ",aggregate_min:"Agg: Ú©ÙÛÙÙ",aggregate_avg:"Agg: ÙÛØ§ÙÚ¯ÛÙ",aggregate_remove:"Agg: Ø­Ø°Ù"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("fi",{aggregate:{label:"rivit"},groupPanel:{description:"Raahaa ja pudota otsikko tÃ¤hÃ¤n ryhmittÃ¤Ã¤ksesi sarakkeen mukaan."},search:{placeholder:"Hae...",showingItems:"NÃ¤ytetÃ¤Ã¤n rivejÃ¤:",selectedItems:"Valitut rivit:",totalItems:"RivejÃ¤ yht.:",size:"NÃ¤ytÃ¤:",first:"EnsimmÃ¤inen sivu",next:"Seuraava sivu",previous:"Edellinen sivu",last:"Viimeinen sivu"},menu:{text:"Valitse sarakkeet:"},sort:{ascending:"JÃ¤rjestÃ¤ nouseva",descending:"JÃ¤rjestÃ¤ laskeva",remove:"Poista jÃ¤rjestys"},column:{hide:"Piilota sarake"},aggregation:{count:"RivejÃ¤ yht.: ",sum:"Summa: ",avg:"K.a.: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Lukitse vasemmalle",pinRight:"Lukitse oikealle",unpin:"Poista lukitus"},gridMenu:{columns:"Sarakkeet:",importerTitle:"Tuo tiedosto",exporterAllAsCsv:"Vie tiedot csv-muodossa",exporterVisibleAsCsv:"Vie nÃ¤kyvÃ¤ tieto csv-muodossa",exporterSelectedAsCsv:"Vie valittu tieto csv-muodossa",exporterAllAsPdf:"Vie tiedot pdf-muodossa",exporterVisibleAsPdf:"Vie nÃ¤kyvÃ¤ tieto pdf-muodossa",exporterSelectedAsPdf:"Vie valittu tieto pdf-muodossa",clearAllFilters:"Puhdista kaikki suodattimet"},importer:{noHeaders:"Sarakkeen nimiÃ¤ ei voitu pÃ¤Ã¤tellÃ¤, onko tiedostossa otsikkoriviÃ¤?",noObjects:"Tietoja ei voitu lukea, onko tiedostossa muuta kuin otsikkot?",invalidCsv:"Tiedostoa ei voitu kÃ¤sitellÃ¤, oliko se CSV-muodossa?",invalidJson:"Tiedostoa ei voitu kÃ¤sitellÃ¤, oliko se JSON-muodossa?",jsonNotArray:"Tiedosto ei sisÃ¤ltÃ¤nyt taulukkoa, lopetetaan."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("fr",{aggregate:{label:"Ã©lÃ©ments"},groupPanel:{description:"Faites glisser une en-tÃªte de colonne ici pour crÃ©er un groupe de colonnes."},search:{placeholder:"Recherche...",showingItems:"Affichage des Ã©lÃ©ments :",selectedItems:"ÃlÃ©ments sÃ©lectionnÃ©s :",totalItems:"Nombre total d'Ã©lÃ©ments:",size:"Taille de page:",first:"PremiÃ¨re page",next:"Page Suivante",previous:"Page prÃ©cÃ©dente",last:"DerniÃ¨re page"},menu:{text:"Choisir des colonnes :"},sort:{ascending:"Trier par ordre croissant",descending:"Trier par ordre dÃ©croissant",remove:"Enlever le tri"},column:{hide:"Cacher la colonne"},aggregation:{count:"lignes totales: ",sum:"total: ",avg:"moy: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Ãpingler Ã  gauche",pinRight:"Ãpingler Ã  droite",unpin:"DÃ©tacher"},gridMenu:{columns:"Colonnes:",importerTitle:"Importer un fichier",exporterAllAsCsv:"Exporter toutes les donnÃ©es en CSV",exporterVisibleAsCsv:"Exporter les donnÃ©es visibles en CSV",exporterSelectedAsCsv:"Exporter les donnÃ©es sÃ©lectionnÃ©es en CSV",exporterAllAsPdf:"Exporter toutes les donnÃ©es en PDF",exporterVisibleAsPdf:"Exporter les donnÃ©es visibles en PDF",exporterSelectedAsPdf:"Exporter les donnÃ©es sÃ©lectionnÃ©es en PDF",clearAllFilters:"Nettoyez tous les filtres"},importer:{noHeaders:"Impossible de dÃ©terminer le nom des colonnes, le fichier possÃ¨de-t-il une en-tÃªte ?",noObjects:"Aucun objet trouvÃ©, le fichier possÃ¨de-t-il des donnÃ©es autres que l'en-tÃªte ?",invalidCsv:"Le fichier n'a pas pu Ãªtre traitÃ©, le CSV est-il valide ?",invalidJson:"Le fichier n'a pas pu Ãªtre traitÃ©, le JSON est-il valide ?",jsonNotArray:"Le fichier JSON importÃ© doit contenir un tableau, abandon."},pagination:{sizes:"Ã©lÃ©ments par page",totalItems:"Ã©lÃ©ments",of:"sur"},grouping:{group:"Grouper",ungroup:"DÃ©grouper",aggregate_count:"Agg: Compte",aggregate_sum:"Agg: Somme",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Moy",aggregate_remove:"Agg: Retirer"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("he",{aggregate:{label:"items"},groupPanel:{description:"××¨××¨ ×¢×××× ×××× ××©××¨×¨ ×××× ××§××¥ ×¢×××× ××."},search:{placeholder:"××¤×©...",showingItems:"××¦××:",selectedItems:'×¡×"× × ×××¨×:',totalItems:'×¡×"× ×¨×©××××ª:',size:"×ª××¦×××ª ×××£:",first:"××£ ×¨××©××",next:"××£ ×××",previous:"××£ ×§×××",last:"××£ ×××¨××"},menu:{text:"×××¨ ×¢×××××ª:"},sort:{ascending:"×¡××¨ ×¢×××",descending:"×¡××¨ ×××¨×",remove:"×××"},column:{hide:"×××¨ ××¡×ª×¨"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clean all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("hy",{aggregate:{label:"Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥Ö"},groupPanel:{description:"Ô¸Õ½Õ¿ Õ½ÕµÕ¡Õ¶ Õ­Õ´Õ¢Õ¡Õ¾Õ¸ÖÕ¥Õ¬Õ¸Ö Õ°Õ¡Õ´Õ¡Ö ÖÕ¡Õ·Õ¥Ö Ö Õ£ÖÕ¥Ö Õ¾Õ¥ÖÕ¶Õ¡Õ£Õ«ÖÕ¶ Õ¡ÕµÕ½Õ¿Õ¥Õ²Ö"},search:{placeholder:"ÕÕ¶Õ¿ÖÕ¸ÖÕ´...",showingItems:"ÕÕ¸ÖÖÕ¡Õ¤ÖÕ¾Õ¡Õ® Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÕ",selectedItems:"Ô¸Õ¶Õ¿ÖÕ¾Õ¡Õ®:",totalItems:"Ô¸Õ¶Õ¤Õ¡Õ´Õ¥Õ¶Õ¨Õ",size:"ÕÕ¸Õ²Õ¥ÖÕ« ÖÕ¡Õ¶Õ¡Õ¯Õ¨ Õ§Õ»Õ¸ÖÕ´Õ",first:"Ô±Õ¼Õ¡Õ»Õ«Õ¶ Õ§Õ»",next:"ÕÕ¡Õ»Õ¸ÖÕ¤ Õ§Õ»",previous:"ÕÕ¡Õ­Õ¸ÖÕ¤ Õ§Õ»",last:"ÕÕ¥ÖÕ»Õ«Õ¶ Õ§Õ»"},menu:{text:"Ô¸Õ¶Õ¿ÖÕ¥Õ¬ Õ½ÕµÕ¸ÖÕ¶Õ¥ÖÕ¨:"},sort:{ascending:"Ô±Õ³Õ´Õ¡Õ¶ Õ¯Õ¡ÖÕ£Õ¸Õ¾",descending:"ÕÕ¾Õ¡Õ¦Õ´Õ¡Õ¶ Õ¯Õ¡ÖÕ£Õ¸Õ¾",remove:"ÕÕ¡Õ¶Õ¥Õ¬ "},column:{hide:"Ô¹Õ¡ÖÖÕ¶Õ¥Õ¬ Õ½ÕµÕ¸ÖÕ¶Õ¨"},aggregation:{count:"Õ¨Õ¶Õ¤Õ¡Õ´Õ¥Õ¶Õ¨ Õ¿Õ¸Õ²Õ ",sum:"Õ¨Õ¶Õ¤Õ¡Õ´Õ¥Õ¶Õ¨Õ ",avg:"Õ´Õ«Õ»Õ«Õ¶Õ ",min:"Õ´Õ«Õ¶Õ ",max:"Õ´Õ¡ÖÕ½Õ "},pinning:{pinLeft:"Ô¿ÕºÖÕ¶Õ¥Õ¬ Õ±Õ¡Õ­ Õ¯Õ¸Õ²Õ´Õ¸ÖÕ´",pinRight:"Ô¿ÕºÖÕ¶Õ¥Õ¬ Õ¡Õ» Õ¯Õ¸Õ²Õ´Õ¸ÖÕ´",unpin:"Ô±ÖÕ±Õ¡Õ¯Õ¥Õ¬"},gridMenu:{columns:"ÕÕµÕ¸ÖÕ¶Õ¥Ö:",importerTitle:"ÕÕ¥ÖÕ´Õ¸ÖÕ®Õ¥Õ¬ ÖÕ¡ÕµÕ¬",exporterAllAsCsv:"Ô±ÖÕ¿Õ¡Õ°Õ¡Õ¶Õ¥Õ¬ Õ¡Õ´Õ¢Õ¸Õ²Õ»Õ¨ CSV",exporterVisibleAsCsv:"Ô±ÖÕ¿Õ¡Õ°Õ¡Õ¶Õ¥Õ¬ Õ¥ÖÖÕ¡ÖÕ¸Õ² Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÕ¨ CSV",exporterSelectedAsCsv:"Ô±ÖÕ¿Õ¡Õ°Õ¡Õ¶Õ¥Õ¬ Õ¨Õ¶Õ¿ÖÕ¾Õ¡Õ® Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÕ¨ CSV",exporterAllAsPdf:"Ô±ÖÕ¿Õ¡Õ°Õ¡Õ¶Õ¥Õ¬ PDF",exporterVisibleAsPdf:"Ô±ÖÕ¿Õ¡Õ°Õ¡Õ¶Õ¥Õ¬ Õ¥ÖÖÕ¡ÖÕ¸Õ² Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÕ¨ PDF",exporterSelectedAsPdf:"Ô±ÖÕ¿Õ¡Õ°Õ¡Õ¶Õ¥Õ¬ Õ¨Õ¶Õ¿ÖÕ¾Õ¡Õ® Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÕ¨ PDF",clearAllFilters:"ÕÕ¡ÖÖÕ¥Õ¬ Õ¢Õ¸Õ¬Õ¸Ö ÖÕ«Õ¬Õ¿ÖÕ¥ÖÕ¨"},importer:{noHeaders:"ÕÕ¶Õ¡ÖÕ¡Õ¾Õ¸Ö Õ¹Õ¥Õ²Õ¡Õ¾ Õ¸ÖÕ¸Õ·Õ¥Õ¬ Õ½ÕµÕ¡Õ¶ Õ¾Õ¥ÖÕ¶Õ¡Õ£ÖÕ¥ÖÕ¨Ö Ô±ÖÕ¤ÕµÕ¸ÕÖ ÖÕ¡ÕµÕ¬Õ¨ Õ¸ÖÕ¶Õ« Õ¾Õ¥ÖÕ¶Õ¡Õ£ÖÕ¥ÖÖ",noObjects:"ÕÕ¶Õ¡ÖÕ¡Õ¾Õ¸Ö Õ¹Õ¥Õ²Õ¡Õ¾ Õ¯Õ¡ÖÕ¤Õ¡Õ¬ Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÕ¨Ö Ô±ÖÕ¤ÕµÕ¸ÕÖ ÖÕ¡ÕµÕ¬Õ¸ÖÕ´ Õ¯Õ¡Õ¶ Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥ÖÖ",invalidCsv:"ÕÕ¶Õ¡ÖÕ¡Õ¾Õ¸Ö Õ¹Õ¥Õ²Õ¡Õ¾ Õ´Õ·Õ¡Õ¯Õ¥Õ¬ ÖÕ¡ÕµÕ¬Õ¨Ö Ô±ÖÕ¤ÕµÕ¸ÕÖ Õ¡ÕµÕ¶ Õ¾Õ¡Õ¾Õ¥Ö CSV Õ§Ö",invalidJson:"ÕÕ¶Õ¡ÖÕ¡Õ¾Õ¸Ö Õ¹Õ¥Õ²Õ¡Õ¾ Õ´Õ·Õ¡Õ¯Õ¥Õ¬ ÖÕ¡ÕµÕ¬Õ¨Ö Ô±ÖÕ¤ÕµÕ¸ÕÖ Õ¡ÕµÕ¶ Õ¾Õ¡Õ¾Õ¥Ö Json Õ§Ö",jsonNotArray:"ÕÕ¥ÖÕ´Õ¸ÖÕ®Õ¾Õ¡Õ® json ÖÕ¡ÕµÕ¬Õ¨ ÕºÕ¥Õ¿Ö Õ§ ÕºÕ¡ÖÕ¸ÖÕ¶Õ¡Õ¯Õ« Õ¦Õ¡Õ¶Õ£Õ¾Õ¡Õ®, Õ¯Õ¡Õ½Õ¥ÖÕ¾Õ¸ÖÕ´ Õ§Ö"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("it",{aggregate:{label:"elementi"},groupPanel:{description:"Trascina un'intestazione all'interno del gruppo della colonna."},search:{placeholder:"Ricerca...",showingItems:"Mostra:",selectedItems:"Selezionati:",totalItems:"Totali:",size:"Tot Pagine:",first:"Prima",next:"Prossima",previous:"Precedente",last:"Ultima"},menu:{text:"Scegli le colonne:"},sort:{ascending:"Asc.",descending:"Desc.",remove:"Annulla ordinamento"},column:{hide:"Nascondi"},aggregation:{count:"righe totali: ",sum:"tot: ",avg:"media: ",min:"minimo: ",max:"massimo: "},pinning:{pinLeft:"Blocca a sx",pinRight:"Blocca a dx",unpin:"Blocca in alto"},gridMenu:{columns:"Colonne:",importerTitle:"Importa",exporterAllAsCsv:"Esporta tutti i dati in CSV",exporterVisibleAsCsv:"Esporta i dati visibili in CSV",exporterSelectedAsCsv:"Esporta i dati selezionati in CSV",exporterAllAsPdf:"Esporta tutti i dati in PDF",exporterVisibleAsPdf:"Esporta i dati visibili in PDF",exporterSelectedAsPdf:"Esporta i dati selezionati in PDF",clearAllFilters:"Pulire tutti i filtri"},importer:{noHeaders:"Impossibile reperire i nomi delle colonne, sicuro che siano indicati all'interno del file?",noObjects:"Impossibile reperire gli oggetti, sicuro che siano indicati all'interno del file?",invalidCsv:"Impossibile elaborare il file, sicuro che sia un CSV?",invalidJson:"Impossibile elaborare il file, sicuro che sia un JSON valido?",jsonNotArray:"Errore! Il file JSON da importare deve contenere un array."},grouping:{group:"Raggruppa",ungroup:"Separa",aggregate_count:"Agg: N. Elem.",aggregate_sum:"Agg: Somma",aggregate_max:"Agg: Massimo",aggregate_min:"Agg: Minimo",aggregate_avg:"Agg: Media",aggregate_remove:"Agg: Rimuovi"},validate:{error:"Errore:",minLength:"Lunghezza minima pari a THRESHOLD caratteri.",maxLength:"Lunghezza massima pari a THRESHOLD caratteri.",required:"Necessario inserire un valore."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ja",{aggregate:{label:"é ç®"},groupPanel:{description:"ããã«åãããããã©ãã°ã¢ã³ããã­ãããã¦ããã®åã§ã°ã«ã¼ãåãã¾ãã"},search:{placeholder:"æ¤ç´¢...",showingItems:"è¡¨ç¤ºä¸­ã®é ç®:",selectedItems:"é¸æããé ç®:",totalItems:"é ç®ã®ç·æ°:",size:"ãã¼ã¸ãµã¤ãº:",first:"æåã®ãã¼ã¸",next:"æ¬¡ã®ãã¼ã¸",previous:"åã®ãã¼ã¸",last:"åã®ãã¼ã¸"},menu:{text:"åã®é¸æ:"},sort:{ascending:"æé ã«ä¸¦ã¹æ¿ã",descending:"éé ã«ä¸¦ã¹æ¿ã",remove:"ä¸¦ã¹æ¿ãã®è§£é¤"},column:{hide:"åã®éè¡¨ç¤º"},aggregation:{count:"åè¨è¡æ°: ",sum:"åè¨: ",avg:"å¹³å: ",min:"æå°: ",max:"æå¤§: "},pinning:{pinLeft:"å·¦ã«åºå®",pinRight:"å³ã«åºå®",unpin:"åºå®è§£é¤"},gridMenu:{columns:"å:",importerTitle:"ãã¡ã¤ã«ã®ã¤ã³ãã¼ã",exporterAllAsCsv:"ãã¹ã¦ã®ãã¼ã¿ãCSVå½¢å¼ã§ã¨ã¯ã¹ãã¼ã",exporterVisibleAsCsv:"è¡¨ç¤ºä¸­ã®ãã¼ã¿ãCSVå½¢å¼ã§ã¨ã¯ã¹ãã¼ã",exporterSelectedAsCsv:"é¸æãããã¼ã¿ãCSVå½¢å¼ã§ã¨ã¯ã¹ãã¼ã",exporterAllAsPdf:"ãã¹ã¦ã®ãã¼ã¿ãPDFå½¢å¼ã§ã¨ã¯ã¹ãã¼ã",exporterVisibleAsPdf:"è¡¨ç¤ºä¸­ã®ãã¼ã¿ãPDFå½¢å¼ã§ã¨ã¯ã¹ãã¼ã",exporterSelectedAsPdf:"é¸æãããã¼ã¿ãPDFå½¢å¼ã§ã¨ã¯ã¹ãã¼ã",clearAllFilters:"ãã¹ã¦ã®ãã£ã«ã¿ãæ¸æãã¦ãã ãã"},importer:{noHeaders:"ååãåå¾ã§ãã¾ããããã¡ã¤ã«ã«ããããå«ã¾ãã¦ãããã¨ãç¢ºèªãã¦ãã ããã",noObjects:"ãªãã¸ã§ã¯ããåå¾ã§ãã¾ããããã¡ã¤ã«ã«ãããä»¥å¤ã®ãã¼ã¿ãå«ã¾ãã¦ãããã¨ãç¢ºèªãã¦ãã ããã",invalidCsv:"ãã¡ã¤ã«ãå¦çã§ãã¾ããããã¡ã¤ã«ãæå¹ãªCSVå½¢å¼ã§ãããã¨ãç¢ºèªãã¦ãã ããã",invalidJson:"ãã¡ã¤ã«ãå¦çã§ãã¾ããããã¡ã¤ã«ãæå¹ãªJSONå½¢å¼ã§ãããã¨ãç¢ºèªãã¦ãã ããã",jsonNotArray:"ã¤ã³ãã¼ãããJSONãã¡ã¤ã«ã«ã¯éåãå«ã¾ãã¦ããå¿è¦ãããã¾ããå¦çãä¸­æ­¢ãã¾ãã"},pagination:{aria:{pageToFirst:"æåã®ãã¼ã¸",pageBack:"åã®ãã¼ã¸",pageSelected:"ç¾å¨ã®ãã¼ã¸",pageForward:"æ¬¡ã®ãã¼ã¸",pageToLast:"æå¾ã®ãã¼ã¸"},sizes:"é ç®/ãã¼ã¸",totalItems:"é ç®",through:"ãã",of:"é ç®/å¨"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ko",{aggregate:{label:"ìì´í"},groupPanel:{description:"ì»¬ë¼ì¼ë¡ ê·¸ë£¹ííê¸° ìí´ìë ì»¬ë¼ í¤ëë¥¼ ëì´ ë¨ì´ë¨ë ¤ ì£¼ì¸ì."},search:{placeholder:"ê²ì...",showingItems:"í­ëª© ë³´ì¬ì£¼ê¸°:",selectedItems:"ì í í­ëª©:",totalItems:"ì ì²´ í­ëª©:",size:"íì´ì§ í¬ê¸°:",first:"ì²«ë²ì§¸ íì´ì§",next:"ë¤ì íì´ì§",previous:"ì´ì  íì´ì§",last:"ë§ì§ë§ íì´ì§"},menu:{text:"ì»¬ë¼ì ì ííì¸ì:"},sort:{ascending:"ì¤ë¦ì°¨ì ì ë ¬",descending:"ë´ë¦¼ì°¨ì ì ë ¬",remove:"ìí ì ê±°"},column:{hide:"ì»¬ë¼ ì ê±°"},aggregation:{count:"ì ì²´ ê°¯ì: ",sum:"ì ì²´: ",avg:"íê· : ",min:"ìµì: ",max:"ìµë: "},pinning:{pinLeft:"ì¼ìª½ í",pinRight:"ì¤ë¥¸ìª½ í",unpin:"í ì ê±°"},gridMenu:{columns:"ì»¬ë¼:",importerTitle:"íì¼ ê°ì ¸ì¤ê¸°",exporterAllAsCsv:"csvë¡ ëª¨ë  ë°ì´í° ë´ë³´ë´ê¸°",exporterVisibleAsCsv:"csvë¡ ë³´ì´ë ë°ì´í° ë´ë³´ë´ê¸°",exporterSelectedAsCsv:"csvë¡ ì íë ë°ì´í° ë´ë³´ë´ê¸°",exporterAllAsPdf:"pdfë¡ ëª¨ë  ë°ì´í° ë´ë³´ë´ê¸°",exporterVisibleAsPdf:"pdfë¡ ë³´ì´ë ë°ì´í° ë´ë³´ë´ê¸°",exporterSelectedAsPdf:"pdfë¡ ì í ë°ì´í° ë´ë³´ë´ê¸°",clearAllFilters:"ëª¨ë  íí°ë¥¼ ì²­ì"},importer:{noHeaders:"ì»¬ë¼ëªì´ ì§ì ëì´ ìì§ ììµëë¤. íì¼ì í¤ëê° ëªìëì´ ìëì§ íì¸í´ ì£¼ì¸ì.",noObjects:"ë°ì´í°ê° ì§ì ëì´ ìì§ ììµëë¤. ë°ì´í°ê° íì¼ì ìëì§ íì¸í´ ì£¼ì¸ì.",invalidCsv:"íì¼ì ì²ë¦¬í  ì ììµëë¤. ì¬ë°ë¥¸ csvì¸ì§ íì¸í´ ì£¼ì¸ì.",invalidJson:"íì¼ì ì²ë¦¬í  ì ììµëë¤. ì¬ë°ë¥¸ jsonì¸ì§ íì¸í´ ì£¼ì¸ì.",jsonNotArray:"json íì¼ì ë°°ì´ì í¬í¨í´ì¼ í©ëë¤."},pagination:{sizes:"íì´ì§ë¹ í­ëª©",totalItems:"ì ì²´ í­ëª©"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("nl",{aggregate:{label:"items"},groupPanel:{description:"Sleep hier een kolomnaam heen om op te groeperen."},search:{placeholder:"Zoeken...",showingItems:"Getoonde items:",selectedItems:"Geselecteerde items:",totalItems:"Totaal aantal items:",size:"Items per pagina:",first:"Eerste pagina",next:"Volgende pagina",previous:"Vorige pagina",last:"Laatste pagina"},menu:{text:"Kies kolommen:"},sort:{ascending:"Sorteer oplopend",descending:"Sorteer aflopend",remove:"Verwijder sortering"},column:{hide:"Verberg kolom"},aggregation:{count:"Aantal rijen: ",sum:"Som: ",avg:"Gemiddelde: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Zet links vast",pinRight:"Zet rechts vast",unpin:"Maak los"},gridMenu:{columns:"Kolommen:",importerTitle:"Importeer bestand",exporterAllAsCsv:"Exporteer alle data als csv",exporterVisibleAsCsv:"Exporteer zichtbare data als csv",exporterSelectedAsCsv:"Exporteer geselecteerde data als csv",exporterAllAsPdf:"Exporteer alle data als pdf",exporterVisibleAsPdf:"Exporteer zichtbare data als pdf",exporterSelectedAsPdf:"Exporteer geselecteerde data als pdf",clearAllFilters:"Reinig alle filters"},importer:{noHeaders:"Kolomnamen kunnen niet worden afgeleid. Heeft het bestand een header?",noObjects:"Objecten kunnen niet worden afgeleid. Bevat het bestand data naast de headers?",invalidCsv:"Het bestand kan niet verwerkt worden. Is het een valide csv bestand?",invalidJson:"Het bestand kan niet verwerkt worden. Is het valide json?",jsonNotArray:"Het json bestand moet een array bevatten. De actie wordt geannuleerd."},pagination:{sizes:"items per pagina",totalItems:"items",of:"van de"},grouping:{group:"Groepeer",ungroup:"Groepering opheffen",aggregate_count:"Agg: Aantal",aggregate_sum:"Agg: Som",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Gem",aggregate_remove:"Agg: Verwijder"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("pl",{headerCell:{aria:{defaultFilterLabel:"Filter dla kolumny",removeFilter:"UsuÅ filter",columnMenuButtonLabel:"Menu kolumny"},priority:"Prioritet:",filterLabel:"Filtr dla kolumny: "},aggregate:{label:"pozycji"},groupPanel:{description:"PrzeciÄgnij nagÅÃ³wek kolumny tutaj, aby pogrupowaÄ wedÅug niej."},search:{placeholder:"Szukaj...",showingItems:"Widoczne pozycje:",selectedItems:"Zaznaczone pozycje:",totalItems:"Wszystkich pozycji:",size:"Rozmiar strony:",first:"Pierwsza strona",next:"NastÄpna strona",previous:"Poprzednia strona",last:"Ostatnia strona"},menu:{text:"Wybierz kolumny:"},sort:{ascending:"Sortuj rosnÄco",descending:"Sortuj malejÄco",none:"Brak sortowania",remove:"WyÅÄcz sortowanie"},column:{hide:"Ukryj kolumne"},aggregation:{count:"Razem pozycji: ",sum:"Razem: ",avg:"Årednia: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Przypnij do lewej",pinRight:"Przypnij do prawej",unpin:"Odepnij"},columnMenu:{close:"Zamknij"},gridMenu:{aria:{buttonLabel:"Menu Grida"},columns:"Kolumny:",importerTitle:"Importuj plik",exporterAllAsCsv:"Eksportuj wszystkie dane do csv",exporterVisibleAsCsv:"Eksportuj widoczne dane do csv",exporterSelectedAsCsv:"Eksportuj zaznaczone dane do csv",exporterAllAsPdf:"Eksportuj wszystkie dane do pdf",exporterVisibleAsPdf:"Eksportuj widoczne dane do pdf",exporterSelectedAsPdf:"Eksportuj zaznaczone dane do pdf",clearAllFilters:"WyczyÅÄ filtry"},importer:{noHeaders:"Nie udaÅo siÄ wczytaÄ nazw kolumn. Czy plik posiada nagÅÃ³wek?",noObjects:"Nie udalo siÄ wczytaÄ pozycji. Czy plik zawiera dane??",invalidCsv:"Nie udaÅo siÄ przetworzyÄ pliku, jest to prawidlowy plik CSV??",invalidJson:"Nie udaÅo siÄ przetworzyÄ pliku, jest to prawidlowy plik Json?",jsonNotArray:"Importowany plik json musi zawieraÄ tablicÄ, importowanie przerwane."},pagination:{aria:{pageToFirst:"Pierwsza strona",pageBack:"Poprzednia strona",pageSelected:"Wybrana strona",pageForward:"NastÄpna strona",pageToLast:"Ostatnia strona"},sizes:"pozycji na stronÄ",totalItems:"pozycji",through:"do",of:"z"},grouping:{group:"Grupuj",ungroup:"Rozgrupuj",aggregate_count:"Zbiorczo: Razem",aggregate_sum:"Zbiorczo: Suma",aggregate_max:"Zbiorczo: Max",aggregate_min:"Zbiorczo: Min",aggregate_avg:"Zbiorczo: Årednia",aggregate_remove:"Zbiorczo: UsuÅ"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("pt-br",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da PÃ¡gina:",first:"Primeira PÃ¡gina",next:"PrÃ³xima PÃ¡gina",previous:"PÃ¡gina Anterior",last:"Ãltima PÃ¡gina"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover OrdenaÃ§Ã£o"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar arquivo",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visÃ­veis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visÃ­veis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas nÃ£o puderam ser derivados. O arquivo tem um cabeÃ§alho?",noObjects:"Objetos nÃ£o puderam ser derivados. Havia dados no arquivo, alÃ©m dos cabeÃ§alhos?",invalidCsv:"Arquivo nÃ£o pode ser processado. Ã um CSV vÃ¡lido?",invalidJson:"Arquivo nÃ£o pode ser processado. Ã um Json vÃ¡lido?",jsonNotArray:"Arquivo json importado tem que conter um array. Abortando."},pagination:{aria:{pageToFirst:"Primeira pÃ¡gina",pageBack:"PÃ¡gina anterior",pageSelected:"PÃ¡gina Selecionada",pageForward:"Proxima",pageToLast:"Anterior"},sizes:"itens por pÃ¡gina",totalItems:"itens",through:"atravÃ©s dos",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("pt",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Itens Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da PÃ¡gina:",first:"Primeira PÃ¡gina",next:"PrÃ³xima PÃ¡gina",previous:"PÃ¡gina Anterior",last:"Ãltima PÃ¡gina"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover OrdenaÃ§Ã£o"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar ficheiro",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visÃ­veis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visÃ­veis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas nÃ£o puderam ser derivados. O ficheiro tem um cabeÃ§alho?",noObjects:"Objetos nÃ£o puderam ser derivados. Havia dados no ficheiro, alÃ©m dos cabeÃ§alhos?",invalidCsv:"Ficheiro nÃ£o pode ser processado. Ã um CSV vÃ¡lido?",invalidJson:"Ficheiro nÃ£o pode ser processado. Ã um Json vÃ¡lido?",jsonNotArray:"Ficheiro json importado tem que conter um array. Interrompendo."},pagination:{aria:{pageToFirst:"Primeira pÃ¡gina",pageBack:"PÃ¡gina anterior",pageSelected:"PÃ¡gina Selecionada",pageForward:"PrÃ³xima",pageToLast:"Anterior"},sizes:"itens por pÃ¡gina",totalItems:"itens",through:"atravÃ©s dos",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ro",{headerCell:{aria:{defaultFilterLabel:"Filtru pentru coloana",removeFilter:"Sterge filtru",columnMenuButtonLabel:"Column Menu"},priority:"Prioritate:",filterLabel:"Filtru pentru coloana:"},aggregate:{label:"Elemente"},groupPanel:{description:"Trage un cap de coloana aici pentru a grupa elementele dupa coloana respectiva"},search:{placeholder:"Cauta...",showingItems:"Arata elementele:",selectedItems:"Elementele selectate:",totalItems:"Total elemente:",size:"Marime pagina:",first:"Prima pagina",next:"Pagina urmatoare",previous:"Pagina anterioara",last:"Ultima pagina"},menu:{text:"Alege coloane:"},sort:{ascending:"Ordoneaza crescator",descending:"Ordoneaza descrescator",none:"Fara ordonare",remove:"Sterge ordonarea"},column:{hide:"Ascunde coloana"},aggregation:{count:"total linii: ",sum:"total: ",avg:"medie: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin la stanga",pinRight:"Pin la dreapta",unpin:"Sterge pinul"},columnMenu:{close:"Inchide"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Coloane:",importerTitle:"Incarca fisier",exporterAllAsCsv:"Exporta toate datele ca csv",exporterVisibleAsCsv:"Exporta datele vizibile ca csv",exporterSelectedAsCsv:"Exporta datele selectate ca csv",exporterAllAsPdf:"Exporta toate datele ca pdf",exporterVisibleAsPdf:"Exporta datele vizibile ca pdf",exporterSelectedAsPdf:"Exporta datele selectate ca csv pdf",clearAllFilters:"Sterge toate filtrele"},importer:{noHeaders:"Numele coloanelor nu a putut fi incarcat, acest fisier are un header?",noObjects:"Datele nu au putut fi incarcate, exista date in fisier in afara numelor de coloane?",invalidCsv:"Fisierul nu a putut fi procesat, ati incarcat un CSV valid ?",invalidJson:"Fisierul nu a putut fi procesat, ati incarcat un Json valid?",jsonNotArray:"Json-ul incarcat trebuie sa contina un array, inchidere."},pagination:{aria:{pageToFirst:"Prima pagina",pageBack:"O pagina inapoi",pageSelected:"Pagina selectata",pageForward:"O pagina inainte",pageToLast:"Ultima pagina"},sizes:"Elemente per pagina",totalItems:"elemente",through:"prin",of:"of"},grouping:{group:"Grupeaza",ungroup:"Opreste gruparea",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ru",{headerCell:{aria:{defaultFilterLabel:"Ð¤Ð¸Ð»ÑÑÑ ÑÑÐ¾Ð»Ð±ÑÐ°",removeFilter:"Ð£Ð´Ð°Ð»Ð¸ÑÑ ÑÐ¸Ð»ÑÑÑ",columnMenuButtonLabel:"ÐÐµÐ½Ñ ÑÑÐ¾Ð»Ð±ÑÐ°"},priority:"ÐÑÐ¸Ð¾ÑÐ¸ÑÐµÑ:",filterLabel:"Ð¤Ð¸Ð»ÑÑÑ ÑÑÐ¾Ð»Ð±ÑÐ°: "},aggregate:{label:"ÑÐ»ÐµÐ¼ÐµÐ½ÑÑ"},groupPanel:{description:"ÐÐ»Ñ Ð³ÑÑÐ¿Ð¿Ð¸ÑÐ¾Ð²ÐºÐ¸ Ð¿Ð¾ ÑÑÐ¾Ð»Ð±ÑÑ Ð¿ÐµÑÐµÑÐ°ÑÐ¸ÑÐµ ÑÑÐ´Ð° ÐµÐ³Ð¾ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ."},search:{placeholder:"ÐÐ¾Ð¸ÑÐº...",showingItems:"ÐÐ¾ÐºÐ°Ð·Ð°ÑÑ ÑÐ»ÐµÐ¼ÐµÐ½ÑÑ:",selectedItems:"ÐÑÐ±ÑÐ°Ð½Ð½ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½ÑÑ:",totalItems:"ÐÑÐµÐ³Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½ÑÐ¾Ð²:",size:"Ð Ð°Ð·Ð¼ÐµÑ ÑÑÑÐ°Ð½Ð¸ÑÑ:",first:"ÐÐµÑÐ²Ð°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",next:"Ð¡Ð»ÐµÐ´ÑÑÑÐ°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",previous:"ÐÑÐµÐ´ÑÐ´ÑÑÐ°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",last:"ÐÐ¾ÑÐ»ÐµÐ´Ð½ÑÑ ÑÑÑÐ°Ð½Ð¸ÑÐ°"},menu:{text:"ÐÑÐ±ÑÐ°ÑÑ ÑÑÐ¾Ð»Ð±ÑÑ:"},sort:{ascending:"ÐÐ¾ Ð²Ð¾Ð·ÑÐ°ÑÑÐ°Ð½Ð¸Ñ",descending:"ÐÐ¾ ÑÐ±ÑÐ²Ð°Ð½Ð¸Ñ",none:"ÐÐµÐ· ÑÐ¾ÑÑÐ¸ÑÐ¾Ð²ÐºÐ¸",remove:"Ð£Ð±ÑÐ°ÑÑ ÑÐ¾ÑÑÐ¸ÑÐ¾Ð²ÐºÑ"},column:{hide:"Ð¡Ð¿ÑÑÑÐ°ÑÑ ÑÑÐ¾Ð»Ð±ÐµÑ"},aggregation:{count:"Ð²ÑÐµÐ³Ð¾ ÑÑÑÐ¾Ðº: ",sum:"Ð¸ÑÐ¾Ð³Ð¾: ",avg:"ÑÑÐµÐ´Ð½ÐµÐµ: ",min:"Ð¼Ð¸Ð½: ",max:"Ð¼Ð°ÐºÑ: "},pinning:{pinLeft:"ÐÐ°ÐºÑÐµÐ¿Ð¸ÑÑ ÑÐ»ÐµÐ²Ð°",pinRight:"ÐÐ°ÐºÑÐµÐ¿Ð¸ÑÑ ÑÐ¿ÑÐ°Ð²Ð°",unpin:"ÐÑÐºÑÐµÐ¿Ð¸ÑÑ"},columnMenu:{close:"ÐÐ°ÐºÑÑÑÑ"},gridMenu:{aria:{buttonLabel:"ÐÐµÐ½Ñ"},columns:"Ð¡ÑÐ¾Ð»Ð±ÑÑ:",importerTitle:"ÐÐ¼Ð¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ ÑÐ°Ð¹Ð»",exporterAllAsCsv:"Ð­ÐºÑÐ¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ Ð²ÑÑ Ð² CSV",exporterVisibleAsCsv:"Ð­ÐºÑÐ¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ Ð²Ð¸Ð´Ð¸Ð¼ÑÐµ Ð´Ð°Ð½Ð½ÑÐµ Ð² CSV",exporterSelectedAsCsv:"Ð­ÐºÑÐ¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ Ð²ÑÐ±ÑÐ°Ð½Ð½ÑÐµ Ð´Ð°Ð½Ð½ÑÐµ Ð² CSV",exporterAllAsPdf:"Ð­ÐºÑÐ¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ Ð²ÑÑ Ð² PDF",exporterVisibleAsPdf:"Ð­ÐºÑÐ¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ Ð²Ð¸Ð´Ð¸Ð¼ÑÐµ Ð´Ð°Ð½Ð½ÑÐµ Ð² PDF",exporterSelectedAsPdf:"Ð­ÐºÑÐ¿Ð¾ÑÑÐ¸ÑÐ¾Ð²Ð°ÑÑ Ð²ÑÐ±ÑÐ°Ð½Ð½ÑÐµ Ð´Ð°Ð½Ð½ÑÐµ Ð² PDF",clearAllFilters:"ÐÑÐ¸ÑÑÐ¸ÑÐµ Ð²ÑÐµ ÑÐ¸Ð»ÑÑÑÑ"},importer:{noHeaders:"ÐÐµ ÑÐ´Ð°Ð»Ð¾ÑÑ Ð¿Ð¾Ð»ÑÑÐ¸ÑÑ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ ÑÑÐ¾Ð»Ð±ÑÐ¾Ð², ÐµÑÑÑ Ð»Ð¸ Ð² ÑÐ°Ð¹Ð»Ðµ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº?",noObjects:"ÐÐµ ÑÐ´Ð°Ð»Ð¾ÑÑ Ð¿Ð¾Ð»ÑÑÐ¸ÑÑ Ð´Ð°Ð½Ð½ÑÐµ, ÐµÑÑÑ Ð»Ð¸ Ð² ÑÐ°Ð¹Ð»Ðµ ÑÑÑÐ¾ÐºÐ¸ ÐºÑÐ¾Ð¼Ðµ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ°?",invalidCsv:"ÐÐµ ÑÐ´Ð°Ð»Ð¾ÑÑ Ð¾Ð±ÑÐ°Ð±Ð¾ÑÐ°ÑÑ ÑÐ°Ð¹Ð», ÑÑÐ¾ Ð¿ÑÐ°Ð²Ð¸Ð»ÑÐ½ÑÐ¹ CSV-ÑÐ°Ð¹Ð»?",invalidJson:"ÐÐµ ÑÐ´Ð°Ð»Ð¾ÑÑ Ð¾Ð±ÑÐ°Ð±Ð¾ÑÐ°ÑÑ ÑÐ°Ð¹Ð», ÑÑÐ¾ Ð¿ÑÐ°Ð²Ð¸Ð»ÑÐ½ÑÐ¹ JSON?",jsonNotArray:"ÐÐ¼Ð¿Ð¾ÑÑÐ¸ÑÑÐµÐ¼ÑÐ¹ JSON-ÑÐ°Ð¹Ð» Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑÐ¾Ð´ÐµÑÐ¶Ð°ÑÑ Ð¼Ð°ÑÑÐ¸Ð², Ð¾Ð¿ÐµÑÐ°ÑÐ¸Ñ Ð¾ÑÐ¼ÐµÐ½ÐµÐ½Ð°."},pagination:{aria:{pageToFirst:"ÐÐµÑÐ²Ð°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",pageBack:"ÐÑÐµÐ´ÑÐ´ÑÑÐ°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",pageSelected:"ÐÑÐ±ÑÐ°Ð½Ð½Ð°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",pageForward:"Ð¡Ð»ÐµÐ´ÑÑÑÐ°Ñ ÑÑÑÐ°Ð½Ð¸ÑÐ°",pageToLast:"ÐÐ¾ÑÐ»ÐµÐ´Ð½ÑÑ ÑÑÑÐ°Ð½Ð¸ÑÐ°"},sizes:"ÑÑÑÐ¾Ðº Ð½Ð° ÑÑÑÐ°Ð½Ð¸ÑÑ",totalItems:"ÑÑÑÐ¾Ðº",through:"Ð¿Ð¾",of:"Ð¸Ð·"},grouping:{group:"ÐÑÑÐ¿Ð¿Ð¸ÑÐ¾Ð²Ð°ÑÑ",ungroup:"Ð Ð°Ð·Ð³ÑÑÐ¿Ð¿Ð¸ÑÐ¾Ð²Ð°ÑÑ",aggregate_count:"ÐÑÑÐ¿Ð¿Ð¸ÑÐ¾Ð²Ð°ÑÑ: Count",aggregate_sum:"ÐÐ»Ñ Ð³ÑÑÐ¿Ð¿Ñ: Ð¡ÑÐ¼Ð¼Ð°",aggregate_max:"ÐÐ»Ñ Ð³ÑÑÐ¿Ð¿Ñ: ÐÐ°ÐºÑÐ¸Ð¼ÑÐ¼",aggregate_min:"ÐÐ»Ñ Ð³ÑÑÐ¿Ð¿Ñ: ÐÐ¸Ð½Ð¸Ð¼ÑÐ¼",aggregate_avg:"ÐÐ»Ñ Ð³ÑÑÐ¿Ð¿Ñ: Ð¡ÑÐµÐ´Ð½ÐµÐµ",aggregate_remove:"ÐÐ»Ñ Ð³ÑÑÐ¿Ð¿Ñ: ÐÑÑÑÐ¾"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("sk",{aggregate:{label:"items"},groupPanel:{description:"Pretiahni sem nÃ¡zov stÄºpca pre zoskupenie podÄ¾a toho stÄºpca."},search:{placeholder:"HÄ¾adaj...",showingItems:"Zobrazujem poloÅ¾ky:",selectedItems:"VybratÃ© poloÅ¾ky:",totalItems:"PoÄet poloÅ¾iek:",size:"PoÄet:",first:"PrvÃ¡ strana",next:"ÄalÅ¡ia strana",previous:"PredchÃ¡dzajÃºca strana",last:"PoslednÃ¡ strana"},menu:{text:"Vyberte stÄºpce:"},sort:{ascending:"ZotriediÅ¥ vzostupne",descending:"ZotriediÅ¥ zostupne",remove:"VymazaÅ¥ triedenie"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("sv",{aggregate:{label:"Artiklar"},groupPanel:{description:"Dra en kolumnrubrik hit och slÃ¤pp den fÃ¶r att gruppera efter den kolumnen."},search:{placeholder:"SÃ¶k...",showingItems:"Visar artiklar:",selectedItems:"Valda artiklar:",totalItems:"Antal artiklar:",size:"Sidstorlek:",first:"FÃ¶rsta sidan",next:"NÃ¤sta sida",previous:"FÃ¶regÃ¥ende sida",last:"Sista sidan"},menu:{text:"VÃ¤lj kolumner:"},sort:{ascending:"Sortera stigande",descending:"Sortera fallande",remove:"Inaktivera sortering"},column:{hide:"GÃ¶m kolumn"},aggregation:{count:"Antal rader: ",sum:"Summa: ",avg:"Genomsnitt: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"FÃ¤st vÃ¤nster",pinRight:"FÃ¤st hÃ¶ger",unpin:"LÃ¶sgÃ¶r"},gridMenu:{columns:"Kolumner:",importerTitle:"Importera fil",exporterAllAsCsv:"Exportera all data som CSV",exporterVisibleAsCsv:"Exportera synlig data som CSV",exporterSelectedAsCsv:"Exportera markerad data som CSV",exporterAllAsPdf:"Exportera all data som PDF",exporterVisibleAsPdf:"Exportera synlig data som PDF",exporterSelectedAsPdf:"Exportera markerad data som PDF",clearAllFilters:"RengÃ¶r alla filter"},importer:{noHeaders:"Kolumnnamn kunde inte hÃ¤rledas. Har filen ett sidhuvud?",noObjects:"Objekt kunde inte hÃ¤rledas. Har filen data undantaget sidhuvud?",invalidCsv:"Filen kunde inte behandlas, Ã¤r den en giltig CSV?",invalidJson:"Filen kunde inte behandlas, Ã¤r den en giltig JSON?",jsonNotArray:"Importerad JSON-fil mÃ¥ste innehÃ¥lla ett fÃ¤lt. Import avbruten."},pagination:{sizes:"Artiklar per sida",totalItems:"Artiklar"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ta",{aggregate:{label:"à®à®°à¯à®ªà¯à®ªà®à®¿à®à®³à¯"},groupPanel:{description:"à®à®°à¯ à®ªà®¤à¯à®¤à®¿à®¯à¯ à®à¯à®´à¯à®µà®¾à® à®à®®à¯à®à¯à® à®à®ªà¯à®ªà®¤à¯à®¤à®¿à®¯à®¿à®©à¯ à®¤à®²à¯à®ªà¯à®ªà¯ à®à®à¯à®à¯  à®à®´à¯à®¤à¯à®¤à¯ à®µà®°à®µà¯à®®à¯ "},search:{placeholder:"à®¤à¯à®à®²à¯ ...",showingItems:"à®à®°à¯à®ªà¯à®ªà®à®¿à®à®³à¯ à®à®¾à®£à¯à®ªà®¿à®¤à¯à®¤à®²à¯:",selectedItems:"à®¤à¯à®°à¯à®¨à¯à®¤à¯à®à¯à®à¯à®à®ªà¯à®ªà®à¯à®  à®à®°à¯à®ªà¯à®ªà®à®¿à®à®³à¯:",totalItems:"à®®à¯à®¤à¯à®¤ à®à®°à¯à®ªà¯à®ªà®à®¿à®à®³à¯:",size:"à®ªà®à¯à® à®à®³à®µà¯: ",first:"à®®à¯à®¤à®²à¯ à®ªà®à¯à®à®®à¯",next:"à®à®à¯à®¤à¯à®¤ à®ªà®à¯à®à®®à¯",previous:"à®®à¯à®¨à¯à®¤à¯à®¯ à®ªà®à¯à®à®®à¯ ",last:"à®à®±à¯à®¤à®¿ à®ªà®à¯à®à®®à¯"},menu:{text:"à®ªà®¤à¯à®¤à®¿à®à®³à¯ à®¤à¯à®°à¯à®¨à¯à®¤à¯à®à¯:"},sort:{ascending:"à®®à¯à®²à®¿à®°à¯à®¨à¯à®¤à¯ à®à¯à®´à®¾à®",descending:"à®à¯à®´à®¿à®°à¯à®¨à¯à®¤à¯ à®®à¯à®²à®¾à®",remove:"à®µà®°à®¿à®à¯à®¯à¯ à®¨à¯à®à¯à®à¯"},column:{hide:"à®ªà®¤à¯à®¤à®¿à®¯à¯ à®®à®±à¯à®¤à¯à®¤à¯ à®µà¯ "},aggregation:{count:"à®®à¯à®¤à¯à®¤ à®µà®°à®¿à®à®³à¯:",sum:"à®®à¯à®¤à¯à®¤à®®à¯: ",avg:"à®à®°à®¾à®à®°à®¿: ",min:"à®à¯à®±à¯à®¨à¯à®¤à®ªà®à¯à®: ",max:"à®à®¤à®¿à®à®ªà®à¯à®: "},pinning:{pinLeft:"à®à®à®¤à¯à®ªà¯à®±à®®à®¾à® à®¤à¯à®à¯à® ",pinRight:"à®µà®²à®¤à¯à®ªà¯à®±à®®à®¾à® à®¤à¯à®à¯à®",unpin:"à®ªà®¿à®°à®¿"},gridMenu:{columns:"à®ªà®¤à¯à®¤à®¿à®à®³à¯:",importerTitle:"à®à¯à®ªà¯à®ªà¯ : à®ªà®à®¿à®¤à¯à®¤à®²à¯",exporterAllAsCsv:"à®à®²à¯à®²à®¾ à®¤à®°à®µà¯à®à®³à¯à®¯à¯à®®à¯ à®à¯à®ªà¯à®ªà®¾à®à¯à®à¯: csv",exporterVisibleAsCsv:"à®à®°à¯à®à¯à®à¯à®®à¯ à®¤à®°à®µà¯à®à®³à¯ à®à¯à®ªà¯à®ªà®¾à®à¯à®à¯: csv",exporterSelectedAsCsv:"à®¤à¯à®°à¯à®¨à¯à®¤à¯à®à¯à®¤à¯à®¤ à®¤à®°à®µà¯à®à®³à¯ à®à¯à®ªà¯à®ªà®¾à®à¯à®à¯: csv",exporterAllAsPdf:"à®à®²à¯à®²à®¾ à®¤à®°à®µà¯à®à®³à¯à®¯à¯à®®à¯ à®à¯à®ªà¯à®ªà®¾à®à¯à®à¯: pdf",exporterVisibleAsPdf:"à®à®°à¯à®à¯à®à¯à®®à¯ à®¤à®°à®µà¯à®à®³à¯ à®à¯à®ªà¯à®ªà®¾à®à¯à®à¯: pdf",exporterSelectedAsPdf:"à®¤à¯à®°à¯à®¨à¯à®¤à¯à®à¯à®¤à¯à®¤ à®¤à®°à®µà¯à®à®³à¯ à®à¯à®ªà¯à®ªà®¾à®à¯à®à¯: pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"à®ªà®¤à¯à®¤à®¿à®¯à®¿à®©à¯ à®¤à®²à¯à®ªà¯à®ªà¯à®à®³à¯ à®ªà¯à®± à®à®¯à®²à®µà®¿à®²à¯à®²à¯, à®à¯à®ªà¯à®ªà®¿à®±à¯à®à¯ à®¤à®²à¯à®ªà¯à®ªà¯ à®à®³à¯à®³à®¤à®¾?",noObjects:"à®à®²à®à¯à®à¯à®à®³à¯ à®à®°à¯à®µà®¾à®à¯à® à®®à¯à®à®¿à®¯à®µà®¿à®²à¯à®²à¯, à®à¯à®ªà¯à®ªà®¿à®²à¯ à®¤à®²à¯à®ªà¯à®ªà¯à®à®³à¯ à®¤à®µà®¿à®° à®¤à®°à®µà¯ à®à®¤à¯à®©à¯à®®à¯ à®à®³à¯à®³à®¤à®¾? ",invalidCsv:"à®à®°à®¿à®µà®° à®¨à®à¯à®®à¯à®±à¯ à®ªà®à¯à®¤à¯à®¤ à®à®¯à®²à®µà®¿à®²à¯à®²à¯, à®à¯à®ªà¯à®ªà¯ à®à®°à®¿à®¤à®¾à®©à®¾? - csv",invalidJson:"à®à®°à®¿à®µà®° à®¨à®à¯à®®à¯à®±à¯ à®ªà®à¯à®¤à¯à®¤ à®à®¯à®²à®µà®¿à®²à¯à®²à¯, à®à¯à®ªà¯à®ªà¯ à®à®°à®¿à®¤à®¾à®©à®¾? - json",jsonNotArray:"à®ªà®à®¿à®¤à¯à®¤ à®à¯à®ªà¯à®ªà®¿à®²à¯ à®µà®°à®¿à®à¯à®à®³à¯ à®à®³à¯à®³à®¤à¯, à®¨à®à¯à®®à¯à®±à¯ à®°à®¤à¯à®¤à¯ à®à¯à®¯à¯ : json"},pagination:{sizes:"à®à®°à¯à®ªà¯à®ªà®à®¿à®à®³à¯ / à®ªà®à¯à®à®®à¯",totalItems:"à®à®°à¯à®ªà¯à®ªà®à®¿à®à®³à¯ "},grouping:{group:"à®à¯à®´à¯",ungroup:"à®ªà®¿à®°à®¿",aggregate_count:"à®®à®¤à®¿à®ªà¯à®ªà¯à®à¯à®à¯ : à®à®£à¯à®£à¯",aggregate_sum:"à®®à®¤à®¿à®ªà¯à®ªà¯à®à¯à®à¯ : à®à¯à®à¯à®à®²à¯",aggregate_max:"à®®à®¤à®¿à®ªà¯à®ªà¯à®à¯à®à¯ : à®à®¤à®¿à®à®ªà®à¯à®à®®à¯",aggregate_min:"à®®à®¤à®¿à®ªà¯à®ªà¯à®à¯à®à¯ : à®à¯à®±à¯à®¨à¯à®¤à®ªà®à¯à®à®®à¯",aggregate_avg:"à®®à®¤à®¿à®ªà¯à®ªà¯à®à¯à®à¯ : à®à®°à®¾à®à®°à®¿",aggregate_remove:"à®®à®¤à®¿à®ªà¯à®ªà¯à®à¯à®à¯ : à®¨à¯à®à¯à®à¯"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("tr",{headerCell:{aria:{defaultFilterLabel:"SÃ¼tun iÃ§in filtre",removeFilter:"Filtreyi KaldÄ±r",columnMenuButtonLabel:"SÃ¼tun MenÃ¼sÃ¼"},priority:"Ãncelik:",filterLabel:"SÃ¼tun iÃ§in filtre: "},aggregate:{label:"kayÄ±tlar"},groupPanel:{description:"SÃ¼tuna gÃ¶re gruplamak iÃ§in sÃ¼tun baÅlÄ±ÄÄ±nÄ± buraya sÃ¼rÃ¼kleyin ve bÄ±rakÄ±n."},search:{placeholder:"Arama...",showingItems:"GÃ¶sterilen KayÄ±t:",selectedItems:"SeÃ§ili KayÄ±t:",totalItems:"Toplam KayÄ±t:",size:"Sayfa Boyutu:",first:"Ä°lk Sayfa",next:"Sonraki Sayfa",previous:"Ãnceki Sayfa",last:"Son Sayfa"},menu:{text:"SÃ¼tunlarÄ± SeÃ§:"},sort:{ascending:"Artan SÄ±rada SÄ±rala",descending:"Azalan SÄ±rada SÄ±rala",none:"SÄ±ralama Yapma",remove:"SÄ±ralamayÄ± KaldÄ±r"},column:{hide:"SÃ¼tunu Gizle"},aggregation:{count:"toplam satÄ±r: ",sum:"toplam: ",avg:"ort: ",min:"min: ",max:"maks: "},pinning:{pinLeft:"Sola Sabitle",pinRight:"SaÄa Sabitle",unpin:"Sabitlemeyi KaldÄ±r"},columnMenu:{close:"Kapat"},gridMenu:{aria:{buttonLabel:"Tablo MenÃ¼"},columns:"SÃ¼tunlar:",importerTitle:"Dosya iÃ§eri aktar",exporterAllAsCsv:"BÃ¼tÃ¼n veriyi CSV olarak dÄ±ÅarÄ± aktar",exporterVisibleAsCsv:"GÃ¶rÃ¼nen veriyi CSV olarak dÄ±ÅarÄ± aktar",exporterSelectedAsCsv:"SeÃ§ili veriyi CSV olarak dÄ±ÅarÄ± aktar",exporterAllAsPdf:"BÃ¼tÃ¼n veriyi PDF olarak dÄ±ÅarÄ± aktar",exporterVisibleAsPdf:"GÃ¶rÃ¼nen veriyi PDF olarak dÄ±ÅarÄ± aktar",exporterSelectedAsPdf:"SeÃ§ili veriyi PDF olarak dÄ±ÅarÄ± aktar",clearAllFilters:"BÃ¼tÃ¼n filtreleri kaldÄ±r"},importer:{noHeaders:"SÃ¼tun isimleri Ã¼retilemiyor, dosyanÄ±n bir baÅlÄ±ÄÄ± var mÄ±?",noObjects:"Nesneler Ã¼retilemiyor, dosyada baÅlÄ±ktan baÅka bir veri var mÄ±?",invalidCsv:"Dosya iÅlenemedi, geÃ§erli bir CSV dosyasÄ± mÄ±?",invalidJson:"Dosya iÅlenemedi, geÃ§erli bir Json dosyasÄ± mÄ±?",jsonNotArray:"AlÄ±nan Json dosyasÄ±nda bir dizi bulunmalÄ±dÄ±r, iÅlem iptal ediliyor."},pagination:{aria:{pageToFirst:"Ä°lk sayfaya",pageBack:"Geri git",pageSelected:"SeÃ§ili sayfa",pageForward:"Ä°leri git",pageToLast:"Sona git"},sizes:"Sayfadaki nesne sayÄ±sÄ±",totalItems:"kayÄ±tlar",through:"",of:""},grouping:{group:"Grupla",ungroup:"Gruplama",aggregate_count:"Yekun: SayÄ±",aggregate_sum:"Yekun: Toplam",aggregate_max:"Yekun: Maks",aggregate_min:"Yekun: Min",aggregate_avg:"Yekun: Ort",aggregate_remove:"Yekun: Sil"}}),e}])}])}(),function(){var e=["uiT","uiTranslate"],t=["t","uiTranslate"],n=angular.module("ui.grid.i18n");n.constant("i18nConstants",{MISSING:"[MISSING]",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),n.service("i18nService",["$log","i18nConstants","$rootScope",function(e,t,n){var i={_langs:{},current:null,get:function(e){return this._langs[e.toLowerCase()]},add:function(e,t){var n=e.toLowerCase();this._langs[n]||(this._langs[n]={}),angular.extend(this._langs[n],t)},getAllLangs:function(){var e=[];if(!this._langs)return e;for(var t in this._langs)e.push(t);return e},setCurrent:function(e){this.current=e.toLowerCase()},getCurrentLang:function(){return this.current}},o={add:function(e,t){"object"==typeof e?angular.forEach(e,function(e){e&&i.add(e,t)}):i.add(e,t)},getAllLangs:function(){return i.getAllLangs()},get:function(e){var t=e||o.getCurrentLang();return i.get(t)},getSafeText:function(e,n){var r=n||o.getCurrentLang(),a=i.get(r);if(!a)return t.MISSING;for(var s=e.split("."),l=a,c=0;c<s.length;++c){if(void 0===l[s[c]]||null===l[s[c]])return t.MISSING;l=l[s[c]]}return l},setCurrentLang:function(e){e&&(i.setCurrent(e),n.$broadcast(t.UPDATE_EVENT))},getCurrentLang:function(){var e=i.getCurrentLang();return e||(e=t.DEFAULT_LANG,i.setCurrent(e)),e}};return o}]);var i=function(e,t){return{compile:function(){return{pre:function(n,i,o){var r=t.LOCALE_DIRECTIVE_ALIAS,a=n.$eval(o[r]);a?n.$watch(o[r],function(){e.setCurrentLang(a)}):o.$$observers&&o.$observe(r,function(){e.setCurrentLang(o[r]||t.DEFAULT_LANG)})}}}}};n.directive("uiI18n",["i18nService","i18nConstants",i]);var o=function(t,n,i){return{restrict:"EA",compile:function(){return{pre:function(o,r,a){var s,l=e[0],c=e[1],d=a[l]||a[c]||r.html(),u=i.MISSING+d;if(a.$$observers){var p=a[l]?l:c;s=a.$observe(p,function(e){e&&r.html(t(e)(n.getCurrentLang())||u)})}var g=t(d),m=o.$on(i.UPDATE_EVENT,function(e){s?s(a[l]||a[c]):r.html(g(n.get())||u)});o.$on("$destroy",m),r.html(g(n.get())||u)}}}}};angular.forEach(e,function(e){n.directive(e,["$parse","i18nService","i18nConstants",o])});var r=function(e,t,n){return function(i){return e(i)(t.get())||n.MISSING+i}};angular.forEach(t,function(e){n.filter(e,["$parse","i18nService","i18nConstants",r])})}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("zh-cn",{headerCell:{aria:{defaultFilterLabel:"åè¿æ»¤å¨",removeFilter:"ç§»é¤è¿æ»¤å¨",columnMenuButtonLabel:"åèå"},priority:"ä¼åçº§:",filterLabel:"åè¿æ»¤å¨: "},aggregate:{label:"è¡"},groupPanel:{description:"ææ³è¡¨å¤´å°æ­¤å¤è¿è¡åç»"},search:{placeholder:"æ¥æ¾",showingItems:"å·²æ¾ç¤ºè¡æ°ï¼",selectedItems:"å·²éæ©è¡æ°ï¼",totalItems:"æ»è¡æ°ï¼",size:"æ¯é¡µæ¾ç¤ºè¡æ°ï¼",first:"é¦é¡µ",next:"ä¸ä¸é¡µ",previous:"ä¸ä¸é¡µ",last:"æ«é¡µ"},menu:{text:"éæ©åï¼"},sort:{ascending:"ååº",descending:"éåº",none:"æ åº",remove:"åæ¶æåº"},column:{hide:"éèå"},aggregation:{count:"è®¡æ°ï¼",sum:"æ±åï¼",avg:"åå¼ï¼",min:"æå°å¼ï¼",max:"æå¤§å¼ï¼"},pinning:{pinLeft:"å·¦ä¾§åºå®",pinRight:"å³ä¾§åºå®",unpin:"åæ¶åºå®"},columnMenu:{close:"å³é­"},gridMenu:{aria:{buttonLabel:"è¡¨æ ¼èå"},columns:"åï¼",importerTitle:"å¯¼å¥æä»¶",exporterAllAsCsv:"å¯¼åºå¨é¨æ°æ®å°CSV",exporterVisibleAsCsv:"å¯¼åºå¯è§æ°æ®å°CSV",exporterSelectedAsCsv:"å¯¼åºå·²éæ°æ®å°CSV",exporterAllAsPdf:"å¯¼åºå¨é¨æ°æ®å°PDF",exporterVisibleAsPdf:"å¯¼åºå¯è§æ°æ®å°PDF",exporterSelectedAsPdf:"å¯¼åºå·²éæ°æ®å°PDF",clearAllFilters:"æ¸é¤ææè¿æ»¤å¨"},importer:{noHeaders:"æ æ³è·åååï¼ç¡®å®æä»¶åå«è¡¨å¤´ï¼",noObjects:"æ æ³è·åæ°æ®ï¼ç¡®å®æä»¶åå«æ°æ®ï¼",invalidCsv:"æ æ³å¤çæä»¶ï¼ç¡®å®æ¯åæ³çCSVæä»¶ï¼",invalidJson:"æ æ³å¤çæä»¶ï¼ç¡®å®æ¯åæ³çJSONæä»¶ï¼",jsonNotArray:"å¯¼å¥çæä»¶ä¸æ¯JSONæ°ç»ï¼"},pagination:{aria:{pageToFirst:"ç¬¬ä¸é¡µ",pageBack:"ä¸ä¸é¡µ",pageSelected:"å½åé¡µ",pageForward:"ä¸ä¸é¡µ",pageToLast:"æåä¸é¡µ"},sizes:"è¡æ¯é¡µ",totalItems:"è¡",through:"è³",of:"å±"},grouping:{group:"åç»",ungroup:"åæ¶åç»",aggregate_count:"åè®¡: è®¡æ°",aggregate_sum:"åè®¡: æ±å",aggregate_max:"åè®¡: æå¤§",aggregate_min:"åè®¡: æå°",aggregate_avg:"åè®¡: å¹³å",aggregate_remove:"åè®¡: ç§»é¤"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("zh-tw",{aggregate:{label:"è¡"},groupPanel:{description:"ææ³è¡¨é ­å°æ­¤èé²è¡åçµ"},search:{placeholder:"æ¥æ¾",showingItems:"å·²é¡¯ç¤ºè¡æ¸ï¼",selectedItems:"å·²é¸æè¡æ¸ï¼",totalItems:"ç¸½è¡æ¸ï¼",size:"æ¯é é¡¯ç¤ºè¡æ¸ï¼",first:"é¦é ",next:"ä¸å£¹é ",previous:"ä¸å£¹é ",last:"æ«é "},menu:{text:"é¸æåï¼"},sort:{ascending:"ååº",descending:"éåº",remove:"åæ¶æåº"},column:{hide:"é±èå"},aggregation:{count:"è¨æ¸ï¼",sum:"æ±åï¼",avg:"åå¼ï¼",min:"æå°å¼ï¼",max:"æå¤§å¼ï¼"},pinning:{pinLeft:"å·¦å´åºå®",pinRight:"å³å´åºå®",unpin:"åæ¶åºå®"},gridMenu:{columns:"åï¼",importerTitle:"å°å¥æä»¶",exporterAllAsCsv:"å°åºå¨é¨æ¸æå°CSV",exporterVisibleAsCsv:"å°åºå¯è¦æ¸æå°CSV",exporterSelectedAsCsv:"å°åºå·²é¸æ¸æå°CSV",exporterAllAsPdf:"å°åºå¨é¨æ¸æå°PDF",exporterVisibleAsPdf:"å°åºå¯è¦æ¸æå°PDF",exporterSelectedAsPdf:"å°åºå·²é¸æ¸æå°PDF",clearAllFilters:"æ¸é¤ææè¿æ»¤å¨"},importer:{noHeaders:"ç¡æ³ç²åååï¼ç¢ºå®æä»¶åå«è¡¨é ­ï¼",noObjects:"ç¡æ³ç²åæ¸æï¼ç¢ºå®æä»¶åå«æ¸æï¼",invalidCsv:"ç¡æ³èçæä»¶ï¼ç¢ºå®æ¯åæ³çCSVæä»¶ï¼",invalidJson:"ç¡æ³èçæä»¶ï¼ç¢ºå®æ¯åæ³çJSONæä»¶ï¼",jsonNotArray:"å°å¥çæä»¶ä¸æ¯JSONæ¸çµï¼"},pagination:{sizes:"è¡æ¯é ",totalItems:"è¡"}}),e}])}])}(),function(){angular.module("ui.grid.autoResize",["ui.grid"]).directive("uiGridAutoResize",["$timeout","gridUtil",function(e,t){return{require:"uiGrid",scope:!1,link:function(e,n,i,o){function r(){l=t.elementHeight(n),s=t.elementWidth(n)}function a(){clearTimeout(c),c=setTimeout(function(){var i=t.elementHeight(n),c=t.elementWidth(n);i!==l||c!==s?(o.grid.gridHeight=i,o.grid.gridWidth=c,e.$apply(function(){o.grid.refresh().then(function(){r(),a()})})):a()},250)}var s,l;r();var c;a(),e.$on("$destroy",function(){clearTimeout(c)})}}}])}(),function(){var e=angular.module("ui.grid.cellNav",["ui.grid"]);e.constant("uiGridCellNavConstants",{FEATURE_NAME:"gridCellNav",CELL_NAV_EVENT:"cellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3,PG_UP:4,PG_DOWN:5},EVENT_TYPE:{KEYDOWN:0,CLICK:1,CLEAR:2}}),e.factory("uiGridCellNavFactory",["gridUtil","uiGridConstants","uiGridCellNavConstants","GridRowColumn","$q",function(e,t,n,i,o){var r=function(e,t,n,i){this.rows=e.visibleRowCache,this.columns=t.visibleColumnCache,this.leftColumns=n?n.visibleColumnCache:[],this.rightColumns=i?i.visibleColumnCache:[],this.bodyContainer=e};return r.prototype.getFocusableCols=function(){return this.leftColumns.concat(this.columns,this.rightColumns).filter(function(e){return e.colDef.allowCellFocus})},r.prototype.getFocusableRows=function(){return this.rows.filter(function(e){return!1!==e.allowCellFocus})},r.prototype.getNextRowCol=function(e,t,i){switch(e){case n.direction.LEFT:return this.getRowColLeft(t,i);case n.direction.RIGHT:return this.getRowColRight(t,i);case n.direction.UP:return this.getRowColUp(t,i);case n.direction.DOWN:return this.getRowColDown(t,i);case n.direction.PG_UP:return this.getRowColPageUp(t,i);case n.direction.PG_DOWN:return this.getRowColPageDown(t,i)}},r.prototype.initializeSelection=function(){var e=this.getFocusableCols(),t=this.getFocusableRows();if(0===e.length||0===t.length)return null;return new i(t[0],e[0])},r.prototype.getRowColLeft=function(e,t){var n=this.getFocusableCols(),o=this.getFocusableRows(),r=n.indexOf(t),a=o.indexOf(e);-1===r&&(r=1);var s=0===r?n.length-1:r-1;return s>r?0===a?new i(e,n[s]):new i(o[a-1],n[s]):new i(e,n[s])},r.prototype.getRowColRight=function(e,t){var n=this.getFocusableCols(),o=this.getFocusableRows(),r=n.indexOf(t),a=o.indexOf(e);-1===r&&(r=0);var s=r===n.length-1?0:r+1;return s<r?a===o.length-1?new i(e,n[s]):new i(o[a+1],n[s]):new i(e,n[s])},r.prototype.getRowColDown=function(e,t){var n=this.getFocusableCols(),o=this.getFocusableRows(),r=n.indexOf(t),a=o.indexOf(e);return-1===r&&(r=0),a===o.length-1?new i(e,n[r]):new i(o[a+1],n[r])},r.prototype.getRowColPageDown=function(e,t){var n=this.getFocusableCols(),o=this.getFocusableRows(),r=n.indexOf(t),a=o.indexOf(e);-1===r&&(r=0);var s=this.bodyContainer.minRowsToRender();return a>=o.length-s?new i(o[o.length-1],n[r]):new i(o[a+s],n[r])},r.prototype.getRowColUp=function(e,t){var n=this.getFocusableCols(),o=this.getFocusableRows(),r=n.indexOf(t),a=o.indexOf(e);return-1===r&&(r=0),0===a?new i(e,n[r]):new i(o[a-1],n[r])},r.prototype.getRowColPageUp=function(e,t){var n=this.getFocusableCols(),o=this.getFocusableRows(),r=n.indexOf(t),a=o.indexOf(e);-1===r&&(r=0);var s=this.bodyContainer.minRowsToRender();return a-s<0?new i(o[0],n[r]):new i(o[a-s],n[r])},r}]),e.service("uiGridCellNavService",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q","uiGridCellNavFactory","GridRowColumn","ScrollEvent",function(e,t,n,i,o,r,a){var s={initializeGrid:function(e){e.registerColumnBuilder(s.cellNavColumnBuilder),e.cellNav={},e.cellNav.lastRowCol=null,e.cellNav.focusedCells=[],s.defaultGridOptions(e.options);var t={events:{cellNav:{navigate:function(e,t){},viewPortKeyDown:function(e,t){},viewPortKeyPress:function(e,t){}}},methods:{cellNav:{scrollToFocus:function(t,n){return s.scrollToFocus(e,t,n)},getFocusedCell:function(){return e.cellNav.lastRowCol},getCurrentSelection:function(){return e.cellNav.focusedCells},rowColSelectIndex:function(t){for(var n=-1,i=0;i<e.cellNav.focusedCells.length;i++)if(e.cellNav.focusedCells[i].col.uid===t.col.uid&&e.cellNav.focusedCells[i].row.uid===t.row.uid){n=i;break}return n}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.modifierKeysToMultiSelectCells=!0===e.modifierKeysToMultiSelectCells},decorateRenderContainers:function(e){var t=e.hasRightContainer()?e.renderContainers.right:null,n=e.hasLeftContainer()?e.renderContainers.left:null;null!==n&&(e.renderContainers.left.cellNav=new o(e.renderContainers.body,n,t,e.renderContainers.body)),null!==t&&(e.renderContainers.right.cellNav=new o(e.renderContainers.body,t,e.renderContainers.body,n)),e.renderContainers.body.cellNav=new o(e.renderContainers.body,e.renderContainers.body,n,t)},getDirection:function(e){return e.keyCode===t.keymap.LEFT||e.keyCode===t.keymap.TAB&&e.shiftKey?n.direction.LEFT:e.keyCode===t.keymap.RIGHT||e.keyCode===t.keymap.TAB?n.direction.RIGHT:e.keyCode===t.keymap.UP||e.keyCode===t.keymap.ENTER&&e.shiftKey?n.direction.UP:e.keyCode===t.keymap.PG_UP?n.direction.PG_UP:e.keyCode===t.keymap.DOWN||e.keyCode===t.keymap.ENTER&&!e.ctrlKey&&!e.altKey?n.direction.DOWN:e.keyCode===t.keymap.PG_DOWN?n.direction.PG_DOWN:null},cellNavColumnBuilder:function(e,t,n){var o=[];return e.allowCellFocus=void 0===e.allowCellFocus||e.allowCellFocus,i.all(o)},scrollToFocus:function(e,t,n){var i=null,o=null;return void 0!==t&&null!==t&&(i=e.getRow(t)),void 0!==n&&null!==n&&(o=e.getColumn(n.name?n.name:n.field)),e.api.core.scrollToIfNecessary(i,o).then(function(){var t={row:i,col:o};null!==i&&null!==o&&e.cellNav.broadcastCellNav(t)})},getLeftWidth:function(e,t){var n=0;if(!t)return n;var i=e.renderContainers.body.visibleColumnCache.indexOf(t);e.renderContainers.body.visibleColumnCache.forEach(function(e,t){t<i&&(n+=e.drawnWidth)});var o=0===i?0:(i+1)/e.renderContainers.body.visibleColumnCache.length;return n+=t.drawnWidth*o}};return s}]),e.directive("uiGridCellnav",["gridUtil","uiGridCellNavService","uiGridCellNavConstants","uiGridConstants","GridRowColumn","$timeout","$compile",function(e,t,n,i,o,r,a){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,controller:function(){},compile:function(){return{pre:function(e,r,a,s){var l=e,c=s.grid;t.initializeGrid(c),s.cellNav={},s.cellNav.makeRowCol=function(e){return e instanceof o||(e=new o(e.row,e.col)),e},s.cellNav.getActiveCell=function(){var e=r[0].getElementsByClassName("ui-grid-cell-focus");if(e.length>0)return e[0]},s.cellNav.broadcastCellNav=c.cellNav.broadcastCellNav=function(e,t,i){t=!(void 0===t||!t),e=s.cellNav.makeRowCol(e),s.cellNav.broadcastFocus(e,t,i),l.$broadcast(n.CELL_NAV_EVENT,e,t,i)},s.cellNav.clearFocus=c.cellNav.clearFocus=function(){c.cellNav.focusedCells=[],l.$broadcast(n.CELL_NAV_EVENT)},s.cellNav.broadcastFocus=function(e,t,n){t=!(void 0===t||!t),e=s.cellNav.makeRowCol(e);var i=e.row,r=e.col,a=s.grid.api.cellNav.rowColSelectIndex(e);if(null===c.cellNav.lastRowCol||-1===a){var l=new o(i,r);null!==c.cellNav.lastRowCol&&c.cellNav.lastRowCol.row===l.row&&c.cellNav.lastRowCol.col===l.col||(c.api.cellNav.raise.navigate(l,c.cellNav.lastRowCol),c.cellNav.lastRowCol=l),s.grid.options.modifierKeysToMultiSelectCells&&t?c.cellNav.focusedCells.push(e):c.cellNav.focusedCells=[e]}else c.options.modifierKeysToMultiSelectCells&&t&&a>=0&&c.cellNav.focusedCells.splice(a,1)},s.cellNav.handleKeyDown=function(e){var o=t.getDirection(e);if(null===o)return null;var r="body";e.uiGridTargetRenderContainerId&&(r=e.uiGridTargetRenderContainerId);var a=s.grid.api.cellNav.getFocusedCell();if(a){var l=s.grid.renderContainers[r].cellNav.getNextRowCol(o,a.row,a.col),d=s.grid.renderContainers[r].cellNav.getFocusableCols(),u=s.grid.api.cellNav.rowColSelectIndex(l);return o===n.direction.LEFT&&l.col===d[d.length-1]&&l.row===a.row&&e.keyCode===i.keymap.TAB&&e.shiftKey?(c.cellNav.focusedCells.splice(u,1),s.cellNav.clearFocus(),!0):o!==n.direction.RIGHT||l.col!==d[0]||l.row!==a.row||e.keyCode!==i.keymap.TAB||e.shiftKey?(c.scrollToIfNecessary(l.row,l.col).then(function(){s.cellNav.broadcastCellNav(l)}),e.stopPropagation(),e.preventDefault(),!1):(c.cellNav.focusedCells.splice(u,1),s.cellNav.clearFocus(),!0)}}},post:function(e,t,i,o){function r(){var i='<div id="'+s.id+'-aria-speakable" class="ui-grid-a11y-ariascreenreader-speakable ui-grid-offscreen" aria-live="assertive" role="region" aria-atomic="true" aria-hidden="false" aria-relevant="additions" >&nbsp;</div>',o=a(i)(e);t.prepend(o),e.$on(n.CELL_NAV_EVENT,function(e,t,n,i){function r(e){e!==o.text()&&(o[0].style.clip="rect(0px,0px,0px,0px)",o[0].innerHTML="",o[0].style.visibility="hidden",o[0].style.visibility="visible",""!==e&&(o[0].style.clip="auto",o[0].appendChild(document.createTextNode(e+" ")),o[0].style.visibility="hidden",o[0].style.visibility="visible"))}if(!i||"focus"!==i.type){for(var a=[],l=s.api.cellNav.getCurrentSelection(),c=0;c<l.length;c++)a.push(l[c].getIntersectionValueFiltered());r(a.toString())}})}var s=o.grid;r()}}}}}]),e.directive("uiGridRenderContainer",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","$compile","uiGridCellNavConstants",function(e,t,n,i,o,r,a){return{replace:!0,priority:-99999,require:["^uiGrid","uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{post:function(t,i,s,l){var c=l[0],d=l[1],u=l[2];if(c.grid.api.cellNav){var p=d.containerId,g=c.grid;if(o.decorateRenderContainers(g),"body"===p){c.grid.options.modifierKeysToMultiSelectCells?i.attr("aria-multiselectable",!0):i.attr("aria-multiselectable",!1);var m=r('<div class="ui-grid-focuser" role="region" aria-live="assertive" aria-atomic="false" tabindex="0" aria-controls="'+g.id+"-aria-speakable "+g.id+'-grid-container" aria-owns="'+g.id+'-grid-container"></div>')(t);i.append(m),m.on("focus",function(e){e.uiGridTargetRenderContainerId=p;var t=c.grid.api.cellNav.getFocusedCell();null===t&&(t=c.grid.renderContainers[p].cellNav.getNextRowCol(a.direction.DOWN,null,null),t.row&&t.col&&c.cellNav.broadcastCellNav(t))}),u.setAriaActivedescendant=function(e){i.attr("aria-activedescendant",e)},u.removeAriaActivedescendant=function(e){i.attr("aria-activedescendant")===e&&i.attr("aria-activedescendant","")},c.focus=function(){n.focus.byElement(m[0])};var f=null;m.on("keydown",function(e){e.uiGridTargetRenderContainerId=p;var t=c.grid.api.cellNav.getFocusedCell();null===c.cellNav.handleKeyDown(e)&&(c.grid.api.cellNav.raise.viewPortKeyDown(e,t),f=t)}),m.on("keypress",function(t){f&&(e(function(){c.grid.api.cellNav.raise.viewPortKeyPress(t,f)},4),f=null)}),t.$on("$destroy",function(){m.off()})}}}}}}}]),e.directive("uiGridViewport",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","uiGridCellNavConstants","$log","$compile",function(e,t,n,i,o,r,a,s){return{replace:!0,priority:-99999,require:["^uiGrid","^uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{pre:function(e,t,n,i){},post:function(e,t,n,i){var o=i[0],r=i[1];if(o.grid.api.cellNav){if("body"===r.containerId){var a=o.grid;a.api.core.on.scrollBegin(e,function(e){var t=o.grid.api.cellNav.getFocusedCell();null!==t&&r.colContainer.containsColumn(t.col)&&o.cellNav.clearFocus()}),a.api.core.on.scrollEnd(e,function(e){var t=o.grid.api.cellNav.getFocusedCell();null!==t&&r.colContainer.containsColumn(t.col)&&o.cellNav.broadcastCellNav(t)}),a.api.cellNav.on.navigate(e,function(){o.focus()})}}}}}}}]),e.directive("uiGridCell",["$timeout","$document","uiGridCellNavService","gridUtil","uiGridCellNavConstants","uiGridConstants","GridRowColumn",function(e,t,n,i,o,r,a){return{priority:-150,restrict:"A",require:["^uiGrid","?^uiGridCellnav"],scope:!1,link:function(e,t,n,i){function r(e){e.preventDefault()}function s(){if(!e.focused){t.find("div").addClass("ui-grid-cell-focus"),t.attr("aria-selected",!0),d.setAriaActivedescendant(t.attr("id")),e.focused=!0}}function l(){if(e.focused){t.find("div").removeClass("ui-grid-cell-focus"),t.attr("aria-selected",!1),d.removeAriaActivedescendant(t.attr("id")),e.focused=!1}}var c=i[0],d=i[1];if(c.grid.api.cellNav&&e.col.colDef.allowCellFocus){var u=c.grid;e.focused=!1,t.attr("tabindex",-1),t.find("div").on("click",function(t){c.cellNav.broadcastCellNav(new a(e.row,e.col),t.ctrlKey||t.metaKey,t),t.stopPropagation(),e.$apply()}),t.on("mousedown",r),c.grid.api.edit&&(c.grid.api.edit.on.beginCellEdit(e,function(){t.off("mousedown",r)}),c.grid.api.edit.on.afterCellEdit(e,function(){t.on("mousedown",r)}),c.grid.api.edit.on.cancelCellEdit(e,function(){t.on("mousedown",r)})),t.on("focus",function(t){c.cellNav.broadcastCellNav(new a(e.row,e.col),!1,t),t.stopPropagation(),e.$apply()}),e.$on(o.CELL_NAV_EVENT,function(t,n,i){u.cellNav.focusedCells.some(function(t,n){return t.row===e.row&&t.col===e.col})?s():l()}),e.$on("$destroy",function(){t.find("div").off(),t.off()})}}}}])}(),function(){var e=angular.module("ui.grid.edit",["ui.grid"]);e.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),e.service("uiGridEditService",["$q","uiGridConstants","gridUtil",function(e,t,n){var i={initializeGrid:function(e){i.defaultGridOptions(e.options),e.registerColumnBuilder(i.editColumnBuilder),e.edit={};var t={events:{edit:{afterCellEdit:function(e,t,n,i){},beginCellEdit:function(e,t,n){},cancelCellEdit:function(e,t){}}},methods:{edit:{}}};e.api.registerEventsFromObject(t.events)},defaultGridOptions:function(e){e.cellEditableCondition=void 0===e.cellEditableCondition||e.cellEditableCondition,e.enableCellEditOnFocus=void 0!==e.enableCellEditOnFocus&&e.enableCellEditOnFocus},editColumnBuilder:function(t,i,o){var r=[];return t.enableCellEdit=void 0===t.enableCellEdit?void 0===o.enableCellEdit?"object"!==t.type:o.enableCellEdit:t.enableCellEdit,t.cellEditableCondition=void 0===t.cellEditableCondition?o.cellEditableCondition:t.cellEditableCondition,t.enableCellEdit&&(t.editableCellTemplate=t.editableCellTemplate||o.editableCellTemplate||"ui-grid/cellEditor",r.push(n.getTemplate(t.editableCellTemplate).then(function(e){i.editableCellTemplate=e},function(e){throw new Error("Couldn't fetch/use colDef.editableCellTemplate '"+t.editableCellTemplate+"'")}))),t.enableCellEditOnFocus=void 0===t.enableCellEditOnFocus?o.enableCellEditOnFocus:t.enableCellEditOnFocus,e.all(r)},isStartEditKey:function(e){return!(e.metaKey||e.keyCode===t.keymap.ESC||e.keyCode===t.keymap.SHIFT||e.keyCode===t.keymap.CTRL||e.keyCode===t.keymap.ALT||e.keyCode===t.keymap.WIN||e.keyCode===t.keymap.CAPSLOCK||e.keyCode===t.keymap.LEFT||e.keyCode===t.keymap.TAB&&e.shiftKey||e.keyCode===t.keymap.RIGHT||e.keyCode===t.keymap.TAB||e.keyCode===t.keymap.UP||e.keyCode===t.keymap.ENTER&&e.shiftKey||e.keyCode===t.keymap.DOWN||e.keyCode===t.keymap.ENTER)}};return i}]),e.directive("uiGridEdit",["gridUtil","uiGridEditService",function(e,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){t.initializeGrid(o.grid)},post:function(e,t,n,i){}}}}}]),e.directive("uiGridViewport",["uiGridEditConstants",function(e){return{replace:!0,priority:-99998,require:["^uiGrid","^uiGridRenderContainer"],scope:!1,compile:function(){return{post:function(t,n,i,o){var r=o[0];if(r.grid.api.edit&&r.grid.api.cellNav){"body"===o[1].containerId&&(t.$on(e.events.CANCEL_CELL_EDIT,function(){r.focus()}),t.$on(e.events.END_CELL_EDIT,function(){r.focus()}))}}}}}}]),e.directive("uiGridCell",["$compile","$injector","$timeout","uiGridConstants","uiGridEditConstants","gridUtil","$parse","uiGridEditService","$rootScope","$q",function(e,t,n,i,o,r,a,s,l,c){var d=500;if(t.has("uiGridCellNavService")){t.get("uiGridCellNavService")}return{priority:-100,restrict:"A",scope:!1,require:"?^uiGrid",link:function(t,u,p,g){function m(){u.on("dblclick",w),u.on("touchstart",f),g&&g.grid.api.cellNav&&($=g.grid.api.cellNav.on.viewPortKeyDown(t,function(e,n){null!==n&&(n.row!==t.row||n.col!==t.col||t.col.colDef.enableCellEditOnFocus||y(e))}),D=g.grid.api.cellNav.on.navigate(t,function(e,i){t.col.colDef.enableCellEditOnFocus&&(i&&e.row===i.row&&e.col===i.col||e.row!==t.row||e.col!==t.col||n(function(){w()}))})),t.beginEditEventsWired=!0}function f(e){void 0!==e.originalEvent&&void 0!==e.originalEvent&&(e=e.originalEvent),u.on("touchend",h),A=n(function(){},d),A.then(function(){setTimeout(w,0),u.off("touchend",h)})}function h(e){n.cancel(A),u.off("touchend",h)}function v(){u.off("dblclick",w),u.off("keydown",y),u.off("touchstart",f),D(),$(),t.beginEditEventsWired=!1}function y(e){s.isStartEditKey(e)&&w(e)}function b(e,n){return!n.isSaving&&(angular.isFunction(e.colDef.cellEditableCondition)?e.colDef.cellEditableCondition(t):e.colDef.cellEditableCondition)}function w(e){t.grid.api.core.scrollToIfNecessary(t.row,t.col).then(function(){C(e)})}function C(s){if(!_&&b(t.col,t.row)){k=a(t.row.getQualifiedColField(t.col)),x=k(t),I=t.col.editableCellTemplate,I=t.col.colDef.editModelField?I.replace(i.MODEL_COL_FIELD,r.preEval("row.entity."+t.col.colDef.editModelField)):I.replace(i.MODEL_COL_FIELD,t.row.getQualifiedColField(t.col)),I=I.replace(i.COL_FIELD,"grid.getCellValue(row, col)");var d=t.col.colDef.editDropdownFilter?"|"+t.col.colDef.editDropdownFilter:"";I=I.replace(i.CUSTOM_FILTERS,d);var p="text";switch(t.col.colDef.type){case"boolean":p="checkbox";break;case"number":p="number";break;case"date":p="date"}I=I.replace("INPUT_TYPE",p);var g=t.col.colDef.editDropdownOptionsFunction;if(g)c.when(g(t.row.entity,t.col.colDef)).then(function(e){t.editDropdownOptionsArray=e});else{var m=t.col.colDef.editDropdownRowEntityOptionsArrayPath;t.editDropdownOptionsArray=m?E(t.row.entity,m):t.col.colDef.editDropdownOptionsArray}t.editDropdownIdLabel=t.col.colDef.editDropdownIdLabel?t.col.colDef.editDropdownIdLabel:"id",t.editDropdownValueLabel=t.col.colDef.editDropdownValueLabel?t.col.colDef.editDropdownValueLabel:"value";var f=function(){_=!0,v();var n=angular.element(I);u.append(n),M=t.$new(),e(n)(M),angular.element(u.children()[0]).addClass("ui-grid-cell-contents-hidden")};l.$$phase?f():t.$apply(f);var h=t.col.grid.api.core.on.scrollBegin(t,function(){t.grid.disableScrolling||(T(),t.grid.api.edit.raise.afterCellEdit(t.row.entity,t.col.colDef,k(t),x),h(),y(),w())}),y=t.$on(o.events.END_CELL_EDIT,function(){T(),t.grid.api.edit.raise.afterCellEdit(t.row.entity,t.col.colDef,k(t),x),y(),h(),w()}),w=t.$on(o.events.CANCEL_CELL_EDIT,function(){S(),w(),h(),y()});t.$broadcast(o.events.BEGIN_CELL_EDIT,s),n(function(){t.grid.api.edit.raise.beginCellEdit(t.row.entity,t.col.colDef,s)})}}function T(){if(t.grid.disableScrolling=!1,_){g&&g.grid.api.cellNav&&g.focus();var e=angular.element(u.children()[0]);M.$destroy(),angular.element(u.children()[1]).remove(),e.removeClass("ui-grid-cell-contents-hidden"),_=!1,m(),t.grid.api.core.notifyDataChange(i.dataChange.EDIT)}}function S(){t.grid.disableScrolling=!1,_&&(k.assign(t,x),t.$apply(),t.grid.api.edit.raise.cancelCellEdit(t.row.entity,t.col.colDef),T())}function E(e,t){t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var n=t.split(".");n.length;){var i=n.shift();if(!(i in e))return;e=e[i]}return e}var I,x,k,A,M,_=!1;if(t.col.colDef.enableCellEdit){var D=function(){},$=function(){},O=function(){t.col.colDef.enableCellEdit&&!1!==t.row.enableCellEdit?t.beginEditEventsWired||m():t.beginEditEventsWired&&v()};O();var P=t.$watch("row",function(e,t){e!==t&&O()});t.$on("$destroy",P)}}}}]),e.directive("uiGridEditor",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout","uiGridEditService",function(e,t,n,i,o){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer","ngModel"],compile:function(){return{pre:function(e,t,n){},post:function(e,r,a,s){var l,c,d;s[0]&&(l=s[0]),s[1]&&(c=s[1]),s[2]&&(d=s[2]),e.$on(n.events.BEGIN_CELL_EDIT,function(t,n){if(i(function(){if(r[0].focus(),r[0].select&&e.col.colDef.enableCellEditOnFocus||!l||!l.grid.api.cellNav)r[0].select();else try{r[0].setSelectionRange(r[0].value.length,r[0].value.length)}catch(e){}}),l&&l.grid.api.cellNav)var a=l.grid.api.cellNav.on.viewPortKeyPress(e,function(e,t){o.isStartEditKey(e)&&(d.$setViewValue(String.fromCharCode("number"==typeof e.which?e.which:e.keyCode),e),d.$render()),a()});r.on("blur",function(t){e.stopEdit(t)})}),e.deepEdit=!1,e.stopEdit=function(t){e.inputForm&&!e.inputForm.$valid?(t.stopPropagation(),e.$emit(n.events.CANCEL_CELL_EDIT)):e.$emit(n.events.END_CELL_EDIT),e.deepEdit=!1},r.on("click",function(t){"checkbox"!==r[0].type&&(e.deepEdit=!0,i(function(){e.grid.disableScrolling=!0}))}),r.on("keydown",function(i){switch(i.keyCode){case t.keymap.ESC:i.stopPropagation(),e.$emit(n.events.CANCEL_CELL_EDIT)}if(!e.deepEdit||i.keyCode!==t.keymap.LEFT&&i.keyCode!==t.keymap.RIGHT&&i.keyCode!==t.keymap.UP&&i.keyCode!==t.keymap.DOWN)if(l&&l.grid.api.cellNav)i.uiGridTargetRenderContainerId=c.containerId,null!==l.cellNav.handleKeyDown(i)&&e.stopEdit(i);else switch(i.keyCode){case t.keymap.ENTER:case t.keymap.TAB:i.stopPropagation(),i.preventDefault(),e.stopEdit(i)}else i.stopPropagation();return!0})}}}}}]),e.directive("uiGridEditor",["$filter",function(e){function t(e){if(void 0===e||""===e)return null;var t=e.split("-");if(3!==t.length)return null;var n=parseInt(t[0],10),i=parseInt(t[1],10),o=parseInt(t[2],10);return i<1||n<1||o<1?null:new Date(n,i-1,o)}return{priority:-100,require:"?ngModel",link:function(n,i,o,r){2===angular.version.minor&&o.type&&"date"===o.type&&r&&(r.$formatters.push(function(t){return r.$setValidity(null,!t||!isNaN(t.getTime())),e("date")(t,"yyyy-MM-dd")}),r.$parsers.push(function(e){if(e&&e.length>0){var n=t(e);return r.$setValidity(null,n&&!isNaN(n.getTime())),n}return r.$setValidity(null,!0),null}))}}}]),e.directive("uiGridEditDropdown",["uiGridConstants","uiGridEditConstants",function(e,t){return{require:["?^uiGrid","?^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function(e,t,n){},post:function(n,i,o,r){var a=r[0],s=r[1];n.$on(t.events.BEGIN_CELL_EDIT,function(){i[0].focus(),i[0].style.width=i[0].parentElement.offsetWidth-1+"px",i.on("blur",function(e){n.stopEdit(e)})}),n.stopEdit=function(e){n.$emit(t.events.END_CELL_EDIT)},i.on("keydown",function(i){switch(i.keyCode){case e.keymap.ESC:i.stopPropagation(),n.$emit(t.events.CANCEL_CELL_EDIT)}if(a&&a.grid.api.cellNav)i.uiGridTargetRenderContainerId=s.containerId,null!==a.cellNav.handleKeyDown(i)&&n.stopEdit(i);else switch(i.keyCode){case e.keymap.ENTER:case e.keymap.TAB:i.stopPropagation(),i.preventDefault(),n.stopEdit(i)}return!0})}}}}}]),e.directive("uiGridEditFileChooser",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout",function(e,t,n,i){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function(e,t,n){},post:function(t,i,o,r){var a;r[0]&&(a=r[0]),r[1]&&r[1];var s=(a.grid,function(i){var o=i.srcElement||i.target;o&&o.files&&o.files.length>0?("function"==typeof t.col.colDef.editFileChooserCallback?t.col.colDef.editFileChooserCallback(t.row,t.col,o.files):e.logError("You need to set colDef.editFileChooserCallback to use the file chooser"),o.form.reset(),t.$emit(n.events.END_CELL_EDIT)):t.$emit(n.events.CANCEL_CELL_EDIT)});i[0].addEventListener("change",s,!1),t.$on(n.events.BEGIN_CELL_EDIT,function(){i[0].focus(),i[0].select(),i.on("blur",function(e){t.$emit(n.events.END_CELL_EDIT)})})}}}}}])}(),function(){var e=angular.module("ui.grid.expandable",["ui.grid"]);e.service("uiGridExpandableService",["gridUtil","$compile",function(e,t){var n={initializeGrid:function(t){t.expandable={},t.expandable.expandedAll=!1,t.options.enableExpandable=!1!==t.options.enableExpandable,t.options.expandableRowHeight=t.options.expandableRowHeight||150,t.options.expandableRowHeaderWidth=t.options.expandableRowHeaderWidth||40,t.options.enableExpandable&&!t.options.expandableRowTemplate&&(e.logError("You have not set the expandableRowTemplate, disabling expandable module"),t.options.enableExpandable=!1);var i={events:{expandable:{rowExpandedBeforeStateChanged:function(e,t){},rowExpandedStateChanged:function(e,t){}}},methods:{expandable:{toggleRowExpansion:function(e){var i=t.getRow(e);null!==i&&n.toggleRowExpansion(t,i)},expandAllRows:function(){n.expandAllRows(t)},collapseAllRows:function(){n.collapseAllRows(t)},toggleAllRows:function(){n.toggleAllRows(t)},expandRow:function(e){var i=t.getRow(e);null===i||i.isExpanded||n.toggleRowExpansion(t,i)},collapseRow:function(e){var i=t.getRow(e);null!==i&&i.isExpanded&&n.toggleRowExpansion(t,i)},getExpandedRows:function(){return n.getExpandedRows(t).map(function(e){return e.entity})}}}};t.api.registerEventsFromObject(i.events),t.api.registerMethodsFromObject(i.methods)},toggleRowExpansion:function(e,t){e.api.expandable.raise.rowExpandedBeforeStateChanged(t),t.isExpanded=!t.isExpanded,angular.isUndefined(t.expandedRowHeight)&&(t.expandedRowHeight=e.options.expandableRowHeight),t.isExpanded?t.height=t.grid.options.rowHeight+t.expandedRowHeight:(t.height=t.grid.options.rowHeight,e.expandable.expandedAll=!1),e.api.expandable.raise.rowExpandedStateChanged(t)},expandAllRows:function(e,t){e.renderContainers.body.visibleRowCache.forEach(function(t){t.isExpanded||n.toggleRowExpansion(e,t)}),e.expandable.expandedAll=!0,e.queueGridRefresh()},collapseAllRows:function(e){e.renderContainers.body.visibleRowCache.forEach(function(t){t.isExpanded&&n.toggleRowExpansion(e,t)}),e.expandable.expandedAll=!1,e.queueGridRefresh()},toggleAllRows:function(e){e.expandable.expandedAll?n.collapseAllRows(e):n.expandAllRows(e)},getExpandedRows:function(e){return e.rows.filter(function(e){return e.isExpanded})}};return n}]),e.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(e,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(n,i,o,r){if(!1!==r.grid.options.enableExpandableRowHeader){var a={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:r.grid.options.expandableRowHeaderWidth||40};a.cellTemplate=t.get("ui-grid/expandableRowHeader"),a.headerCellTemplate=t.get("ui-grid/expandableTopRowHeader"),r.grid.addRowHeaderColumn(a)}e.initializeGrid(r.grid)},post:function(e,t,n,i){}}}}}]),e.directive("uiGrid",["uiGridExpandableService","$templateCache",function(e,t){return{replace:!0,priority:599,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,t,n,i){i.grid.api.core.on.renderingComplete(e,function(){e.row&&e.row.grid&&e.row.grid.options&&e.row.grid.options.enableExpandable&&(i.grid.parentRow=e.row)})},post:function(e,t,n,i){}}}}}]),e.directive("uiGridExpandableRow",["uiGridExpandableService","$timeout","$compile","uiGridConstants","gridUtil","$interval","$log",function(e,t,n,i,o,r,a){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function(e,t,i,r){o.getTemplate(e.grid.options.expandableRowTemplate).then(function(i){if(e.grid.options.expandableRowScope){var o=e.grid.options.expandableRowScope;for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r])}var a=n(i)(e);t.append(a),e.row.expandedRendered=!0})},post:function(e,t,n,i){e.$on("$destroy",function(){e.row.expandedRendered=!1})}}}}}]),e.directive("uiGridRow",["$compile","gridUtil","$templateCache",function(e,t,n){return{priority:-200,scope:!1,compile:function(e,t){return{pre:function(e,t,n,i){e.expandableRow={},e.expandableRow.shouldRenderExpand=function(){return"body"===e.colContainer.name&&!1!==e.grid.options.enableExpandable&&e.row.isExpanded&&(!e.grid.isScrollingVertically||e.row.expandedRendered)},e.expandableRow.shouldRenderFiller=function(){return e.row.isExpanded&&("body"!==e.colContainer.name||e.grid.isScrollingVertically&&!e.row.expandedRendered)}},post:function(e,t,n,i){}}}}}]),e.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(e,t,n){return{priority:-200,scope:!1,compile:function(e,t){var i=angular.element(e.children().children()[0]),o=n.get("ui-grid/expandableScrollFiller"),r=n.get("ui-grid/expandableRow");return i.append(r),i.append(o),{pre:function(e,t,n,i){},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.exporter",["ui.grid"]);e.constant("uiGridExporterConstants",{featureName:"exporter",ALL:"all",VISIBLE:"visible",SELECTED:"selected",CSV_CONTENT:"CSV_CONTENT",BUTTON_LABEL:"BUTTON_LABEL",FILE_NAME:"FILE_NAME"}),e.service("uiGridExporterService",["$q","uiGridExporterConstants","gridUtil","$compile","$interval","i18nService",function(e,t,n,i,o,r){var a={delay:100,initializeGrid:function(e){e.exporter={},this.defaultGridOptions(e.options);var t={events:{exporter:{}},methods:{exporter:{csvExport:function(t,n){a.csvExport(e,t,n)},pdfExport:function(t,n){a.pdfExport(e,t,n)}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods),e.api.core.addToGridMenu?a.addToMenu(e):o(function(){e.api.core.addToGridMenu&&a.addToMenu(e)},this.delay,1)},defaultGridOptions:function(e){e.exporterSuppressMenu=!0===e.exporterSuppressMenu,e.exporterMenuLabel=e.exporterMenuLabel?e.exporterMenuLabel:"Export",e.exporterSuppressColumns=e.exporterSuppressColumns?e.exporterSuppressColumns:[],e.exporterCsvColumnSeparator=e.exporterCsvColumnSeparator?e.exporterCsvColumnSeparator:",",e.exporterCsvFilename=e.exporterCsvFilename?e.exporterCsvFilename:"download.csv",e.exporterPdfFilename=e.exporterPdfFilename?e.exporterPdfFilename:"download.pdf",e.exporterOlderExcelCompatibility=!0===e.exporterOlderExcelCompatibility,e.exporterPdfDefaultStyle=e.exporterPdfDefaultStyle?e.exporterPdfDefaultStyle:{fontSize:11},e.exporterPdfTableStyle=e.exporterPdfTableStyle?e.exporterPdfTableStyle:{margin:[0,5,0,15]},e.exporterPdfTableHeaderStyle=e.exporterPdfTableHeaderStyle?e.exporterPdfTableHeaderStyle:{bold:!0,fontSize:12,color:"black"},e.exporterPdfHeader=e.exporterPdfHeader?e.exporterPdfHeader:null,e.exporterPdfFooter=e.exporterPdfFooter?e.exporterPdfFooter:null,e.exporterPdfOrientation=e.exporterPdfOrientation?e.exporterPdfOrientation:"landscape",e.exporterPdfPageSize=e.exporterPdfPageSize?e.exporterPdfPageSize:"A4",e.exporterPdfMaxGridWidth=e.exporterPdfMaxGridWidth?e.exporterPdfMaxGridWidth:720,e.exporterMenuAllData=void 0===e.exporterMenuAllData||e.exporterMenuAllData,e.exporterMenuVisibleData=void 0===e.exporterMenuVisibleData||e.exporterMenuVisibleData,e.exporterMenuSelectedData=void 0===e.exporterMenuSelectedData||e.exporterMenuSelectedData,e.exporterMenuCsv=void 0===e.exporterMenuCsv||e.exporterMenuCsv,e.exporterMenuPdf=void 0===e.exporterMenuPdf||e.exporterMenuPdf,e.exporterPdfCustomFormatter=e.exporterPdfCustomFormatter&&"function"==typeof e.exporterPdfCustomFormatter?e.exporterPdfCustomFormatter:function(e){return e},e.exporterHeaderFilterUseName=!0===e.exporterHeaderFilterUseName,e.exporterFieldCallback=e.exporterFieldCallback?e.exporterFieldCallback:function(e,t,n,i){return i},e.exporterAllDataFn=e.exporterAllDataFn?e.exporterAllDataFn:null,null==e.exporterAllDataFn&&e.exporterAllDataPromise&&(e.exporterAllDataFn=e.exporterAllDataPromise)},addToMenu:function(e){e.api.core.addToGridMenu(e,[{title:r.getSafeText("gridMenu.exporterAllAsCsv"),action:function(e){this.grid.api.exporter.csvExport(t.ALL,t.ALL)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuAllData},order:200},{title:r.getSafeText("gridMenu.exporterVisibleAsCsv"),action:function(e){this.grid.api.exporter.csvExport(t.VISIBLE,t.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuVisibleData},order:201},{title:r.getSafeText("gridMenu.exporterSelectedAsCsv"),action:function(e){this.grid.api.exporter.csvExport(t.SELECTED,t.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuSelectedData&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:202},{title:r.getSafeText("gridMenu.exporterAllAsPdf"),action:function(e){this.grid.api.exporter.pdfExport(t.ALL,t.ALL)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuAllData},order:203},{title:r.getSafeText("gridMenu.exporterVisibleAsPdf"),action:function(e){this.grid.api.exporter.pdfExport(t.VISIBLE,t.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuVisibleData},order:204},{title:r.getSafeText("gridMenu.exporterSelectedAsPdf"),action:function(e){this.grid.api.exporter.pdfExport(t.SELECTED,t.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuSelectedData&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:205}])},csvExport:function(e,t,n){var i=this;this.loadAllDataIfNeeded(e,t,n).then(function(){var o=e.options.showHeader?i.getColumnHeaders(e,n):[],r=i.getData(e,t,n),a=i.formatAsCsv(o,r,e.options.exporterCsvColumnSeparator);i.downloadFile(e.options.exporterCsvFilename,a,e.options.exporterOlderExcelCompatibility)})},loadAllDataIfNeeded:function(n,i,o){if(i===t.ALL&&n.rows.length!==n.options.totalItems&&n.options.exporterAllDataFn)return n.options.exporterAllDataFn().then(function(){n.modifyRows(n.options.data)});var r=e.defer();return r.resolve(),r.promise},getColumnHeaders:function(e,n){var i,o=[];if(n===t.ALL)i=e.columns;else{var r=e.renderContainers.left?e.renderContainers.left.visibleColumnCache.filter(function(e){return e.visible}):[],a=e.renderContainers.body?e.renderContainers.body.visibleColumnCache.filter(function(e){return e.visible}):[],s=e.renderContainers.right?e.renderContainers.right.visibleColumnCache.filter(function(e){return e.visible}):[];i=r.concat(a,s)}return i.forEach(function(t,n){!0!==t.colDef.exporterSuppressExport&&-1===e.options.exporterSuppressColumns.indexOf(t.name)&&o.push({name:t.field,displayName:e.options.exporterHeaderFilter?e.options.exporterHeaderFilterUseName?e.options.exporterHeaderFilter(t.name):e.options.exporterHeaderFilter(t.displayName):t.displayName,width:t.drawnWidth?t.drawnWidth:t.width,align:"number"===t.colDef.type?"right":"left"})}),o},getData:function(e,i,o,r){var a,s,l=[];switch(i){case t.ALL:a=e.rows;break;case t.VISIBLE:a=e.getVisibleRows();break;case t.SELECTED:e.api.selection?a=e.api.selection.getSelectedGridRows():n.logError("selection feature must be enabled to allow selected rows to be exported")}if(o===t.ALL)s=e.columns;else{var c=e.renderContainers.left?e.renderContainers.left.visibleColumnCache.filter(function(e){return e.visible}):[],d=e.renderContainers.body?e.renderContainers.body.visibleColumnCache.filter(function(e){return e.visible}):[],u=e.renderContainers.right?e.renderContainers.right.visibleColumnCache.filter(function(e){return e.visible}):[];s=c.concat(d,u)}return a.forEach(function(n,i){if(!1!==n.exporterEnableExporting){var a=[];s.forEach(function(i,s){if((i.visible||o===t.ALL)&&!0!==i.colDef.exporterSuppressExport&&-1===e.options.exporterSuppressColumns.indexOf(i.name)){var l=r?e.getCellDisplayValue(n,i):e.getCellValue(n,i),c={value:e.options.exporterFieldCallback(e,n,i,l)};i.colDef.exporterPdfAlign&&(c.alignment=i.colDef.exporterPdfAlign),a.push(c)}}),l.push(a)}}),l},formatAsCsv:function(e,t,n){var i=this,o=e.map(function(e){return{value:e.displayName}}),r=o.length>0?i.formatRowAsCsv(this,n)(o)+"\n":"";return r+=t.map(this.formatRowAsCsv(this,n)).join("\n")},formatRowAsCsv:function(e,t){return function(n){return n.map(e.formatFieldAsCsv).join(t)}},formatFieldAsCsv:function(e){return null==e.value?"":"number"==typeof e.value?e.value:"boolean"==typeof e.value?e.value?"TRUE":"FALSE":"string"==typeof e.value?'"'+e.value.replace(/"/g,'""')+'"':JSON.stringify(e.value)},isIE:function(){var e=navigator.userAgent.search(/(?:Edge|MSIE|Trident\/.*; rv:)/),t=!1;return-1!==e&&(t=!0),t},downloadFile:function(e,t,n){var i,o,r=document,a=r.createElement("a"),s="application/octet-stream;charset=utf-8";if((o=this.isIE())&&o<10){var l=r.createElement("iframe");return document.body.appendChild(l),l.contentWindow.document.open("text/html","replace"),l.contentWindow.document.write("sep=,\r\n"+t),l.contentWindow.document.close(),l.contentWindow.focus(),l.contentWindow.document.execCommand("SaveAs",!0,e),document.body.removeChild(l),!0}if(navigator.msSaveBlob)return navigator.msSaveOrOpenBlob(new Blob([n?"\ufeff":"",t],{type:s}),e);if("download"in a){var c=new Blob([n?"\ufeff":"",t],{type:s});i=URL.createObjectURL(c),a.setAttribute("download",e)}else i="data:"+s+","+encodeURIComponent(t),a.setAttribute("target","_blank");a.href=i,a.setAttribute("style","display:none;"),r.body.appendChild(a),setTimeout(function(){if(a.click)a.click();else if(document.createEvent){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),a.dispatchEvent(e)}r.body.removeChild(a)},this.delay)},pdfExport:function(e,t,n){var i=this;this.loadAllDataIfNeeded(e,t,n).then(function(){var o=i.getColumnHeaders(e,n),r=i.getData(e,t,n),a=i.prepareAsPdf(e,o,r);i.isIE()||-1!==navigator.appVersion.indexOf("Edge")?i.downloadPDF(e.options.exporterPdfFilename,a):pdfMake.createPdf(a).open()})},downloadPDF:function(e,t){var n,i=document;i.createElement("a");n=this.isIE();var o,r=pdfMake.createPdf(t);r.getBuffer(function(t){if(o=new Blob([t]),navigator.msSaveBlob)return navigator.msSaveBlob(o,e);if(n){var r=i.createElement("iframe");return document.body.appendChild(r),r.contentWindow.document.open("text/html","replace"),r.contentWindow.document.write(o),r.contentWindow.document.close(),r.contentWindow.focus(),r.contentWindow.document.execCommand("SaveAs",!0,e),document.body.removeChild(r),!0}})},prepareAsPdf:function(e,t,n){var i=this.calculatePdfHeaderWidths(e,t),o=t.map(function(e){return{text:e.displayName,style:"tableHeader"}}),r=n.map(this.formatRowAsPdf(this)),a=[o].concat(r),s={pageOrientation:e.options.exporterPdfOrientation,pageSize:e.options.exporterPdfPageSize,content:[{style:"tableStyle",table:{headerRows:1,widths:i,body:a}}],styles:{tableStyle:e.options.exporterPdfTableStyle,tableHeader:e.options.exporterPdfTableHeaderStyle},defaultStyle:e.options.exporterPdfDefaultStyle};return e.options.exporterPdfLayout&&(s.layout=e.options.exporterPdfLayout),e.options.exporterPdfHeader&&(s.header=e.options.exporterPdfHeader),e.options.exporterPdfFooter&&(s.footer=e.options.exporterPdfFooter),e.options.exporterPdfCustomFormatter&&(s=e.options.exporterPdfCustomFormatter(s)),s},calculatePdfHeaderWidths:function(e,t){var n=0;t.forEach(function(e){"number"==typeof e.width&&(n+=e.width)});var i=0;t.forEach(function(e){if("*"===e.width&&(i+=100),"string"==typeof e.width&&e.width.match(/(\d)*%/)){var t=parseInt(e.width.match(/(\d)*%/)[0]);e.width=n*t/100,i+=e.width}});var o=n+i;return t.map(function(t){return"*"===t.width?t.width:t.width*e.options.exporterPdfMaxGridWidth/o})},formatRowAsPdf:function(e){return function(t){return t.map(e.formatFieldAsPdfString)}},formatFieldAsPdfString:function(e){var t;return t=null==e.value?"":"number"==typeof e.value?e.value.toString():"boolean"==typeof e.value?e.value?"TRUE":"FALSE":"string"==typeof e.value?e.value.replace(/"/g,'""'):JSON.stringify(e.value).replace(/^"/,"").replace(/"$/,""),e.alignment&&"string"==typeof e.alignment&&(t={text:t,alignment:e.alignment}),t}};return a}]),e.directive("uiGridExporter",["uiGridExporterConstants","uiGridExporterService","gridUtil","$compile",function(e,t,n,i){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(e,n,i,o){t.initializeGrid(o.grid),o.grid.exporter.$scope=e}}}])}(),function(){var e=angular.module("ui.grid.grouping",["ui.grid","ui.grid.treeBase"]);e.constant("uiGridGroupingConstants",{featureName:"grouping",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),e.service("uiGridGroupingService",["$q","uiGridGroupingConstants","gridUtil","rowSorter","GridRow","gridClassFactory","i18nService","uiGridConstants","uiGridTreeBaseService",function(e,t,n,i,o,r,a,s,l){var c={initializeGrid:function(e,t){l.initializeGrid(e,t),e.grouping={},e.grouping.groupHeaderCache={},c.defaultGridOptions(e.options),e.registerRowsProcessor(c.groupRows,400),e.registerColumnBuilder(c.groupingColumnBuilder),e.registerColumnsProcessor(c.groupingColumnProcessor,400);var n={events:{grouping:{aggregationChanged:{},groupingChanged:{}}},methods:{grouping:{getGrouping:function(t){var n=c.getGrouping(e);return n.grouping.forEach(function(e){e.colName=e.col.name,delete e.col}),n.aggregations.forEach(function(e){e.colName=e.col.name,delete e.col}),n.aggregations=n.aggregations.filter(function(e){return!e.aggregation.source||"grouping"!==e.aggregation.source}),t&&(n.rowExpandedStates=c.getRowExpandedStates(e.grouping.groupingHeaderCache)),n},setGrouping:function(t){c.setGrouping(e,t)},groupColumn:function(t){var n=e.getColumn(t);c.groupColumn(e,n)},ungroupColumn:function(t){var n=e.getColumn(t);c.ungroupColumn(e,n)},clearGrouping:function(){c.clearGrouping(e)},aggregateColumn:function(t,n,i){var o=e.getColumn(t);c.aggregateColumn(e,o,n,i)}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods),e.api.core.on.sortChanged(t,c.tidyPriorities)},defaultGridOptions:function(e){e.enableGrouping=!1!==e.enableGrouping,e.groupingShowCounts=!1!==e.groupingShowCounts,e.groupingNullLabel=void 0===e.groupingNullLabel?"Null":e.groupingNullLabel,e.enableGroupHeaderSelection=!0===e.enableGroupHeaderSelection},groupingColumnBuilder:function(e,i,o){if(!1!==e.enableGrouping){void 0===i.grouping&&void 0!==e.grouping?(i.grouping=angular.copy(e.grouping),void 0!==i.grouping.groupPriority&&i.grouping.groupPriority>-1&&(i.treeAggregationFn=l.nativeAggregations()[t.aggregation.COUNT].aggregationFn,i.treeAggregationFinalizerFn=c.groupedFinalizerFn)):void 0===i.grouping&&(i.grouping={}),void 0!==i.grouping&&void 0!==i.grouping.groupPriority&&i.grouping.groupPriority>=0&&(i.suppressRemoveSort=!0);var r={name:"ui.grid.grouping.group",title:a.get().grouping.group,icon:"ui-grid-icon-indent-right",shown:function(){return void 0===this.context.col.grouping||void 0===this.context.col.grouping.groupPriority||this.context.col.grouping.groupPriority<0},action:function(){c.groupColumn(this.context.col.grid,this.context.col)}},s={name:"ui.grid.grouping.ungroup",title:a.get().grouping.ungroup,icon:"ui-grid-icon-indent-left",shown:function(){return void 0!==this.context.col.grouping&&void 0!==this.context.col.grouping.groupPriority&&this.context.col.grouping.groupPriority>=0},action:function(){c.ungroupColumn(this.context.col.grid,this.context.col)}},d={name:"ui.grid.grouping.aggregateRemove",title:a.get().grouping.aggregate_remove,shown:function(){return void 0!==this.context.col.treeAggregationFn},action:function(){c.aggregateColumn(this.context.col.grid,this.context.col,null)}},u=function(e,t){t=t||a.get().grouping["aggregate_"+e]||e;var o={name:"ui.grid.grouping.aggregate"+e,title:t,shown:function(){return void 0===this.context.col.treeAggregation||void 0===this.context.col.treeAggregation.type||this.context.col.treeAggregation.type!==e},action:function(){c.aggregateColumn(this.context.col.grid,this.context.col,e)}};n.arrayContainsObjectWithProperty(i.menuItems,"name","ui.grid.grouping.aggregate"+e)||i.menuItems.push(o)};!1!==i.colDef.groupingShowGroupingMenu&&(n.arrayContainsObjectWithProperty(i.menuItems,"name","ui.grid.grouping.group")||i.menuItems.push(r),n.arrayContainsObjectWithProperty(i.menuItems,"name","ui.grid.grouping.ungroup")||i.menuItems.push(s)),!1!==i.colDef.groupingShowAggregationMenu&&(angular.forEach(l.nativeAggregations(),function(e,t){u(t)}),angular.forEach(o.treeCustomAggregations,function(e,t){u(t,e.menuTitle)}),n.arrayContainsObjectWithProperty(i.menuItems,"name","ui.grid.grouping.aggregateRemove")||i.menuItems.push(d))}},groupingColumnProcessor:function(e,t){return e=c.moveGroupColumns(this,e,t)},groupedFinalizerFn:function(e){var t=this;void 0!==e.groupVal?(e.rendered=e.groupVal,t.grid.options.groupingShowCounts&&"date"!==t.colDef.type&&(e.rendered+=" ("+e.value+")")):e.rendered=null},moveGroupColumns:function(e,t,n){return!1===e.options.moveGroupColumns?t:(t.forEach(function(e,t){e.groupingPosition=t}),t.sort(function(e,t){var n,i;return n=e.isRowHeader?-1e3:void 0===e.grouping||void 0===e.grouping.groupPriority||e.grouping.groupPriority<0?null:e.grouping.groupPriority,i=t.isRowHeader?-1e3:void 0===t.grouping||void 0===t.grouping.groupPriority||t.grouping.groupPriority<0?null:t.grouping.groupPriority,null!==n&&null===i?-1:null!==i&&null===n?1:null!==n&&null!==i?n-i:e.groupingPosition-t.groupingPosition}),t.forEach(function(e,t){delete e.groupingPosition}),t)},groupColumn:function(e,n){void 0===n.grouping&&(n.grouping={});var i=c.getGrouping(e);n.grouping.groupPriority=i.grouping.length,n.sort?void 0!==n.sort.direction&&null!==n.sort.direction||(n.sort.direction=s.ASC):n.sort={direction:s.ASC},n.treeAggregation={type:t.aggregation.COUNT,source:"grouping"},n.treeAggregationFn=l.nativeAggregations()[t.aggregation.COUNT].aggregationFn,n.treeAggregationFinalizerFn=c.groupedFinalizerFn,e.api.grouping.raise.groupingChanged(n),e.api.core.raise.sortChanged(e,e.getColumnSorting()),e.queueGridRefresh()},ungroupColumn:function(e,t){void 0!==t.grouping&&(delete t.grouping.groupPriority,delete t.treeAggregation,delete t.customTreeAggregationFinalizer,c.tidyPriorities(e),e.api.grouping.raise.groupingChanged(t),e.queueGridRefresh())},aggregateColumn:function(e,t,n){void 0!==t.grouping&&void 0!==t.grouping.groupPriority&&t.grouping.groupPriority>=0&&c.ungroupColumn(e,t);var i={};void 0!==e.options.treeCustomAggregations[n]?i=e.options.treeCustomAggregations[n]:void 0!==l.nativeAggregations()[n]&&(i=l.nativeAggregations()[n]),t.treeAggregation={type:n,label:a.get().aggregation[i.label]||i.label},t.treeAggregationFn=i.aggregationFn,t.treeAggregationFinalizerFn=i.finalizerFn,e.api.grouping.raise.aggregationChanged(t),e.queueGridRefresh()},setGrouping:function(e,t){void 0!==t&&(c.clearGrouping(e),t.grouping&&t.grouping.length&&t.grouping.length>0&&t.grouping.forEach(function(t){var n=e.getColumn(t.colName);n&&c.groupColumn(e,n)}),t.aggregations&&t.aggregations.length&&t.aggregations.forEach(function(t){var n=e.getColumn(t.colName);n&&c.aggregateColumn(e,n,t.aggregation.type)}),t.rowExpandedStates&&c.applyRowExpandedStates(e.grouping.groupingHeaderCache,t.rowExpandedStates))},clearGrouping:function(e){var t=c.getGrouping(e);t.grouping.length>0&&t.grouping.forEach(function(t){t.col||(t.col=e.getColumn(t.colName)),c.ungroupColumn(e,t.col)}),t.aggregations.length>0&&t.aggregations.forEach(function(t){t.col||(t.col=e.getColumn(t.colName)),c.aggregateColumn(e,t.col,null)})},tidyPriorities:function(e){void 0!==e&&void 0===e.grid||void 0===this.grid||(e=this.grid);var t=[],n=[];e.columns.forEach(function(e,i){void 0!==e.grouping&&void 0!==e.grouping.groupPriority&&e.grouping.groupPriority>=0?t.push(e):void 0!==e.sort&&void 0!==e.sort.priority&&e.sort.priority>=0&&n.push(e)}),t.sort(function(e,t){return e.grouping.groupPriority-t.grouping.groupPriority}),t.forEach(function(e,t){e.grouping.groupPriority=t,e.suppressRemoveSort=!0,void 0===e.sort&&(e.sort={}),e.sort.priority=t});var i=t.length;n.sort(function(e,t){return e.sort.priority-t.sort.priority}),n.forEach(function(e,t){e.sort.priority=i,e.suppressRemoveSort=e.colDef.suppressRemoveSort,i++})},groupRows:function(e){if(0===e.length)return e;var t=this;t.grouping.oldGroupingHeaderCache=t.grouping.groupingHeaderCache||{},t.grouping.groupingHeaderCache={};for(var n=c.initialiseProcessingState(t),o=function(o,s){var l=t.getCellValue(a,o.col);o.initialised&&0===i.getSortFn(t,o.col,e)(l,o.currentValue)||(c.insertGroupHeader(t,e,r,n,s),r++)},r=0;r<e.length;r++){var a=e[r];a.visible&&n.forEach(o)}return delete t.grouping.oldGroupingHeaderCache,e},initialiseProcessingState:function(e){var t=[];return c.getGrouping(e).grouping.forEach(function(e,n){t.push({fieldName:e.field,col:e.col,initialised:!1,currentValue:null,currentRow:null})}),t},getGrouping:function(e){var t=[],n=[];return e.columns.forEach(function(e,i){e.grouping&&void 0!==e.grouping.groupPriority&&e.grouping.groupPriority>=0&&t.push({field:e.field,col:e,groupPriority:e.grouping.groupPriority,grouping:e.grouping}),e.treeAggregation&&e.treeAggregation.type&&n.push({field:e.field,col:e,aggregation:e.treeAggregation})}),t.sort(function(e,t){return e.groupPriority-t.groupPriority}),t.forEach(function(e,t){e.grouping.groupPriority=t,e.groupPriority=t,delete e.grouping}),{grouping:t,aggregations:n}},insertGroupHeader:function(e,t,n,i,a){var s=(i[a].fieldName,i[a].col),l=e.getCellValue(t[n],s),d=l;void 0!==l&&null!==l||(d=e.options.groupingNullLabel);for(var u=function(e){return angular.isObject(e)?JSON.stringify(e):e},p=e.grouping.oldGroupingHeaderCache,g=0;g<a;g++)p&&p[u(i[g].currentValue)]&&(p=p[u(i[g].currentValue)].children);var m;for(p&&p[u(l)]?(m=p[u(l)].row,m.entity={}):(m=new o({},null,e),r.rowTemplateAssigner.call(e,m)),m.entity["$$"+i[a].col.uid]={groupVal:d},m.treeLevel=a,m.groupHeader=!0,m.internalRow=!0,m.enableCellEdit=!1,m.enableSelection=e.options.enableGroupHeaderSelection,i[a].initialised=!0,i[a].currentValue=l,i[a].currentRow=m,c.finaliseProcessingState(i,a+1),t.splice(n,0,m),p=e.grouping.groupingHeaderCache,g=0;g<a;g++)p=p[u(i[g].currentValue)].children;p[u(l)]={row:m,children:{}}},finaliseProcessingState:function(e,t){for(var n=t;n<e.length;n++)e[n].initialised=!1,e[n].currentRow=null,e[n].currentValue=null},getRowExpandedStates:function(e){if(void 0===e)return{};var t={};return angular.forEach(e,function(e,n){t[n]={state:e.row.treeNode.state},e.children?t[n].children=c.getRowExpandedStates(e.children):t[n].children={}}),t},applyRowExpandedStates:function(e,t){void 0!==t&&angular.forEach(t,function(t,n){e[n]&&(e[n].row.treeNode.state=t.state,t.children&&e[n].children&&c.applyRowExpandedStates(e[n].children,t.children))})}};return c}]),e.directive("uiGridGrouping",["uiGridGroupingConstants","uiGridGroupingService","$templateCache",function(e,t,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){!1!==o.grid.options.enableGrouping&&t.initializeGrid(o.grid,e)},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.importer",["ui.grid"]);e.constant("uiGridImporterConstants",{featureName:"importer"}),e.service("uiGridImporterService",["$q","uiGridConstants","uiGridImporterConstants","gridUtil","$compile","$interval","i18nService","$window",function(e,t,n,i,o,r,a,s){var l={initializeGrid:function(e,t){t.importer={$scope:e},this.defaultGridOptions(t.options);var n={events:{importer:{}},methods:{importer:{importFile:function(e){l.importThisFile(t,e)}}}};t.api.registerEventsFromObject(n.events),t.api.registerMethodsFromObject(n.methods),t.options.enableImporter&&t.options.importerShowMenu&&(t.api.core.addToGridMenu?l.addToMenu(t):r(function(){t.api.core.addToGridMenu&&l.addToMenu(t)},100,1))},defaultGridOptions:function(e){e.enableImporter||void 0===e.enableImporter?s.hasOwnProperty("File")&&s.hasOwnProperty("FileReader")&&s.hasOwnProperty("FileList")&&s.hasOwnProperty("Blob")?e.enableImporter=!0:(i.logError("The File APIs are not fully supported in this browser, grid importer cannot be used."),e.enableImporter=!1):e.enableImporter=!1,e.importerProcessHeaders=e.importerProcessHeaders||l.processHeaders,e.importerHeaderFilter=e.importerHeaderFilter||function(e){return e},e.importerErrorCallback&&"function"==typeof e.importerErrorCallback||delete e.importerErrorCallback,!0!==e.enableImporter||e.importerDataAddCallback||(i.logError("You have not set an importerDataAddCallback, importer is disabled"),e.enableImporter=!1),e.importerShowMenu=!1!==e.importerShowMenu,e.importerObjectCallback=e.importerObjectCallback||function(e,t){return t}},addToMenu:function(e){e.api.core.addToGridMenu(e,[{title:a.getSafeText("gridMenu.importerTitle"),order:150},{templateUrl:"ui-grid/importerMenuItemContainer",action:function(t){this.grid.api.importer.importAFile(e)},order:151}])},importThisFile:function(e,t){if(!t)return void i.logError("No file object provided to importThisFile, should be impossible, aborting");var n=new FileReader;switch(t.type){case"application/json":n.onload=l.importJsonClosure(e);break;default:n.onload=l.importCsvClosure(e)}n.readAsText(t)},importJsonClosure:function(e){return function(t){var n,i=[],o=l.parseJson(e,t);null!==o&&(o.forEach(function(t,o){n=l.newObject(e),angular.extend(n,t),n=e.options.importerObjectCallback(e,n),i.push(n)}),l.addObjects(e,i))}},parseJson:function(e,t){var n;try{n=JSON.parse(t.target.result)}catch(n){return void l.alertError(e,"importer.invalidJson","File could not be processed, is it valid json? Content was: ",t.target.result)}return Array.isArray(n)?n:(l.alertError(e,"importer.jsonNotarray","Import failed, file is not an array, file was: ",t.target.result),[])},importCsvClosure:function(e){return function(t){var n=l.parseCsv(t);if(!n||n.length<1)return void l.alertError(e,"importer.invalidCsv","File could not be processed, is it valid csv? Content was: ",t.target.result);var i=l.createCsvObjects(e,n);if(!i||0===i.length)return void l.alertError(e,"importer.noObjects","Objects were not able to be derived, content was: ",t.target.result);l.addObjects(e,i)}},parseCsv:function(e){var t=e.target.result;return CSV.parse(t)},createCsvObjects:function(e,t){var n=e.options.importerProcessHeaders(e,t.shift());if(!n||0===n.length)return l.alertError(e,"importer.noHeaders","Column names could not be derived, content was: ",t),[];var i,o=[];return t.forEach(function(t,r){i=l.newObject(e),null!==t&&t.forEach(function(e,t){null!==n[t]&&(i[n[t]]=e)}),i=e.options.importerObjectCallback(e,i),o.push(i)}),o},processHeaders:function(e,t){var n=[];if(e.options.columnDefs&&0!==e.options.columnDefs.length){var i=l.flattenColumnDefs(e,e.options.columnDefs);return t.forEach(function(e,t){i[e]?n.push(i[e]):i[e.toLowerCase()]?n.push(i[e.toLowerCase()]):n.push(null)}),n}return t.forEach(function(e,t){n.push(e.replace(/[^0-9a-zA-Z\-_]/g,"_"))}),n},flattenColumnDefs:function(e,t){var n={};return t.forEach(function(t,i){t.name&&(n[t.name]=t.field||t.name,n[t.name.toLowerCase()]=t.field||t.name),t.field&&(n[t.field]=t.field||t.name,n[t.field.toLowerCase()]=t.field||t.name),t.displayName&&(n[t.displayName]=t.field||t.name,n[t.displayName.toLowerCase()]=t.field||t.name),t.displayName&&e.options.importerHeaderFilter&&(n[e.options.importerHeaderFilter(t.displayName)]=t.field||t.name,n[e.options.importerHeaderFilter(t.displayName).toLowerCase()]=t.field||t.name)}),n},addObjects:function(e,n,i){if(e.api.rowEdit){var o=e.registerDataChangeCallback(function(){e.api.rowEdit.setRowsDirty(n),o()},[t.dataChange.ROW]);e.importer.$scope.$on("$destroy",o)}e.importer.$scope.$apply(e.options.importerDataAddCallback(e,n))},newObject:function(e){return void 0!==e.options&&void 0!==e.options.importerNewObject?new e.options.importerNewObject:{}},alertError:function(e,t,n,o){e.options.importerErrorCallback?e.options.importerErrorCallback(e,t,n,o):(s.alert(a.getSafeText(t)),i.logError(n+o))}};return l}]),e.directive("uiGridImporter",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(e,t,n,i){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(e,n,i,o){t.initializeGrid(e,o.grid)}}}]),e.directive("uiGridImporterMenuItem",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(e,t,n,i){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,templateUrl:"ui-grid/importerMenuItem",link:function(e,i,o,r){var a=function(e){var n=e.srcElement||e.target;if(n&&n.files&&1===n.files.length){var i=n.files[0];t.importThisFile(l,i),n.form.reset()}},s=i[0].querySelectorAll(".ui-grid-importer-file-chooser"),l=r.grid;1!==s.length?n.logError("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):s[0].addEventListener("change",a,!1)}}}])}(),function(){var e=angular.module("ui.grid.infiniteScroll",["ui.grid"]);e.service("uiGridInfiniteScrollService",["gridUtil","$compile","$timeout","uiGridConstants","ScrollEvent","$q",function(e,t,n,i,o,r){var a={initializeGrid:function(e,t){if(a.defaultGridOptions(e.options),e.options.enableInfiniteScroll){e.infiniteScroll={dataLoading:!1},a.setScrollDirections(e,e.options.infiniteScrollUp,e.options.infiniteScrollDown),e.api.core.on.scrollEnd(t,a.handleScroll);var n={events:{infiniteScroll:{needLoadMoreData:function(e,t){},needLoadMoreDataTop:function(e,t){}}},methods:{infiniteScroll:{dataLoaded:function(t,n){return a.setScrollDirections(e,t,n),a.adjustScroll(e).then(function(){e.infiniteScroll.dataLoading=!1})},resetScroll:function(t,n){return a.setScrollDirections(e,t,n),a.adjustInfiniteScrollPosition(e,0)},saveScrollPercentage:function(){e.infiniteScroll.prevScrollTop=e.renderContainers.body.prevScrollTop,e.infiniteScroll.previousVisibleRows=e.getVisibleRowCount()},dataRemovedTop:function(t,n){a.dataRemovedTop(e,t,n)},dataRemovedBottom:function(t,n){a.dataRemovedBottom(e,t,n)},setScrollDirections:function(t,n){a.setScrollDirections(e,t,n)}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods)}},defaultGridOptions:function(e){e.enableInfiniteScroll=!1!==e.enableInfiniteScroll,e.infiniteScrollRowsFromEnd=e.infiniteScrollRowsFromEnd||20,e.infiniteScrollUp=!0===e.infiniteScrollUp,e.infiniteScrollDown=!1!==e.infiniteScrollDown},setScrollDirections:function(e,t,n){e.infiniteScroll.scrollUp=!0===t,e.suppressParentScrollUp=!0===t,e.infiniteScroll.scrollDown=!1!==n,e.suppressParentScrollDown=!1!==n},handleScroll:function(e){if(!(e.grid.infiniteScroll&&e.grid.infiniteScroll.dataLoading||"ui.grid.adjustInfiniteScrollPosition"===e.source)&&e.y){var t=e.grid.options.infiniteScrollRowsFromEnd/e.grid.renderContainers.body.visibleRowCache.length;e.grid.scrollDirection===i.scrollDirection.UP?e.y.percentage<=t&&a.loadData(e.grid):e.grid.scrollDirection===i.scrollDirection.DOWN&&1-e.y.percentage<=t&&a.loadData(e.grid)}},loadData:function(e){e.infiniteScroll.previousVisibleRows=e.renderContainers.body.visibleRowCache.length,e.infiniteScroll.direction=e.scrollDirection,delete e.infiniteScroll.prevScrollTop,e.scrollDirection===i.scrollDirection.UP&&e.infiniteScroll.scrollUp?(e.infiniteScroll.dataLoading=!0,e.api.infiniteScroll.raise.needLoadMoreDataTop()):e.scrollDirection===i.scrollDirection.DOWN&&e.infiniteScroll.scrollDown&&(e.infiniteScroll.dataLoading=!0,e.api.infiniteScroll.raise.needLoadMoreData())},adjustScroll:function(e){var t=r.defer();return n(function(){var o,r,s,l,c;o=e.getViewportHeight()+e.headerHeight-e.renderContainers.body.headerHeight-e.scrollbarHeight,r=e.options.rowHeight,void 0===e.infiniteScroll.direction&&a.adjustInfiniteScrollPosition(e,0),s=e.getVisibleRowCount();var d=r*s;e.infiniteScroll.scrollDown&&o>d&&e.api.infiniteScroll.raise.needLoadMoreData(),e.infiniteScroll.direction===i.scrollDirection.UP&&(l=e.infiniteScroll.prevScrollTop||0,c=l+(s-e.infiniteScroll.previousVisibleRows)*r,a.adjustInfiniteScrollPosition(e,c),n(function(){t.resolve()})),e.infiniteScroll.direction===i.scrollDirection.DOWN&&(c=e.infiniteScroll.prevScrollTop||e.infiniteScroll.previousVisibleRows*r-o,a.adjustInfiniteScrollPosition(e,c),n(function(){t.resolve()}))},0),t.promise},adjustInfiniteScrollPosition:function(e,t){var n=new o(e,null,null,"ui.grid.adjustInfiniteScrollPosition"),i=e.getVisibleRowCount(),r=e.getViewportHeight()+e.headerHeight-e.renderContainers.body.headerHeight-e.scrollbarHeight,a=e.options.rowHeight,s=i*a-r;0===t&&e.infiniteScroll.scrollUp?n.y={percentage:1/s}:n.y={percentage:t/s},e.scrollContainers("",n)},dataRemovedTop:function(e,t,n){var i,o,r,s;return a.setScrollDirections(e,t,n),i=e.renderContainers.body.visibleRowCache.length,o=e.infiniteScroll.prevScrollTop,s=e.options.rowHeight,r=o-(e.infiniteScroll.previousVisibleRows-i)*s,a.adjustInfiniteScrollPosition(e,r)},dataRemovedBottom:function(e,t,n){var i;return a.setScrollDirections(e,t,n),i=e.infiniteScroll.prevScrollTop,a.adjustInfiniteScrollPosition(e,i)}};return a}]),e.directive("uiGridInfiniteScroll",["uiGridInfiniteScrollService",function(e){return{priority:-200,scope:!1,require:"^uiGrid",compile:function(t,n,i){return{pre:function(t,n,i,o){e.initializeGrid(o.grid,t)},post:function(e,t,n){}}}}}])}(),function(){var e=angular.module("ui.grid.moveColumns",["ui.grid"]);e.service("uiGridMoveColumnService",["$q","$timeout","$log","ScrollEvent","uiGridConstants","gridUtil",function(e,t,n,i,o,r){var a={initializeGrid:function(e){var t=this;this.registerPublicApi(e),this.defaultGridOptions(e.options),e.moveColumns={orderCache:[]},e.registerColumnBuilder(t.movableColumnBuilder),e.registerDataChangeCallback(t.verifyColumnOrder,[o.dataChange.COLUMN])},registerPublicApi:function(e){var t=this,n={events:{colMovable:{columnPositionChanged:function(e,t,n){}}},methods:{colMovable:{moveColumn:function(n,i){var o=e.columns;if(!angular.isNumber(n)||!angular.isNumber(i))return void r.logError("MoveColumn: Please provide valid values for originalPosition and finalPosition");for(var a=0,s=0;s<o.length;s++)(angular.isDefined(o[s].colDef.visible)&&!1===o[s].colDef.visible||!0===o[s].isRowHeader)&&a++;if(n>=o.length-a||i>=o.length-a)return void r.logError("MoveColumn: Invalid values for originalPosition, finalPosition");var l=function(e){for(var t=e,n=0;n<=t;n++)angular.isDefined(o[n])&&(angular.isDefined(o[n].colDef.visible)&&!1===o[n].colDef.visible||!0===o[n].isRowHeader)&&t++;return t};t.redrawColumnAtPosition(e,l(n),l(i))}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods)},defaultGridOptions:function(e){e.enableColumnMoving=!1!==e.enableColumnMoving},movableColumnBuilder:function(t,n,i){var o=[];return t.enableColumnMoving=void 0===t.enableColumnMoving?i.enableColumnMoving:t.enableColumnMoving,e.all(o)},updateColumnCache:function(e){e.moveColumns.orderCache=e.getOnlyDataColumns()},verifyColumnOrder:function(e){var t,n=e.rowHeaderColumns.length;angular.forEach(e.moveColumns.orderCache,function(i,o){if(-1!==(t=e.columns.indexOf(i))&&t-n!==o){var r=e.columns.splice(t,1)[0];e.columns.splice(o+n,0,r)}})},redrawColumnAtPosition:function(e,n,i){if(n!==i){var r=e.columns,s=r[n];if(s.colDef.enableColumnMoving){if(n>i)for(var l=n;l>i;l--)r[l]=r[l-1];else if(i>n)for(var c=n;c<i;c++)r[c]=r[c+1];r[i]=s,a.updateColumnCache(e),e.queueGridRefresh(),t(function(){e.api.core.notifyDataChange(o.dataChange.COLUMN),e.api.colMovable.raise.columnPositionChanged(s.colDef,n,i)})}}}};return a}]),e.directive("uiGridMoveColumns",["uiGridMoveColumnService",function(e){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(t,n,i,o){e.initializeGrid(o.grid)},post:function(e,t,n,i){}}}}}]),e.directive("uiGridHeaderCell",["$q","gridUtil","uiGridMoveColumnService","$document","$log","uiGridConstants","ScrollEvent",function(e,t,n,i,o,r,a){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(e,t,o,r){if(e.col.colDef.enableColumnMoving){var s,l,c,d,u,p,g=angular.element(t[0].querySelectorAll(".ui-grid-cell-contents")),m=!1,f=!1,h=function(t){s=e.grid.element[0].getBoundingClientRect().left,e.grid.hasLeftContainer()&&(s+=e.grid.renderContainers.left.header[0].getBoundingClientRect().width),l=t.pageX,c=0,d=s+e.grid.getViewportWidth(),"mousedown"===t.type?(i.on("mousemove",v),i.on("mouseup",y)):"touchstart"===t.type&&(i.on("touchmove",v),i.on("touchend",y))},v=function(e){var t=e.pageX-l;0!==t&&(document.onselectstart=function(){return!1},f=!0,m?m&&(T(t),l=e.pageX):C())},y=function(t){if(document.onselectstart=null,u&&(u.remove(),m=!1),w(),b(),f){for(var i=e.grid.columns,o=0,r=0;r<i.length&&i[r].colDef.name!==e.col.colDef.name;r++)o++;var a;if(c<0){var s,l=0;if(e.grid.isRTL()){for(s=o+1;s<i.length;s++)if((angular.isUndefined(i[s].colDef.visible)||!0===i[s].colDef.visible)&&(l+=i[s].drawnWidth||i[s].width||i[s].colDef.width)>Math.abs(c)){n.redrawColumnAtPosition(e.grid,o,s-1);break}}else for(s=o-1;s>=0;s--)if((angular.isUndefined(i[s].colDef.visible)||!0===i[s].colDef.visible)&&(l+=i[s].drawnWidth||i[s].width||i[s].colDef.width)>Math.abs(c)){n.redrawColumnAtPosition(e.grid,o,s+1);break}l<Math.abs(c)&&(a=0,e.grid.isRTL()&&(a=i.length-1),n.redrawColumnAtPosition(e.grid,o,a))}else if(c>0){var d,p=0;if(e.grid.isRTL()){for(d=o-1;d>0;d--)if((angular.isUndefined(i[d].colDef.visible)||!0===i[d].colDef.visible)&&(p+=i[d].drawnWidth||i[d].width||i[d].colDef.width)>c){n.redrawColumnAtPosition(e.grid,o,d);break}}else for(d=o+1;d<i.length;d++)if((angular.isUndefined(i[d].colDef.visible)||!0===i[d].colDef.visible)&&(p+=i[d].drawnWidth||i[d].width||i[d].colDef.width)>c){n.redrawColumnAtPosition(e.grid,o,d-1);break}p<c&&(a=i.length-1,e.grid.isRTL()&&(a=0),n.redrawColumnAtPosition(e.grid,o,a))}}},b=function(){g.on("touchstart",h),g.on("mousedown",h)},w=function(){g.off("touchstart",h),g.off("mousedown",h),i.off("mousemove",v),i.off("touchmove",v),i.off("mouseup",y),i.off("touchend",y)};b();var C=function(){m=!0,u=t.clone(),t.parent().append(u),u.addClass("movingColumn");var n={};n.left=t[0].offsetLeft+"px";var i=e.grid.element[0].getBoundingClientRect().right,o=t[0].getBoundingClientRect().right;o>i&&(p=e.col.drawnWidth+(i-o),n.width=p+"px"),u.css(n)},T=function(t){for(var n=e.grid.columns,i=0,o=0;o<n.length;o++)(angular.isUndefined(n[o].colDef.visible)||!0===n[o].colDef.visible)&&(i+=n[o].drawnWidth||n[o].width||n[o].colDef.width);var l,g=u[0].getBoundingClientRect().left-1,m=u[0].getBoundingClientRect().right;if(l=g-s+t,l=l<d?l:d,(g>=s||t>0)&&(m<=d||t<0))u.css({visibility:"visible",left:u[0].offsetLeft+(l<d?t:d-g)+"px"});else if(i>Math.ceil(r.grid.gridWidth)){t*=8;var f=new a(e.col.grid,null,null,"uiGridHeaderCell.moveElement");f.x={pixels:t},f.grid.scrollContainers("",f)}for(var h=0,v=0;v<n.length;v++)if(angular.isUndefined(n[v].colDef.visible)||!0===n[v].colDef.visible){if(n[v].colDef.name===e.col.colDef.name)break;h+=n[v].drawnWidth||n[v].width||n[v].colDef.width}void 0===e.newScrollLeft?c+=t:c=e.newScrollLeft+l-h,p<e.col.drawnWidth&&(p+=Math.abs(t),u.css({width:p+"px"}))}}}}}}}])}(),function(){var e=angular.module("ui.grid.pagination",["ng","ui.grid"]);e.service("uiGridPaginationService",["gridUtil",function(e){var t={initializeGrid:function(e){t.defaultGridOptions(e.options);var n={events:{pagination:{paginationChanged:function(e,t){}}},methods:{pagination:{getPage:function(){return e.options.enablePagination?e.options.paginationCurrentPage:null},getTotalPages:function(){return e.options.enablePagination?0===e.options.totalItems?1:Math.ceil(e.options.totalItems/e.options.paginationPageSize):null},nextPage:function(){e.options.enablePagination&&(e.options.totalItems>0?e.options.paginationCurrentPage=Math.min(e.options.paginationCurrentPage+1,n.methods.pagination.getTotalPages()):e.options.paginationCurrentPage++)},previousPage:function(){e.options.enablePagination&&(e.options.paginationCurrentPage=Math.max(e.options.paginationCurrentPage-1,1))},seek:function(t){if(e.options.enablePagination){if(!angular.isNumber(t)||t<1)throw"Invalid page number: "+t;e.options.paginationCurrentPage=Math.min(t,n.methods.pagination.getTotalPages())}}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods);var i=function(t){if(e.options.useExternalPagination||!e.options.enablePagination)return t;var n=parseInt(e.options.paginationPageSize,10),i=parseInt(e.options.paginationCurrentPage,10),o=t.filter(function(e){return e.visible});e.options.totalItems=o.length;var r=(i-1)*n;return r>o.length&&(i=e.options.paginationCurrentPage=1,r=(i-1)*n),o.slice(r,r+n)};e.registerRowsProcessor(i,900)},defaultGridOptions:function(t){t.enablePagination=!1!==t.enablePagination,t.enablePaginationControls=!1!==t.enablePaginationControls,t.useExternalPagination=!0===t.useExternalPagination,e.isNullOrUndefined(t.totalItems)&&(t.totalItems=0),e.isNullOrUndefined(t.paginationPageSizes)&&(t.paginationPageSizes=[250,500,1e3]),e.isNullOrUndefined(t.paginationPageSize)&&(t.paginationPageSizes.length>0?t.paginationPageSize=t.paginationPageSizes[0]:t.paginationPageSize=0),e.isNullOrUndefined(t.paginationCurrentPage)&&(t.paginationCurrentPage=1),e.isNullOrUndefined(t.paginationTemplate)&&(t.paginationTemplate="ui-grid/pagination")},onPaginationChanged:function(e,t,n){e.api.pagination.raise.paginationChanged(t,n),e.options.useExternalPagination||e.queueGridRefresh()}};return t}]),e.directive("uiGridPagination",["gridUtil","uiGridPaginationService",function(e,t){return{priority:-200,scope:!1,require:"uiGrid",link:{pre:function(n,i,o,r){t.initializeGrid(r.grid),e.getTemplate(r.grid.options.paginationTemplate).then(function(e){var t=angular.element(e);i.append(t),r.innerCompile(t)})}}}}]),e.directive("uiGridPager",["uiGridPaginationService","uiGridConstants","gridUtil","i18nService",function(e,t,n,i){return{priority:-200,scope:!0,require:"^uiGrid",link:function(o,r,a,s){var l=".ui-grid-pager-control-input";o.aria=i.getSafeText("pagination.aria"),o.paginationApi=s.grid.api.pagination,o.sizesLabel=i.getSafeText("pagination.sizes"),o.totalItemsLabel=i.getSafeText("pagination.totalItems"),o.paginationOf=i.getSafeText("pagination.of"),o.paginationThrough=i.getSafeText("pagination.through");var c=s.grid.options;s.grid.renderContainers.body.registerViewportAdjuster(function(e){return e.height=e.height-n.elementHeight(r,"padding"),e});var d=s.grid.registerDataChangeCallback(function(e){e.options.useExternalPagination||(e.options.totalItems=e.rows.length)},[t.dataChange.ROW]);o.$on("$destroy",d);var u=function(){o.showingLow=(c.paginationCurrentPage-1)*c.paginationPageSize+1,o.showingHigh=Math.min(c.paginationCurrentPage*c.paginationPageSize,c.totalItems)},p=o.$watch("grid.options.totalItems + grid.options.paginationPageSize",u),g=o.$watch("grid.options.paginationCurrentPage + grid.options.paginationPageSize",function(t,n){if(t!==n&&void 0!==n){if(!angular.isNumber(c.paginationCurrentPage)||c.paginationCurrentPage<1)return void(c.paginationCurrentPage=1);if(c.totalItems>0&&c.paginationCurrentPage>o.paginationApi.getTotalPages())return void(c.paginationCurrentPage=o.paginationApi.getTotalPages());u(),e.onPaginationChanged(o.grid,c.paginationCurrentPage,c.paginationPageSize)}});o.$on("$destroy",function(){p(),g()}),o.cantPageForward=function(){return c.totalItems>0?c.paginationCurrentPage>=o.paginationApi.getTotalPages():c.data.length<1},o.cantPageToLast=function(){return!(c.totalItems>0)||o.cantPageForward()},o.cantPageBackward=function(){return c.paginationCurrentPage<=1};var m=function(e){e&&n.focus.bySelector(r,l)};o.pageFirstPageClick=function(){o.paginationApi.seek(1),m(o.cantPageBackward())},o.pagePreviousPageClick=function(){o.paginationApi.previousPage(),m(o.cantPageBackward())},o.pageNextPageClick=function(){o.paginationApi.nextPage(),m(o.cantPageForward())},o.pageLastPageClick=function(){o.paginationApi.seek(o.paginationApi.getTotalPages()),m(o.cantPageToLast())}}}}])}(),function(){var e=angular.module("ui.grid.pinning",["ui.grid"]);e.constant("uiGridPinningConstants",{container:{LEFT:"left",RIGHT:"right",NONE:""}}),e.service("uiGridPinningService",["gridUtil","GridRenderContainer","i18nService","uiGridPinningConstants",function(e,t,n,i){var o={initializeGrid:function(e){o.defaultGridOptions(e.options),e.registerColumnBuilder(o.pinningColumnBuilder);var t={events:{pinning:{columnPinned:function(e,t){}}},methods:{pinning:{pinColumn:function(t,n){o.pinColumn(e,t,n)}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.enablePinning=!1!==e.enablePinning},pinningColumnBuilder:function(t,r,a){if(t.enablePinning=void 0===t.enablePinning?a.enablePinning:t.enablePinning,t.pinnedLeft?(r.renderContainer="left",r.grid.createLeftContainer()):t.pinnedRight&&(r.renderContainer="right",r.grid.createRightContainer()),t.enablePinning){var s={name:"ui.grid.pinning.pinLeft",title:n.get().pinning.pinLeft,icon:"ui-grid-icon-left-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"left"!==this.context.col.renderContainer},action:function(){o.pinColumn(this.context.col.grid,this.context.col,i.container.LEFT)}},l={name:"ui.grid.pinning.pinRight",title:n.get().pinning.pinRight,icon:"ui-grid-icon-right-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"right"!==this.context.col.renderContainer},action:function(){o.pinColumn(this.context.col.grid,this.context.col,i.container.RIGHT)}},c={name:"ui.grid.pinning.unpin",title:n.get().pinning.unpin,icon:"ui-grid-icon-cancel",shown:function(){return void 0!==this.context.col.renderContainer&&null!==this.context.col.renderContainer&&"body"!==this.context.col.renderContainer},action:function(){o.pinColumn(this.context.col.grid,this.context.col,i.container.NONE)}};e.arrayContainsObjectWithProperty(r.menuItems,"name","ui.grid.pinning.pinLeft")||r.menuItems.push(s),e.arrayContainsObjectWithProperty(r.menuItems,"name","ui.grid.pinning.pinRight")||r.menuItems.push(l),e.arrayContainsObjectWithProperty(r.menuItems,"name","ui.grid.pinning.unpin")||r.menuItems.push(c)}},pinColumn:function(e,t,n){n===i.container.NONE?(t.renderContainer=null,t.colDef.pinnedLeft=t.colDef.pinnedRight=!1):(t.renderContainer=n,n===i.container.LEFT?e.createLeftContainer():n===i.container.RIGHT&&e.createRightContainer()),e.refresh().then(function(){e.api.pinning.raise.columnPinned(t.colDef,n)})}};return o}]),e.directive("uiGridPinning",["gridUtil","uiGridPinningService",function(e,t){return{require:"uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){t.initializeGrid(o.grid)},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.resizeColumns",["ui.grid"]);e.service("uiGridResizeColumnsService",["gridUtil","$q","$timeout",function(e,t,n){return{defaultGridOptions:function(e){e.enableColumnResizing=!1!==e.enableColumnResizing,!1===e.enableColumnResize&&(e.enableColumnResizing=!1)},colResizerColumnBuilder:function(e,n,i){var o=[];return e.enableColumnResizing=void 0===e.enableColumnResizing?i.enableColumnResizing:e.enableColumnResizing,!1===e.enableColumnResize&&(e.enableColumnResizing=!1),t.all(o)},registerPublicApi:function(e){var t={events:{colResizable:{columnSizeChanged:function(e,t){}}}};e.api.registerEventsFromObject(t.events)},fireColumnSizeChanged:function(t,i,o){n(function(){t.api.colResizable?t.api.colResizable.raise.columnSizeChanged(i,o):e.logError("The resizeable api is not registered, this may indicate that you've included the module but not added the 'ui-grid-resize-columns' directive to your grid definition.  Cannot raise any events.")})},findTargetCol:function(e,t,n){var i=e.getRenderContainer();if("left"===t){var o=i.visibleColumnCache.indexOf(e);return i.visibleColumnCache[o-1*n]}return e}}}]),e.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(e,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){t.defaultGridOptions(o.grid.options),o.grid.registerColumnBuilder(t.colResizerColumnBuilder),t.registerPublicApi(o.grid)},post:function(e,t,n,i){}}}}}]),e.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q","uiGridResizeColumnsService","uiGridConstants","$timeout",function(e,t,n,i,o,r,a){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(e,i,s,l){var c=l.grid;if(c.options.enableColumnResizing){var d=t.get("ui-grid/columnResizer"),u=1;c.isRTL()&&(e.position="left",u=-1);var p=function(){for(var t=i[0].getElementsByClassName("ui-grid-column-resizer"),r=0;r<t.length;r++)angular.element(t[r]).remove();var a=o.findTargetCol(e.col,"left",u),s=e.col.getRenderContainer();if(a&&0!==s.visibleColumnCache.indexOf(e.col)&&!1!==a.colDef.enableColumnResizing){var l=angular.element(d).clone();l.attr("position","left"),i.prepend(l),n(l)(e)}if(!1!==e.col.colDef.enableColumnResizing){var c=angular.element(d).clone();c.attr("position","right"),i.append(c),n(c)(e)}};p();var g=function(){a(p)},m=c.registerDataChangeCallback(g,[r.dataChange.COLUMN]);e.$on("$destroy",m)}}}}}}]),e.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","uiGridResizeColumnsService",function(e,t,n,i){var o=angular.element('<div class="ui-grid-resize-overlay"></div>');return{priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function(r,a,s,l){function c(e){l.grid.refreshCanvas(!0).then(function(){l.grid.queueGridRefresh()})}function d(e,t){var n=t;return e.minWidth&&n<e.minWidth?n=e.minWidth:e.maxWidth&&n>e.maxWidth&&(n=e.maxWidth),n}function u(e,t){e.originalEvent&&(e=e.originalEvent),e.preventDefault(),m=(e.targetTouches?e.targetTouches[0]:e).clientX-f,m<0?m=0:m>l.grid.gridWidth&&(m=l.grid.gridWidth);var a=i.findTargetCol(r.col,r.position,h);if(!1!==a.colDef.enableColumnResizing){l.grid.element.hasClass("column-resizing")||l.grid.element.addClass("column-resizing");var s=m-g,c=parseInt(a.drawnWidth+s*h,10);m+=(d(a,c)-c)*h,o.css({left:m+"px"}),l.fireEvent(n.events.ITEM_DRAGGING)}}function p(e,t){e.originalEvent&&(e=e.originalEvent),e.preventDefault(),l.grid.element.removeClass("column-resizing"),o.remove(),m=(e.changedTouches?e.changedTouches[0]:e).clientX-f;var n=m-g;if(0===n)return b(),void y();var a=i.findTargetCol(r.col,r.position,h);if(!1!==a.colDef.enableColumnResizing){var s=parseInt(a.drawnWidth+n*h,10);a.width=d(a,s),a.hasCustomWidth=!0,c(n),i.fireColumnSizeChanged(l.grid,a.colDef,n),b(),y()}}var g=0,m=0,f=0,h=1;l.grid.isRTL()&&(r.position="left",h=-1),"left"===r.position?a.addClass("left"):"right"===r.position&&a.addClass("right");var v=function(t,n){t.originalEvent&&(t=t.originalEvent),t.stopPropagation(),f=l.grid.element[0].getBoundingClientRect().left,g=(t.targetTouches?t.targetTouches[0]:t).clientX-f,l.grid.element.append(o),o.css({left:g}),"touchstart"===t.type?(e.on("touchend",p),e.on("touchmove",u),a.off("mousedown",v)):(e.on("mouseup",p),e.on("mousemove",u),a.off("touchstart",v))},y=function(){a.on("mousedown",v),a.on("touchstart",v)},b=function(){e.off("mouseup",p),e.off("touchend",p),e.off("mousemove",u),e.off("touchmove",u),a.off("mousedown",v),a.off("touchstart",v)};y();var w=function(e,o){e.stopPropagation();var s=i.findTargetCol(r.col,r.position,h);if(!1!==s.colDef.enableColumnResizing){var u=0,p=0,g=t.closestElm(a,".ui-grid-render-container"),m=g.querySelectorAll("."+n.COL_CLASS_PREFIX+s.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(m,function(e){var n;angular.element(e).parent().hasClass("ui-grid-header-cell")&&(n=angular.element(e).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),t.fakeElement(e,{},function(e){var i=angular.element(e);i.attr("style","float: left");var o=t.elementWidth(i);if(n){o+=t.elementWidth(n)}o>u&&(u=o,p=u-o)})}),s.width=d(s,u),s.hasCustomWidth=!0,c(p),i.fireColumnSizeChanged(l.grid,s.colDef,p)}};a.on("dblclick",w),a.on("$destroy",function(){a.off("dblclick",w),b()})}}}])}(),function(){var e=angular.module("ui.grid.rowEdit",["ui.grid","ui.grid.edit","ui.grid.cellNav"]);e.constant("uiGridRowEditConstants",{}),e.service("uiGridRowEditService",["$interval","$q","uiGridConstants","uiGridRowEditConstants","gridUtil",function(e,t,n,i,o){var r={initializeGrid:function(e,t){t.rowEdit={};var n={events:{rowEdit:{saveRow:function(e){}}},methods:{rowEdit:{setSavePromise:function(e,n){r.setSavePromise(t,e,n)},getDirtyRows:function(){return t.rowEdit.dirtyRows?t.rowEdit.dirtyRows:[]},getErrorRows:function(){return t.rowEdit.errorRows?t.rowEdit.errorRows:[]},flushDirtyRows:function(){return r.flushDirtyRows(t)},setRowsDirty:function(e){r.setRowsDirty(t,e)},setRowsClean:function(e){r.setRowsClean(t,e)}}}};t.api.registerEventsFromObject(n.events),t.api.registerMethodsFromObject(n.methods),t.api.core.on.renderingComplete(e,function(n){t.api.edit.on.afterCellEdit(e,r.endEditCell),t.api.edit.on.beginCellEdit(e,r.beginEditCell),t.api.edit.on.cancelCellEdit(e,r.cancelEditCell),t.api.cellNav&&t.api.cellNav.on.navigate(e,r.navigate)})},defaultGridOptions:function(e){},saveRow:function(e,t){var n=this;return function(){if(t.isSaving=!0,t.rowEditSavePromise)return t.rowEditSavePromise;var i=e.api.rowEdit.raise.saveRow(t.entity);return t.rowEditSavePromise?t.rowEditSavePromise.then(n.processSuccessPromise(e,t),n.processErrorPromise(e,t)):o.logError("A promise was not returned when saveRow event was raised, either nobody is listening to event, or event handler did not return a promise"),i}},setSavePromise:function(e,t,n){e.getRow(t).rowEditSavePromise=n},processSuccessPromise:function(e,t){var n=this;return function(){delete t.isSaving,delete t.isDirty,delete t.isError,delete t.rowEditSaveTimer,delete t.rowEditSavePromise,n.removeRow(e.rowEdit.errorRows,t),n.removeRow(e.rowEdit.dirtyRows,t)}},processErrorPromise:function(e,t){return function(){delete t.isSaving,delete t.rowEditSaveTimer,delete t.rowEditSavePromise,t.isError=!0,e.rowEdit.errorRows||(e.rowEdit.errorRows=[]),r.isRowPresent(e.rowEdit.errorRows,t)||e.rowEdit.errorRows.push(t)}},removeRow:function(e,t){void 0!==e&&null!==e&&e.forEach(function(n,i){n.uid===t.uid&&e.splice(i,1)})},isRowPresent:function(e,t){var n=!1;return e.forEach(function(e,i){e.uid===t.uid&&(n=!0)}),n},flushDirtyRows:function(e){var n=[];return e.api.rowEdit.getDirtyRows().forEach(function(t){r.saveRow(e,t)(),n.push(t.rowEditSavePromise)}),t.all(n)},endEditCell:function(e,t,n,i){var a=this.grid,s=a.getRow(e);if(!s)return void o.logError("Unable to find rowEntity in grid data, dirty flag cannot be set");(n!==i||s.isDirty)&&(a.rowEdit.dirtyRows||(a.rowEdit.dirtyRows=[]),s.isDirty||(s.isDirty=!0,a.rowEdit.dirtyRows.push(s)),delete s.isError,r.considerSetTimer(a,s))},beginEditCell:function(e,t){var n=this.grid,i=n.getRow(e);if(!i)return void o.logError("Unable to find rowEntity in grid data, timer cannot be cancelled");r.cancelTimer(n,i)},cancelEditCell:function(e,t){var n=this.grid,i=n.getRow(e);if(!i)return void o.logError("Unable to find rowEntity in grid data, timer cannot be set");r.considerSetTimer(n,i)},navigate:function(e,t){var n=this.grid;e.row.rowEditSaveTimer&&r.cancelTimer(n,e.row),t&&t.row&&t.row!==e.row&&r.considerSetTimer(n,t.row)},considerSetTimer:function(t,n){if(r.cancelTimer(t,n),n.isDirty&&!n.isSaving&&-1!==t.options.rowEditWaitInterval){var i=t.options.rowEditWaitInterval?t.options.rowEditWaitInterval:2e3;n.rowEditSaveTimer=e(r.saveRow(t,n),i,1)}},cancelTimer:function(t,n){n.rowEditSaveTimer&&!n.isSaving&&(e.cancel(n.rowEditSaveTimer),delete n.rowEditSaveTimer)},setRowsDirty:function(e,t){var n;t.forEach(function(t,i){n=e.getRow(t),n?(e.rowEdit.dirtyRows||(e.rowEdit.dirtyRows=[]),n.isDirty||(n.isDirty=!0,e.rowEdit.dirtyRows.push(n)),delete n.isError,r.considerSetTimer(e,n)):o.logError("requested row not found in rowEdit.setRowsDirty, row was: "+t)})},setRowsClean:function(e,t){var n;t.forEach(function(t,i){n=e.getRow(t),n?(delete n.isDirty,r.removeRow(e.rowEdit.dirtyRows,n),r.cancelTimer(e,n),delete n.isError,r.removeRow(e.rowEdit.errorRows,n)):o.logError("requested row not found in rowEdit.setRowsClean, row was: "+t)})}};return r}]),e.directive("uiGridRowEdit",["gridUtil","uiGridRowEditService","uiGridEditConstants",function(e,t,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){t.initializeGrid(e,o.grid)},post:function(e,t,n,i){}}}}}]),e.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(e,t,n,i){return{priority:-200,scope:!1,compile:function(e,t){var n=angular.element(e.children().children()[0]),i=n.attr("ng-class"),o="";return o=i?i.slice(0,-1)+", 'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}":"{'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}",n.attr("ng-class",o),{pre:function(e,t,n,i){},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.saveState",["ui.grid","ui.grid.selection","ui.grid.cellNav","ui.grid.grouping","ui.grid.pinning","ui.grid.treeView"]);e.constant("uiGridSaveStateConstants",{featureName:"saveState"}),e.service("uiGridSaveStateService",["$q","uiGridSaveStateConstants","gridUtil","$compile","$interval","uiGridConstants",function(e,t,n,i,o,r){var a={initializeGrid:function(e){e.saveState={},this.defaultGridOptions(e.options);var t={events:{saveState:{}},methods:{saveState:{save:function(){return a.save(e)},restore:function(t,n){a.restore(e,t,n)}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.saveWidths=!1!==e.saveWidths,e.saveOrder=!1!==e.saveOrder,e.saveScroll=!0===e.saveScroll,e.saveFocus=!0!==e.saveScroll&&!1!==e.saveFocus,e.saveVisible=!1!==e.saveVisible,e.saveSort=!1!==e.saveSort,e.saveFilter=!1!==e.saveFilter,e.saveSelection=!1!==e.saveSelection,e.saveGrouping=!1!==e.saveGrouping,e.saveGroupingExpandedStates=!0===e.saveGroupingExpandedStates,e.savePinning=!1!==e.savePinning,e.saveTreeView=!1!==e.saveTreeView},save:function(e){var t={};return t.columns=a.saveColumns(e),t.scrollFocus=a.saveScrollFocus(e),t.selection=a.saveSelection(e),t.grouping=a.saveGrouping(e),t.treeView=a.saveTreeView(e),t.pagination=a.savePagination(e),t},restore:function(e,t,n){n.columns&&a.restoreColumns(e,n.columns),n.scrollFocus&&a.restoreScrollFocus(e,t,n.scrollFocus),n.selection&&a.restoreSelection(e,n.selection),n.grouping&&a.restoreGrouping(e,n.grouping),n.treeView&&a.restoreTreeView(e,n.treeView),n.pagination&&a.restorePagination(e,n.pagination),e.refresh()},saveColumns:function(e){var t=[];return e.getOnlyDataColumns().forEach(function(n){var i={};i.name=n.name,e.options.saveVisible&&(i.visible=n.visible),e.options.saveWidths&&(i.width=n.width),e.options.saveSort&&(i.sort=angular.copy(n.sort)),e.options.saveFilter&&(i.filters=[],n.filters.forEach(function(e){var t={};angular.forEach(e,function(e,n){"condition"!==n&&"$$hashKey"!==n&&"placeholder"!==n&&(t[n]=e)}),i.filters.push(t)})),e.api.pinning&&e.options.savePinning&&(i.pinned=n.renderContainer?n.renderContainer:""),t.push(i)}),t},saveScrollFocus:function(e){if(!e.api.cellNav)return{};var t={};if(e.options.saveFocus){t.focus=!0;var n=e.api.cellNav.getFocusedCell();null!==n&&(null!==n.col&&(t.colName=n.col.colDef.name),null!==n.row&&(t.rowVal=a.getRowVal(e,n.row)))}return(e.options.saveScroll||e.options.saveFocus&&!t.colName&&!t.rowVal)&&(t.focus=!1,e.renderContainers.body.prevRowScrollIndex&&(t.rowVal=a.getRowVal(e,e.renderContainers.body.visibleRowCache[e.renderContainers.body.prevRowScrollIndex])),e.renderContainers.body.prevColScrollIndex&&(t.colName=e.renderContainers.body.visibleColumnCache[e.renderContainers.body.prevColScrollIndex].name)),t},saveSelection:function(e){return e.api.selection&&e.options.saveSelection?e.api.selection.getSelectedGridRows().map(function(t){return a.getRowVal(e,t)}):[]},saveGrouping:function(e){return e.api.grouping&&e.options.saveGrouping?e.api.grouping.getGrouping(e.options.saveGroupingExpandedStates):{}},savePagination:function(e){return e.api.pagination&&e.options.paginationPageSize?{paginationCurrentPage:e.options.paginationCurrentPage,paginationPageSize:e.options.paginationPageSize}:{}},saveTreeView:function(e){return e.api.treeView&&e.options.saveTreeView?e.api.treeView.getTreeView():{}},getRowVal:function(e,t){if(!t)return null;var n={};return e.options.saveRowIdentity?(n.identity=!0,n.row=e.options.saveRowIdentity(t.entity)):(n.identity=!1,n.row=e.renderContainers.body.visibleRowCache.indexOf(t)),n},restoreColumns:function(e,t){var n=!1;t.forEach(function(t,i){var o=e.getColumn(t.name);if(o&&!e.isRowHeaderColumn(o)){!e.options.saveVisible||o.visible===t.visible&&o.colDef.visible===t.visible||(o.visible=t.visible,o.colDef.visible=t.visible,e.api.core.raise.columnVisibilityChanged(o)),e.options.saveWidths&&o.width!==t.width&&(o.width=t.width,o.hasCustomWidth=!0),!e.options.saveSort||angular.equals(o.sort,t.sort)||void 0===o.sort&&angular.isEmpty(t.sort)||(o.sort=angular.copy(t.sort),n=!0),e.options.saveFilter&&!angular.equals(o.filters,t.filters)&&(t.filters.forEach(function(e,t){angular.extend(o.filters[t],e),void 0!==e.term&&null!==e.term||delete o.filters[t].term}),e.api.core.raise.filterChanged()),e.api.pinning&&e.options.savePinning&&o.renderContainer!==t.pinned&&e.api.pinning.pinColumn(o,t.pinned);var r=e.getOnlyDataColumns().indexOf(o);if(-1!==r&&e.options.saveOrder&&r!==i){var a=e.columns.splice(r+e.rowHeaderColumns.length,1)[0];e.columns.splice(i+e.rowHeaderColumns.length,0,a)}}}),n&&e.api.core.raise.sortChanged(e,e.getColumnSorting())},restoreScrollFocus:function(e,t,n){if(e.api.cellNav){var i,o;if(n.colName){var r=e.options.columnDefs.filter(function(e){return e.name===n.colName});r.length>0&&(i=r[0])}n.rowVal&&n.rowVal.row&&(o=n.rowVal.identity?a.findRowByIdentity(e,n.rowVal):e.renderContainers.body.visibleRowCache[n.rowVal.row]);var s=o&&o.entity?o.entity:null;(i||s)&&(n.focus?e.api.cellNav.scrollToFocus(s,i):e.scrollTo(s,i))}},restoreSelection:function(e,t){e.api.selection&&(e.api.selection.clearSelectedRows(),t.forEach(function(t){if(t.identity){var n=a.findRowByIdentity(e,t);n&&e.api.selection.selectRow(n.entity)}else e.api.selection.selectRowByVisibleIndex(t.row)}))},restoreGrouping:function(e,t){e.api.grouping&&void 0!==t&&null!==t&&!angular.equals(t,{})&&e.api.grouping.setGrouping(t)},restoreTreeView:function(e,t){e.api.treeView&&void 0!==t&&null!==t&&!angular.equals(t,{})&&e.api.treeView.setTreeView(t)},restorePagination:function(e,t){e.api.pagination&&e.options.paginationPageSize&&(e.options.paginationCurrentPage=t.paginationCurrentPage,e.options.paginationPageSize=t.paginationPageSize)},findRowByIdentity:function(e,t){if(!e.options.saveRowIdentity)return null;var n=e.rows.filter(function(n){return e.options.saveRowIdentity(n.entity)===t.row});return n.length>0?n[0]:null}};return a}]),e.directive("uiGridSaveState",["uiGridSaveStateConstants","uiGridSaveStateService","gridUtil","$compile",function(e,t,n,i){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(e,n,i,o){t.initializeGrid(o.grid)}}}])}(),function(){var e=angular.module("ui.grid.selection",["ui.grid"]);e.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),angular.module("ui.grid").config(["$provide",function(e){e.decorator("GridRow",["$delegate",function(e){return e.prototype.setSelected=function(e){this.isSelected=e,e?this.grid.selection.selectedCount++:this.grid.selection.selectedCount--},e}])}]),e.service("uiGridSelectionService",["$q","$templateCache","uiGridSelectionConstants","gridUtil",function(e,t,n,i){var o={initializeGrid:function(e){e.selection={},e.selection.lastSelectedRow=null,e.selection.selectAll=!1,e.selection.selectedCount=0,o.defaultGridOptions(e.options);var t={events:{selection:{rowSelectionChanged:function(e,t,n){},rowSelectionChangedBatch:function(e,t,n){}}},methods:{selection:{toggleRowSelection:function(t,n){var i=e.getRow(t);null!==i&&o.toggleRowSelection(e,i,n,e.options.multiSelect,e.options.noUnselect)},selectRow:function(t,n){var i=e.getRow(t);null===i||i.isSelected||o.toggleRowSelection(e,i,n,e.options.multiSelect,e.options.noUnselect)},selectRowByVisibleIndex:function(t,n){var i=e.renderContainers.body.visibleRowCache[t];null===i||void 0===i||i.isSelected||o.toggleRowSelection(e,i,n,e.options.multiSelect,e.options.noUnselect)},unSelectRow:function(t,n){var i=e.getRow(t);null!==i&&i.isSelected&&o.toggleRowSelection(e,i,n,e.options.multiSelect,e.options.noUnselect)},selectAllRows:function(t){if(!1!==e.options.multiSelect){var n=[];e.rows.forEach(function(i){i.isSelected||!1===i.enableSelection||(i.setSelected(!0),o.decideRaiseSelectionEvent(e,i,n,t))}),o.decideRaiseSelectionBatchEvent(e,n,t),e.selection.selectAll=!0}},selectAllVisibleRows:function(t){if(!1!==e.options.multiSelect){var n=[];e.rows.forEach(function(i){i.visible?i.isSelected||!1===i.enableSelection||(i.setSelected(!0),o.decideRaiseSelectionEvent(e,i,n,t)):i.isSelected&&(i.setSelected(!1),o.decideRaiseSelectionEvent(e,i,n,t))}),o.decideRaiseSelectionBatchEvent(e,n,t),e.selection.selectAll=!0}},clearSelectedRows:function(t){o.clearSelectedRows(e,t)},getSelectedRows:function(){return o.getSelectedRows(e).map(function(e){return e.entity})},getSelectedGridRows:function(){return o.getSelectedRows(e)},getSelectedCount:function(){return e.selection.selectedCount},setMultiSelect:function(t){e.options.multiSelect=t},setModifierKeysToMultiSelect:function(t){e.options.modifierKeysToMultiSelect=t},getSelectAllState:function(){return e.selection.selectAll}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.enableRowSelection=!1!==e.enableRowSelection,e.multiSelect=!1!==e.multiSelect,e.noUnselect=!0===e.noUnselect,e.modifierKeysToMultiSelect=!0===e.modifierKeysToMultiSelect,e.enableRowHeaderSelection=!1!==e.enableRowHeaderSelection,void 0===e.enableFullRowSelection&&(e.enableFullRowSelection=!e.enableRowHeaderSelection),e.enableSelectAll=!1!==e.enableSelectAll,e.enableSelectionBatchEvent=!1!==e.enableSelectionBatchEvent,e.selectionRowHeaderWidth=angular.isDefined(e.selectionRowHeaderWidth)?e.selectionRowHeaderWidth:30,e.enableFooterTotalSelected=!1!==e.enableFooterTotalSelected,e.isRowSelectable=angular.isDefined(e.isRowSelectable)?e.isRowSelectable:angular.noop},toggleRowSelection:function(e,t,n,i,r){var a=t.isSelected;if(!1!==t.enableSelection||a){var s;i||a?!i&&a&&(s=o.getSelectedRows(e),s.length>1&&(a=!1,o.clearSelectedRows(e,n))):o.clearSelectedRows(e,n),a&&r||(t.setSelected(!a),!0===t.isSelected&&(e.selection.lastSelectedRow=t),s=o.getSelectedRows(e),e.selection.selectAll=e.rows.length===s.length,e.api.selection.raise.rowSelectionChanged(t,n))}},shiftSelect:function(e,t,n,i){if(i){var r=o.getSelectedRows(e),a=r.length>0?e.renderContainers.body.visibleRowCache.indexOf(e.selection.lastSelectedRow):0,s=e.renderContainers.body.visibleRowCache.indexOf(t);if(a>s){var l=a;a=s,s=l}for(var c=[],d=a;d<=s;d++){var u=e.renderContainers.body.visibleRowCache[d];u&&(u.isSelected||!1===u.enableSelection||(u.setSelected(!0),e.selection.lastSelectedRow=u,o.decideRaiseSelectionEvent(e,u,c,n)))}o.decideRaiseSelectionBatchEvent(e,c,n)}},getSelectedRows:function(e){return e.rows.filter(function(e){return e.isSelected})},clearSelectedRows:function(e,t){var n=[];o.getSelectedRows(e).forEach(function(i){i.isSelected&&(i.setSelected(!1),o.decideRaiseSelectionEvent(e,i,n,t))}),o.decideRaiseSelectionBatchEvent(e,n,t),e.selection.selectAll=!1,e.selection.selectedCount=0},decideRaiseSelectionEvent:function(e,t,n,i){e.options.enableSelectionBatchEvent?n.push(t):e.api.selection.raise.rowSelectionChanged(t,i)},decideRaiseSelectionBatchEvent:function(e,t,n){t.length>0&&e.api.selection.raise.rowSelectionChangedBatch(t,n)}};return o}]),e.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","$templateCache","uiGridConstants",function(e,t,n,i){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(n,o,r,a){if(t.initializeGrid(a.grid),a.grid.options.enableRowHeaderSelection){var s={name:e.selectionRowHeaderColName,displayName:"",width:a.grid.options.selectionRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};a.grid.addRowHeaderColumn(s)}var l=!1,c=function(e){return e.forEach(function(e){e.enableSelection=a.grid.options.isRowSelectable(e)}),e},d=function(){a.grid.options.isRowSelectable!==angular.noop&&!0!==l&&(a.grid.registerRowsProcessor(c,500),l=!0)};d();var u=a.grid.registerDataChangeCallback(d,[i.dataChange.OPTIONS]);n.$on("$destroy",u)},post:function(e,t,n,i){}}}}}]),e.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService","gridUtil",function(e,t,n){return{replace:!0,restrict:"E",template:e.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(e,i,o,r){function a(e,n){n.stopPropagation(),n.shiftKey?t.shiftSelect(l,e,n,l.options.multiSelect):n.ctrlKey||n.metaKey?t.toggleRowSelection(l,e,n,l.options.multiSelect,l.options.noUnselect):t.toggleRowSelection(l,e,n,l.options.multiSelect&&!l.options.modifierKeysToMultiSelect,l.options.noUnselect)}function s(e){(e.ctrlKey||e.shiftKey)&&(e.target.onselectstart=function(){return!1},window.setTimeout(function(){e.target.onselectstart=null},0))}var l=r.grid;e.selectButtonClick=a,"ie"===n.detectBrowser()&&i.on("mousedown",s)}}}]),e.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function(e,t){return{replace:!0,restrict:"E",template:e.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function(e,n,i,o){var r=e.col.grid;e.headerButtonClick=function(e,n){r.selection.selectAll?(t.clearSelectedRows(r,n),r.options.noUnselect&&r.api.selection.selectRowByVisibleIndex(0,n),r.selection.selectAll=!1):r.options.multiSelect&&(r.api.selection.selectAllVisibleRows(n),r.selection.selectAll=!0)}}}}]),e.directive("uiGridViewport",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function(e,t,n,i,o,r){return{priority:-200,scope:!1,compile:function(e,t){var n=angular.element(e.children().children()[0]),i=n.attr("ng-class"),o="";return o=i?i.slice(0,-1)+",'ui-grid-row-selected': row.isSelected}":"{'ui-grid-row-selected': row.isSelected}",n.attr("ng-class",o),{pre:function(e,t,n,i){},post:function(e,t,n,i){}}}}}]),e.directive("uiGridCell",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService","$timeout",function(e,t,n,i,o,r,a){return{priority:-200,restrict:"A",require:"?^uiGrid",scope:!1,link:function(e,n,i,o){function s(){e.grid.options.enableRowSelection&&e.grid.options.enableFullRowSelection&&(n.addClass("ui-grid-disable-selection"),n.on("touchstart",p),n.on("touchend",g),n.on("click",u),e.registered=!0)}function l(){e.registered&&(n.removeClass("ui-grid-disable-selection"),n.off("touchstart",p),n.off("touchend",g),n.off("click",u),e.registered=!1)}var c=0,d=300;o.grid.api.cellNav&&o.grid.api.cellNav.on.viewPortKeyDown(e,function(t,n){null!==n&&n.row===e.row&&n.col===e.col&&32===t.keyCode&&"selectionRowHeaderCol"===e.col.colDef.name&&(r.toggleRowSelection(e.grid,e.row,t,e.grid.options.multiSelect&&!e.grid.options.modifierKeysToMultiSelect,e.grid.options.noUnselect),e.$apply())});var u=function(t){n.off("touchend",g),t.shiftKey?r.shiftSelect(e.grid,e.row,t,e.grid.options.multiSelect):t.ctrlKey||t.metaKey?r.toggleRowSelection(e.grid,e.row,t,e.grid.options.multiSelect,e.grid.options.noUnselect):r.toggleRowSelection(e.grid,e.row,t,e.grid.options.multiSelect&&!e.grid.options.modifierKeysToMultiSelect,e.grid.options.noUnselect),e.$apply(),a(function(){n.on("touchend",g)},d)},p=function(e){c=(new Date).getTime(),n.off("click",u)},g=function(e){(new Date).getTime()-c<d&&u(e),a(function(){n.on("click",u)},d)};s();var m=e.grid.registerDataChangeCallback(function(){e.grid.options.enableRowSelection&&e.grid.options.enableFullRowSelection&&!e.registered?s():e.grid.options.enableRowSelection&&e.grid.options.enableFullRowSelection||!e.registered||l()},[t.dataChange.OPTIONS]);n.on("$destroy",m)}}}]),e.directive("uiGridGridFooter",["$compile","uiGridConstants","gridUtil",function(e,t,n){return{restrict:"EA",replace:!0,priority:-1e3,require:"^uiGrid",scope:!0,compile:function(t,i){return{pre:function(t,i,o,r){r.grid.options.showGridFooter&&n.getTemplate("ui-grid/gridFooterSelectedItems").then(function(n){var o=angular.element(n),r=e(o)(t);angular.element(i[0].getElementsByClassName("ui-grid-grid-footer")[0]).append(r)})},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.treeBase",["ui.grid"]);e.constant("uiGridTreeBaseConstants",{featureName:"treeBase",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),e.service("uiGridTreeBaseService",["$q","uiGridTreeBaseConstants","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants","rowSorter",function(e,t,n,i,o,r,a,s){var l={initializeGrid:function(e,t){e.treeBase={},e.treeBase.numberLevels=0,e.treeBase.expandAll=!1,e.treeBase.tree=[],l.defaultGridOptions(e.options),e.registerRowsProcessor(l.treeRows,410),e.registerColumnBuilder(l.treeBaseColumnBuilder),l.createRowHeader(e);var n={events:{treeBase:{rowExpanded:{},rowCollapsed:{}}},methods:{treeBase:{expandAllRows:function(){l.expandAllRows(e)},collapseAllRows:function(){l.collapseAllRows(e)},toggleRowTreeState:function(t){l.toggleRowTreeState(e,t)},expandRow:function(t){l.expandRow(e,t)},expandRowChildren:function(t){l.expandRowChildren(e,t)},collapseRow:function(t){l.collapseRow(e,t)},collapseRowChildren:function(t){l.collapseRowChildren(e,t)},getTreeExpandedState:function(){return{expandedState:l.getTreeState(e)}},setTreeState:function(t){l.setTreeState(e,t)},getRowChildren:function(e){return e.treeNode.children.map(function(e){return e.row})}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods)},defaultGridOptions:function(e){e.treeRowHeaderBaseWidth=e.treeRowHeaderBaseWidth||30,e.treeIndent=e.treeIndent||10,e.showTreeRowHeader=!1!==e.showTreeRowHeader,e.showTreeExpandNoChildren=!1!==e.showTreeExpandNoChildren,e.treeRowHeaderAlwaysVisible=!1!==e.treeRowHeaderAlwaysVisible,e.treeCustomAggregations=e.treeCustomAggregations||{},e.enableExpandAll=!1!==e.enableExpandAll},treeBaseColumnBuilder:function(e,t,n){void 0!==e.customTreeAggregationFn&&(t.treeAggregationFn=e.customTreeAggregationFn),void 0!==e.treeAggregationType&&(t.treeAggregation={type:e.treeAggregationType},void 0!==n.treeCustomAggregations[e.treeAggregationType]?(t.treeAggregationFn=n.treeCustomAggregations[e.treeAggregationType].aggregationFn,t.treeAggregationFinalizerFn=n.treeCustomAggregations[e.treeAggregationType].finalizerFn,t.treeAggregation.label=n.treeCustomAggregations[e.treeAggregationType].label):void 0!==l.nativeAggregations()[e.treeAggregationType]&&(t.treeAggregationFn=l.nativeAggregations()[e.treeAggregationType].aggregationFn,t.treeAggregation.label=l.nativeAggregations()[e.treeAggregationType].label)),void 0!==e.treeAggregationLabel&&(void 0===t.treeAggregation&&(t.treeAggregation={}),t.treeAggregation.label=e.treeAggregationLabel),t.treeAggregationUpdateEntity=!1!==e.treeAggregationUpdateEntity,void 0===t.customTreeAggregationFinalizerFn&&(t.customTreeAggregationFinalizerFn=e.customTreeAggregationFinalizerFn)},createRowHeader:function(e){var n={name:t.rowHeaderColName,displayName:"",width:e.options.treeRowHeaderBaseWidth,minWidth:10,cellTemplate:"ui-grid/treeBaseRowHeader",headerCellTemplate:"ui-grid/treeBaseHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};n.visible=e.options.treeRowHeaderAlwaysVisible,e.addRowHeaderColumn(n)},expandAllRows:function(e){e.treeBase.tree.forEach(function(n){l.setAllNodes(e,n,t.EXPANDED)}),e.treeBase.expandAll=!0,e.queueGridRefresh()},collapseAllRows:function(e){e.treeBase.tree.forEach(function(n){l.setAllNodes(e,n,t.COLLAPSED)}),e.treeBase.expandAll=!1,e.queueGridRefresh()},setAllNodes:function(e,n,i){void 0!==n.state&&n.state!==i&&(n.state=i,i===t.EXPANDED?e.api.treeBase.raise.rowExpanded(n.row):e.api.treeBase.raise.rowCollapsed(n.row)),n.children&&n.children.forEach(function(t){l.setAllNodes(e,t,i)})},toggleRowTreeState:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||(n.treeNode.state===t.EXPANDED?l.collapseRow(e,n):l.expandRow(e,n),e.queueGridRefresh())},expandRow:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||n.treeNode.state!==t.EXPANDED&&(n.treeNode.state=t.EXPANDED,e.api.treeBase.raise.rowExpanded(n),e.treeBase.expandAll=l.allExpanded(e.treeBase.tree),e.queueGridRefresh())},expandRowChildren:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||(l.setAllNodes(e,n.treeNode,t.EXPANDED),e.treeBase.expandAll=l.allExpanded(e.treeBase.tree),e.queueGridRefresh())},collapseRow:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||n.treeNode.state!==t.COLLAPSED&&(n.treeNode.state=t.COLLAPSED,e.treeBase.expandAll=!1,e.api.treeBase.raise.rowCollapsed(n),e.queueGridRefresh())},collapseRowChildren:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||(l.setAllNodes(e,n.treeNode,t.COLLAPSED),e.treeBase.expandAll=!1,e.queueGridRefresh())},allExpanded:function(e){var t=!0;return e.forEach(function(e){l.allExpandedInternal(e)||(t=!1)}),t},allExpandedInternal:function(e){if(e.children&&e.children.length>0){if(e.state===t.COLLAPSED)return!1;var n=!0;return e.children.forEach(function(e){l.allExpandedInternal(e)||(n=!1)}),n}return!0},treeRows:function(e){if(0===e.length)return e;var n=this;t.EXPANDED;return n.treeBase.tree=l.createTree(n,e),l.updateRowHeaderWidth(n),l.sortTree(n),l.fixFilter(n),l.renderTree(n.treeBase.tree)},updateRowHeaderWidth:function(e){var n=e.getColumn(t.rowHeaderColName),i=e.options.treeRowHeaderBaseWidth+e.options.treeIndent*Math.max(e.treeBase.numberLevels-1,0);n&&i!==n.width&&(n.width=i,e.queueRefresh());var o=!0;!1===e.options.showTreeRowHeader&&(o=!1),!1===e.options.treeRowHeaderAlwaysVisible&&e.treeBase.numberLevels<=0&&(o=!1),n.visible!==o&&(n.visible=o,n.colDef.visible=o,e.queueGridRefresh())},renderTree:function(e){var n=[];return e.forEach(function(e){e.row.visible&&n.push(e.row),e.state===t.EXPANDED&&e.children&&e.children.length>0&&(n=n.concat(l.renderTree(e.children)))}),n},createTree:function(e,n){var i,o=-1,r=[];e.treeBase.tree=[],e.treeBase.numberLevels=0;var a=l.getAggregations(e),s=function(n){if(void 0!==n.entity.$$treeLevel&&n.treeLevel!==n.entity.$$treeLevel&&(n.treeLevel=n.entity.$$treeLevel),n.treeLevel<=o){for(;n.treeLevel<=o;){var s=r.pop();l.finaliseAggregations(s),o--}i=r.length>0?l.setCurrentState(r):t.EXPANDED}(void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0)&&n.visible&&l.aggregate(e,n,r),l.addOrUseNode(e,n,r,a),void 0!==n.treeLevel&&null!==n.treeLevel&&n.treeLevel>=0&&(r.push(n),o++,i=l.setCurrentState(r)),e.treeBase.numberLevels<n.treeLevel+1&&(e.treeBase.numberLevels=n.treeLevel+1)};for(n.forEach(s);r.length>0;){var c=r.pop();l.finaliseAggregations(c)}return e.treeBase.tree},addOrUseNode:function(e,n,i,o){var r=[];o.forEach(function(e){r.push(l.buildAggregationObject(e.col))});var a={state:t.COLLAPSED,row:n,parentRow:null,aggregations:r,children:[]};n.treeNode&&(a.state=n.treeNode.state),i.length>0&&(a.parentRow=i[i.length-1]),n.treeNode=a,0===i.length?e.treeBase.tree.push(a):i[i.length-1].treeNode.children.push(a)},setCurrentState:function(e){var n=t.EXPANDED;return e.forEach(function(e){e.treeNode.state===t.COLLAPSED&&(n=t.COLLAPSED)}),n},sortTree:function(e){e.columns.forEach(function(e){e.sort&&e.sort.ignoreSort&&delete e.sort.ignoreSort}),e.treeBase.tree=l.sortInternal(e,e.treeBase.tree)},sortInternal:function(e,n){var i=n.map(function(e){return e.row});i=s.sort(e,i,e.columns);var o=i.map(function(e){return e.treeNode});return o.forEach(function(n){n.state===t.EXPANDED&&n.children&&n.children.length>0&&(n.children=l.sortInternal(e,n.children))}),o},fixFilter:function(e){var t;e.treeBase.tree.forEach(function(e){e.children&&e.children.length>0&&(t=e.row.visible,l.fixFilterInternal(e.children,t))})},fixFilterInternal:function(e,t){return e.forEach(function(e){e.row.visible&&!t&&(l.setParentsVisible(e),t=!0),e.children&&e.children.length>0&&l.fixFilterInternal(e.children,t&&e.row.visible)&&(t=!0)}),t},setParentsVisible:function(e){for(;e.parentRow;)e.parentRow.visible=!0,e=e.parentRow.treeNode},buildAggregationObject:function(e){var t={col:e};return e.treeAggregation&&e.treeAggregation.type&&(t.type=e.treeAggregation.type),e.treeAggregation&&e.treeAggregation.label&&(t.label=e.treeAggregation.label),t},getAggregations:function(e){var t=[];return e.columns.forEach(function(n){void 0!==n.treeAggregationFn&&(t.push(l.buildAggregationObject(n)),e.options.showColumnFooter&&void 0===n.colDef.aggregationType&&n.treeAggregation&&(n.treeFooterAggregation=l.buildAggregationObject(n),n.aggregationType=l.treeFooterAggregationType))}),t},aggregate:function(e,t,n){0===n.length&&t.treeNode&&t.treeNode.aggregations&&t.treeNode.aggregations.forEach(function(n){if(void 0!==n.col.treeFooterAggregation){var i=e.getCellValue(t,n.col),o=Number(i);n.col.treeAggregationFn(n.col.treeFooterAggregation,i,o,t)}}),n.forEach(function(n,i){n.treeNode.aggregations&&n.treeNode.aggregations.forEach(function(n){var o=e.getCellValue(t,n.col),r=Number(o);n.col.treeAggregationFn(n,o,r,t),0===i&&void 0!==n.col.treeFooterAggregation&&n.col.treeAggregationFn(n.col.treeFooterAggregation,o,r,t)})})},nativeAggregations:function(){return{count:{label:r.get().aggregation.count,menuTitle:r.get().grouping.aggregate_count,aggregationFn:function(e,t,n){void 0===e.value?e.value=1:e.value++}},sum:{label:r.get().aggregation.sum,menuTitle:r.get().grouping.aggregate_sum,aggregationFn:function(e,t,n){isNaN(n)||(void 0===e.value?e.value=n:e.value+=n)}},min:{label:r.get().aggregation.min,menuTitle:r.get().grouping.aggregate_min,aggregationFn:function(e,t,n){void 0===e.value?e.value=t:void 0!==t&&null!==t&&(t<e.value||null===e.value)&&(e.value=t)}},max:{label:r.get().aggregation.max,menuTitle:r.get().grouping.aggregate_max,aggregationFn:function(e,t,n){void 0===e.value?e.value=t:void 0!==t&&null!==t&&(t>e.value||null===e.value)&&(e.value=t)}},avg:{label:r.get().aggregation.avg,menuTitle:r.get().grouping.aggregate_avg,aggregationFn:function(e,t,n){void 0===e.count?e.count=1:e.count++,isNaN(n)||(void 0===e.value||void 0===e.sum?(e.value=n,e.sum=n):(e.sum+=n,e.value=e.sum/e.count))}}}},finaliseAggregation:function(e,t){t.col.treeAggregationUpdateEntity&&void 0!==e&&void 0!==e.entity["$$"+t.col.uid]&&angular.extend(t,e.entity["$$"+t.col.uid]),"function"==typeof t.col.treeAggregationFinalizerFn&&t.col.treeAggregationFinalizerFn(t),"function"==typeof t.col.customTreeAggregationFinalizerFn&&t.col.customTreeAggregationFinalizerFn(t),void 0===t.rendered&&(t.rendered=t.label?t.label+t.value:t.value)},finaliseAggregations:function(e){void 0!==e.treeNode.aggregations&&e.treeNode.aggregations.forEach(function(t){if(l.finaliseAggregation(e,t),t.col.treeAggregationUpdateEntity){var n={};angular.forEach(t,function(e,i){t.hasOwnProperty(i)&&"col"!==i&&(n[i]=e)}),e.entity["$$"+t.col.uid]=n}})},treeFooterAggregationType:function(e,t){return l.finaliseAggregation(void 0,t.treeFooterAggregation),void 0===t.treeFooterAggregation.value||null===t.treeFooterAggregation.rendered?"":t.treeFooterAggregation.rendered}};return l}]),e.directive("uiGridTreeBaseRowHeaderButtons",["$templateCache","uiGridTreeBaseService",function(e,t){return{replace:!0,restrict:"E",template:e.get("ui-grid/treeBaseRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(e,n,i,o){var r=o.grid;e.treeButtonClick=function(e,n){t.toggleRowTreeState(r,e,n)}}}}]),e.directive("uiGridTreeBaseExpandAllButtons",["$templateCache","uiGridTreeBaseService",function(e,t){return{replace:!0,restrict:"E",template:e.get("ui-grid/treeBaseExpandAllButtons"),scope:!1,link:function(e,n,i,o){var r=e.col.grid;e.headerButtonClick=function(e,n){r.treeBase.expandAll?t.collapseAllRows(r,n):t.expandAllRows(r,n)}}}}]),e.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(e,t,n,i){return{priority:-200,scope:!1,compile:function(e,t){var n=angular.element(e.children().children()[0]),i=n.attr("ng-class"),o="";return o=i?i.slice(0,-1)+",'ui-grid-tree-header-row': row.treeLevel > -1}":"{'ui-grid-tree-header-row': row.treeLevel > -1}",n.attr("ng-class",o),{pre:function(e,t,n,i){},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.treeView",["ui.grid","ui.grid.treeBase"]);e.constant("uiGridTreeViewConstants",{featureName:"treeView",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),e.service("uiGridTreeViewService",["$q","uiGridTreeViewConstants","uiGridTreeBaseConstants","uiGridTreeBaseService","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants",function(e,t,n,i,o,r,a,s,l){var c={initializeGrid:function(e,t){i.initializeGrid(e,t),e.treeView={},e.registerRowsProcessor(c.adjustSorting,60);var n={events:{treeView:{}},methods:{treeView:{}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods)},defaultGridOptions:function(e){e.enableTreeView=!1!==e.enableTreeView},adjustSorting:function(e){return this.columns.forEach(function(e){e.sort&&(e.sort.ignoreSort=!0)}),e}};return c}]),e.directive("uiGridTreeView",["uiGridTreeViewConstants","uiGridTreeViewService","$templateCache",function(e,t,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){!1!==o.grid.options.enableTreeView&&t.initializeGrid(o.grid,e)},post:function(e,t,n,i){}}}}}])}(),function(){var e=angular.module("ui.grid.validate",["ui.grid"]);e.service("uiGridValidateService",["$sce","$q","$http","i18nService","uiGridConstants",function(e,t,n,i,o){var r={validatorFactories:{},setExternalFactoryFunction:function(e){r.externalFactoryFunction=e},clearExternalFactory:function(){delete r.externalFactoryFunction},getValidatorFromExternalFactory:function(e,t){return r.externalFactoryFunction(e,t).validatorFactory(t)},getMessageFromExternalFactory:function(e,t){return r.externalFactoryFunction(e,t).messageFunction(t)},setValidator:function(e,t,n){r.validatorFactories[e]={validatorFactory:t,messageFunction:n}},getValidator:function(e,t){if(r.externalFactoryFunction){var n=r.getValidatorFromExternalFactory(e,t);if(n)return n}if(!r.validatorFactories[e])throw"Invalid validator name: "+e;return r.validatorFactories[e].validatorFactory(t)},getMessage:function(e,t){if(r.externalFactoryFunction){var n=r.getMessageFromExternalFactory(e,t);if(n)return n}return r.validatorFactories[e].messageFunction(t)},isInvalid:function(e,t){return e["$$invalid"+t.name]},setInvalid:function(e,t){e["$$invalid"+t.name]=!0},setValid:function(e,t){delete e["$$invalid"+t.name]},setError:function(e,t,n){e["$$errors"+t.name]||(e["$$errors"+t.name]={}),e["$$errors"+t.name][n]=!0},clearError:function(e,t,n){e["$$errors"+t.name]&&n in e["$$errors"+t.name]&&delete e["$$errors"+t.name][n]},getErrorMessages:function(e,t){var n=[];return e["$$errors"+t.name]&&0!==Object.keys(e["$$errors"+t.name]).length?(Object.keys(e["$$errors"+t.name]).sort().forEach(function(e){n.push(r.getMessage(e,t.validators[e]))}),n):n},getFormattedErrors:function(t,n){var o="",a=r.getErrorMessages(t,n);if(a.length)return a.forEach(function(e){o+=e+"<br/>"}),e.trustAsHtml("<p><b>"+i.getSafeText("validate.error")+"</b></p>"+o)},getTitleFormattedErrors:function(t,n){var o="\n",a="",s=r.getErrorMessages(t,n);if(s.length)return s.forEach(function(e){a+=e+o}),e.trustAsHtml(i.getSafeText("validate.error")+o+a)},runValidators:function(e,n,i,o,a){if(i!==o){if(void 0===n.name||!n.name)throw new Error("colDef.name is required to perform validation");r.setValid(e,n);var s=function(e,t,n){return function(s){s||(r.setInvalid(e,t),r.setError(e,t,n),a&&a.api.validate.raise.validationFailed(e,t,i,o))}};for(var l in n.validators){r.clearError(e,n,l);var c=r.getValidator(l,n.validators[l]);t.when(c(o,i,e,n)).then(s(e,n,l))}}},createDefaultValidators:function(){r.setValidator("minLength",function(e){return function(t,n,i,o){return void 0===n||null===n||""===n||n.length>=e}},function(e){return i.getSafeText("validate.minLength").replace("THRESHOLD",e)}),r.setValidator("maxLength",function(e){return function(t,n,i,o){return void 0===n||null===n||""===n||n.length<=e}},function(e){return i.getSafeText("validate.maxLength").replace("THRESHOLD",e)}),r.setValidator("required",function(e){return function(t,n,i,o){return!e||!(void 0===n||null===n||""===n)}},function(e){return i.getSafeText("validate.required")})},initializeGrid:function(e,t){t.validate={isInvalid:r.isInvalid,getFormattedErrors:r.getFormattedErrors,getTitleFormattedErrors:r.getTitleFormattedErrors,runValidators:r.runValidators};var n={events:{validate:{validationFailed:function(e,t,n,i){}}},methods:{validate:{isInvalid:function(e,n){return t.validate.isInvalid(e,n)},getErrorMessages:function(e,n){return t.validate.getErrorMessages(e,n)},getFormattedErrors:function(e,n){return t.validate.getFormattedErrors(e,n)},getTitleFormattedErrors:function(e,n){return t.validate.getTitleFormattedErrors(e,n)}}}};t.api.registerEventsFromObject(n.events),t.api.registerMethodsFromObject(n.methods),t.edit&&t.api.edit.on.afterCellEdit(e,function(e,n,i,o){t.validate.runValidators(e,n,i,o,t)}),r.createDefaultValidators()}};return r}]),e.directive("uiGridValidate",["gridUtil","uiGridValidateService",function(e,t){return{priority:0,replace:!0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,i,o){t.initializeGrid(e,o.grid)},post:function(e,t,n,i){}}}}}])}(),angular.module("ui.grid").run(["$templateCache",function(e){e.put("ui-grid/ui-grid-filter",'<div class="ui-grid-filter-container" ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><div ng-if="colFilter.type !== \'select\'"><input type="text" class="ui-grid-filter-input ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}" aria-label="{{colFilter.ariaLabel || aria.defaultFilterLabel}}"><div role="button" class="ui-grid-filter-button" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term !== null && colFilter.term !== \'\'"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div><div ng-if="colFilter.type === \'select\'"><select class="ui-grid-filter-select ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || aria.defaultFilterLabel}}" aria-label="{{colFilter.ariaLabel || \'\'}}" ng-options="option.value as option.label for option in colFilter.selectOptions"><option value=""></option></select><div role="button" class="ui-grid-filter-button-select" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div></div>'),e.put("ui-grid/ui-grid-footer",'<div class="ui-grid-footer-panel ui-grid-footer-aggregates-row">\x3c!-- tfooter --\x3e<div class="ui-grid-footer ui-grid-footer-viewport"><div class="ui-grid-footer-canvas"><div class="ui-grid-footer-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-footer-cell-row"><div ui-grid-footer-cell role="gridcell" ng-repeat="col in colContainer.renderedColumns track by col.uid" col="col" render-index="$index" class="ui-grid-footer-cell ui-grid-clearfix"></div></div></div></div></div></div>'),e.put("ui-grid/ui-grid-grid-footer",'<div class="ui-grid-footer-info ui-grid-grid-footer"><span>{{\'search.totalItems\' | t}} {{grid.rows.length}}</span> <span ng-if="grid.renderContainers.body.visibleRowCache.length !== grid.rows.length" class="ngLabel">({{"search.showingItems" | t}} {{grid.renderContainers.body.visibleRowCache.length}})</span></div>'),e.put("ui-grid/ui-grid-group-panel",'<div class="ui-grid-group-panel"><div ui-t="groupPanel.description" class="description" ng-show="groupings.length == 0"></div><ul ng-show="groupings.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}} <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span> <span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div>'),e.put("ui-grid/ui-grid-header",'<div role="rowgroup" class="ui-grid-header">\x3c!-- theader --\x3e<div class="ui-grid-top-panel"><div class="ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div class="ui-grid-header-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-header-cell-row"><div class="ui-grid-header-cell ui-grid-clearfix" ng-repeat="col in colContainer.renderedColumns track by col.uid" ui-grid-header-cell col="col" render-index="$index"></div></div></div></div></div></div></div>'),e.put("ui-grid/ui-grid-menu-button",'<div class="ui-grid-menu-button"><div role="button" ui-grid-one-bind-id-grid="\'grid-menu\'" class="ui-grid-icon-container" ng-click="toggleMenu()" aria-haspopup="true"><i class="ui-grid-icon-menu" ui-grid-one-bind-aria-label="i18n.aria.buttonLabel">&nbsp;</i></div><div ui-grid-menu menu-items="menuItems"></div></div>'),e.put("ui-grid/ui-grid-no-header",'<div class="ui-grid-top-panel"></div>'),e.put("ui-grid/ui-grid-row","<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.uid\" ui-grid-one-bind-id-grid=\"rowRenderIndex + '-' + col.uid + '-cell'\" class=\"ui-grid-cell\" ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader }\" role=\"{{col.isRowHeader ? 'rowheader' : 'gridcell'}}\" ui-grid-cell></div>"),e.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid">\x3c!-- TODO (c0bra): add "scoped" attr here, eventually? --\x3e<style ui-grid-style>.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ ((grid.getTotalRowHeight() < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    /*\n    .ui-grid[dir=rtl] .ui-grid-viewport {\n      padding-left: {{ grid.verticalScrollbarWidth }}px;\n    }\n    */\n\n    {{ grid.customStyles }}</style><div class="ui-grid-contents-wrapper"><div ui-grid-menu-button ng-if="grid.options.enableGridMenu"></div><div ng-if="grid.hasLeftContainer()" style="width: 0" ui-grid-pinned-container="\'left\'"></div><div ui-grid-render-container container-id="\'body\'" col-container-name="\'body\'" row-container-name="\'body\'" bind-scroll-horizontal="true" bind-scroll-vertical="true" enable-horizontal-scrollbar="grid.options.enableHorizontalScrollbar" enable-vertical-scrollbar="grid.options.enableVerticalScrollbar"></div><div ng-if="grid.hasRightContainer()" style="width: 0" ui-grid-pinned-container="\'right\'"></div><div ui-grid-grid-footer ng-if="grid.options.showGridFooter"></div><div ui-grid-column-menu ng-if="grid.options.enableColumnMenus"></div><div ng-transclude></div></div></div>'),e.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>'),e.put("ui-grid/uiGridColumnMenu",'<div class="ui-grid-column-menu"><div ui-grid-menu menu-items="menuItems">\x3c!-- <div class="ui-grid-column-menu">\n    <div class="inner" ng-show="menuShown">\n      <ul>\n        <div ng-show="grid.options.enableSorting">\n          <li ng-click="sortColumn($event, asc)" ng-class="{ \'selected\' : col.sort.direction == asc }"><i class="ui-grid-icon-sort-alt-up"></i> Sort Ascending</li>\n          <li ng-click="sortColumn($event, desc)" ng-class="{ \'selected\' : col.sort.direction == desc }"><i class="ui-grid-icon-sort-alt-down"></i> Sort Descending</li>\n          <li ng-show="col.sort.direction" ng-click="unsortColumn()"><i class="ui-grid-icon-cancel"></i> Remove Sort</li>\n        </div>\n      </ul>\n    </div>\n  </div> --\x3e</div></div>'),e.put("ui-grid/uiGridFooterCell",'<div class="ui-grid-cell-contents" col-index="renderIndex"><div>{{ col.getAggregationText() + ( col.getAggregationValue() CUSTOM_FILTERS ) }}</div></div>'),e.put("ui-grid/uiGridHeaderCell",'<div role="columnheader" ng-class="{ \'sortable\': sortable }" ui-grid-one-bind-aria-labelledby-grid="col.uid + \'-header-text \' + col.uid + \'-sortdir-text\'" aria-sort="{{col.sort.direction == asc ? \'ascending\' : ( col.sort.direction == desc ? \'descending\' : (!col.sort.direction ? \'none\' : \'other\'))}}"><div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus" col-index="renderIndex" title="TOOLTIP"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'">{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{isSortPriorityVisible() ? i18n.headerCell.priority + \' \' + ( col.sort.priority + 1 )  : null}}" aria-hidden="true"></i> <sub ui-grid-visible="isSortPriorityVisible()" class="ui-grid-sort-priority-number">{{col.sort.priority + 1}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>'),e.put("ui-grid/uiGridMenu",'<div class="ui-grid-menu" ng-if="shown"><style ui-grid-style>{{dynamicStyles}}</style><div class="ui-grid-menu-mid" ng-show="shownMid"><div class="ui-grid-menu-inner"><ul role="menu" class="ui-grid-menu-items"><li ng-repeat="item in menuItems" role="menuitem" ui-grid-menu-item ui-grid-one-bind-id="\'menuitem-\'+$index" action="item.action" name="item.title" active="item.active" icon="item.icon" shown="item.shown" context="item.context" template-url="item.templateUrl" leave-open="item.leaveOpen" screen-reader-only="item.screenReaderOnly"></li></ul></div></div></div>'),e.put("ui-grid/uiGridMenuItem",'<button type="button" class="ui-grid-menu-item" ng-click="itemAction($event, title)" ng-show="itemShown()" ng-class="{ \'ui-grid-menu-item-active\': active(), \'ui-grid-sr-only\': (!focus && screenReaderOnly) }" aria-pressed="{{active()}}" tabindex="0" ng-focus="focus=true" ng-blur="focus=false"><i ng-class="icon" aria-hidden="true">&nbsp;</i> {{ name }}</button>'),e.put("ui-grid/uiGridRenderContainer","<div role=\"grid\" ui-grid-one-bind-id-grid=\"'grid-container'\" class=\"ui-grid-render-container\" ng-style=\"{ 'margin-left': colContainer.getMargin('left') + 'px', 'margin-right': colContainer.getMargin('right') + 'px' }\">\x3c!-- All of these dom elements are replaced in place --\x3e<div ui-grid-header></div><div ui-grid-viewport></div><div ng-if=\"colContainer.needsHScrollbarPlaceholder()\" class=\"ui-grid-scrollbar-placeholder\" ng-style=\"{height:colContainer.grid.scrollbarHeight + 'px'}\"></div><ui-grid-footer ng-if=\"grid.options.showColumnFooter\"></ui-grid-footer></div>"),e.put("ui-grid/uiGridViewport",'<div role="rowgroup" class="ui-grid-viewport" ng-style="colContainer.getViewportStyle()">\x3c!-- tbody --\x3e<div class="ui-grid-canvas"><div ng-repeat="(rowRenderIndex, row) in rowContainer.renderedRows track by $index" class="ui-grid-row" ng-style="Viewport.rowStyle(rowRenderIndex)"><div role="row" ui-grid-row="row" row-render-index="rowRenderIndex"></div></div></div></div>'),e.put("ui-grid/cellEditor",'<div><form name="inputForm"><input type="INPUT_TYPE" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></form></div>'),e.put("ui-grid/dropdownEditor",'<div><form name="inputForm"><select ng-class="\'colt\' + col.uid" ui-grid-edit-dropdown ng-model="MODEL_COL_FIELD" ng-options="field[editDropdownIdLabel] as field[editDropdownValueLabel] CUSTOM_FILTERS for field in editDropdownOptionsArray"></select></form></div>'),e.put("ui-grid/fileChooserEditor",'<div><form name="inputForm"><input ng-class="\'colt\' + col.uid" ui-grid-edit-file-chooser type="file" id="files" name="files[]" ng-model="MODEL_COL_FIELD"></form></div>'),e.put("ui-grid/expandableRow",'<div ui-grid-expandable-row ng-if="expandableRow.shouldRenderExpand()" class="expandableRow" style="float:left; margin-top: 1px; margin-bottom: 1px" ng-style="{width: (grid.renderContainers.body.getCanvasWidth()) + \'px\', height: row.expandedRowHeight + \'px\'}"></div>'),e.put("ui-grid/expandableRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !row.isExpanded, \'ui-grid-icon-minus-squared\' : row.isExpanded }" ng-click="grid.api.expandable.toggleRowExpansion(row.entity)"></i></div></div>'),e.put("ui-grid/expandableScrollFiller","<div ng-if=\"expandableRow.shouldRenderFiller()\" ng-class=\"{scrollFiller:true, scrollFillerClass:(colContainer.name === 'body')}\" ng-style=\"{ width: (grid.getViewportWidth()) + 'px', height: row.expandedRowHeight + 2 + 'px', 'margin-left': grid.options.rowHeader.rowHeaderWidth + 'px' }\"><i class=\"ui-grid-icon-spin5 ui-grid-animate-spin\" ng-style=\"{'margin-top': ( row.expandedRowHeight/2 - 5) + 'px', 'margin-left' : ((grid.getViewportWidth() - grid.options.rowHeader.rowHeaderWidth)/2 - 5) + 'px'}\"></i></div>"),e.put("ui-grid/expandableTopRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !grid.expandable.expandedAll, \'ui-grid-icon-minus-squared\' : grid.expandable.expandedAll }" ng-click="grid.api.expandable.toggleAllRows()"></i></div></div>'),e.put("ui-grid/csvLink",'<span class="ui-grid-exporter-csv-link-span"><a href="data:text/csv;charset=UTF-8,CSV_CONTENT" download="FILE_NAME">LINK_LABEL</a></span>'),e.put("ui-grid/importerMenuItem",'<li class="ui-grid-menu-item"><form><input class="ui-grid-importer-file-chooser" type="file" id="files" name="files[]"></form></li>'),e.put("ui-grid/importerMenuItemContainer","<div ui-grid-importer-menu-item></div>"),e.put("ui-grid/pagination",'<div role="contentinfo" class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"><div role="navigation" class="ui-grid-pager-container"><div role="menubar" class="ui-grid-pager-control"><button type="button" role="menuitem" class="ui-grid-pager-first" ui-grid-one-bind-title="aria.pageToFirst" ui-grid-one-bind-aria-label="aria.pageToFirst" ng-click="pageFirstPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle\' : \'first-triangle\'"><div ng-class="grid.isRTL() ? \'last-bar-rtl\' : \'first-bar\'"></div></div></button> <button type="button" role="menuitem" class="ui-grid-pager-previous" ui-grid-one-bind-title="aria.pageBack" ui-grid-one-bind-aria-label="aria.pageBack" ng-click="pagePreviousPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle prev-triangle\' : \'first-triangle prev-triangle\'"></div></button> <input type="number" ui-grid-one-bind-title="aria.pageSelected" ui-grid-one-bind-aria-label="aria.pageSelected" class="ui-grid-pager-control-input" ng-model="grid.options.paginationCurrentPage" min="1" max="{{ paginationApi.getTotalPages() }}" required> <span class="ui-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0"><abbr ui-grid-one-bind-title="paginationOf">/</abbr> {{ paginationApi.getTotalPages() }}</span> <button type="button" role="menuitem" class="ui-grid-pager-next" ui-grid-one-bind-title="aria.pageForward" ui-grid-one-bind-aria-label="aria.pageForward" ng-click="pageNextPageClick()" ng-disabled="cantPageForward()"><div ng-class="grid.isRTL() ? \'first-triangle next-triangle\' : \'last-triangle next-triangle\'"></div></button> <button type="button" role="menuitem" class="ui-grid-pager-last" ui-grid-one-bind-title="aria.pageToLast" ui-grid-one-bind-aria-label="aria.pageToLast" ng-click="pageLastPageClick()" ng-disabled="cantPageToLast()"><div ng-class="grid.isRTL() ? \'first-triangle\' : \'last-triangle\'"><div ng-class="grid.isRTL() ? \'first-bar-rtl\' : \'last-bar\'"></div></div></button></div><div class="ui-grid-pager-row-count-picker" ng-if="grid.options.paginationPageSizes.length > 1"><select ui-grid-one-bind-aria-labelledby-grid="\'items-per-page-label\'" ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span ui-grid-one-bind-id-grid="\'items-per-page-label\'" class="ui-grid-pager-row-count-label">&nbsp;{{sizesLabel}}</span></div><span ng-if="grid.options.paginationPageSizes.length <= 1" class="ui-grid-pager-row-count-label">{{grid.options.paginationPageSize}}&nbsp;{{sizesLabel}}</span></div><div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"><span ng-show="grid.options.totalItems > 0">{{showingLow}} <abbr ui-grid-one-bind-title="paginationThrough">-</abbr> {{showingHigh}} {{paginationOf}} {{grid.options.totalItems}} {{totalItemsLabel}}</span></div></div></div>'),e.put("ui-grid/columnResizer",'<div ui-grid-column-resizer ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex" unselectable="on"></div>'),e.put("ui-grid/gridFooterSelectedItems",'<span ng-if="grid.selection.selectedCount !== 0 && grid.options.enableFooterTotalSelected">({{"search.selectedItems" | t}} {{grid.selection.selectedCount}})</span>'),e.put("ui-grid/selectionHeaderCell",'<div>\x3c!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --\x3e<div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-selection-select-all-buttons ng-if="grid.options.enableSelectAll"></ui-grid-selection-select-all-buttons></div></div>'),e.put("ui-grid/selectionRowHeader",'<div class="ui-grid-disable-selection"><div class="ui-grid-cell-contents"><ui-grid-selection-row-header-buttons></ui-grid-selection-row-header-buttons></div></div>'),e.put("ui-grid/selectionRowHeaderButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ng-click="selectButtonClick(row, $event)">&nbsp;</div>'),e.put("ui-grid/selectionSelectAllButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-all-selected\': grid.selection.selectAll}" ng-click="headerButtonClick($event)"></div>'),e.put("ui-grid/treeBaseExpandAllButtons",'<div class="ui-grid-tree-base-row-header-buttons" ng-class="{\'ui-grid-icon-minus-squared\': grid.treeBase.numberLevels > 0 && grid.treeBase.expandAll, \'ui-grid-icon-plus-squared\': grid.treeBase.numberLevels > 0 && !grid.treeBase.expandAll}" ng-click="headerButtonClick($event)"></div>'),e.put("ui-grid/treeBaseHeaderCell",'<div><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-tree-base-expand-all-buttons ng-if="grid.options.enableExpandAll"></ui-grid-tree-base-expand-all-buttons></div></div>'),e.put("ui-grid/treeBaseRowHeader",'<div class="ui-grid-cell-contents"><ui-grid-tree-base-row-header-buttons></ui-grid-tree-base-row-header-buttons></div>'),e.put("ui-grid/treeBaseRowHeaderButtons","<div class=\"ui-grid-tree-base-row-header-buttons\" ng-class=\"{'ui-grid-tree-base-header': row.treeLevel > -1 }\" ng-click=\"treeButtonClick(row, $event)\"><i ng-class=\"{'ui-grid-icon-minus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'expanded', 'ui-grid-icon-plus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'collapsed'}\" ng-style=\"{'padding-left': grid.options.treeIndent * row.treeLevel + 'px'}\"></i> &nbsp;</div>"),e.put("ui-grid/cellTitleValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" title="{{grid.validate.getTitleFormattedErrors(row.entity,col.colDef)}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'),e.put("ui-grid/cellTooltipValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" tooltip-html-unsafe="{{grid.validate.getFormattedErrors(row.entity,col.colDef)}}" tooltip-enable="grid.validate.isInvalid(row.entity,col.colDef)" tooltip-append-to-body="true" tooltip-placement="top" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>')}]),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.X2JS=t()}(this,function(){return function(e){function t(){void 0===e.escapeMode&&(e.escapeMode=!0),e.attributePrefix=e.attributePrefix||"_",e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1)}function n(){}function i(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function o(e){return e.prefix}function r(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function a(e,t,n,i){for(var o=0;o<e.length;o++){var r=e[o];if("string"==typeof r){if(r==i)break}else if(r instanceof RegExp){if(r.test(i))break}else if("function"==typeof r&&r(t,n,i))break}return o!=e.length}function s(t,n,i){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&a(e.arrayAccessFormPaths,t,n,i)&&(t[n]=[t[n]])}function l(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),i=t[5].split(".");if(n.setHours(t[3],t[4],i[0]),i.length>1&&n.setMilliseconds(i[1]),t[6]&&t[7]){var o=60*t[6]+Number(t[7]);o=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*o:o),n.setMinutes(n.getMinutes()-o-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function c(t,n,i){if(e.datetimeAccessFormPaths.length>0){var o=i.split(".#")[0];return a(e.datetimeAccessFormPaths,t,n,o)?l(t):t}return t}function d(t,n,i,o){return!(n==I.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||a(e.xmlElementsFilter,t,i,o)}function u(t,n){if(t.nodeType==I.DOCUMENT_NODE){for(var r=new Object,a=t.childNodes,l=0;l<a.length;l++){var p=a.item(l);if(p.nodeType==I.ELEMENT_NODE){var g=i(p);r[g]=u(p,g)}}return r}if(t.nodeType==I.ELEMENT_NODE){var r=new Object;r.__cnt=0;for(var a=t.childNodes,l=0;l<a.length;l++){var p=a.item(l),g=i(p);if(p.nodeType!=I.COMMENT_NODE){var m=n+"."+g;d(r,p.nodeType,g,m)&&(r.__cnt++,null==r[g]?(r[g]=u(p,m),s(r,g,m)):(null!=r[g]&&(r[g]instanceof Array||(r[g]=[r[g]],s(r,g,m))),r[g][r[g].length]=u(p,m)))}}for(var f=0;f<t.attributes.length;f++){var h=t.attributes.item(f);r.__cnt++,r[e.attributePrefix+h.name]=h.value}var v=o(t);return null!=v&&""!=v&&(r.__cnt++,r.__prefix=v),null!=r["#text"]&&(r.__text=r["#text"],r.__text instanceof Array&&(r.__text=r.__text.join("\n")),e.stripWhitespaces&&(r.__text=r.__text.trim()),delete r["#text"],"property"==e.arrayAccessForm&&delete r["#text_asArray"],r.__text=c(r.__text,g,n+"."+g)),null!=r["#cdata-section"]&&(r.__cdata=r["#cdata-section"],delete r["#cdata-section"],"property"==e.arrayAccessForm&&delete r["#cdata-section_asArray"]),0==r.__cnt&&"text"==e.emptyNodeForm?r="":1==r.__cnt&&null!=r.__text?r=r.__text:1!=r.__cnt||null==r.__cdata||e.keepCData?r.__cnt>1&&null!=r.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==r.__text||""==r.__text.trim())&&delete r.__text:r=r.__cdata,delete r.__cnt,!e.enableToStringFunc||null==r.__text&&null==r.__cdata||(r.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),r}if(t.nodeType==I.TEXT_NODE||t.nodeType==I.CDATA_SECTION_NODE)return t.nodeValue}function p(t,n,i,o){var a="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=i)for(var s=0;s<i.length;s++){var l=i[s],c=t[l];e.escapeMode&&(c=r(c)),a+=" "+l.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?a+='"'+c+'"':a+="'"+c+"'"}return a+=o?"/>":">"}function g(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function m(e,t){return-1!==e.indexOf(t,e.length-t.length)}function f(t,n){return!!("property"==e.arrayAccessForm&&m(n.toString(),"_asArray")||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function)}function h(e){var t=0;if(e instanceof Object)for(var n in e)f(e,n)||t++;return t}function v(t,n,i){return 0==e.jsonPropertiesFilter.length||""==i||a(e.jsonPropertiesFilter,t,n,i)}function y(t){var n=[];if(t instanceof Object)for(var i in t)-1==i.toString().indexOf("__")&&0==i.toString().indexOf(e.attributePrefix)&&n.push(i);return n}function b(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?n+=r(t.__text):n+=t.__text),n}function w(t){var n="";return t instanceof Object?n+=b(t):null!=t&&(e.escapeMode?n+=r(t):n+=t),n}function C(e,t){return""===e?t:e+"."+t}function T(e,t,n,i){var o="";if(0==e.length)o+=p(e,t,n,!0);else for(var r=0;r<e.length;r++)o+=p(e[r],t,y(e[r]),!1),o+=S(e[r],C(i,t)),o+=g(e[r],t);return o}function S(e,t){var n="";if(h(e)>0)for(var i in e)if(!f(e,i)&&(""==t||v(e,i,C(t,i)))){var o=e[i],r=y(o);if(null==o||void 0==o)n+=p(o,i,r,!0);else if(o instanceof Object)if(o instanceof Array)n+=T(o,i,r,t);else if(o instanceof Date)n+=p(o,i,r,!1),n+=o.toISOString(),n+=g(o,i);else{var a=h(o);a>0||null!=o.__text||null!=o.__cdata?(n+=p(o,i,r,!1),n+=S(o,C(t,i)),n+=g(o,i)):n+=p(o,i,r,!0)}else n+=p(o,i,r,!1),n+=w(o),n+=g(o,i)}return n+=w(e)}var E="1.2.0";e=e||{},t(),n();var I={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;var n;if(window.DOMParser){var i=new window.DOMParser,o=null;if(!t)try{o=i.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){o=null}try{n=i.parseFromString(e,"text/xml"),null!=o&&n.getElementsByTagNameNS(o,"parsererror").length>0&&(n=null)}catch(e){n=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e);return n},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?l(e):e},this.xml2json=function(e){return u(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return S(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return E}}}),angular.module("ngIOS9UIWebViewPatch",["ng"]).config(["$provide",function(e){e.decorator("$browser",["$delegate","$window",function(e,t){function n(e){return/(iPhone|iPad|iPod).* OS 9_\d/.test(e)&&!/Version\/9\./.test(e)}function i(e){function t(){n=null}var n=null,i=e.url;return e.url=function(){return arguments.length?(n=arguments[0],i.apply(e,arguments)):n||i.apply(e,arguments)},window.addEventListener("popstate",t,!1),window.addEventListener("hashchange",t,!1),e}return n(t.navigator.userAgent)?i(e):e}])}]),app.factory("categoriesService",["$q","Categories","Profile",function(e,t,n){var i;i=function(t,n){var i,o=new Worker("js/services/dates-worker.js");return i=e.defer(),o.onmessage=function(e){i.resolve(e.data)},o.postMessage({functionName:t,functionArgs:n}),i.promise};var o=[],r=[],a=[],s=function(e){return t.getAvailableTowns().then(function(t){for(var n=t.data,i=0;i<n.length;i++)n[i].active=!1,n[i].selected=!1,n[i].name==e&&(n[i].active=!0,n[i].selected=!0),i==n.length-1&&(r=n)},function(){s()})},l=function(){return t.getAvailableMusicStyles().then(function(e){var t=e.data;t.unshift({name:"All Music Styles",_id:0});for(var n=0;n<t.length;n++)t[n].active=!1,t[n].selected=!1,"All Music Styles"==t[n].name&&(t[n].active=!0,t[n].selected=!0),n==t.length-1&&(o=t)},function(){l()})},c=function(){return n.getAllUserEngagementTypes().then(function(e){a=e.data},function(){c()})};return{f:function(e,t){if(arguments.length<2)throw new TypeError("Not enough arguments. The first param is a function name as string. The second is an array of data types");if("string"!=typeof arguments[0])throw new TypeError("First parameter must be a string. This is the name of the function");if(!Array.isArray(arguments[1]))throw new TypeError("Second parameter must be an array. This is an array of data to be processed");return i(e,t)},townCategories:function(){return r},musicCategories:function(){return o},userEngagementTypes:function(){return a},addTownCategories:function(e){return s(e)},addMusicCategories:function(e){return l(e)},addUserEngagementTypes:function(){return c()}}}]),app.factory("datesService",["$q",function(e){var t;t=function(t,n){var i,o=new Worker("js/services/dates-worker.js");return i=e.defer(),o.onmessage=function(e){i.resolve(e.data)},o.postMessage({functionName:t,functionArgs:n}),i.promise};var n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],o=function(e,t){return e.chosenWeekday={index:t.getDay(),name:n[t.getDay()]},n[t.getDay()]+", "+t.getDate()+" "+i[t.getMonth()]+" "+t.getFullYear()},r=function(e){var t=e.getDate()<10?"0"+e.getDate():e.getDate(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1;return e.getFullYear()+"-"+n+"-"+t},a=function(e,t){return e.chosenWeekday={index:t.getDay(),name:n[t.getDay()]},n[t.getDay()]+" "+t.getDate()+" "+i[t.getMonth()]+" "+t.getFullYear()},s=function(e){return-1==e.indexOf(" ")?e:e.substr(0,e.indexOf(" "))};return{f:function(e,n){if(arguments.length<2)throw new TypeError("Not enough arguments. The first param is a function name as string. The second is an array of data types");if("string"!=typeof arguments[0])throw new TypeError("First parameter must be a string. This is the name of the function");if(!Array.isArray(arguments[1]))throw new TypeError("Second parameter must be an array. This is an array of data to be processed");return t(e,n)},days:n,months:i,convertToDate:o,convertToSQLDate:r,convertToDateWithoutComma:a,convertToReadableDate:function(e,t){var n=s(t);return n=o(e,new Date(n))},convertSelectedTimeToShortTimeString:function(e){e.getUTCHours(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCMinutes();return obj.selectedHour+":"+obj.selectedMinutes},getTimeInTotalSeconds:function(e){var t=e.indexOf(" ")+1,n=e.indexOf(":")+1;return 3600*parseInt(e.substr(t,2))+60*e.substr(n,2)},getShortenedDateString:s,getShortenedTimeString:function(e){var t=e.indexOf(" ")+1,n=e.indexOf(":"),i=parseInt(e.substr(t,2)),o=e.substr(n,3),r=i>12?" PM":" AM";return(i=i>12?i-12:i)+o+r}}}]);var functionsObject={convertToReadableDate:function(e){var t=(e[0],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],i=function(e){return e.substr(0,e.indexOf(" "))},o=function(e){return t[e.getDay()]+", "+e.getDate()+" "+n[e.getMonth()]+" "+e.getFullYear()},r=i(dateProp);return r=o(new Date(r))},getShortenedTimeString:function(e){var t=e[0],n=t.indexOf(" ")+1,i=t.indexOf(":"),o=parseInt(t.substr(n,2)),r=t.substr(i,3),a=o>12?" PM":" AM";return(o=o>12?o-12:o)+r+a}};onmessage=function(e){e.data instanceof Object&&e.data.hasOwnProperty("functionName")&&e.data.hasOwnProperty("functionArgs")&&functionsObject[e.data.functionName].apply(self,e.data.functionArgs)},app.factory("listingsService",["$q","datesService",function(e,t){var n;n=function(t,n){var i,o=new Worker("js/services/dates-worker.js");return i=e.defer(),o.onmessage=function(e){i.resolve(e.data)},o.postMessage({functionName:t,functionArgs:n}),i.promise};var i=function(e){e.listingTypes=[],null!=e.listingType1&&e.listingTypes.push(e.listingType1),null!=e.listingType2&&e.listingTypes.push(e.listingType2),null!=e.listingType3&&e.listingTypes.push(e.listingType3)},o=function(e){e.listingTypesCats=[],null!=e.listingTypeCat1&&e.listingTypesCats.push(e.listingTypeCat1),null!=e.listingTypeCat2&&e.listingTypesCats.push(e.listingTypeCat2),null!=e.listingTypeCat3&&e.listingTypesCats.push(e.listingTypeCat3),null!=e.listingTypeCat4&&e.listingTypesCats.push(e.listingTypeCat4)},r=function(e,n){null!=n.lastDate&&(n.lastDate_readable=t.convertToReadableDate(e,n.lastDate))},a=function(e,t,n,s){i(t[n]),o(t[n]),r(e,t[n]),n<t.length-1?a(e,t,n+1,s):("features"==s?e.features=t:"listings"==s&&(e.listings=t),setTimeout(function(){e.pageLoading=!1},150))};return{f:function(e,t){if(arguments.length<2)throw new TypeError("Not enough arguments. The first param is a function name as string. The second is an array of data types");if("string"!=typeof arguments[0])throw new TypeError("First parameter must be a string. This is the name of the function");if(!Array.isArray(arguments[1]))throw new TypeError("Second parameter must be an array. This is an array of data to be processed");return n(e,t)},createListingTypesObjForListing:i,createListingTypesCatObjForListing:o,sortThroughListingsResults:a,processListingBusinessOpeningTimes:function(e){if("Business"==e.listingType){var t=function(e){return null!=e?e.substr(0,e.length-3):e};e.openingTimes=[],e.mondayOpeningTime=t(e.mondayOpeningTime),e.mondayClosingTime=t(e.mondayClosingTime),e.openingTimes.push(["Monday",e.mondayOpeningTime,e.mondayClosingTime]),e.tuesdayOpeningTime=t(e.tuesdayOpeningTime),e.tuesdayClosingTime=t(e.tuesdayClosingTime),e.openingTimes.push(["Tuesday",e.tuesdayOpeningTime,e.tuesdayClosingTime]),e.wednesdayOpeningTime=t(e.wednesdayOpeningTime),e.wednesdayClosingTime=t(e.wednesdayClosingTime),e.openingTimes.push(["Wednesday",e.wednesdayOpeningTime,e.wednesdayClosingTime]),e.thursdayOpeningTime=t(e.thursdayOpeningTime),e.thursdayClosingTime=t(e.thursdayClosingTime),e.openingTimes.push(["Thursday",e.thursdayOpeningTime,e.thursdayClosingTime]),e.fridayOpeningTime=t(e.fridayOpeningTime),e.fridayClosingTime=t(e.fridayClosingTime),e.openingTimes.push(["Friday",e.fridayOpeningTime,e.fridayClosingTime]),e.saturdayOpeningTime=t(e.saturdayOpeningTime),e.saturdayClosingTime=t(e.saturdayClosingTime),e.openingTimes.push(["Saturday",e.saturdayOpeningTime,e.saturdayClosingTime]),e.sundayOpeningTime=t(e.sundayOpeningTime),e.sundayClosingTime=t(e.sundayClosingTime),e.openingTimes.push(["Sunday",e.sundayOpeningTime,e.sundayClosingTime])}}}}]),app.factory("messagesWorkerFS",["$q",function(e){var t;return t=function(t,n){var i,o=new Worker("js/services/messages-worker.js");return i=e.defer(),o.onmessage=function(e){i.resolve(e.data)},o.postMessage({functionName:t,functionArgs:n}),i.promise},{f:function(e,n){if(arguments.length<2)throw new TypeError("Not enough arguments. The first param is a function name as string. The second is an array of data types");if("string"!=typeof arguments[0])throw new TypeError("First parameter must be a string. This is the name of the function");if(!Array.isArray(arguments[1]))throw new TypeError("Second parameter must be an array. This is an array of data to be processed");return t(e,n)},getNameStringForGroup:function(e,t){var n=[],i="";e.participant1!=t._profileId&&n.push(e.participant1Name),e.participant2!=t._profileId&&n.push(e.participant2Name),e.participant3!=t._profileId&&n.push(e.participant3Name),e.participant4!=t._profileId&&n.push(e.participant4Name),e.participant5!=t._profileId&&n.push(e.participant5Name);for(var o=0;o<n.length;o++)if(null!=n[o]&&(o>0&&(e.multipleNames=!0,i+=", "),i+=n[o]),o==n.length-1)return i},getProfilePhotoListForGroup:function(e,t){var n=[];return e.participant1!=t._profileId&&n.push(e.participant1ProfilePhotoName),e.participant2!=t._profileId&&n.push(e.participant2ProfilePhotoName),e.participant3!=t._profileId&&n.push(e.participant3ProfilePhotoName),e.participant4!=t._profileId&&n.push(e.participant4ProfilePhotoName),e.participant5!=t._profileId&&n.push(e.participant5ProfilePhotoName),n}}}]);var functionsObject={addPostsToScope:function(e){for(var t=e[0],n=e[1],i=e[2],o=e[3],r=e[4],a=function(e){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],i=function(e){return e.substr(0,e.indexOf(" "))},o=function(e){return t[e.getDay()]+", "+e.getDate()+" "+n[e.getMonth()]+" "+e.getFullYear()},r=i(e);return r=o(new Date(r))},s=function(e){var t=e.indexOf(" ")+1,n=e.indexOf(":"),i=parseInt(e.substr(t,2)),o=e.substr(n,3),r=i>12?" PM":" AM";return(i=i>12?i-12:i)+o+r},l=function(e){for(var o=i.length-1;o>-1;o--){var a=r.length-1-(i.length-1-o);0==r.length||new Date(i[o])>new Date(r[r.length-1].date)?(r.push({date:i[o],posts:[]}),a=r.length-1):new Date(i[o])<new Date(r[0].date)&&(r.unshift({date:i[o],posts:[]}),a=0);for(var s=t.length-1;s>-1;s--)if(t[s].oldEntry&&r[a].date==t[s].dateString)for(var l=0;l<r[a].posts.length;l++)r[a].posts[l].messageReadState=r[a].posts[l]._id==t[s]._id?t[s].messageReadState:r[a].posts[l].messageReadState,l==r[a].posts.length-1&&0==o&&0==s&&postMessage({messagesIdsArray:n,messagesDatesArray:i,dates:r});else t[s].dateString==r[a].date&&(0==r[a].posts.length||t[s]._id>r[a].posts[0]._id)?r[a].posts.push(t[s]):t[s].dateString==r[a].date&&t[s]._id<r[a].posts[0]._id&&r[a].posts.unshift(t[s]),0==o&&0==s&&postMessage({messagesIdsArray:n,messagesDatesArray:i,dates:r})}},c=t.length-1;c>-1;c--)t[c].dateString=a(t[c].dateTimeSent),t[c].oldEntry=!0,-1==n.indexOf(t[c]._id)&&(n.push(t[c]._id),t[c].dateString=a(t[c].dateTimeSent),0==i.length||new Date(t[c].dateString)>new Date(i[i.length-1])?i.push(t[c].dateString):new Date(t[c].dateString)<new Date(i[0])&&i.unshift(t[c].dateString),t[c]._messageSenderProfileId==o?t[c].from="self":t[c].from="other",t[c].timeString=s(t[c].dateTimeSent),t[c].oldEntry=!1),0==c&&l("initial")},insertMessageReadReceipts:function(e){for(var t=e[0],n=e[1],i=e[2],o=0;o<t.length;o++)t[o].date=i.convertToReadableDate(n,t[o].dateTimeSent),o==t.length-1&&postMessage(t)}};onmessage=function(e){e.data instanceof Object&&e.data.hasOwnProperty("functionName")&&e.data.hasOwnProperty("functionArgs")&&functionsObject[e.data.functionName].apply(self,e.data.functionArgs)},app.factory("pushNotificationsService",["$q","Notifications","$http",function(e,t,n){return{sendNotificationFinal:function(e,t,i,o,r){n({method:"POST",url:"https://onesignal.com/api/v1/notifications",headers:{"Content-Type":"application/json"},port:443,data:{app_id:e,include_player_ids:t,data:r,headings:{en:o},contents:{en:i},ios_badgeType:"Increase",ios_badgeCount:1}}).then(function(e){console.log("success: ",e)},function(e){console.log("fail: ",e)})}}}]),app.factory("socket",function(e){var t=io("https://77.68.8.22:3001/",{origins:"*:*"});return mySocket=e({ioSocket:t}),mySocket}),app.factory("userObjectService",["$q","listingsService","$rootScope","Profile","Notifications","Messages","$timeout","$state",function(e,t,n,i,o,r,a,s){var l;l=function(t,n){var i,o=new Worker("js/services/dates-worker.js");return i=e.defer(),o.onmessage=function(e){i.resolve(e.data)},o.postMessage({functionName:t,functionArgs:n}),i.promise};var c={},d=function(e){e._oneSignalId=e._oneSignalId||0,0!=e._oneSignalId&&i.makeUserActive(e._profileId,e._oneSignalId).success(function(){}).error(function(){d()})},u=function(e){d(e),e._unreadMessageIds=e._unreadMessageIds||[],e._unreadMessageIdsGroupIdsToDisplay=e._unreadMessageIdsGroupIdsToDisplay||[],e.unreadUserUpdates=[]},p=function(e){var t,i;i=function(){var o=!1,a=function(){e.unreadUserUpdatesShown.push(n.currentUnreadUpdate),e.unreadUserUpdatesIdsShown.push(n.currentUnreadUpdate.updateIdString),e.unreadUserUpdates.splice(0,1),o=!0};n.currentUnreadUpdate=e.unreadUserUpdates[0],("app.notificationsSummary"==n.currentViewName&&"Notification"==n.currentUnreadUpdate.type||"app.messageGroups"==n.currentViewName&&"Message"==n.currentUnreadUpdate.type||"app.messageGroup"==n.currentViewName&&"Message"==n.currentUnreadUpdate.type&&r.currentMessageGroupIdBeingViewed==n.currentUnreadUpdate._msgGroupId)&&a(),e.unreadUserUpdates.length>0&&!o?t():e.unreadUserUpdates.length>0&&o&&i()},t=function(){n.showUserUpdate=!0,a(function(){n.showUserUpdate=!1,e.unreadUserUpdatesShown.push(e.unreadUserUpdates[0]),e.unreadUserUpdatesIdsShown.push(e.unreadUserUpdates[0].updateIdString),e.unreadUserUpdates.splice(0,1),e.unreadUserUpdates.length>0?a(function(){p(e)},200):n.$broadcast("savestate")},4e3)},i()},g=function(e,t){if(t>5)return!1;o.getUnreadUserMessagesAndNotificationsSummaryForUpdate(e._profileId).success(function(t){var i=[];if(null!=t)for(var o=!1,a=!1,s=[],l=0;l<t.length;l++)-1==e.unreadUserUpdatesIdsShown.indexOf(t[l].updateIdString)&&(i.push(t[l]),"Notification"==t[l].type?"app.notificationsSummary"!=n.currentViewName?e.currentUnreadNotifications.push(t[l]):o||(n.$broadcast("new-notification-to-get"),o=!0):"Message"==t[l].type&&("app.messageGroups"!=n.currentViewName||a?"app.messageGroup"==n.currentViewName&&r.currentMessageGroupIdBeingViewed==t[l]._msgGroupId&&-1==s.indexOf(t[l]._msgGroupId)?(n.$broadcast("new-message-to-get-for-group"),s.push(t[l]._msgGroupId)):-1==e.currentUnreadMsgGroups.indexOf(t[l]._msgGroupId)&&e.currentUnreadMsgGroups.push(t[l]._msgGroupId):(n.$broadcast("new-message-to-get-for-groups"),a=!0))),l==t.length-1&&i.length>0&&(e.unreadUserUpdates=i,p(e));else e.unreadUserUpdates=i}).error(function(n){g(e,t+1)})};return{f:function(e,t){if(arguments.length<2)throw new TypeError("Not enough arguments. The first param is a function name as string. The second is an array of data types");if("string"!=typeof arguments[0])throw new TypeError("First parameter must be a string. This is the name of the function");if(!Array.isArray(arguments[1]))throw new TypeError("Second parameter must be an array. This is an array of data to be processed");return l(e,t)},user:c,createUserObject:function(e){return c=e,c.unreadUserUpdates=c.unreadUserUpdates||[],c.unreadUserUpdatesShown=c.unreadUserUpdatesShown||[],c.unreadUserUpdatesIdsShown=c.unreadUserUpdatesIdsShown||[],c.currentUnreadNotifications=c.currentUnreadNotifications||[],c.currentUnreadMsgGroups=c.currentUnreadMsgGroups||[],c.userInteractionObject=c.userInteractionObject||{},c.userInteractionObject=void 0!==typeof c.userInteractionObject?c.userInteractionObject:{},c.userInteractionObject.searchesConducted=c.userInteractionObject.searchesConducted||{},void 0!==c._id&&(t.createListingTypesObjForListing(c),n.userLoggedIn=!0,u(c)),c},prepareUsersData:function e(t){return e(t),t},startUsersMessagesAndNotificationsUpdateTimer:function e(t){return n.userLoggedIn&&n.online?(g(t,0),n.userUpdateTimer=a(function(){e(t)},15e3)):n.userUpdateTimer=null,t},getUsersMessagesAndNotificationsUpdateDirectly:function(e){return g(e,0),e},goToUpdate:function(e){"Message"==e.type?(n.currentNotificationType=null,"app.profile"!=n.currentViewName&&"app.messageGroups"!=n.currentViewName&&"app.messageGroup"!=n.currentViewName&&s.go("app.profile"),a(function(){"app.messageGroups"!=n.currentViewName&&s.go("app.messageGroups",{relListing:null,groupType:e.msgGroupType}),a(function(){s.go("app.messageGroup",{_id:e._msgGroupId,groupType:e.msgGroupType})},50)},50)):"Notification"==e.type&&("app.profile"!=n.currentViewName&&"app.notifications"!=n.currentViewName&&s.go("app.profile"),a(function(){"app.notifications"!=n.currentViewName&&s.go("app.notifications")},50))},removeUnreadMessageGroup:function(e,t){if(-1!=e.currentUnreadMsgGroups.indexOf(t)&&e.currentUnreadMsgGroups.splice(e.currentUnreadMsgGroups.indexOf(t),1),e.unreadUserUpdates.length>0)for(var i=e.unreadUserUpdates.length-1;i>-1;i--)e.unreadUserUpdates[i]._msgGroupId==t&&e.unreadUserUpdates.splice(i,0),0==i&&n.$broadcast("savestate");else n.$broadcast("savestate");return e},removeUnreadNotifications:function(e){if(e.currentUnreadNotifications=[],e.unreadUserUpdates.length>0)for(var t=e.unreadUserUpdates.length-1;t>-1;t--)"Notification"==e.unreadUserUpdates[t].type&&e.unreadUserUpdates.splice(t,0),0==t&&n.$broadcast("savestate");else n.$broadcast("savestate");return e}}}]);